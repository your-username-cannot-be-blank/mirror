[
    {
        "id": 72335,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-12T16:49:23.715Z",
        "cooked": "<h1><a name=\"p-72335-vless-vps-1\" class=\"anchor\" href=\"#p-72335-vless-vps-1\"></a>Как реализовать веб-сервер и VLESS на одном VPS?</h1>\n<p>Добрый день!</p>\n<p>Имеется:</p>\n<ol>\n<li>Один VPS (Debian 12) с xray, настроенный на три протокола.</li>\n<li>Второй VPS (Debian 12) c веб-сервером. Apache2, mariadb-server, phpMyAdmin, composer. Сам сайт - банальная html-ка - заглушка, собранная за пару минут в конструкторе сайтов.</li>\n<li>Желание не платить за два VPS, а поставить все на одном с SNI в лице моего собственного сайта.</li>\n<li>Большая удаленная статья сами-знаете-о-чем, где был краткий раздел про то, что это реально, нужно только заставить веб-сервер слушать localhost на нестандартном порте.</li>\n<li>Полнейший нуб, не имеющий никакого опыта в разработке и сетях. Который умеет только следовать подробным инструкциям. Максимум, что я могу - догадаться, что если какая-то команда не срабатывает - возможно надо сделать apt install с первым словом из команды <img src=\"https://ntc.party/images/emoji/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></li>\n</ol>\n<p>Далее постараюсь кратко про весь процесс:</p>\n<ul>\n<li>Поставил веб-сервер, сайт работает, все супер.</li>\n<li>Почитал ту статью, погуглил как заставить Apache слушать только определенные IP и порты, для верности уточнил еще и у ChatGPT.</li>\n<li>Установил xray, конфиг скопировал предыдущий (до переустановки сервера), поменял только SNI, UUID и приватный ключ. Результат - xray при старте выдал ошибку. Собрал конфиг с нуля - то же самое.</li>\n<li>Предположил, что уже в этот момент возник конфликт с веб-сервером. Полез в конфиг ports в Apache и его же конфиг виртуального хоста.</li>\n<li>В первом увидел три строчки - базовая (с 80 портом) и еще две с ним же. Как я понял - одна (mod_gnutls.c) про какие-то Apache’ные штуки, другая для сертификата let’s encrypt (т.к. там было слово SSL). Во втором конфиге - аналогично 80 порт для виртуального хоста. Недолго думая, заменил все 4 строчки на 127.0.0.1:12345, сохранил, systemctl restart apache2 - и вылезла ошибка. Далее откатывал каждую из 4 строчек до дефолтного 80 порта - то же самое. Откатил оба конфига в изначальное состояние - и снова ошибка. Финишом стало то, что после перезагрузки VPS я не смог подключиться к нему по SSH, и его пришлось переустанавливать.<br>\nP.S. Не исключаю, что проблема с Apache возникла не в момент изменения конфигов, а в момент установки и запуска xray.</li>\n</ul>\n<p>Вопросы:<br>\nа) как подружить xray с apache (если это возможно)? Если можно - что конкретно, где и как указать руками, иначе я не разберусь (мне уже попадались упоминания каких-то правок в iptables)<br>\nб) какие порты за что в них отвечают, как правильно их “подружить”? Например, по какому порту в итоге можно будет попасть на мой сайт, а по какому - в админку? И по какому порту обращаться к xray. Учитывая, что они указываются:</p>\n<ul>\n<li>в конфиге xray в разделе inbound (входной порт для xray, как я понимаю);</li>\n<li>в нем же - порт для SNI (моего сайта);</li>\n<li>3 порта в конфиге Apache для вышеуказанных целей;</li>\n<li>порт виртуалки в отдельном конфиге Apache.</li>\n</ul>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T16:49:23.715Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 656,
        "reads": 185,
        "readers_count": 184,
        "score": 3287.0,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/1",
        "can_translate": false
    },
    {
        "id": 72343,
        "name": "",
        "username": "Xunlei",
        "avatar_template": "/letter_avatar_proxy/v4/letter/x/8e7dd6/{size}.png",
        "created_at": "2024-12-12T17:14:52.504Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"aggravatingbee\" data-post=\"1\" data-topic=\"13773\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/a/b2d939/48.png\" class=\"avatar\"> aggravatingbee:</div>\n<blockquote>\n<p>я не смог подключиться к нему по SSH, и его пришлось переустанавливать</p>\n</blockquote>\n</aside>\n<p>Рекомендую учиться на локальной виртуальной машине с самоподписанным сертификатом, механизм снапшотов позволит быстро откатывать изменения. Затем рабочие конфигурации можно применить на VPS.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T17:14:52.504Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 172,
        "readers_count": 171,
        "score": 49.4,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 2060,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/2",
        "can_translate": false
    },
    {
        "id": 72347,
        "name": "",
        "username": "sakontwist",
        "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png",
        "created_at": "2024-12-12T17:29:02.296Z",
        "cooked": "<p>Есть вариант “веб-сервер” позади vless (через fallback и только для варианта vision, с reality вроде как fallback не используется)<br>\nЕсть вариант веб-сервер перед vless с разделением по доменам в sni.</p>\n<p>Но к сожалению примеры конфигурации видел только для caddy и nginx.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T17:29:02.296Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 161,
        "readers_count": 160,
        "score": 37.2,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 863,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/3",
        "can_translate": false
    },
    {
        "id": 72351,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-12T17:42:03.033Z",
        "cooked": "<p>В правилах инбаунда? Можно пример, если не сложно?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T17:42:27.479Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 152,
        "readers_count": 151,
        "score": 45.4,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "Xunlei",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/8e7dd6/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/4",
        "can_translate": false
    },
    {
        "id": 72352,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-12T17:42:41.538Z",
        "cooked": "<p>Edit: Ответил не туда)</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T17:43:20.343Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 148,
        "readers_count": 147,
        "score": 44.6,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "Xunlei",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/8e7dd6/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/5",
        "can_translate": false
    },
    {
        "id": 72379,
        "name": "Roman",
        "username": "Nocturnal-ru",
        "avatar_template": "/user_avatar/ntc.party/nocturnal-ru/{size}/1556_2.png",
        "created_at": "2024-12-12T18:51:54.362Z",
        "cooked": "<p>Использую такой кейс, только сервер nginx. Слушает 443, 8443, 80 порты 3xui, в случае если авторизация клиента не прошла (это цензор или кто-то любопытствующий), то перекидывает на nginx (какой-то внутренний порт используем</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-12T18:51:54.362Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 140,
        "readers_count": 139,
        "score": 33.0,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "Roman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/6",
        "can_translate": false
    },
    {
        "id": 72576,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-14T09:24:59.553Z",
        "cooked": "<p>Всем спасибо за ответы! Все получилось.</p>\n<p>Сначала пришлось помучаться с попытками подружить haproxy с apache (до установки xray даже не добрался, т.к. не смог настроить маршрутизацию на сайт).</p>\n<p>В итоге снёс сервер, поставил nginx с переадресацией либо на сайт на нём же или xray. Сайт заработал, xray - не заработал. На стороне сервера xray выдавал ошибку, пока не отключил reality. Клиент “ругался” перестал ругаться на TLS после отключения flow, и начал выдавать ошибку “в доступе отказано”.</p>\n<p>В итоге поставил “шлюзом” все-таки сам xray, с распределением трафика через fallback в зависимости от наличия path.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T09:24:59.553Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 114,
        "readers_count": 113,
        "score": 47.8,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/7",
        "can_translate": false
    },
    {
        "id": 72578,
        "name": "",
        "username": "xofamim548",
        "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png",
        "created_at": "2024-12-14T09:53:41.901Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"aggravatingbee\" data-post=\"7\" data-topic=\"13773\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/a/b2d939/48.png\" class=\"avatar\"> aggravatingbee:</div>\n<blockquote>\n<p>В итоге поставил “шлюзом” все-таки сам xray, с распределением трафика через fallback в зависимости от наличия path.</p>\n</blockquote>\n</aside>\n<p>Слушайте, я почему fallback? Возможно, я чего-то упускаю, но по идее reality в режиме steal oneself прекрасно работает по такой схеме:</p>\n<pre><code class=\"lang-auto\">\"inbounds\": [\n    {\n      \"port\": 443,\n      \"protocol\": \"vless\",\n      \"tag\": \"vless_tls\",\n      \"settings\": {\n        \"clients\": [\n          {\n            \"id\": \"$ID_HERE\",\n            \"email\": \"user1@myserver\",\n            \"flow\": \"xtls-rprx-vision\"\n          }\n        ],\n        \"decryption\": \"none\"\n      },\n      \"streamSettings\": {\n        \"network\": \"tcp\",\n        \"security\": \"reality\",\n\t\t\"realitySettings\": {\n\t\t\t\"show\": false,\n\t\t\t\"dest\": \"127.0.0.1:12345\", // СЕРВЕР СЛУШАЕТ ЗДЕСЬ\n\t\t\t\"serverNames\": [\n\t\t\t\t\"$DOMAIN_NAME_HERE\"\n\t\t\t],\n\t\t\t\"privateKey\": \"$PRIVATE_KEY_HERE\",\n\t\t\t\"minClientVer\": \"\",\n\t\t\t\"maxClientVer\": \"\",\n\t\t\t\"maxTimeDiff\": 0,\n\t\t\t\"shortIds\": [\n\t\t\t\t\"$SHORT_ID_HERE\"\n\t\t\t]\n\t\t}\n      },\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": [\n          \"http\",\n          \"tls\",\n\t\t  \"quic\"\n        ]\n      }\n    }\n  ]\n</code></pre>\n<p>В этом случае xray слушает 443 и перенаправляет все прочее на localhost 12345, который в вашем случае слушает nginx. Повторюсь, возможно что-то упускаю, но в целом маскировка под свой сайт сейчас настраивается как-то так.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T09:53:54.041Z",
        "reply_count": 2,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 15,
        "reads": 116,
        "readers_count": 115,
        "score": 108.2,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3793,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/8",
        "can_translate": false
    },
    {
        "id": 72584,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-14T11:11:30.813Z",
        "cooked": "<p>Попробовал запустить ваш конфиг - xray на стороне сервера все так же наотрез отказывается запускаться с включенным reality, как и в сценарии, в котором я пытался поставить nginx “до” xray.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T11:11:30.813Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 107,
        "readers_count": 106,
        "score": 46.4,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "xofamim548",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/9",
        "can_translate": false
    },
    {
        "id": 72586,
        "name": "",
        "username": "xofamim548",
        "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png",
        "created_at": "2024-12-14T11:19:25.639Z",
        "cooked": "<p>Это странно. А что в <code>journalctl -u xray -e</code> после неудачной попытки запуска xray?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T11:19:25.639Z",
        "reply_count": 2,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 128,
        "readers_count": 127,
        "score": 60.6,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "aggravatingbee",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3793,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/10",
        "can_translate": false
    },
    {
        "id": 72615,
        "name": "",
        "username": "NowAndThen",
        "avatar_template": "/letter_avatar_proxy/v4/letter/n/c0e974/{size}.png",
        "created_at": "2024-12-14T15:36:47.494Z",
        "cooked": "<ol>\n<li>\n<p>Во-первых, надо где покупали домен настроить DNS запись A-типа, чтобы указывала на IP вашего сервера c Xray. Займет какое-то время. Когда ping по имени сервера начнет выдавать ваш новый IP адрес, движемся дальше.</p>\n</li>\n<li>\n<p>Ставим nginx.</p>\n</li>\n</ol>\n<pre><code class=\"lang-auto\">sudo apt update\nsudo apt install nginx\n</code></pre>\n<p>Конфигурации серверов на nginx живут в папке</p>\n<p><code>etx/nginx/sites-available</code></p>\n<p>Сcылка на текущий рабочий конфиг должна быть в</p>\n<p><code>etx/nginx/sites-enabled</code></p>\n<p>По умолчанию там лежит конфиг default. Если выкинуть из него все каменты, вот минимально рабочий конфиг.</p>\n<pre><code class=\"lang-auto\">server {\n\n\troot /var/www/html;\n\tindex index.html index.htm index.nginx-debian.html;\n\n\tserver_name mydomain.com www.mydomain.com; # Вписать свой домен\n\n\tlocation / {\n\t\ttry_files $uri $uri/ =404;\n\t}\n}\n</code></pre>\n<ol start=\"3\">\n<li>Дальше нужно установить SSL сертификаты для сайта.</li>\n</ol>\n<p>Устанавливаем скрипт Certbot</p>\n<p><code>sudo apt install python3-certbot-nginx</code></p>\n<p>Генерируем сертификат. Впишите свой домен.</p>\n<p><code>sudo certbot --nginx -d mydomain.com -d www.mydomain.com</code></p>\n<p>Certbot этой командой сам изменит конфиг Nginx, так что он теперь будет выглядеть вот так.</p>\n<pre><code class=\"lang-auto\">server {\n\n\troot /var/www/html;\n\tindex index.html index.htm index.nginx-debian.html;\n\n\tserver_name mydomain.com www.mydomain.com;\n\n\tlocation / {\n\t\ttry_files $uri $uri/ =404;\n\t}\n\n\tlisten [::]:443 ssl ipv6only=on; # managed by Certbot\n\tlisten 443 ssl; # managed by Certbot\n\tssl_certificate /etc/letsencrypt/live/mydomain.com/fullchain.pem; # managed by Certbot\n\tssl_certificate_key /etc/letsencrypt/live/mydomain.com/privkey.pem; # managed by Certbot\n\tinclude /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n\tssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n}\nserver {\n    if ($host = mydomain.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n\tlisten 80 default_server;\n\tlisten [::]:80 default_server;\n\n\tserver_name mydomain.com;\n\treturn 404; # managed by Certbot\n}\n</code></pre>\n<p>Теперь Nginx и Xray конфликтуют, потому что оба слушают 443 порт. Если выключить Xray или перенастроить его на другой порт, это конфиг должен при обращении к сайту выдавать стандартную заглушку Nginx.</p>\n<ol start=\"4\">\n<li>Теперь в конфиге Nginx надо закомментить строчки, слушающие 443.</li>\n</ol>\n<pre><code class=\"lang-auto\">#\tlisten [::]:443 ssl ipv6only=on; # managed by Certbot\n#\tlisten 443 ssl; # managed by Certbot\n</code></pre>\n<p>И заставить его вместо этого слушать localhost на порту, который мы потом впишем в Xray</p>\n<p><code>\tlisten 127.0.0.1:1234 ssl http2;</code></p>\n<p>Второй серверный блок на 80 порту оставляем как есть, чтобы Сертбот мог обновлять сертификат.</p>\n<p>Проверяем синтаксис конфига командой</p>\n<p><code>nginx -t</code></p>\n<p>И перезапускаем сервер</p>\n<p><code>systemctl restart nginx</code></p>\n<ol start=\"5\">\n<li>\n<p>Осталось только настроить Xray. Настраиваете все как обычно, чтобы он слушал 443. Если у вас security = Reality, то в поле dest оно же target, там где вы обычно воруете <a href=\"http://google.com:443\" rel=\"noopener nofollow ugc\">google.com:443</a> прописываете вместо этого 127.0.0.1:1234. Это схема называется “steal oneself”, т.е. мы как бы воруем хендшейк у своего же сервера. Если security = TLS, то нужно прописать fallback, где опять же в поле dest указываем 127.0.0.1:1234, все будет работать так же.</p>\n</li>\n<li>\n<p>Если все настроили правильно, то теперь кидаем свой сайт-заглушку в папку var/www/html и Xray будет слушать 443 порт и принимать VLESS соединение, если вы проходите за своего и перебрасывать на Nginx все прочие запросы.</p>\n</li>\n</ol>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T16:28:28.831Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 69,
        "reads": 136,
        "readers_count": 135,
        "score": 372.2,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://google.com:443",
                "internal": false,
                "reflection": false,
                "clicks": 5
            },
            {
                "url": "https://ntc.party/t/vless-reality-%D0%BC%D0%B0%D1%81%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D0%BE%D0%B4-%D1%81%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D1%81%D0%B0%D0%B9%D1%82/14160/13",
                "internal": true,
                "reflection": true,
                "title": "VLESS Reality маскировка под собственный сайт",
                "clicks": 7
            },
            {
                "url": "https://ntc.party/t/vless-reality-%D0%B2-%D1%81%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%BC-%D0%B4%D0%BE%D0%BC%D0%B5/14356/2",
                "internal": true,
                "reflection": true,
                "title": "VLESS Reality в собственном доме",
                "clicks": 1
            },
            {
                "url": "https://ntc.party/t/%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B-%D0%BF%D1%80%D0%BE-%D0%B2%D0%BB%D0%B5%D1%81%D1%81-%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D1%82%D0%B8/14257/3",
                "internal": true,
                "reflection": true,
                "title": "Вопросы про влесс реалити",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "xofamim548",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8269,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/11",
        "can_translate": false
    },
    {
        "id": 72640,
        "name": " ",
        "username": "PlavaliZnaem",
        "avatar_template": "/user_avatar/ntc.party/plavaliznaem/{size}/8180_2.png",
        "created_at": "2024-12-14T17:42:43.807Z",
        "cooked": "<p>Кому интересно, как сделал я. В качестве прокси выступает сам vless xray, который слушает 443 порт, nginx слушает на 44443 порту. Если пришел легитимный запрос к прокси, работает vless, если любой другой, то отправляется на nginx, который показывает сайт-заглушку, либо, если в запросе указан верный путь, обращается к панеле 3x-ui (работает на порту 18443). В самой панели убираем ссылки на файлы сертификатов, панель слушает только с адреса 127.0.0.1. SNI - ваш сайт, dest: 127.0.0.1:44443</p>\n<pre><code class=\"lang-auto\"># Переадресация с HTTP (80) на HTTPS (443)\nserver {\n    listen 80;\n    server_name my.site;\n\n    # Перенаправление на HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 127.0.0.1:44443 ssl;\n    server_name my.site;\n\n    # Укажите путь к SSL-сертификатам\n    ssl_certificate             /root/ssl/certs/fullchain.cer;\n    ssl_certificate_key         /root/ssl/certs_ecc/my.site.key;\n   \n    # Настройки SSL\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers on;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n\n    # Корневая директория для сайта\n    root /var/www/html;\n    index index.html index.htm;\n\n    # Обработка запросов\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    # Обработка запроса к /panelpath/\n    location /panelpath/ {\n        proxy_pass http://127.0.0.1:18443;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T17:44:12.989Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 115,
        "readers_count": 114,
        "score": 178.0,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": " ",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5411,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/12",
        "can_translate": false
    },
    {
        "id": 72648,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-14T18:50:42.628Z",
        "cooked": "<p>Судя по всему я как-то неправильно чекал журнал (через journal -xeu). Сейчас уже не хочу снова менять конфиг, чтобы чекнуть ошибки)</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T18:50:42.628Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 107,
        "readers_count": 106,
        "score": 26.4,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "xofamim548",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/13",
        "can_translate": false
    },
    {
        "id": 72649,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-14T18:56:20.449Z",
        "cooked": "<p>Инструкция - супер, жаль пришлось самостоятельно разбираться через chatgpt. Есть идеи почему у меня не запускается xray с reality? Даже если брать конфиг от xofamim548. Xray слушает 443, nginx - виртуальный порт. Сертификаты от let’s encrypt есть, сайт есть, всё - как в инструкции.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T18:56:20.449Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 112,
        "readers_count": 111,
        "score": 52.4,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-vless-tcp-reality/13827/2",
                "internal": true,
                "reflection": true,
                "title": "Странная работа vless tcp Reality",
                "clicks": 4
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "NowAndThen",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/n/c0e974/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/14",
        "can_translate": false
    },
    {
        "id": 72653,
        "name": "",
        "username": "NowAndThen",
        "avatar_template": "/letter_avatar_proxy/v4/letter/n/c0e974/{size}.png",
        "created_at": "2024-12-14T19:31:21.815Z",
        "cooked": "<p>Разбирайтесь по-отдельности. Чтобы Xray сам по себе работал и сайт на Nginx сам по себе. А увязать их это всего две строчки, как вы поняли, в тот и в тот конфиги одинаковый внутренний порт прописать.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-14T19:31:21.815Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 111,
        "readers_count": 110,
        "score": 92.2,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8269,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/15",
        "can_translate": false
    },
    {
        "id": 72821,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2024-12-16T14:33:51.018Z",
        "cooked": "<p>Добрый день! Пока ковырялся со своим сервером - случайно наткнулся на <a href=\"https://github.com/XTLS/Xray-core/issues/2578\" rel=\"noopener nofollow ugc\">старенькую тему.</a>. Как я понимаю - разницы между tls+xtls+fallback и reality особо никакой, но reality мне (субъективно, как человеку, который в этом глубоко не шарит) кажется более более сложной, замороченной (маскировка под собственный сайт, когда у тебя он реально есть и есть сертификаты?) и приоритетной для блокировок (т.к. собственный веб-сервер, домен и сертификаты имеются у меньшинства людей).</p>\n<p>Ну и пока я не плюнул на попытки настроить routing на сервере - структура с fallback мне казалась лаконичнее.</p>\n<p>P.S. Не обратил внимание на localhost в ваших настройках в dest, из-за которого у меня не работал reality. Случайно наткнулся в одной статье, и - да - я просто не заметил)</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2024-12-16T14:33:51.018Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 13,
        "reads": 103,
        "readers_count": 102,
        "score": 85.6,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/XTLS/Xray-core/issues/2578",
                "internal": false,
                "reflection": false,
                "title": "\"TLS + Vision + Fallback\" vs \"REALITY with steal oneself\" · Issue #2578 · XTLS/Xray-core · GitHub",
                "clicks": 18
            },
            {
                "url": "https://ntc.party/t/vless-%D1%82%D1%80%D0%B8-%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4%D0%B0-%D0%BA%D0%B0%D0%BA%D0%BE%D0%B9-%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D0%BB%D0%B8-%D0%B2%D1%8B-%D0%B8-%D0%BF%D0%BE%D1%87%D0%B5%D0%BC%D1%83/13835",
                "internal": true,
                "reflection": true,
                "title": "VLESS: три подхода. Какой выбрали вы и почему?",
                "clicks": 10
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "xofamim548",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/x/a698b9/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/16",
        "can_translate": false
    },
    {
        "id": 81388,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2025-01-25T10:24:13.825Z",
        "cooked": "<p>Обратил внимание, что сайт начал выдавать ошибку 400, сам xray работает. Пытался ковыряться в настройках c chatgpt, менял порты, переустанавливал сертификаты - ничего не помогает. То же самое, если меняю tls на reality. Может кто-нибудь, пожалуйста, чекнуть конфиг сайта и инбаунд? Не пойму, что не так.</p>\n<p><strong>Конфиг</strong></p>\n<pre><code class=\"lang-auto\">server {\n    listen 127.0.0.1:44443 ssl http2;\n\n    server_name example.com www.example.com;\n\n    root /var/www/example.com/html;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384';\n    ssl_prefer_server_ciphers on;\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;\n\n}\n\nserver {\n    if ($host = www.example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n    if ($host = example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n    listen 80;\n    server_name example.com www.example.com;\n    return 301 https://$server_name$request_uri;\n\n}\n\nerror_log /var/log/nginx/error.log debug;\n\n\n</code></pre>\n<p><strong>Инбаунд:</strong></p>\n<pre><code class=\"lang-auto\">      {\n      \"port\": 443,\n      \"protocol\": \"vless\",\n      \"tag\": \"vless_tls\",\n      \"settings\": {\n        \"clients\": [\n          {\n            \"id\": \"your-id\",\n            \"email\": \"email\",\n            \"flow\": \"xtls-rprx-vision\"\n          }\n        ],\n        \"decryption\": \"none\",\n        \"fallbacks\": [\n          {\n            \"path\": \"/your-path\",\n            \"dest\": \"@vless-ws\"\n          },\n          {\n            \"dest\": \"44443\"\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"tcp\",\n        \"security\": \"tls\",\n        \"tlsSettings\": {\n          \"alpn\": [\n            \"http/1.1\",\n            \"h2\"\n          ],\n          \"certificates\": [\n            {\n              \"certificateFile\": \"/etc/letsencrypt/live/example.com/fullchain.pem\",\n              \"keyFile\": \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            }\n          ]\n        }\n      },\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": [\n          \"http\",\n          \"tls\"\n        ]\n      }\n    },\n</code></pre>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2025-01-25T10:24:13.825Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 63,
        "readers_count": 62,
        "score": 32.6,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/17",
        "can_translate": false
    },
    {
        "id": 81470,
        "name": "",
        "username": "sakontwist",
        "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png",
        "created_at": "2025-01-25T20:24:33.445Z",
        "cooked": "<p>у меня работает с раздедением 1.1 и h2 (канонично по мануалам):</p>\n<pre><code class=\"lang-auto\">\"fallbacks\": [\n        {\n                \"dest\": \"8003\"\n        },\n        {\n                \"alpn\": \"h2\", \"dest\": \"8004\"\n        }\n]\n</code></pre>\n<p>и попробуйте</p>\n<pre><code class=\"lang-auto\">\"alpn\": [\"h2\", \"http/1.1\"],\n</code></pre>\n<p>в tlsSettings (<a href=\"https://github.com/XTLS/Xray-docs-next/blob/main/docs/ru/config/features/fallback.md\" class=\"inline-onebox\">Xray-docs-next/docs/ru/config/features/fallback.md at main · XTLS/Xray-docs-next · GitHub</a>)</p>\n<p>Либо уберите h2 из stream и из nginx<br>\nС reality fallbacks вроде как не поддерживаются, только с tls, но не уверен на 100%</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2025-01-25T20:25:28.961Z",
        "reply_count": 1,
        "reply_to_post_number": 17,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 50,
        "readers_count": 49,
        "score": 75.0,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/XTLS/Xray-docs-next/blob/main/docs/ru/config/features/fallback.md",
                "internal": false,
                "reflection": false,
                "title": "Xray-docs-next/docs/ru/config/features/fallback.md at main · XTLS/Xray-docs-next · GitHub",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "aggravatingbee",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 863,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/18",
        "can_translate": false
    },
    {
        "id": 81621,
        "name": "",
        "username": "aggravatingbee",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png",
        "created_at": "2025-01-26T14:31:36.354Z",
        "cooked": "<p>Я так понимаю вы про <a href=\"https://github.com/XTLS/Xray-examples/blob/main/VLESS-TCP-TLS%20(maximal%20by%20rprx)/config_server.jsonc\" rel=\"noopener nofollow ugc\">этот мануал?</a>) Прошерстил вчера все, и ничего готового для “совсем маленьких” не нашел.</p>\n<p>Я не понимаю:</p>\n<ol>\n<li>Зачем нужны 2 dest? Предположим 8003 - это nginx на локалхосте, а 8004 для чего? Мне казалось, что достаточно определить признак, по которому ты либо остаешься с xray, либо он шлет тебя куда подальше (в nginx), очищая для nginx запрос от xray-евских параметров, чтобы он не сошел с ума? Или это про отдельные порты для серверов nginx под разные версии http (где-то прочитал про это), и разные версии надо слушать на разных портах?</li>\n<li>Само определение что отправлять в fallback у вас работает по признаку secretpath?</li>\n<li>Я понял, что абсолютно не понимаю как работают эти признаки для fallback. Xray шлёт через fallback на другой порт всё, что не подходит под его строгие критерии в конфиге, в том числе мусор, который nginx не разберет? Или он всегда “упаковывает” запрос в понятный формат, удаляя все то, что nginx/apache и прочее не поймет?</li>\n</ol>\n<p>P.S. Насколько я понимаю - моя проблема, скорее всего, реально в том, что xray форвардит в nginx какой-то мусор, который он не понимает. Может дело реально в версиях протокола. Попробую ваш вариант.</p>",
        "post_number": 19,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2025-01-26T14:34:37.382Z",
        "reply_count": 1,
        "reply_to_post_number": 18,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 48,
        "readers_count": 47,
        "score": 49.6,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/XTLS/Xray-examples/blob/main/VLESS-TCP-TLS%20(maximal%20by%20rprx)/config_server.jsonc",
                "internal": false,
                "reflection": false,
                "title": "Xray-examples/VLESS-TCP-TLS (maximal by rprx)/config_server.jsonc at main · XTLS/Xray-examples · GitHub",
                "clicks": 6
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "sakontwist",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8668,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/19",
        "can_translate": false
    },
    {
        "id": 81631,
        "name": "",
        "username": "sakontwist",
        "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png",
        "created_at": "2025-01-26T17:12:01.600Z",
        "cooked": "<ol>\n<li>Да, два dest делаются для разных версий alpn. В nginx делаются два разных listener (<a href=\"https://github.com/XTLS/Xray-examples/blob/main/VLESS-TCP-XTLS-Vision/nginx.conf\" class=\"inline-onebox\">Xray-examples/VLESS-TCP-XTLS-Vision/nginx.conf at main · XTLS/Xray-examples · GitHub</a>)</li>\n<li>Я не использую никакие критерии, fallback у меня ведет на nginx, который просто распределяет запросы по вполне обычным сервисам, которые у меня работают “за xray/nginx”</li>\n<li>В fallback отправляется оригинальный запрос но после раскрытия шифрования, если он не прошел проверку на содержание необходимого uuid/shortid. Дальше выполняется проверка условий, определенных в fallback. Если в запросе был мусор, подходящий под условия fallback, то и мусор тоже. Никаких дополнительных действий xray не делает - если это не “его” пакет, то пакет летит в fallback - дальше не его проблема. Единственно что он может сделать - сохранить оригинальный realIP с помощью PROXY protocol</li>\n</ol>\n<p>По ссылке выше в репозитории есть много вариантов - и nginx перед xray и nginx за xray, оба варианта рабочие. Если там нет подходящего, можно посмотреть примеры тут (<a href=\"https://github.com/chika0801/Xray-examples\" class=\"inline-onebox\">GitHub - chika0801/Xray-examples: Xray 配置示例</a>)</p>",
        "post_number": 20,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2025-01-26T17:12:01.600Z",
        "reply_count": 0,
        "reply_to_post_number": 19,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 41,
        "readers_count": 40,
        "score": 28.2,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/chika0801/Xray-examples",
                "internal": false,
                "reflection": false,
                "title": "GitHub - chika0801/Xray-examples: Xray 配置示例",
                "clicks": 1
            },
            {
                "url": "https://github.com/XTLS/Xray-examples/blob/main/VLESS-TCP-XTLS-Vision/nginx.conf",
                "internal": false,
                "reflection": false,
                "title": "Xray-examples/VLESS-TCP-XTLS-Vision/nginx.conf at main · XTLS/Xray-examples · GitHub",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "aggravatingbee",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/b2d939/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 863,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/20",
        "can_translate": false
    },
    {
        "id": 81655,
        "name": "",
        "username": "armdyn",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/c0e974/{size}.png",
        "created_at": "2025-01-26T20:38:44.935Z",
        "cooked": "<p>С Reality и со своим веб сервером настройка куда проще и конфиг Xray короче выходит. Не нужны никакие фоллбэки и дополнительные параметры с путями сертификатов. Всё что нужно сделать, это перенести Nginx или Apache с 443 допустим на 8443 порт (80 оставить как есть), а конфиге Xray просто в dest указать вместо условного <a href=\"http://yahoo.com:443\" rel=\"noopener nofollow ugc\">yahoo.com:443</a>, под который маскировались ранее, свой локалхост 127.0.0.1:8443. И всё. Больше вообще ничего трогать не нужно, всё отлично работает. Единственный момент, если ваши подключения не опознаны, по понятным причинам в логах xray будет писать</p>\n<details>\n<summary>\nСпойлер</summary>\n<p>[Info] transport/internet/tcp: REALITY: processed invalid connection</p>\n</details>\n<p>Но лично меня это не парит.<br>\nКстати, такая схема очень удобна, когда сервак уже находится в эксплуатации с настоящим коммерческим сайтом, и когда не хочется лишний раз ничего мудрить, чтобы не поломать.</p>",
        "post_number": 21,
        "post_type": 1,
        "posts_count": 21,
        "updated_at": "2025-01-26T20:39:31.334Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 34,
        "readers_count": 33,
        "score": 11.8,
        "yours": false,
        "topic_id": 13773,
        "topic_slug": "%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://yahoo.com:443",
                "internal": false,
                "reflection": false,
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9241,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%B8-vless-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC-vps/13773/21",
        "can_translate": false
    }
]