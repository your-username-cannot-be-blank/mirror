
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>нужна-помощь-с-подключением-к-wireguard-через-vless</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>synzr(mikhail "synzr")</td><td><aside class="quote no-group" data-username="0ka" data-post="4" data-topic="14820" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>проблема решена, автор случайно указал на клиенте ip адрес в /32 подсети (а не /24) из-за чего не создавался маршрут на подсеть wireguard</p>
</blockquote>
</aside>
<h3><a name="p-80989-h-1" class="anchor" href="#p-80989-h-1"></a>Оригинальный текст</h3>
<p>Есть необходимо настроить подключение к WireGuard на зарубежном сервере для проброса портов <em>(короче, использование в качестве белого статического IP-адреса)</em>.</p>
<p>Понятное дело, что подключение напрямую не сработает. Поэтому решил сразу идти тяжелой артиллерии в виде VLESS.</p>
<p>По итогу, смог настроить сервер <em>(WireGuard, XRay)</em> и клиент <em>(контейнизированный OpenWRT, WireGuard, XRay)</em>, но по ощущениям, подключение работает в одну сторону.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="нужна-помощь-с-подключением-к-wireguard-через-vless/5c913cc4c12d9645cf0b4d84f10371de19bc4b59.png" data-download-href="https://ntc.party/uploads/default/5c913cc4c12d9645cf0b4d84f10371de19bc4b59" title="image"><img src="нужна-помощь-с-подключением-к-wireguard-через-vless/5c913cc4c12d9645cf0b4d84f10371de19bc4b59_2_690x410.png" alt="image" data-base62-sha1="dcT60Ap5L2nN8Uxfm0hc9nePWnT" width="690" height="410" srcset="нужна-помощь-с-подключением-к-wireguard-через-vless/5c913cc4c12d9645cf0b4d84f10371de19bc4b59_2_690x410.png, нужна-помощь-с-подключением-к-wireguard-через-vless/5c913cc4c12d9645cf0b4d84f10371de19bc4b59_2_1035x615.png 1.5x, нужна-помощь-с-подключением-к-wireguard-через-vless/5c913cc4c12d9645cf0b4d84f10371de19bc4b59.png 2x" data-dominant-color="323536"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1189×707 153 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="нужна-помощь-с-подключением-к-wireguard-через-vless/17a88589a66ac4916a91582f5c807ab907469530.png" data-download-href="https://ntc.party/uploads/default/17a88589a66ac4916a91582f5c807ab907469530" title="image"><img src="нужна-помощь-с-подключением-к-wireguard-через-vless/17a88589a66ac4916a91582f5c807ab907469530_2_690x202.png" alt="image" data-base62-sha1="3ni2l767hCPJ4czghnxpojiVDtm" width="690" height="202" srcset="нужна-помощь-с-подключением-к-wireguard-через-vless/17a88589a66ac4916a91582f5c807ab907469530_2_690x202.png, нужна-помощь-с-подключением-к-wireguard-через-vless/17a88589a66ac4916a91582f5c807ab907469530.png 1.5x, нужна-помощь-с-подключением-к-wireguard-через-vless/17a88589a66ac4916a91582f5c807ab907469530.png 2x" data-dominant-color="292929"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">954×280 25.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>У меня есть положение, что в моем случае, VLESS не подойдет. Если знаете, как заставить WireGuard работать под VLESS правильно, или просто знаете, что можно предложить вместо VLESS, то пишите.</p></td><td>2025-01-23T19:08:36.639Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="synzr" data-post="1" data-topic="14820">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/synzr/48/15174_2.png" class="avatar"> synzr:</div>
<blockquote>
<p>что можно предложить вместо</p>
</blockquote>
</aside>
<p><a href="https://github.com/Slava-Shchipunov/awg-openwrt/releases/">AmneziaWG openwrt</a><br>
server: <a href="https://github.com/amnezia-vpn/amneziawg-go" class="inline-onebox">GitHub - amnezia-vpn/amneziawg-go: AmneziaWG VPN protocol</a> или <a href="https://github.com/amnezia-vpn/amneziawg-linux-kernel-module" class="inline-onebox">GitHub - amnezia-vpn/amneziawg-linux-kernel-module: AmneziaWG Linux kernel module</a> (параметры обфускации во 2 ссылке, документации так и нет, но конфиги в папке /etc/amnezia/amneziawg/qwe.conf, управление awg-quick).<br>
вообще сервер awg не обязателен, можно обойтись wireguard сервером и awg клиентской частью и указать Jc=5, Jmin=40, Jmax=70, S1=0, S2=0, H1=1, H2=2, H3=3, H4=4</p>
<p>непонятно как настроено сейчас, в firewall openwrt разрешен icmp?</p></td><td>2025-01-23T19:13:24.395Z</td></tr><tr><td>synzr(mikhail "synzr")</td><td><aside class="quote no-group quote-modified" data-username="0ka" data-post="2" data-topic="14820">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>server: <a href="https://github.com/amnezia-vpn/amneziawg-go" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-go: AmneziaWG VPN protocol</a> или <a href="https://github.com/amnezia-vpn/amneziawg-linux-kernel-module" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-linux-kernel-module: AmneziaWG Linux kernel module</a> (параметры обфускации во 2 ссылке, документации так и нет, но конфиги в папке /etc/amneziawg/qwe.conf, управление awg-quick)</p>
</blockquote>
</aside>
<p>использовать AmneziaWG уже пробовал, но у меня на моем провайдере <em>(Интерсвязь, Челябинская обл.)</em> не завелся. поставить awg клиентской частью пробую, если с этим не сможем разберемся.</p>
<aside class="quote no-group" data-username="0ka" data-post="2" data-topic="14820">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>непонятно как настроено сейчас, в firewall openwrt разрешен icmp?</p>
</blockquote>
</aside>
<p>зона под WireGuard есть. пробовал поставить правило на ICMP в файрволе, но результат тот же.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="нужна-помощь-с-подключением-к-wireguard-через-vless/bb5fc88750e4bad7140e1847c89e14171385fc60.png" data-download-href="https://ntc.party/uploads/default/bb5fc88750e4bad7140e1847c89e14171385fc60" title="image"><img src="нужна-помощь-с-подключением-к-wireguard-через-vless/bb5fc88750e4bad7140e1847c89e14171385fc60_2_517x129.png" alt="image" data-base62-sha1="qJAv6Q52jxVgWi1yMA7NqG8ankY" width="517" height="129" srcset="нужна-помощь-с-подключением-к-wireguard-через-vless/bb5fc88750e4bad7140e1847c89e14171385fc60_2_517x129.png, нужна-помощь-с-подключением-к-wireguard-через-vless/bb5fc88750e4bad7140e1847c89e14171385fc60_2_775x193.png 1.5x, нужна-помощь-с-подключением-к-wireguard-через-vless/bb5fc88750e4bad7140e1847c89e14171385fc60.png 2x" data-dominant-color="292A2B"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">962×241 25.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="нужна-помощь-с-подключением-к-wireguard-через-vless/d793c2687d4bb8db6e9e064c98c172bc0316c953.png" data-download-href="https://ntc.party/uploads/default/d793c2687d4bb8db6e9e064c98c172bc0316c953" title="image"><img src="нужна-помощь-с-подключением-к-wireguard-через-vless/d793c2687d4bb8db6e9e064c98c172bc0316c953_2_599x499.png" alt="image" data-base62-sha1="uL5ed6xgCJyfxhNE7iQrdsDiobF" width="599" height="499" srcset="нужна-помощь-с-подключением-к-wireguard-через-vless/d793c2687d4bb8db6e9e064c98c172bc0316c953_2_599x499.png, нужна-помощь-с-подключением-к-wireguard-через-vless/d793c2687d4bb8db6e9e064c98c172bc0316c953.png 1.5x, нужна-помощь-с-подключением-к-wireguard-через-vless/d793c2687d4bb8db6e9e064c98c172bc0316c953.png 2x" data-dominant-color="272727"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">892×744 79.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="нужна-помощь-с-подключением-к-wireguard-через-vless/14b10873c5195ae7157b97f1efe12180facdf8bb.png" data-download-href="https://ntc.party/uploads/default/14b10873c5195ae7157b97f1efe12180facdf8bb" title="image"><img src="нужна-помощь-с-подключением-к-wireguard-через-vless/14b10873c5195ae7157b97f1efe12180facdf8bb_2_517x53.png" alt="image" data-base62-sha1="2X2Q8pr96g3sw2kn60IDp3ZLDTl" width="517" height="53" srcset="нужна-помощь-с-подключением-к-wireguard-через-vless/14b10873c5195ae7157b97f1efe12180facdf8bb_2_517x53.png, нужна-помощь-с-подключением-к-wireguard-через-vless/14b10873c5195ae7157b97f1efe12180facdf8bb.png 1.5x, нужна-помощь-с-подключением-к-wireguard-через-vless/14b10873c5195ae7157b97f1efe12180facdf8bb.png 2x" data-dominant-color="272829"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">755×78 8.68 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2025-01-23T19:26:48.160Z</td></tr><tr><td>0ka(0ka)</td><td><p>проблема решена, автор случайно указал на клиенте ip адрес в /32 подсети (а не /24) из-за чего не создавался маршрут на подсеть wireguard</p></td><td>2025-01-23T20:00:02.309Z</td></tr>
    </table>
      </body>
    </html>