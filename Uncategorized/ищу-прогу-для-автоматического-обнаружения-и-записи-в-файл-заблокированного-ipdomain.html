
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>ищу-прогу-для-автоматического-обнаружения-и-записи-в-файл-заблокированного-ipdomain</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>neo(1eo1)</td><td><p>Здравствуйте</p>
<p>Как уже писал выше ищу прогу для автоматического обнаружения заблокированного IP/domain (похожую по функционалу <a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D1%80%D0%B5%D0%B6%D0%B8%D0%BC-%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%D1%86%D0%B8%D0%B8-autohostlist" rel="noopener nofollow ugc"><strong>autohostlist</strong></a> в <strong>zapret</strong>) с записыванием в файл (хотя бы) и проксированием на socks прокси если заблокирован<br>
Спасибо заранее</p></td><td>2024-11-15T11:54:29.713Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Это как ты себе представляешь? Чем автохостлист не устраивает?<br>
Заблокированный домен будет определяться только если к нему поступил запрос. Просто так никаких сканеров нет, это глупо.</p></td><td>2024-11-15T18:51:15.253Z</td></tr><tr><td>neo(1eo1)</td><td><p>Я это понимаю. Мне надо чтобы зблокированные  IP/domain пpоксировались в socks а не дурить</p></td><td>2024-11-18T12:57:31.594Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Так это другое дело. Тебе нужен PAC по типу обхода блокировок рунета, но с функцией автоопределения. Во-первых, это будет тормозить тебе серфинг, так как каждый запрос будет проверяться, во-вторых это глупо, так как уже есть готовые решения со списком, которые проксируют недоступные и пропускают дальше доступные.</p></td><td>2024-11-18T14:14:48.309Z</td></tr><tr><td>neo(1eo1)</td><td><aside class="quote no-group" data-username="manwithbox" data-post="4" data-topic="13163">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>обхода блокировок рунета</p>
</blockquote>
</aside>
<p>Я не из России<br>
Короче, есть сеть в котором много устройств, также xray по которому идет почти весь трафик. У нас много чего не доступно. Но я не хочу проксировать весь трафик. Соответственно мне надо что-то похожее на <strong>zapret</strong>  с функцией <strong>autohostlist</strong>  и <strong>проксирования</strong>.</p></td><td>2024-11-19T07:52:32.300Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>В любом случае весь трафик будет обрабатываться. Запрет так и работает, <strong>он пропускает через себя весь трафик</strong>, но дурит только необходимый. То же самое можно реализовать и через прокси, через Proxy Auto-Configuration. Или можешь взять исходники запрета и переписать часть с обратным инжектом в стек на внешний прокси.</p></td><td>2024-11-19T08:11:33.901Z</td></tr><tr><td>neo(1eo1)</td><td><aside class="quote no-group" data-username="manwithbox" data-post="6" data-topic="13163">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>можно реализовать и через прокси, через Proxy Auto-Configuration</p>
</blockquote>
</aside>
<p>как это? разве РАС может определить заблокированные хосты/домены что ли?</p>
<aside class="quote no-group" data-username="manwithbox" data-post="6" data-topic="13163">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>взять исходники запрета и переписать часть</p>
</blockquote>
</aside>
<p>к сожалению я не умею программировать</p></td><td>2024-11-19T09:21:38.766Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="neo" data-post="7" data-topic="13163">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/neo/48/2806_2.png" class="avatar"> neo:</div>
<blockquote>
<p>РАС может определить заблокированные хосты/домены</p>
</blockquote>
</aside>
<p>Нет, список заблокированных составляешь вручную. Я уже писал, сканера заблокированных сайтов нет. Поэтому нужно проверять каждый сайт по отдельности. Запрет проверяет сайт если в течение 2 секунд не возращается ответ и пытается применить особую стратегию. Вот я и предлагаю переписать запрет на редирект - это наиболее подходящий по твоим требованиям вариант. Или писать пак для прокси. Или, еще проще, реализовать reverse dns через тот же вайтлист. В этих случаях все равно придется создавать список заблокированных ресурсов.</p></td><td>2024-11-19T09:42:13.815Z</td></tr><tr><td>0ka(0ka)</td><td><p>запрет можно запустить и без опций дурения, в таком случае файл хостлиста должен всё равно пополняться (но я не проверял). для проксирования хостлиста можно резолвить домены и добавлять их в ipset, через iptables помечать пакеты и натить их в tun sing-box например</p></td><td>2025-01-06T15:31:19.491Z</td></tr><tr><td>neo(1eo1)</td><td><p>Если IP адрес не заблокирован, в противном случае аутохост триггер не срабатывает.</p></td><td>2025-01-07T08:53:07.637Z</td></tr><tr><td>bolvan</td><td><p>У аутохостлист есть конкретные триггеры срабатывания, подробно описанные в доке.<br>
По IP может быть разный блок. Может быть весь IP зарезан, может IP:port полностью, а может соединение устанавливаться, но дальше глухарь при любых запросах.<br>
Только последнее из перечисленного сработает</p></td><td>2025-01-07T09:03:29.897Z</td></tr><tr><td>neo(1eo1)</td><td><p>А как насчет добавления функции <strong>“autoIPlist”</strong> - автоматически обнаружение заблокированного IP адреса и добавления в список.</p></td><td>2025-01-07T11:27:37.765Z</td></tr><tr><td>bolvan</td><td><p>Заблокированный адрес может ничем не отличаться от постоянно или временно неработающего адреса.<br>
Если в случае хостлиста при блоке можно начать применять дурение, то в случае IP блока с этим что-то можно сделать только сторонними средствами. Заносить в ипсет какой-нибудь (ipban) и проксировать отдельно. Текстовик потребует какого-то внешнего мониторинга, потому что просто в текстовом виде это мало полезно.<br>
Не стоит выделки. IP баны лучше заносить руками. Сразу думать что заносить один ип , подсеть или ASN</p></td><td>2025-01-07T11:47:27.642Z</td></tr>
    </table>
      </body>
    </html>