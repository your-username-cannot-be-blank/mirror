
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>openvpn-cloak-certificate-is-not-yet-valid-хотя-время-настроено-правильно</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Twistor</td><td><p>Всем привет!</p>
<p>Приобрел новый VPS сервер, настроил OpenVPN, Cloak, по уже отработанной схеме.</p>
<p>При подключении Cloak устанавливает сессию, далее повторяются логи OpenVPN:<br>
2024-10-25 ██:██:██ VERIFY ERROR: depth=1, error=certificate is not yet valid: CN=███████████████████, serial=████████████████████████████████████████████████<br>
2024-10-25 ██:██:██ OpenSSL: error:0A000086:SSL routines::certificate verify failed<br>
2024-10-25 ██:██:██ TLS_ERROR: BIO read tls_read_plaintext error<br>
2024-10-25 ██:██:██ TLS Error: TLS object → incoming plaintext read error<br>
2024-10-25 ██:██:██ TLS Error: TLS handshake failed<br>
2024-10-25 ██:██:██ SIGUSR1[soft,tls-error] received, process restarting<br>
2024-10-25 ██:██:██ Restart pause, 1 second(s)<br>
2024-10-25 ██:██:██ TCP/UDP: Preserving recently used remote address: [AF_INET]127.0.0.1:1984<br>
2024-10-25 ██:██:██ Socket Buffers: R=[212992-&gt;212992] S=[212992-&gt;212992]<br>
2024-10-25 ██:██:██ UDPv4 link local: (not bound)<br>
2024-10-25 ██:██:██ UDPv4 link remote: [AF_INET]127.0.0.1:1984<br>
2024-10-25 ██:██:██ TLS: Initial packet from [AF_INET]127.0.0.1:1984, sid=████████ ████████</p>
<p>Время на сервере и на локальной машине установлено правильно, ntp установлен, timestamp правильный на обоих машинах. Конфигурация соответствует рабочей для другого сервера. Собственно, до того как настроил время не работал сам Cloak (он, как известно, также зависит от настройки времени), поэтому есть повод предпологать что проблема в чем-то другом.</p>
<p>Возможен ли какой то хитрый сброс handshake от провайдера? Есть идеи как решить данную проблему?</p></td><td>2024-10-24T23:27:14.626Z</td></tr><tr><td>Dhohbr</td><td><aside class="quote no-group" data-username="Twistor" data-post="1" data-topic="12277">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/48db29/48.png" class="avatar"> Twistor:</div>
<blockquote>
<p>error=certificate is not yet valid</p>
</blockquote>
</aside>
<p>Может дело в этом?<br>
Без cloak openvpn поднимается?</p></td><td>2024-10-25T08:24:41.196Z</td></tr><tr><td>Twistor</td><td><p>Не, в итоге проблема разрешилась сама собой со временем. Ничего не менял. Хотя ребутил до этого несколько раз.</p></td><td>2024-10-26T07:50:28.656Z</td></tr>
    </table>
      </body>
    </html>