[
    {
        "id": 59464,
        "name": null,
        "username": "inemig",
        "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png",
        "created_at": "2024-10-26T14:05:58.524Z",
        "cooked": "<p>Собственно, хочу настроить следующее: один сервер в качестве входной точки с балансировкой нагрузки.<br>\n<img src=\"настройка-балансировщика-xray/dd69de6d7697282b4f3687c7fcf7b8e8230486b0.png\" alt=\"xray-lb\" data-base62-sha1=\"vAIlk98w5ZY0QORyQqOJPSBjXzi\" width=\"467\" height=\"465\"></p>\n<p>В документации есть <a href=\"https://xtls.github.io/ru/config/routing.html#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D0%BD%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8\" rel=\"noopener nofollow ugc\">пример настройки балансировки</a>, но до конца непонятно, что прописать в outbound’ах (нужно ли например так прописывать клиентов итд). Есть у кого пример рабочего конфига?<br>\nИ еще вопрос походу, может для этой задачи лучше использовать для балансировки не сам xray, а nginx/haproxy/etc? Какие плюсы/минусы?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T08:22:40.327Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 371,
        "reads": 102,
        "readers_count": 101,
        "score": 1845.4,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://xtls.github.io/ru/config/routing.html#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D0%BD%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8",
                "internal": false,
                "reflection": false,
                "title": "Маршрутизация | Project X",
                "clicks": 26
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7610,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/1",
        "can_translate": false
    },
    {
        "id": 59599,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2024-10-27T00:49:31.874Z",
        "cooked": "<p>Да вроде там всё понятно, outbound-ы - это теги клиенстких подключений к вашим 3 серверамм. Селектор их сравнивает с шаблоном, и определяет, куда балансить. Типа если у вас три подключения с тегами VLESS-OUT1, VLESS-OUT2 и VLESS3-OUT, то селектор с шаблоном VLESS-OUT будет балансить на первые два, а на третий не будет.<br>\nТут было обсуждение с примером конфига с весами</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://github.com/XTLS/Xray-core/discussions/2194\">\n  <header class=\"source\">\n      <img src=\"https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg\" class=\"site-icon\" data-dominant-color=\"\" width=\"32\" height=\"32\">\n\n      <a href=\"https://github.com/XTLS/Xray-core/discussions/2194\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitHub</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/344;\"><img src=\"настройка-балансировщика-xray/6137a6d276f8e1902abe593a8b436d6bf5e457c8_2_690x345.png\" class=\"thumbnail\" data-dominant-color=\"F2F7F7\" width=\"690\" height=\"345\"></div>\n\n<h3><a href=\"https://github.com/XTLS/Xray-core/discussions/2194\" target=\"_blank\" rel=\"noopener nofollow ugc\">balancer in xray · XTLS/Xray-core · Discussion #2194</a></h3>\n\n  <p>Please give an explanation about the type of function of the balancer in Xray Is there a turn-by-turn config selection method? It means it divides the weight between different configurations? Does ...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<p>\nНу а вообще всегда можно на каждый исходящий OUT настроить 1к1 входящий интерфейс WireGuard и балансить уже трафиик до WG интерфейсов.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T00:49:31.874Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 85,
        "readers_count": 84,
        "score": 52.0,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/XTLS/Xray-core/discussions/2194",
                "internal": false,
                "reflection": false,
                "title": "balancer in xray · XTLS/Xray-core · Discussion #2194 · GitHub",
                "clicks": 37
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/2",
        "can_translate": false
    },
    {
        "id": 59603,
        "name": null,
        "username": "inemig",
        "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png",
        "created_at": "2024-10-27T03:46:24.612Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"s.v.d\" data-post=\"2\" data-topic=\"12325\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/s.v.d/48/6091_2.png\" class=\"avatar\"> s.v.d:</div>\n<blockquote>\n<p>Да вроде там всё понятно, outbound-ы - это теги клиенстких подключений к вашим 3 серверамм.</p>\n</blockquote>\n</aside>\n<p>Т.е настраиваем outbound’ы на LB аналогично как мы делаем на клиенте? Для VLESS uuid’ы всех пользователей в них прописываем? Непонятно, где должна происходить авторизация в данной схеме</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T03:46:24.612Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 76,
        "readers_count": 75,
        "score": 20.2,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7610,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/3",
        "can_translate": false
    },
    {
        "id": 59612,
        "name": "",
        "username": "sakontwist",
        "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png",
        "created_at": "2024-10-27T06:56:23.647Z",
        "cooked": "<p>Авторизация прописывается в настройках каждого outbound. Балансер только определяет выбор между ними. Но для его использования вместо outboundTag пишете balancerTag в routing. Как только вы добавили в правило balancerTag он имеет приоритет над outboundTag.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T06:57:53.102Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 71,
        "readers_count": 70,
        "score": 24.2,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "inemig",
            "name": null,
            "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 863,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/4",
        "can_translate": false
    },
    {
        "id": 59615,
        "name": null,
        "username": "inemig",
        "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png",
        "created_at": "2024-10-27T07:29:07.577Z",
        "cooked": "<p>В принципе, я так и предполагал. А на inbound’ах proxy-* нужно также настраивать авторизацию?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T07:29:07.577Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 65,
        "readers_count": 64,
        "score": 23.0,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "sakontwist",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7610,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/5",
        "can_translate": false
    },
    {
        "id": 59857,
        "name": "",
        "username": "sakontwist",
        "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png",
        "created_at": "2024-10-27T20:39:50.149Z",
        "cooked": "<p>На всех proxy нужно настроить авторизацию в inbound для балансировщика. В принципе на них же можно также настроить и дополнительного пользователя для прямой проверки.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-27T20:40:07.849Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 43,
        "readers_count": 42,
        "score": 13.6,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "inemig",
            "name": null,
            "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 863,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/6",
        "can_translate": false
    },
    {
        "id": 59881,
        "name": null,
        "username": "inemig",
        "avatar_template": "/letter_avatar_proxy/v4/letter/i/848f3c/{size}.png",
        "created_at": "2024-10-28T02:43:41.331Z",
        "cooked": "<p>Ок, попробую настроить с учетом вышеуказанных замечаний. Спасибо за ответы.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2024-10-28T02:43:41.331Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 38,
        "readers_count": 37,
        "score": 12.6,
        "yours": false,
        "topic_id": 12325,
        "topic_slug": "%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "sakontwist",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/s/c77e96/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7610,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA%D0%B0-xray/12325/7",
        "can_translate": false
    }
]