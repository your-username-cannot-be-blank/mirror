
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>vlessreality-под-что-лучше-мимикрировать</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>TheDarkKRONOS(TheDarkKRONOS)</td><td><p>В общем появилась новость, что Microsoft штрафанули на 3.5 млн. рублей и как понимаю, могут поблокировать сайты и их сервера. С этим возникают вопросы, может быть кто лучше подскажет:</p>
<ol>
<li>Сейчас идёт мимикрия под сайт microsoft, на какой лучше сменить? Или лучше свой развернуть?</li>
<li>Если лучше свой, то где лучше брать домен и подешевле, а также ещё лучше через крипту?</li>
<li>Как настроить правильно так, чтобы при всех ответах, кроме VLESS отправляло на сайт, а определённые ответы от VLESS на xray core?</li>
<li>Как заныкать правильно панель 3xui, чтобы также её не было видно?</li>
<li>Стоит ли ещё изучать заместо VLESS-Reality другие способы? (WebSocket, SplitHttp, HttpUpgrade). Если да, то какой самый лучший по отзывчивости и скрытию?</li>
<li>Есть ли способы, чтобы работал не только TCP, но и UDP?</li>
<li>Оставаться на Xray core или sing-box чем-то будет лучше?</li>
</ol>
<p>От себя: я пытался читать и понять отличия от Reality других (WebSocket, SplitHttp, HttpUpgrade), но до конца не вкурил по мануалам, чем они будут лучше. По доменам - не нашёл регистратора, чтобы как можно меньше данных спрашивал (хостеры благо такие есть, где данных им мало надо) + чтобы была оплата криптой.</p></td><td>2024-10-09T09:36:27.211Z</td></tr><tr><td>SankaKotik(Sanka Kotik)</td><td><p>Хороший вопрос. Часть общедоступных серверов, которые я видел, мимикрирует под speedtest.</p></td><td>2024-10-09T10:15:59.094Z</td></tr><tr><td>BrOleg5</td><td><ol>
<li>Лучше всего выбирать что-нибудь из сети того же хостера, на сервере которого поднят прокси. Это должен быть иностранный сервер (вне РФ), не забаненный по домену Роскомнадзором, поддерживающий подключения по TLSv1.3 и HTTP/2, имеющий заглавную страницу, которая <em>не</em> переадресовывает на какой-нибудь другой домен. Для этого есть специальный инструмент: <a href="https://github.com/XTLS/RealiTLScanner" class="inline-onebox" rel="noopener nofollow ugc">GitHub - XTLS/RealiTLScanner: A TLS server scanner for Reality</a>. Можешь посмотреть вот <a href="https://habr.com/ru/articles/731608/" rel="noopener nofollow ugc">тут</a>, как его используют. <em>Прим:</em> из РФ статья не открывается.</li>
<li>Свой всегда лучше, так как в таком случае вы не зависите от доступности другого сайта: технические работы и прочее. Где брать домен не подскажу, так как маскируюсь под чужой сайт.</li>
<li>Почитайте <a href="https://habr.com/ru/articles/731608/" rel="noopener nofollow ugc">статью</a>, там всё более менее нормально написано. Можно ещё <a href="https://xtls.github.io/en/document/level-0/" rel="noopener nofollow ugc">гайд с ProjectX</a> посмотреть, там вообще с нуля написано как VPS настроить и все дыры закрыть. Но он только для VLESS, без Reality. Можно эти два источника совместить, настроить VPS по гайду ProjectX, а XRay настроить по статье с харбра.</li>
<li>Панели X-UI или 3X-UI стоит перевесить со стандартного порта на какой-нибудь нестандартный сильно повыше. В идеале стоит вообще заставить ее слушать на 127.0.0.1 (localhost), а подключаться к ней через SSH: например, если панель у вас на 127.0.0.1 и порту 48888, то сделав<br>
<code>ssh -L 8080:127.0.0.1:48888 user@serveradd -p &lt;ssh_port&gt;</code><br>
вы сможете попасть на панель пройдя браузером по адресу <a href="http://127.0.0.1:8080" rel="noopener nofollow ugc">http://127.0.0.1:8080</a>.<br>
<a href="https://habr.com/ru/articles/735536/" rel="noopener nofollow ugc">Источник</a>. <em>Прим</em>: из РФ не открывается.</li>
<li>Всегда стоит, чтобы быть на шаг впереди цензоров. Кроме того, стоит их тоже сейчас поднять, чтобы разобраться и сразу же был резервных канал на очень чёрный день. Ну это для совсем уже параноиков, типо меня.</li>
<li>Если вопрос про VLESS+Reality, то надо установить Packet Encoding в xudp на клиенте. У меня, по крайней мере, в NekoBox работает, но только в TUN режиме.</li>
<li>У меня сервер на XRay, клиент на sing-box. Не знаю, говорили раньше, что клиент на xray глючнее.</li>
</ol></td><td>2024-10-09T10:16:03.441Z</td></tr><tr><td>zzr</td><td><p>this Ъ<br>
всё как miracleptr завещал)</p></td><td>2024-10-09T11:33:46.991Z</td></tr><tr><td>BrOleg5</td><td><p>Всё так. Прочитал все его статьи по обходу блокировок. Именно с них и начал заниматься этой темой. Спасибо ему большое за это. Жаль, что он тильтанул и больше не пишет.</p></td><td>2024-10-09T11:36:02.257Z</td></tr><tr><td>tunivi</td><td><ol>
<li>Лучше развернуть свой, чтобы как меньше зависеть от других</li>
<li>У Namecheap бывают очень выгодные предложения в определённых зонах. Лишнего не спрашивают, оплату криптой принимают.</li>
<li>Очень просто. В конфиге Inbound’а в строке listen прописываем <em>127.0.0.1:порт</em>. Порт указываем тот, на котором работает собственный сайт. Можно как-то сделать, чтобы веб-сервер и Xray работали на одном 443 порту, но я пока с этим не разобрался.</li>
</ol></td><td>2024-10-09T12:32:13.241Z</td></tr><tr><td>sakontwist</td><td><p>Можно навесить nginx на порт и делать распределение трафика на этапе stream по доменам (preload)</p></td><td>2024-10-11T06:18:55.259Z</td></tr><tr><td>TheDarkKRONOS(TheDarkKRONOS)</td><td><p>А более подробнее можно для тех, кто не имел дела с nginx? Я просто про него знаю, что он скажем так аналог IIS на винде, только более лучше на линуксе.</p></td><td>2024-10-11T06:25:58.422Z</td></tr><tr><td>pauk</td><td><p>Не очень разбираюсь в теме, сисадмин по принуждению поляется. Настраивал свой сервер по Васян-гайдам, но вроде дыры закрыл. Волнует теперь только проблема как раз таки “маскировки”. Тема вроде уже есть, создавать свою не хочу, Задам парочку (возможно глупых) вопросов здесь:</p>
<p>Перебрал утилитой рейндж айпишников (он под конец начал сыпать тем, что подключиться не может, оставлял на ночь, думаю там уже все) - в ответ получил кучку сайтов сомнительного содержания. Смущает меня, конечно, факт того что я буду стучатся к какому-то случайному серверу с траффиком трубы, не странно ли это будет? Или еще одна особенность, сайты которые я находил это регион Саудовская Аравия и Турция. В Турции, как известно, не работает Дискорд, например, что просиходит в Аравии мне представить страшно, если честно. Влияет ли это вообще как-то? Или лучше вообще дальше сидеть на <a href="http://www.amazon.com" rel="noopener nofollow ugc">www.amazon.com</a> и не занимать себя лишними делами? Хотя я слышал и что-то про ужасы того, что, мол, распознают что я в Нидерланды хожу а не на местный цдн…</p>
<p>Плюс, где-то читал что для “достоверности” нужно открывать/закрывать порты примерно так же как и у домена, под который я маскируюсь. Это как вообще делается? Через хостера? Локально, на машине? Я за всю свою жизнь только для серверов в Майнкрафте порты открывал.</p>
<p>А вообще мне кажется что я параноией зазря занимаюсь, но все равно, как-то неспокойно. Буду благодарен за любые наводки.</p></td><td>2024-10-12T11:14:10.606Z</td></tr><tr><td>BrOleg5</td><td><blockquote>
<p>я буду стучатся к какому-то случайному серверу с траффиком трубы, не странно ли это будет?</p>
</blockquote>
<p>Нет, не странно, потому что трафик Youtube будет зашифрован по HTTPS. Насколько я понимаю, снаружи он выглядит как просто какой-то валидный трафик HTTPS до вашего сервера, который прикидывается некоторым сайтом. Если цензор почему-то заподозрит неладное и захочет проверить к какому серверу вы подключаетесь (так называемый active probing, если я не ошибаюсь в терминологии, <em>я не настоящий сварщик</em>), то просто обнаружит на вашем сервере сайт, под который вы маскируетесь, с валидными сертификатами.</p>
<p>Т.е. для цензора это будет выглядить так, что вы просто активно сёрфите сайт маскировки.</p>
<blockquote>
<p>Или еще одна особенность, сайты которые я находил это регион Саудовская Аравия и Турция. В Турции, как известно, не работает Дискорд, например, что просиходит в Аравии мне представить страшно, если честно. Влияет ли это вообще как-то?</p>
</blockquote>
<p>Это зависит от расположения вашего сервера. Если он расположен в Турции или Саудовской Аравии, то это проблема, так как их местные блокировки будут влиять на ваш тарфик. Лучше не выбирать сервера в таких странах.</p>
<p>Сайты, найденные с помощью <a href="https://github.com/XTLS/RealiTLScanner" rel="noopener nofollow ugc">RealiTLScanner</a>, просто расположены в сети того же хостера, что и ваш сервер. Маскировка под них просто добавляет правдоподобности.</p>
<blockquote>
<p>Или лучше вообще дальше сидеть на <a href="http://www.amazon.com/" rel="noopener nofollow ugc">www.amazon.com </a> и не занимать себя лишними делами? Хотя я слышал и что-то про ужасы того, что, мол, распознают что я в Нидерланды хожу а не на местный цдн…</p>
</blockquote>
<p>Отвечу цитатой из <a href="https://github.com/XTLS/Xray-core/discussions/3518" rel="noopener nofollow ugc">гайда по настройке VLESS+Reality</a>:</p>
<blockquote>
<p>Очень важно, не использовать крупные сайты в качестве DEST/SNI*<br>
Множество крупных сайтов имеют CDN в стране, поэтому их использование не рекомендуется (это например касается Google и других крупных игроков, хотя Microsoft в 22 году отключила CDN в РФ).<br>
Ведь если у сайта есть сервера в стране, то с точки зрения наблюдателя (цензора) в нормальных условиях, вы должны обращаться к локальным адресам внутри страны, а не выходить за ее пределы.<br>
…<br>
Никто и никогда, в здравом уме, не станет использовать Google в качестве dest.</p>
</blockquote>
<p>Я в начале тоже сидел под маскировкой под крупный сайт. Каких либо блокировок своего сервера я не словил. Тут решать вам, какой уровень маскировки вам хватит.</p>
<p>Но на будущее лучше всё же маскироваться под сайт из сети своего хостера или вообще под свой сайт на том же сервере. Это повысит устойчивость вашего прокси к обнаружению и он прослужит вам таким образом дольше. Не надо будет менять IP или вообще хостера и настраивать всё заново, когда РКН научится выявлять такие случаи.</p>
<blockquote>
<p>Плюс, где-то читал что для “достоверности” нужно открывать/закрывать порты примерно так же как и у домена, под который я маскируюсь. Это как вообще делается? Через хостера? Локально, на машине?</p>
</blockquote>
<p>Сам я такой штукой не занимался, просто поднял повыше порт SSH и всё. SSH порт не удастся закрыть вообще, так как вам как-то же надо подключаться к серверу и администрировать его. Вроде бы видел совет добавить фильтрацию по IP-адресу в SSH, чтобы вы могли подключаться только со своих IP-адресов. Не знаю, насколько это увеличивает маскировку сервера, но безопасность точно.</p>
<p>Насколько я понимаю для начала вам нужно выяснить, какие порты открыты у сайта, под который вы маскируетесь. Для этого существует утилита <code>nmap</code>. Сканируете IP сайта с вашего локального компьютера, он вам выдаст список открытых портов. Скорее всего для сайта будут открыты порты 80/tcp под HTTP и 443/tcp и 443/udp под HTTPS. Их нужно будет открыть на вашем сервере и пробросить до целевого сайта. Сервер XTLS-Reality сам пробросит 443/tcp-порт, так что вам останется только пробросить 443/udp и 80/tcp вот так:</p>
<pre data-code-wrap="bash"><code class="lang-bash">iptables -t nat -A PREROUTING -i eth0 -p udp --dport 443 -j DNAT --to-destination fake_site_ip:443
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination fake_site_ip:80
</code></pre>
<p>где <code>fake_site_ip</code> – IP-адрес сайта, под который вы маскируетесь; <code>eth0</code> – сетевой интерфейс сервера. IP-адрес сайта можно отрезолвить с помощью nslookup, ping или какого-нибудь онлайн-сервиса, например <a href="https://www.nslookup.io" rel="noopener nofollow ugc">вот этого</a>.</p>
<p><a href="https://habr.com/ru/articles/731608/" rel="noopener nofollow ugc">Источник</a>.</p>
<p><em>Прим:</em> Правила <code>iptables</code> не сохраняются после перезагрузки сервера, поэтому их нужно как-то сохранить на постоянке. Это можно сделать через firewall, например <a href="https://serverfault.com/a/238565" rel="noopener nofollow ugc">ufw</a> или с помощью пакета <code>iptables-persistent</code>. Лучше посмотреть, что подходит для вашего сетапа и дистрибутива Linux.</p>
<p>Поправьте меня знающие люди, если я где-то накосячил.</p>
<blockquote>
<p>А вообще мне кажется что я параноией зазря занимаюсь, но все равно, как-то неспокойно.</p>
</blockquote>
<p>Надейся на лучшее, а готовься к худшему.</p></td><td>2024-10-13T03:57:35.962Z</td></tr><tr><td>pauk</td><td><p>Огромное спасибо за такой развернутый ответ! Готовимся и правда к худшему.</p>
<p>Немного наводящих:</p>
<p>Насчет “странности”. Про то что значит последняя буква в HTTPS я знаю (za<strong>s</strong>hifrovano, ага).  Проблема не в самом траффике, а скорее в его <em>объеме</em>. Ютуб, как известно, это по несколько гигабайт под видео, некоторые по-длиннее так вообще десятки. А тут, получается, тонны инфы прилетет на какой-нибудь условный сайт турецкой клиники лечения ног (реальный сайт в моей подсети). Можно, наверное, подумать, что я фут-фетешист, но не настолько же… Но вот это уже скорее всего и есть та параноя.</p>
<p>Насчет блокировок: сервер находится в Нидерландах. Сглупил немного, потому что как-то и не подумал о том как вообще протокол работает. Но если и правда это только для “правдоподобности”, то действительно не особо важно.</p>
<p>ссшку сам поднял в небеса, к этому всему добру поднял аутентификацию по ключам, думаю пока этого хватит… пока.</p>
<p>Будем разбираться. Ещё раз спасибо.</p></td><td>2024-10-13T04:32:57.102Z</td></tr><tr><td>BrOleg5</td><td><blockquote>
<p>Проблема не в самом траффике, а скорее в его <em>объеме</em> . Ютуб, как известно, это по несколько гигабайт под видео, некоторые по-длиннее так вообще десятки. А тут, получается, тонны инфы прилетет на какой-нибудь условный сайт турецкой клиники лечения ног (реальный сайт в моей подсети).</p>
</blockquote>
<p>Я думаю, что это работает только потому, что проверка идёт в автоматическом режиме. Т.е. программа или “коробочка” цензора подключается к сайту, видит, что он валидный и не заблокированный и разрешает подключение к нему. Программа или “коробочка” не понимает содержание сайта, и что с этого сайта такие объёмы трафика очень сложно гонять. Это всё условно конечно.</p>
<p>С развитием алгоритмов цензурирования, введением новых эвристик или вообще нейросетей, конечно такие штуки уже скорее всего не прокатят. Но это очень затратно по вычислительным ресурсам, поэтому тут цензору нужно искать баланс.</p>
<p>Ну либо тупая ручная фильтрация трафика. Но фильтровать такие объёмы трафика вручную тоже проблематично, как вы понимаете.</p></td><td>2024-10-13T04:50:02.092Z</td></tr><tr><td>pauk</td><td><p>Ндя. Страшно жить. Ну, пока можно и так, живем. Живем и надеемся…</p></td><td>2024-10-13T04:59:00.579Z</td></tr><tr><td>bib128</td><td><aside class="quote no-group" data-username="BrOleg5" data-post="10" data-topic="11303">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/broleg5/48/6981_2.png" class="avatar"> BrOleg5:</div>
<blockquote>
<p>SSH порт не удастся закрыть</p>
</blockquote>
</aside>
<p>Есть ещё port knocking. По умолчанию порт закрыт, пока не постучишься в другие в своей последовательности.</p>
<aside class="quote no-group" data-username="BrOleg5" data-post="10" data-topic="11303">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/broleg5/48/6981_2.png" class="avatar"> BrOleg5:</div>
<blockquote>
<p>Вроде бы видел совет добавить фильтрацию по IP-адресу в SSH, чтобы вы могли подключаться только со своих IP-адресов. Не знаю, насколько это увеличивает маскировку сервера, но безопасность точно.</p>
</blockquote>
</aside>
<p>Чем больше ограничений, тем лучше <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> Такую штуку хорошо проворачивать с дополнительным jump-host. Тут и белый ip будет для указания в настройках соединения ssh и дополнительная цепь для доступа к серверу</p></td><td>2024-10-15T22:51:47.953Z</td></tr><tr><td>BrOleg5</td><td><p>Интересно. Спасибо большое за информацию. Как найду время, потестирую.</p></td><td>2024-10-16T03:25:30.652Z</td></tr><tr><td>xor</td><td><blockquote>
<p>Программа или “коробочка” не понимает содержание сайта, и что с этого сайта такие объёмы трафика очень сложно гонять. Это всё условно конечно.</p>
</blockquote>
<p>Вот тут, как мне кажется, очень поможет свой собственный сайт и маскировка под него. Если скачивание тонны инфы с википедии, например, может выглядеть станно, то со своего собвстенного - вполне. Кто ж знает что там у тебя.</p></td><td>2024-10-16T06:40:24.795Z</td></tr><tr><td>bib128</td><td><p>Надо еще придумать какой тип собственного сайта может много есть трафика, но при этом будет выглядеть безобидно. Собственный файловый хостинг за границей, с постоянным большим трафиком одновременно с нескольких ip…хз, тут главное еще и другие ведомства не заинтересовать:-D <img src="https://ntc.party/images/emoji/twitter/grin.png?v=12" title=":grin:" class="emoji" alt=":grin:" loading="lazy" width="20" height="20"></p>
<p>Но, мне кажется это задел на будущее. Хоть и есть пакет Яровой, но постоянный анализ трафика на соответствие сайту, имхо, ещё не под силу.</p>
<p><strong>UPD</strong><br>
Как по мне, главное тут разношёрстность маскировки, чтобы было как можно меньше общих паттернов поведения прокси. Кто-то ставит свой сайт, кто-то ближайший по ip, кто-то что-то большое, но подальше и т.п.</p></td><td>2024-10-16T07:44:01.416Z</td></tr><tr><td>skyrunner(name)</td><td><p>Стоит изучать иные способы, да. Например REALITY + HTTP2, мультиплексацию (MUX), вообщем, не стоит держать все яйца в одной корзине</p></td><td>2024-10-16T11:26:41.626Z</td></tr><tr><td>akloman</td><td><p>Насчет доменов, уже упоминали namecheap, домен вроде 456375.xyz (6 случайных цифр точка xyz) стоит $0.85/год (продление тоже). Также свободно гуглятся способы получить домен 3-его уровня бесплатно. Самое простое, что нашел - pp.ua, к CF привязывается, но сам домен может привлечь внимание кого не надо, это минус.</p></td><td>2024-10-16T14:55:12.824Z</td></tr><tr><td>rewhat</td><td><p>можно вообще не платить, бесплатно субдомен получить на FreeDNS например. Или палиться будет?</p>
<p>upd: а, ну да, не заметил</p>
<blockquote>
<p>Также свободно гуглятся способы получить домен 3-его уровня</p>
</blockquote></td><td>2024-10-16T18:06:19.695Z</td></tr><tr><td>xor</td><td><p>Бесплатные домены третьего уровня не делегировать, например, на Cloudflare. На счет палиться - не думаю что это сильно влияет, сервис же для того и существует, чтобы за домен не платить тем, кому он нужен для свиох проектов.</p></td><td>2024-10-17T04:50:31.945Z</td></tr><tr><td>zzr</td><td><p>this, ява ще отсюда беру <a href="https://freemyip.com/" rel="noopener nofollow ugc">https://freemyip.com/</a> ток чёт он походу заблолчен, я хз как оно продолжает работать ваще <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"> (ns сервера походу не заблочены или прост мойи домемы уже везде закешировались)<br>
…<br>
ну вы тут конечн ребят замарочились <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"> я ваще не парюсь нис портом эсэсаша нис содержанием сайта мамскирововчного, ну заблочат да и х с им другой подыму, ето всё все равно не панацея кокда происходят какието беспарятки они прост блочат трафик за границу и всех дел</p>
<p>яду маю тут начнётся интересное кокда они начнут блочить понтсети хостеров которые не из ихнего реестра (амы к етому придём я думайю) ну или прост натренеруют свои нейронки чтобы айпишник сопостовлял по whois’у если пренадлежит какомуто вася-хостеру то блочить и всех дел</p></td><td>2024-10-17T05:36:50.355Z</td></tr><tr><td>doroved</td><td><aside class="quote no-group" data-username="BrOleg5" data-post="10" data-topic="11303">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/broleg5/48/6981_2.png" class="avatar"> BrOleg5:</div>
<blockquote>
<p>просто поднял повыше порт SSH и всё. SSH порт не удастся закрыть вообще, так как вам как-то же надо подключаться к серверу и администрировать его.</p>
</blockquote>
</aside>
<p>а зачем SSH закрывать? В чем палево? Разве сайты под которые идет маскировка, их сервера не имеют открытого SSH?</p></td><td>2024-11-03T16:37:55.291Z</td></tr><tr><td>BrOleg5</td><td><p>Закрывать порт нужно от сетевых сканнеров, так как даже поднятый в небеса порт SSH эти сканнеры вполне находят. И тут я думаю со стороны цензора может применяться следующая эвристика: если на сервере есть открытый SSH порт, то есть вероятность что это не оригинальный сайт, а маскировка под него. Естественно, это не достоверная информация и должно найтись ещё что-то, что скомпрометирует ваш сервер. Думаю, что это одна из “улик”.</p>
<p>Насчёт того, открыты ли SSH порты у оригинального сервера сайта или нет, это хороший вопрос. Я никогда не админил сайты и не знаю их стандартных практик по поводу администрирования: закрывают они SSH порты или нет. И если закрывают, то каким образом тогда получают доступ к серверу для работы на нём.</p>
<p>Поэтому я думаю и существует рекомендация просканировать оригинальный сайт на открытые порты. Если у него есть открытый порт SSH, то это нам как нельзя кстати. Просто вешаем свой SSH на такой же порт, и вот наш сервер мимикрирует гораздо правдоподобнее.</p>
<p>Если говорить про практическую полезность этих действий, то я думаю, что эти предосторожности по портам и прочие заморочки направленны не на текущую цензуру (я ещё не слышал про блокировку серверов с открытыми SSH портами или с не проброшенными портами 80/tcp и 443/udp до оригинального сайта, по крайней мере в РФ), а условно на завтрашнею.</p></td><td>2024-11-04T03:00:14.664Z</td></tr><tr><td>sakontwist</td><td><p>SSH лучше закрыть белым списком своих адресов. В крайнем случае, попасть на ssh можно через тот же vless. Либо можно войти в консоль через панель хостера.</p></td><td>2024-11-04T06:55:26.131Z</td></tr><tr><td>us3r</td><td><aside class="quote no-group" data-username="sakontwist" data-post="25" data-topic="11303">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/c77e96/48.png" class="avatar"> sakontwist:</div>
<blockquote>
<p>Либо можно войти в консоль через панель хостера.</p>
</blockquote>
</aside>
<p>Тут могут быть сложности:</p>
<ol>
<li>Сталкивался сам и видел вопросы других к тех.поддержке хостера на предмет авторизации через консоль в панели. Похоже что консоль в панели хостера не корректно воспнинимала вставку определенных символов пароля (при этом из локального терминала авторизация проходила).</li>
<li>Авторизацию по паролю скорее всего лучше отключить, есть ощущение (возможно ошибаюсь), что консоль в панели хостера не сможет получить доступ к ключу.</li>
</ol>
<p>Возможно проще перед завершением сессии SSH останавливать SSH сервис?<br>
При очередной перезагрузки VPS, SSH сервис будет автоматически запущен.</p></td><td>2024-11-04T07:31:32.137Z</td></tr><tr><td>doroved</td><td><aside class="quote no-group" data-username="BrOleg5" data-post="24" data-topic="11303">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/broleg5/48/6981_2.png" class="avatar"> BrOleg5:</div>
<blockquote>
<p>заморочки направленны не на текущую цензуру</p>
</blockquote>
</aside>
<p>абсолютно согласен, даже больше скажу, обычный HTTP over TLS прокси так же прекрасно работает, провайдер так же видит обычные TLS соединения к домену, отличие от Реалити, нужен свой/бесплатный домен с сертификатом и все.<br>
Для простоты, можно через <a href="https://github.com/doroved/proxerver" rel="noopener nofollow ugc">Proxerver</a> поднять такой прокси сервер</p></td><td>2024-11-04T08:12:01.534Z</td></tr><tr><td>A.g(A.g)</td><td><p>Сканирую диапазон зарубежного хостера и наткнулся на зеркало rutube. И вообще много отечественных сайтов попадается.</p>
<p>Это нормальная идея под него замаскироваться? Если нет, то почему?</p></td><td>2024-11-05T08:42:15.855Z</td></tr><tr><td>sakontwist</td><td><p>Это точно зеркало или чей-то reality? )</p>
<p>UPD: действительно, имеется <a href="http://rutube.com" rel="noopener nofollow ugc">rutube.com</a>, и он в Германии</p>
<pre><code class="lang-auto">inetnum:        185.53.177.0 - 185.53.177.255
netname:        DC-Germany
country:        DE
</code></pre>
<p>Ай-яй-яй )</p></td><td>2024-11-05T09:21:23.328Z</td></tr><tr><td>the-d-kid(Andrey)</td><td><p>По 4 пункту, если делать не как в идеале, то хотя бы можно если дома статичный IP, через UFW разрешить доступ к порту вебморды только с вашего IP, но в отличии от способа который в идеале, всё равно цензорам будет видно соединение на порт, на который у всех остальных доступа нет, что возможно будет подозрительно<br>
А вообще UFW классная штука которую многие как будто упускают из вида, но перед тем как её включить надо конечно не забыть все порты прокинуть которые нужно что бы торчали наружу)</p></td><td>2024-11-16T12:12:40.008Z</td></tr><tr><td>BrOleg5</td><td><p>Ну настройки файервола на сервере - это то, что стоит делать всегда.</p>
<p>Ещё есть всякие мелочи, типа работа под новым не <code>root</code> пользователем, отключение авторизации в <code>root</code> через SSH и использвание RSA ключей вместо паролей. Довольно хорошо база по настройке всего этого есть в <a href="https://xtls.github.io/en/document/level-0/ch04-security.html" rel="noopener nofollow ugc">гайде по Xray</a>. Всё это не относится к проксированию, а просто повышает безопасность вашего сервера.</p>
<p>Хотя это не сильно кричично на обычном прокси сервере, который используется для просмотра картинок “котиков” в инстаграмме, который не жалко потерять.</p></td><td>2024-11-16T14:29:58.892Z</td></tr><tr><td>gonza159</td><td><p>Ну кстати, работает, пока не мере на двух серверах, на одном чет не заводится )</p></td><td>2024-11-25T09:08:51.764Z</td></tr><tr><td>F1sh</td><td><p>Первая ссылка в третьем пункте заблокирована, может есть аналоги данной статьи?</p></td><td>2024-12-18T19:25:25.647Z</td></tr><tr><td>allula</td><td><p>Добавь <a href="http://habr.com" rel="noopener nofollow ugc">habr.com</a> в маршрут для проксирования (ты же как-то пишешь на заблокированном сайте?) и внезапно увидишь статью.</p></td><td>2024-12-18T20:20:51.637Z</td></tr><tr><td>F1sh</td><td><p>Пишет, что статья удалена из публичнчого доступа, с ВПН и захожу своего</p></td><td>2024-12-23T06:55:28.030Z</td></tr><tr><td>Simple_logic</td><td><p>Статья на своем месте, просто вы плохо заходите. Версия из веб архива от конца февраля с непокусанными комментариями.</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://mega.nz/folder/2RhGDS5A#LfmYJD-uyq2kelzNjIlJrQ">
  <header class="source">
      <img src="vlessreality-под-что-лучше-мимикрировать/5ba9dcbd5434a1699078841be18423b8d715f0eb.png" class="site-icon" data-dominant-color="F03A40" width="32" height="32">

      <a href="https://mega.nz/folder/2RhGDS5A#LfmYJD-uyq2kelzNjIlJrQ" target="_blank" rel="noopener nofollow ugc">mega.nz</a>
  </header>

  <article class="onebox-body">
    <img width="500" height="500" src="vlessreality-под-что-лучше-мимикрировать/646b383f14a90eec1945726c9b3aaa1870cb263c.png" class="thumbnail onebox-avatar" data-dominant-color="EFEDEE">

<h3><a href="https://mega.nz/folder/2RhGDS5A#LfmYJD-uyq2kelzNjIlJrQ" target="_blank" rel="noopener nofollow ugc">4.76 MB folder on MEGA</a></h3>

  <p>2 files</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-23T07:44:28.888Z</td></tr><tr><td>F1sh</td><td><p>Спасибо</p></td><td>2024-12-23T07:46:48.211Z</td></tr><tr><td>naykaminka(Sergey)</td><td><p>Добрый день, правильно ли я понимаю что для проброса 80 и 443 нужно nginx устанавливать ? В самой 3x панели не нашёл способа чтобы заставить пробросить её 80 порт без спецификации протокола.</p>
<p>“port”: 80,<br>
“listen”: “0.0.0.0”,<br>
“protocol”: “vmess”,<br>
“settings”: {<br>
“clients”: <span class="chcklst-box fa fa-square-o fa-fw"></span></p></td><td>2024-12-24T20:54:26.949Z</td></tr><tr><td>BrOleg5</td><td><p>Нет. Это делается на уровне iptables или всяких файерволов, типо <code>ufw</code>.<br>
В моём сообщении вроде всё написано, даже команды даны, которые проброс делают.</p></td><td>2024-12-25T05:01:03.388Z</td></tr><tr><td>BrOleg5</td><td><p>И ещё, зачем пробрасывать 80 порт самой панели? Вы что хотите этим добиться? Возможно, я вас неправильно понял.</p></td><td>2024-12-25T05:06:01.530Z</td></tr><tr><td>naykaminka(Sergey)</td><td><p>Если на сервере стоит только панель (фаерволов нету), оно же не будет работать, нужно сделать чтобы серв этот порт слушал ? По дефолту панель только 443 порт смотрит, не ?</p>
<p>Сделал по вашему гайду предварительно открыв порт, не фурычит<br>
<div class="lightbox-wrapper"><a class="lightbox" href="vlessreality-под-что-лучше-мимикрировать/a045a6e447e59a0fcac74cc70e21d67975c596ad.png" data-download-href="https://ntc.party/uploads/default/a045a6e447e59a0fcac74cc70e21d67975c596ad" title="123"><img src="vlessreality-под-что-лучше-мимикрировать/a045a6e447e59a0fcac74cc70e21d67975c596ad_2_690x45.png" alt="123" data-base62-sha1="mRPCFYHCAYjxkOSJ3qvZpM5zs5f" width="690" height="45" srcset="vlessreality-под-что-лучше-мимикрировать/a045a6e447e59a0fcac74cc70e21d67975c596ad_2_690x45.png, vlessreality-под-что-лучше-мимикрировать/a045a6e447e59a0fcac74cc70e21d67975c596ad.png 1.5x, vlessreality-под-что-лучше-мимикрировать/a045a6e447e59a0fcac74cc70e21d67975c596ad.png 2x" data-dominant-color="0A0A0A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">123</span><span class="informations">980×65 18 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="vlessreality-под-что-лучше-мимикрировать/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1.png" data-download-href="https://ntc.party/uploads/default/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1" title="123"><img src="vlessreality-под-что-лучше-мимикрировать/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1_2_690x60.png" alt="123" data-base62-sha1="pJJSOlcgbbyQZN6SyYaEF5pku3v" width="690" height="60" srcset="vlessreality-под-что-лучше-мимикрировать/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1_2_690x60.png, vlessreality-под-что-лучше-мимикрировать/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1.png 1.5x, vlessreality-под-что-лучше-мимикрировать/b461fd0e08a67ba17f3e7bf2ed9e8b0b1a964be1.png 2x" data-dominant-color="0B0B0B"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">123</span><span class="informations">825×72 15.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-12-25T06:11:03.330Z</td></tr><tr><td>BrOleg5</td><td><blockquote>
<p>По дефолту панель только 443 порт смотрит, не ?</p>
</blockquote>
<p>Я не эксперт в панелях, никогда их не использовал. Вы сейчас говорите про саму панель или про сервер xray или sing-box, которые конфигурируются через эту панель?</p></td><td>2024-12-25T06:50:47.163Z</td></tr><tr><td>naykaminka(Sergey)</td><td><p>Ситуация такая - есть свой vps, на котором установлена только панель.<br>
Смотрел на открытые порты, был открыт только 443, который сама панель открывает по дефолту для своих нужд.</p>
<p>Прочитал ваш гайд о переброске, почекал сайт под который маскируюсь - на нём открыт 80 порт.<br>
Поэтому с помощью iptables настроил сначала открытый порт 80, потом по указанной команде написал прероут. Но порт так и показывался закрытым.  На мой вопрос чат жпт ответил что не достаточно просто открыть порт, нужно заставить веб панель его слушать (3x / nhginx/ кади и тд).  Поэтому в самой панели в джейсоне указал открытый 80 порт. После этого порт показывался открытым (проверял веб сервисами), но прероут всё так же не работает по какой-то причине. Возможно нужно FORWARD вместо INPUT, прошу прощения я не особо шарю за сети (вообще не шарю)</p></td><td>2024-12-25T06:57:32.448Z</td></tr><tr><td>Dhohbr</td><td><p>Уберите  prerouting. Если вы повесили панель на 80 порт, то она и так должна быть доступна, т.к. внешний ip находится на вашем сервере.<br>
В xray или sing-box указывайте 443 порт, и домен для маскировки.<br>
iptables вам нужен только для того, чтобы прикрыть лишние доступы, желательно ssh и панель.</p></td><td>2024-12-25T12:21:44.815Z</td></tr><tr><td>naykaminka(Sergey)</td><td><p>Цель этих махинаций - отправлять все запросы по 80 порту на сервер под который маскируюсь, тут нужен прероутинг ?<br>
Подскажите пожалуйста  как протестировать что запросы по 80 порту уходят на сервер под который маскируюсь.</p></td><td>2024-12-25T15:03:30.008Z</td></tr><tr><td>Dhohbr</td><td><p>Мое мнение, открывать такие же порты как и на подставном сайте, бессмысленная затея. Если например сайт в кластере, и на каждом сервере открыты разные порты, это нормально, и ещё не повод подозревать что за каким-то адресом находится прокси. К тому же, active probing’ом ркн пока не занимается.<br>
Если вам так сильно хочется заморочится, то вашу панель нужно перевесить на другой порт, т.к. 80 вы редиректите. Считайте, что он занят.</p></td><td>2024-12-26T21:07:21.994Z</td></tr>
    </table>
      </body>
    </html>