
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>3x-ui-подключение-через-отличные-от-tcp-протоколы-передачи</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>ThulsaDoom</td><td><p>Всем привет<br>
Некоторое время назад заинтересовался изучить полностью всю панель 3x<br>
Сейчас у всех VLESS на TCP + Reality</p>
<p>Для себя пробовал тестировать все различные настройки, но протоколы mKCP, gRPC, Websocket и XHTTP не подключаются вообще (но пинг идет в приложения)<br>
На 4pda никто не знает, ChatGPT очень поверхностно про каждый протокол рассказал, просто что это такое</p>
<p>Кто может подсказать почему они не коннектяться ?<br>
Спасибо</p></td><td>2024-12-20T14:04:44.864Z</td></tr><tr><td>Xunlei</td><td><aside class="quote quote-modified" data-post="1" data-topic="13460">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/ebca7d/48.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%B8%D1%82%D0%B5-%D1%80%D0%B0%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D1%82%D1%8C%D1%81%D1%8F-%D1%81-3x-ui/13460">Помогите разобраться с 3X-UI</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    Всем привет. Арендовал VPS, поставил 3X-UI в докере, настроил панель слушать localhost, создал подключение. 
Протокол: vless 
Порт: 443 
Flow: xtls-rprx-vision 
Протокол передачи: TCP (RAW) 
Безопасность: Reality 
Dest (Target) и SNI пробовал разные: и крупные, и местечковые. 
Однако клиент v2rayNG не может подключиться. Сначала заметил, что в сгенерированной строке подключения указан localhost (насколько понял, панель смотрит, по какому адресу к ней обратились, и подставляет этот адрес). Поменя…
  </blockquote>
</aside>
</td><td>2024-12-20T14:14:08.547Z</td></tr><tr><td>allula</td><td><p>Так и не понял, получилось ли у вас настроить Reality хотя бы.</p></td><td>2024-12-20T14:49:33.683Z</td></tr><tr><td>ThulsaDoom</td><td><p>Конечно, без проблем</p>
<p>Стабильно работают VLESS + Reality или TLS на домене, а так же VMESS и Trojan тоже на TLS</p></td><td>2024-12-20T15:43:36.472Z</td></tr><tr><td>allula</td><td><p>Про mKCP такое писали:</p>
<blockquote>
<p>К сожалению, начиная с какой-то из версий Xray оно сломано и тупит при определенных сценариях - жрет память, жрет процессор и тормозит, вплоть до полной невозможности работы.</p>
</blockquote>
<p>Ещё нужно не забывать, что не все клиенты поддерживают все возможные транспорты. Я бы для начала попробовал взять в качестве клиента и сервера одно и то же приложение (XRay). На хабре можно найти инструкции для настройки всех перечисленных вами транспортов. Дальше пытаться локализовать проблему, читать логи и известные проблемы этих транспортов на гитхабе разработчиков.</p></td><td>2024-12-20T18:00:28.231Z</td></tr><tr><td>naykaminka(Sergey)</td><td><p>Кто-то тестил новомодный XHTTP ?<br>
За ним будущее ?</p></td><td>2024-12-20T18:45:28.412Z</td></tr><tr><td>ThulsaDoom</td><td><p>Пробовал еще различные заголовки HTTP (в разделе HTTP маскировки) тестировать, запустилось только без включенного TLS</p>
<p>На Browserleaks часть заголовков мной указанных отображается, часть (типо User-Agent) нет<br>
Была задумка мимикрировать под ВК или Дзен</p>
<p>Вообще в целом я это все на будущее рассматриваю, всегда имею разные варианты. Хотя конечно про Reality пишут что он и в Китае работает, и я давал для теста людям кто проездом был в Китае - XTLS рабочий, все работает</p></td><td>2024-12-20T19:13:14.140Z</td></tr><tr><td>Tyman</td><td><p>Не путайте протокол транспортного уровня (TCP) c протоколами прикладного уровня (Https, WebSocket)</p></td><td>2024-12-20T20:16:18.539Z</td></tr><tr><td>NowAndThen</td><td><p>Что-то вы не так настраиваете. У меня Reality c TCP/gRPC/XHTTP работает. Просто меняете транспорт в настройках входящего соединения в панеле, сохраняете и экспортируете в клиент новый ключик. Единственное XHTTP c клиентами на Sing-Box не работает, он там не поддерживается. Я их вообще все настоил на один 443 порт, через Dest можно их можно друг на друга перекидывать через локальный порт или юникс сокет и проверять по цепочке. Все бегает. gRPC c галочкой Multi Mode задержки уменьшаются, по моим тестам видео на Youtube на 10-15% быстрее в среднем стартуют.</p></td><td>2024-12-20T21:27:07.695Z</td></tr><tr><td>ThulsaDoom</td><td><aside class="quote no-group" data-username="NowAndThen" data-post="9" data-topic="13949">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/c0e974/48.png" class="avatar"> NowAndThen:</div>
<blockquote>
<p>У меня Reality c TCP/gRPC/XHTTP ра</p>
</blockquote>
</aside>
<p>Да - сейчас еще раз посидел и получить gRPC запустить<br>
Но только на TLS, на Reality в браузере (моба) никуда не подключается и пишет ERR_SSL_PROTOCOL_ERROR</p>
<p>VLESS-VMESS запустилось</p>
<p>XHTTP на обоих с такой же ошибкой не подключается<br>
Настройки везде стандартные<br>
<img src="3x-ui-подключение-через-отличные-от-tcp-протоколы-передачи/146d08b149b54f1e850b24deae0b1ac781dd083d.png" alt="1734732726925" data-base62-sha1="2UH9wmyU4zrNb1m60vOXKxpxZsp" width="485" height="368"><br>
<img src="3x-ui-подключение-через-отличные-от-tcp-протоколы-передачи/e08c1c1d2680d9895acfeb77dd1d2743984debb4.png" alt="1734732742448" data-base62-sha1="w2r8vISpdBu4A7JFzVGmSC6YCR6" width="491" height="444"><br>
<img src="3x-ui-подключение-через-отличные-от-tcp-протоколы-передачи/498b8749e8be408a28c50af27f0fd3d38085db07.png" alt="1734732750134" data-base62-sha1="auBNd2llxyBNC2O3R4t4MhgmYsv" width="462" height="489"></p></td><td>2024-12-20T22:12:18.148Z</td></tr><tr><td>ThulsaDoom</td><td><aside class="quote no-group" data-username="Tyman" data-post="8" data-topic="13949" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/tyman/48/6894_2.png" class="avatar"> Tyman:</div>
<blockquote>
<p>Не путайте протокол транспортного уровня (TCP) c протоколами прикладного уровня (Https, WebSocket)</p>
</blockquote>
</aside>
<p>Вот тут то и вся проблема - что я не могу найти полного мануала с примерами практическими<br>
На Git Xray просто голые конфиги лежат котороые я и сам могу сделать</p>
<p>На Websocket нашел что нужно хост какой то указывать отдельный</p></td><td>2024-12-20T22:15:22.584Z</td></tr><tr><td>NowAndThen</td><td><p>А клиент у вас какой?</p></td><td>2024-12-20T22:24:06.756Z</td></tr><tr><td>ThulsaDoom</td><td><p>на iOS - Shadowrocket основной и FoxRay второй для теста<br>
На Win - v2rayN</p></td><td>2024-12-20T22:30:54.100Z</td></tr><tr><td>NowAndThen</td><td><p>И чо, и на Маке и на Винде онинаковую ошибку выдает? За IOS клиенты на сказу, а V2rayN апдейтили ядра?</p></td><td>2024-12-20T22:41:35.095Z</td></tr><tr><td>ThulsaDoom</td><td><aside class="quote no-group" data-username="NowAndThen" data-post="14" data-topic="13949">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/c0e974/48.png" class="avatar"> NowAndThen:</div>
<blockquote>
<p>И чо, и на Маке и на Винде онинаковую ошибку выдает?</p>
</blockquote>
</aside>
<p>Да, разные версии V2rayN пробовал<br>
mKCP никак не хочет</p></td><td>2024-12-21T21:00:23.613Z</td></tr><tr><td>NowAndThen</td><td><p>C mKCP я не знаком, но ради прикола щас попробовал, все завелось, все по дефолту, только порт выставил. Вот, через него пишу.</p></td><td>2024-12-21T22:37:36.640Z</td></tr><tr><td>ThulsaDoom</td><td><p>А на перспективу (в случае гипотетической блокировки VLESS, хотя читал что это крайне сложно, так как в Китае он даже стабильно пашет) в какую сторону стоит пока присмотреться ?</p></td><td>2024-12-22T06:11:09.100Z</td></tr>
    </table>
      </body>
    </html>