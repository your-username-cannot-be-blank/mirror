
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>как-сделать-route-для-портов-в-nekoray</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Rei(Ayanami Rei)</td><td><p>Всем привет, интересует как можно сделать роут для определенного порта в nekoray<br>
В табличку роутинга можно только ip и domain вписывать, или geosite. А куда вписывать порт?<br>
<div class="lightbox-wrapper"><a class="lightbox" href="как-сделать-route-для-портов-в-nekoray/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78.png" data-download-href="https://ntc.party/uploads/default/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78" title="image"><img src="как-сделать-route-для-портов-в-nekoray/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78_2_640x500.png" alt="image" data-base62-sha1="miWhzxj2y0bwpItCmEzRNkVTjkY" width="640" height="500" srcset="как-сделать-route-для-портов-в-nekoray/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78_2_640x500.png, как-сделать-route-для-портов-в-nekoray/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78.png 1.5x, как-сделать-route-для-портов-в-nekoray/9c53eb8d9c43868a47506bc6b1cf3fd9377ceb78.png 2x" data-dominant-color="F6F7F7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">810×632 33.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Например на nekobox 4 android я могу создать правило и выбрать там нужные порты, а тут этого не вижу. Кто-нибудь знает? Гугление ничего полезного не дало<br>
Вот как это делается на андроиде<br>
<div class="lightbox-wrapper"><a class="lightbox" href="как-сделать-route-для-портов-в-nekoray/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff.jpeg" data-download-href="https://ntc.party/uploads/default/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff" title="image"><img src="как-сделать-route-для-портов-в-nekoray/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff_2_247x500.jpeg" alt="image" data-base62-sha1="wYbkDoZTqq7Bc5r0Ej1PTFpgnH9" width="247" height="500" srcset="как-сделать-route-для-портов-в-nekoray/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff_2_247x500.jpeg, как-сделать-route-для-портов-в-nekoray/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff_2_370x750.jpeg 1.5x, как-сделать-route-для-портов-в-nekoray/e713276989e0ca4e6a64daa3c8cd9e33c1a03aff_2_494x1000.jpeg 2x" data-dominant-color="231B1D"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1260×2549 141 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2025-01-22T22:21:31.831Z</td></tr><tr><td>Taf-21(Anton)</td><td><p><a href="https://matsuridayo.github.io/n-configuration/#_11" rel="noopener nofollow ugc">Смотрите здесь.</a><br>
Пример оттуда:<br>
Пример пользовательской маршрутизации (блок Xray QUIC)</p>
<pre><code class="lang-auto">{
    "rules": [
        {
            "network": "udp",
            "outboundTag": "block",
            "port": "443",
            "type": "field"
        }
    ]
}
</code></pre>
<p>Прописывать правила я думаю нужно в “Кастомные маршруты”:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="как-сделать-route-для-портов-в-nekoray/ed36613c2b5119435b62834431a8228c7f10c7df.png" data-download-href="https://ntc.party/uploads/default/ed36613c2b5119435b62834431a8228c7f10c7df" title="Custom"><img src="как-сделать-route-для-портов-в-nekoray/ed36613c2b5119435b62834431a8228c7f10c7df.png" alt="Custom" data-base62-sha1="xQtFsBKk7RVg0BaWnrR1h3Dd7dR" width="634" height="500" data-dominant-color="EFF3F7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Custom</span><span class="informations">802×632 10.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2025-01-23T07:43:35.895Z</td></tr><tr><td>Rei(Ayanami Rei)</td><td><p><img src="как-сделать-route-для-портов-в-nekoray/fb8c3588f875d33d4faf37b6992535f54c795ceb.png" alt="image" data-base62-sha1="zTieZfjltBGXo43LmvphTzthF4D" width="279" height="125"><br>
пробовал так, выдает такую ошибку</p></td><td>2025-01-23T08:37:45.638Z</td></tr><tr><td>Taf-21(Anton)</td><td><p>Вы всё же мануалы почитайте.<br>
Во-первых, у вас ядро Xray или Sing-box?<br>
Для Xray:</p>
<blockquote>
<pre><code>type: "field" 
</code></pre>
<p>На данный момент поддерживает только “field”<br>
Эту строку можно опустить для Xray-core v1.8.7 или выше.</p>
</blockquote>
<p><a href="https://sing-box.sagernet.org/configuration/route/rule/" rel="noopener nofollow ugc">Для Sing-box</a></p></td><td>2025-01-23T09:06:15.474Z</td></tr><tr><td>0ka(0ka)</td><td><p>порты дискорда вроде как гораздо шире</p></td><td>2025-01-23T09:24:59.638Z</td></tr><tr><td>Taf-21(Anton)</td><td><p>RTFM</p>
<h3><a name="p-80948-structure-1" class="anchor" href="#p-80948-structure-1"></a>Structure</h3>
<pre><code class="lang-auto">{
  "route": {
    "rules": [
      {
        "source_port_range": [
          "1000:2000",
          ":3000",
          "4000:"
        ],
        "port": [
          80,
          443
        ],
        "port_range": [
          "1000:2000",
          ":3000",
          "4000:"
        ],
        // deprecated
        "rule_set_ipcidr_match_source": false,
        "rule_set_ip_cidr_match_source": false,
        "invert": false,
        "action": "route",
        "outbound": "direct"
      },
      {
        "type": "logical",
        "mode": "and",
        "rules": [],
        "invert": false,
        "action": "route",
        "outbound": "direct"
      }
    ]
  }
}
</code></pre></td><td>2025-01-23T10:25:32.690Z</td></tr><tr><td>Rei(Ayanami Rei)</td><td><p>В общем оказалось очень просто, в Custom route (global) прописал такое:</p>
<pre><code class="lang-auto">{
    "rules": [
        {
            "outbound": "proxy",
            "port_range": [
                "50000:50100"
            ]
        }
    ]
}

</code></pre>
<p>Остальные правила из интерфейса тоже подтянулись</p></td><td>2025-01-23T11:34:46.559Z</td></tr><tr><td>REM1X</td><td><p>Если это нужно для дискорда на пк не проще проксировать приложение целиком?<br>
<img src="как-сделать-route-для-портов-в-nekoray/feace58328eb1caad0b54630b52522d4c226de18.png" alt="image" data-base62-sha1="AkXHOcavMgM53MfnbkLC04owtaU" width="384" height="230"></p></td><td>2025-01-24T18:58:30.554Z</td></tr>
    </table>
      </body>
    </html>