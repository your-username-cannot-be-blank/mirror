
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>вниманию-пользователей-3x-ui</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>wguboa</td><td><p>На гитхабе разработчиков <a href="https://github.com/XTLS/Xray-core" rel="noopener nofollow ugc">Xcore</a>, появилось <a href="https://github.com/XTLS/Xray-core/commit/94338c94e93ba4296042c295708808a79ff53bc8" rel="noopener nofollow ugc">предупреждение</a>, об опасности и неиспользовании 3X-UI. Считается что они могли быть куплены Иранским файрволлом.</p>
<blockquote>
<ul>
<li>Web Panel - <strong>Warning: These panels are verified to support HTTPS or SSH port forwarding only. Please DO NOT use plain HTTP panels like 3X-UI, as they are believed to be bought by Iran GFW and your data security will be dangerous. If you are already using 3X-UI, please switch to the following panels.</strong>
<ul>
<li><a href="https://github.com/Gozargah/Marzban" rel="noopener nofollow ugc">Marzban</a></li>
<li><a href="https://github.com/qist/xray-ui" rel="noopener nofollow ugc">Xray-UI</a></li>
<li><a href="https://github.com/hiddify/Hiddify-Manager" rel="noopener nofollow ugc">Hiddify</a></li>
</ul>
</li>
</ul>
</blockquote></td><td>2024-10-24T06:38:10.452Z</td></tr><tr><td>Manager_Go_AI</td><td><p>Много вопросов…</p></td><td>2024-10-24T06:46:48.183Z</td></tr><tr><td>boltor</td><td><p>При чём тут купленность иранским цензором и использование plain HTTP? При продажности HTTP вообще неважен, т.к. панель будет отсылать им инфу или иметь бэкдор независимо от того, на чём она работает, а использование plain HTTP само по себе не свидетельствует о чьей-либо продажности.</p>
<p>Я думаю, что китайцы как всегда иносказательно пытаются намекать, что plain HTTP по дефолту это просто плохо, и цензор может видеть, что вы там делаете, и лучше бы использовать шифрование для доступа к панели вроде SSL-сертификатов или SSH туннелей, с чем я полностью солидарен.</p></td><td>2024-10-24T07:55:22.047Z</td></tr><tr><td>wguboa</td><td><p>Судя по переписке, RPRX уже какое время говорит чтобы ребята убрали HTTP по умолчанию, и дали выбор местоположения при установке — например, Иран или прочие страны (Ирану судя по всему важно именно HTTP соединение для обхода GFW).<br>
В итоге, RPRX сказал, что он не понимает почему разработчик не хочет это менять, если только, он не связан с Иранским GFW. И в конце концов, повесил плашку об опасности использования 3X-UI по умолчанию.</p></td><td>2024-10-24T08:09:21.901Z</td></tr><tr><td>lucretia(lucretia)</td><td><p>1)Знаете я пробовал hiddify  и это просто какой-то собранный на коленке комбайн из кучи всего и у меня при попытке настроить его не возникло впечатления надежности и качественного кода.  Постоянно какие-то баги выскакивали,криво работало все. + когда все бросают в кучу больше вероятности кривости</p>
<ol start="2">
<li>
<p>marzban говорите…это не те самые ребята, котоыре на заре появления панели по умолчанию ставили НЕ 443 порт для xtls\reality? =))</p>
</li>
<li>
<p>что касается https до панели… С 3x-ui  я получаю доступ к панели без всякого https и домена . Она у меня висит на 127.0.0.1 и я туда захожу предварительно запустив ssh  к серверу…</p>
</li>
</ol></td><td>2024-10-24T08:58:32.015Z</td></tr><tr><td>wguboa</td><td><p>Мне hiddify тоже не зашёл.</p>
<aside class="quote no-group" data-username="lucretia" data-post="5" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/13edae/48.png" class="avatar"> lucretia:</div>
<blockquote>
<ol start="3">
<li>что касается https до панели… С 3x-ui я получаю доступ к панели без всякого https и домена . Она у меня висит на 127.0.0.1 и я туда захожу предварительно запустив ssh к серверу…</li>
</ol>
</blockquote>
</aside>
<p>Ну, так разве у Вас по умолчанию она слушала 127.0.0.1? Она слушает по всем адресам с 0.0.0.0. Речь про настройки по умолчанию, которые оставят в неизменном виде по какому-нибудь гайду в интернете.<br>
Конечно, надёжнее всего слушать только 127.1 и заходить через проброс порта по ssh.</p></td><td>2024-10-24T09:11:31.527Z</td></tr><tr><td>lucretia(lucretia)</td><td><aside class="quote no-group" data-username="wguboa" data-post="6" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/49beb7/48.png" class="avatar"> wguboa:</div>
<blockquote>
<p>Речь про настройки по умолчанию</p>
</blockquote>
</aside>
<p>ну например когда вы  ставите например  wordpress+nginx у вас что по умолчанию сразу https активен? Вы это сами настраиваете… по крайней мере по классике). Мне кажется придирки в этом плане к разработчику панели несколько странными. Особенно когда в случае доступа через http там вверху постоянно висит плашка что это небезопасно и рекомендуется https настроить</p></td><td>2024-10-24T10:55:02.220Z</td></tr><tr><td>slq</td><td><p>Скажите, пж по 3x-ui:</p>
<ol>
<li>Если активировать в настройках “Заблокировать подключения к диапазонам IP-адресов России”, “Заблокировать подключения к доменам России” у вас ютуб работает? С доменами понятно, но вот с ip, по идее если сервак ютуб в рф, значит должен блокироваться.</li>
<li>В настройках панели есть две строки (хотя может сейчас уже убрали) “IP-адрес панели” и “Домен прослушивания панели”, вы в обе строчке прописали 127.0.0.1?</li>
</ol></td><td>2024-10-24T13:12:28.125Z</td></tr><tr><td>Avanairn(Avanairn)</td><td><p>Я бы не сказал, что Hiddify такой плохой. Он скорее сделан больше для “рядовых” пользователей. Большинство багов которые я видел не такие критичные. За исключением пожалуй одной мерзкой ошибки при которой после перезапуска компьютера интернет перестает работать без открытие Hiddify</p></td><td>2024-10-24T13:47:18.848Z</td></tr><tr><td>Mayday</td><td><aside class="quote no-group" data-username="lucretia" data-post="5" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/13edae/48.png" class="avatar"> lucretia:</div>
<blockquote>
<p>что касается https до панели… С 3x-ui я получаю доступ к панели без всякого https и домена . Она у меня висит на 127.0.0.1 и я туда захожу предварительно запустив ssh к серверу…</p>
</blockquote>
</aside>
<p>Не могли бы Вы дать развернутую инструкцию - Как это правильно делать?<br>
Я пытался, но что-то не догоняю. Пробовал пару раз; оба раза был вынужден выполнить переустановку т.к. полностью терял доступ к панели.</p></td><td>2024-10-24T15:20:28.231Z</td></tr><tr><td>slq</td><td><ol>
<li>Во время установки панели через скрипт задаем адрес панели через /. Пример: /helloworld</li>
<li>Отключаемся от сервера (SSH)</li>
<li>Подключаемся к панели через SSH туннель:<br>
ssh -L 45000:127.0.0.1:2053 имя_пользователя@ip_сервера [-p &lt;ssh_port&gt;] - вводим в командной строке Windows, не закрываем окно командной строки.<br>
-p &lt;ssh_port&gt; - вводим если только на сервере перевесили ssh порт на другой.<br>
45000 - это порт на компе, можно указать любой другой. Главное, чтобы повыше цифра т.к. с 1 по 1023 порты системные<br>
2053 - это порт панели, если при установке через скрипт, установили другой порт для панели, то тогда пишем этот другой порт.<br>
имя_пользователя - если на сервер доступ через учетку админа, то пишите root вместо имя_пользователя</li>
<li>Заходим через браузер в панель по адреса 127.0.0.1:45000/helloworld</li>
<li>Заходим в настройки панели в пунктах “IP-адрес панели” и “Домен прослушивания панели” прописываем “127.0.0.1”<br>
Сохраняем, перезапускаем панель, выходим из панели, отключаемся от сервера (SSH)</li>
<li>Проверить доступ к панели через браузер: “ip_адрес_сервера:2053/helloworld” - не должен входить.</li>
<li>Осталось проверить доступ к панели через ssh по адресу 127.0.0.1, то есть повторяем пункт 3 и пункт 4. Если заходит, значит все хорошо.</li>
</ol>
<p>Максимально подробно написал, думаю не ошибетесь) Писал по старым заметкам поэтому может быть что-то изменилось в настройках панели в новых версиях. Сам сейчас не использую прокси.</p></td><td>2024-10-24T16:59:08.441Z</td></tr><tr><td>wguboa</td><td><p>Можно ещё добавить, что если доступ не по паролю — после указания порта, добавить в конец ключ -i “C:\full_path\blablabla” с путём до сертификата.</p></td><td>2024-10-25T06:25:17.543Z</td></tr><tr><td>slq</td><td><p>Еще один важный момент, который можно не заметить. Когда уже будете настраивать сам протокол - “Добавить подключение”, там есть строчка “порт ip”, надо ввести ip адрес сервера, иначе, когда будет генерироваться ссылка/qr код для подключения клиента, в ссылке/qr коде будет ip адрес 127.0.0.1 и соединение не установится.</p></td><td>2024-10-25T06:48:10.688Z</td></tr><tr><td>us3r</td><td><p>Можно еще добавить:</p>
<p><code># Устанавливаем фаервол</code><br>
<code>sudo apt install ufw -y</code></p>
<p><code># Разрешаем SSH</code><br>
<code>sudo ufw allow 22/tcp</code></p>
<p><code># Разрешаем панель 3x-ui</code><br>
<code>sudo ufw allow 2053/tcp</code></p>
<p><code># Разрешаем порт для VLESS/XTLS Reality</code><br>
<code>sudo ufw allow 443/tcp</code></p>
<p><code># Включаем UFW</code><br>
<code>sudo ufw enable</code></p>
<p><code># Проверяем UFW</code><br>
<code>sudo ufw status</code></p>
<p>Соотвественно в ufw allow необходимо указать свои порты</p></td><td>2024-10-25T07:21:46.088Z</td></tr><tr><td>lucretia(lucretia)</td><td><aside class="quote no-group" data-username="us3r" data-post="14" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/u/8edcca/48.png" class="avatar"> us3r:</div>
<blockquote>
<p>sudo ufw allow 22/tcp</p>
</blockquote>
</aside>
<p>Лучше перевесить как можно дальше</p></td><td>2024-10-25T08:24:43.126Z</td></tr><tr><td>c5sa(c5sa)</td><td><p>Давным давно упрятал и ssh и панель за dokodemodoor, с доводами против active probing согласен, но и просто принудительный https проблему не решает, а больше мешает, и к слову <a href="https://github.com/alireza0/x-ui" class="inline-onebox" rel="noopener nofollow ugc">GitHub - alireza0/x-ui: xray panel supporting multi-protocol multi-user expire day &amp; traffic (Vmess &amp; Vless &amp; Trojan &amp; Shadowsocks)</a> недавно принулительно включили рандомный path for web panel при обновлении, чем в теории могут лишить кого-нибудь доступа к серверу, если он как раз таки подключен во время обновления к ssh сквозь xray, пойди что не по плану, а кто не шарит, в свою очередь до обновления и не дотянутся, но да ладно.</p>
<p>НЕ пойму в чём продажность? Есть какие то доказательства или весь сыр бор от “не безопасно по умолчанию если настраивать без мануала и минимального понимания процесса” именно в контексте отсутствия https на панель? Опять же от active probing полезнее рандомный path for web panel. Или в Иранах dpi ищет тебя на стадии установки и настройки панели? Тогда сразу слушать только localhost<br>
если настройки по-нубски пропущены, сильно огрызаться на 0.0.0.0, учить туннелям.</p>
<p>Или говорится о какой то особенности самого протокола, настройке ядра, исходящей от панели, которую можно сочти за бекдор, а не способе настройки панели?</p>
<p>P.S. Потихоньку читаю <a href="https://github.com/XTLS/Xray-core/pull/3884" class="inline-onebox" rel="noopener nofollow ugc">README.md: Only list secure web panels by RPRX · Pull Request #3884 · XTLS/Xray-core · GitHub</a> через переводчик, возможно найду ответы на свои вопросы</p>
<aside class="quote no-group" data-username="wguboa" data-post="4" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/49beb7/48.png" class="avatar"> wguboa:</div>
<blockquote>
<p>дали выбор местоположения при установке — например, Иран или прочие страны (Ирану судя по всему важно именно HTTP соединение для обхода GFW).</p>
</blockquote>
</aside>
<p>где об этом можно поподробнее узнать? об Иранской специфике</p></td><td>2024-10-25T11:04:15.966Z</td></tr><tr><td>wguboa</td><td><p>Я это из этой ветки и вычитал/переводил. Конечно, утверждение о продажности голословное.</p>
<p>Ссылаются на то, что массово новички пользуются <a href="https://github.com/XTLS/Xray-core/pull/3884#issuecomment-2423356601" rel="noopener nofollow ugc">версией без TLS</a>, включая её популизацию.<br>
Гуглоперевод:</p>
<blockquote>
<p>Я говорю вам технические истины, но вы не слушаете. Открытый HTTP напрямую передает закрытый ключ сервера, и даже TLS и REALITY могут быть атакованы и расшифрованы. Как насчет того, чтобы перелезть через стену и пойти прямо в бюро общественной безопасности? сдаться? Даже без сертификата так сложно открыть проброс портов по SSH? Или вы все были подкуплены GFW за разработку панели, позволяющей использовать HTTP в открытом виде в качестве приманки? Разве мне не интересно, не является ли запрет HTTP с открытым текстом чрезмерным запросом?</p>
</blockquote>
<p>По Ирану там же <a href="https://github.com/XTLS/Xray-core/pull/3884#issuecomment-2423523490" rel="noopener nofollow ugc">предложили</a>.<br>
RPRX сразу после внесения коммита это <a href="https://github.com/XTLS/Xray-core/pull/3884#issuecomment-2434090321" rel="noopener nofollow ugc">обосновал так.</a></p></td><td>2024-10-25T11:52:37.505Z</td></tr><tr><td>kencarson</td><td><p>а если от хостинга предустановленный 3x-ui идет уже через HTTPS, это сильно хуже чем данный метод?</p></td><td>2024-10-25T16:04:11.443Z</td></tr><tr><td>Mayday</td><td><p>Спасибо, отличное руководство! И комменты… полностью раскрывают суть.<br>
<img src="https://ntc.party/images/emoji/twitter/handshake.png?v=12" title=":handshake:" class="emoji only-emoji" alt=":handshake:" loading="lazy" width="20" height="20"><br>
На Хабаре мне ещё попадалась рекомендация (правда этот кажется об Xray):</p>
<blockquote>
<p>Сделайте проброс порта не только на 443/TCP-порт (его делает XTLS-Reality), а еще на 443/UDP и 80/TCP до сервера, под который вы маскируетесь. Например, если вы маскируетесь под <a href="http://www.microsoft.com" rel="noopener nofollow ugc">www.microsoft.com</a>, то отрезолвте его IP-адрес (с помощью nslookup, ping или какого-нибудь онлайн-сервиса), а потом добавьте правила iptables (можно засунуть в /etc/rc.local, если он у вас есть - см. инструкции для вашего Linux-дистрибутива):<br>
iptables -t nat -A PREROUTING -i eth0 -p udp --dport 443 -j DNAT --to-destination fake_site_ip:443<br>
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination fake_site_ip:80<br>
(вместо eth0 должен быть ваш сетевой интерфейс, иногда бывает ens3, например).</p>
</blockquote></td><td>2024-10-25T16:42:10.196Z</td></tr><tr><td>boltor</td><td><aside class="quote no-group" data-username="wguboa" data-post="17" data-topic="12243">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/49beb7/48.png" class="avatar"> wguboa:</div>
<blockquote>
<p>RPRX сразу после внесения коммита это <a href="https://github.com/XTLS/Xray-core/pull/3884#issuecomment-2434090321">обосновал так. </a></p>
</blockquote>
</aside>
<blockquote>
<p>I am tired of asking you to support only HTTPS or SSH port forwarding. The latter is not difficult. I can’t think of any reasons for you. Anyway, I will be regarded as GFW. Write 3S-UI or what, <strong>do not contaminate the ecology of XRAY anyway.</strong></p>
</blockquote>
<p>Говорит: “Я устал повторять вам включить поддержку HTTPS или проброс порта по SSH. Последнее ну вообще не сложно. Я реально вас не пойму. Короче, буду думать, что вас взяли под козырёк. Пишите там 3S-UI или чё хотите (<em>намёк на панель, основанную на ядре Sing-Box</em> – прим.пер.) и <strong>не порочьте экологию и репутацию XRAY</strong>.”</p>
<p>Вот это с плеча так с плеча. Позиция ясная, и вполне понятно, что никаких пруфов нет, а разраб просто очень принципиальный, устал от раздражающих его практик и взбугуртил.<br>
В принципе, панелью можно продолжать пользоваться, если понимаешь, что делаешь, но я думаю он прав в том, что популяризация этой панели с такими дефолтными настройками это всё-таки маразм.</p></td><td>2024-10-25T17:02:34.699Z</td></tr><tr><td>c5sa(c5sa)</td><td><p>Если он на случайном порту, с достаточно беспалевным сертификатом и путём, то не хуже по идее</p></td><td>2024-10-25T22:18:45.529Z</td></tr><tr><td>kencarson</td><td><p>а какой сертификат можно считать беспалевным в данном контексте?</p></td><td>2024-10-25T22:44:37.564Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Честно говоря - вообще не очень понимаю смысла делать такую вот панель веб сервисом. Вся её задача - собрать валидную конфигу xray без теребления километрового  жсона врукопашку. С тем же успехом это могло быть приложение на дотнете, хуже бы вот вообще не стало(разве что в плане кроссплатформенности). По сути, панель можно вообще развернуть в докере и запускать только при необходимости отредактировать конфигу.</p></td><td>2024-10-27T00:35:41.188Z</td></tr><tr><td>mayopumpum(Anton)</td><td><p>Я правильно понимаю, что если ставим в настройках прямой домен .ru, то трафик не должен проксироваться и пойдет напрямую? Блокировка доменов работает норм, а вот прямые домены не хочет что-то. <a href="http://2ip.ru" rel="noopener nofollow ugc">2ip.ru</a> показывает ip зарубежный.</p></td><td>2024-10-28T16:50:41.444Z</td></tr><tr><td>lucretia(lucretia)</td><td><p>В самой панели на сервере работает толкько блокировка.</p>
<p>По каким-то причинам,  если вы хотите поставить bypass для зоны ру или другой то это надо делать не через панели эти, а в клиенте(nekobox etc)</p></td><td>2024-10-29T08:00:44.429Z</td></tr><tr><td>DBT081</td><td><p>по вполне очевидным причинам, если уж трафик пришёл на сервер, то он ничего не может кроме как пустить трафик через себя, другой сервер, или заблокировать. Решение, отправить трафик с клиента на сервер или напрямую, принимается клиентом</p></td><td>2024-10-29T15:05:02.797Z</td></tr><tr><td>anonimnyj72(anonimnyj72)</td><td><p>Подскажите плз по данной теме:<br>
я остановился на самоподписанном TLS для 3x-ui, но для того, чтобы указать путь к SSH ключам, нужно хотябы единожды зайти в в веб панель и там их прописать, т.е. один раз http я спалю. С учетом вышеупомянутого тут “random path for web panel”, насколько небезепосен такой сценарий против active probing?<br>
Может быть, стоит вручную прописать эти пути через консоль? Как это грамотно сделать, я пока нигде не нашел</p></td><td>2024-11-02T23:27:56.840Z</td></tr><tr><td>us3r</td><td><p>Немного выше есть хороший список пунктов порядка действий.</p>
<p>На ваш вопрос ответ в 3м пункте (не смотря на подключение по http, соединение будет зашифровано  ssh).<br>
После ввода данной команды и нажатия enter,  в браузере заходите в панель по ip 127.0.0.1, трафик будет перенаправлен через ssh на 127.0.0.1 на vps.</p>
<blockquote>
<p>Подключаемся к панели через SSH туннель:<br>
ssh -L 45000:127.0.0.1:2053 имя_пользователя@ip_сервера [-p &lt;ssh_port&gt;] - вводим в командной строке Windows, не закрываем окно командной строки.<br>
-p &lt;ssh_port&gt; - вводим если только на сервере перевесили ssh порт на другой.<br>
45000 - это порт на компе, можно указать любой другой. Главное, чтобы повыше цифра т.к. с 1 по 1023 порты системные<br>
2053 - это порт панели, если при установке через скрипт, установили другой порт для панели, то тогда пишем этот другой порт.<br>
имя_пользователя - если на сервер доступ через учетку админа, то пишите root вместо имя_пользователя</p>
</blockquote></td><td>2024-11-03T01:55:38.421Z</td></tr><tr><td>anonimnyj72(anonimnyj72)</td><td><p>Всё получилось, спасибо большое. Пришлось, правда, немного ещё chatgpt подушить, потому что у меня доступ к серверу уже был только по SSH ключу, и нужно было добавить в команду путь к нему</p></td><td>2024-11-03T05:51:14.868Z</td></tr><tr><td>Mayday</td><td><p>Самоподписанный сертификат может быть инжектирован в панель 3x-ui не входя в интерфейс при помощи скрипта:</p>
<pre><code class="lang-auto">bash &lt;(curl -Ls https://raw.githubusercontent.com/cyb3rm4gus/3x-ui-auto_add_ssl/main/3x-ui-autossl.sh)
</code></pre>
<p>Информация взята из блога <strong>zerodaily</strong> – <a href="https://t.me/zerodaily_ru" class="inline-onebox" rel="noopener nofollow ugc">Telegram: Contact @zerodaily_ru</a> - проверена на практике.<br>
<a href="https://github.com/cyb3rm4gus/3x-ui-auto_add_ssl" class="inline-onebox" rel="noopener nofollow ugc">GitHub - cyb3rm4gus/3x-ui-auto_add_ssl: Bash script to execute after 3x-ui installation to automatically add self-signed SSL cert for the admin panel</a></p></td><td>2024-11-03T18:35:40.916Z</td></tr><tr><td>anonimnyj72(anonimnyj72)</td><td><p>Очень итересный у него гайд. С точки зрения запар, лучше некуда. Но у меня уже почти всё что он предлагает настроено. По итогу сама логика его решения именно по моему вопросу, это заход в панель через SSH и дальше уже по скрипту, но, по большому счёту, зайти в веб панель по SSH туннелю, это то же самое)</p></td><td>2024-11-03T22:51:29.184Z</td></tr>
    </table>
      </body>
    </html>