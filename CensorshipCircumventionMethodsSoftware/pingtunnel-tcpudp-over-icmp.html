
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>pingtunnel-tcpudp-over-icmp</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>hookz(Talya)</td><td><p>Есть интересная тулза (идея не нова), но не получилось завести, в статистике по нулям.</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/esrrhs/pingtunnel">
  <header class="source">

      <a href="https://github.com/esrrhs/pingtunnel" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="pingtunnel-tcpudp-over-icmp/b3bd9ea981bb28639840e6e963638672c43f7065_2_690x344.png" class="thumbnail" data-dominant-color="EFF4F2">

  <h3><a href="https://github.com/esrrhs/pingtunnel" target="_blank" rel="noopener nofollow ugc">GitHub - esrrhs/pingtunnel: Pingtunnel is a tool that send TCP/UDP traffic...</a></h3>

    <p><span class="github-repo-description">Pingtunnel is a tool that send TCP/UDP traffic over ICMP</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
Нахожусь не в рф, тестил на hetzner cloud, может у кого-нибудь получиться завести его?</p>
<p>Сервер:<br>
<code>./pingtunnel -type server -key 1337</code></p>
<p><img src="pingtunnel-tcpudp-over-icmp/56789d0f404d478f674ee3bb4860b0add532ee0a.png" alt="image" data-base62-sha1="ckXtuFvVpxbxuR5HeViXV1DiZn4" width="661" height="418"></p>
<p>Клиент:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="pingtunnel-tcpudp-over-icmp/7c1014e943d7808d6204acf9b1bb9bc23567d094.png" data-download-href="https://ntc.party/uploads/default/7c1014e943d7808d6204acf9b1bb9bc23567d094" title="image"><img src="pingtunnel-tcpudp-over-icmp/7c1014e943d7808d6204acf9b1bb9bc23567d094.png" alt="image" data-base62-sha1="hHvEZB0OugmaUUcZZ3fl7L3JJQw" width="452" height="500" data-dominant-color="EBEBEB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">497×549 16.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-02-02T07:05:13.793Z</td></tr><tr><td>hookz(Talya)</td><td><p>Следующее решение оказалось рабочим, оставлю тут</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/go-gost/gost">
  <header class="source">

      <a href="https://github.com/go-gost/gost" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="pingtunnel-tcpudp-over-icmp/d5a53ee34ffaccf822bbe50f4f02c05034eea7a8_2_690x344.png" class="thumbnail" data-dominant-color="EDF2F2">

  <h3><a href="https://github.com/go-gost/gost" target="_blank" rel="noopener nofollow ugc">GitHub - go-gost/gost: GO Simple Tunnel - a simple tunnel written in...</a></h3>

    <p><span class="github-repo-description">GO Simple Tunnel - a simple tunnel written in golang</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p><a href="https://gost.run/en/tutorials/icmp/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://gost.run/en/tutorials/icmp/</a></p></td><td>2024-02-02T08:58:05.834Z</td></tr><tr><td>ValdikSS</td><td><aside class="quote no-group" data-username="hookz" data-post="1" data-topic="7052">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hookz/48/91_2.png" class="avatar"> hookz:</div>
<blockquote>
<p>может у кого-нибудь получиться завести его?</p>
</blockquote>
</aside>
<p>Нужно еще <code>sysctl net.ipv4.icmp_echo_ignore_all=1</code>, скорее всего.</p></td><td>2024-02-04T16:31:19.208Z</td></tr><tr><td>hookz(Talya)</td><td><p>В первую очередь перепроверял, не помогло. В любом случае, рабочее решение есть.</p></td><td>2024-02-05T09:47:11.767Z</td></tr><tr><td>Kisliy(Андрей)</td><td><p>У меня всё получилось <img src="https://ntc.party/images/emoji/twitter/nerd_face.png?v=12" title=":nerd_face:" class="emoji" alt=":nerd_face:" loading="lazy" width="20" height="20"> Вот правда скорость какая-то подозрительно астрономическая для ping туннеля <img src="https://ntc.party/images/emoji/twitter/face_with_raised_eyebrow.png?v=12" title=":face_with_raised_eyebrow:" class="emoji" alt=":face_with_raised_eyebrow:" loading="lazy" width="20" height="20"></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="pingtunnel-tcpudp-over-icmp/1865271a578a8d79bb9c581ddf0fddec376daaa2.png" data-download-href="https://ntc.party/uploads/default/1865271a578a8d79bb9c581ddf0fddec376daaa2" title="image"><img src="pingtunnel-tcpudp-over-icmp/1865271a578a8d79bb9c581ddf0fddec376daaa2_2_517x102.png" alt="image" data-base62-sha1="3tOb2q2TA6IuxWpN8uDBIHSHAAO" width="517" height="102" srcset="pingtunnel-tcpudp-over-icmp/1865271a578a8d79bb9c581ddf0fddec376daaa2_2_517x102.png, pingtunnel-tcpudp-over-icmp/1865271a578a8d79bb9c581ddf0fddec376daaa2_2_775x153.png 1.5x, pingtunnel-tcpudp-over-icmp/1865271a578a8d79bb9c581ddf0fddec376daaa2_2_1034x204.png 2x" data-dominant-color="F8F8F8"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1149×229 11.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>На стороне сервера достаточно прописать в терминале …/pingtunnel -type server -key *******</p>
<p>А вот рабочий вариант настроек клиента на Windows 10 (для работы, возможно, в системе должна быть установлена библиотека Npcap):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="pingtunnel-tcpudp-over-icmp/bfc7cfa8f2e864d508b456a6d645ee314180e4fb.jpeg" data-download-href="https://ntc.party/uploads/default/bfc7cfa8f2e864d508b456a6d645ee314180e4fb" title="Снимок экрана 2024-06-11 025915"><img src="pingtunnel-tcpudp-over-icmp/bfc7cfa8f2e864d508b456a6d645ee314180e4fb_2_690x310.jpeg" alt="Снимок экрана 2024-06-11 025915" data-base62-sha1="rmzhZYCBfO3Xk1mVNPCF58jIkl5" width="690" height="310" srcset="pingtunnel-tcpudp-over-icmp/bfc7cfa8f2e864d508b456a6d645ee314180e4fb_2_690x310.jpeg, pingtunnel-tcpudp-over-icmp/bfc7cfa8f2e864d508b456a6d645ee314180e4fb_2_1035x465.jpeg 1.5x, pingtunnel-tcpudp-over-icmp/bfc7cfa8f2e864d508b456a6d645ee314180e4fb_2_1380x620.jpeg 2x" data-dominant-color="5F6061"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-06-11 025915</span><span class="informations">2007×903 221 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-06-13T01:35:21.590Z</td></tr><tr><td>Amogususyy(Amogususyy)</td><td><p>Так он в обычные icmp TCP/ip пакеты заворачивает в какой нибудь обычный tcp или quic с контролем перегрузок</p></td><td>2025-01-13T02:11:59.094Z</td></tr><tr><td>denium</td><td><p>net.ipv4.icmp_echo_ignore_all=1 должно быть и на сервере и на клиенте? Без этого никак?</p></td><td>2025-01-16T20:28:04.166Z</td></tr><tr><td>denium</td><td><p>С этим заработало. Но ведь это же не ICMP, а TCP, судя по Wireshark. И порты есть, а в ICMP нет портов.</p></td><td>2025-01-16T20:35:56.474Z</td></tr><tr><td>Kisliy(Андрей)</td><td><aside class="quote no-group" data-username="Amogususyy" data-post="6" data-topic="7052" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/amogususyy/48/14721_2.png" class="avatar"> Amogususyy:</div>
<blockquote>
<p>Так он в обычные icmp TCP/ip пакеты заворачивает в какой нибудь обычный tcp или quic с контролем перегрузок</p>
</blockquote>
</aside>
<p>Заявлено наоборот, TCP пакеты в ICMP туннель “<em>PingTunnel — утилита для передачи TCP/UDP-трафика через ICMP.</em>”</p>
<aside class="quote no-group" data-username="denium" data-post="7" data-topic="7052" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/7c8e57/48.png" class="avatar"> denium:</div>
<blockquote>
<p>net.ipv4.icmp_echo_ignore_all=1 должно быть и на сервере и на клиенте? Без этого никак?</p>
</blockquote>
</aside>
<p>В моём случае разницы не заметил, работало и так и так.</p>
<aside class="quote no-group" data-username="denium" data-post="8" data-topic="7052" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/7c8e57/48.png" class="avatar"> denium:</div>
<blockquote>
<p>С этим заработало. Но ведь это же не ICMP, а TCP, судя по Wireshark. И порты есть, а в ICMP нет портов.</p>
</blockquote>
</aside>
<p>По идеи должен быть TCP пакет в ICMP пакете, я так глубоко не смотрел. Тут вот есть хорошая статья с “кишками” про пинг туннели <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> : <a href="https://habr.com/ru/companies/ruvds/articles/763600/" class="inline-onebox" rel="noopener nofollow ugc">Пакуем весь трафик в Ping message, чтобы не платить за интернет | ICMP NAT traversal / Хабр</a><br>
<div class="lightbox-wrapper"><a class="lightbox" href="pingtunnel-tcpudp-over-icmp/8045014a1fabd51dc2ed63980bbfd93d85761d0c.png" data-download-href="https://ntc.party/uploads/default/8045014a1fabd51dc2ed63980bbfd93d85761d0c" title="изображение_2025-01-17_022547052"><img src="pingtunnel-tcpudp-over-icmp/8045014a1fabd51dc2ed63980bbfd93d85761d0c_2_345x166.png" alt="изображение_2025-01-17_022547052" data-base62-sha1="iiIXrJz4GubDw9weOxi5S4MPfZy" width="345" height="166" srcset="pingtunnel-tcpudp-over-icmp/8045014a1fabd51dc2ed63980bbfd93d85761d0c_2_345x166.png, pingtunnel-tcpudp-over-icmp/8045014a1fabd51dc2ed63980bbfd93d85761d0c_2_517x249.png 1.5x, pingtunnel-tcpudp-over-icmp/8045014a1fabd51dc2ed63980bbfd93d85761d0c_2_690x332.png 2x" data-dominant-color="E4DEDB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение_2025-01-17_022547052</span><span class="informations">1008×486 164 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2025-01-16T23:41:31.163Z</td></tr>
    </table>
      </body>
    </html>