
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>↔️-удалённый-pac-файл-для-локального-proxy-сервера</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Anonimno(Anonimno)</td><td><p>Наваял скрипт изменяющий в PAC-файле <a href="http://antizapret.prostovpn.org">antizapret.prostovpn.org</a> адреса прокси AntiZapret на локальный адрес 127.0.0.1:1080 (например для ShadowSocks с настройками по умолчанию).<br>
<br></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="↔️-удалённый-pac-файл-для-локального-proxy-сервера/acac527bb647686faf6d9853fdc3541732146642.png" data-download-href="https://ntc.party/uploads/default/acac527bb647686faf6d9853fdc3541732146642" title="SS"><img src="↔️-удалённый-pac-файл-для-локального-proxy-сервера/acac527bb647686faf6d9853fdc3541732146642.png" alt="SS" data-base62-sha1="oDxk3DSNsDAQ7GpHTEFQs5q0gsW" width="507" height="124"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">SS</span><span class="informations">507×124 8.04 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Обновление выполняется раз в 6 часов.<br>
<br></p>
<p>Модифицированный PAC-файл кладётся суда - <a href="https://github.com/onminonA/proxy.pac" class="inline-onebox">GitHub - onminonA/proxy.pac: RU-PAC file anti-censorship in Russian Federation</a></p></td><td>2024-03-15T17:00:05.840Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Т.к. при доступе с зарубежных IP, сервер Антизапрета c PAC-файлом отдает <em>403 Forbidden</em>, подправил скрипт для запуска на роутере, обновления так же каждые 6 часов.</p></td><td>2024-03-17T21:40:52.651Z</td></tr><tr><td>ValdikSS</td><td><p>Лист АнтиЗапрета всё равно не обновляется.</p></td><td>2024-03-18T07:42:55.558Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Надеюсь это временно? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-03-18T08:19:03.798Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Кстати Shadowsocks 4.4.1.0 не может работать с PAC-файлом ~ 1.4 Mb.<br>
Firefox медленно, но обрабатывает данные (первая загрузка/обновление) с такого PAC, причем вплоть до прекращения хождения любого трафика до нескольких минут.</p></td><td>2024-03-20T13:12:25.550Z</td></tr><tr><td>dartraiden(Alexander Gavrilov)</td><td><aside class="quote quote-modified" data-post="1" data-topic="7433">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BD%D1%83%D0%B6%D0%BD%D0%B0-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82%D0%BE%D0%B2-%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B5%D0%B9-pac-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0/7433">Нужна помощь программистов с оптимизацией PAC-файла</a> <a class="badge-category__wrapper " href="/c/antizapret-prostovpn-org/5"><span data-category-id="5" style="--category-badge-color: #8C6238; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="Proxy and VPN service for Russian censorship circumvention, discussion and official support forum. Обсуждение работы сервиса обхода блокировок России АнтиЗапрет. Новости, уведомления о проблемах и помощь в настройке."><span class="badge-category__name">antizapret.prostovpn.org</span></span></a>
  </div>
  <blockquote>
    PAC-файл (Proxy Auto-Configuration) АнтиЗапрета не обновляется с 28 января, из-за слишком большого количества заблокированных доменов в Реестре запрещённых сайтов, которые не укладываются в <a href="https://issues.chromium.org/issues/41293370">лимит браузеров на основе Chrome</a>. 
Эта проблема не нова, но до недавнего времени с ней удавалось справляться фильтром нерабочих (и припаркованных) доменов, исключением мусорных зеркал вручную, простыми алгоритмами сжатия и оптимизации. Сейчас же доменов стало так много, что у меня не получается справится в эт…
  </blockquote>
</aside>
</td><td>2024-03-20T20:02:00.865Z</td></tr><tr><td>runalsh(runalsh)</td><td><aside class="quote no-group" data-username="Anonimno" data-post="5" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a88e57/48.png" class="avatar"> Anonimno:</div>
<blockquote>
<p>Shadowsocks</p>
</blockquote>
</aside>
<p>У меня штатно работает с ним. ss-rust не пробовали?<br>
Сделал свой <a href="https://github.com/runalsh/antizapret-pac-generator-light" rel="noopener nofollow ugc">генератор PAC</a> на Github Actions, по примеру можете настроить на свой вкус и цвет и со своими дополнительными списками.</p></td><td>2024-03-21T06:59:22.519Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><aside class="quote no-group" data-username="runalsh" data-post="7" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/fbc32d/48.png" class="avatar"> runalsh:</div>
<blockquote>
<p>У меня штатно работает с ним. ss-rust не пробовали?</p>
</blockquote>
</aside>
<p>Задача что бы PAC заработал со стандартным Sadowsocks для Windows.<br>
С вашим PAC аналогично не заработало (после правки портов по умолчанию). Как понял всё упирается в ограничение на размер PAC-файла… Кстати с вашим конфигом у вас открывается <a href="http://play.google.com">play.google.com</a>? Почему то не открылось.</p>
<aside class="quote no-group" data-username="runalsh" data-post="7" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/fbc32d/48.png" class="avatar"> runalsh:</div>
<blockquote>
<p>по примеру можете настроить на свой вкус и цвет и со своими дополнительными списками.</p>
</blockquote>
</aside>
<p><s>Это все сохраняется у меня под именем firefox_proxy.pac</s></p></td><td>2024-03-21T16:42:15.012Z</td></tr><tr><td>Toshik</td><td><p>Также работает и для локального http proxy, если поменять его тип в pac-файле.</p></td><td>2024-03-23T10:32:01.578Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>С HTTP-proxy PAC теперь работает корректно.<br>
Спасибо за тестинг <a class="mention" href="/u/toshik">@Toshik</a></p></td><td>2024-03-29T07:10:43.920Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p><s><a href="https://github.com/onminonA/proxy.pac?tab=readme-ov-file#%D0%B4%D0%BB%D1%8F-firefox-%D0%B8-%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-firefox">Временно начал генерировать PAC-файл со свежими данными, но ТОЛЬКО для Firefox и ему подобным</a>.</s> Размер файла переваливает далеко за 1 Мб.</p></td><td>2024-07-22T12:59:58.941Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>В файл <a href="https://raw.githubusercontent.com/onminonA/proxy.pac/main/proxy.pac"><strong>proxy.pac</strong></a> по умолчанию добавлены следующие домены (проксирование через Ваш туннель):</p>
<pre><code class="lang-auto">*ytimg.com;
*youtube.com;
*googleapis.com;
*gstatic.com;
*l.google.com;
*ggpht.com;
*googleusercontent.com;
*youtu.be;
*redirector.googlevideo.com
</code></pre>
<br>
<p>Отдельно в файл <a href="https://raw.githubusercontent.com/onminonA/proxy.pac/main/proxy_yt.pac"><strong>proxy_yt.pac</strong></a> по умолчанию добавлены домены указанные выше, плюс домен:</p>
<pre><code class="lang-auto">*googlevideo.com
</code></pre>
<p>для проксирования через Ваш туннель видеопотока Youtube.</p></td><td>2024-08-09T15:01:16.353Z</td></tr><tr><td>navion</td><td><aside class="quote no-group" data-username="Anonimno" data-post="12" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a88e57/48.png" class="avatar"> Anonimno:</div>
<blockquote>
<p>для проксирования через Ваш туннель видеопотока Youtube.</p>
</blockquote>
</aside>
<p>А для чего сделано такое разделение?</p></td><td>2024-08-10T10:45:10.743Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Что бы не прогонять видеопоток Youtube на провайдерах у которых videogoogle не заблокирован полностью, но заблокированы некоторые домена Youtube из списка proxy.pac, известно 2 таких провайдера в моей местности.<br>
А третий провайдер блокирует полностью, без туннеля Youtube не открывается вовсе.</p></td><td>2024-08-10T15:20:30.795Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p><a href="https://github.com/onminonA/proxy.pac/tree/main?tab=readme-ov-file#%D0%B4%D0%BB%D1%8F-firefox-%D0%B8-%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-firefox">На постоянной основе запустил генерацию PAC-файл со свежими данными ТОЛЬКО для Firefox и браузеров основанных на Firefox </a>.<br>
Частота проверки обновленных данных 1 раз в сутки.</p>
<p>В файл <a href="https://github.com/onminonA/proxy.pac/blob/main/firefox_proxy.pac"><em><strong>firefox_proxy.pac</strong></em></a> включены домены Youtube, в т.ч. видеопотока ( <code>googlevideo.com</code>).</p></td><td>2024-08-16T17:00:14.932Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><aside class="quote no-group" data-username="Anonimno" data-post="15" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a88e57/48.png" class="avatar"> Anonimno:</div>
<blockquote>
<p><s>В файл <a href="https://github.com/onminonA/proxy.pac/blob/main/firefox_proxy.pac"><em><strong>firefox_proxy.pac</strong></em> </a> включены домены Youtube, в т.ч. видеопотока ( <code>googlevideo.com</code>).</s></p>
</blockquote>
</aside>
<p>Выполнены изменения в <strong>PAC для Firefox</strong>:</p>
<ul>
<li>
<p>В файл <a href="https://github.com/onminonA/proxy.pac/blob/main/firefox_proxy.pac"><em><strong>firefox_proxy.pac</strong></em> </a> включены домены Youtube, <strong>за исключением домена</strong> <code>googlevideo.com</code>.</p>
</li>
<li>
<p>В файл <a href="https://github.com/onminonA/proxy.pac/blob/main/firefox_proxy_yt.pac"><em><strong>firefox_proxy_yt.pac</strong></em> </a> включены домены Youtube, <strong>включая домен</strong> <code>googlevideo.com</code>.</p>
</li>
</ul></td><td>2024-09-09T00:44:43.786Z</td></tr><tr><td>runalsh(runalsh)</td><td><p>А с самим скриптом можно ознакомиться? Изменения по сравнению с оригиналом и тд</p></td><td>2024-09-09T07:34:22.208Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Можно - <a href="https://bitbucket.org/anticensority/antizapret-pac-generator-light/src/master/" class="inline-onebox">Bitbucket</a><br>
Для proxy*.pac частично изменены/удалены комментарии + изменены адреса proxy + добавлены домены Youtube.<br>
Для firefox*.pac изменены/удалены комментарии + изменены адреса proxy + добавлены домены Youtube + вкл. RESOLVE NXDOMAIN + добавлены хосты в include-hosts:</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">openai.com
chatgpt.com
oaistatic.com
oaiusercontent.com
intercomcdn.com
intercom.io
azureedge.net
launchdarkly.com
fastly.net
arkoselabs.com
copilot.microsoft.com
bingapis.com
1e100.net
mdns.mcast.net
aaplimg.com
</code></pre>
</details></td><td>2024-09-09T09:19:29.232Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><aside class="quote no-group quote-modified" data-username="Anonimno" data-post="18" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a88e57/48.png" class="avatar"> Anonimno:</div>
<blockquote>
<p>include-hosts</p>
<pre><code class="lang-auto">fastly.net
</code></pre>
</blockquote>
</aside>
<p>Удалён из include-hosts хост CDN <code>fastly.net</code><br>
Влияния на работе различных нейросетей, на текущий момент, не выявил.</p></td><td>2024-09-20T17:17:04.780Z</td></tr><tr><td>sh7(sh)</td><td><p>этот pac можно использовать в nekoray или вообще в 3X-UI сразу? и как это сделать подскажите, пожалуйста</p></td><td>2024-09-29T11:56:40.767Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Добавлено в include-hosts</p>
<pre><code class="lang-auto">discord.com
discord.gg
discord.media
discordapp.com
discordapp.net
</code></pre>
<p><a href="https://github.com/onminonA/proxy.pac/wiki/firefox_proxy(_yt).pac">Актуальный список по добавленным хостам в PAC, помимо выгрузок из дампа РКН, ведётся здесь</a></p></td><td>2024-10-08T16:18:17.314Z</td></tr><tr><td>DNMA</td><td><p>В соседней теме <a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-discord-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/11132/274" class="inline-onebox">Блокировка Discord (обсуждение + обход блокировки) - #274 by IndeecFOX</a> предлагают вот такой список хостов для Дискорда:</p>
<pre><code class="lang-auto">discord.com
discord.gg
discordapp.com
discordapp.net
discord.media
discord-attachments-uploads-prd.storage.googleapis.com
dis.gd
discord.co
discordcdn.com
discordstatus.com
</code></pre>
<p>Может получится у вас обновить? Потому что с вашими пятью звонилка в браузере не работает. Или она в приципе работать не будет без нативного приложения? Или только у меня не работает?</p></td><td>2024-10-12T16:50:08.097Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>В текущих PAC-файлах добавлены следующие хосты:</p>
<pre><code class="lang-auto">discord.com
discord.gg
discord.media
discordapp.com
discordapp.net
</code></pre>
<p>Предполагаю что работа голосовых звонков зависит от типа вашего протокола, а именно уровень поддержки в них UDP.</p>
<p>Из мини теста, остальные хосты редиректят на эти 5 хостов.</p>
<pre><code class="lang-auto">discordcdn.com
</code></pre>
<p>Этот хост не встречал ранее, добавил.</p></td><td>2024-10-12T17:18:40.154Z</td></tr><tr><td>IndeecFOX(IndeecFox)</td><td><aside class="quote no-group" data-username="DNMA" data-post="22" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b5e925/48.png" class="avatar"> DNMA:</div>
<blockquote>
<p>звонилка в браузере не работает. Или она в приципе работать не будет без нативного приложения?</p>
</blockquote>
</aside>
<p>Насколько знаю требуется UDP, а значит Goodbyedpi не подойдёт. Только zapret использовать.</p></td><td>2024-10-12T18:07:47.496Z</td></tr><tr><td>DNMA</td><td><p>Спасибо за обновление! Но к сожалению звонки так и не заработали. Сам сайт и сервера открываются отлично.</p></td><td>2024-10-13T13:07:42.370Z</td></tr><tr><td>DNMA</td><td><p>Я понимаю, но я не использовал ни GoodbyeDPI, ни Zapret. Я прописывал ссылку на .pac файл через настройки Firefox, без всяких расширений, ну и юзал веб-версию Дискорда, но видимо звонки через браузер починить не получается… Просто стараюсь минимум приложений использовать.</p></td><td>2024-10-13T13:11:25.201Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Для файлов <em>firefox_proxy(_yt).pac</em> добавлены маски-исключения, убирающие n-ое количество адресов наркоты, казино, поддельных документов. Фильтры довольно агрессивные, присутствует вероятность что зацепило что-то полезное.</p></td><td>2024-10-31T04:22:25.489Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p><a class="mention" href="/u/valdikss">@ValdikSS</a> предложение по генерации PAC: поменять порядок добавления <em>include-hosts-{dist,custom}.txt</em> в файл <em>hostlist_zones.txt</em></p>
<p>В текущей реализации, в случаях совпадения с фильтрами убирающих мусор (<em>exclude-regexp-dist.awk</em>) имеются хосты из <em>include-hosts-{dist,custom}.txt</em>, они так же вычищаются.</p>
<p>ps: добавил костыль в <em>parse.sh</em></p>
<ul>
<li>
<p>закомментил строчку  <code># sort -u config/include-hosts-{dist,custom}.txt &gt; temp/include-hosts.txt</code></p>
</li>
<li>
<p>добавил строчку <code>cat config/include-hosts-{dist,custom}.txt &gt;&gt; result/hostlist_zones.txt </code></p>
</li>
</ul>
<p>перед <em># Generate a list of IP addresses</em></p></td><td>2024-11-17T10:22:36.715Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>В include-hosts добавлены домены из <a href="https://github.com/dartraiden/no-russia-hosts">списка</a> <a class="mention" href="/u/dartraiden">@dartraiden</a></p></td><td>2025-01-04T08:55:35.536Z</td></tr><tr><td>feel</td><td><p>как сделать единый pac-файл для ютуба и всего остального?<br>
переместил все домены с<br>
exclude-hosts-dist.txt<br>
в<br>
include-hosts-custom.txt</p>
<ul>
<li>добавил <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> в этот же файл.</li>
</ul>
<p>в hostlist_zones.txt все нужные домены появились, но видео не грузится.</p></td><td>2025-03-11T12:09:52.182Z</td></tr><tr><td>CRACKen(panic!("this is a terrible mistake!");)</td><td><p>Может помочь ресурс <a href="https://iplist.opencck.org/">https://iplist.opencck.org/</a> , там можно PAC создать полностью, ну или создать часть с интересующими доменами <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2025-03-11T12:47:10.034Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><aside class="quote no-group" data-username="feel" data-post="30" data-topic="7490">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/958977/48.png" class="avatar"> feel:</div>
<blockquote>
<p>в hostlist_zones.txt все нужные домены появились, но видео не грузится.</p>
</blockquote>
</aside>
<div class="spoiler">
<p><a class="attachment" href="↔️-удалённый-pac-файл-для-локального-proxy-сервера/mMTFszFmYGDbVMm4wmKLtImiCHX.pac">proxy.pac</a> (866,5 КБ)</p>
</div>
<p>С таким файлом так же не работает?</p></td><td>2025-03-12T08:24:29.731Z</td></tr><tr><td>feel</td><td><p>со второй попытки мои манипуляции из exclude-hosts-dist.txt в include-hosts-custom.txt сработали. спасибо)</p></td><td>2025-03-12T11:16:23.536Z</td></tr><tr><td>feel</td><td><p>в связи с чем при включении TEST_WEB_AVAILABILITY=“yes” генерация web-unreachable-exclude-hosts.txt прекращается то на 30%, то на 50% с чем-то процентов? без ошибок, просто идет дальше по скриптам.</p></td><td>2025-03-12T13:02:23.461Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p>Увеличьте timeout для выполнения операции TEST_WEB_AVAILABILITY в файле <a href="https://bitbucket.org/anticensority/antizapret-pac-generator-light/src/master/parse.sh"><em>parse.sh</em></a></p></td><td>2025-03-12T13:24:52.643Z</td></tr><tr><td>feel</td><td><p>кстати не помешает вариант генерации pac файла только по своему списку нужных ресурсов.<br>
зачем эти миллионы доменов каждому.</p></td><td>2025-03-21T07:53:36.741Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p><a href="https://bitbucket.org/anticensority/antizapret-pac-generator-light/">Оригинальный проект</a> <a class="mention" href="/u/valdikss">@ValdikSS</a> открыт всем. Кто хочет изменить под свои нужды что-либо, нет преград.</p></td><td>2025-03-21T09:18:13.952Z</td></tr>
    </table>
      </body>
    </html>