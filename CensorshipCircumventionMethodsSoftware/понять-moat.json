[
    {
        "id": 4988,
        "name": "anonymous11",
        "username": "anonymous11",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/f1d935/{size}.png",
        "created_at": "2022-01-05T12:54:28.449Z",
        "cooked": "<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/wikis/Moat\">\n  <header class=\"source\">\n      <img src=\"понять-moat/fab783b55b2159c74ce12a915ed79067126591d0.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/wikis/Moat\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/cda56ab2883c7e0136bd799a133c849ee1f9f0ca.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"D5D5D5\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/wikis/Moat\" target=\"_blank\" rel=\"noopener nofollow ugc\">Moat · Wiki · The Tor Project / Anti-censorship / BridgeDB · GitLab</a></h3>\n\n  <p>Automated Tor bridge distribution system.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Судя по описанию, у Moat дистрибьютера нет возможности получить адрес клиента, передаваемый CDN. Meek сервер отбросит эти данные.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/meek/-/blob/HEAD/meek-server/meek-server.go\">\n  <header class=\"source\">\n      <img src=\"понять-moat/fab783b55b2159c74ce12a915ed79067126591d0.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/meek/-/blob/HEAD/meek-server/meek-server.go\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"F4C4BB\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/meek/-/blob/HEAD/meek-server/meek-server.go\" target=\"_blank\" rel=\"noopener nofollow ugc\">meek-server/meek-server.go · HEAD · The Tor Project / Anti-censorship /...</a></h3>\n\n  <p>HTTPS transport</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<pre><code class=\"lang-auto\">or, err := pt.DialOr(&amp;ptInfo, getUseraddr(req), ptMethodName)\n</code></pre>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/goptlib/-/blob/HEAD/pt.go\">\n  <header class=\"source\">\n      <img src=\"понять-moat/fab783b55b2159c74ce12a915ed79067126591d0.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/goptlib/-/blob/HEAD/pt.go\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"F4C4BB\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/goptlib/-/blob/HEAD/pt.go\" target=\"_blank\" rel=\"noopener nofollow ugc\">pt.go · HEAD · The Tor Project / Anti-censorship / Pluggable Transports /...</a></h3>\n\n  <p>Go pluggable transports library</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<pre><code class=\"lang-auto\">// Dial info.ExtendedOrAddr if defined, or else info.OrAddr, and return an open\n// *net.TCPConn. If connecting to the extended OR port, extended OR port\n// authentication à la 217-ext-orport-auth.txt is done before returning; an\n// error is returned if authentication fails.\n//\n// The addr and methodName arguments are put in USERADDR and TRANSPORT ExtOrPort\n// commands, respectively. If either is \"\", the corresponding command is not\n// sent.\nfunc DialOr(info *ServerInfo, addr, methodName string) (*net.TCPConn, error) {\n\tif info.ExtendedOrAddr == nil || info.AuthCookiePath == \"\" {\n\t\treturn net.DialTCP(\"tcp\", nil, info.OrAddr)\n\t}\n\n\ts, err := net.DialTCP(\"tcp\", nil, info.ExtendedOrAddr)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\terr = extOrPortSetup(s, 5*time.Second, info, addr, methodName)\n\tif err != nil {\n\t\ts.Close()\n\t\treturn nil, err\n\t}\n\n\treturn s, nil\n}\n</code></pre>\n<p>Для получения адреса нужно настроить TOR_PT_EXTENDED_SERVER_PORT для Meek сервера и уметь в ExtOrPort commands на стороне Moat дистрибьютера.</p>\n<p>Описание не отражает работоспособную конфигурацию? Или для Moat действительно все клиенты неразличимы?</p>\n<p>Что пропущено?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2024-09-16T17:17:44.609Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 25,
        "readers_count": 24,
        "score": 165.0,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous11",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/wikis/Moat",
                "internal": false,
                "reflection": false,
                "title": "Moat · Wiki · The Tor Project / Anti-censorship / BridgeDB · GitLab",
                "clicks": 5
            },
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/goptlib/-/blob/HEAD/pt.go",
                "internal": false,
                "reflection": false,
                "title": "pt.go · HEAD · The Tor Project / Anti-censorship / Pluggable Transports / goptlib · GitLab",
                "clicks": 0
            },
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/meek/-/blob/HEAD/meek-server/meek-server.go",
                "internal": false,
                "reflection": false,
                "title": "meek-server/meek-server.go · HEAD · The Tor Project / Anti-censorship / Pluggable Transports / meek · GitLab",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 741,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/1",
        "can_translate": false
    },
    {
        "id": 4989,
        "name": "",
        "username": "tango",
        "avatar_template": "/letter_avatar_proxy/v4/letter/t/e36b37/{size}.png",
        "created_at": "2022-01-05T15:26:40.613Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"anonymous11\" data-post=\"1\" data-topic=\"1604\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/a/f1d935/48.png\" class=\"avatar\"> anonymous11:</div>\n<blockquote>\n<p>Для получения адреса нужно настроить TOR_PT_EXTENDED_SERVER_PORT для Meek сервера и уметь в ExtOrPort commands на стороне Moat дистрибьютера.</p>\n<p>Описание не отражает работоспособную конфигурацию? Или для Moat действительно все клиенты неразличимы?</p>\n</blockquote>\n</aside>\n<p>That is an astute question. I think the documentation on the Moat wiki page is simply out of date. In fact TOR_PT_EXTENDED_SERVER_PORT is set and there is a special “shim” component that interprets the ExtORPort commands and converts them into an <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For\">X-Forwarded-For</a> header so the web server can know the client’s IP address.</p>\n<p>This is the main development discussion:</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/32276\">\n  <header class=\"source\">\n      <img src=\"понять-moat/5474da433813df16dad68f0b325cf7a875c89fc9.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/32276\" target=\"_blank\" rel=\"noopener\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/cda56ab2883c7e0136bd799a133c849ee1f9f0ca.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"D5D5D5\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/32276\" target=\"_blank\" rel=\"noopener\">Help BridgeDB see client IP addresses of moat requests (#32276) · Issues ·...</a></h3>\n\n  <p>BridgeDB sees the following HTTP headers for incoming moat requests:  Content-Length: ['504']</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>In short, there are two layers of HTTPS in Moat: an outer layer with the CDN (for blocking resistance) and an inner end-to-end layer with the BridgeDB (for confidentiality and integrity, so the CDN cannot tamper with BridgeDB responses). The CDN adds an X-Forwarded-For header (this is a standard feature of CDNs). meek-server receives and decrypts this outer layer, so meek-server knows the client IP address. meek-server dials the ExtORPort of <a href=\"https://gitlab.torproject.org/cohosh/moat-shim\">moat-shim</a> (in the README here you can see TOR_PT_EXTENDED_SERVER_PORT being set) and sends the client IP address as USERADDR. moat-shim decrypts the inner HTTPS layer that has been de-serialized by meek-server, and re-adds the client IP address as an X-Forwarded-For header before forwarding plain HTTP to the BridgeDB Apache.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-05T15:26:40.613Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 20,
        "readers_count": 19,
        "score": 14.0,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/cohosh/moat-shim",
                "internal": false,
                "reflection": false,
                "title": "Cecylia Bocovich / moat-shim · GitLab",
                "clicks": 1
            },
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/32276",
                "internal": false,
                "reflection": false,
                "title": "Help BridgeDB see client IP addresses of moat requests (#32276) · Issues · The Tor Project / Anti-censorship / BridgeDB · GitLab",
                "clicks": 1
            },
            {
                "url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For",
                "internal": false,
                "reflection": false,
                "title": "X-Forwarded-For - HTTP | MDN",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "dnstt developer",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 26,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/2",
        "can_translate": false
    },
    {
        "id": 4990,
        "name": "anonymous11",
        "username": "anonymous11",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/f1d935/{size}.png",
        "created_at": "2022-01-05T16:02:28.439Z",
        "cooked": "<p>Thank you!</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-05T16:02:28.439Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 19,
        "readers_count": 18,
        "score": 8.8,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous11",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "tango",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/t/e36b37/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 741,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/3",
        "can_translate": false
    },
    {
        "id": 4993,
        "name": "anonymous11",
        "username": "anonymous11",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/f1d935/{size}.png",
        "created_at": "2022-01-05T17:28:47.346Z",
        "cooked": "<p>Есть такая точка зрения на сбор адресов бриджей.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/69\">\n  <header class=\"source\">\n      <img src=\"понять-moat/3149f5ffe9b32f25b0ad8ee363f42453eaf66d69.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/69\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/a347dd2052239d924f4accb8d183931ca60ca8ee_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"8E8F8F\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/69\" target=\"_blank\" rel=\"noopener nofollow ugc\">Do we want to take into account the requester IP address? (#69) · Issues ·...</a></h3>\n\n  <p>AFAIK the existing BridgeDB https and moat distributors do take into account the requester IP address, it does have bridgerings for different IP ranges so we only provide...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<blockquote>\n<p>It looks like in the real world this protection hasn’t stopped big attackers from listing all the bridges, and the effort might not be worth it.</p>\n</blockquote>\n<p>Но Moat (в отличии от HTTPS) делает сбор совсем простым. Можно подключаться напрямую к Meek серверу (/meek), Moat дистрибьютеру (/moat) с ложными заголовками Meek-IP (изображая CDN), X-Forwarded-For (изображая moat-shim).</p>\n<p>Возможно ТСПУ действительно big attacker, но что если они просто читеры?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-05T17:28:47.346Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 19,
        "readers_count": 18,
        "score": 73.8,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous11",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/69",
                "internal": false,
                "reflection": false,
                "title": "Do we want to take into account the requester IP address? (#69) · Issues · The Tor Project / Anti-censorship / rdsys · GitLab",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 741,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/4",
        "can_translate": false
    },
    {
        "id": 4998,
        "name": "anonymous12",
        "username": "anonymous12",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/d6d6ee/{size}.png",
        "created_at": "2022-01-06T19:40:21.557Z",
        "cooked": "<p>Небольшой скрипт (Moat клиент) для проверки возможности собрать “китайские” бриджи из москвы.<br>\n<a href=\"https://paste.debian.net/plainh/a8658889\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\">https://paste.debian.net/plainh/a8658889</a><br>\nЭто работает.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-06T19:40:21.557Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 14,
        "readers_count": 13,
        "score": 12.8,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous12",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://paste.debian.net/plainh/a8658889",
                "internal": false,
                "reflection": false,
                "clicks": 4
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "anonymous11",
            "name": "anonymous11",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/f1d935/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 745,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/5",
        "can_translate": false
    },
    {
        "id": 5000,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2022-01-06T19:56:14.192Z",
        "cooked": "<p>Если вы это делаете для использования бриджей по прямому назначению, то гораздо проще, удобней и надёжней использовать обычные relay’и в качестве бриджей. На сегодняшний день более 1400 релеев остаются доступными на провайдерах с ТСПУ, и их либо не так активно блокируют, либо не блокируют вовсе.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/community/support/-/issues/40050#note_2768161\">\n  <header class=\"source\">\n      <img src=\"понять-moat/711665d679ffcd8752b26b8c566e2e7cec2e6c1f.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/community/support/-/issues/40050#note_2768161\" target=\"_blank\" rel=\"noopener\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"F4C4BB\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/community/support/-/issues/40050#note_2768161\" target=\"_blank\" rel=\"noopener\">[Russia] Some ISPs are blocking Tor (#40050) · Issues · The Tor Project /...</a></h3>\n\n  <p>[Anomaly detected in Russia] built-in bridges + dir auths blocked in some ISPs: https://explorer.ooni.org/search?until=2021-12-03&amp;since=2021-11-29&amp;probe_cc=RU&amp;test_name=tor...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Вот вам 10 случайных рабочих relay’ев:</p>\n<pre><code class=\"lang-plaintext\">Bridge 160.119.249.24:443 801EF80845848E685C4534A2408D32D5443187DF\nBridge 139.162.161.211:12355 6ACD584F2FAA75D95ECCF54CA504422BAE78A549\nBridge 43.251.170.52:443 49000EA5D4368F7F3943425F06AE86F3DF2CCF42\nBridge 109.70.100.67:443 A4F0F516C83DE11B290384B9B4A4C928A78ED3A5\nBridge 144.76.108.49:9001 76BAB224055F8532288685BEA93F249FCEF05BF9\nBridge 45.15.16.207:9001 A377E632580AE4A20E447E5DA153AAEC346DA20A\nBridge 70.120.126.172:443 BF3E9B97D3CE4099F73AA4BD70CA14B635FA3CEA\nBridge 91.150.101.29:9001 4BA47DC1C3C1778CC78DDD4E33036DB98CC421E9\nBridge 91.67.169.183:9001 3DD8B251728B1C284DFB0FD169BA07400FFCA0FA\nBridge 218.41.17.40:9001 7173FDE91FFA2415DDD96FDB5C318405B287BB41\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-06T19:58:10.924Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 15,
        "readers_count": 14,
        "score": 13.0,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/community/support/-/issues/40050#note_2768161",
                "internal": false,
                "reflection": false,
                "title": "[Russia] Some ISPs are blocking Tor (#40050) · Issues · The Tor Project / Community / Support · GitLab",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/6",
        "can_translate": false
    },
    {
        "id": 5001,
        "name": "",
        "username": "tango",
        "avatar_template": "/letter_avatar_proxy/v4/letter/t/e36b37/{size}.png",
        "created_at": "2022-01-06T20:00:42.295Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"anonymous11\" data-post=\"4\" data-topic=\"1604\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/a/f1d935/48.png\" class=\"avatar\"> anonymous11:</div>\n<blockquote>\n<p>Но Moat (в отличии от HTTPS) делает сбор совсем простым. Можно подключаться напрямую к Meek серверу (/meek), Moat дистрибьютеру (/moat) с ложными заголовками Meek-IP (изображая CDN), X-Forwarded-For (изображая moat-shim).</p>\n</blockquote>\n</aside>\n<blockquote>\n<p><em>But Moat (as opposed to HTTPS) makes gathering quite simple. You can connect directly to a Meek server (/meek), a Moat distributor (/moat) with false headers Meek-IP (impersonating CDN), X-Forwarded-For (impersonating moat-shim).</em></p>\n</blockquote>\n<p>Hmm, you may be right. If a request reaches the /meek endpoint after being forwarded through /moat, it will have a trustworthy X-Forwarded-For, but not necessarily if a connection arrives directly to the /meek endpoint. I have opened an issue for this.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/80\">\n  <header class=\"source\">\n      <img src=\"понять-moat/c62a1db5f048417a3aec580d5f00199868573d45.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/80\" target=\"_blank\" rel=\"noopener\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/a347dd2052239d924f4accb8d183931ca60ca8ee_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"8E8F8F\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/80\" target=\"_blank\" rel=\"noopener\">Limit access to Moat's /meek endpoint to a trusted CDN (#80) · Issues · The...</a></h3>\n\n  <p>The Moat setup has both a /meek and a /moat endpoint. External requests are supposed to arrive at /meek, which adds an X-Forwarded-For header via</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-06T20:00:42.295Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/rdsys/-/issues/80",
                "internal": false,
                "reflection": false,
                "title": "Do not expose the /meek endpoint externally (#80) · Issues · The Tor Project / Anti-censorship / rdsys · GitLab",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "dnstt developer",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 26,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/7",
        "can_translate": false
    },
    {
        "id": 5002,
        "name": "",
        "username": "tango",
        "avatar_template": "/letter_avatar_proxy/v4/letter/t/e36b37/{size}.png",
        "created_at": "2022-01-06T20:15:46.921Z",
        "cooked": "<blockquote>\n<p><code>-x socks5h://127.0.0.1:9150</code></p>\n</blockquote>\n<p>If the system is working correctly, I think this strategy will get only a subset of available bridges. BridgeDB has different “bridgerings” or “hashrings” of available bridges. All requests that come from a Tor exit or from another known proxy are supposed to be limited to a subset of the available bridges. See for example:</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/blob/4fe1034287a788eeba9e316962d128c55f54581f/bridgedb/distributors/moat/distributor.py#L52-56\">\n  <header class=\"source\">\n      <img src=\"понять-moat/94951d3938ad3b8e35cae6c68d123646f21da2b4.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/blob/4fe1034287a788eeba9e316962d128c55f54581f/bridgedb/distributors/moat/distributor.py#L52-56\" target=\"_blank\" rel=\"noopener\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/cda56ab2883c7e0136bd799a133c849ee1f9f0ca.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"D5D5D5\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/blob/4fe1034287a788eeba9e316962d128c55f54581f/bridgedb/distributors/moat/distributor.py#L52-56\" target=\"_blank\" rel=\"noopener\">bridgedb/distributors/moat/distributor.py ·...</a></h3>\n\n  <p>Automated Tor bridge distribution system.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<pre><code class=\"lang-plaintext\">:param proxies: A :class:`bridgedb.proxy.ProxySet` containing known\n    Tor Exit relays and other known proxies.  These will constitute\n    the extra cluster, and any client requesting bridges from one of\n    these **proxies** will be distributed bridges from a separate\n    subhashring that is specific to Tor/proxy users.\n</code></pre>\n<p>But I don’t know how well this defense really works in practice.</p>\n<p>There was another problem with BridgeDB/Moat, which is that there were only a few (10K) static captchas, and they had not been regenerated in a long time. An adversary may have been simply reusing known answers to solved captchas. The captchas have recently been regenerated and there are more of them now.</p>\n<p><a href=\"https://lists.torproject.org/pipermail/anti-censorship-team/2021-December/000208.html\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://lists.torproject.org/pipermail/anti-censorship-team/2021-December/000208.html</a></p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/40038\">\n  <header class=\"source\">\n      <img src=\"понять-moat/94951d3938ad3b8e35cae6c68d123646f21da2b4.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/40038\" target=\"_blank\" rel=\"noopener\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/cda56ab2883c7e0136bd799a133c849ee1f9f0ca.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"D5D5D5\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/40038\" target=\"_blank\" rel=\"noopener\">regnerate the captchas (#40038) · Issues · The Tor Project / Anti-censorship...</a></h3>\n\n  <p>The existing captchas are over</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-06T20:15:46.921Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 18,
        "readers_count": 17,
        "score": 13.6,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/issues/40038",
                "internal": false,
                "reflection": false,
                "title": "regnerate the captchas (#40038) · Issues · The Tor Project / Anti-censorship / BridgeDB · GitLab",
                "clicks": 0
            },
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/bridgedb/-/blob/4fe1034287a788eeba9e316962d128c55f54581f/bridgedb/distributors/moat/distributor.py#L52-56",
                "internal": false,
                "reflection": false,
                "title": "bridgedb/distributors/moat/distributor.py · 4fe1034287a788eeba9e316962d128c55f54581f · The Tor Project / Anti-censorship / BridgeDB · GitLab",
                "clicks": 0
            },
            {
                "url": "https://lists.torproject.org/pipermail/anti-censorship-team/2021-December/000208.html",
                "internal": false,
                "reflection": false,
                "title": "[anti-censorship-team] Insufficiently many pregenerated BridgeDB captchas?",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "dnstt developer",
        "title_is_group": false,
        "reply_to_user": {
            "username": "anonymous12",
            "name": "anonymous12",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/d6d6ee/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 26,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/8",
        "can_translate": false
    },
    {
        "id": 5003,
        "name": "anonymous12",
        "username": "anonymous12",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/d6d6ee/{size}.png",
        "created_at": "2022-01-06T20:39:48.339Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"tango\" data-post=\"8\" data-topic=\"1604\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/t/e36b37/48.png\" class=\"avatar\"> tango:</div>\n<blockquote>\n<p>All requests that come from a Tor exit or from another known proxy are supposed to be limited to a subset of the available bridges.</p>\n</blockquote>\n</aside>\n<p>Это хорошо и для тестов этого достаточно, поскольку это подмножество тоже делится на подсети.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-06T20:39:48.339Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous12",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 745,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/9",
        "can_translate": false
    },
    {
        "id": 5009,
        "name": "anonymous12",
        "username": "anonymous12",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/d6d6ee/{size}.png",
        "created_at": "2022-01-07T15:53:34.265Z",
        "cooked": "<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://gitlab.torproject.org/tpo/anti-censorship/team/-/issues/47#note_2765643\">\n  <header class=\"source\">\n      <img src=\"понять-moat/0b89e2ab6a20716bc49cd637585b52b88d647409.png\" class=\"site-icon\" data-dominant-color=\"787472\" width=\"32\" height=\"32\">\n\n      <a href=\"https://gitlab.torproject.org/tpo/anti-censorship/team/-/issues/47#note_2765643\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitLab</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <img width=\"64\" height=\"64\" src=\"понять-moat/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg\" class=\"thumbnail onebox-avatar\" data-dominant-color=\"F4C4BB\">\n\n<h3><a href=\"https://gitlab.torproject.org/tpo/anti-censorship/team/-/issues/47#note_2765643\" target=\"_blank\" rel=\"noopener nofollow ugc\">remove old bridges from moat for russia (#47) · Issues · The Tor Project /...</a></h3>\n\n  <p>All old moat bridges in Russia are blocked, but they don't seem to refresh the list so often. We can use bridgedbs COUNTRY_BLOCK_FILE config to provide the...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<blockquote>\n<p>some spikes in Moat</p>\n</blockquote>\n<p>Было бы интересно сравнить эти цифры со статистикой запросов к CDN.</p>\n<blockquote>\n<p>2021-11-16,moat,66900</p>\n</blockquote>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-07T15:58:01.378Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous12",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://gitlab.torproject.org/tpo/anti-censorship/team/-/issues/47#note_2765643",
                "internal": false,
                "reflection": false,
                "title": "remove old bridges from moat for russia (#47) · Issues · The Tor Project / Anti-censorship / Team · GitLab",
                "clicks": 4
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 745,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/10",
        "can_translate": false
    },
    {
        "id": 5102,
        "name": "anonymous14",
        "username": "anonymous14",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/b77776/{size}.png",
        "created_at": "2022-01-13T16:52:09.655Z",
        "cooked": "<blockquote>\n<p>2021-11-15,moat,22870<br>\n2021-11-16,moat,66900</p>\n</blockquote>\n<blockquote>\n<p>2022-01-10,moat,57345<br>\n2022-01-11,moat,98775<br>\n2022-01-12,moat,98235</p>\n</blockquote>\n<p>Рота курсантов работает cо вторника. По ~40К запросов. Стабильность.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2022-01-13T16:52:09.655Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 13,
        "readers_count": 12,
        "score": 7.6,
        "yours": false,
        "topic_id": 1604,
        "topic_slug": "%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat",
        "display_username": "anonymous14",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 762,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D1%8C-moat/1604/11",
        "can_translate": false
    }
]