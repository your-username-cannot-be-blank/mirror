
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>netbsd-в-роли-сервера</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>lylipvtoey</td><td><p>Кому удавалось пропатчить XRay под NetBSD?</p>
<p>Предыстория - я имею доступ к серверу (у мелкого провайдера, что несколько снижает риск попасть под ковровую блокировку), но за это приходится расплачиваться экзотической ОС.<br>
Ни XRay, ни V2Ray бинарников под неё не дают, попытка собрать самому приводит к ругани со стороны go - wireguard-go не заявляет поддержки. При этом в портах она есть, но сдружить системную библиотеку с попытками go самому всё скачать и тут же использовать мне не удалось.<br>
Кто сталкивался с подобной ситуацией? Как извлечь в ней максимум пользы?</p></td><td>2024-12-23T15:58:46.732Z</td></tr><tr><td>0ka(0ka)</td><td><p>Я не вижу никакой пользы, ну только если сервер в обход тспу, в таком случае просто сделай проброс порта. Если хочешь xray то пробуй старые версии (1.6.х), там совместимость со старыми go/oс лучше</p></td><td>2024-12-23T17:14:33.450Z</td></tr><tr><td>bolvan</td><td><p>У BSD есть средства эмуляции linux в ядре.<br>
Во фре надо подгрузить модуль в ядро и сделать linux root.<br>
Судя по гуглу в нетбсд тоже есть компат лееры<br>
Если сделать статический бинарик, то и linux root не нужен или нужен минимальный. /dev /proc /sys /tmp<br>
Но , естественно, нужен рут</p></td><td>2024-12-23T17:27:36.116Z</td></tr><tr><td>allula</td><td><p>Накину эзотерических вариантов, которые я бы попробовал, если этот сервер идёт в обход ТСПУ.</p>
<ol>
<li>Уменьшить раздел, с которого грузится NetBSD, создать второй раздел и установить туда линукс. Чтобы такое провернуть, файловая система должна поддерживать уменьшение размера в онлайне либо должна быть возможность вставить скрипт (в <code>initramfs</code> или какой у них аналог) на этапе загрузки до монтирования раздела. На линуксе такое делается без больших проблем.</li>
<li>Создать петлевое устройство внутри раздела NetBSD, установить туда линукс и настроить загрузку с этого петлевого устройства. Такое проще делать через GRUB, но если есть желание повозиться, то можно вынести <code>/boot</code> на раздел с NetBSD и изменить загрузочные скрипты в <code>initramfs</code>, чтобы корень монтировался из петлевого устройства.</li>
</ol></td><td>2024-12-23T19:27:25.102Z</td></tr><tr><td>lylipvtoey</td><td><p>В обход ТСПУ не идёт - это уже слишком раскатанная губа. Просто не Hetzner/OVH, которые за неаккуратное движение отрубают целиком.<br>
Выгнать NetBSD попробовал первым делом - шиш. Гвоздями прибита. Возможно (не уверен), что это нечто вроде Docker с одним ядром на всех и поддельным /boot.<br>
А вот про проброс порта идея хорошая, так и сделаю, наверное.<br>
Старые версии тоже посмотрю при случае.</p></td><td>2025-01-12T15:44:13.362Z</td></tr><tr><td>rkn-chan</td><td><p>значит таки правда что остается только gentoo если нужна именно большая поддержка старых архетиктур</p></td><td>2025-01-12T15:53:29.752Z</td></tr>
    </table>
      </body>
    </html>