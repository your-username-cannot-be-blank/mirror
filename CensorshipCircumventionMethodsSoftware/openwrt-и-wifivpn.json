[
    {
        "id": 36440,
        "name": "",
        "username": "meow",
        "avatar_template": "/user_avatar/ntc.party/meow/{size}/2721_2.png",
        "created_at": "2024-08-28T15:55:07.137Z",
        "cooked": "<p>В интернете есть куча гайдов по автоматическому(точечному) обходу блокировок, но мне хочется сделать банально и просто: wifi_vpn и wifi_base<br>\nВсе что удалось найти <a href=\"https://youtu.be/JpJTC3kY4Kg?t=2222\" rel=\"noopener nofollow ugc\">https://youtu.be/JpJTC3kY4Kg?t=2222</a><br>\nНо это для openVPN, попытка вручную переделать способ под wireguard/amneziaWG успехом не увенчалась.<br>\nМожет кто поделится полным гайдом для такого, если он есть?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2024-08-28T15:55:07.137Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 247,
        "reads": 55,
        "readers_count": 54,
        "score": 1216.0,
        "yours": false,
        "topic_id": 9853,
        "topic_slug": "openwrt-%D0%B8-wifivpn",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://youtu.be/JpJTC3kY4Kg?t=2222",
                "internal": false,
                "reflection": false,
                "clicks": 24
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 2203,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openwrt-%D0%B8-wifivpn/9853/1",
        "can_translate": false
    },
    {
        "id": 36579,
        "name": "",
        "username": "zzr",
        "avatar_template": "/user_avatar/ntc.party/zzr/{size}/14949_2.png",
        "created_at": "2024-08-29T08:19:05.498Z",
        "cooked": "<p>ответ от нееросети:</p>\n<p>Чтобы настроить две Wi-Fi сети на OpenWrt с разными маршрутами трафика (одна через VPN WireGuard, другая без VPN), выполните следующие шаги:</p>\n<ol>\n<li>\n<p>Настройте WireGuard VPN:</p>\n<ul>\n<li>Установите пакет WireGuard: <code>opkg update &amp;&amp; opkg install wireguard</code></li>\n<li>Настройте WireGuard интерфейс и соединение</li>\n</ul>\n</li>\n<li>\n<p>Создайте две виртуальные беспроводные сети (VAP):</p>\n<ul>\n<li>Войдите в веб-интерфейс LuCI</li>\n<li>Перейдите в Network → Wireless</li>\n<li>Добавьте две новые виртуальные сети: wifi_base и wifi_vpn</li>\n</ul>\n</li>\n<li>\n<p>Настройте сетевые интерфейсы:</p>\n<ul>\n<li>Создайте новый интерфейс для VPN-сети: Network → Interfaces → Add new interface</li>\n<li>Назовите его, например, “vpn_network”</li>\n<li>Присвойте ему отдельную подсеть, например 192.168.2.0/24</li>\n</ul>\n</li>\n<li>\n<p>Настройте DHCP и DNS:</p>\n<ul>\n<li>Network → DHCP and DNS</li>\n<li>Добавьте новый DHCP-сервер для VPN-сети</li>\n</ul>\n</li>\n<li>\n<p>Настройте правила маршрутизации:</p>\n<ul>\n<li>Перейдите в Network → Firewall</li>\n<li>Создайте новую зону для VPN-трафика</li>\n<li>Настройте правила для перенаправления трафика из VPN-зоны через WireGuard</li>\n</ul>\n</li>\n<li>\n<p>Настройте политику маршрутизации:</p>\n<ul>\n<li>Установите пакет ip-full: <code>opkg install ip-full</code></li>\n<li>Создайте новую таблицу маршрутизации для VPN-трафика</li>\n<li>Добавьте правило для маркировки пакетов из VPN-сети</li>\n<li>Добавьте маршрут по умолчанию через WireGuard для помеченных пакетов</li>\n</ul>\n</li>\n<li>\n<p>Примените изменения и перезагрузите маршрутизатор</p>\n</li>\n</ol>\n<p>Пример настройки через командную строку:</p>\n<pre><code class=\"lang-auto\"># Создание таблицы маршрутизации\nip route add table 200 default dev wg0\n\n# Добавление правила маркировки пакетов\nip rule add from 192.168.2.0/24 table 200\n\n# Добавление маршрута по умолчанию через WireGuard\nip route add default dev wg0 table 200\n</code></pre>\n<p>Эти шаги создадут две Wi-Fi сети: wifi_base будет использовать обычное интернет-соединение, а wifi_vpn будет направлять весь трафик через WireGuard VPN.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2024-08-29T08:19:05.498Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 43,
        "readers_count": 42,
        "score": 53.6,
        "yours": false,
        "topic_id": 9853,
        "topic_slug": "openwrt-%D0%B8-wifivpn",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1118,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openwrt-%D0%B8-wifivpn/9853/2",
        "can_translate": false
    },
    {
        "id": 36619,
        "name": "",
        "username": "meow",
        "avatar_template": "/user_avatar/ntc.party/meow/{size}/2721_2.png",
        "created_at": "2024-08-29T11:41:52.243Z",
        "cooked": "<p>Да нейросеть за 3 попытки выдало 3 разных способа и никакой не работает. То траффик идет в обход vpn, то вообще не работает подключение.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2024-08-29T11:41:52.243Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 31,
        "readers_count": 30,
        "score": 16.2,
        "yours": false,
        "topic_id": 9853,
        "topic_slug": "openwrt-%D0%B8-wifivpn",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "zzr",
            "name": "",
            "avatar_template": "/user_avatar/ntc.party/zzr/{size}/14949_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 2203,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openwrt-%D0%B8-wifivpn/9853/3",
        "can_translate": false
    },
    {
        "id": 51607,
        "name": "",
        "username": "meow2",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/a587f6/{size}.png",
        "created_at": "2024-10-10T08:41:04.095Z",
        "cooked": "<p>Пропали ответы где было решение.</p><aside class=\"onebox discoursetopic\" data-onebox-src=\"https://forum.openwrt.org/t/use-wireguard-only-with-wlan/193761/8\">\n  <header class=\"source\">\n      <img src=\"openwrt-и-wifivpn/b0013e6ecf94f4275c738c06725e21e83467f5d6.png\" class=\"site-icon\" data-dominant-color=\"C5D8E4\" width=\"32\" height=\"32\">\n\n      <a href=\"https://forum.openwrt.org/t/use-wireguard-only-with-wlan/193761/8\" target=\"_blank\" rel=\"noopener nofollow ugc\" title=\"07:35AM - 05 April 2024\">OpenWrt Forum – 5 Apr 24</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:628/500;\"><img src=\"openwrt-и-wifivpn/88851b33609d10f02578512d7eae210fb7a6002c_2_628x500.png\" class=\"thumbnail\" data-dominant-color=\"2D7DAC\" width=\"628\" height=\"500\"></div>\n\n<div class=\"title-wrapper\">\n  <h3><a href=\"https://forum.openwrt.org/t/use-wireguard-only-with-wlan/193761/8\" target=\"_blank\" rel=\"noopener nofollow ugc\">Use Wireguard only with WLAN</a></h3>\n  <div class=\"topic-category\">\n      <span class=\"badge-wrapper bullet\">\n        <span class=\"badge-category-bg\" style=\"background-color: #c0f0c0;\"></span>\n        <span class=\"badge-category clear-badge\">\n          <span class=\"category-name\">Installing and Using OpenWrt</span>\n        </span>\n      </span>\n      <span class=\"badge-wrapper bullet\">\n        <span class=\"badge-category-bg\" style=\"background-color: #AB9364;\"></span>\n        <span class=\"badge-category clear-badge\">\n          <span class=\"category-name\">Network and Wireless Configuration</span>\n        </span>\n      </span>\n  </div>\n</div>\n\n  <p>In wg0 interface, set Advanced Settings → Override IPv4 routing table and Override IPv6 routing table to 1000 In wlan interface, also set these to 1000 In Routing → IPv4 Rules add new rule  Incoming interface: wlan Table 1000   Repeat the same for...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Но решение частично</p>\n<ol>\n<li>Нет killswitch, при каждом сбое траффик идет напрямую</li>\n<li>Не работает без “ip route add table 1000 default dev wg0”, а так же слетает при каждом сбое сети/перезагрузке роутера</li>\n</ol>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2024-10-10T08:41:04.095Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 27,
        "readers_count": 26,
        "score": 15.4,
        "yours": false,
        "topic_id": 9853,
        "topic_slug": "openwrt-%D0%B8-wifivpn",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://forum.openwrt.org/t/use-wireguard-only-with-wlan/193761/8",
                "internal": false,
                "reflection": false,
                "title": "Use Wireguard only with WLAN - #8 by ValdikSS - Network and Wireless Configuration - OpenWrt Forum",
                "clicks": 15
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5233,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openwrt-%D0%B8-wifivpn/9853/4",
        "can_translate": false
    },
    {
        "id": 57956,
        "name": "",
        "username": "meow2",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/a587f6/{size}.png",
        "created_at": "2024-10-21T20:46:51.898Z",
        "cooked": "<p>второе было решено через<br>\n/etc/hotplug.d/iface/30-vpnroute</p>\n<p>#!/bin/sh</p>\n<p>sleep 5<br>\nip route add default dev awg table 999</p>\n<p>killswitch еще думаю как реализовать.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2024-10-21T20:47:13.625Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 9853,
        "topic_slug": "openwrt-%D0%B8-wifivpn",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "meow2",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/m/a587f6/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5233,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openwrt-%D0%B8-wifivpn/9853/5",
        "can_translate": false
    }
]