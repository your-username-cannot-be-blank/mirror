[
    {
        "id": 82990,
        "name": "",
        "username": "Rodcrit",
        "avatar_template": "/letter_avatar_proxy/v4/letter/r/ac8455/{size}.png",
        "created_at": "2025-03-21T23:51:47.860Z",
        "cooked": "<p>После обновления до 24H2 на основной машине и переустановки системы на рабочем ноутбуке обнаружилась неприятная особенность, что программы для обхода замедления общеизвестного списка ресурсов, в которых используется режим системного прокси, отказываются работать. В логах по нулям (буквально). Гуглить проблему сложно, поэтому решил написать дополнительный пост здесь.</p>\n<p>Симптомы:</p>\n<ul>\n<li><strong>NekoRay/NekoBox</strong> — нет подключения, почти сразу появляется всплывающее окно в духе «This action is taking a long time, try reconnecting», соединение не устанавливается</li>\n<li><strong>v2RayN</strong> — подключение якобы устанавливается, соединение не работает. В статус-баре снизу «The delay: -1 ms, none», трафик не гоняется</li>\n<li><strong>Hiddify</strong> — подключение якобы работает (статус «Connected»), фактически соединение не установлено, трафик никуда не идёт.</li>\n</ul>\n<p>TUN во всех случаях продолжает работать, условные WARP или Amnezia WG функционируют. На <a href=\"https://www.reddit.com/r/Windows11/comments/1h07kj5/windows_11_24h2_and_bbr2/\" rel=\"noopener nofollow ugc\">Reddit</a> пишут, что этим, в числе прочего, могут быть обусловлены рандомные ошибки <code>NS_BINDING_ABORTED</code> в Firefox, которым так и не нашли объяснения в соседних темах на форуме.</p>\n<p>В процессе диагностики перепробовал буквально всё — сброс сетевых настроек (тут я был близко), манипуляции с DNS, отключение Zapret, изменение настроек внутри самих программ и много чего ещё. Ничего из вышеперечисленного не дало результата, так как виноватым, внезапно, оказался <strong>алгоритм контроля перегрузки TCP (TCP Congestion Control Provider)</strong>. <a href=\"https://github.com/2dust/v2rayN/discussions/5795\" rel=\"noopener nofollow ugc\">Issue на Гитхабе v2RayN</a>.</p>\n<p>При каждой переустановке системы я всегда менял его на <strong>BBR2</strong>, так как он объективно лучше стандартного CUBIC в условиях высокой нагруженности сети. На 24H2 его сделали стандартным, но при этом как-то умудрились сломать в процессе. На 23H2 использование BBR никаких проблем не вызывало, любые прокси работали идеально.</p>\n<p>Поменять алгоритм можно так:</p>\n<ol>\n<li>Открываем PowerShell от админа.</li>\n<li>Вводим:</li>\n</ol>\n<pre><code class=\"lang-auto\">netsh int tcp set supplemental template=internet congestionprovider=CUBIC\nnetsh int tcp set supplemental template=internetcustom congestionprovider=CUBIC\nnetsh int tcp set supplemental template=Compat congestionprovider=NewReno\nnetsh int tcp set supplemental template=Datacenter congestionprovider=CUBIC\nnetsh int tcp set supplemental template=Datacentercustom congestionprovider=CUBIC\n</code></pre>\n<ol start=\"3\">\n<li>Проверяем настройки: <code>Get-NetTCPSetting | Select SettingName, CongestionProvider</code></li>\n</ol>\n<details>\n<summary>\nБыло</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"windows-11-24h2-bbr2-—-проблемы-с-работой-программ-в-режиме-системного-прокси-решение/0b180dec6edbe0ece41e4150f45221fa1f821dbe.png\" data-download-href=\"https://ntc.party/uploads/default/0b180dec6edbe0ece41e4150f45221fa1f821dbe\" title=\"BBR2\"><img src=\"windows-11-24h2-bbr2-—-проблемы-с-работой-программ-в-режиме-системного-прокси-решение/0b180dec6edbe0ece41e4150f45221fa1f821dbe.png\" alt=\"BBR2\" data-base62-sha1=\"1A8MSRpNdpqj4msOlDA3eTizHVs\" width=\"690\" height=\"197\" data-dominant-color=\"151515\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">BBR2</span><span class=\"informations\">697×200 3.68 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<details>\n<summary>\nСтало</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"windows-11-24h2-bbr2-—-проблемы-с-работой-программ-в-режиме-системного-прокси-решение/fc13723f491966f12ccbad7381cf563342ef8a2d.png\" data-download-href=\"https://ntc.party/uploads/default/fc13723f491966f12ccbad7381cf563342ef8a2d\" title=\"CUBIC &amp; NewReno\"><img src=\"windows-11-24h2-bbr2-—-проблемы-с-работой-программ-в-режиме-системного-прокси-решение/fc13723f491966f12ccbad7381cf563342ef8a2d.png\" alt=\"CUBIC &amp; NewReno\" data-base62-sha1=\"zXXZ8egbkwjc9MQXKNS5qaWCr6t\" width=\"690\" height=\"197\" data-dominant-color=\"151515\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">CUBIC &amp; NewReno</span><span class=\"informations\">693×198 3.85 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>При желании CUBIC можно заменить на CTCP. Он, <a href=\"https://www.speedguide.net/articles/tcp-congestion-control-algorithms-comparison-7423\" rel=\"noopener nofollow ugc\">насколько известно</a>, чуть лучше показывает себя в процессах, чувствительных к задержкам.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2025-03-21T23:51:47.860Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 24,
        "reads": 73,
        "readers_count": 72,
        "score": 134.6,
        "yours": false,
        "topic_id": 15303,
        "topic_slug": "windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/2dust/v2rayN/discussions/5795",
                "internal": false,
                "reflection": false,
                "title": "关于更新WIN11 24H2后代理失效的问题解决 · 2dust/v2rayN · Discussion #5795 · GitHub",
                "clicks": 4
            },
            {
                "url": "https://www.speedguide.net/articles/tcp-congestion-control-algorithms-comparison-7423",
                "internal": false,
                "reflection": false,
                "title": "SG :: TCP Congestion Control Algorithms Comparison",
                "clicks": 3
            },
            {
                "url": "https://www.reddit.com/r/Windows11/comments/1h07kj5/windows_11_24h2_and_bbr2/",
                "internal": false,
                "reflection": false,
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5876,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5/15303/1",
        "can_translate": false
    },
    {
        "id": 82998,
        "name": "Alexander Gavrilov",
        "username": "dartraiden",
        "avatar_template": "/user_avatar/ntc.party/dartraiden/{size}/15299_2.png",
        "created_at": "2025-03-22T06:03:36.677Z",
        "cooked": "<p>FYI, для установки настройки существует командлет <code>Set-NetTCPSetting</code>. Просто получается неаккуратненько: устанавливаете с помощью <code>netsh</code>, а проверяете с помощью пошика.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2025-03-22T06:04:07.909Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 51,
        "readers_count": 50,
        "score": 10.2,
        "yours": false,
        "topic_id": 15303,
        "topic_slug": "windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5",
        "display_username": "Alexander Gavrilov",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "user_id": 1450,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5/15303/2",
        "can_translate": false
    },
    {
        "id": 83000,
        "name": "Alk2ntc",
        "username": "alk2ntc",
        "avatar_template": "/user_avatar/ntc.party/alk2ntc/{size}/10805_2.png",
        "created_at": "2025-03-22T06:27:36.736Z",
        "cooked": "<p>Прочел статью и ввел на Win11 24H2 команду для проверки. Получил без каких-либо преобразований результат с четырьмя кубиками и одним NewReno. То есть у меня при переходе на 24H2 ничего не поменялось. Может ли это быть связанным с тем, что алгоритмы Windows меняют что-то в условиях медленной или перегруженной сети? Потому что у меня не медленная и не перегруженная, и всё как работало, так и работает.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2025-03-22T06:27:36.736Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 46,
        "readers_count": 45,
        "score": 9.2,
        "yours": false,
        "topic_id": 15303,
        "topic_slug": "windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5",
        "display_username": "Alk2ntc",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7067,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5/15303/3",
        "can_translate": false
    },
    {
        "id": 83001,
        "name": "Alexander Gavrilov",
        "username": "dartraiden",
        "avatar_template": "/user_avatar/ntc.party/dartraiden/{size}/15299_2.png",
        "created_at": "2025-03-22T06:51:30.105Z",
        "cooked": "<p>В свежеустановленной системе по умолчанию тоже CUBIC, поэтому есть мнение, что это автор напутал и BBR у него перенёсся со старой системе.</p>\n<p>То, что BBR сломали, это, конечно, печально, но иллюстрирует то, почему твикать всё, что твикается - чревато и менять дефолты без веской причины не стоит (возможно, на диагностику было затрачено больше ресурсов, чем получено профита от смены алгоритма)</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2025-03-22T06:54:39.749Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 39,
        "readers_count": 38,
        "score": 7.8,
        "yours": false,
        "topic_id": 15303,
        "topic_slug": "windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5",
        "display_username": "Alexander Gavrilov",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "user_id": 1450,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/windows-11-24h2-bbr2-%E2%80%94-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D1%81-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5/15303/4",
        "can_translate": false
    }
]