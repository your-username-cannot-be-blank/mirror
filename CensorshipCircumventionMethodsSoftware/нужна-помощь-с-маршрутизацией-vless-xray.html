
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>нужна-помощь-с-маршрутизацией-vless-xray</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>razz</td><td><p>Всем привет, есть такая схема:</p>
<ul>
<li><em>Зарубежный VPS с vless (xray)</em></li>
<li><em>3 квартиры, в каждой по по роутеру (кинетику)</em></li>
<li><em>Устройства вне этих 3 сетей</em></li>
</ul>
<p>Есть задача объединить все сети и отдельные устройства в одну сеть для выхода через зарубежный VPS (по geoip) и их связи между собой. Соответственно какие вижу варианты:</p>
<ul>
<li><em>Собрать всех на VPS в РФ и с него выходить на зарубежный</em></li>
<li><em>Собрать всех на VPN сервере поднятом на одном из роутеров и с него выходить на зарубежный</em></li>
</ul>
<p>Смотрел подобные темы, но так и не смог определить для себя какое то решение, в голове вообще каша. Собственно вопрос в том, какую схему лучше использовать? Какой протокол внутри РФ подойдет для таких целей? Если кто то делал подобную связку, есть что почитать/посмотреть может по этой теме? Спасибо.</p></td><td>2024-10-19T19:27:25.880Z</td></tr><tr><td>idev</td><td><p>Я связал через московский vps через обычный OpenVPN, работает без сбоев уже много лет (как-то полгода назад были обрывы, но там весь день массово все впн’ы блочили). На мобильных операторах может ограничиваться скорость (на мегафоне до 5 Мбит/с).</p>
<p>Вариант без vps потребует приобретения белого ip у провайдера на одном из роутеров, где будет vpn-сервер.</p>
<p>В целом, сейчас внутри страны практически любые протоколы работают без ограничений (может есть исключения на конкретных направлениях/провайдерах). Вайргуард например работает быстро даже на моем мегафоне и не ограничивается по скорости, в отличие от опенвпн.</p></td><td>2024-10-20T02:08:28.341Z</td></tr><tr><td>h7n14(H7n14je)</td><td><p>Если на один из трех роутеров провайдер отдает “серый” IP то можно какие-нить dyndns(у меня в регионе провайдеры уже пару лет как перестали давать, так что сижу за провайдерским натом) и связать их через него.</p></td><td>2024-10-20T04:55:45.141Z</td></tr><tr><td>xofamim548</td><td><aside class="quote no-group" data-username="razz" data-post="1" data-topic="12073">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/f4b2a3/48.png" class="avatar"> razz:</div>
<blockquote>
<p>Собрать всех на VPN сервере поднятом на одном из роутеров и с него выходить на зарубежный</p>
</blockquote>
</aside>
<p>У этого решения есть как минимум три (или четыре) недостатка:</p>
<ol>
<li>На главном роутере нужен либо постоянный IP от провайдера, либо, как уже написали выше, использовать какой-нибудь dyndns.</li>
<li>Если роутер недостаточно мощный, все это великолепие не будет выдавать нормальную скорость при одновременном подключении с нескольких устройств. Может и с одного не будет. Более того, если оно вдруг даст какой-то сбой, зависнет, забьет память, etc - у вас будут связаны руки без прямого доступа к устройству.</li>
<li>Домашний интернет и электросеть в целом обычно менее надежны, чем каналы в датацентре.</li>
<li>(Субъективно.) Привязываться к мощной и дорогой железке на не-x86 архитектуре и на всяких прошивках типа openwrt я бы в таких вопросах не стал.</li>
</ol>
<p>Лично я связывал бы через VPS в РФ по wireguard, по крайней мере для начала попробовал бы так.</p></td><td>2024-10-20T06:42:54.043Z</td></tr>
    </table>
      </body>
    </html>