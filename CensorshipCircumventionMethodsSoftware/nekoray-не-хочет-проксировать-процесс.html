
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>nekoray-не-хочет-проксировать-процесс</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>uwkee(Hector)</td><td><p>Привет. Настроен Nekoray (Nekobox) на винде 10, ядро sing-box, профиль VLESS+Reality, два ПК, на одном всё отлично работает, на втором ни в какую не хочет проксировать конкретно Discord.exe и вообще любой другой процесс. <a href="https://imgur.com/a/Rwm44qE" rel="noopener nofollow ugc">Скриншоты настроек</a>. На обоих ПК настройки аналогичные.</p>
<p>Брандмауэр выключен, антивирус выключен, в ОС выключено вообще всё, что теоретически может мешать, из сетевых интерфейсов в винде только собсно Wi-Fi и nekoray-tun. Пробовал все возможные варианты, убирать и ставить режим белого списка, внутренний TUN, пробовал 3.26 и 4.0 beta4, без разницы, не работает хоть убей, ощущение что он тупо игнорирует настройки проксирования процессов. При этом если ставлю default outbound: proxy и проксирую всё подряд, то всё работает. При default outbound: bypass и настроенных маршрутах тоже проксирует, т.е. сам туннель работает нормально. И даже если добавить раздел process_name в кастомные маршруты, он всё равно его игнорирует. Пробовал проксить процессы дискорда и разных браузеров, не работает. В чем может быть дело?</p></td><td>2024-10-17T18:12:56.417Z</td></tr><tr><td>0ka(0ka)</td><td><p>спрашиваешь про роутинг процессов и при этом на скрине нет правил с процессами…</p></td><td>2024-10-17T19:18:48.862Z</td></tr><tr><td>uwkee(Hector)</td><td><p>Ну, я пробовал ставить маршрутизацию process_name, не работает. Скрины я делал после очередной неудачной попытки настроить через параметры TUN. Вот так это выглядело в последний раз, правда это с рабочего компа скрин, но на втором всё то же самое.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="nekoray-не-хочет-проксировать-процесс/526ea44b08fcf0b2672dc32179915d4df6e3ed16.png" data-download-href="https://ntc.party/uploads/default/526ea44b08fcf0b2672dc32179915d4df6e3ed16" title="nekoray_wMNqv4jkRy"><img src="nekoray-не-хочет-проксировать-процесс/526ea44b08fcf0b2672dc32179915d4df6e3ed16.png" alt="nekoray_wMNqv4jkRy" data-base62-sha1="bLecutidwoVjrQWwzvpseQAVZvE" width="478" height="500" data-dominant-color="F6F6F6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">nekoray_wMNqv4jkRy</span><span class="informations">605×632 9.88 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-17T19:25:39.192Z</td></tr><tr><td>0ka(0ka)</td><td><p>как минимум нужен лог и описание поведения программ, “не работает” абсолютно бесполезно и не говорит ни о чем</p></td><td>2024-10-17T19:32:30.346Z</td></tr><tr><td>uwkee(Hector)</td><td><p>Извиняюсь, но я не понимаю, какое описание поведения программы нужно, помимо очевидного - Discord не работает, ведет себя так, как будто VPN нет вовсе. Не запускается, update failed. В логах 0 строчек со словом failed, кастомные маршруты работают нормально (прописан ютуб, чатгпт и speedtest, открываются без проблем, speedtest показывает IP-адрес VPSки), не работает только проксирование процессов. Лог выглядит примерно так:</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://pastebin.com/XVhL9jGC">
  <header class="source">
      <img src="nekoray-не-хочет-проксировать-процесс/a1db86cbe55a231adc5f7553ca766011becd8ba4.png" class="site-icon" data-dominant-color="B4B6B9" width="16" height="16">

      <a href="https://pastebin.com/XVhL9jGC" target="_blank" rel="noopener nofollow ugc">Pastebin</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://pastebin.com/XVhL9jGC" target="_blank" rel="noopener nofollow ugc">INFO[0012] dns: exchanged updates.discord.com A updates.discord.com. 300 IN A...</a></h3>

  <p>Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
DNS менять пробовал, флушить тоже.</p></td><td>2024-10-17T19:41:16.933Z</td></tr><tr><td>juan_wang69(Juan Wang)</td><td><p>Тупой вопрос конечно, но у тебя галочка System Proxy включена? Вроде по логам видно что запросы на дискорд нормально проходят</p>
<p>Кстати если ты собираешься проксировать дискорд, к сожалению там не будет работать войс чат, почему-то дискорд не умеет проксировать UDP, придется nekoray запустить в TUN-режиме</p></td><td>2024-10-17T19:44:26.091Z</td></tr><tr><td>uwkee(Hector)</td><td><p>System Proxy выключен, их насколько я понимаю незачем вместе с режимом TUN включать одновременно. Так собсно это не режим системного прокси, оно просто в Nekoray так называется, “проксирование процессов”. По факту на обоих ПК включен только режим TUN.</p></td><td>2024-10-17T19:48:06.706Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="juan_wang69" data-post="6" data-topic="11976">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/juan_wang69/48/11216_2.png" class="avatar"> juan_wang69:</div>
<blockquote>
<p>Вроде по логам видно что запросы на дискорд нормально проходят</p>
</blockquote>
</aside>
<p>в логе никаких запросов к серверам дискорда не видно, только днс</p></td><td>2024-10-17T19:56:40.712Z</td></tr><tr><td>0ka(0ka)</td><td><p>в логе не вижу discord/update.exe, пробуй на браузере, а то опять непонятно ничего</p></td><td>2024-10-17T19:59:37.459Z</td></tr><tr><td>boltor</td><td><p>Попробуйте 4.0 beta3, с ним у меня точно работало. Может быть в очередной бета версии сломали что-то.</p></td><td>2024-10-17T20:13:46.736Z</td></tr><tr><td>sunlighthell(The Ministry of Love)</td><td><p>В кастомных настройках (двойной клик по профилю влесс&gt;кастомные настройки) что-то прописывали?</p></td><td>2024-10-17T20:52:57.395Z</td></tr><tr><td>uwkee(Hector)</td><td><p>Нет, не менял. На двух ПК всё аналогично, VPN-сервер один.</p></td><td>2024-10-17T23:03:44.169Z</td></tr><tr><td>uwkee(Hector)</td><td><p>Попробую конечно, но в 3.26 клиенте поведение аналогичное, так что хз.</p></td><td>2024-10-17T23:04:23.962Z</td></tr><tr><td>uwkee(Hector)</td><td><p>На браузерах я пробовал, опера и эдж, тоже не хотят впниться. Я смотрел логи, ошибок в упор не наблюдал. Именно что он и не делает никаких запросов к серверам дискорда, как будто игнорирует вообще настройки проксирования процессов.</p></td><td>2024-10-17T23:06:03.391Z</td></tr><tr><td>kencarson</td><td><aside class="quote quote-modified" data-post="24" data-topic="10832">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/cc9497/48.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%B8%D1%82%D0%B5-%D1%81%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-nekoray-%D0%BF%D0%BE%D0%B4-youtube/10832/24">Помогите сделать настройки Nekoray под YouTube</a> <a class="badge-category__wrapper " href="/c/censorship-circumvention-software/tunneling-software/24"><span data-category-id="24" style="--category-badge-color: #652D90; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #92278F;" data-parent-category-id="11" data-drop-close="true" class="badge-category --has-parent" title="Everything that encapsulates data and transmits it to middlebox server: VPN, proxy, cloaking software"><span class="badge-category__name">Tunneling software</span></span></a>
  </div>
  <blockquote>
    У меня работает localhost, сайты напрямую резолвит через системный ДНС. 
Вы запускаете программу с правами админа? Ставите галочку “Режим TUN”? Правильно пишете название процесса в настройках TUN-режима? 
Я для примера возьму настройку, чтобы всё шло напрямую, кроме Дискорда и браузера для запрещёнки. 
<details><summary>У меня настройки выглядят вот так:</summary>&lt;a class="lightbox" href="nekoray-не-хочет-проксировать-процесс/e0c065f818d320e39c0ad902318e5f3a6f21fb37.png" data-download-href=…</details>
  </blockquote>
</aside>
<p>
попробуй сделать как у него все настройки слово в слово, без вольностей</p></td><td>2024-10-19T13:45:03.161Z</td></tr>
    </table>
      </body>
    </html>