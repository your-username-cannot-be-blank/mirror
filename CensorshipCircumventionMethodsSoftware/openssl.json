[
    {
        "id": 29886,
        "name": "",
        "username": "artenox",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/a8b319/{size}.png",
        "created_at": "2024-08-04T17:32:52.964Z",
        "cooked": "<p>Привет, <a class=\"mention\" href=\"/u/valdikss\">@ValdikSS</a><br>\nПосоветуй как собрать openssl с маленьким padding. Чтобы tls пакеты не рубились, когда ходят внутри shadowsocks. Слышал, что по размеру секут.<br>\nЯ пробовал mbedtls, nss, libressl - не помогает.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-04T17:32:52.964Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 76,
        "readers_count": 75,
        "score": 35.2,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3546,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "user_suspended": true,
        "post_url": "/t/openssl/8714/1",
        "can_translate": false
    },
    {
        "id": 30359,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2024-08-05T20:02:49.024Z",
        "cooked": "<p>В OpenSSL нужно отключить баги (bugs) в программе, которая его использует. Padding добавляется для исправления проблемы в древнегреческих версиях терминатора SSL от компании F5.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-05T20:02:49.024Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 62,
        "readers_count": 61,
        "score": 17.4,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openssl/8714/2",
        "can_translate": false
    },
    {
        "id": 30368,
        "name": "",
        "username": "artenox",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/a8b319/{size}.png",
        "created_at": "2024-08-05T20:19:57.222Z",
        "cooked": "<p>А как? Не нашёл упоминания bugs в Configure OpenSSL.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-05T20:19:57.222Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 61,
        "readers_count": 60,
        "score": 17.2,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "ValdikSS",
            "name": null,
            "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3546,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "user_suspended": true,
        "post_url": "/t/openssl/8714/3",
        "can_translate": false
    },
    {
        "id": 30431,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2024-08-06T06:08:31.605Z",
        "cooked": "<p>Это не опция сборки, это опция при создании OpenSSL-контекста.<br>\n<a href=\"https://docs.openssl.org/3.1/man3/SSL_CTX_set_options/#description\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://docs.openssl.org/3.1/man3/SSL_CTX_set_options/#description</a></p>\n<blockquote>\n<p>SSL_OP_TLSEXT_PADDING</p>\n<p>Adds a padding extension to ensure the ClientHello size is never between 256 and 511 bytes in length. This is needed as a workaround for some implementations.</p>\n</blockquote>\n<p>Можно пропатчить, чтобы он никогда не добавлялся, см. <code>ssl/statem/extensions_clnt.c</code></p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/openssl/openssl/blob/20bf3fe236d36734a17a08252ed19c9e1bc161cd/ssl/statem/extensions_clnt.c#L946-L954\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/openssl/openssl/blob/20bf3fe236d36734a17a08252ed19c9e1bc161cd/ssl/statem/extensions_clnt.c#L946-L954\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/openssl/openssl/blob/20bf3fe236d36734a17a08252ed19c9e1bc161cd/ssl/statem/extensions_clnt.c#L946-L954\" target=\"_blank\" rel=\"noopener\">openssl/openssl/blob/20bf3fe236d36734a17a08252ed19c9e1bc161cd/ssl/statem/extensions_clnt.c#L946-L954</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-c\">\n      <ol class=\"start lines\" start=\"946\" style=\"counter-reset: li-counter 945 ;\">\n          <li>EXT_RETURN tls_construct_ctos_padding(SSL_CONNECTION *s, WPACKET *pkt,</li>\n          <li>                                      unsigned int context, X509 *x,</li>\n          <li>                                      size_t chainidx)</li>\n          <li>{</li>\n          <li>    unsigned char *padbytes;</li>\n          <li>    size_t hlen;</li>\n          <li></li>\n          <li>    if ((s-&gt;options &amp; SSL_OP_TLSEXT_PADDING) == 0)</li>\n          <li>        return EXT_RETURN_NOT_SENT;</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-06T06:08:31.605Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 51,
        "readers_count": 50,
        "score": 20.2,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/openssl/openssl/blob/20bf3fe236d36734a17a08252ed19c9e1bc161cd/ssl/statem/extensions_clnt.c#L946-L954",
                "internal": false,
                "reflection": false,
                "title": "openssl/ssl/statem/extensions_clnt.c at 20bf3fe236d36734a17a08252ed19c9e1bc161cd · openssl/openssl · GitHub",
                "clicks": 2
            },
            {
                "url": "https://docs.openssl.org/3.1/man3/SSL_CTX_set_options/#description",
                "internal": false,
                "reflection": false,
                "title": "SSL_CTX_set_options - OpenSSL Documentation",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "artenox",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/a8b319/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openssl/8714/4",
        "can_translate": false
    },
    {
        "id": 30610,
        "name": "",
        "username": "artenox",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/a8b319/{size}.png",
        "created_at": "2024-08-06T17:19:56.515Z",
        "cooked": "<p>Прости мне мою тупость. Я спросил у ChatGPT как изменить этот код, чтобы паддинг не добавлялся. Он мне сказал, надо удалить строчку<br>\n<code>if ((s-&gt;options &amp; SSL_OP_TLSEXT_PADDING) == 0)</code><br>\nчтобы осталось<br>\n<code>return EXT_RETURN_NOT_SENT;</code><br>\nЯ собрал фиксенный openssl, собрал tor  с ним. Но не вижу различий между обычным тором и фиксенным тором. И в первом и во втором случае в начале размер пакетов 1280, потом падает до 588. Через shadowsocks пролезает с трудом.<br>\nПохоже паддинг добавляется или tor использует такие большие tls пакеты сам по себе?<br>\nЯ пока проверяю на торе.<br>\nНо ведь если в торе с нефиксенным openssl встречался размер 588, то значит паддинг и не использовался. И значит 1280 это не паддинг, а полезные данные.<br>\n<strong>Может как-то можно ограничить максимальный размер tls пакетов в openssl?</strong></p>\n<p>P.S. Я умею компилировать, но не программировать.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-06T17:26:26.582Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 43,
        "readers_count": 42,
        "score": 18.6,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "ValdikSS",
            "name": null,
            "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3546,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "user_suspended": true,
        "post_url": "/t/openssl/8714/5",
        "can_translate": false
    },
    {
        "id": 31443,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2024-08-09T08:58:59.086Z",
        "cooked": "<p>Так, вероятно, дело не в Padding. Посмотрите в WireShark содержимое ClientHello, поймёте, почему он большой.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-08-09T08:58:59.086Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 36,
        "readers_count": 35,
        "score": 7.2,
        "yours": false,
        "topic_id": 8714,
        "topic_slug": "openssl",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "artenox",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/a8b319/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/openssl/8714/6",
        "can_translate": false
    }
]