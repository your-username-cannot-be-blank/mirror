
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>shadowsocks-cloudflare</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>vanyaindigo</td><td><p>Осваиваем самый прогрессивный способ обхода блокировок и сокрытия подключения к серверу VPN: Shadowsocks, обернутый в websocks-tls и пропущенный через <a href="https://overclockers.ru/blog/Indigo81/show/31739/shadowsocks-cherez-cloudflare-cdn-povyshaem-bezopasnost-v-seti" rel="nofollow noopener">Cloudflare CDN</a>.</p></td><td>2020-02-11T14:31:07.672Z</td></tr><tr><td>ValdikSS</td><td><p>В чем его прогрессивность?</p></td><td>2020-02-11T19:46:40.087Z</td></tr><tr><td>vanyaindigo</td><td><p>В том, что он скорость не режет.</p></td><td>2020-02-11T20:38:15.984Z</td></tr><tr><td>ValdikSS</td><td><p>VPN или прокси без промежуточных серверов будет отзывчивее, быстрее и надёжнее. Использование описанного вами способа оправдано в странах, где выявляют и блокируют VPN, но для частного использования в России это избыточно и задействует сторонний сервис (Cloudflare), который можно бы было не задействовать.</p></td><td>2020-02-11T20:52:34.018Z</td></tr><tr><td>vanyaindigo</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="4" data-topic="370">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<p>оправдано в странах, где выявляют и блокируют VPN</p>
</blockquote>
</aside>
<p>совершенно верно, но все еще впереди)</p></td><td>2020-02-11T21:07:02.958Z</td></tr><tr><td>cnbeining(NingBei)</td><td><p>Note Shadowsocks is <strong>not</strong> HTTP based and thus <strong>cannot</strong> be proxied by Cloudflare CDN. It is, however, possible to use Cloudflare Spectrum with Shadowsocks.</p>
<p>A more common approach is to use WebSocket based protocol(e.g, V2Ray) or HTTP-based protocol(anyone recall good ol GoAgent <a href="https://en.wikipedia.org/wiki/GoAgent" rel="nofollow noopener">https://en.wikipedia.org/wiki/GoAgent</a> ?) with Cloudflare.</p></td><td>2020-06-17T05:15:22.403Z</td></tr><tr><td>vanyaindigo</td><td><p>Of course your remark is true.  Nevertheless, you need to follow the link and read the article. Also keep in mind that Cloudflare Spectrum for any TCP/UDP traffic is available only for the Enterprise plan, and this is in no way suitable for individual use.</p></td><td>2020-06-17T05:30:34.056Z</td></tr><tr><td>vanyaindigo</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="4" data-topic="370">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<p>оправдано в странах, где выявляют и блокируют VPN</p>
</blockquote>
</aside>
<p>Прошло всего-ничего - полтора года. И как все поменялось.</p></td><td>2021-09-08T11:50:07.869Z</td></tr><tr><td>lord(Savely Krasovsky)</td><td><p>Прошло ещё полгода. И как всё поменялось <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2022-03-21T20:26:17.033Z</td></tr><tr><td>loskiq</td><td><p>преимущество shadowsocks+cloudflare в том, что не светится адрес самого прокси-сервера. следовательно, ркн и ребята в черном не смогут вычислить адрес подключения, а будут видеть лишь адреса cloudflare. следовательно, заблокировать такой прокси-сервер не представляется возможным, если конечно не блокнут весь cloudflare</p></td><td>2022-03-24T06:28:06.434Z</td></tr><tr><td>vanyaindigo</td><td><p>Это преимущество не самого прокси, а данной конкретной его реализации. Сам по себе Shadowsocks не предполагает проксирование через CDN.</p></td><td>2022-03-24T08:07:30.139Z</td></tr><tr><td>loskiq</td><td><p>под shadowsocks+cloudflare понимается shadowsocks over v2ray over cloudflare</p></td><td>2022-03-24T10:50:04.024Z</td></tr><tr><td>Enklomx</td><td><p>При этом в ClientHello светится домен, на который идут запросы прокси, так что заблокировать труда не составляет. Призванный решить проблему eSNI с фиктивным нешифрованным SNI толком же не поддерживается нигде, как и чистый eSNI, который ещё и отлавливается DPI.</p></td><td>2022-03-26T18:30:12.860Z</td></tr><tr><td>vanyaindigo</td><td><p>Конечно светится, это же легитимный https-трафик. Он и не должен прятаться.</p></td><td>2022-03-26T18:37:30.075Z</td></tr><tr><td>Enklomx</td><td><p>А раз он не прячется, то ничто не мешает продвинутому DPI пройти по этому самому домену, ни у кого из других пользователей в логах не замеченного, и не обнаружить ничего, что могло бы создать большие объёмы трафика.</p></td><td>2022-03-26T21:45:37.590Z</td></tr><tr><td>vanyaindigo</td><td><p>Очевидно, вы не знаете, как работают блокировки. Что блокировать определяет не оператор, и даже не “продвинутый DPI”. Блокировки централизованы, что блокировать определяют т. н. “суды”, генпрокуратура, роскомпараша и т. д. Им дела нет до ваших объемов трафика.</p></td><td>2022-03-27T06:22:32.270Z</td></tr><tr><td>Enklomx</td><td><p>Пока что.</p></td><td>2022-03-27T06:26:53.982Z</td></tr><tr><td>vanyaindigo</td><td><p>Прикрутил AdGuard Home вместо Unbound.</p></td><td>2022-04-09T19:55:17.113Z</td></tr><tr><td>Elevator</td><td><p>Наконец-то дошли руки попробовать. Делал все по инструкции, работает отлично. Жаль что quic не завернуть в ss.<br>
Можно доработать момент с названием домена. Т.е подбирать название близко к названию сайта на который будем проксировать товарища майора. Понятно что это overkill в текущей ситуации, но теоритически защитит от ручной проверки.</p></td><td>2022-04-19T13:52:44.545Z</td></tr><tr><td>vanyaindigo</td><td><p>quic нельзя завернуть в связку ss+v2ray-plugin, а в сам ss должно быть можно (не проверял). насчет имени домена - это не панацея от ручной проверки, т. к. первее вас выдаст объем трафика.</p></td><td>2022-04-19T14:01:02.596Z</td></tr><tr><td>Elevator</td><td><p>Если перенаправлять в прокси только заблокированные домены/ip (без ютуба или чего-то очень объемного) то разницы практически не будет.</p></td><td>2022-04-19T14:10:15.204Z</td></tr><tr><td>vanyaindigo</td><td><p>я не сторонник такого подхода, учитывая то, что данный прокси легко справляется с любым объемом трафика (с очевидными исключениями, конечно).</p></td><td>2022-04-19T14:29:20.599Z</td></tr><tr><td>Elevator</td><td><p>А что вам не нравится в выборочном обходе блокировок?</p></td><td>2022-04-19T17:49:04.824Z</td></tr><tr><td>vanyaindigo</td><td><p>Время не то, страна не та. Использование Интернета сегодня в России - это отягчающее обстоятельство. Про СОРМ 2 и 3, Яровую слышали?<br>
Это вообще не вопрос “обхода блокировок”. Это вопрос безопасности.</p></td><td>2022-04-19T17:51:15.971Z</td></tr><tr><td>vanyaindigo</td><td><p>Самый полный гайд теперь на <a href="https://medium.com/@telecom_angel/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-vpn-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-shadowsocks-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-cloudflare-cdn-2ff7499fd9fa" rel="noopener nofollow ugc">Medium</a></p></td><td>2022-07-09T08:40:58.650Z</td></tr><tr><td>borislavgx</td><td><p>Будто гайд с двача читаю. У либев уже устарел, лучше использовать оффициальную сборку на расте, она сейчас активно поддерживается. Зачем использовать v2ray, если есть xray? UDP в xray работает гораздо лучше и в целом гайд не выглядит свежим. Xchacha не рекоммендуется, в раст версии отсутствует. Лучше взять гайд xray и сделать более доступный гайд для масс, сделать установку скриптом.</p></td><td>2022-07-09T13:18:17.171Z</td></tr><tr><td>0ka(0ka)</td><td><p>Не вижу смысла в скриптах если есть <a href="https://github.com/vaxilu/x-ui" class="inline-onebox">GitHub - vaxilu/x-ui: 支持多协议多用户的 xray 面板</a>, xray + cdn можно поднять за минуту.<br>
Вот как он выглядит<br>
<div class="lightbox-wrapper"><a class="lightbox" href="shadowsocks-cloudflare/8fb3688aa24872f9b3a77705c7162a7c7664a822.png" data-download-href="https://ntc.party/uploads/default/8fb3688aa24872f9b3a77705c7162a7c7664a822" title="image"><img src="shadowsocks-cloudflare/8fb3688aa24872f9b3a77705c7162a7c7664a822_2_690x494.png" alt="image" data-base62-sha1="kveEQU6ZceRoL0fF5XtwIfPdbBo" width="690" height="494" srcset="shadowsocks-cloudflare/8fb3688aa24872f9b3a77705c7162a7c7664a822_2_690x494.png, shadowsocks-cloudflare/8fb3688aa24872f9b3a77705c7162a7c7664a822.png 1.5x, shadowsocks-cloudflare/8fb3688aa24872f9b3a77705c7162a7c7664a822.png 2x" data-dominant-color="B9C3C5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">899×644 34 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="shadowsocks-cloudflare/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b.png" data-download-href="https://ntc.party/uploads/default/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b" title="image"><img src="shadowsocks-cloudflare/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b_2_633x499.png" alt="image" data-base62-sha1="6VqnDS8vtVmHHyUY78qIhvOzOpJ" width="633" height="499" srcset="shadowsocks-cloudflare/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b_2_633x499.png, shadowsocks-cloudflare/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b.png 1.5x, shadowsocks-cloudflare/308ad6f8d50ea7a69c1183e1fb75a7ea0f1ddc6b.png 2x" data-dominant-color="AFB3B6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">895×706 28.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2022-07-09T13:52:48.331Z</td></tr><tr><td>vanyaindigo</td><td><p>Очень красиво, а можно без китайского языка?</p></td><td>2022-07-09T16:39:56.792Z</td></tr><tr><td>vanyaindigo</td><td><p>Сделайте) а мы все оценим.</p></td><td>2022-07-09T16:45:52.778Z</td></tr><tr><td>vanyaindigo</td><td><p>Спустя 2 года обновился плагин v2ray до версии 1.3.2 <a href="https://github.com/shadowsocks/v2ray-plugin/releases" class="inline-onebox" rel="noopener nofollow ugc">Releases · shadowsocks/v2ray-plugin · GitHub</a></p></td><td>2022-09-08T07:04:43.510Z</td></tr><tr><td>bashk8b</td><td><p>В режие QUIC v2ray кто-то пробовал? Что-то с производительностью, при высокой нагрузке, например, видео HD, зависает, не грузит. Потом отвисает через какое-то время.</p></td><td>2022-09-11T14:21:41.220Z</td></tr><tr><td>vanyaindigo</td><td><p>Я пробовал 2 года назад, производительность ниже, чем у websocket, поэтому не вижу смысла.</p></td><td>2022-09-12T08:00:40.953Z</td></tr><tr><td>bashk8b</td><td><p>Видимо, с тех пор и не оптимизировали. Кстати, в форке <a href="https://github.com/teddysun/v2ray-plugin" class="inline-onebox" rel="noopener nofollow ugc">GitHub - teddysun/v2ray-plugin: A SIP003 plugin based on v2ray</a> реализовано с gRPC TLS. Особо разницы не заметил с WebSocket TLS.</p></td><td>2022-09-12T14:14:05.878Z</td></tr><tr><td>vanyaindigo</td><td><p>Да, тут плагин активнее обновляется <img src="https://ntc.party/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:" loading="lazy" width="20" height="20"></p></td><td>2022-09-12T14:20:09.624Z</td></tr><tr><td>anon94384997</td><td><p>Кстати, есть неплохой GUI. <a href="https://github.com/Dr-Incognito/V2Ray-Desktop" rel="noopener nofollow ugc">V2Ray-Desktop</a>. И еще <a href="https://github.com/Qv2ray/Qv2ray" rel="noopener nofollow ugc">Qv2ray</a>.<br>
Shadowsocks, V2Ray/VMESS, Trojan.</p>
<p>Для простого shadowsocks: <a href="https://github.com/shadowsocks/shadowsocks-qt5" rel="noopener nofollow ugc">Shadowsocks-Qt5</a>. Но для новых шифров надо собирать самому (с botan 2). На линуксе не трудно.</p></td><td>2022-09-12T15:11:36.533Z</td></tr><tr><td>kstrmv</td><td><p>я ставил ShadowsocksR. Так получилось, что у меня оказалось два VPS сервера. Один от ihor, другой от FirstByte. Оба с европейским хостингом. Так и не смог выбрать какой-то один из них</p></td><td>2022-12-10T19:59:47.040Z</td></tr><tr><td>vanyaindigo</td><td><p>Роскомсвобода сообщает:</p>
<blockquote>
<p>Судя по всему продолжается тестирование блокировки протоколов VPN.</p>
<p>Наши друзья VPN-провайдеры сообщают, что пользователи из восточных регионов России (Алтай, Бийск, Омск, Новосибирск и другие) не могли подключиться к серверам с помощью популярных VPN протоколов, хотя при этом IP-адреса серверов VPN не блокировались.</p>
<p>Мы не знаем как Роскомнадзор оценивает эффективность этих блокировок, очевидно, что для РКН важно не только заблокировать VPN, но и не заблокировать лишнего. В любом случае к блокировкам популярных VPN-протоколов надо готовиться.</p>
</blockquote>
<p>Поэтому не ждем, а готовимся!</p></td><td>2023-01-23T07:14:03.315Z</td></tr><tr><td>anonymous89(anonymous89)</td><td><blockquote>
<p>VPN-провайдеры сообщают</p>
</blockquote>
<blockquote>
<p>с помощью популярных VPN протоколов, хотя при этом IP-адреса серверов VPN не блокировались</p>
</blockquote>
<p>Это и есть блокировка на современном этапе. Блокируют точечно по содержимому. Трейсы, пинги, ssh такую блокировку не выявят.</p>
<p>У блокировки для всех есть конкретный недостаток — вывезут не все блокировщики. При переводе в stateless режим развалится всё оставшееся. Точечные блокировки скорее закончатся блэкаутом/ir,tm сценарием/белыми списками, чем блокировкой VPN-протоколов для домашнего сервера.</p>
<aside class="quote no-group" data-username="vanyaindigo" data-post="37" data-topic="370">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/vanyaindigo/48/1958_2.png" class="avatar"> vanyaindigo:</div>
<blockquote>
<p>готовимся!</p>
</blockquote>
</aside>
<p>Да</p></td><td>2023-01-23T09:01:54.483Z</td></tr><tr><td>anonymous93(anonymous93)</td><td><p><a href="https://paperpaper.ru/rabota-vedetsya-ezhednevno-roskoms/" rel="noopener nofollow ugc">Про блокировки протоколов VPN</a></p>
<aside class="quote no-group" data-username="anonymous89" data-post="38" data-topic="370">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/8491ac/48.png" class="avatar"> anonymous89:</div>
<blockquote>
<p>вывезут не все блокировщики</p>
</blockquote>
</aside>
<p>С мест сообщают, что мощности по фильтрации удваивают, утраивают, учетверяют где необходимо. Последовательно ставят два и больше ящика, правила блокировок распределяют между ними. Байпасов нет.</p></td><td>2023-02-02T10:48:07.343Z</td></tr><tr><td>Frrienwrvale</td><td><p>А как подобную схему реализовать на lighttpd а не nginx?<br>
Мне даже Cloudflare не нужен. Нужно лишь спрятать v2ray за адресной строкой.</p></td><td>2023-08-14T08:36:42.235Z</td></tr><tr><td>Frrienwrvale</td><td><aside class="quote no-group" data-username="Frrienwrvale" data-post="40" data-topic="370">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/34f0e0/48.png" class="avatar"> Frrienwrvale:</div>
<blockquote>
<p>А как подобную схему реализовать на lighttpd а не nginx?<br>
Мне даже Cloudflare не нужен. Нужно лишь спрятать v2ray за адресной строкой</p>
</blockquote>
</aside>
<p>Вот так</p>
<details>
<summary>
Summary</summary>
<p>shadowsocks config (/etc/shadowsocks-libev/config.json)</p>
<pre><code class="lang-auto">{
    "server":["127.0.0.1"],
    "mode":"tcp_only",
    "server_port":my_v2ray_port_number,
    "password":"my_strong_pass",
    "timeout":60,
    "method":"aes-128-gcm",
    "plugin":"/my_path_to_v2ray-plugin/v2ray-plugin",
    "plugin_opts":"server;path=/my_long_path"
}
</code></pre>
<p>lighttpd config (/etc/lighttpd/lighttpd.conf)</p>
<pre><code class="lang-auto"># ssl-letsencrypt
server.modules += ("mod_openssl")
$SERVER["socket"] == ":443" {
  ssl.engine = "enable"
  ssl.pemfile = "/my_path_to_letsencrypt_cert_dir/fullchain.pem"
  ssl.privkey = "/my_path_to_letsencrypt_cert_dir/privkey.pem"
}

# v2ray-plugin-proxy
server.modules += ( "mod_proxy" )
$HTTP["url"] =~ "^/my_long_path" {
    proxy.server = ( "" =&gt; ( ( "host" =&gt; "127.0.0.1", "port" =&gt; "my_v2ray_port_number" ) ) )
    proxy.header = ( "upgrade" =&gt; "enable" )
}
</code></pre>
</details>
<p>В plugin_opts на сервере отсутствует опция tls (как и пути к сертификатам), т.к. функцию tls берет на себя lighttpd.<br>
В клиенте опция tls естественно должна присутствовать.</p></td><td>2023-08-15T09:35:48.358Z</td></tr><tr><td>vanyaindigo</td><td><p>На удивление, <a href="https://telegra.ph/Nastrojka-VPN-na-osnove-Shadowsocks-cherez-Cloudflare-CDN-11-10" rel="noopener nofollow ugc">решение</a> до сих пор актуально в условиях жесточайщего троттлинга YouTube.</p></td><td>2024-08-08T18:12:45.163Z</td></tr><tr><td>vanyaindigo</td><td><p>Вчера вечером, около 20.30 прикрыли лавочку. Пришлось развертывать VLESS.</p></td><td>2024-09-12T04:35:01.392Z</td></tr><tr><td>0ka(0ka)</td><td><p>Кто?</p></td><td>2024-09-12T10:40:15.741Z</td></tr><tr><td>vanyaindigo</td><td><p>Видимо, ТСПУ. Больше некому. На 2-х операторах одна картина.</p></td><td>2024-09-12T11:36:50.350Z</td></tr>
    </table>
      </body>
    </html>