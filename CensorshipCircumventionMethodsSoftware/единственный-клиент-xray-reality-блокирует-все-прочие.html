
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>единственный-клиент-xray-reality-блокирует-все-прочие</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Boogapoot</td><td><p>Приветствую Вас и благодарю, что читаете эти строки!</p>
<p>Прежде, чем столкнуться с проблемой, о которой пойдет речь, я успешно прикрыл свою домашнюю сеть от глаз РКН по методу <code>Xtls-Reality</code> <a href="https://habr.com/ru/articles/735536/" rel="noopener nofollow ugc">с помощью</a> сервера <code>3X-UI</code> и клиента <code>v2rayA</code>, <a href="https://habr.com/ru/articles/773696/" rel="noopener nofollow ugc">запущенного</a> на роутере с <code>OpenWRT</code>.</p>
<p>Конфигурация работала замечательно, пока не пришел черед добавить параллельно другие клиенты, будь то из сотовой сети или просто в обход v2rayA. И вот, к моему недоумению, ни один из них не смог установить соединение и лишь возвращал ошибку <code>"Reality verification failed"</code>, покуда v2rayA оставалась на связи с сервером, и только прервав последнюю, удалось подключить одновременно несколько других устройств, причем вне зависимости от типа ядра и его оболочки.</p>
<p>То есть, в некоторых обстоятельствах единственный клиент Reality может блокировать подключение всем остальным, но за несколько дней я так и не сумел отыскать причину подобного поведения и потому надеюсь обрести помощь здесь.</p></td><td>2024-04-28T16:56:56.964Z</td></tr><tr><td>Boogapoot</td><td><p>Ответ найден.</p>
<p>Клиенты Reality способны блокировать друг друга, когда применяют сниффинг без опции <code>"routeOnly": true</code> (для <a href="https://xtls.github.io/en/config/inbound.html#inboundobject" rel="noopener nofollow ugc">xray</a>) или <code>"sniff_override_destination": true</code> (для <a href="https://sing-box.sagernet.org/configuration/shared/listen/#sniff_override_destination" rel="noopener nofollow ugc">sing-box</a>).</p>
<p>Описанная коллизия может происходить только в пределах одной локальной сети, меж тем как ее наблюдение при подключении через сотового оператора явилось лишь моей методологической ошибкой.</p></td><td>2024-05-19T13:25:38.217Z</td></tr>
    </table>
      </body>
    </html>