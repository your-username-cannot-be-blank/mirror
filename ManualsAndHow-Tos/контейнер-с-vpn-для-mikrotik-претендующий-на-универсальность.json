[
    {
        "id": 71710,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2024-12-09T18:13:10.164Z",
        "cooked": "<p>Собирал для себя, но выглядит так, что получилось достаточно хорошо для публикации.<br>\nОснован на <a href=\"https://github.com/XTLS/Xray-core\" rel=\"noopener nofollow ugc\">Xray-core</a>, туда же добавлены бинарники <a href=\"https://github.com/artem-russkikh/wireproxy-awg\" rel=\"noopener nofollow ugc\">wireproxy awg</a> и <a href=\"https://github.com/hufrea/byedpi\" rel=\"noopener nofollow ugc\">byedpi</a>.<br>\nТакже geoip.dat и geosite.dat были заменены на варианты, <a href=\"https://github.com/runetfreedom\" rel=\"noopener nofollow ugc\">адаптированные для РФ</a><br>\nКонкретно geosite.dat был взят в варианте <code>geosite:ru-blocked</code>, т.е. заблокированные домены + домены, доступные только из РФ.<br>\nЕсть возможность собрать обрезанный geoip.dat, содержащий только списки для РФ(об этом ниже). Также оставлена возможность прямого подключения к wireproxy awg и byedpi, например через браузерный плагин(foxy proxy или аналоги) - оба бинарника биндятся на ip контейнера(по умолчанию byedpi на порт 9999, а wireproxy на 9998)</p>\n<details>\n<summary>\nДля кого это нужно?</summary>\n<p>Для тех, кому нужен только byedpi или только амнезия, весь этот велосипед затаскивать нет никакого смысла. Проще воспользоваться  <a href=\"https://ntc.party/t/mikrotik-vless-reality/8708/49\">решениями от тов. wiktorbgu</a><br>\nА вот если нужен Vless, shadowsocks и тому подобные инструменты, которые умеет xray - тогда да, тогда вам сюда</p>\n</details>\n<details>\n<summary>\nПочему был использован xray-core, а не sing-box?</summary>\n<p>Потому что именно xray-core поддерживает wireguard-inbound в качестве точек входа, что очень удобно для маршрутизации траффика. Фактически, внутри контейнера нет вообще никаких настроек маршрутизации, просто наружу торчат wireguard интерфейсы. Настройка роутера так же в связи с этим становится достаточно тривиальной и сводится к обычной конфигурации wireguard подключения. Сам контейнер при этом вообще не обязан размещаться на роутере, его вполне можно выселить на малинку, если роутеру не хватает ресурсов. Алярма! Attention! Achtung! В последней версии xray-core сломали маршрутизацию по тегам для wireguard инбаундов. <a href=\"https://github.com/XTLS/Xray-core/commit/3e7002d24c4ede6158fd4267914553bb98348c61\" rel=\"noopener nofollow ugc\">Уже как будто чинят обратно</a>, но пока самая рабочая версия - v24.10.31(которая и была использована)</p>\n</details>\n<details>\n<summary>\nПочему был использован wireproxy awg, а не нормальный amnesia wireguard в tun режиме?</summary>\n<p>Потому что лично у меня обычная сборка amnesia-wg работала криво, непредсказуемо отваливалась и по логам было совершенно непонятно, что именно с ней происходит. Wireproxy в свою очередь продемонстрировал высокую стабильность, простоту, а логов там даже слишком много. Из дополнительных плюсов - можно настроить ливнес пробы, можно вывесить наружу веб ручку с текущим статусом подключения и состоянием пробы, всё это при необходимости можно собирать wireproxy экспортером, собирать прометеем и выводить в графане. Т.е. весьма широкие возможности по настройке автоматизаций и мониторинга. В рамках данного контейнера не реализовано, кому такое надо - легко сами справятся с докой, но сам факт очень греет. Конфигурация так же проста как три рубля. Лично мне решение очень понравилось, единственный его минус - прожорливость до ОЗУ.</p>\n</details>\n<details>\n<summary>\nЗачем нужно было запихивать всё в один контейнер?</summary>\n<p>В целом - особо незачем. Обе прокси(что wireproxy, что ciadpi) спокойно могут жить в отдельных контейнерах, просто вывесив порт наружу. Работать будет точно так же. Но при запихивании в один контейнер добавление общего бизибокса стоит очень дешёво, зато предоставлят более-менее адекватный шелл для отладки и позволяет сделать человеческий вывод логов и хоть какую-то автоматизацию в генерации конфигов. Опять же, решение под ключ - это удобно.</p>\n</details>\n<p>Как это настраивать.<br>\nДля начала стоит учесть, что контейнеру для нормальной работы требуется хотя бы 80-100мб свободной оперативной памяти, а по настоящему хорошо он начинает чувствовать себя при 200-250Мб. Соотв hap AC2 - в пролёте, не нужно мучить зверушку, лучше докупить к нему малинку в помощь. Пробовать запихивать на сам роутер можно начиная с hap AC3, а лучше всего на hap AX2 или AX3. Вроде бы в тестовой ветке RouterOS прикрутили возможность добавить своп, но как именно это работает - лично я не проверял. Если кто хочет проэксперементировать - велком.<br>\nТакже инструкция предполагает, что на текущий момент, читателем уже прочитаны материалы по контейнерам на ROS, <a href=\"https://habr.com/ru/companies/selectel/articles/694436/\" rel=\"noopener nofollow ugc\">например статья на хабре</a> или <a href=\"https://help.mikrotik.com/docs/spaces/ROS/pages/84901929/Container\" rel=\"noopener nofollow ugc\">офф. дока</a>, а также есть понимание, как конфигурить wireguard интерфейсы на микротах(например можно <a href=\"https://mikrotik-training.ru/kb/wireguard-v-mikrotik/\" rel=\"noopener nofollow ugc\">ознакомиться со статьёй</a> про соединение двух микротов через WG), т.е. не возникает слишком удивляющих вопросов на тему “чем это таким мы тут будем заниматься?”</p>\n<details>\n<summary>\nПодготовка роутера</summary>\n<p>На микроте ставим пакет с контейнерами, ребутаемся, включаем контейнеры<br>\n<code>/system/device-mode/update container=yes</code><br>\nНа железке после этого нужно будет нажать кнопку mode за ограниченное время, удалённо включить контейнеры не выйдет, т.к. потанцевальная дыра в безопасности. Дальше создаём VETH для нашего контейнера, создаём отдельный бридж для контейнеров, навешиваем туда ip адреса(я тут добавляю и ipv6 и ipv4 адрес. На самом деле для схемы с роутингом через WG интерфейс достаточно только v4, но у меня все контейнеры настроены единообразно, так что для общего понимания оставлю)</p>\n<pre><code class=\"lang-auto\">/interface/veth/add address=172.20.0.2/24,fd08:172:20::2/64 gateway=172.20.0.1 gateway6=fd08:172:20::1 name=xray_eth\n/interface/bridge/add name=containers\n/interface/bridge/port/add bridge=containers interface=xray_eth\n/ip/address/add address=172.20.0.1/24 interface=containers\n/ip/firewall/nat/\nadd action=masquerade chain=srcnat comment=\"from containers masq\" out-interface=containers src-address=192.168.88.0/24\nadd action=masquerade chain=srcnat comment=\"from containers masq\" out-interface-list=WAN src-address=172.20.0.0/24\n/ipv6/address/add address=fd08:172:20::1 interface=containers\n/ipv6/firewall/nat/\nadd action=masquerade chain=srcnat comment=\"from containers masq\" out-interface-list=WAN src-address=fd08:172:20::/64\nadd action=masquerade chain=srcnat comment=\"to containers masq\" out-interface=containers\n/ipv6/firewall/filter/add action=accept chain=forward comment=\"Allow Containers\" out-interface-list=WAN src-address=fd08:172:20::/64\n</code></pre>\n<p>Опять же, конкретно в варианте с wireguard инбаундами никакой дополнительный маскарадинг для ipv4 не нужен, с головой хватит тех, что мы потом добавим отдельно, а также дефолтного правила маскарадинга всего выходного траффика. Но для единообразия пусть будут.<br>\nДальше втыкаем в микрот флешку и из интерфейса форматируем её в EXT4(Обязательно! Если будет FAT или exFAT - при распаковке контейнера порушатся разрешения фалов и ничего не взлетит)<br>\nТакже включаем на роутере ftp(если выключен) - пригодится для подкидывания конфигов и имеджей<br>\n<code>/ip/service/set ftp disabled=no port=21</code></p>\n</details>\n<details>\n<summary>\nЗакатываем контейнер</summary>\n<p>Конфигурим местный докер.<br>\n<code>/container/config/set ram-high=384.0MiB tmpdir=usb1/pull</code><br>\nАттеншн! Тут ram-high=384.0MiB - это конфиг для AX3 с гигом оперативы. У AС3 её всего 256Мб и с пустым конфигом и установленным пакетом wifi-qcom доступно примерно 145Мб(а с подробным конфигом и под нагрузкой - что-то около 70Мб).<br>\nПри превышении лимита ram-high процессы в контейнере начнут нещадно троттлиться, т.е. работать будет, но с дикими тормозами. А вот если память у роутера закончится - скорее всего он тупо крашнется. Не доводим и не включаем старт контейнера при загрузке пока не отладим всё.<br>\nВ данном случае я не выкладывал образ на докерхаб, поэтому подкидываем его локально. Для этого подключаемся по ftp на микрот и подкладываем xray_full_mikro.tar в корень диска usb1. Можно воспользоваться <a href=\"https://winscp.net/eng/download.php\" rel=\"noopener nofollow ugc\">WinSCP</a>, очень удобно. Ну или драг-н-дроп-ом через winbox, но там удобство уже так себе.<br>\nТакже создаём папочки по пути /usb1/xray_full/config (тоже через ftp или через winbox)<br>\nСоздаём маунт для папочки с конфигами<br>\n<code>/container/mounts/add dst=/opt/config name=xray_full_config src=/usb1/xray_full/config</code><br>\nИ закатываем контейнер<br>\n<code>/container/add comment=\"Xray-core PLUS\" file=usb1/xray_full_mikro.tar interface=veth1 envlist=xray_full hostname=XrayPLUS interface=xray_eth logging=yes mounts=xray_full_config root-dir=/usb1/xray_full/store logging=yes start-on-boot=no</code></p>\n</details>\n<p>После этого контейнер создастся, но останется выключенным. Включать его пока рано - нужно сконфигурить Wireguard интерфейсы, которыми роутер будет смотреть в контейнер и добавить ключи в переменные контейнера</p>\n<details>\n<summary>\nСоздаём WG интерфейсы и настраиваем маршрутизацию</summary>\n<pre><code class=\"lang-auto\">/interface/wireguard/add listen-port=13234 mtu=1420 name=BDPI_WG\n/interface/wireguard/peers/add name=BDPI_WG_peer allowed-address=0.0.0.0/0,::/0 endpoint-address=172.20.0.2 endpoint-port=3124 interface=BDPI_WG \n/interface/wireguard/add listen-port=13235 mtu=1420 name=AWG_WG\n/interface/wireguard/peers/add name=AWG_WG_peer allowed-address=0.0.0.0/0,::/0 endpoint-address=172.20.0.2 endpoint-port=3125 interface=AWG_WG \n</code></pre>\n<p>Далее набираем<br>\n<code>/interface/wireguard/print</code><br>\nИ видим примерно такую картинку</p>\n<pre><code class=\"lang-auto\">Flags: X - disabled; R - running \n 0  R name=\"BDPI_WG\" mtu=1420 listen-port=13234 private-key=\"wO1qi2jL68IkBEcwZ9IT9BaTH16dONd7Ntj+Lbft0kg=\" public-key=\"NN0BnydbxXQMl9n/hOqow5z6SF/b8h6lMoaa5uBeYGE=\" \n\n 1  R name=\"AWG_WG\" mtu=1420 listen-port=13235 private-key=\"SHp5JzLo3YvvyswGDEudwukltBCEBmvs59epANgxeWE=\" public-key=\"hbK38jNBghVeNB7/D+YDqUZLVqn5qSGcZvGogQ63JXQ=\" \n\n</code></pre>\n<p>Здесь нас интересуют <strong>публичные</strong> ключи. Заносим их в переменные контейнера</p>\n<pre><code class=\"lang-auto\">/container/envs\nadd key=WG_BDPIIN_PUBKEY name=xray_full value=\"NN0BnydbxXQMl9n/hOqow5z6SF/b8h6lMoaa5uBeYGE=\"\nadd key=WG_WPIN_PUBKEY name=xray_full value=\"hbK38jNBghVeNB7/D+YDqUZLVqn5qSGcZvGogQ63JXQ=\"\n</code></pre>\n<p>Далее добываем ключи пиров</p>\n<pre><code class=\"lang-auto\">/interface/wireguard/peers/export show-sensitive \n# 2024-12-09 16:55:52 by RouterOS 7.16.1\n# software id = 22UI-VTRD\n#\n# model = C53UiG+5HPaxD2HPaxD\n# serial number = XXXXXXXXXXX\n/interface wireguard peers\nadd allowed-address=0.0.0.0/0,::/0 endpoint-address=172.20.0.2 endpoint-port=3124 interface=BDPI_WG name=BDPI_WG_peer private-key=\"aPfr+HjXhgrzejN3YawS9SPddIyWidDgPYI3nHezlGw=\" public-key=\\\n    \"I3GJ75Wz0BgfBw1KwiEkmNsCmg8CTHnyqDDKsStBdGw=\"\nadd allowed-address=0.0.0.0/0,::/0 endpoint-address=172.20.0.2 endpoint-port=3125 interface=AWG_WG name=AWG_WG_peer private-key=\"OJrDUVmmM6LbSmEfMddKhx15LoKNh4l2P/XdlO8An1M=\" public-key=\\\n    \"t4F3NASnN32rpY6OgbrXc8S2xHdrXsuIuyQHwCvDGXY=\"\n</code></pre>\n<p>Здесь нас интересуют <strong>приватные</strong> ключи. Аналогично добавляем их в переменные</p>\n<pre><code class=\"lang-auto\">/container/envs\nadd key=WG_BDPIIN_PRIVKEY name=xray_full value=\"aPfr+HjXhgrzejN3YawS9SPddIyWidDgPYI3nHezlGw=\"\nadd key=WG_WPIN_PRIVKEY name=xray_full value=\"OJrDUVmmM6LbSmEfMddKhx15LoKNh4l2P/XdlO8An1M=\"\n</code></pre>\n<p>И наконец настраиваем правила и таблица маршрутизации</p>\n<pre><code class=\"lang-auto\">/routing table \nadd disabled=no fib name=bdpi\nadd disabled=no fib name=awg\n/routing rule\nadd action=lookup disabled=no interface=BDPI_WG routing-mark=warp table=bdpi\nadd action=lookup disabled=no interface=AWG_WG routing-mark=vless table=awg\n</code></pre>\n<p>Добавляем маскарадинг</p>\n<pre><code class=\"lang-auto\">/ip firewall nat\nadd action=masquerade chain=srcnat comment=\"BDPI_WG masq\" out-interface=BDPI_WG \nadd action=masquerade chain=srcnat comment=\"AWG_WG masq\" out-interface=AWG_WG\n/ipv6 firewall nat\nadd action=masquerade chain=srcnat comment=\"BDPI_WG masq\" out-interface=BDPI_WG\nadd action=masquerade chain=srcnat comment=\"AWG_WG masq\" out-interface=AWG_WG\n</code></pre>\n<p>Дальше нам нужно повесить на интерфейсы WG какие-нибудь IP адреса, любые, из приватного диапазона(по ним будет идти маршрутизация только до приложения в контейнере). Например так. Опять же, в целом можно без этого, т.к. маршрутизировать мы будет тупо по интерфейсу, но некрасиво.</p>\n<pre><code class=\"lang-auto\">/ip address \nadd address=172.19.0.2 interface=BDPI_WG network=172.19.0.2\nadd address=172.19.0.3 interface=AWG_WG network=172.19.0.3\n/ipv6 address\nadd address=fd08:172:19::3/128 advertise=no interface=BDPI_WG no-dad=yes\nadd address=fd08:172:19::2/128 advertise=no interface=AWG_WG no-dad=yes\n</code></pre>\n<p>И создаём маршруты в дикий интернет для наших новых таблиц маршрутизации</p>\n<pre><code class=\"lang-auto\">/ip route\nadd comment=BDPI disabled=no distance=1 dst-address=0.0.0.0/0 gateway=BDPI_WG routing-table=bdpi\nadd comment=AWG disabled=no distance=1 dst-address=0.0.0.0/0 gateway=AWG_WG routing-table=awg\n/ipv6 route\nadd comment=BDPI disabled=no distance=1 dst-address=2000::/3 gateway=BDPI_WG routing-table=bdpi\nadd comment=AWG disabled=no distance=1 dst-address=2000::/3 gateway=AWG_WG routing-table=awg\n</code></pre>\n</details>\n<p>Уже на этом этапе контейнер можно поднять, он должен будет немного поругаться на то, что у него неправильный конфиг амнезии, а у byedpi не настроены никакие параметры. Но крашнуться не должен. В теории)</p>\n<details>\n<summary>\nИсправим это</summary>\n<p>Сначала добавим переменную, передающую параметры в byedpi. В неё нужно прописать ваши параметры, которые работают у вас<br>\n<code>/container/envs/add key=BDPI_ARGS name=xray_full value=\"--proto=http,tls --oob 2\"</code><br>\nДальше добавляем конфиг амнезии. Если амнезия нужна для подключения к WARP - можно воспользоваться <a href=\"https://github.com/ImMALWARE/bash-warp-generator\" rel=\"noopener nofollow ugc\">генератором</a><br>\nПолучится файл вида</p>\n<pre><code class=\"lang-auto\">[Interface]\nPrivateKey = СЕЕРКТНЫЙ_КЛЮЧ\nS1 = 0\nS2 = 0\nJc = 50\nJmin = 10\nJmax = 120\nH1 = 1\nH2 = 2\nH3 = 3\nH4 = 4\n\nMTU = 1280\nAddress = 172.16.0.2, IPV6_адрес\n\n[Peer]\nPublicKey = ПУБЛИЧНЫЙ_КЛЮЧ\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nEndpoint = engage.cloudflareclient.com:2408\n</code></pre>\n<p>В него, в раздел [Interface] по желанию можно добавить строки</p>\n<pre><code class=\"lang-auto\">CheckAlive = 1.1.1.1, 8.8.8.8\nCheckAliveInterval = 10\n</code></pre>\n<p>Тогда раз в CheckAliveInterval  хосты, перечисленные в CheckAlive, будут пинговаться, и если не ответят - ливнес проба на <code>/readyz</code> вернёт 503. А если всё ОК - 200.<br>\nТакже Endpoint можно задать через перменную окружения<br>\n<code>Endpoint = $AWG_ENDPOINT</code><br>\nИ задать её через переменные контейнера<br>\n<code>/container/envs/add key=AWG_ENDPOINT name=xray_full value=162.159.192.1:2408</code><br>\nwireproxy так умеет и понимает.<br>\nКонфиг подкидываем по пути /usb1/xray_full/config/чтоугодно.conf<br>\nНапр. /usb1/xray_full/config/awg.conf<br>\nЕсли стартовали контейнер - рестартим</p>\n</details>\n<p>После этого контейнер с базовым конфигом почти готов к работе. Любой траффик, который пойдёт на интерфейс BDPI_WG, через правила маршрутизации, прописанном в конфие xray, зарулится на byedpi, а тот что пойдёт на AWG_WG  - попадёт в wireproxy. Остаётся настроить правила, которые будут заворачивать маршруты для интересных нам хостов.</p>\n<details>\n<summary>\nНастраиваем заворот траффика</summary>\n<p>Для начала добавляем правила, по которым траффик до хостов из соотв. аддресс-листа будет заворачиваться в соотв. таблицу маршрутизации</p>\n<pre><code class=\"lang-auto\">/ip firewall mangle\nadd action=mark-routing chain=prerouting comment=BDPI dst-address-list=bdpi new-routing-mark=bdpi passthrough=yes routing-mark=!bdpi src-address=!172.20.0.0/24\nadd action=mark-routing chain=prerouting comment=AWG dst-address-list=awg new-routing-mark=awg passthrough=yes routing-mark=!awg src-address=!172.20.0.0/24\n/ipv6 firewall mangle\nadd action=mark-routing chain=prerouting comment=BDPI dst-address-list=bdpi new-routing-mark=bdpi passthrough=yes routing-mark=!bdpi src-address=!fd08:172:20::/64\nadd action=mark-routing chain=prerouting comment=AWG dst-address-list=awg new-routing-mark=awg passthrough=yes routing-mark=!awg src-address=!fd08:172:20::/64\n</code></pre>\n<p>Теперь эти списки нужно как-то наполнять. Проще всего - через статические DNS записи(клиенты должны использовать микротовски DNS сервер, иначе фокус не получится)<br>\nПредположим, мы хотим обойти блокировки для домена ntc.party. Предположим, мы хотим сделать это через byedpi.<br>\nТогда добавляем статическую запись такого вида</p>\n<pre><code class=\"lang-auto\">/ip/dns/static/add address-list=bdpi comment=\"DPI ntc.party\" forward-to=localhost match-subdomain=yes name=ntc.party type=FWD\n</code></pre>\n<p>И настраиваем время жизни записи в листе на подольше(я себе ставлю сутки, нужно чтоб она жила дольше, чем DNS кеш у клиентов<br>\n<code>/ip/dns/set address-list-extra-time=1d</code><br>\nПосле этого, когда клиент попытается сходит на ntc.party, он стукнется на микротиковский DNS, чтобы разрезолвить хост. Микротиковский DNS найдёт у себя статическую FWD запись, форварднёт себе же, добавит в лист bdpi и потом разрезолвит об вышестоящий DNS сервер и вернёт клиенту ip. И на тот момент, когда клиент попытается установить соединение с этм ip - он уже находится в листе bdpi, а значит траффик попадёт в таблицу маршрутизации bdpi и завернётся в интерфейс BDPI_WG. Т.о. можно гибко настраивает списки для разных хостов.</p>\n</details>\n<p>Касаемо логов контейнера. Сделано так, что для каждого из бинарников его сообщения имеют соотв. префикс в общем логфайле микротика.<br>\nБудет так - hostname_контейнера: Имя_приложения: сообщение. Если хостнейм контейнера не настроен - вместо него будет выведен его ip адрес. Также есть возможность отфильтровать сообщения от wireproxy, т.к. он генерит их ну прям очень много. Делается через задание энвы контейнера LOGFILTER<br>\nНапример как-то так:<br>\n<code>add key=LOGFILTER name=xray_full value=\"Transport packet|Sending keepalive|Sending handshake|Received handshake\"</code></p>\n<p>После этого контейнер базово работает и заворачивает траффик в амнезию или byedpi. Но ведь он умеет не только это) Начинается самое вкусное.<br>\nС некоторых пор xray-proxy поддерживает многофайловые конфиги, т.е. больше нет никакой необходимости ковыряться в километровой жсонине, можно порубить её на жсоны помельче и точечно добавлять или менять куски конфигурации.<br>\nПолная дока <a href=\"https://xtls.github.io/en/config/features/multiple.html\" rel=\"noopener nofollow ugc\">доступна здесь</a>, но если вкратце - суть такая.<br>\nВ конфиге xray есть примерно такой набор блоков:</p>\n<pre><code class=\"lang-auto\">{\n  \"log\": {},\n  \"api\": {},\n  \"dns\": {},\n  \"stats\": {},\n  \"policy\": {},\n  \"transport\": {},\n  \"routing\": {},\n  \"inbounds\": [],\n  \"outbounds\": []\n}\n</code></pre>\n<p>Для всех них валидно следующее правило - каждый следующий конфиг заменяет собой те блоки в предыдущем конфиге, которые он содержит. Т.е. если следующим конфигом добавить json с содержимым вида<br>\n{<br>\n“log”: {<br>\nЧто-то<br>\n}<br>\n}<br>\nТо весь блок log в конфиге заменится на новый и общий конфиг примет вид</p>\n<pre><code class=\"lang-auto\">{\n  \"log\": {\n     Что-то\n   },\n  \"api\": {},\n  \"dns\": {},\n  \"stats\": {},\n  \"policy\": {},\n  \"transport\": {},\n  \"routing\": {},\n  \"inbounds\": [],\n  \"outbounds\": []\n}\n</code></pre>\n<p>Правило валидно для всех блоков, <strong>кроме inbounds и outbounds</strong>, для них всё хитрее. Если в следующем конфиге прописано два или больше инбаунда или аутбаунда - то всё тоже самое, заменяется весь блок. А вот если их там только по одной штучке - то инбаунды из следующего конфига <strong>допишутся</strong> в начало общего. Аналогично и аутбаунды, только для них есть ещё одно правило - если в имени конфига есть слово <code>tail</code>, то аутбаунды допишутся в конец.<br>\nКонфиги намапливаются друг на друга в алфавитном порядке, т.е. сначала применится конфиг 00-что-то.json, потом 01-что-то.json и т.п. Все расширения кроме json также игнорируются, т.о. если изменить расширение файла - ненужный кусок конфига можно просто выключить. Удобно например для временного включения расширенного логирования.<br>\nТ.о. можно без особых усилий добавлять к базовой конфиге xray в контейнере свои собственные конфигурации для VPN</p>\n<details>\n<summary>\nБазовый конфиг</summary>\n<p>Лежит в контейнере по пути<br>\n/usb1/xray_full/store/opt/xray-core/00_base.json<br>\nИ имеет такой вид:</p>\n<pre><code class=\"lang-auto\">{\n  \"log\": \n  {\n    \"access\": \"none\",\n    \"dnsLog\": false,\n    \"loglevel\": \"warning\"\n  },\n  \"routing\": \n  {\n    \"domainStrategy\": \"IPIfNonMatch\",\n    \"rules\": [\n      {\n        \"type\": \"field\",\n        \"ip\": [\n          \"geoip:private\",\n          \"192.168.88.0/24\"\n        ],\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"domain\": \"geosite:ru-available-only-inside\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"protocol\": \"bittorrent\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"ip\": \"geoip:ru\",\n        \"outboundTag\": \"bdpi\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-bdpi:3124\",\n        \"outboundTag\": \"bdpi\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-awg:3125\",\n        \"outboundTag\": \"awg\"\n      }\n    ]\n  },\n  \"inbounds\": \n  [\n    {\n      \"listen\": \"$MYIP\",\n      \"port\": 3124,\n      \"protocol\": \"wireguard\",\n      \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"$WG_BDPIIN_PRIVKEY\",\n        \"peers\": [\n          {\n            \"publicKey\": \"$WG_BDPIIN_PUBKEY\",\n            \"allowedIPs\": [\n              \"0.0.0.0/0\",\n              \"::/0\"\n            ],\n            \"keepAlive\": 0\n          }\n        ],\n        \"noKernelTun\": true\n      },\n      \"streamSettings\": null,\n      \"tag\": \"inbound-wg-bdpi:3124\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": \"fakedns+others\",\n        \"metadataOnly\": false\n      }\n    },\n    {\n      \"listen\": \"$MYIP\",\n      \"port\": 3125,\n      \"protocol\": \"wireguard\",\n      \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"$WG_WPIN_PRIVKEY\",\n        \"peers\": [\n          {\n            \"publicKey\": \"$WG_WPIN_PUBKEY\",\n            \"allowedIPs\": [\n              \"0.0.0.0/0\",\n              \"::/0\"\n            ],\n            \"keepAlive\": 0\n          }\n        ],\n        \"noKernelTun\": true\n      },\n      \"streamSettings\": null,\n      \"tag\": \"inbound-wg-awg:3125\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": \"fakedns+others\",\n        \"metadataOnly\": false\n      }\n    }\n  ],\n  \"outbounds\": \n  [\n    {\n      \"tag\": \"direct\",\n      \"protocol\": \"freedom\",\n      \"settings\": {\n        \"domainStrategy\": \"AsIs\"\n      }\n    },\n    {\n      \"tag\": \"blocked\",\n      \"protocol\": \"blackhole\",\n      \"settings\": {}\n    },\n    {\n      \"tag\": \"awg\",\n      \"protocol\": \"socks\",\n      \"settings\": {\n        \"servers\": [\n          {\n            \"address\": \"$MYIP\",\n            \"port\": $WP_PORT\n          }\n        ]\n      }\n    },\n    {\n      \"tag\": \"bdpi\",\n      \"protocol\": \"socks\",\n      \"settings\": {\n        \"servers\": [\n          {\n            \"address\": \"$MYIP\",\n            \"port\": $BDPI_PORT\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p>Это фактически шаблон, в котором при старте контейнера переменные подменяются на их значения, после чего содержимое перенаправляется через named pipe по пути<br>\n/usb1/xray_full/store/opt/config/00_base_dyn.json<br>\nТ.е. после старта контейнера в маунте с конфигурациями появляется пустой файл с таким именем. Его можно удалить, он пересоздастся после старта, а вот пробовать открывать его не надо, это на самом деле не файл, а ссылка на пайп, другой конец которого в этот момент уже оторвана. Не откроется.<br>\nТакже в нём изначально прописан ряд правил маршрутизации.</p>\n<ol>\n<li>Для адресов из приватного диапазона аутбаунд всегда direct</li>\n<li>Для хостов, доступных только из РФ аутбаунд тоже директ(правило работает только в том случае, если xray используется как прокси. Если используется wireguard inbound - xray ничего не знает о доменном имени и база geosite для него бесполезна. Блок оставлен по сути на всякий случай</li>\n<li>Для битторент траффика аутбаунд всегда direct. На случай случайно залетевшего маршрута.</li>\n<li>Для российских ip адресов аутбаунд по умолчанию byedpi. Опять же, оставлено скорее как страховка, чтоб не палить свои VPS-ки</li>\n<li>Для входящего интерфейса с тегом inbound-wg-bdpi аутбаунд - byedpi</li>\n<li>Для входящего интерфейса с тегом inbound-wg-awg аутбаунд - awg<br>\nВ общем случае, правила работают так. Любому соединению нужно соотвествовать всем условиям, описанным в правиле. Если хоть одно не соответствует - мимо. Если соответсвуют несколько - применится то, которое выше в списке. Если не соотвествует ни одно - траффик выйдет через самый последний аутбаунд в списке(поэтому в списке последним прописан тот же byedpi - чтоб случайно не спалить свою VPSку)</li>\n</ol>\n</details>\n<p>Ну и дальше, представим себе что нам хочется добавить свой собственный VPN в качестве ещё одного в списке вариантов обхода. Допустим, это VLess протокол<br>\nПодкидываем по пути /usb1/xray_full/store/opt/config/ конфиг 01_vless_out.json вида</p>\n<details>\n<summary>\n01_vless_out.json</summary>\n<pre><code class=\"lang-auto\">{\n  \"inbounds\": \n  [\n    {\n      \"listen\": \"172.20.0.2\",\n      \"port\": 3126,\n      \"protocol\": \"wireguard\",\n      \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"ПРИВАТНЫЙ_КЛЮЧ\",\n        \"peers\": [\n          {\n            \"publicKey\": \"ПУБЛИЧНЫЙ_КЛЮЧ\",\n            \"allowedIPs\": [\n              \"0.0.0.0/0\",\n              \"::/0\"\n            ],\n            \"keepAlive\": 0\n          }\n        ],\n        \"noKernelTun\": true\n      },\n      \"streamSettings\": null,\n      \"tag\": \"inbound-wg-vless:3126\",\n      \"sniffing\": {\n        \"enabled\": false,\n        \"metadataOnly\": false,\n        \"routeOnly\": false\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"tag\": \"vless_out\",\n      \"protocol\": \"vless\",\n      \"settings\": {\n        \"vnext\": [\n          {\n            \"address\": \"АДРЕС\",\n            \"port\": 443,\n            \"users\": [\n              {\n                \"id\": \"АЙДИ\",\n                \"flow\": \"xtls-rprx-vision\",\n                \"encryption\": \"none\"\n              }\n            ]\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"tcp\",\n        \"security\": \"reality\",\n        \"realitySettings\": {\n          \"publicKey\": \"ПУБЛИЧНЫЙ_КЛЮЧ_VLESS\",\n          \"fingerprint\": \"chrome\",\n          \"serverName\": \"что-то.com\",\n          \"shortId\": \"айди\",\n          \"spiderX\": \"/\"\n        },\n        \"tcpSettings\": {\n          \"header\": {\n            \"type\": \"none\"\n          }\n        }\n      }\n    }\n  ]\n}\n</code></pre>\n</details>\n<p>Т.к. в этом конфиге только один инбаунд и только один аутбаунд - они допишутся к общему, а не заменят список целиком. Если нужно больше инбаундов(напр. мы хотим добавить dokodemo-door, который будет проксировать траффик в наш vless-out, то нужно класть его в ещё один конфиг, следующий в списке)<br>\nПодкидываем туда же 02_routing.json, в который копируем правила из дефолтного+новое</p>\n<details>\n<summary>\n02_routing.json</summary>\n<pre><code class=\"lang-auto\">{\n\"routing\": \n  {\n    \"domainStrategy\": \"AsIs\",\n    \"rules\": \n    [\n      {\n        \"type\": \"field\",\n        \"ip\": [\n          \"geoip:private\",\n          \"192.168.88.0/24\"\n        ],\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"domain\": \"geosite:ru-available-only-inside\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"ip\": \"geoip:ru\",\n        \"outboundTag\": \"bdpi\"\n      },\n      {\n        \"type\": \"field\",\n        \"protocol\": \"bittorrent\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-vless:3126\",\n        \"outboundTag\": \"vless_out\"\n      }\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-awg:3125\",\n        \"outboundTag\": \"awg\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-bdpi:3124\",\n        \"outboundTag\": \"bdpi\"\n      }\n    ]\n  }\n}\n</code></pre>\n</details>\n<p>Настраиваем ещё один Wireguard интерфейс на роутере по аналогии, рестартим контейнер и вуаля - новый впн настроен. Можно прицеливать нужные хосты туда.</p>\n<details>\n<summary>\nПро обрезку geoip.dat</summary>\n<p>Можно убрать ненужные списки из geoip.dat, например оставив только списки ru, private и ru-blocked<br>\nДля этого качаем <a href=\"https://raw.githubusercontent.com/runetfreedom/russia-blocked-geoip/release/geoip.dat\" rel=\"noopener nofollow ugc\">полный, с добавленными для РФ списками</a><br>\nКлонируем себе куда-нибудь гит с интсрументарием, заходим и собираем (нужен golang-go)</p>\n<pre><code class=\"lang-auto\">git clone https://github.com/v2fly/geoip.git\ncd geoip\ngo build\n</code></pre>\n<p>После этого правим config.json, оставляя от него что-то такое</p>\n<pre><code class=\"lang-auto\">{\n  \"input\": [\n    {\n      \"type\": \"v2rayGeoIPDat\",\n      \"action\": \"add\",\n      \"args\": {\n        \"uri\": \"../geoip.dat\",\n        \"wantedList\": [\"ru\", \"ru-blocked\"]\n      }\n    },\n    {\n      \"type\": \"private\",\n      \"action\": \"add\"\n    }\n  ],\n  \"output\": [\n    {\n      \"type\": \"v2rayGeoIPDat\",\n      \"action\": \"output\",\n      \"args\": {\n        \"outputDir\": \"./output\",\n        \"outputName\": \"geoip-ru.dat\"\n      }\n    }\n  ]\n}\n</code></pre>\n<p>где …/geoip.dat - путь до ранее скаченного geoip.dat<br>\nВсё, сохраняем, запускаем бинарь geoip, и он выплюнет в ./output geoip-ru.dat, содержащий интересующие нас списки. Подкидывать по пути /usb1/xray_full/store/opt/xray-core/data/geoip.dat<br>\nЗачем нужно? В теории можно повысить производительность, если используется сравнение только с русскими списками - зачем таскать все остальные? На практике если честно особой разницы не заметил, но кому-то возможно может помочь съэкономить несколько мегабайт памяти</p>\n</details>\n<p>Собранный контейнер(для arm64) выложил <a href=\"https://disk.yandex.ru/d/AMmLNIR7_8voEA\" rel=\"noopener nofollow ugc\">на ядиск</a>, также в следующем сообщении(в это не помещается) выкладываю скрипт для самостоятельной сборки(потому что не надо доверять вещам, собранным рандомным челом из интернета). Ну и ещё можно подрихтовать под себя базовый конфиг, убрать, если не нужны, бинарники wireproxy и ciadpi, обновить контейнер когда выйдут свежие версии и т.п.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2024-12-10T10:26:18.384Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1081,
        "reads": 149,
        "readers_count": 148,
        "score": 5379.8,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/mikrotik-vless-reality/8708/49",
                "internal": true,
                "reflection": false,
                "title": "Mikrotik + VLESS + REALITY",
                "clicks": 81
            },
            {
                "url": "https://github.com/runetfreedom",
                "internal": false,
                "reflection": false,
                "title": "runetfreedom · GitHub",
                "clicks": 19
            },
            {
                "url": "https://habr.com/ru/companies/selectel/articles/694436/",
                "internal": false,
                "reflection": false,
                "title": "Docker на роутере MikroTik: как развернуть и не утонуть в багах / Хабр",
                "clicks": 14
            },
            {
                "url": "https://disk.yandex.ru/d/AMmLNIR7_8voEA",
                "internal": false,
                "reflection": false,
                "title": "xray_full_mikro.tar — Яндекс Диск",
                "clicks": 12
            },
            {
                "url": "https://github.com/XTLS/Xray-core",
                "internal": false,
                "reflection": false,
                "title": "GitHub - XTLS/Xray-core: Xray, Penetrates Everything. Also the best v2ray-core, with XTLS support. Fully compatible configuration.",
                "clicks": 10
            },
            {
                "url": "https://github.com/artem-russkikh/wireproxy-awg",
                "internal": false,
                "reflection": false,
                "title": "GitHub - artem-russkikh/wireproxy-awg: AmneziaWG compatible wireguard client that exposes itself as a socks5 proxy",
                "clicks": 9
            },
            {
                "url": "https://mikrotik-training.ru/kb/wireguard-v-mikrotik/",
                "internal": false,
                "reflection": false,
                "title": "WireGuard в Mikrotik - тренер Роман Козлов",
                "clicks": 8
            },
            {
                "url": "https://github.com/hufrea/byedpi",
                "internal": false,
                "reflection": false,
                "title": "GitHub - hufrea/byedpi: Bypass DPI",
                "clicks": 7
            },
            {
                "url": "https://xtls.github.io/en/config/features/multiple.html",
                "internal": false,
                "reflection": false,
                "title": "Multi-file configuration | Project X",
                "clicks": 6
            },
            {
                "url": "https://github.com/XTLS/Xray-core/commit/3e7002d24c4ede6158fd4267914553bb98348c61",
                "internal": false,
                "reflection": false,
                "title": "WireGuard inbound: Add missing inbound session information back (#4126) · XTLS/Xray-core@3e7002d · GitHub",
                "clicks": 4
            },
            {
                "url": "https://help.mikrotik.com/docs/spaces/ROS/pages/84901929/Container",
                "internal": false,
                "reflection": false,
                "title": "Container - RouterOS - MikroTik Documentation",
                "clicks": 2
            },
            {
                "url": "https://github.com/ImMALWARE/bash-warp-generator",
                "internal": false,
                "reflection": false,
                "title": "GitHub - ImMALWARE/bash-warp-generator: Генератор конфига Cloudflare WARP для AmneziaWG",
                "clicks": 2
            },
            {
                "url": "https://raw.githubusercontent.com/runetfreedom/russia-blocked-geoip/release/geoip.dat",
                "internal": false,
                "reflection": false,
                "clicks": 1
            },
            {
                "url": "https://winscp.net/eng/download.php",
                "internal": false,
                "reflection": false,
                "title": "WinSCP :: Official Site :: Download",
                "clicks": 1
            },
            {
                "url": "https://ntc.party/t/mikrotik-vless-reality/8708/77",
                "internal": true,
                "reflection": true,
                "title": "Mikrotik + VLESS + REALITY",
                "clicks": 6
            },
            {
                "url": "https://ntc.party/t/mikotik-hap-ac2-vpn/13646/10",
                "internal": true,
                "reflection": true,
                "title": "Mikotik hap ac2 vpn",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
            {
                "id": 2,
                "count": 1
            }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/1",
        "can_translate": false
    },
    {
        "id": 71711,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2024-12-09T18:13:21.553Z",
        "cooked": "<details>\n<summary>\nbuild.sh</summary>\n<pre><code class=\"lang-auto\">#!/bin/bash\nDISTR_XRAY=\"https://github.com/XTLS/Xray-core/releases/download/v24.10.31/Xray-linux-arm64-v8a.zip\"\nDISTR_BDPI=\"https://github.com/hufrea/byedpi/releases/download/v0.15/byedpi-15-aarch64.tar.gz\"\nDISTR_WIREPROXY_AWG=\"https://github.com/artem-russkikh/wireproxy-awg/releases/latest/download/wireproxy_linux_arm64.tar.gz\"\nGEOSITE_RU_BLOCKED=\"https://github.com/runetfreedom/russia-blocked-geosite/releases/latest/download/geosite-ru-only.dat\"\nGEOIP_RU=\"https://raw.githubusercontent.com/runetfreedom/russia-v2ray-rules-dat/release/geoip.dat\"\n#-------------------------------------------------\ndownload() {\n\tif [ $download_enabled -eq 1 ]; then\n\t\trm -rf temp/*\n\t\twget ${1} -O temp/${2}\n\t\tcase `echo ${2} | awk -F. '{print $NF}'` in \n\t\t\t\"zip\")\n\t\t\t\tunzip temp/${2} -d temp/ ;;\n\t\t\t*)\n\t\t\t\ttar -xf temp/${2} -C temp/ ;;\n\t\tesac\n\tfi\n}\nprecheck() {\n\techo \"1. Checking installation...\"\n\tif [ ! `which docker` ]; then\n\t\techo \"Install docker first\"\n\t\texit 0;\n\tfi\n\tif [ ! `which wget` ]; then\n\t\techo \"Install wget first\"\n\t\texit 0;\n\tfi\n\tif [ ! `which unzip` ]; then\n\t\techo \"Install unzip first\"\n\t\texit 0;\n\tfi\n\t\n\trm -rf temp prepare\n\tmkdir -p temp\n\tmkdir -p prepare/opt/xray-core/data\n\tmkdir -p prepare/opt/config/\n\tmkdir -p prepare/usr/share\n\techo \"Installation OK\"\n\tdownload_enabled=1\n}\n#--------------------\nxray_baseconf_gen() {\ncat &gt; prepare/opt/xray-core/00_base.json &lt;&lt; EOF\n{\n  \"log\": \n  {\n    \"access\": \"none\",\n    \"dnsLog\": false,\n    \"loglevel\": \"warning\"\n  },\n  \"routing\": \n  {\n    \"domainStrategy\": \"IPIfNonMatch\",\n    \"rules\": [\n      {\n        \"type\": \"field\",\n        \"ip\": [\n          \"geoip:private\",\n          \"192.168.88.0/24\"\n        ],\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"domain\": \"geosite:ru-available-only-inside\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"protocol\": \"bittorrent\",\n        \"outboundTag\": \"direct\"\n      },\n      {\n        \"type\": \"field\",\n        \"ip\": \"geoip:ru\",\n        \"outboundTag\": \"bdpi\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-bdpi:3124\",\n        \"outboundTag\": \"bdpi\"\n      },\n      {\n        \"type\": \"field\",\n        \"inboundTag\": \"inbound-wg-awg:3125\",\n        \"outboundTag\": \"awg\"\n      }\n    ]\n  },\n  \"inbounds\": \n  [\n    {\n      \"listen\": \"\\$MYIP\",\n      \"port\": 3124,\n      \"protocol\": \"wireguard\",\n      \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"\\$WG_BDPIIN_PRIVKEY\",\n        \"peers\": [\n          {\n            \"publicKey\": \"\\$WG_BDPIIN_PUBKEY\",\n            \"allowedIPs\": [\n              \"0.0.0.0/0\",\n              \"::/0\"\n            ],\n            \"keepAlive\": 0\n          }\n        ],\n        \"noKernelTun\": true\n      },\n      \"streamSettings\": null,\n      \"tag\": \"inbound-wg-bdpi:3124\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": \"fakedns+others\",\n        \"metadataOnly\": false\n      }\n    },\n    {\n      \"listen\": \"\\$MYIP\",\n      \"port\": 3125,\n      \"protocol\": \"wireguard\",\n      \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"\\$WG_WPIN_PRIVKEY\",\n        \"peers\": [\n          {\n            \"publicKey\": \"\\$WG_WPIN_PUBKEY\",\n            \"allowedIPs\": [\n              \"0.0.0.0/0\",\n              \"::/0\"\n            ],\n            \"keepAlive\": 0\n          }\n        ],\n        \"noKernelTun\": true\n      },\n      \"streamSettings\": null,\n      \"tag\": \"inbound-wg-awg:3125\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": \"fakedns+others\",\n        \"metadataOnly\": false\n      }\n    }\n  ],\n  \"outbounds\": \n  [\n    {\n      \"tag\": \"direct\",\n      \"protocol\": \"freedom\",\n      \"settings\": {\n        \"domainStrategy\": \"AsIs\"\n      }\n    },\n    {\n      \"tag\": \"blocked\",\n      \"protocol\": \"blackhole\",\n      \"settings\": {}\n    },\n    {\n      \"tag\": \"awg\",\n      \"protocol\": \"socks\",\n      \"settings\": {\n        \"servers\": [\n          {\n            \"address\": \"\\$MYIP\",\n            \"port\": \\$WP_PORT\n          }\n        ]\n      }\n    },\n    {\n      \"tag\": \"bdpi\",\n      \"protocol\": \"socks\",\n      \"settings\": {\n        \"servers\": [\n          {\n            \"address\": \"\\$MYIP\",\n            \"port\": \\$BDPI_PORT\n          }\n        ]\n      }\n    }\n  ]\n}\nEOF\n}\nxray_prepare() {\n\techo \"2. Preparing xray-core\"\n\tdownload $DISTR_XRAY xray.zip\n\tmv temp/xray prepare/opt/xray-core/\n\tchmod +x prepare/opt/xray-core/xray\n\twget $GEOSITE_RU_BLOCKED -O prepare/opt/xray-core/data/geosite.dat\n\twget $GEOIP_RU -O prepare/opt/xray-core/data/geoip.dat\n\t\n\twget \n\tln -s /opt/xray-core/data prepare/usr/share/xray\n\tif [ -e prepare/opt/xray-core/xray ]; then\n\t\techo \"xray-core OK\"\n\telse\n\t\techo \"Unable to prepare xray-core. Exiting\"\n\t\texit 0\n\tfi\n}\n#--------------------\nbdpi_prepare(){\n\techo \"3. Preparing byedpi\"\n\tdownload $DISTR_BDPI bdpi.tar.gz\n\ttar -xf temp/bdpi.tar.gz -C temp/\n\tmv temp/ciadpi-aarch64 prepare/opt/ciadpi\n\tchmod +x prepare/opt/ciadpi\n\tif [ -e prepare/opt/ciadpi ]; then\n\t\techo \"byedpi OK\"\n\telse\n\t\techo \"Unable to prepare byedpi. Exiting\"\n\t\texit 0\n\tfi\n}\n#--------------------\nawg_prepare(){\n\techo \"4. Preparing AWG\"\n\tdownload $DISTR_WIREPROXY_AWG awg.tar.gz\n\tmv temp/wireproxy prepare/opt/\n\tchmod +x prepare/opt/wireproxy\n\tif [ -e prepare/opt/wireproxy ]; then\n\t\techo \"AWG OK\"\n\telse\n\t\techo \"Unable to prepare AWG. Exiting\"\n\t\texit 0\n\tfi\n}\n#--------------------\nentrypoint_gen() {\ncat &gt; prepare/opt/entrypoint.sh &lt;&lt; EOF2\n#!/bin/busybox sh\n#setting envs\nexport MYIP=\\$(ip -4 addr show dev eth0 | grep inet | awk -F' ' '{split(\\$2, a, \"/\");print a[1]}') #because busybox needs some hacks\nif hostname | grep -iq mikrotik; then MYHOST=\\$MYIP; else MYHOST=\\$(hostname); fi #if container hostname is not set, it will be router name\nif [ ! \"\\$WP_PORT\" ]; then export WP_PORT=9998; fi #setting wireproxy port\nif [ ! \"\\$BDPI_PORT\" ]; then export BDPI_PORT=9999; fi #setting byedpi port\nif [ ! \"\\$WG_WPIN_PRIVKEY\" ]; then echo \"\\$MYHOST: WG_WPIN_PRIVKEY is not set. Exiting\"; exit 0 ; fi\nif [ ! \"\\$WG_WPIN_PUBKEY\" ]; then echo \"\\$MYHOST: WG_WPIN_PUBKEY is not set. Exiting\"; exit 0 ; fi\nif [ ! \"\\$WG_BDPIIN_PRIVKEY\" ]; then echo \"\\$MYHOST: WG_BDPIIN_PRIVKEY is not set. Exiting\"; exit 0 ; fi\nif [ ! \"\\$WG_BDPIIN_PUBKEY\" ]; then echo \"\\$MYHOST: WG_BDPIIN_PUBKEY is not set. Exiting\"; exit 0 ; fi\n\n#generating xray base conf from template\nmkfifo /opt/config/00_base_dyn.json\neval \"cat &lt;&lt;EOF\n\\$(cat /opt/xray-core/00_base.json)\nEOF\n\" &gt; /opt/config/00_base_dyn.json &amp;\n#generating config for wireproxy with socks block\nmkfifo /opt/awg.conf\neval \"cat &lt;&lt;EOF\n\\$(find /opt/config/ -maxdepth 1 -type f -name \"*.conf\" -exec cat {} \\; -quit)\n[Socks5]\nBindAddress = \\$MYIP:\\$WP_PORT\nEOF\n\" &gt; /opt/awg.conf &amp;\n#starting all processes\nlog() { while read line; do echo \"\\$MYHOST: \\${1}: \\${line}\"; done; }\nif [ ! \"\\$LOGFILTER\" ]; then #wireproxy produce too much logs. We can filter them\n\techo \"Filеring logs for wireproxy disabled\"\n\t/opt/wireproxy -c /opt/awg.conf 2&gt;&amp;1 | log \"WireproxyAWG\" &amp;\nelse\n\t/opt/wireproxy -c /opt/awg.conf 2&gt;&amp;1 | grep -Eiv \"\\$LOGFILTER\" | log \"WireproxyAWG\" &amp;\nfi\n/opt/ciadpi --ip \\$MYIP --port \\$BDPI_PORT \\$BDPI_ARGS 2&gt;&amp;1 | log \"ByeDpi\" &amp;\n/opt/xray-core/xray run -confdir /opt/config 2&gt;&amp;1 | log \"Xray-core\"\nEOF2\n}\ndockerbuild () {\n\techo \"5. Building docker image\"\n\techo 'FROM --platform=linux/arm64 busybox:stable\nWORKDIR /opt/xray-core/data\nCOPY ./prepare/ /\nENTRYPOINT [\"/opt/entrypoint.sh\"]\n' &gt; Dockerfile\n\tchmod +x prepare/opt/entrypoint.sh\n\tdocker build --rm -t xray_full_mikro .\n\tdocker save xray_full_mikro:latest -o xray_full_mikro.tar\n\tdocker image rm xray_full_mikro:latest\n}\nprecheck\nxray_prepare\nxray_baseconf_gen\nbdpi_prepare\nawg_prepare\nentrypoint_gen\ndockerbuild\n</code></pre>\n</details>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2024-12-09T18:13:21.553Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 106,
        "readers_count": 105,
        "score": 46.2,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
            {
                "id": 2,
                "count": 1
            }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/2",
        "can_translate": false
    },
    {
        "id": 71799,
        "name": null,
        "username": "meeeeeh",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/73ab20/{size}.png",
        "created_at": "2024-12-10T06:25:52.589Z",
        "cooked": "<p>PSA:</p>\n<ol>\n<li>копия исходных двух постов на <a href=\"https://web.archive.org/web/20241210054311/https://ntc.party/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694\" rel=\"noopener nofollow ugc\">webarchive</a></li>\n<li>копия архива с контейнером на <a href=\"https://web.archive.org/save/https://s1124sas.storage.yandex.net/rdisk/d98e65f25da6a879f38143db4e01320b4e1a1681ad003f4954e844bb34b67187/67581521/Ocsi00WMP5iQj3mcIXJu9AWdAGy3gLs0MyGZw0grywTxGHycpxsCTT2VlSBSHt2e_Xg4lVb0tRnd5rwjWEvuzw==?uid=0&amp;filename=xray_full_mikro.tar&amp;disposition=attachment&amp;hash=Oru68eS0aEd/cwVqHKQB%2BPMqy7S2qqu7grUjJmYmNhXajD276nWcRYafEVKKyvZRq/J6bpmRyOJonT3VoXnDag%3D%3D&amp;limit=0&amp;content_type=application%2Fx-tar&amp;owner_uid=54217094&amp;fsize=59025920&amp;hid=61fa1fec54d6d3bffb7983f6bcfb2f63&amp;media_type=compressed&amp;tknv=v2&amp;ts=628e7c866ca40&amp;s=04e59803476eeca28903214e0ba144281149aac1b6fd9d5dd38c0870058721bd&amp;pb=U2FsdGVkX18uvPunww_8scxlF3xzdQR29t3V8etP-8VKOclDuQwcozB8uv7e6PufHQlAhIvws-QSRUmYiFT5ck1LLqx6XkYDdtg0WcmOoeA\" rel=\"noopener nofollow ugc\">webarchive</a> и <a href=\"https://pixeldrain.com/u/9ejt6ciG\" rel=\"noopener nofollow ugc\">pixeldrain</a></li>\n</ol>\n<p>SHA512: 7f02fa6fe6949441d5e52267453809b5704e6394824d09dc59ee45e5874477cd22569b5bab41272b77edec618f887240a8827deaea8f207ea849ddd55137e1bf, сверяйте с оригиналом самостоятельно.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2024-12-10T06:25:52.589Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 101,
        "readers_count": 100,
        "score": 25.2,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://web.archive.org/web/20241210054311/https://ntc.party/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694",
                "internal": false,
                "reflection": false,
                "title": "Контейнер с VPN для Mikrotik, претендующий на универсальность - Manuals and How-Tos - NTC",
                "clicks": 7
            },
            {
                "url": "https://web.archive.org/save/https://s1124sas.storage.yandex.net/rdisk/d98e65f25da6a879f38143db4e01320b4e1a1681ad003f4954e844bb34b67187/67581521/Ocsi00WMP5iQj3mcIXJu9AWdAGy3gLs0MyGZw0grywTxGHycpxsCTT2VlSBSHt2e_Xg4lVb0tRnd5rwjWEvuzw==?uid=0&filename=xray_full_mikro.tar&disposition=attachment&hash=Oru68eS0aEd/cwVqHKQB%2BPMqy7S2qqu7grUjJmYmNhXajD276nWcRYafEVKKyvZRq/J6bpmRyOJonT3VoXnDag%3D%3D&limit=0&content_type=application%2Fx-tar&owner_uid=54217094&fsize=59025920&hid=61fa1fec54d6d3bffb7983f6bcfb2",
                "internal": false,
                "reflection": false,
                "clicks": 7
            },
            {
                "url": "https://pixeldrain.com/u/9ejt6ciG",
                "internal": false,
                "reflection": false,
                "title": "xray_full_mikro.tar ~ pixeldrain",
                "clicks": 7
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 3282,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/3",
        "can_translate": false
    },
    {
        "id": 72215,
        "name": "",
        "username": "MasterYoba",
        "avatar_template": "/user_avatar/ntc.party/masteryoba/{size}/6182_2.png",
        "created_at": "2024-12-12T07:15:34.168Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"s.v.d\" data-post=\"1\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/s.v.d/48/6091_2.png\" class=\"avatar\"> s.v.d:</div>\n<blockquote>\n<p>Конкретно geosite.dat был взят в варианте <code>geosite:ru-blocked</code>, т.е. заблокированные домены + домены, доступные только из РФ</p>\n</blockquote>\n</aside>\n<p>Из моего опыта тестов данный файл слишком урезан, встретились заблокированные сайты, которые там отсутствуют. <code>geosite:ru-blocked-all</code> в этом плане лучше, там я не обнаружил упущений.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2024-12-12T07:15:34.168Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 87,
        "readers_count": 86,
        "score": 22.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4361,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/4",
        "can_translate": false
    },
    {
        "id": 72250,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2024-12-12T09:20:19.377Z",
        "cooked": "<p>Ну, тут уже по желанию. Нужную версию можно подкинуть по FTP по пути /usb1/xray_full/store/opt/xray-core/data<br>\nЯ просто geosite вообще не использую, у меня маршрутизация на третьем слое, в таком варианте xray ни про какие хосты не знает(по крайней мере у меня это не работает, видимо sni сниффать он не умеет)</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2024-12-12T09:20:19.377Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 78,
        "readers_count": 77,
        "score": 40.6,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "MasterYoba",
            "name": "",
            "avatar_template": "/user_avatar/ntc.party/masteryoba/{size}/6182_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/5",
        "can_translate": false
    },
    {
        "id": 77482,
        "name": "",
        "username": "Azshov",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/91b2a8/{size}.png",
        "created_at": "2025-01-04T20:04:38.819Z",
        "cooked": "<p>Здравствуйте, а не планируете сделать инструкцию как делать всё это добро с малинкой и hap ac2?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-04T20:04:38.819Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 55,
        "readers_count": 54,
        "score": 31.0,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9125,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/6",
        "can_translate": false
    },
    {
        "id": 77501,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-04T20:49:04.999Z",
        "cooked": "<p>Там практически 1в1, просто вместо ip контейнера будет ip малинки. Т.к. мы работаем на прикладном уровне ( с конкретными сервисами на конкретных портах) - контейнеру абсолютно пофиг, где жить. Единстаенное - в докере придётся прокинуть соотв. порты и потом через iptables наладить трансляцию с внешнего интерфейса, но это чисто маны по докеру помогут</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-04T20:49:04.999Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 55,
        "readers_count": 54,
        "score": 21.0,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "Azshov",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/91b2a8/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/7",
        "can_translate": false
    },
    {
        "id": 79791,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-16T07:29:45.970Z",
        "cooked": "<p>В последней сборке xray-core поправили багу с wireguard маршрутизацией, так что теперь для сборки контейнера можно юзать latest<br>\nСоотв. в сборочном скрипте просто поправить</p>\n<pre><code class=\"lang-auto\">DISTR_XRAY=\"https://github.com/XTLS/Xray-core/releases/download/v24.10.31/Xray-linux-arm64-v8a.zip\"\n</code></pre>\n<p>на</p>\n<pre><code class=\"lang-auto\">DISTR_XRAY=\"https://github.com/XTLS/Xray-core/releases/latest/download/Xray-linux-arm64-v8a.zip\"\n</code></pre>\n<p>Отредактировать сообщение уже не могу</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-16T07:29:45.970Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 34,
        "readers_count": 33,
        "score": 11.6,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/8",
        "can_translate": false
    },
    {
        "id": 80064,
        "name": null,
        "username": "shiro-kun",
        "avatar_template": "/user_avatar/ntc.party/shiro-kun/{size}/15057_2.png",
        "created_at": "2025-01-17T21:03:46.662Z",
        "cooked": "<p>По инструкции собрал себе под arm32 (RB3011UiAS) контейнер и радуюсь что работает.</p>\n<aside class=\"quote no-group\" data-username=\"s.v.d\" data-post=\"8\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/s.v.d/48/6091_2.png\" class=\"avatar\"> s.v.d:</div>\n<blockquote>\n<p>В последней сборке xray-core поправили багу с wireguard маршрутизацией, так что теперь для сборки контейнера можно юзать latest</p>\n</blockquote>\n</aside>\n<p>Собирал xray из последней сборки (v24.12.31) и понял что исправив один баг, добавили новый - контейнер крашится спустя некоторое время работы. Так что вернулся на v24.10.31.</p>\n<p>Вот только что через bdpi, что через awg не ходит websocket у discord - кто может знает как это лечить?</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-17T21:10:18.810Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 29,
        "readers_count": 28,
        "score": 10.6,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9332,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/9",
        "can_translate": false
    },
    {
        "id": 80083,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-17T22:07:08.898Z",
        "cooked": "<p>У меня и 24.10.31 через несколько дней мог начать странно себя вести. Добавил ежедневный авторестарт в 5 утра)</p>\n<pre><code class=\"lang-auto\">/container stop  [/container/find comment=\"Xray-core\"];\n:while ([/container/find comment=\"Xray-core\" status=stopping]) do={\n\t:delay 500ms\n}\n/container start  [/container/find comment=\"Xray-core\"];\n</code></pre>\n<p>И в шеддулер.</p>\n<aside class=\"quote no-group\" data-username=\"shiro-kun\" data-post=\"9\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/shiro-kun/48/15057_2.png\" class=\"avatar\"> shiro-kun:</div>\n<blockquote>\n<p>websocket у discord</p>\n</blockquote>\n</aside>\n<p>Вроде коннектится судя по логу в консоли. Может не все хосты завёрнуты? У меня пишет что подключается на wss://gateway.discord.gg</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-17T22:07:08.898Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 28,
        "readers_count": 27,
        "score": 40.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/10",
        "can_translate": false
    },
    {
        "id": 80109,
        "name": null,
        "username": "shiro-kun",
        "avatar_template": "/user_avatar/ntc.party/shiro-kun/{size}/15057_2.png",
        "created_at": "2025-01-18T09:26:42.126Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"s.v.d\" data-post=\"10\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/s.v.d/48/6091_2.png\" class=\"avatar\"> s.v.d:</div>\n<blockquote>\n<p>Может не все хосты завёрнуты?</p>\n</blockquote>\n</aside>\n<p>Я заворачивал хосты через Address Lists и через DNS Static FWD записи и указал вроде все.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/fa78fcf72a4f62a770cdaab7157edb5dde710ed2.png\" data-download-href=\"https://ntc.party/uploads/default/fa78fcf72a4f62a770cdaab7157edb5dde710ed2\" title=\"image\"><img src=\"контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/fa78fcf72a4f62a770cdaab7157edb5dde710ed2_2_690x298.png\" alt=\"image\" data-base62-sha1=\"zJMAb3hlWEDYLc7YklDtfcP1Eu6\" width=\"690\" height=\"298\" srcset=\"контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/fa78fcf72a4f62a770cdaab7157edb5dde710ed2_2_690x298.png, контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/fa78fcf72a4f62a770cdaab7157edb5dde710ed2.png 1.5x, контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/fa78fcf72a4f62a770cdaab7157edb5dde710ed2.png 2x\" data-dominant-color=\"F0F3F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">757×328 46.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nНо эффекта для WebRTC не даёт - что через bdpi, что через awg. (возможно я что-то недонастроил и пакеты утекают на ТСПУ провайдера)<br>\nЧерез какой лог вы наблюдаете куда подключаются клиенты xray и как его вывести на микроте?</p>\n<p>У меня как то странно ведёт себя добавление IPv4-адресов через dns в address lists (на версии 7.16) - добавляется и через некоторое время исчезает, хотя я кэш dns не очищаю.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-18T09:29:38.601Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 10.0,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9332,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/11",
        "can_translate": false
    },
    {
        "id": 80123,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-18T10:20:10.055Z",
        "cooked": "<p>Статистику подключений можно смотреть, начтроив метрики, будут доступны на соотв. порту</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://xtls.github.io/en/config/metrics.html\">\n  <header class=\"source\">\n      <img src=\"контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/d9bcf147606ea7c8d4f3a06afd01c42c4a3672c1_2_690x215.png\" class=\"site-icon\" data-dominant-color=\"754544\" width=\"690\" height=\"215\">\n\n      <a href=\"https://xtls.github.io/en/config/metrics.html\" target=\"_blank\" rel=\"noopener nofollow ugc\">xtls.github.io</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    \n\n<h3><a href=\"https://xtls.github.io/en/config/metrics.html\" target=\"_blank\" rel=\"noopener nofollow ugc\">Metrics | Project X</a></h3>\n\n  <p>Official document of Xray</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<p>\nА зачем вы используете регулярки в вашем конфиге? Там же есть галка match subdomain, её должно быть достаточно из того что я вижу.<br>\nНу и форваод лично у меня на локалхост, таким макаром оно совместимо с DOH.<br>\nВ листы записи добавляются с определённым времением жизни, ЕМНИП по умолчанию 10 минут. Его можно расширить, сетится через терминал. Однако следует помнить, что если потом эту запись ручками дропгуть, то потом на время заданного времени жизни для того же листа заново она уже не создастся</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-18T10:20:10.055Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 28,
        "readers_count": 27,
        "score": 30.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://xtls.github.io/en/config/metrics.html",
                "internal": false,
                "reflection": false,
                "title": "Metrics | Project X",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "shiro-kun",
            "name": null,
            "avatar_template": "/user_avatar/ntc.party/shiro-kun/{size}/15057_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/12",
        "can_translate": false
    },
    {
        "id": 80211,
        "name": "",
        "username": "kermitthefrog",
        "avatar_template": "/letter_avatar_proxy/v4/letter/k/4bbf92/{size}.png",
        "created_at": "2025-01-19T13:52:11.106Z",
        "cooked": "<p>Крутая инструкция, спасибо большое, по wg inbound как-то совсем мало инфы, даже ссылка на пример в репе xray-core мертва.<br>\nПодскажи, на какой версии routeros мануал проверен? Не сталкивался ли ты с ошибкой в логе xray <code>Received packet with invalid mac1</code>?</p>\n<p>Я пытался настраивать похожую схему на простом контейнере с xray-core, но не вышло установить wg соединение, ros 7.17:</p>\n<details>\n<summary>\nКонфиги и логи</summary>\n<p>ros:</p>\n<pre><code class=\"lang-auto\">/interface wireguard\nadd listen-port=31266 mtu=1420 name=wg-xray-in private-key=\"$PRIVATE_KEY\"\n/interface wireguard peers\nadd allowed-address=0.0.0.0/0,::/0 endpoint-address=10.6.0.3 endpoint-port=3126 interface=wg-xray-in name=wg-xray-in-peer public-key=\"$PUBLIC_KEY\"\n... ip addr, firewall, всё на месте, коннект присутствует\n</code></pre>\n<p>xray inbound:</p>\n<pre><code class=\"lang-auto\">\"inbounds\": [{\n    \"port\": 3126,\n    \"protocol\": \"wireguard\",\n    \"settings\": {\n        \"mtu\": 1420,\n        \"secretKey\": \"$PRIVATE_KEY\",\n        \"peers\": [{\n        \"publicKey\": \"PUBLIC_KEY\",\n            \"allowedIPs\": [\"0.0.0.0/0\",\"::/0\"],\n            \"keepAlive\": 0\n        }],\n        \"noKernelTun\": true,\n        \"tag\": \"inbound-wg-3126\",\n        \"streamSettings\": null,\n        \"sniffing\": {\n            \"enabled\": false,\n            \"metadataOnly\": false,\n            \"routeOnly\": false\n        }\n    }\n}]\n</code></pre>\n<p>Лог xray (пробовал разные версии):</p>\n<pre><code class=\"lang-auto\">[Debug] peer(AFTUE280A6xFWE) - UAPI: Created\n[Debug] peer(AFTUE280A6xFWE) - UAPI: Adding allowedip\n[Debug] peer(AFTUE280A6xFWE) - UAPI: Adding allowedip\n[Debug] peer(AFTUE280A6xFWE) - Starting\n[Debug] peer(AFTUE280A6xFWE) - Routine: sequential sender - started\n[Debug] peer(AFTUE280A6xFWE) - Routine: sequential receiver - started\n[Debug] Interface state was Down, requested Up, now Up\n[Info] transport/internet/udp: listening UDP on 10.6.0.3:3126\n[Warning] core: Xray 25.1.1 started\n</code></pre>\n<p>и далее при попытке установки соединения повторяется ошибка:</p>\n<pre><code class=\"lang-auto\">[Debug] Received packet with invalid mac1\n</code></pre>\n<p>В гугле кроме кода на гитхабе особо ничего нет, похоже на неправильную настройку клиента. Но где я там ошибся?</p>\n</details>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-19T14:00:31.094Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 10.0,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9349,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/13",
        "can_translate": false
    },
    {
        "id": 80219,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-19T14:30:27.338Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"kermitthefrog\" data-post=\"13\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/k/4bbf92/48.png\" class=\"avatar\"> kermitthefrog:</div>\n<blockquote>\n<p>по wg inbound как-то совсем мало инфы</p>\n</blockquote>\n</aside>\n<p>Они на моей памяти его уже второй раз ломают. Точнее маршрутизацию для него. Веротяно, связано с этим)</p>\n<aside class=\"quote no-group\" data-username=\"kermitthefrog\" data-post=\"13\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/k/4bbf92/48.png\" class=\"avatar\"> kermitthefrog:</div>\n<blockquote>\n<p>даже ссылка на пример в репе xray-core мертва</p>\n</blockquote>\n</aside>\n<p>Ну, в их вике пример есть</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://xtls.github.io/en/config/inbounds/wireguard.html\">\n  <header class=\"source\">\n      <img src=\"контейнер-с-vpn-для-mikrotik-претендующий-на-универсальность/d9bcf147606ea7c8d4f3a06afd01c42c4a3672c1_2_690x215.png\" class=\"site-icon\" data-dominant-color=\"754544\" width=\"690\" height=\"215\">\n\n      <a href=\"https://xtls.github.io/en/config/inbounds/wireguard.html\" target=\"_blank\" rel=\"noopener nofollow ugc\">xtls.github.io</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    \n\n<h3><a href=\"https://xtls.github.io/en/config/inbounds/wireguard.html\" target=\"_blank\" rel=\"noopener nofollow ugc\">Wireguard | Project X</a></h3>\n\n  <p>Official document of Xray</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<p>\nПравда он с ошибкой, kernel_mode=true в настоящий момент этот параметр вроде бы вообще выпилили и заменили на “noKernelTun”, который по дефолту true(врочем, лучше перепроверить, я не все их ченджлоги читаю)</p>\n<aside class=\"quote no-group\" data-username=\"kermitthefrog\" data-post=\"13\" data-topic=\"13694\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/k/4bbf92/48.png\" class=\"avatar\"> kermitthefrog:</div>\n<blockquote>\n<p>ros 7.17:</p>\n</blockquote>\n</aside>\n<p>Я всё проверял и настраивал на ros 7.16(текущая стабильная)</p>\n<pre><code class=\"lang-auto\">Received packet with invalid mac1\n</code></pre>\n<p>Не встречал такой ошибки, а ещё вижу что текущая релизная - это 24.12.31. 25.1.1 - это пререлиз и я аааще не исключаю что они там снова что-то заломали</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-19T14:30:27.338Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 26,
        "readers_count": 25,
        "score": 20.0,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://xtls.github.io/en/config/inbounds/wireguard.html",
                "internal": false,
                "reflection": false,
                "title": "Wireguard | Project X",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/14",
        "can_translate": false
    },
    {
        "id": 80653,
        "name": "wiktorbgu",
        "username": "wiktorbgu",
        "avatar_template": "/user_avatar/ntc.party/wiktorbgu/{size}/7227_2.png",
        "created_at": "2025-01-21T17:03:15.122Z",
        "cooked": "<p>Я не пойму в конфиг можно напрямую пробрасывать env переменные или нет?<br>\nэто я по примеру этого</p>\n<pre><code class=\"lang-auto\">\"secretKey\": \"$WG_WPIN_PRIVKEY\",\n</code></pre>\n<p>пробовал что-то подставить у себя в конфиг vless и не пошло, в документации такого тоже не нашел</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-21T17:03:15.122Z",
        "reply_count": 1,
        "reply_to_post_number": 14,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 24,
        "readers_count": 23,
        "score": 19.6,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "wiktorbgu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "s.v.d",
            "name": "00svd00",
            "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5040,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/15",
        "can_translate": false
    },
    {
        "id": 80657,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-21T17:19:25.818Z",
        "cooked": "<p>Нет, xray это не понимает. Поэтому я в entrypoint.sh перечитываю конфигу и eval-ю, заменяя переменные на их значения, после чего скармливаю xray-ю через named pipe. Гляньте сборочный скрипт, там ближе к концу нужный кусок</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-21T17:19:25.818Z",
        "reply_count": 1,
        "reply_to_post_number": 15,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 9.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "wiktorbgu",
            "name": "wiktorbgu",
            "avatar_template": "/user_avatar/ntc.party/wiktorbgu/{size}/7227_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/16",
        "can_translate": false
    },
    {
        "id": 80660,
        "name": "wiktorbgu",
        "username": "wiktorbgu",
        "avatar_template": "/user_avatar/ntc.party/wiktorbgu/{size}/7227_2.png",
        "created_at": "2025-01-21T17:28:01.836Z",
        "cooked": "<p>аа, я так и думал, вчера конфиг сборки смотрел да думаю а вдруг) хотя практика сразу показала что нет))<br>\nпросто не понял что это entrypoint.sh уже в контейнере заменяет что-то, а не при сборке</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-21T17:28:01.836Z",
        "reply_count": 1,
        "reply_to_post_number": 16,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 9.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "wiktorbgu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "s.v.d",
            "name": "00svd00",
            "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5040,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/17",
        "can_translate": false
    },
    {
        "id": 80662,
        "name": "00svd00",
        "username": "s.v.d",
        "avatar_template": "/user_avatar/ntc.party/s.v.d/{size}/6091_2.png",
        "created_at": "2025-01-21T17:31:02.260Z",
        "cooked": "<p>А толку? При сборке не интересно - эдак для любых ченджей придётся контейнер пересобирать. Если бы некротики имели автоматом пулить образ из реджистри - тогда оправдано и может даже предпочтительно. Собрал трубу и деплой не открывая винбокса)<br>\nНо пока имеем что имеем</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2025-01-21T17:31:02.260Z",
        "reply_count": 0,
        "reply_to_post_number": 17,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 23,
        "readers_count": 22,
        "score": 9.4,
        "yours": false,
        "topic_id": 13694,
        "topic_slug": "%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C",
        "display_username": "00svd00",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "wiktorbgu",
            "name": "wiktorbgu",
            "avatar_template": "/user_avatar/ntc.party/wiktorbgu/{size}/7227_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4291,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80-%D1%81-vpn-%D0%B4%D0%BB%D1%8F-mikrotik-%D0%BF%D1%80%D0%B5%D1%82%D0%B5%D0%BD%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BD%D0%B0-%D1%83%D0%BD%D0%B8%D0%B2%D0%B5%D1%80%D1%81%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C/13694/18",
        "can_translate": false
    }
]