
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>про-блокировку-telegram-в-республике-башкортостан-18012024</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Angry_Agent(Angry Agent)</td><td><p>Извините, что поздно, сейчас конечно блокировки там уже нет, но 18 числа мой друг успел сделать трассировки до IP-адресов Telegram’a, и там есть что показать интересное. Диагностика выполнялась с провайдера уфанет.</p>
<p>Трассировка по ICMP до <a href="http://web.telegram.org" rel="noopener nofollow ugc">web.telegram.org</a> (Сам ICMP у Telegram’a конечно отключён):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/fb96a356271bd14e1db83ca07a6de778af0b8745.png" data-download-href="https://ntc.party/uploads/default/fb96a356271bd14e1db83ca07a6de778af0b8745" title="image-2"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/fb96a356271bd14e1db83ca07a6de778af0b8745.png" alt="image-2" data-base62-sha1="zTEAiYgMH9qGLyMAOAwrwZQDust" width="511" height="500" data-dominant-color="353941"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image-2</span><span class="informations">589×576 8.13 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Трассировка по ICMP до заблокированного IP-адреса на ТСПУ:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/65640aa91c6ffaa0759a9ba85fdbfe463017ad94.png" data-download-href="https://ntc.party/uploads/default/65640aa91c6ffaa0759a9ba85fdbfe463017ad94" title="image-3"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/65640aa91c6ffaa0759a9ba85fdbfe463017ad94.png" alt="image-3" data-base62-sha1="esWyTck1BzDcHSHRml9QctmC0cs" width="610" height="500" data-dominant-color="33373E"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image-3</span><span class="informations">790×647 33.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
ТСПУ находится между 2 и 3 хопом.</p>
<p>И теперь самое интересное, трассировка по TCP, отправка одного SYN флага до dst порта 443 (<code>mtr -L 43212 -T -P 443 149.154.167.99</code>):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/6c6d3574ae28c789fe045f14ef8cf31e3fa42cce.png" data-download-href="https://ntc.party/uploads/default/6c6d3574ae28c789fe045f14ef8cf31e3fa42cce" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/6c6d3574ae28c789fe045f14ef8cf31e3fa42cce.png" alt="изображение" data-base62-sha1="ftbxPjKrJ3Oi6bKXpWIWZ7iMxOK" width="690" height="213" data-dominant-color="111111"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1096×339 8.11 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
SYN пакеты просто теряются, потеря составляет 90%, возникает ощущение, что Telegram просто замедлили до невозможности использования.</p>
<p>Снова трассировка по ICMP, но уже с линуксовой утилиты mtr (<code>mtr 149.154.167.99</code>):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/8d3e686de14d6913ca6dff9acfb76b3564f3f707.png" data-download-href="https://ntc.party/uploads/default/8d3e686de14d6913ca6dff9acfb76b3564f3f707" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/8d3e686de14d6913ca6dff9acfb76b3564f3f707.png" alt="изображение" data-base62-sha1="k9v1XQSapaDum8dNw0T2cKoy6dp" width="690" height="284" data-dominant-color="101010"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1107×456 22.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Трассировка SYN пакета до dst порта 80 (<code>mtr -L 43212 -T -P 80 149.154.167.99</code>):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/dd129094ccf26a490a50af0e309f2b88f0fb00ed.png" data-download-href="https://ntc.party/uploads/default/dd129094ccf26a490a50af0e309f2b88f0fb00ed" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/dd129094ccf26a490a50af0e309f2b88f0fb00ed.png" alt="изображение" data-base62-sha1="vxHil50chlU2INp7DwzQv8Av37D" width="690" height="217" data-dominant-color="101010"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1118×353 7.27 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Аналогично есть потери, которые возникают только по TCP.</p>
<p>Установить TCP соединение с сайтом <a href="http://web.telegram.org" rel="noopener nofollow ugc">web.telegram.org</a> можно было, но не с первого раза, периодически могло выбивать таймауты, однако даже установленное TCP соединение точно так же замедляется, если конечно не полностью блокируется, результат curl, соединение просто зависает:<br>
<img src="про-блокировку-telegram-в-республике-башкортостан-18012024/302404d1fa780321cd88e7b04412cfe48516fbb0.png" alt="image-4" data-base62-sha1="6RS5urX342QQErqBvjSBsxiMjqo" width="606" height="228"></p>
<p>Скриншот с десктопного клиента Telegram:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/35a3a8143cf0b0878d04b5ab64a78793497c3f96.jpeg" data-download-href="https://ntc.party/uploads/default/35a3a8143cf0b0878d04b5ab64a78793497c3f96" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/35a3a8143cf0b0878d04b5ab64a78793497c3f96_2_690x443.jpeg" alt="изображение" data-base62-sha1="7EvWbznSH33LmFctEfGAl9CCIU6" width="690" height="443" srcset="про-блокировку-telegram-в-республике-башкортостан-18012024/35a3a8143cf0b0878d04b5ab64a78793497c3f96_2_690x443.jpeg, про-блокировку-telegram-в-республике-башкортостан-18012024/35a3a8143cf0b0878d04b5ab64a78793497c3f96.jpeg 1.5x, про-блокировку-telegram-в-республике-башкортостан-18012024/35a3a8143cf0b0878d04b5ab64a78793497c3f96.jpeg 2x" data-dominant-color="4D276F"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">993×638 89.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Абсолютно ничего не загружается.</p>
<p>Есть люди, которые могут рассказать, как работала блокировка Telegram в 2018 году с технической точки зрения?</p></td><td>2024-01-27T07:44:26.750Z</td></tr><tr><td>anon57137390</td><td><aside class="quote no-group" data-username="Angry_Agent" data-post="1" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/angry_agent/48/4030_2.png" class="avatar"> Angry_Agent:</div>
<blockquote>
<p>блокировка Telegram в 2018</p>
</blockquote>
</aside>
<p>ТСПУ не было. У провайдеров был общий реестр, но блокировать они могли на DPI, прозрачном прокси, маршрутизаторе, (комбинировать). Истории наблюдения были разные.</p>
<aside class="quote no-group" data-username="Angry_Agent" data-post="1" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/angry_agent/48/4030_2.png" class="avatar"> Angry_Agent:</div>
<blockquote>
<p>есть потери, которые возникают только по TCP</p>
</blockquote>
</aside>
<p>Как вы это определили, если ICMP у Telegram’a отключён, а на трассе отвечают только устройства из сети оператора. Разные потери на <code>.12</code> для TCP и ICMP не показатель.</p></td><td>2024-01-27T09:45:34.885Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><aside class="quote no-group" data-username="anon57137390" data-post="3" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="/letter_avatar_proxy/v4/letter/a/258eb7/48.png" class="avatar"> anon57137390:</div>
<blockquote>
<p>Как вы это определили, если ICMP у Telegram’a отключён, а на трассе отвечают только устройства из сети оператора.</p>
</blockquote>
</aside>
<p>По трассировке, по ICMP потерь нет, а по TCP после хопа домашнего роутера они уже есть.</p>
<aside class="quote no-group" data-username="anon57137390" data-post="3" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="/letter_avatar_proxy/v4/letter/a/258eb7/48.png" class="avatar"> anon57137390:</div>
<blockquote>
<p>Разные потери на <code>.12</code> для TCP и ICMP не показатель.</p>
</blockquote>
</aside>
<p>Маршрутизаторы при трассировке UDP/TCP не всегда могут отдавать ICMP TTL Exceeded, зачастую отдают только при трассировке по ICMP.</p></td><td>2024-01-27T09:50:39.570Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><aside class="quote no-group" data-username="anon57137390" data-post="3" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/258eb7/48.png" class="avatar"> anon57137390:</div>
<blockquote>
<p>Разные потери на <code>.12</code> для TCP и ICMP не показатель.</p>
</blockquote>
</aside>
<p><div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/bdc7d6015741cd42668870527350aaa410841247.png" data-download-href="https://ntc.party/uploads/default/bdc7d6015741cd42668870527350aaa410841247" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/bdc7d6015741cd42668870527350aaa410841247.png" alt="изображение" data-base62-sha1="r4So5jI5XKxAG8StWmK2up1QNrF" width="690" height="289" data-dominant-color="181717"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1104×463 17.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>При трассировке по TCP в сторону cloudflare например, потерь не было (<code>mtr -L 43212 -T -P 443 104.21.50.209</code>)</p></td><td>2024-01-27T09:55:01.728Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Из опыта осенних блокировок телеграма на юге РФ, перехватывали SNI, в т.ч. на порту 5220 (<em>не помню точнло номер порта мобильного приложения</em>). На некоторых операторах вроде бы был блок по ip. Но РТК сдавался через zapret или goodbyedpi</p></td><td>2024-01-27T09:59:47.400Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><aside class="quote no-group" data-username="wigeance" data-post="6" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>на порту 5220</p>
</blockquote>
</aside>
<p><a href="https://core.telegram.org/mtproto/transports" class="inline-onebox" rel="noopener nofollow ugc">Transports</a> - написан порт 5222</p>
<aside class="quote no-group" data-username="wigeance" data-post="6" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>перехватывали SNI</p>
</blockquote>
</aside>
<p>В MTProto вроде как нет SNI</p></td><td>2024-01-27T10:05:50.208Z</td></tr><tr><td>anon57137390</td><td><p>И все же имеющиеся трейсы не показывают потерь только по TCP для адреса телеграма, даже если это так. Допустим, дропы 90% пакетов идут до <code>.12</code>, тогда хоп не сможет ответить на 54% или 34% из них. Если после, тогда это просто процент на которые хоп ответил, просто совпало. Возможно дропают и там и сям, но это уже лишняя сущность.</p></td><td>2024-01-27T11:21:17.763Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><p>Лично так по мне, больше похоже на искусственную симуляцию потерь/лагов сети/замедление со стороны ТСПУ на адрес телеграма по TCP, иначе как объяснить что после хопа с ТСПУ идут потери.</p></td><td>2024-01-27T14:22:51.602Z</td></tr><tr><td>anon57137390</td><td><p>Вы делаете выводы по ответу одного маршрутизатора, сравниваете с одной трассировкой до одного заблокированного адреса?</p></td><td>2024-01-27T17:05:23.704Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><p>Потери просто так с воздуха не берутся, особенно если с сетью всё в порядке</p>
<p><code>traceroute -T -p 443 web.telegram.org</code>:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="про-блокировку-telegram-в-республике-башкортостан-18012024/ffacd1dbd5727c1f5943b066b389432a13e19b35.png" data-download-href="https://ntc.party/uploads/default/ffacd1dbd5727c1f5943b066b389432a13e19b35" title="изображение"><img src="про-блокировку-telegram-в-республике-башкортостан-18012024/ffacd1dbd5727c1f5943b066b389432a13e19b35.png" alt="изображение" data-base62-sha1="AtO1djOjkcE1MLPvfOj5vYIzEtD" width="690" height="308" data-dominant-color="111111"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">759×339 13.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-01-27T17:31:31.723Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><aside class="quote no-group" data-username="anon57137390" data-post="11" data-topic="6991" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="/letter_avatar_proxy/v4/letter/a/258eb7/48.png" class="avatar"> anon57137390:</div>
<blockquote>
<p>Вы делаете выводы по ответу одного маршрутизатора, сравниваете с одной трассировкой до одного заблокированного адреса?</p>
</blockquote>
</aside>
<p>Выявить где происходит блокировка, можно лишь только средствами трассировки.</p></td><td>2024-01-27T17:47:10.343Z</td></tr><tr><td>anon57137390</td><td><p>Но если у вас блокируют или троттлят входящие, а доступа на сервер нет?</p></td><td>2024-01-27T17:51:55.249Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><p>В этом случае уже да, в трассировке этого не будет видно, только с сервера может быть видна картина.</p>
<p>В первом же сообщении я делал трассировку и до другого заблокированного IP-адреса на ТСПУ, после второго хопа(100.100.0.1) ничего нет, это как раз таки прикрепил для сравнения трассировок по TCP. Трассировки посредством mtr и traceroute выполнялись из под WSL, поэтому там добавился ещё один хоп.</p></td><td>2024-01-27T17:57:03.951Z</td></tr><tr><td>kkk(K)</td><td><p><a class="mention" href="/u/angry_agent">@Angry_Agent</a> а вы пробовали телеграмм через прокси сервера? Там есть socks и mtproto. Интересно понять, блокируется протокол или пул адресов компании.</p></td><td>2024-01-29T14:20:31.615Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><p>Не проверяли этот момент, друг просто стал использовать VPN и всё, не более.</p>
<p>Полагаю, что попали пулы адресов телеграма, если SYN пакеты терялись.</p></td><td>2024-01-29T14:31:37.628Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://t.me/ProxyMTProto">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/6/60a0dd1195aa91677b6f00e7a4eb29555e45506b.svg" class="site-icon" data-dominant-color="" width="16" height="16">

      <a href="https://t.me/ProxyMTProto" target="_blank" rel="noopener">Telegram</a>
  </header>

  <article class="onebox-body">
    <img width="320" height="320" src="про-блокировку-telegram-в-республике-башкортостан-18012024/08084d90e72343e3563010e2b7b56660ebe77f68.jpeg" class="thumbnail onebox-avatar" data-dominant-color="678FAB">

<h3><a href="https://t.me/ProxyMTProto" target="_blank" rel="noopener">Proxy MTProto</a></h3>

  <p>FAST MTPROTO PROXIES FOR TELEGRAM		#DigitalResistance		ADS:	@Ads_ProxyMTProto		Run your own MTProxy:	https://github.com/TelegramMessenger/MTProxy</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Для иранских юзеров, но для российских скоро тоже похоже будет актуально.</p></td><td>2024-01-29T15:38:50.416Z</td></tr><tr><td>Angry_Agent(Angry Agent)</td><td><aside class="quote no-group" data-username="Angry_Agent" data-post="17" data-topic="6991">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/angry_agent/48/4030_2.png" class="avatar"> Angry_Agent:</div>
<blockquote>
<p>Полагаю, что попали пулы адресов телеграма, если SYN пакеты терялись.</p>
</blockquote>
</aside>
<p>И так, я попробовал заблокировать Telegram в своей тестовой сети, его оказалось заблокировать даже легче, чем whatsapp. Перебанив все подсети всех ASN телеграма(а их 3 штуки), он очень быстро перестал работать.</p>
<p>WhatsApp хотя бы начинает подключаться к серверам Amazon’a, а Telegram как висит в бесконечной загрузке, так и висит.</p></td><td>2024-01-29T17:14:42.928Z</td></tr>
    </table>
      </body>
    </html>