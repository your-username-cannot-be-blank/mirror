
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>блокировка-bittorrent-dht</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>ValdikSS</td><td><p>Сегодня, 19 сентября 2021 года, на провайдере Уфанет опять наблюдаются блокировки сети DHT.</p>
<p>Отправка UDP-запросов, начинающиеся с байтов <code>64 31 3a</code> (<code>d1:</code>), приводят к <strong>блокировке по связке source port + destination IP + destination port</strong> в рамках UDP-сессии, т.е. если хотя бы раз был отправлен пакет, начинающийся с этих байтов, никакие пакеты больше с этого source port на этот ip-адрес и destination port доставляться не будут, до момента <strong>таймаута сессии</strong> connection tracking на DPI, который равен <strong>4-5 минутам</strong>.</p>
<p>При этом, <strong>если начать сессию с отправки какого-то другого UDP-пакета</strong> (например, отправить просто букву <code>A</code>), а затем в другом/других пакетах отправлять DHT-пакеты, <strong>то блокировки не происходит</strong>.<br>
<strong>Также можно разбить (фрагментировать) первый UDP-пакет</strong> в сессии на несколько пакетов: в первом отправить <code>64</code>, а во втором <code>31 3a…</code>. В этом случае также блокировки не происходит.</p>
<hr>
<p>Команды для проверки доступности DHT, которые я <a href="https://ntc.party/t/rkn-will-try-to-block-the-following-vpn-services/1022/65">выкладывал ранее</a>:</p>
<pre><code class="lang-auto">dht.libtorrent.org:

nping --udp -g 12345 -p 25401 -c1 dht.libtorrent.org --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

router.bittorrent.com:

nping --udp -g 12345 -p 6881 -c1 router.bittorrent.com --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"
</code></pre>
<p>Опция <code>-g</code> задает source port.</p>
<p>Клиенты BitTorrent, по крайней мере некоторые, похоже, просто отбрасывают неизвестные пакеты по UDP, поэтому можно отправить какой угодно «мусор» реальным пирам в первом пакете, и DHT начнёт работать.</p>
<pre><code class="lang-auto">$ nping --udp -g 12330 -p 25401 -c1 dht.libtorrent.org --data-string A; \
nping --udp -g 12330 -p 25401 -c1 dht.libtorrent.org --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.80 ( https://nmap.org/nping ) at 2021-09-19 17:59 UTC
SENT (0.0664s) UDP 172.17.0.2:12330 &gt; 185.157.221.247:25401 ttl=64 id=16440 iplen=29 
nping_event_handler(): READ-PCAP killed: Resource temporarily unavailable
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
Raw packets sent: 1 (29B) | Rcvd: 0 (0B) | Lost: 1 (100.00%)
Nping done: 1 IP address pinged in 1.08 seconds

Starting Nping 0.7.80 ( https://nmap.org/nping ) at 2021-09-19 17:59 UTC
SENT (0.0673s) UDP 172.17.0.2:12330 &gt; 185.157.221.247:25401 ttl=64 id=34359 iplen=139 
RCVD (0.1285s) UDP 185.157.221.247:25401 &gt; 172.17.0.2:12330 ttl=52 id=54585 iplen=184
 
Max rtt: 61.242ms | Min rtt: 61.242ms | Avg rtt: 61.242ms
Raw packets sent: 1 (139B) | Rcvd: 1 (184B) | Lost: 0 (0.00%)
Nping done: 1 IP address pinged in 1.11 seconds
</code></pre>
<p>Строка <code>RCVD (0.1285s) UDP 185.157.221.247:25401 &gt; 172.17.0.2:12330 ttl=52 id=54585 iplen=184</code> говорит о <strong>получении ответа от реального узла <code>dht.libtorrent.org</code>, если вместо DHT-хендшейка сначала отправить ему букву “A” отдельным пакетом</strong>.</p>
<hr>
<p>Предположительно, блокировка DHT вызвана использованием фреймворка <a href="https://github.com/clostra/newnode">NewNode</a> в приложениях Навального для мобильных устройств, который использует эту сеть для поиска пиров.</p></td><td>2021-09-19T18:15:22.871Z</td></tr><tr><td>zhenyolka</td><td><p>Проверил сейчас на Теле2, нет такого.<br>
Зачем это делать, если выборы уже закончились, тем более на ограниченном кругу операторов? Гораздо понятнее было бы именно в дни выборах запустить эту блокировку у всех.<br>
В их действиях в последнее время все меньше логики… Хотя, может быть, это все как раз очень логично, только мы об этом узнаем позже.</p></td><td>2021-09-19T19:00:52.622Z</td></tr><tr><td>kstrmv</td><td><p>Плохо во всём этом разбираюсь, но я нашёл программу nmap и использовал две команды.<br>
г. Нижний Новгород, Провайдер Уфанет</p>
<p>Где-то через месяц у меня предстоит переход на провайдер Ростелеком(к сожалению) и очень переживаю за возможность пользования торрентов. Как бы не пришлось покупать vps и настраивать shadowsocks со всякими дополнениями к нему</p>
<pre><code class="lang-auto">$ nping --udp -g 12345 -p 25401 -c1 dht.libtorrent.org --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.92 ( https://nmap.org/nping ) at 2021-09-20 20:22 RTZ 2 (чшьр)
SENT (0.0750s) UDP 192.168.0.174:12345 &gt; 185.157.221.247:25401 ttl=64 id=20449 iplen=139
RCVD (0.1100s) UDP 185.157.221.247:25401 &gt; 192.168.0.174:12345 ttl=52 id=63019 iplen=184

Max rtt: 34.000ms | Min rtt: 34.000ms | Avg rtt: 34.000ms
Raw packets sent: 1 (153B) | Rcvd: 1 (184B) | Lost: 0 (0.00%)
Nping done: 1 IP address pinged in 0.58 seconds
</code></pre>
<pre><code class="lang-auto">$ nping --udp -g 12345 -p 6881 -c1 router.bittorrent.com --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"


Starting Nping 0.7.92 ( https://nmap.org/nping ) at 2021-09-20 20:23 RTZ 2 (чшьр)
SENT (0.0770s) UDP 192.168.0.174:12345 &gt; 67.215.246.10:6881 ttl=64 id=19539 iplen=139
RCVD (0.2610s) UDP 67.215.246.10:6881 &gt; 192.168.0.174:12345 ttl=42 id=59672 iplen=514

Max rtt: 183.000ms | Min rtt: 183.000ms | Avg rtt: 183.000ms
Raw packets sent: 1 (153B) | Rcvd: 1 (514B) | Lost: 0 (0.00%)
Nping done: 1 IP address pinged in 0.42 seconds
</code></pre></td><td>2021-09-20T17:26:47.801Z</td></tr><tr><td>ValdikSS</td><td><p>У вас нет блокировки. Пакеты уходят и приходят.<br>
Выполните, пожалуйста, следующую команду:</p>
<pre><code class="lang-auto">tracert dht.libtorrent.org
</code></pre></td><td>2021-09-20T18:16:23.729Z</td></tr><tr><td>kstrmv</td><td><pre><code class="lang-auto">Трассировка маршрута к dht.libtorrent.org [185.157.221.247]
с максимальным числом прыжков 30:

  1     1 ms    &lt;1 мс     1 ms  192.168.0.1
  2    13 ms    &lt;1 мс    &lt;1 мс  100.79.0.1
  3    &lt;1 мс     3 ms    &lt;1 мс  10.1.139.2
  4     2 ms     2 ms     1 ms  10.1.139.17
  5     6 ms     3 ms     3 ms  10.0.20.221
  6     1 ms     2 ms     4 ms  10.17.0.154
  7    15 ms    10 ms     3 ms  194.186.77.173
  8     *        *       24 ms  mx01.Stockholm.gldn.net [79.104.235.78]
  9    24 ms    24 ms    26 ms  netnod-ix-ge-b-sth-1500.portlane.net [194.68.128.194]
 10    26 ms    25 ms    24 ms  be-1.pe3.sto1.se.portlane.net [80.67.4.137]
 11    24 ms    24 ms    24 ms  be-1-10.vbdc-cr4.glesys.net [80.67.0.193]
 12    31 ms    32 ms    33 ms  te-0-0-0-7.fbg-cr2.glesys.net [193.108.196.93]
 13    32 ms    32 ms    32 ms  te-2-1.fbg-pe1.glesys.net [193.108.196.94]
 14    32 ms    32 ms    32 ms  185-157-221-247-static.glesys.net [185.157.221.247]

Трассировка завершена.
</code></pre></td><td>2021-09-20T18:44:01.150Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="1" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<p>можно отправить какой угодно «мусор» реальным пирам в первом пакете, и DHT начнёт работать</p>
</blockquote>
</aside>
<p>Это идея на будущее для доработки nfqws и goodbyedpi<br>
пока видится 2 варианта : fake для QUIC и zero/random для остального<br>
мне раньше казалось, что DPI будут работать с UDP только stateless</p></td><td>2021-09-22T07:11:34.930Z</td></tr><tr><td>kstrmv</td><td><p>а Ростелеком точно торренты блокирует или это под вопросом?</p></td><td>2021-09-22T11:13:23.223Z</td></tr><tr><td>ValdikSS</td><td><p>Ростелеком Санкт-Петербург не блокирует.</p></td><td>2021-09-22T12:03:51.195Z</td></tr><tr><td>kstrmv</td><td><p>наблюдаю необъяснимую потерю скорости отдачи торрентов. Ещё вчера была 8Мбайт/сек, сейчас не поднимается выше 1Мбайта/сек. Провайдер - Ростелеком.<br>
количество и состав торрентов не изменились<br>
Upd:<br>
Вырубили электричество на 5 минут. После скорость снова возросла до 5мбит/сек.<br>
Я - паникёр. Отбой тревоги</p></td><td>2022-03-14T11:32:21.334Z</td></tr><tr><td>kstrmv</td><td><p>А есть теоретическая возможность у Ростелекома ограничивать скорость скачивания в торрент-клиенте?</p></td><td>2022-07-23T07:30:17.627Z</td></tr><tr><td>anon94384997</td><td><aside class="quote no-group" data-username="kstrmv" data-post="11" data-topic="1335" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kstrmv/48/710_2.png" class="avatar"> kstrmv:</div>
<blockquote>
<p>А есть теоретическая возможность у Ростелекома ограничивать скорость скачивания в торрент-клиенте?</p>
</blockquote>
</aside>
<p>Есть, если есть ТСПУ. Но обычно скорость торрентов ограничивают мобильные операторы.</p></td><td>2022-07-23T20:54:29.707Z</td></tr><tr><td>kstrmv</td><td><p>а это можно как-то проверить и по возможности обойти?</p></td><td>2022-07-23T23:30:23.310Z</td></tr><tr><td>0ka(0ka)</td><td><p>В домашнем регионе у РТ скорость до гигабита, так? Если да, то раздайте торрент у другого человека в вашем городе с РТ, и посмотрите какая будет скорость у вас. Если ожидания не будут оправданы, проверьте также и скачивание файла с веб сервера (miniweb подойдет)</p></td><td>2022-07-24T03:21:47.887Z</td></tr><tr><td>ValdikSS</td><td><p>A post was split to a new topic: <a href="/t/bittorrent/4424">Поддержка BitTorrent</a></p></td><td>2023-04-29T21:46:44.692Z</td></tr><tr><td>q6dtqc26m</td><td><p>Со вчерашнего дня пропали все DHT пиры, провайдер wifire (chebnet), связано ли с блокировками?</p>
<pre><code class="lang-shell">$ nping --udp -g 6881 -p 25401 -c1 dht.libtorrent.org --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.94 ( https://nmap.org/nping ) at 2023-09-06 04:29 MSK
SENT (0.0040s) UDP packet with 111 bytes to dht.libtorrent.org:25401 (185.157.221.247:25401)
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
UDP packets sent: 1 | Rcvd: 0 | Lost: 1 (100.00%)
Nping done: 1 IP address pinged in 1.01 seconds

$ nping --udp -g 6881 -p 6881 -c1 router.bittorrent.com --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.94 ( https://nmap.org/nping ) at 2023-09-06 04:30 MSK
SENT (0.0105s) UDP packet with 111 bytes to router.bittorrent.com:6881 (67.215.246.10:6881)
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
UDP packets sent: 1 | Rcvd: 0 | Lost: 1 (100.00%)
Nping done: 1 IP address pinged in 1.01 seconds

$ nping --udp -g 6881 -p 25401 -c1 dht.libtorrent.org --data-string A; \                                                         
nping --udp -g 6881 -p 25401 -c1 dht.libtorrent.org --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.94 ( https://nmap.org/nping ) at 2023-09-06 04:32 MSK
SENT (0.0028s) UDP packet with 1 bytes to dht.libtorrent.org:25401 (185.157.221.247:25401)
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
UDP packets sent: 1 | Rcvd: 0 | Lost: 1 (100.00%)
Nping done: 1 IP address pinged in 1.00 seconds

Starting Nping 0.7.94 ( https://nmap.org/nping ) at 2023-09-06 04:32 MSK
SENT (0.0062s) UDP packet with 111 bytes to dht.libtorrent.org:25401 (185.157.221.247:25401)
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
UDP packets sent: 1 | Rcvd: 0 | Lost: 1 (100.00%)
Nping done: 1 IP address pinged in 1.01 seconds

$ traceroute dht.libtorrent.org
traceroute to dht.libtorrent.org (185.157.221.247), 30 hops max, 60 byte packets
 1  _gateway (192.168.1.1)  0.642 ms  0.611 ms  0.594 ms
 2  chb-b21-p4.ti.ru (212.1.254.164)  2.005 ms  1.908 ms  1.923 ms
 3  212.1.240.218 (212.1.240.218)  2.492 ms  2.599 ms  2.536 ms
 4  178.176.191.136 (178.176.191.136)  4.294 ms  3.675 ms  4.305 ms
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  83.169.204.78 (83.169.204.78)  36.105 ms  35.896 ms 83.169.204.82 (83.169.204.82)  35.506 ms
10  netnod-ix-ge-a-sth-1500.portlane.net (194.68.123.194)  54.231 ms  53.404 ms  54.309 ms
11  be-1.cr2.got1.se.portlane.net (80.67.4.146)  54.669 ms  55.175 ms  56.999 ms
12  be-9.cr2.fal4.se.portlane.net (80.67.4.195)  58.010 ms  57.322 ms  54.711 ms
13  eth-52-2.le4.fal4.se.portlane.net (80.67.4.202)  53.836 ms  54.165 ms eth-52-2.le3.fal4.se.portlane.net (80.67.4.200)  55.630 ms
14  vl-166.z10-03-05.fal4.se.portlane.net (46.246.38.1)  54.626 ms  54.905 ms  56.152 ms
15  185-157-221-247-static.glesys.net (185.157.221.247)  55.709 ms  56.878 ms  56.518 ms

</code></pre></td><td>2023-09-06T04:15:18.612Z</td></tr><tr><td>anon94384997</td><td><p>На рутрекере тоже массовые жалобы на работу торрентов.</p></td><td>2023-09-06T06:26:46.282Z</td></tr><tr><td>bolvan</td><td><p>Похоже на всех провайдерах заблочили. 3 прова проводных в спб одна картина.<br>
Блокируются в stateful режиме исходящие udp пакеты с src портом 1025…65535 на любые порты dst, с длиной от 101 до 399 байт (100&lt;x&lt;400), начинающиеся с “d1” и заканчивающиеся “e”<br>
src port &lt;=1024 не блокируются. поэтому один из вариантов заставить пакет проходить - назначить торрент клиенту порт из нижнего диапазона. Порт 1024 уникален тем, что он не требует рута, потому его можно использовать на unix/android</p>
<p>обычно пробив работает только в одну сторону (должно быть из-за множественных ТСПУ). после пробива обратные пакеты по той же связке src_port-dst_port с d1…e ходить не начинают. нужен пробив с обоих сторон, и потому с обходом не все так просто.</p>
<p>nfqws помогает, с ним количество DHT узлов быстро подпрыгивает до сотен, без него топчется на 1-2<br>
Но проблема, что от других юзеров пакеты тоже блокируются, потому работает кое-как</p>
<p>Интересный момент. Пробовал отправлять себе с VPS из финки d1…e - не доходит. В финке нет ТСПУ.<br>
Однако, от некоторых IP  эти пакеты доходят. Страны в основном не Россия. Германия, США засветились. Но есть и парочка пакетов и от российских провайдеров.<br>
Предполагаю, что все-таки пакеты на ТСПУ блокируются только исходящие, но кое-где стоят ТСПУ у магистралов, которые интерпретируют направление непонятно каким образом.<br>
У некоторых Российских провайдеров все еще  нет ТСПУ, либо он работает неправильно, либо по каким-то причинам там не задействовали блок.<br>
Потому эффект получается такой : все исходящие блок, входящие - почти все блок.<br>
Если бы все ТСПУ блочили и входящие, то мне бы не дошло ничего и ниоткуда.</p></td><td>2023-09-06T06:59:57.525Z</td></tr><tr><td>mrplap</td><td><p>Проводной МТС, северо-запад, аналогично</p></td><td>2023-09-06T08:29:04.810Z</td></tr><tr><td>User69</td><td><p>Может, это связано с выборами.<br>
В прошлый раз DHT блокировали из-за навальновской проги с кандидатами.</p></td><td>2023-09-06T09:00:48.307Z</td></tr><tr><td>welazsc</td><td><p>УГ и блокировщик УГ это плохой (хороший) и хороший (плохой) полицейский.<br>
У Lantern, <s>Zeronet</s> тоже DHT используется.</p></td><td>2023-09-06T09:11:26.315Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="User69" data-post="21" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/user69/48/2306_2.png" class="avatar"> User69:</div>
<blockquote>
<p>Может, это связано с выборами.</p>
</blockquote>
</aside>
<p>Скорее всего. Таких совпадений не бывает.<br>
Может быть через несколько дней отключат.</p></td><td>2023-09-06T09:34:07.180Z</td></tr><tr><td>welazsc</td><td><p>Это сигнал. Ждем цифру 5.</p></td><td>2023-09-06T09:48:46.348Z</td></tr><tr><td>bolvan</td><td><p>Обнаружил, что пакеты с src port 1…1024 не блокируются.<br>
Если бы все дружно изменили порт торент клиента на &lt;=1024 (для android 1024 прокатит без рута), то у нас бы снова заработал DHT</p></td><td>2023-09-06T12:51:38.777Z</td></tr><tr><td>q6dtqc26m</td><td><p>Спасибо, хоть и поменял только у себя, но заметно лучше.</p></td><td>2023-09-06T13:06:35.669Z</td></tr><tr><td>anon94384997</td><td><p>Порт входящих подключений в торрент клиенте влияет и на исходящий DHT?<br>
Я так понимаю порт входящих подключений в торренте это и исходящий порт для соединения с пирами (сидами/личами). Но применяется ли он и для исходящих DHT запросов?</p></td><td>2023-09-06T13:23:23.171Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anon94384997" data-post="27" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/49beb7/48.png" class="avatar"> anon94384997:</div>
<blockquote>
<p>Но применяется ли он и для исходящих DHT запросов?</p>
</blockquote>
</aside>
<p>Видимо да, потому что в шарке с другого порта ничего не идет<br>
qbittorrent ведет себя так, остальные не проверял</p></td><td>2023-09-06T13:26:23.655Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="q6dtqc26m" data-post="26" data-topic="1335" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/q/a4c791/48.png" class="avatar"> q6dtqc26m:</div>
<blockquote>
<p>Спасибо, хоть и поменял только у себя, но заметно лучше.</p>
</blockquote>
</aside>
<p>Лучше, но пиров практически 0 везде. Изредка кто-то еще появляется</p></td><td>2023-09-06T13:27:36.830Z</td></tr><tr><td>Elevator</td><td><p>nping всеравно говорит что ответа нет. Поменял порт в параметре -g</p></td><td>2023-09-06T13:55:12.024Z</td></tr><tr><td>bolvan</td><td><pre><code class="lang-auto"># nping  --udp  -p 4444 -g 1025 1.1.1.1 --data 64313a6164323a696432303a2e2b4e412da2d4757414dadb459677ce91694ab7393a696e666f5f6861736832303a3b0ac215c5d9e4bea7be93e4d9184fc1a33249c265313a71393a6765745f7065657273313a74323ae4e2313a76343a4c540208313a79313a7165

Starting Nping 0.7.91 ( https://nmap.org/nping ) at 2023-09-06 17:04 MSK
SENT (0.1050s) UDP x.x.x.x:1025 &gt; 1.1.1.1:4444 ttl=64 id=17131 iplen=132 
SENT (1.1082s) UDP x.x.x.x:1025 &gt; 1.1.1.1:4444 ttl=64 id=17131 iplen=132 
SENT (2.1181s) UDP x.x.x.x:1025 &gt; 1.1.1.1:4444 ttl=64 id=17131 iplen=132 
^C 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
Raw packets sent: 3 (396B) | Rcvd: 0 (0B) | Lost: 3 (100.00%)
Nping done: 1 IP address pinged in 2.34 seconds

# nping  --udp  -p 4444 -g 1024 1.1.1.1 --data 64313a6164323a696432303a2e2b4e412da2d4757414dadb459677ce91694ab7393a696e666f5f6861736832303a3b0ac215c5d9e4bea7be93e4d9184fc1a33249c265313a71393a6765745f7065657273313a74323ae4e2313a76343a4c540208313a79313a7165

Starting Nping 0.7.91 ( https://nmap.org/nping ) at 2023-09-06 17:04 MSK
SENT (0.1038s) UDP x.x.x.x:1024 &gt; 1.1.1.1:4444 ttl=64 id=10912 iplen=132 
RCVD (0.3613s) UDP 202.61.226.152:6882 &gt; x.x.x.x:1024 ttl=53 id=57810 iplen=95 
RCVD (0.3668s) UDP 146.19.24.245:43824 &gt; x.x.x.x:1024 ttl=50 id=15931 iplen=95 
RCVD (0.3806s) UDP 144.126.233.32:6882 &gt; x.x.x.x:1024 ttl=51 id=48849 iplen=95 
SENT (1.1074s) UDP x.x.x.x:1024 &gt; 1.1.1.1:4444 ttl=64 id=10912 iplen=132 
RCVD (1.1081s) UDP 18.196.86.103:6992 &gt; x.x.x.x:1024 ttl=242 id=16918 iplen=104 
RCVD (1.1081s) UDP 207.180.192.206:39380 &gt; x.x.x.x:1024 ttl=53 id=54148 iplen=125 
SENT (2.1177s) UDP x.x.x.x:1024 &gt; 1.1.1.1:4444 ttl=64 id=10912 iplen=132 
SENT (3.1274s) UDP x.x.x.x:1024 &gt; 1.1.1.1:4444 ttl=64 id=10912 iplen=132 
RCVD (3.1281s) UDP 196.190.32.17:28472 &gt; x.x.x.x:1024 ttl=111 id=22325 iplen=427 
RCVD (3.1281s) UDP 170.51.110.71:31204 &gt; x.x.x.x:1024 ttl=223 id=50437 iplen=104
</code></pre></td><td>2023-09-06T14:07:14.722Z</td></tr><tr><td>Elevator</td><td><pre><code class="lang-auto">nping  --udp  -p 4444 -g 1024 1.1.1.1 --data 64313a6164323a696432303a2e2b4e412da2d4757414dadb459677ce91694ab7393a696e666f5f6861736832303a3b0ac215c5d9e4bea7be93e4d9184fc1a33249c265313a71393a6765745f7065657273313a74323ae4e2313a76343a4c540208313a79313a7165

Starting Nping 0.7.93 ( https://nmap.org/nping ) at 2023-09-06 17:28 MSK
SENT (0.0013s) UDP packet with 104 bytes to 1.1.1.1:4444
SENT (1.0024s) UDP packet with 104 bytes to 1.1.1.1:4444
SENT (2.0035s) UDP packet with 104 bytes to 1.1.1.1:4444
SENT (3.0046s) UDP packet with 104 bytes to 1.1.1.1:4444
SENT (4.0057s) UDP packet with 104 bytes to 1.1.1.1:4444
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
UDP packets sent: 5 | Rcvd: 0 | Lost: 5 (100.00%)
Nping done: 1 IP address pinged in 5.01 seconds

</code></pre>
<p>Попробовал другие порты кроме 1024, тоже самое</p></td><td>2023-09-06T14:29:44.521Z</td></tr><tr><td>bolvan</td><td><p>1.1.1.1 - плохой пример. это anycast.<br>
попробуйте 178.210.74.11<br>
разные хосты могут отвечать , а могут не отвечать на udp.<br>
какие-то хосты или фаерволы генерят однократный icmp unreachable, но если взять другие без ддос защит, там многократный icmp ответ</p></td><td>2023-09-06T14:44:35.051Z</td></tr><tr><td>anon94384997</td><td><p>На рутрекере говорят, что смена порта помогает.<br>
Линуксоидов не слышно, им не повезло. Неудобно запускать торрент клиент от рута.</p></td><td>2023-09-06T16:24:03.222Z</td></tr><tr><td>m0xfff</td><td><p>В линуксе можно установить net.ipv4.ip_unprivileged_port_start=0</p></td><td>2023-09-06T17:23:27.739Z</td></tr><tr><td>welazsc</td><td><blockquote>
<p>Если бы все дружно изменили порт торент клиента</p>
</blockquote>
<p>Это замкнутый круг. Блокируемое приложение тоже изменит настройки. Правила поправят и все по новой, в тупик.</p></td><td>2023-09-06T17:49:14.062Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="welazsc" data-post="37" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/c4cdca/48.png" class="avatar"> welazsc:</div>
<blockquote>
<p>Это замкнутый круг. Блокируемое приложение тоже изменит настройки. Правила поправят и все по новой, в тупик.</p>
</blockquote>
</aside>
<p>Не совсем. На android , равно как и ios (bsd based ) , невозможно забиндаться на порты &lt;1024. То, что пропускают 1024, это должно быть ошибка в правиле в знаке сравнения.  &lt;= вместо &lt;<br>
Само наличие этого правила указывает на таргетирование блока именно на телефоны, потому что для windows PC, откуда в основном качают торенты, это не имеет значения.<br>
Значит блокируют не торент, а приложение, и даже если поправят на &lt;1024, то торентщиков это сильно не расстроит. А на ведроидах можно с помощью рута опустить порог привилегированных портов.</p></td><td>2023-09-06T17:57:32.174Z</td></tr><tr><td>anonymous122(anonymous122)</td><td><details>
<summary>
BitTorrent DHT library patch</summary>
<p>Патч для <a href="https://github.com/jech/dht" rel="noopener nofollow ugc">BitTorrent DHT library</a>:</p>
<pre><code class="lang-auto">diff --git a/dht.c b/dht.c
index c069bc5..7f5c9ca 100644
--- a/dht.c
+++ b/dht.c
@@ -2507,6 +2507,8 @@ dht_send(const void *buf, size_t len, int flags,
         return -1;
     }
 
+    *(char *)(buf+len)=0;
+    len++;
     return dht_sendto(s, buf, len, flags, sa, salen);
 }
</code></pre>
<p>Выглядит не безопасно, но это только пример и один байт должен влезть (512 или 2048 байт для buf выбраны в коде с запасом). Можно усложнить код, выделять место на куче и добавлять несколько байт, включая рандом. Или менять только пинг?</p>
<p>Поскольку содержимое это строка, вменяемый парсер приемника должен такое принимать правильно.</p>
</details></td><td>2023-09-06T20:11:53.039Z</td></tr><tr><td>anon94384997</td><td><blockquote>
<p>Умное голосование мы делать будем, но точечно и непублично</p>
</blockquote>
<p>Приложения еще нет, а солнцеликий уже испугался.</p></td><td>2023-09-06T21:25:40.607Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonymous122" data-post="39" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a4c791/48.png" class="avatar"> anonymous122:</div>
<blockquote>
<p>Поскольку содержимое это строка, вменяемый парсер приемника должен такое принимать правильно.</p>
</blockquote>
</aside>
<p>К сожалению, нет.<br>
nfqws имеет режим десинхронизации udplen. Он дописывает указанное количество нулей в конец пакета, увеличивая его длину.<br>
Да, такие пакеты проходят ТСПУ, но количество узлов по сравнению с вариантом без обхода не меняется. Их очень мало. Если же снизить порт до &lt;=1024 или включить обход по fake, то их сразу же становится сотни.</p>
<p>UPD.<br>
Если добивать пакеты не нулями, а символами “e” до превышения размера 400 байт<br>
–dpi-desync=udplen --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-ttl=11 --dpi-desync-udplen-increment=300 --dpi-desync-udplen-pattern=0x65<br>
то вроде работает. но узлов все равно меньше, чем при фейке или low port. видимо зависит от используемого клиента - хавает или не хавает</p></td><td>2023-09-07T06:11:03.677Z</td></tr><tr><td>anon94384997</td><td><p>А могут ли нерутованные линуксовые торрент клиенты на высоких портах на белом ip принимать входящие подключения с портов &lt;1024?<br>
root требуется только для локального биндинга низких портов, а входящее прилететь может? Это например как если бы не ты подключался к серверу на 443 порт, а сервер подключался к тебе с 443 порта. Это редкость, вот я и спрашиваю. На случай, если виндоюзеры начнут менять у себя порты и заходят соединиться к ничего не подозревающим линуксоидам.</p></td><td>2023-09-07T10:14:55.145Z</td></tr><tr><td>welazsc</td><td><p>Отвечают на ping с нулевым приветом:</p>
<pre><code class="lang-auto">dht.libtorrent.org 25401
dht.transmissionbt.com 6881
router.bittorrent.com 6881
</code></pre></td><td>2023-09-07T11:08:18.286Z</td></tr><tr><td>Elevator</td><td><p>Тоже самое</p>
<pre><code class="lang-auto">nping --udp -g 85 -p 6881 -c5 178.210.74.11 --data "\x64\x31\x3a\x61\x64\x32\x3a\x62\x73\x69\x31\x65\x32\x3a\x69\x64\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x85\xbd\x80\x66\x18\x56\x00\xfd\x39\x3a\x69\x6e\x66\x6f\x5f\x68\x61\x73\x68\x32\x30\x3a\x75\x6c\x1f\xb3\x52\xb2\xd2\x6d\xc9\xd5\x57\x7c\x4a\x6d\x72\xdb\x91\x7c\x54\xcc\x65\x31\x3a\x71\x39\x3a\x67\x65\x74\x5f\x70\x65\x65\x72\x73\x31\x3a\x74\x32\x3a\x1a\x2e\x31\x3a\x76\x34\x3a\x4c\x54\x01\x2d\x31\x3a\x79\x31\x3a\x71\x65"

Starting Nping 0.7.93 ( https://nmap.org/nping ) at 2023-09-07 14:42 MSK
SENT (0.0436s) UDP x.x.x.x:85 &gt; 178.210.74.11:6881 ttl=64 id=2980 iplen=139 
SENT (1.0436s) UDP x.x.x.x:85 &gt; 178.210.74.11:6881 ttl=64 id=2980 iplen=139 
SENT (2.0447s) UDP x.x.x.x:85 &gt; 178.210.74.11:6881 ttl=64 id=2980 iplen=139 
SENT (3.0457s) UDP x.x.x.x:85 &gt; 178.210.74.11:6881 ttl=64 id=2980 iplen=139 
SENT (4.0468s) UDP x.x.x.x:85 &gt; 178.210.74.11:6881 ttl=64 id=2980 iplen=139 
 
Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A
Raw packets sent: 5 (695B) | Rcvd: 0 (0B) | Lost: 5 (100.00%)
Nping done: 1 IP address pinged in 5.09 seconds
</code></pre></td><td>2023-09-07T11:44:05.445Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anon94384997" data-post="42" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/49beb7/48.png" class="avatar"> anon94384997:</div>
<blockquote>
<p>А могут ли нерутованные линуксовые торрент клиенты на высоких портах на белом ip принимать входящие подключения с портов &lt;1024?</p>
</blockquote>
</aside>
<p>Могут, несложно проверить</p></td><td>2023-09-07T11:46:35.918Z</td></tr><tr><td>bolvan</td><td><p>Нашел систему на ростелекоме, где до финки только 1 ТСПУ на самом провайдере.<br>
Все же пробив работает в обе стороны.<br>
Если я с финки пошлю себе на ростелек DHT, он доходит, и если потом перекинуть пару src/dst port и отослать DHT обратно, то до финки доходит.<br>
Значит DPI процессит полностью stateful в обе стороны.</p>
<p>Однако, на другом провайдере это портит ТСПУ на глобалнет<br>
На еще одном провайдере у одного клиента такая схема как с ростелеком срабатывает, у другого в том же городе - не срабатывает.<br>
Значит проблема, видимо, в нескольких ТСПУ, каждый из которых смотрит в свою сторону и считает направление по своему, или они настроены по-разному</p></td><td>2023-09-07T11:50:20.580Z</td></tr><tr><td>welazsc</td><td><aside class="quote no-group" data-username="bolvan" data-post="41" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если добивать пакеты не нулями, а символами “e” до превышения размера 400 байт</p>
</blockquote>
</aside>
<p>А если повторять содержимое, или добавить что-то завершенное (валидное в добавленной части)?</p></td><td>2023-09-07T14:23:23.884Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="welazsc" data-post="47" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/c4cdca/48.png" class="avatar"> welazsc:</div>
<blockquote>
<p>А если повторять содержимое, или добавить что-то завершенное (валидное в добавленной части)?</p>
</blockquote>
</aside>
<p>Можете попробовать. Сегодня nfqws обновил до поддержики произвольных паттернов дописывания udplen. И сделал hexstring. Можно из файла, можно из hexstring<br>
Я пробовал “de”. Что с “eeeeee”, что с “dedede” одно и то же<br>
Можно попробовать добавлять вперед dictinonary левый элемент с индекс строкой более 1 символа</p>
<p>1:q9:get_peers<br>
это значит<br>
q : get_peers<br>
2:qq1:x<br>
значит<br>
qq : x<br>
после первого d вставить 2:qq1:x</p>
<p>получается<br>
d1:ad2:id20:<br>
d2:qq1:x1:ad2:id20:</p>
<p>если парсер разбирает dictionary и не реагирует не левые индексы, то должно работать<br>
но опять же, без пробива с обеих сторон будет кое-как, как показывает практика</p></td><td>2023-09-07T14:26:31.493Z</td></tr><tr><td>welazsc</td><td><p>Больше отвечают при повторе содержимого (через патч клиента). Добавление {}, ping, get_peers узлам не нравится. Это без учета цензуры, изучался вопрос реакции софта.</p></td><td>2023-09-07T16:02:30.170Z</td></tr><tr><td>bolvan</td><td><p>Сделал в nfqws режим tamper и распознавание DHT.<br>
При tamper корректно редактируется пейлоад, добавляя вначале дополнительный индекс:значение как описано выше<br>
Вроде работает. Узлы появляются<br>
Вообще режим tamper будет универсальным на будущее. Он предназначен для модификации известных пейлоадов корректным образом, чтобы их не распознавал DPI, но распознавал получатель.</p></td><td>2023-09-07T16:04:47.372Z</td></tr><tr><td>welazsc</td><td><p>Часть пиров не отвечает. Возможно из-за проверки lexicographical order.</p></td><td>2023-09-07T17:38:35.429Z</td></tr><tr><td>bolvan</td><td><p>Не знал. Заменил zz на aa.</p></td><td>2023-09-07T17:50:25.179Z</td></tr><tr><td>welazsc</td><td><p>aa &gt; a<br>
Не знаю может ли быть ключ цифровой, но на 00 отвечают.</p></td><td>2023-09-07T17:57:41.869Z</td></tr><tr><td>bolvan</td><td><p>Да, уже понял, что там в оригинале тоже есть a, и он идет до aa<br>
Сделал 00<br>
С точки зрения синтаксиса n:xxxxxx  это строка с n символами. Там может быть все что угодно</p></td><td>2023-09-07T18:03:05.090Z</td></tr><tr><td>anon94384997</td><td><p>А проверял ли кто-нибудь работает ли Kad в aMule?</p></td><td>2023-09-07T22:24:24.203Z</td></tr><tr><td>profiton</td><td><p>На <em>Домру Урал</em> KAD в Emule работает.<br>
Но и DHT пока не блокируется, по тестам nping.</p></td><td>2023-09-08T06:00:47.269Z</td></tr><tr><td>kstrmv</td><td><p>Провайдер Уфанет. Нижний Новгород.<br>
На один отправленный пакет, приходит 3 пакета с ответами, если использовать порт 1024.<br>
Прежний порт 12345 больше не получает ответы при использовании программы nping.<br>
В общем, ситуация плохая, вся надежда на умельцев, которые смогут что-то придумать.<br>
Спасибо за совет с портом 1024</p></td><td>2023-09-09T11:44:12.184Z</td></tr><tr><td>User69</td><td><p>Ну что, как сегодня?<br>
Проверьте</p></td><td>2023-09-11T09:53:48.989Z</td></tr><tr><td>xijewe4896(xijewe4896)</td><td><p>Билайн, Ульяновск, бесконечный поиск метаданных при попытке добавить торрент по магнет-ссылке. С нидерландского впн находит метаданные мгновенно.</p></td><td>2023-09-11T15:52:54.259Z</td></tr><tr><td>bolvan</td><td><p>Вечер 11.09. По прежнему не работает.</p></td><td>2023-09-11T16:17:35.358Z</td></tr><tr><td>Anonimno(Anonimno)</td><td><p><img src="блокировка-bittorrent-dht/7c0f2c679086f49989ed2cc88b7bdc3fd6b6de2a.png" alt="Снимок экрана от 2023-09-15 19-24-46" data-base62-sha1="hHtIlFh6DJhP3Q36idAw2g5F52i" width="485" height="53"></p>
<p>С установленным портом ниже 1024 данные через DHT подгружаются</p></td><td>2023-09-15T12:28:12.083Z</td></tr><tr><td>bolvan</td><td><p>Кажется выключили шайтан машину.<br>
Значит все-таки выборы, но с запоздалым выключением.</p></td><td>2023-09-15T13:48:53.718Z</td></tr><tr><td>xijewe4896(xijewe4896)</td><td><p>А причем тут выборы? Куча даже бесплатных впнов продолжала работать нормально. А “заблоченные” работали вместо udp по tcp, пусть и с порезанной скоростью. Тут что-то другое.</p></td><td>2023-09-17T23:06:16.504Z</td></tr><tr><td>bolvan</td><td><p>Умное голосование с целью голосовать против едросов. За любого кандидата, но согласованно.<br>
Согласование либо через сервер (тут же банят), либо распределенно.</p></td><td>2023-09-18T05:38:54.313Z</td></tr><tr><td>Frrienwrvale</td><td><p>Похоже на блок от Эр-телеком (провод). Порт выше 1024. Ниже не пробовал.</p></td><td>2024-08-23T16:19:59.173Z</td></tr><tr><td>Dredd</td><td><p>dht  в аут ушло, порт высокий, низкие не проверял. РТ. На руборде сегодня тоже писали про проблемы с DHT, только не упоминали провайдера.</p></td><td>2024-08-25T14:25:07.116Z</td></tr><tr><td>artenox</td><td><p>В utorrent? Проверьте другие клиенты. Многие в последнее время жалуются на utorrent.</p></td><td>2024-08-25T15:21:26.233Z</td></tr><tr><td>TOPER(TOPER)</td><td><p>Удалил uTorrent, отрыжка из прошлого, атавизм палеозоя. Скачал портабельный Tixati, там с DHT все ок, да и в целом настроек побольше будет.</p></td><td>2024-08-25T17:01:37.022Z</td></tr><tr><td>Dredd</td><td><p>Он самый. Сегодня dht вроде работает, но как-то слабовато. В Qbittorrent’e хостов на сотню больше <img src="https://ntc.party/images/emoji/twitter/confused.png?v=12" title=":confused:" class="emoji" alt=":confused:" loading="lazy" width="20" height="20"> Видать и вправду клиент чудит. Хотя ХЗ.</p></td><td>2024-08-26T13:21:57.112Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>(в теме на рутрекере) было написано что utorrent может ресолвить через неработающий или забаненый домен. другие клиенты работают через другие домены<br>
как один из вариантов. это как под раздачу бана на <em>adguard</em> попали и ДНС и антибаннер. может какой то <em>torrent</em> забанили</p>
<p>qBittorrent <a href="http://dht.libtorrent.org" rel="noopener nofollow ugc">dht.libtorrent.org</a> не нашел на какой порт<br>
uTorrent <a href="http://router.utorrent.com" rel="noopener nofollow ugc">router.utorrent.com</a> вроде 6881 порт</p></td><td>2024-08-26T13:26:02.389Z</td></tr><tr><td>Frrienwrvale</td><td><p>Так и есть, проблема была в uTorrent, а точнее в серверах к которым он обращался за DHT. Странно, всегда думал что эта сеть децентрализованная.<br>
Решается путем подмены через тот же файл hosts на любые другие, работающие на том же порту, например от transmission:</p>
<h1><a name="p-37730-hosts-file-1" class="anchor" href="#p-37730-hosts-file-1"></a>hosts file</h1>
<p>34.229.89.117 <a href="http://router.utorrent.com" rel="noopener nofollow ugc">router.utorrent.com</a><br>
87.98.162.88 <a href="http://router.bittorrent.com" rel="noopener nofollow ugc">router.bittorrent.com</a></p>
<p>Более подробное описание на Рутрекере:<br>
<a href="https://rutracker.org/forum/viewtopic.php?p=86648403#86648403" class="onebox" target="_blank" rel="noopener nofollow ugc">https://rutracker.org/forum/viewtopic.php?p=86648403#86648403</a></p></td><td>2024-09-11T17:58:33.886Z</td></tr><tr><td>artenox</td><td><aside class="quote no-group" data-username="Frrienwrvale" data-post="73" data-topic="1335">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/34f0e0/48.png" class="avatar"> Frrienwrvale:</div>
<blockquote>
<p>всегда думал что эта сеть децентрализованная</p>
</blockquote>
</aside>
<p>Сеть децентрализована, но начальные ноды для входа надо откуда-то получить, вот с тех адресов. Если это не новый запуск utorrent, то он по идее должен dht ноды кэшировать или даже получить информацию о них с пиров.<br>
Видно правобладатели надавили на разработчиков utorrent, чтобы прикрыли dht домены. Это равносильно отсечению главной головы пиратской гидры, т.к. utorrent самый популярный клиент. Правда, останется связь через трекеры, но dht облако сильно пострадает.</p></td><td>2024-09-11T18:16:06.693Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>да там что сам битторрент версии 1.х<br>
что DHT 90х годов<br>
даже в eMule KAD вроде и то толковей был. хотя может и не резали.</p>
<p>p.s. даже с uTorrent можно попробовать поднять ВПН. дождаться когда наберется 100-1000 DHT и отключить ВПН. ну или через прокси подключать только DHT и может трекеры (если это возможно в uTorrent раздельно)</p></td><td>2024-09-11T18:52:34.854Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Огромное спасибо! Ваш метод рабочий</p></td><td>2024-09-11T22:45:06.789Z</td></tr><tr><td>sakontwist</td><td><p>в qbittorrent можно использовать proxy выборочно для разных взаимодействий</p></td><td>2024-09-12T07:21:14.871Z</td></tr>
    </table>
      </body>
    </html>