
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>cohosh</td><td><p>There are some anomalies in OONI Tor Snowflake tests from various ASes in Russia since earlier this year. The suddenness of the failures makes it look like Snowflake has been blocked.</p>
<ul>
<li>AS20632 (MegaFon PJSC) suddenly started failing all tests <a href="https://explorer.ooni.org/chart/mat?probe_cc=RU&amp;probe_asn=AS20632&amp;since=2023-02-01&amp;until=2023-09-12&amp;time_grain=day&amp;axis_x=measurement_start_day&amp;test_name=torsf" rel="noopener nofollow ugc">starting 2023-02 to now</a>:</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/8c67f89ada0edd43d89c4341c2c439bc181591b6.png" data-download-href="https://ntc.party/uploads/default/8c67f89ada0edd43d89c4341c2c439bc181591b6" title="image"><img src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/8c67f89ada0edd43d89c4341c2c439bc181591b6_2_690x350.png" alt="image" data-base62-sha1="k25BnID2h3h59vTZbbwgWh6H9hc" width="690" height="350" srcset="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/8c67f89ada0edd43d89c4341c2c439bc181591b6_2_690x350.png, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/8c67f89ada0edd43d89c4341c2c439bc181591b6_2_1035x525.png 1.5x, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/8c67f89ada0edd43d89c4341c2c439bc181591b6_2_1380x700.png 2x" data-dominant-color="F9EFC7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2498×1268 153 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<ul>
<li>AS25530 (SFT Company) suddenly started failing all tests <a href="https://explorer.ooni.org/chart/mat?probe_cc=RU&amp;probe_asn=AS25530&amp;since=2023-05-01&amp;until=2023-09-12&amp;time_grain=day&amp;axis_x=measurement_start_day&amp;test_name=torsf" rel="noopener nofollow ugc">starting 2023-05 to now</a>:</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/68c04733154903472f72fd799ad3e5df88f5c577.png" data-download-href="https://ntc.party/uploads/default/68c04733154903472f72fd799ad3e5df88f5c577" title="image"><img src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/68c04733154903472f72fd799ad3e5df88f5c577_2_690x350.png" alt="image" data-base62-sha1="eWFBSjX6xx0lHY36RFTdQlehQij" width="690" height="350" srcset="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/68c04733154903472f72fd799ad3e5df88f5c577_2_690x350.png, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/68c04733154903472f72fd799ad3e5df88f5c577_2_1035x525.png 1.5x, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/68c04733154903472f72fd799ad3e5df88f5c577_2_1380x700.png 2x" data-dominant-color="F7E9B1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2498×1268 157 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<ul>
<li>AS31200 (Novotelecom) <a href="https://explorer.ooni.org/chart/mat?probe_cc=RU&amp;probe_asn=AS31200&amp;since=2023-03-01&amp;until=2023-09-12&amp;time_grain=day&amp;axis_x=measurement_start_day&amp;test_name=torsf" rel="noopener nofollow ugc">worked better between 2023-03 and 2023-05 but fails almost all tests since</a>:</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1.png" data-download-href="https://ntc.party/uploads/default/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1" title="image"><img src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1_2_690x350.png" alt="image" data-base62-sha1="oNshipfDK7FStndT65IHSyTS5yh" width="690" height="350" srcset="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1_2_690x350.png, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1_2_1035x525.png 1.5x, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/adcb59bf2f9cc0fd19a05eda59d59ae7d9a8bce1_2_1380x700.png 2x" data-dominant-color="F1F3D7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2498×1268 146 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<ul>
<li>AS51645 (CJSC ER-telecom Irkutsk) suddenly starting failing all tests <a href="https://explorer.ooni.org/chart/mat?probe_cc=RU&amp;probe_asn=AS51645&amp;since=2023-07-01&amp;until=2023-09-12&amp;time_grain=day&amp;axis_x=measurement_start_day&amp;test_name=torsf" rel="noopener nofollow ugc">starting 2023-07 to now</a>:</li>
</ul>
<p><div class="lightbox-wrapper"><a class="lightbox" href="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/7c10a70e5e29e3500011792183d2002c66abed56.png" data-download-href="https://ntc.party/uploads/default/7c10a70e5e29e3500011792183d2002c66abed56" title="image"><img src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/7c10a70e5e29e3500011792183d2002c66abed56_2_690x350.png" alt="image" data-base62-sha1="hHwSPcqLU4Bosg030ClyfyEuT1I" width="690" height="350" srcset="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/7c10a70e5e29e3500011792183d2002c66abed56_2_690x350.png, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/7c10a70e5e29e3500011792183d2002c66abed56_2_1035x525.png 1.5x, ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/7c10a70e5e29e3500011792183d2002c66abed56_2_1380x700.png 2x" data-dominant-color="F5EBB9"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2498×1268 144 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2023-09-11T16:44:08.163Z</td></tr><tr><td>welazsc</td><td><p>Блокируют <strong>входящий</strong> <code>ClientHello</code>, генерируемый pion/dtls, в рамках <code>WebRTC</code> сессии (определяется по <code>Binding Request</code>).</p>
<p>В <code>WebRTC</code> <code>ClientHello</code> всегда входящий, а число браузерных прокси меньше чем standalone. Поэтому тесты чаще показывают ошибку, а на практике может работать, зависит от типа NAT (ошибки определения).</p>
<p>В тестах OONI есть особенность, там некоторое время использовалась старая версия snowflake (c <code>HelloVerify</code>) которую новое правило уже не блокировало (тесты от 03/23), но при этом обновление ТСПУ могло где-то застрять. Поэтому в общей картине непонятно.</p></td><td>2023-09-11T17:27:07.028Z</td></tr><tr><td>cohosh</td><td><aside class="quote no-group" data-username="welazsc" data-post="2" data-topic="5648">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/c4cdca/48.png" class="avatar"> welazsc:</div>
<blockquote>
<p>В <code>WebRTC</code> <code>ClientHello</code> всегда входящий</p>
</blockquote>
</aside>
<p><code>ClientHello</code> иногда исходящий, <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/issues/40014#note_2765071" rel="noopener nofollow ugc">зависит от STUN negotiation</a>.</p>
<blockquote>
<p>В тестах OONI есть особенность, там некоторое время использовалась старая версия snowflake (c <code>HelloVerify</code>) которую новое правило уже не блокировало (тесты от 03/23), но при этом обновление ТСПУ могло где-то застрять. Поэтому в общей картине непонятно.</p>
</blockquote>
<p>спасибо, I wasn’t aware it was so out of date. I will follow up with OONI about the version of Snowflake and try to get it updated.</p></td><td>2023-09-11T18:24:01.175Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><pre><code class="lang-auto">2023/09/11 15:56:24 Warning: NAT checking failed for server at stun.l.google.com:19302: NAT discovery feature not supported: attribute not found
2023/09/11 15:56:25 NAT Type: unrestricted
2023/09/11 16:09:33 Warning: NAT checking failed for server at stun.dus.net:3478: NAT discovery feature not supported: attribute not found
2023/09/11 16:09:33 NAT Type: unrestricted
2023/09/11 16:09:43 NAT Type: unrestricted
2023/09/11 16:09:43 Warning: NAT checking failed for server at stun.antisip.com:3478: Error retrieveing server response: timed out waiting for response
2023/09/11 16:09:43 Warning: NAT checking failed for server at stun.voys.nl:3478: NAT discovery feature not supported: attribute not found
2023/09/11 16:09:43 NAT Type: unrestricted
</code></pre>
<p>Ростелеком с их роутером и PPPoE</p></td><td>2023-09-11T18:25:15.818Z</td></tr><tr><td>welazsc</td><td><aside class="quote no-group" data-username="cohosh" data-post="3" data-topic="5648">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/8e8cbc/48.png" class="avatar"> cohosh:</div>
<blockquote>
<p><a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/issues/40014#note_2765071" rel="noopener nofollow ugc">зависит от STUN negotiation</a>.</p>
</blockquote>
</aside>
<p>I see.</p>
<aside class="quote no-group" data-username="cohosh" data-post="3" data-topic="5648">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/8e8cbc/48.png" class="avatar"> cohosh:</div>
<blockquote>
<p>спасибо, I wasn’t aware it was so out of date. I will follow up with OONI about the version of Snowflake and try to get it updated.</p>
</blockquote>
</aside>
<p>It was “outdated” in March/April 2023 (while snowflake updated in Feb)<br>
I didn’t follow code changes since then.</p></td><td>2023-09-11T18:48:44.758Z</td></tr><tr><td>cohosh</td><td><p>I took a look at some of the recent anomalies, and it does look like they were the result of an out-of-date probe-engine (v 3.16.5), that did not yet have the <code>HelloVerify</code> fix . The current version of OONI does have this fix, but there are many clients that have not updated to newer versions.</p>
<p>I was following up on a tip that Snowflake was being blocked by DTLS fingerprint but it’s possible this was just based on OONI test results. I haven’t seen any direct reports of recent blocking since the <code>HelloVerify</code> fix.</p></td><td>2023-09-11T18:51:04.271Z</td></tr><tr><td>welazsc</td><td><p>Соотношение (предположительно) рабочих прокси к блокируемым 1:10</p></td><td>2023-09-11T18:58:00.733Z</td></tr><tr><td>cohosh</td><td><p>I see, I wasn’t aware that some proxies were being blocked still. Do you have packet captures of the DTLS handshake for blocked proxies? If it is due to the differences between browser proxies and standalone proxies, we should be able to fix that.</p></td><td>2023-09-11T19:01:37.724Z</td></tr><tr><td>welazsc</td><td><p>del</p></td><td>2023-09-11T19:06:03.699Z</td></tr><tr><td>welazsc</td><td><p>Роль DTLS у Pion выбирается еще сложнее</p><aside class="onebox githubpullrequest" data-onebox-src="https://github.com/pion/webrtc/pull/780">
  <header class="source">

      <a href="https://github.com/pion/webrtc/pull/780" target="_blank" rel="noopener nofollow ugc">github.com/pion/webrtc</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">



    <div class="github-icon-container" title="Pull Request">
      <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
    </div>

  <div class="github-info-container">



      <h4>
        <a href="https://github.com/pion/webrtc/pull/780" target="_blank" rel="noopener nofollow ugc">Parse DTLS setup in SetRemoteDescription</a>
      </h4>

    <div class="branches">
      <code>pion:master</code> ← <code>pion:issue-494</code>
    </div>

      <div class="github-info">
        <div class="date">
          opened <span class="discourse-local-date" data-format="ll" data-date="2019-08-11" data-time="18:27:51" data-timezone="UTC">06:27PM - 11 Aug 19 UTC</span>
        </div>

        <div class="user">
          <a href="https://github.com/Sean-Der" target="_blank" rel="noopener nofollow ugc">
            <img alt="Sean-Der" src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/58c8be7462d3854c7ea537212f2929c1fcddf09e.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="818EA6">
            Sean-Der
          </a>
        </div>

        <div class="lines" title="1 commits changed 3 files with 90 additions and 5 deletions">
          <a href="https://github.com/pion/webrtc/pull/780/files" target="_blank" rel="noopener nofollow ugc">
            <span class="added">+90</span>
            <span class="removed">-5</span>
          </a>
        </div>
      </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Take into consideration if remote is running DTLS as a
client/server. Before we<span class="show-more-container"><a href="https://github.com/pion/webrtc/pull/780" target="_blank" rel="noopener nofollow ugc" class="show-more">…</a></span><span class="excerpt hidden"> ignored this value and we could
enter cases where DTLS would never connect.

Resolves #494</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/pion/webrtc/pull/1258">
  <header class="source">

      <a href="https://github.com/pion/webrtc/pull/1258" target="_blank" rel="noopener nofollow ugc">github.com/pion/webrtc</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">



    <div class="github-icon-container" title="Pull Request">
      <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
    </div>

  <div class="github-info-container">



      <h4>
        <a href="https://github.com/pion/webrtc/pull/1258" target="_blank" rel="noopener nofollow ugc">Set role when actpass remote to DTLSRoleClient</a>
      </h4>

    <div class="branches">
      <code>pion:master</code> ← <code>pion:issue-494</code>
    </div>

      <div class="github-info">
        <div class="date">
          opened <span class="discourse-local-date" data-format="ll" data-date="2020-06-16" data-time="05:52:51" data-timezone="UTC">05:52AM - 16 Jun 20 UTC</span>
        </div>

        <div class="user">
          <a href="https://github.com/Sean-Der" target="_blank" rel="noopener nofollow ugc">
            <img alt="Sean-Der" src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/58c8be7462d3854c7ea537212f2929c1fcddf09e.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="818EA6">
            Sean-Der
          </a>
        </div>

        <div class="lines" title="1 commits changed 5 files with 27 additions and 4 deletions">
          <a href="https://github.com/pion/webrtc/pull/1258/files" target="_blank" rel="noopener nofollow ugc">
            <span class="added">+27</span>
            <span class="removed">-4</span>
          </a>
        </div>
      </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">This matches rfc5763, setup:active is RECOMMENDED

Relates to #494</p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
То есть по факту фиксирован ClientHello от прокси</p></td><td>2023-09-11T19:47:06.331Z</td></tr><tr><td>welazsc</td><td><p>Вот такой баг еще есть для прокси</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/issues/40272">
  <header class="source">
      <img src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/bbfde6df1468a30fb86055f131725b9fa770f75a.png" class="site-icon" data-dominant-color="787472" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/issues/40272" target="_blank" rel="noopener nofollow ugc">GitLab</a>
  </header>

  <article class="onebox-body">
    <img width="64" height="64" src="ooni-shows-blocking-of-snowflake-in-select-isps-in-russia-since-2023-02/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg" class="thumbnail onebox-avatar" data-dominant-color="F4C4BB">

<h3><a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/issues/40272" target="_blank" rel="noopener nofollow ugc">go snowflake picks 'restricted' but stun-nat-behaviour picked endpoint...</a></h3>

  <p>On my new Debian bookworm-rc2, I installed the stun-nat-behaviour testing tool:  $ go install...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Если много блокируемых прокси будут ложно restricted именно они будут чаще подключаться к unrestricted клиенту. Шанс выбрать рабочий прокси будет выше с уменьшением ложных restricted.</p></td><td>2023-09-11T20:26:03.101Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><pre><code class="lang-auto">C:\TOR\_arti\_target_release&gt;connection-checker.exe  --snowflake-path snowflake-client-2.6.1.exe

Testing Snowflake Tor connection...
Node: [ .4:80 via snowflake ed25519:tO9nYvNCAdAh9lPoEEv2pZ9BJq+YzmPAMY6pxoFrLuk $8838024498816a039fcbbab14e6f40a0843051fa]
Node: [ .194:9001+ ed25519:ZSKs1RfmtYhKXlxP24AZhJdmyZFFLNMKRkX0vrUSBXM $6e1cedc61f3707c549b88fb9380e4a750621fcb8]
Node: [ .202:9002+ ed25519:Ac+cEMHL0bwEq5UgB2cPO352OyDbPuVsd2eDZ0JVdPI $1a1eb9bcd6ba1d9bad65d6909fd127663c107bf1]
Snowflake Tor connection successful!
</code></pre>
<p>2.6.0 dont work at same ARTI build + ISP</p></td><td>2023-09-13T12:59:22.560Z</td></tr><tr><td>welazsc</td><td><p>Проверки в разные моменты времени? Сделайте серию с двумя версиями в случайном порядке.</p></td><td>2023-09-13T14:32:27.780Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>в разное время. “одновременно”<br>
как увидел 2.6.1 snowflake собрал+пробовал и так и так == пока работает только 2.6.1</p>
<p>C:\TOR_arti_target_release&gt;connection-checker.exe  --snowflake-path snowflake-client-2.6.0.exe</p>
<pre><code class="lang-auto">Testing Snowflake Tor connection...
error: tor: error connecting to Tor: Failed to obtain exit circuit for ports [scrubbed]: Tried to find or build a circuit 5 times, but all attempts failed
Attempt 1: Unable to select a guard relay: No usable guards. Rejected 20/21 as down, then 0/1 as pending, then 1/1 as unsuitable to purpose, then 0/0 with filter.
Attempt 2: Problem opening a channel to [scrubbed]: Channel for [scrubbed] timed out
Attempt 3: Circuit we were waiting for failed to complete: Problem opening a channel to [scrubbed]: Channel for [scrubbed] timed out
Attempt 4: Unable to select a guard relay: No usable guards. Rejected 21/21 as down, then 0/0 as pending, then 0/0 as unsuitable to purpose, then 0/0 with filter.
Attempt 5: Spent too long trying to construct circuits for this request
Snowflake Tor connection FAILED
</code></pre>
<pre><code class="lang-auto">2023-09-13T14:42:51Z  WARN tor_guardmgr::guard: Could not connect to guard [192.0.2.4:80 via snowflake ed25519:tO9nYvNCAdAh9lPoEEv2pZ9BJq+YzmPAMY6pxoFrLuk $8838024498816a039fcbbab14e6f40a0843051fa]. We'll retry later, and let you know if it succeeds.
2023-09-13T14:42:52Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] offer created
2023-09-13T14:42:52Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] trying a new proxy: timeout waiting for DataChannel.OnOpen
2023-09-13T14:42:52Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] trying a new proxy: timeout waiting for DataChannel.OnOpen
2023-09-13T14:42:52Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] broker rendezvous peer received
2023-09-13T14:43:02Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] offer created
2023-09-13T14:43:02Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] trying a new proxy: timeout waiting for DataChannel.OnOpen
2023-09-13T14:43:02Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] broker rendezvous peer received
2023-09-13T14:43:12Z  INFO tor_ptmgr::ipc::sealed: [pt snowflake-client] trying a new proxy: timeout waiting for DataChannel.OnOpen
</code></pre></td><td>2023-09-13T14:39:47.336Z</td></tr><tr><td>welazsc</td><td><p>В 2.6.1 регрессия, клиент опять шлет <code>Hello Verify Request</code>. Но работает не поэтому. Действующее правило блокирует раньше, если может в ожидание DTLS. Там что-то еще сломано. Что у вас с NAT по версии 2.6.1?</p></td><td>2023-09-13T20:29:57.197Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>тут ошибка закралась. у меня несколько АРТИ билдов</p>
<p>работает == соединяется и открываются интернет сайты.<br>
using runtime: Tokio <strong>Rustls</strong> Runtime { … }<br>
optional features: static-sqlite</p>
<p>вроде как “работает” == соединяется судя по логам с snowflake. но curl то таймаут выдает то другие ошибки<br>
using runtime: Tokio <strong>NativeTls</strong> Runtime { … }<br>
optional features: static-sqlite, <strong>static-native-tls</strong></p>
<p>2.6.1 + rustls == открываются сайты через ТОР</p>
<pre><code class="lang-auto">2023/09/13 20:37:02 Warning: NAT checking failed for server at stun.sonetel.com:3478: Error retrieveing server response: timed out waiting for response
2023/09/13 20:37:12 Warning: NAT checking failed for server at stun.altar.com.pl:3478: Error completing roundtrip map test: timed out waiting for response
2023/09/13 20:37:12 NAT Type: unrestricted
2023/09/13 20:37:22 Warning: NAT checking failed for server at stun.l.google.com:19302: NAT discovery feature not supported: attribute not found
2023/09/13 20:37:22 Warning: NAT checking failed for server at stun.sonetel.net:3478: Error retrieveing server response: timed out waiting for response
2023/09/13 20:37:23 NAT Type: unrestricted
</code></pre>
<p>2.6.1 + native-tls (windows10) иногда пишет что якобы находит мосты. но сайты через АРТИ не работают</p>
<pre><code class="lang-auto">2023/09/13 20:44:26 NAT Type: unrestricted
2023/09/13 20:44:26 NAT Type: unrestricted
2023/09/13 20:44:36 Warning: NAT checking failed for server at stun.dus.net:3478: NAT discovery feature not supported: attribute not found
2023/09/13 20:44:36 Warning: NAT checking failed for server at stun.voys.nl:3478: NAT discovery feature not supported: attribute not found
2023/09/13 20:44:36 NAT Type: unrestricted
2023/09/13 20:44:37 NAT Type: unrestricted
2023/09/13 20:44:46 NAT Type: unrestricted
2023/09/13 20:44:56 Warning: NAT checking failed for server at stun.l.google.com:19302: NAT discovery feature not supported: attribute not found
2023/09/13 20:45:06 Warning: NAT checking failed for server at stun.voipgate.com:3478: Error retrieveing server response: timed out waiting for response
2023/09/13 20:45:06 NAT Type: unrestricted
</code></pre></td><td>2023-09-13T20:42:11.609Z</td></tr><tr><td>welazsc</td><td><p>Три последних, известных, правила блокировки (финальное условие)</p>
<p>Feb, <code>Hello Verify Request</code> (в обе стороны?)<br>
Mar, <code>Server Hello</code> (исходящий)<br>
May, <code>Client Hello</code> (входящий)</p>
<p>Проверить применяемое правило (если это не новое и не трансграничный гибрид) можно, наблюдая за своим UDP трафиком в Wireshark.</p>
<p>Берете 2.6.0 и смотрите. Если прилетел <code>Client Hello</code> (137 байт, важно) это скорей всего НЕ 3 вариант, или ошибка блокиратора, лучше наблюдать подольше. Если связь с пиром застряла на посылаемых и принимаемых <code>Binding Request</code>, <code>Binding Success Response</code> это 3 вариант. Если видно много (больше трех) посылаемых <code>Server Hello</code> это 2 вариант. <s>1 вариант в 2.6.0 не случается.</s></p>
<p>Пиры могут сбоить сами по себе и напоминать 3 вариант. Диагностируется длительным наблюдением с выявлением повторяющихся сценариев.</p></td><td>2023-09-15T21:21:12.595Z</td></tr><tr><td>welazsc</td><td><aside class="quote no-group" data-username="welazsc" data-post="17" data-topic="5648">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/c4cdca/48.png" class="avatar"> welazsc:</div>
<blockquote>
<p>Берете 2.6.0 и смотрите.</p>
</blockquote>
</aside>
<p>В стабильной версии браузера (12.5.4) поставляют 2.5.1 версию snowflake. Начинать нужно оттуда.</p></td><td>2023-09-16T12:33:52.911Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p><a href="https://archive.torproject.org/tor-package-archive/torbrowser/13.0a3/tor-expert-bundle-windows-x86_64-13.0a3.tar.gz" class="onebox" target="_blank" rel="noopener nofollow ugc">https://archive.torproject.org/tor-package-archive/torbrowser/13.0a3/tor-expert-bundle-windows-x86_64-13.0a3.tar.gz</a><br>
2.6.0 snowflake</p></td><td>2023-09-16T14:10:53.280Z</td></tr><tr><td>welazsc</td><td><p>Это alpha.</p>
<p>Ваши логи содержат таймаут WebRTC сессии.<br>
Между 2.6.0 и 2.6.1 нет различий в пакетах STUN, DTLS. Обе посылают <code>Hello Verify Request</code>, <code>Server Hello</code> идентичны.</p></td><td>2023-09-16T14:21:58.541Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>arti и native-tls (windows10) и rustls на данный момент на РТ/Калуга соединяются<br>
через все клиенты что у меня есть 2.5.1 / 2.6.0 / 2.6.1<br>
хотя по тестам через rustls сайты открываются. а вот native-tls все таки часто ругается на таймаут</p>
<p>тор.ехе с 2.6.1 всё еще пытается соединтся…</p>
<pre><code class="lang-auto">Sep 16 19:54:22.000 [notice] Bootstrapped 25% (requesting_status): Asking for networkstatus consens»
Sep 16 19:54:22.000 [notice] new bridge descriptor 'crusty7' (fresh): $8838024498816A039FCBBAB14E6F»
Sep 16 19:54:22.000 [notice] Bootstrapped 45% (requesting_descriptors): Asking for relay descriptors
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Ignoring directory request, since no bridge nodes are available yet.   
Sep 16 19:54:22.000 [notice] Bootstrapped 54% (loading_descriptors): Loading relay descriptors      
Sep 16 19:54:25.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 19:54:25.000 [notice] Managed proxy "C:\Tor\client.exe": broker rendezvous peer received     
Sep 16 19:54:26.000 [notice] Managed proxy "C:\Tor\client.exe": connected                           
Sep 16 19:54:27.000 [notice] new bridge descriptor 'flakey8' (fresh): $2B280B23E1107BB62ABFC40DDCC8»
Sep 16 19:54:50.000 [notice] Managed proxy "C:\Tor\client.exe": trying a new proxy: no messages rec»
Sep 16 19:55:00.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 19:55:05.000 [notice] Managed proxy "C:\Tor\client.exe": broker rendezvous peer received     
Sep 16 19:55:15.000 [notice] Managed proxy "C:\Tor\client.exe": trying a new proxy: timeout waiting»
Sep 16 19:55:15.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 19:55:15.000 [notice] Managed proxy "C:\Tor\client.exe": broker rendezvous peer received     
Sep 16 19:55:16.000 [notice] Managed proxy "C:\Tor\client.exe": connected                           
Sep 16 19:55:43.000 [notice] Managed proxy "C:\Tor\client.exe": trying a new proxy: no messages rec»
Sep 16 19:55:45.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 19:55:55.000 [notice] Managed proxy "C:\Tor\client.exe": broker failure timed out waiting fo»
Sep 16 19:55:56.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 19:55:57.000 [notice] Managed proxy "C:\Tor\client.exe": broker rendezvous peer received     
Sep 16 19:56:00.000 [notice] Managed proxy "C:\Tor\client.exe": connected                           
Sep 16 19:56:28.000 [notice] Bootstrapped 60% (loading_descriptors): Loading relay descriptors      
Sep 16 19:56:33.000 [notice] No circuits are opened. Relaxed timeout for circuit 4 (a General-purpo»
Sep 16 19:56:35.000 [notice] Bootstrapped 66% (loading_descriptors): Loading relay descriptors
</code></pre>
<pre><code class="lang-auto">Sep 16 20:01:08.000 [warn] Bad element "$367D0FAA87" while parsing a node family.                   
Sep 16 20:01:08.000 [warn] Bad element "$F852A2A2EE6EA00BDE63893AE9B8E85C23F728" while parsing a no»
Sep 16 20:01:08.000 [notice] Bootstrapped 72% (loading_descriptors): Loading relay descriptors      
Sep 16 20:01:08.000 [warn] Bad element "$62823CA61A9C5282" while parsing a node family.             
Sep 16 20:01:08.000 [notice] Bootstrapped 75% (enough_dirinfo): Loaded enough directory info to bui»
Sep 16 20:01:08.000 [warn] parse error: Malformed object: missing object end line                   
Sep 16 20:01:08.000 [warn] Unparseable microdescriptor found in download or generated string        
Sep 16 20:01:09.000 [warn] Bad element "$EE2ABD66DDF85DA2" while parsing a node family.             
Sep 16 20:01:09.000 [notice] Bootstrapped 76% (ap_conn_pt): Connecting to pluggable transport to bu»
Sep 16 20:01:09.000 [notice] Bootstrapped 77% (ap_conn_done_pt): Connected to pluggable transport t»
Sep 16 20:01:09.000 [notice] Bootstrapped 85% (ap_conn_done): Connected to a relay to build circuits
Sep 16 20:01:09.000 [notice] Managed proxy "C:\Tor\client.exe": offer created                       
Sep 16 20:01:10.000 [notice] Managed proxy "C:\Tor\client.exe": broker rendezvous peer received     
Sep 16 20:01:10.000 [notice] Managed proxy "C:\Tor\client.exe": connected                           
Sep 16 20:01:11.000 [notice] Bootstrapped 90% (ap_handshake_done): Handshake finished with a relay »
Sep 16 20:01:11.000 [notice] Bootstrapped 95% (circuit_create): Establishing a Tor circuit          
Sep 16 20:01:12.000 [notice] Bootstrapped 100% (done): Done
</code></pre>
<pre><code class="lang-auto">2023/09/16 16:54:19 Warning: NAT checking failed for server at stun.dus.net:3478: NAT discovery feature not supported: attribute not found                                                              
2023/09/16 16:54:20 NAT Type: unrestricted                                                          
2023/09/16 16:54:30 Warning: NAT checking failed for server at stun.altar.com.pl:3478: Error completing roundtrip map test: timed out waiting for response                                              
2023/09/16 16:54:40 Warning: NAT checking failed for server at stun.stunprotocol.org:3478: Error completing roundtrip map test: timed out waiting for response                                          
2023/09/16 16:54:40 NAT Type: unrestricted                                                          
2023/09/16 17:01:09 Warning: NAT checking failed for server at stun.dus.net:3478: NAT discovery feature not supported: attribute not found                                                              
2023/09/16 17:01:19 Warning: NAT checking failed for server at stun.antisip.com:3478: Error retrieveing server response: timed out waiting for response                                                 
2023/09/16 17:01:19 NAT Type: unrestricted
</code></pre></td><td>2023-09-16T17:02:05.219Z</td></tr>
    </table>
      </body>
    </html>