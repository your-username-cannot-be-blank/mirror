
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>wireguard</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>TwoFace(Егор)</td><td><p>Добрый день!</p>
<p>Сегодня на мобильном операторе Beeline наблюдается проблемы в работе WireGuard. Такую же проблему выявили пользователи 4PDA.</p>
<p>У меня два договора Билайн:</p>
<p>Первый - на домашний интернет в квартире (московская область), если подключаешься к интернету через него, то WireGuard, поднятый на своем VDS, исправно работает (<strong>телефон</strong>, планшет, ПК).</p>
<p>Второй договор - мобильный интернет и связь (чисто для телефона), вот по нему уже WireGuard работать не хочет. Если же я подключаюсь по WiFi к домашнему интернету и включаю WireGuard, то все работает исправно.</p>
<p>Сервер один, конфигурационный файл тоже.</p>
<p>Также друг дал конфигурационный файл своего сервера WireGuard, на телефоне он работает исправно, и еще несколько файлов, которые дали на 4PDA.</p>
<p>Как можно определить проблему?</p></td><td>2023-07-31T18:11:38.060Z</td></tr><tr><td>Xunlei</td><td><p>Проблема — мобильный оператор блокирует легко узнаваемый по первым 8 байт хэндшейка протокол Wireguard.</p></td><td>2023-07-31T22:57:33.498Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>Можно что то “улучшить” в настройках для исправления данной ситуации?</p></td><td>2023-08-01T05:40:09.604Z</td></tr><tr><td>Xunlei</td><td><p>Смотрите в сторону ObfuscateKey или ListenPortTCP + ObfuscateTCP.</p></td><td>2023-08-01T07:58:49.725Z</td></tr><tr><td>0ka(0ka)</td><td><p>11:35 мск, перестал подключаться WG к oracle vps sweden на AS 12389 (сз рт), 48780 (сз билайн?), подключается на AS 45027 (ру хостинг). Трассировка icmp/tcp/udp на порт WG проходит. По wireshark видно что сервер не отвечает, видно только первый пакет от клиента.</p></td><td>2023-08-01T10:11:18.219Z</td></tr><tr><td>ValdikSS</td><td><aside class="quote no-group" data-username="TwoFace" data-post="3" data-topic="4968" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/twoface/48/2658_2.png" class="avatar"> TwoFace:</div>
<blockquote>
<p>Можно что то “улучшить” в настройках для исправления данной ситуации?</p>
</blockquote>
</aside>
<p>Самый простой вариант — отправить любой мусор первым UDP-пакетом, а затем устанавливать соединение.</p>
<ol>
<li>В конфигурационном файле клиента задать статичный <code>ListenPort</code>, например, <code>ListenPort = 56789</code></li>
<li>Выполнить <code>sudo nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port DEST_PORT DEST_IP</code></li>
<li>Подключаться.</li>
</ol></td><td>2023-08-01T11:52:42.272Z</td></tr><tr><td>0ka(0ka)</td><td><p>рт сз<br>
<a class="attachment" href="wireguard/oDUC994GLNwS56z7b9OCJYaYznD.cap">rt.cap</a> (864 байта)<br>
трафик nping (даже после 2-х минут пингов) перестаёт доходить до сервера после попытки подключения wg</p>
<p>а на билайне сработало</p>
<p>edit: на рт wg смог подключиться после 310 секунд nping. И еще надо добавить keepaliveinterval в peer, чтобы wg не прерывался после простоя</p></td><td>2023-08-01T17:07:32.841Z</td></tr><tr><td>Lain(Lain Iwakura)</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="6" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<ul>
<li>В конфигурационном файле клиента задать статичный <code>ListenPort</code>, например, <code>ListenPort = 56789</code></li>
<li>Выполнить <code>sudo nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port DEST_PORT DEST_IP</code></li>
<li>Подключаться.</li>
</ul>
</blockquote>
</aside>
<p>Got tested out on android 10<br>
Termux and nmap<br>
Works well, wg app connected as expects</p>
<p>Протестировано на android 10<br>
Termux и nmap<br>
Работает хорошо, wg app подключается как ожидается</p>
<p>Installed packages</p>
<p>–<br>
ii  termux-am                  0.4             all          Android Oreo-compatible am command reimplementation<br>
ii  termux-am-socket           1.5.0           aarch64      A faster version of am with less features that only works while Termux is running<br>
ii  termux-auth                1.4-2           aarch64      Password authentication library and utility for Termux<br>
ii  termux-exec                1:1.0           aarch64      An execve() wrapper to make /bin and /usr/bin shebangs work<br>
ii  termux-keyring             3.11            all          GPG public keys for the official Termux repositories<br>
ii  termux-licenses            2.0-3           all          Contains LICENSE files for common licenses<br>
ii  termux-tools               1.37.0          all          Basic system tools for Termux</p>
<p>–<br>
ii  nmap                       7.94            aarch64      Utility for network discovery and security auditing<br>
ii  nmap-ncat                  7.94            aarch64      Feature-packed networking utility which reads and writes data across networks from the command line</p></td><td>2023-08-01T18:24:43.733Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>Т.е. я в файле .conf, где графа [peer] добавляю строку ListenPort = 56789, далее подключаюсь серверу и прописываю команду из пункта 2, верно?</p></td><td>2023-08-01T19:01:36.955Z</td></tr><tr><td>0ka(0ka)</td><td><p>нет, ListenPort надо в [Interface]. Подключение к серверу через WG это самый последний пункт. Чтобы команда сработала (на винде sudo нужно убрать) нужен установленный nmap и отредактированые DEST_PORT DEST_IP на порт и айпи сервера.</p></td><td>2023-08-01T19:44:09.413Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>Starting Nping 0.7.80 ( <a href="https://nmap.org/nping" class="inline-onebox" rel="noopener nofollow ugc">Nping — Network packet generation tool &amp; ping utility</a> ) at 2023-08-01 23:10 MSK<br>
SENT (0.0589s) UDP 172.31.0.121:56789 &gt; 141.94.63.228:56789 ttl=64 id=17869 iplen=44<br>
RCVD (0.1196s) ICMP [141.94.63.228 &gt; 172.31.0.121 Port 56789 unreachable (type=3/code=3) ] IP [ttl=46 id=39407 iplen=72 ]</p>
<p>Max rtt: 60.741ms | Min rtt: 60.741ms | Avg rtt: 60.741ms<br>
Raw packets sent: 1 (44B) | Rcvd: 1 (72B) | Lost: 0 (0.00%)<br>
Nping done: 1 IP address pinged in 1.14 seconds</p></td><td>2023-08-01T20:12:50.124Z</td></tr><tr><td>0ka(0ka)</td><td><p>исправил прошлый пост. подожди 5 минут или измени ListenPort перед новой попыткой.</p></td><td>2023-08-01T20:20:16.815Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>sudo nping --udp --count 1 --data-length 16 --source-port 51820 --dest-port 51820 141.94.63.228</p>
<p>Starting Nping 0.7.80 ( <a href="https://nmap.org/nping" class="inline-onebox" rel="noopener nofollow ugc">Nping — Network packet generation tool &amp; ping utility</a> ) at 2023-08-01 23:37 MSK<br>
SENT (0.0469s) UDP 172.31.0.121:51820 &gt; 141.94.63.228:51820 ttl=64 id=20537 iplen=44</p>
<p>Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A<br>
Raw packets sent: 1 (44B) | Rcvd: 0 (0B) | Lost: 1 (100.00%)<br>
Nping done: 1 IP address pinged in 1.12 seconds</p>
<p>Вроде нигде не ошибся.<br>
При попытке подключения WireGuard клиент пишет что соединение удалось, но интернет рубится напрочь.<br>
Значение ListenPort я ведь должен везде установить тот, который указан в приложенной фотографии, верно?<br>
<img src="wireguard/8444f58401427c74f565b57401b100ac540554de.png" alt="image" data-base62-sha1="iS6LKxKDTtDQuBQhx9mtAXlrog6" width="234" height="32"></p></td><td>2023-08-01T20:41:16.883Z</td></tr><tr><td>0ka(0ka)</td><td><p>Порт wg сервера это одно. ListenPort/SourcePort это другое. Они скорее всего могут быть одинаковыми, но я тестил с разными. Меняй ListenPort/SourcePort и пробуй снова, wg подключай только после nping и сразу же</p>
<p>nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port 1234 141.94.63.228</p>
<p>[Interface]<br>
ListenPort = 56789<br>
[Peer]<br>
Endpoint = 141.94.63.228:1234</p>
<p>не работает? пробуй count 310 и data-length 1400. И кстати wg клиент и nping должны быть на одном устройстве, с разных не выйдет</p></td><td>2023-08-01T21:47:24.967Z</td></tr><tr><td>akumanokuma</td><td><p>Могу подтвердить, что наблюдаю блокировку Wireguard до VPS во Франции (OVH) на случайном порту у Ростелекома (12389). <a href="https://github.com/wangyu-/udp2raw" rel="noopener nofollow ugc">udp2raw</a> с MTU 1280 пока что помогают.</p></td><td>2023-08-01T22:04:43.891Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>Max rtt: N/A | Min rtt: N/A | Avg rtt: N/A<br>
Raw packets sent: 1000 (1.428MB) | Rcvd: 0 (0B) | Lost: 1000 (100.00%)<br>
Nping done: 1 IP address pinged in 1001.26 seconds</p>
<p>Для интереса заказал готовый сервер с WireGuard в КЗ. Все работает. Проверял на сайтах овд инфо, <a href="http://medium.com" rel="noopener nofollow ugc">medium.com</a>, twitter для теста. Странно.</p></td><td>2023-08-01T22:25:39.693Z</td></tr><tr><td>TwoFace(Егор)</td><td><p><a href="https://github.com/wangyu-/udp2raw" rel="noopener nofollow ugc">udp2raw</a> это надо устанавливать на чистом сервере или как-то оборачивается на WG?</p></td><td>2023-08-01T22:27:05.910Z</td></tr><tr><td>0ka(0ka)</td><td><p>Первая часть поста Очень информативна, к чему это?</p></td><td>2023-08-01T23:55:18.000Z</td></tr><tr><td>TwoFace(Егор)</td><td><p>Если это про самый первый пост, то просто не мог отследить логику работы. По проводу работало, по мобильной связи нет, хотя сервер один и тот же. Но вчера уже все отвалилось.</p></td><td>2023-08-02T05:40:33.153Z</td></tr><tr><td>akumanokuma</td><td><p>Нужно и на сервере, и на клиенте.</p></td><td>2023-08-02T08:17:03.011Z</td></tr><tr><td>0x99(Jabas)</td><td><p>Сегодня столкнулись с подобным на мобильных сетях мегафона и мтс’а в Калининграде. Каково есть решение для ios и android ? Если с линуксом и виндой nmap/nping. То как быть на телефонах ?</p></td><td>2023-08-07T06:57:02.280Z</td></tr><tr><td>s26aleynicov(s26aleynicov)</td><td><p>Правим конфиг wg, добавляем ListenPort = 56789 в секцию [Interface]</p>
<p>ставим termix из плэй маркет</p>
<p>в термикс:<br>
apt-get update<br>
apt-get upgrade<br>
pkg install nmap</p>
<p>nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port ВашПортWG ВашАдресWG</p>
<p>Переключаемся в wg и обмениваемся рукопожатием. Тестировал на мобильном Билайн ЮФО, с пятницы не проходило рукопожатие.</p>
<p>За решение благодарю ValdikSS и участников обсуждения</p></td><td>2023-08-08T08:02:13.719Z</td></tr><tr><td>Nick_Neck(Blum1337)</td><td><p>Спасибо, тоже всё заработало, но так подозреваю что не надолго, рано или поздно это прикроют. Пытаюсь через shadowsocks-libev настроить, но что-то пока не выходит, может кто уже поднял shadow socks с wireguard и есть ссылки на рабочие инструкции?</p></td><td>2023-08-08T09:37:58.375Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="6" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<ol>
<li>Выполнить <code>sudo nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port DEST_PORT DEST_IP</code></li>
<li>Подключаться.</li>
</ol>
</blockquote>
</aside>
<p>а как эти команды выполнит в windows</p></td><td>2023-08-08T09:57:39.371Z</td></tr><tr><td>Xunlei</td><td><p>Надо установить <a href="https://nmap.org/download#windows" rel="noopener nofollow ugc">Nmap</a>.</p></td><td>2023-08-08T11:05:05.483Z</td></tr><tr><td>s26aleynicov(s26aleynicov)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/unixhostpro/shadowsocks-simple-install">
  <header class="source">

      <a href="https://github.com/unixhostpro/shadowsocks-simple-install" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/442344f0ec2ceca542c5d4cc4efbaa574de337c7_2_690x344.png" class="thumbnail" data-dominant-color="F3F5F2">

  <h3><a href="https://github.com/unixhostpro/shadowsocks-simple-install" target="_blank" rel="noopener nofollow ugc">GitHub - unixhostpro/shadowsocks-simple-install: Simplest way to install shadowsocks socket 5 proxy</a></h3>

    <p><span class="github-repo-description">Simplest way to install shadowsocks socket 5 proxy</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>вот по этому скрипту поставил, но wg мне все же больше нравился, shadowsocks не хватает множественной выдачи ключей (чтоб для каждого пользователя свой ключ был)</p></td><td>2023-08-08T11:42:20.040Z</td></tr><tr><td>Nick_Neck(Blum1337)</td><td><p>Вы немного не поняли. Пытаюсь поверх shadowsocks пускать wg.</p></td><td>2023-08-08T11:49:46.124Z</td></tr><tr><td>s26aleynicov(s26aleynicov)</td><td><p>пардон, самому интересно, попытался поднять вчера аналогичное, но  wg на андроид девайсе упорно не видел локалхост через прокси</p></td><td>2023-08-08T11:56:25.665Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>у меня на nmap выдает вот это после ввода команды<br>
C:\Program Files (x86)\Nmap\nmap.exe: unrecognized option `–udp’<br>
See the output of nmap -h for a summary of options</p></td><td>2023-08-08T12:43:01.915Z</td></tr><tr><td>max41479</td><td><p>Команда будет выглядеть так:</p>
<pre><code class="lang-auto">"C:\Program Files (x86)\Nmap\nping.exe" --udp --count 1 --data-length 16 --source-port SRC_PORT --dest-port DEST_PORT DEST_IP  --unprivileged
</code></pre></td><td>2023-08-08T12:55:26.744Z</td></tr><tr><td>ValdikSS</td><td><p>Выполнить подобную команду можно через любую netcat-подобную программу, не принципиально, чтобы это был ncat. Главное — отправить любой пакет с мусорными данными с заданного порта источника на заданный IP-адрес и порт назначения.</p></td><td>2023-08-08T12:59:26.866Z</td></tr><tr><td>Norkoz</td><td><p>Привет. WG работает с пингом на теле2, спасибо! На iOS ставил для пинга SocketTool и UDP/tcp/rest network utility. Любая из них работает.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="wireguard/4d0a61932a6f141ae7ea522d5bb04af679289614.jpeg" data-download-href="https://ntc.party/uploads/default/4d0a61932a6f141ae7ea522d5bb04af679289614" title="IMG_5955"><img src="wireguard/4d0a61932a6f141ae7ea522d5bb04af679289614_2_689x277.jpeg" alt="IMG_5955" data-base62-sha1="aZx0pUhdi9RzhzMmLHpVIpCdP3S" width="689" height="277" srcset="wireguard/4d0a61932a6f141ae7ea522d5bb04af679289614_2_689x277.jpeg, wireguard/4d0a61932a6f141ae7ea522d5bb04af679289614_2_1033x415.jpeg 1.5x, wireguard/4d0a61932a6f141ae7ea522d5bb04af679289614.jpeg 2x" data-dominant-color="EBEDF0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_5955</span><span class="informations">1283×516 71.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2023-08-09T00:11:36.581Z</td></tr><tr><td>ladykolotushkina</td><td><aside class="quote no-group" data-username="0ka" data-post="7" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>на рт wg смог подключиться после 310 секунд nping.</p>
</blockquote>
</aside>
<p>Значит на вашем рт для оракла было активировано другое правило – ожидают входящие для проверки. В таком случае исходящий активирует слежку, но ничего не может изменить. Секунды это таймаут для ожидания. Для проверки делайте дампы на сервере тоже.</p></td><td>2023-08-10T18:28:44.882Z</td></tr><tr><td>myrrc(Mike Kot)</td><td><p>А где в первом приложении возможность указать listen port? Listening port вроде бы только про возможность слушать на upd порте, а не указание его как исходного для отправки</p></td><td>2023-08-16T13:36:03.744Z</td></tr><tr><td>Norkoz</td><td><p>Это в настройках wg на клиенте надо сделать<br>
<div class="lightbox-wrapper"><a class="lightbox" href="wireguard/55e9e60a30ab02a547124cefcf577a4c1c4b8394.jpeg" data-download-href="https://ntc.party/uploads/default/55e9e60a30ab02a547124cefcf577a4c1c4b8394" title="IMG_6071"><img src="wireguard/55e9e60a30ab02a547124cefcf577a4c1c4b8394_2_689x286.jpeg" alt="IMG_6071" data-base62-sha1="cg1I2PbxcnTiurMfCoUomcHaFeI" width="689" height="286" srcset="wireguard/55e9e60a30ab02a547124cefcf577a4c1c4b8394_2_689x286.jpeg, wireguard/55e9e60a30ab02a547124cefcf577a4c1c4b8394_2_1033x429.jpeg 1.5x, wireguard/55e9e60a30ab02a547124cefcf577a4c1c4b8394.jpeg 2x" data-dominant-color="1D1D1F"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_6071</span><span class="informations">1283×532 34.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2023-08-16T15:05:15.160Z</td></tr><tr><td>myrrc(Mike Kot)</td><td><p>Нет, вопрос в другом. В приложении wireguard listen port у меня выставлен, но идея обмана ТСПУ вроде бы в том, чтобы пинговать vpn-сервер с того же порта, на котором wireguard слушает, а такой функциональности в udp/tcp/rest network utility я не наблюдаю (отправить на заданный порт – да, с заданного порта – нет).<br>
Просто отправка в моем случае не работает, к сожалению, сессия все равно рвется.</p></td><td>2023-08-16T15:17:20.119Z</td></tr><tr><td>Snawoot</td><td><p>Был бы признателен, если кто-то сможет попробовать и проверить это решение: <a href="https://github.com/Snawoot/wg-decoy" class="inline-onebox" rel="noopener nofollow ugc">GitHub - Snawoot/wg-decoy: Decoy handshake for Wireguard</a></p>
<p>Смысл его работы заключается в том, чтобы обменяться короткими пакетами в начале UDP-сессии с сервером wireguard. Вероятнее всего, это должно сбить с толку фильтр хендшейков, по которым детектят вайргард.</p></td><td>2023-08-27T14:05:37.097Z</td></tr><tr><td>Snawoot</td><td><p>И ещё один вариант обхода блокировки Wireguard и UDP OpenVPN – завернуть их в <a href="https://en.wikipedia.org/wiki/Datagram_Transport_Layer_Security" rel="noopener nofollow ugc">DTLS</a>. Вот обёртка, которая позволяет это сделать: <a href="https://github.com/Snawoot/dtlspipe" class="inline-onebox" rel="noopener nofollow ugc">GitHub - Snawoot/dtlspipe: Generic DTLS wrapper for UDP sessions</a>.</p>
<p>Было бы хорошо, если кто-то смог бы протестировать и сообщить о результатах.</p></td><td>2023-08-31T07:07:40.838Z</td></tr><tr><td>atomlab(Atomlab)</td><td><p>Я попробовал <a href="https://github.com/Snawoot/dtlspipe" rel="noopener nofollow ugc">dtlspipe</a> в нескольких вариантах. У меня отлично<br>
работает. Радует, что настройка очень простая. Скорость конечно падает, но для работы мне подходит. Тестировал на MTC/Tinkoff Mobile.</p>
<p>Относительная разница в скорости:</p>
<ul>
<li><em>dtlspipe + wireguard</em> - 2 Mbit/s</li>
<li><em>cloak + dtlspipe + wireguard</em> - 2 Mbit/s</li>
<li><em>cloak + wireguard</em> - 7 Mbit/s</li>
</ul></td><td>2023-08-31T10:16:33.459Z</td></tr><tr><td>User_96c9e3c964bf</td><td><p>wg можно завернуть в <a href="https://github.com/wangyu-/udp2raw" class="inline-onebox" rel="noopener nofollow ugc">GitHub - wangyu-/udp2raw: A Tunnel which Turns UDP Traffic into Encrypted UDP/FakeTCP/ICMP Traffic by using Raw Socket,helps you Bypass UDP FireWalls(or Unstable UDP Environment)</a> как по мне так это несет самые низкие накладные расходы, скорость почти не просаживается</p></td><td>2023-08-31T10:48:48.394Z</td></tr><tr><td>Snawoot</td><td><p>Там желательно MTU у wireguard поменьше поставить. Например <code>MTU = 1280</code> в секции <code>[Interface]</code>.</p>
<p>Плюс наилучших результатов – 71.59 Mbps на проводе я достигал с опцией на клиенте <code>-ciphers TLS_PSK_WITH_AES_128_GCM_SHA256</code> в то время как почти все остальные шифры давали где-то 50 Mbps. <code>TLS_PSK_WITH_AES_128_CCM_8</code> ещё давал 64.30 Mbps.</p>
<p>P.S. Опция <code>-ciphers</code> – новая, поэтому желательно обновиться на <a href="https://github.com/Snawoot/dtlspipe/releases/tag/v1.2.1" rel="noopener nofollow ugc">последнюю версию</a>.</p></td><td>2023-09-02T09:37:46.898Z</td></tr><tr><td>victormair</td><td><p>Здравствуйте, а как это сделать (метод dtlspipe и Udp2raw-tunnel), можете написать небольшую инструкцию, если нетрудно?<br>
Интересует рабочий вариант обхода блокировки Wireguard для Android и Windows.<br>
Я в этом деле новичок, если что)</p></td><td>2023-09-07T09:41:50.005Z</td></tr><tr><td>Xunlei</td><td><details>
<summary>
Пример настройки udp2raw сервера в Debian</summary>
<ol>
<li>Заливаете бинарник с гитхаба в домашний каталог</li>
<li>Выполняете команду установки в какой-нибудь каталог<br>
<code>sudo install -m 755 ~/udp2raw_amd64_hw_aes /usr/bin/</code></li>
<li>Создаёте файл службы <code>/usr/lib/systemd/system/udp2raw.service</code> примерно со следующим содержимым:</li>
</ol>
<pre><code class="lang-auto">[Unit]
Description=Service for udp2raw tunnel
Documentation=https://github.com/wangyu-/udp2raw
ConditionFileIsExecutable=/usr/bin/udp2raw_amd64_hw_aes
ConditionPathExists=/etc/udp2raw/server.conf
DefaultDependencies=no
After=firewalld.service networking.service

[Service]
Type=simple
User=nobody
Group=nogroup
ExecStart=/usr/bin/udp2raw_amd64_hw_aes --conf-file /etc/udp2raw/server.conf
PIDFile=/run/udp2raw.pid
AmbientCapabilities=CAP_NET_RAW CAP_NET_ADMIN
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre>
<ol start="4">
<li>Создаёте файл конфигурации <code>/etc/udp2raw/server.conf</code> примерно со следующим содержимым:</li>
</ol>
<pre><code class="lang-auto"># Server
-s
# Listen address
-l 0.0.0.0:&lt;порт сервера для прослушивания (правила брандмауэра не действуют)&gt;
# Remote address
-r 127.0.0.1:&lt;порт локального сервера WireGuard&gt;
--key &lt;случайно сгенерированный ключ-пароль без кавычек&gt;
--raw-mode faketcp
--hb-len &lt;какой-нибудь размер серверного пакета keep-alive&gt;
--mtu-warn 1500
</code></pre>
<ol start="5">
<li>Обновляете список служб командой<br>
<code>sudo systemctl daemon-reload</code></li>
<li>Добавляете службу в автоматический запуск<br>
<code>sudo systemctl enable udp2raw.service</code></li>
<li>Запускаете службу<br>
<code>sudo systemctl start udp2raw.service</code></li>
<li><code>?????</code></li>
<li>PROFIT</li>
</ol>
</details>
<details>
<summary>
Пример настройки udp2raw клиента в Windows</summary>
<ol>
<li>Скачиваете бинарник с гитхаба</li>
<li>Создаёте ярлык <code>"C:\Program Files\udp2raw\udp2raw_mp_wepoll.exe" --conf-file ./config/client.conf</code></li>
<li>Создаете файл конфигурации <code>C:\Program Files\udp2raw\config\client.conf</code> примерно со следующим содержимым:</li>
</ol>
<pre><code class="lang-auto"># Client
-c
# Listen address
-l 127.0.0.1:&lt;порт прослушивания к которому будет присоединятся клиент WireGuard&gt;
# Remote address
-r &lt;ip адрес вашего сервера&gt;:&lt;порт прослушивания из серверной конфигурации&gt;
--key &lt;ключ-пароль из серверной конфигурации&gt;
--raw-mode faketcp
--hb-mode 1
--hb-len &lt;какой-нибудь размер клиентского пакета keep-alive&gt;
--mtu-warn 1500
</code></pre>
<ol start="4">
<li>Запускаете ярлык и убеждаетесь в установке соединения</li>
<li>Поключаете клиент WireGuard к адресу 127.0.0.1 и порту из клиентской конфигурации</li>
<li>Вручную подбираете MTU для WireGuard чтоб пакеты бегали</li>
<li><code>?????</code></li>
<li>PROFIT</li>
</ol>
</details>
<p>Ведром не пользуюсь, если пользоватся в домашней сети для браузинга, то можно поднять локальный socks5.</p></td><td>2023-09-07T16:27:27.081Z</td></tr><tr><td>shsv88(Сергей)</td><td><p>Доброго времени суток! Нету информации по мотивам блокировки WireGuard  - хотят блокировать только трафик заграничный? или местный тоже заблочат?<br>
Алтайский край, Ростелеком - WireGuard  до германии перестал работать в классическом виде два дня назад. Корпоративная сеть на WireGuard  продолжает работает. Задался вопросом пора или нет уже переделывать сеть на работе, связь между 15 филиалами. Что думаете ?</p></td><td>2023-09-09T10:23:40.430Z</td></tr><tr><td>welazsc</td><td><p>Чебурнетную <em>хотят</em> оставить. Но эта же контора блокировала локалхост, поэтому местами чебурнет лажает.</p>
<p>Пока получается китай-чучхе сценарий. Белые списки адресов и талоны на интернет.</p>
<pre><code class="lang-auto">Информацию по проблемам направлять на адрес электронной почты support_asbi@noc.gov.ru в форме таблиц (для ЮЛ и ФЛ, отдельно, прилагаются.

Оперативный дежурный ЦМУ ССОП
8 800 600-19-62
+7(495)748-13-18
+7(495)123-31-04 доб. 87220
</code></pre>
<pre><code class="lang-auto">Запрос на исключение IP VPN(для ФЛ).xlsx
Запрос на исключение IP VPN(для ЮЛ).xlsx
</code></pre>
<p>Можете бегать по протоколам с неизвестными вводными. Но белые списки протоколов с MITM уже не кажутся далекой перспективой.</p>
<hr>
<p>UPD (<a class="mention" href="/u/darkk">@darkk</a>): файлы можно взять в <a href="https://t.me/ordercomru/4705" rel="noopener nofollow ugc">канале ОрдерКом</a>.</p></td><td>2023-09-09T11:05:47.177Z</td></tr><tr><td>shsv88(Сергей)</td><td><p>Ужасно (( …  на что можно лучше в перспективе перевести  сеть между офисами, вместо WireGuard / OpenVpn?</p></td><td>2023-09-09T11:44:55.215Z</td></tr><tr><td>User_96c9e3c964bf</td><td><p>Заверни просто в udp2raw или подобное, это самое простое.</p></td><td>2023-09-09T11:51:11.898Z</td></tr><tr><td>anon94384997</td><td><p>Кажется, nping уже не помогает.</p></td><td>2023-09-11T15:02:03.933Z</td></tr><tr><td>Snawoot</td><td><p>Кто-то писал, что надо, чтобы сервер тоже вначале ответил чем-то помимо WG-хендшейка. Можно попробовать <a href="https://github.com/Snawoot/wg-decoy" rel="noopener nofollow ugc">wg-decoy</a> повесить на сервере и перед подключением клиентом обмениваться несколькими пакетами с того же самого порта, который будет использовать клиент WG.</p></td><td>2023-09-11T15:24:49.141Z</td></tr><tr><td>anon94384997</td><td><p>На сервер ничего повесить не могу. Но пробилось все-таки после долбежки.</p></td><td>2023-09-11T16:09:00.691Z</td></tr><tr><td>computerscot(computerscot)</td><td><p>Here is another possibility you can test. Disguise your WireGuard connection as HTTP/3.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://computerscot.github.io/wireguard-through-hysteria2.html">
  <header class="source">

      <a href="https://computerscot.github.io/wireguard-through-hysteria2.html" target="_blank" rel="noopener nofollow ugc">computerscot.github.io</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="wireguard/9f6fc3957712e6b0e161760f95c4355b00d90425.png" class="thumbnail" data-dominant-color="BED6ED" width="690" height="345"></div>

<h3><a href="https://computerscot.github.io/wireguard-through-hysteria2.html" target="_blank" rel="noopener nofollow ugc">WireGuard through Hysteria2</a></h3>

  <p>Disguise your WireGuard connection as HTTP/3 using Hysteria version 2</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2023-09-15T13:18:08.775Z</td></tr><tr><td>tim5sta(Тим)</td><td><p>Здравствуйте, напишите плиз для ubuntu</p></td><td>2024-01-18T10:40:44.390Z</td></tr><tr><td>tim5sta(Тим)</td><td><aside class="quote no-group quote-modified" data-username="Xunlei" data-post="44" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar"> Xunlei:</div>
<blockquote>
<p>Пример настройки udp2raw сервера в Debian</p>
<p>Пример настройки udp2raw клиента в Windows</p>
</blockquote>
</aside>
<p>wg / udp2raw</p></td><td>2024-01-18T11:45:58.788Z</td></tr><tr><td>Xunlei</td><td><p>Приветствую! Должно работать в Ubuntu без изменений (и на любом дистрибутиве с подсистемой systemd, такие как AlmaLinux, Arch Linux, Fedora Server, openSUSE и т.п.). Можно убрать зависимость firewalld.service — не работают правила nftables c RAW сокетами. Начните делать и напишите конкретный вопрос, что не получилось из инструкций в мануалах.</p></td><td>2024-01-18T16:43:09.080Z</td></tr><tr><td>tim5sta(Тим)</td><td><aside class="quote no-group" data-username="Xunlei" data-post="44" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar"> Xunlei:</div>
<blockquote>
<p>Заливаете бинарник с гитхаба в домашний каталог</p>
</blockquote>
</aside>
<p>Я полный новичок в этом, пробовал ставить Shadowsocks но при подключении к shh он показывает реальный ip. Получается Shadowsocks не все шифрует?<br>
У вас в примере написано<br>
Заливаете бинарник с гитхаба в домашний каталог<br>
Я так понимаю это команда “wget”<br>
напишите плез инструкцию скопировал-вставил<br>
wg + udp2raw<br>
а так же хотел протестировать и этот вариант, но не найду интрукцию<br>
cloak + wireguard<br>
wireguard уже стоит на сервере</p></td><td>2024-01-22T10:31:59.608Z</td></tr><tr><td>Xunlei</td><td><aside class="quote no-group">
<blockquote>
<p>при подключении к shh он показывает реальный ip</p>
</blockquote>
</aside>
<p>Вы про <em>Last login from</em>? Надо подключаться и логинится через SOCKS5 прокси (два раза, второй раз должен показать IP прокси).</p>
<aside class="quote no-group">
<blockquote>
<p>Получается Shadowsocks не все шифрует?</p>
</blockquote>
</aside>
<p>Хотели сказать не всё туннелирует? SS это SOCKS5 прокси достаточный для web браузинга. Для IP туннеля необходимо поднять что-то вроде tun2socks, сам не пользовался таким костылём, ищите темы на форуме.</p>
<aside class="quote no-group">
<blockquote>
<aside class="quote no-group">
<blockquote>
<p>Заливаете бинарник с гитхаба в домашний каталог</p>
</blockquote>
</aside>
<p>Я так понимаю это команда “wget”<br>
напишите плез инструкцию скопировал-вставил</p>
</blockquote>
</aside>
<p>Для меня wget слишком сложен. Заливаю файлы через SFTP. Установите Bitvise SSH Client — удобно тыкать мышкой.</p>
<aside class="quote no-group">
<blockquote>
<p>напишите плез инструкцию скопировал-вставил<br>
wg + udp2raw</p>
</blockquote>
</aside>
<p>Такую инструкцию писать не умею. В моей предполагается что исполнитель произведёт замену самостоятельно.</p>
<aside class="quote no-group">
<blockquote>
<p>а так же хотел протестировать и этот вариант, но не найду интрукцию<br>
cloak + wireguard</p>
</blockquote>
</aside>
<p>Cloak пока не настраивал, не подскажу, только скомпилировал себе на всякий случай.</p>
<aside class="quote no-group">
<blockquote>
<p>wireguard уже стоит на сервере</p>
</blockquote>
</aside>
<p>Значит, потратив некоторое время на изучение вопроса, сможете и остальное донастроить.</p></td><td>2024-01-22T11:06:16.916Z</td></tr><tr><td>User_96c9e3c964bf</td><td><aside class="quote no-group" data-username="tim5sta" data-post="60" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/34f0e0/48.png" class="avatar"> tim5sta:</div>
<blockquote>
<p>wg + udp2raw</p>
</blockquote>
</aside>
<p>Скорость сильно деградирует от такой связки, есть же AmneziaWG.</p></td><td>2024-01-24T09:25:29.184Z</td></tr><tr><td>tim5sta(Тим)</td><td><p>Хотелось бы что-то свое, без передачи кому то полного доступа  к серверу  - root прав</p></td><td>2024-01-24T21:39:01.281Z</td></tr><tr><td>User_96c9e3c964bf</td><td><p>А причем здесь передача прав? Идете на github и компилируете сами две утилиты, одна интерфейс поднимает, вторая конфиг для него применяет.</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/amnezia-vpn/amneziawg-go">
  <header class="source">

      <a href="https://github.com/amnezia-vpn/amneziawg-go" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/0dbe9ca04add301460c5a60560db91cea2a5e30a_2_690x344.png" class="thumbnail" data-dominant-color="E7EDEE">

  <h3><a href="https://github.com/amnezia-vpn/amneziawg-go" target="_blank" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-go: AmneziaWG VPN protocol</a></h3>

    <p><span class="github-repo-description">AmneziaWG VPN protocol</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/amnezia-vpn/amneziawg-tools">
  <header class="source">

      <a href="https://github.com/amnezia-vpn/amneziawg-tools" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/f2bc878a906974facf3a5cd5c3959f3b87869479_2_690x344.png" class="thumbnail" data-dominant-color="EDEEED">

  <h3><a href="https://github.com/amnezia-vpn/amneziawg-tools" target="_blank" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-tools: Tools for configuring Amnezia-WG </a></h3>

    <p><span class="github-repo-description">Tools for configuring Amnezia-WG </span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-01-24T21:48:27.975Z</td></tr><tr><td>tim5sta(Тим)</td><td><p>напишите понятным языком пожалуйста для пенсионера<br>
как установить это на ubuntu и windows этот вариант amnezia-vpn ?<br>
wg уже должен стоять ?</p></td><td>2024-01-25T10:53:10.586Z</td></tr><tr><td>ValdikSS</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://amnezia.org/starter-guide">
  <header class="source">
      <img src="wireguard/9e249b7e1d2695bee5613728b300465e1ccc7f5f.png" class="site-icon" data-dominant-color="636467" width="16" height="16">

      <a href="https://amnezia.org/starter-guide" target="_blank" rel="noopener">amnezia.org</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/360;"><img src="wireguard/084655c5605a58f7c89c9c318f1c946d46b1e9b0_2_690x361.jpeg" class="thumbnail" data-dominant-color="1E1F25" width="690" height="361"></div>

<h3><a href="https://amnezia.org/starter-guide" target="_blank" rel="noopener">Amnezia. Create your personal VPN</a></h3>

  <p>Amnezia VPN — simple and free app to run a self-hosted VPN with high privacy requirements</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-01-25T11:00:11.570Z</td></tr><tr><td>User_96c9e3c964bf</td><td><p>Я так понял, он как раз и не хочет всю гармошку ставить, что-то писал про root права.</p></td><td>2024-01-25T11:01:48.448Z</td></tr><tr><td>spcfox(Viktor Yudov)</td><td><p>я недавно для себя адаптировал wg-easy под AmneziaWG. можете попробовать, но, правда, сейчас там нельзя настраивать параметры самого AmneziaWG, они случайно генерируются при запуске, думаю, потом допилю</p>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/spcfox/amnezia-wg-easy">
  <header class="source">

      <a href="https://github.com/spcfox/amnezia-wg-easy" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/412372daaf334d0f927ed5e06a88635d169621f1_2_690x344.png" class="thumbnail" data-dominant-color="EAE9E8">

  <h3><a href="https://github.com/spcfox/amnezia-wg-easy" target="_blank" rel="noopener nofollow ugc">GitHub - spcfox/amnezia-wg-easy: The easiest way to run AmneziaWG VPN + Web-based...</a></h3>

    <p><span class="github-repo-description">The easiest way to run AmneziaWG VPN + Web-based Admin UI.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-01-25T11:08:21.284Z</td></tr><tr><td>tim5sta(Тим)</td><td><p>да, не  хочу отдавать root<br>
как установить wireguard-go на ubuntu в одну команду , я так понимаю это модификация  wireguard ?</p></td><td>2024-01-25T19:29:59.342Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="tim5sta" data-post="69" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/34f0e0/48.png" class="avatar"> tim5sta:</div>
<blockquote>
<p>это модификация wireguard ?</p>
</blockquote>
</aside>
<p>Это user-mode реализация протокола wireguard, написанная на языке GO.<br>
В противовес kernel-mode реализации в виде модуля ядра linux.<br>
Это то, оригинал чего что использовать не следует, если не понимаешь зачем.<br>
Но амнезисты пока не сделали kernel версию, потому приходится использовать их мод wg-go</p></td><td>2024-01-25T19:42:20.923Z</td></tr><tr><td>User_96c9e3c964bf</td><td><p>Для ubuntu кстати есть ppa и даже вроде с ядерной версией, хотя амнезия ее не анонсила. Пробуй оттуда ставить: <a href="https://launchpad.net/~amnezia/+ppa-packages" class="inline-onebox" rel="noopener nofollow ugc">PPA packages : Iurii Egorov</a></p></td><td>2024-01-25T19:45:58.287Z</td></tr><tr><td>putinvor</td><td><p>WireGuard блокируется на Ростелеком Москва. Сервер - VPS в Европе.</p></td><td>2024-08-21T19:01:39.656Z</td></tr><tr><td>Krusty-the-Clown(Krusty The Clown)</td><td><p>Отправка “мусорного” пакета не помогает?</p></td><td>2024-08-21T19:21:10.571Z</td></tr><tr><td>Gendir</td><td><p>Сегодня вечером пришёл домой, увидел что не работает WG, тоже частный VPS в европе, ребутнул сервак – не помогло. Нашел в закладках <a href="https://gist.github.com/httpsx/76a98ea28e6f3a4ffc947e768c0b6c01" class="inline-onebox" rel="noopener nofollow ugc">WireGuard DPI обход РКН - Windows · GitHub</a> . Сделал и все заработало. Походу опять начали блочить хендшейк.</p></td><td>2024-08-21T19:21:19.894Z</td></tr><tr><td>putinvor</td><td><p>AmneziaWG полёт нормальный.</p></td><td>2024-08-21T19:40:10.018Z</td></tr><tr><td>putinvor</td><td><p>Не в курсе, а как организовать? Просто по UDP рандомную хрень отправить? Есть уже утилита?</p></td><td>2024-08-21T19:45:52.779Z</td></tr><tr><td>Gendir</td><td><p>Я конечно не эксперт, но по-моему это реализовано по ссылке которую я скинул <img src="https://ntc.party/images/emoji/twitter/man_shrugging.png?v=12" title=":man_shrugging:" class="emoji" alt=":man_shrugging:" loading="lazy" width="20" height="20"></p></td><td>2024-08-21T20:10:58.146Z</td></tr><tr><td>kotanoff(Daniil)</td><td><p>Как это применить к роутеру?</p></td><td>2024-08-21T20:19:58.125Z</td></tr><tr><td>0ka(0ka)</td><td><p>рт сз, через amneziawg сделал только мусорные пакеты, с обеих сторон одинаково 100 пакетов, от 40 до 70 байт, это не помогает, после подключения трафик идёт 5 секунд, затем блочится только исходящий от сервера, входящий на сервер продолжает идти. если поменять заголовки пакетов s1,h2,… то всё начинает работать и без мусора</p></td><td>2024-08-21T21:40:26.029Z</td></tr><tr><td>0ka(0ka)</td><td><p>например<br>
ListeningPort=1234<br>
PreUp=nping --udp --count 10 --source-port 1234 --data-length 50 --dest-port server_port server_ip<br>
и обязательно добавить PersistentKeepalive=15<br>
но мне на рт не помогло, в начале года еще работало</p></td><td>2024-08-21T21:46:43.916Z</td></tr><tr><td>413xk</td><td><p>Урал: вчера на домашнем проводе в районе 21-00 МСК сдох личный wg до сервера в EU. Ожил примерно в 8-00 МСК.<br>
С мобилок (4G мегафон) так и не ожил.</p></td><td>2024-08-22T06:07:54.304Z</td></tr><tr><td>Frrienwrvale</td><td><aside class="quote no-group" data-username="putinvor" data-post="76" data-topic="4968" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/p/a88e4f/48.png" class="avatar"> putinvor:</div>
<blockquote>
<p>Не в курсе, а как организовать? Просто по UDP рандомную хрень отправить? Есть уже утилита?</p>
</blockquote>
</aside>
<p>Можно для этой цели использовать форк стандартного клиента WG от амнезии AmneziaWG. Это не их полный клиент AmneziaVPN, а именно форк внешне не отличающийся от стандартного клиента. Накидать в него пару цифр (не обязательно таких же как на скрине ниже) и использовать с обычным сервером WG.</p>
<details>
<summary>
Summary</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="wireguard/b3c621888dbb25490c462a6ac6e51a162481966f.jpeg" data-download-href="https://ntc.party/uploads/default/b3c621888dbb25490c462a6ac6e51a162481966f" title="IMG_20240822_090627"><img src="wireguard/b3c621888dbb25490c462a6ac6e51a162481966f_2_562x500.jpeg" alt="IMG_20240822_090627" data-base62-sha1="pElXzH0Qa3fKM6PosAcpSX55da7" width="562" height="500" srcset="wireguard/b3c621888dbb25490c462a6ac6e51a162481966f_2_562x500.jpeg, wireguard/b3c621888dbb25490c462a6ac6e51a162481966f_2_843x750.jpeg 1.5x, wireguard/b3c621888dbb25490c462a6ac6e51a162481966f.jpeg 2x" data-dominant-color="F0EBF2"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20240822_090627</span><span class="informations">1080×960 87.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>Сам сабж перестал сегодня работать по проводу (ЭР телеком) 92байта приняты. Через форк AmneziaWG с настройками выше (либо любыми другими) заработал.</p></td><td>2024-08-22T06:15:58.418Z</td></tr><tr><td>artenox</td><td><p>Только, отличие AmneziaWG от собственной первоначальной отправки пинга в том, что сам ты один раз отправляешь мусор, а Amnezia перед каждым handshake, вроде как. Оба метода имеют как преимущества, так и недостатки. Мусор перед каждым handshake, наверное, немного занижает скорость и напрягает сервер, зато соединение не отвалится при реконнектах интернета, когда DPI просыпается (но у меня такого давно не было).</p></td><td>2024-08-22T08:53:29.202Z</td></tr><tr><td>Praising7137</td><td><p>Для тех, у кого работает способ с пингом сервера перед подключением, можно это автоматизировать. В конфиге в [Interface] дописать:</p>
<pre><code class="lang-auto">ListenPort=56789
PreUp=nping --udp --count 1 --data-length 16 --source-port 56789 --dest-port {порт сервера} {IP сервера}
</code></pre></td><td>2024-08-22T09:15:37.735Z</td></tr><tr><td>Stavenc</td><td><p>На Windows скрипты по-умолчанию запрещены.<br>
Как разрешить: <a href="https://github.com/WireGuard/wireguard-windows/blob/master/docs/adminregistry.md" class="inline-onebox" rel="noopener nofollow ugc">wireguard-windows/docs/adminregistry.md at master · WireGuard/wireguard-windows · GitHub</a></p></td><td>2024-08-22T09:29:44.176Z</td></tr><tr><td>3230steffie</td><td><p>Помогло, но наверное скоро тоже исправят…<br>
Вот можно в конфиг этот же скрипт поместить. Как включить скрипты в windows уже тут выложили.</p>
<p>ListenPort = 56123<br>
PreUp = powershell -Command “$wgListenPort = 56123; $wgIP = ‘айпи_сервера’; $wgPORT = порт_сервера; $EndPoints = New-Object System.Net.IPEndPoint([System.Net.IPAddress]::Parse([System.Net.Dns]::GetHostAddresses($wgIP)), $wgPORT); $Socket = New-Object System.Net.Sockets.UDPClient $wgListenPort; $SendMessage = $Socket.Send([Text.Encoding]::ASCII.GetBytes(‘:)’), 2, $EndPoints); $Socket.Close();”</p></td><td>2024-08-22T10:26:17.465Z</td></tr><tr><td>sillycat</td><td><p>Пробовал wg через cloak, shadowsocks - но они уперлись в процессор слабого vps, даже без шифрования в случае первого.<br>
Попробовал <a href="https://github.com/kevinxucs/udpmask" class="inline-onebox" rel="noopener nofollow ugc">GitHub - kevinxucs/udpmask: UDP packet obfuscation tool</a> и <a href="https://github.com/ebarnard/udp_obfs" class="inline-onebox" rel="noopener nofollow ugc">GitHub - ebarnard/udp_obfs: UDP Traffic Obfuscator</a> . В итоге входящая скорость на клиенте поднялась с 100 до 300 мегабит, а вот исходящая по-прежнему не более 50, что критично(на обоих программах одинаково). При этом значимой нагрузки на процессор нету.<br>
При этом напрямую через wg раньше проблем не было, а через VMess(v2fly) без wg до сих пор нет (300/300).<br>
Это было бы неплохим решением до тех пор, пока не сломают UDP совсем. Не нужно менять клиента на венде.<br>
Что я упускаю?</p></td><td>2024-08-22T11:08:24.731Z</td></tr><tr><td>elain(dmitry)</td><td><p>А для 3x ui wireguard как-то можно пофиксить? Чтобы тоже мусорные пакеты добавились или еще что-то.<br>
Смотрел wg конфиг варпа что hiddify создает и вот там красота конечно. Жаль такой конфиг нельзя экспортировать на роутер.</p></td><td>2024-08-22T11:54:27.605Z</td></tr><tr><td>roman_sv</td><td><p>Господа, подскажите по WG|Warp на ростелекоме домашнем. Сам потестить не могу, т.к. на ТТК сижу.</p>
<p>За период с мая-июля этого года по сей день блокировали протокол хоть раз?<br>
И что скажете про опцию Noise Count в hiddify? Она помогает от блокировки варпа? Работает ли эта опция в других клиентах, например warp-cli? Можно ли менять этот параметр произвольно только на стороне клиента по аналогии с солью у outline?</p>
<p>Есть клиент под венду WireSock, который умеет отправить шендшейк через сокс5 (в некобокс а далее через хитрую проксю). Думаю потестить для РТК. Но надо проверить, заработает ли вообще с варпом этот вариант. Если да, то можно будет гонять тот же ютуб в варп, обойдя блок по хендшейку (еще лучше будет работать, чем через личный прокси сервер - хопов меньше и хосты для загрузки видео выдавать будет без ошибок). А хитрую проксю лишний раз не гонять - только для открытия блокнутых сайтов.</p>
<p>Пишу, еще ничего не протестив мысли вслух. Вообще WG не пользовался никогда. Пересел из SS сразу на “хитрые” прокси. И вот уже думаю, не зря ли я это пишу тут <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"></p></td><td>2024-08-22T12:46:25.204Z</td></tr><tr><td>bropines(Sergey Pinus)</td><td><p>То же вопрос. На телефоне через nekobox спокойно работает метод --udp-fake 3, но вот как это сделать в настольной версии? Плюс мне не понятно, DPI влияет ли на трафик VPN wireguard WARP (у меня варп профиль зашит в WG). Как на винде через GBDPI сделать udp fake? <a class="mention" href="/u/valdikss">@ValdikSS</a> могу я просить вашей помощи?</p></td><td>2024-08-22T13:04:33.385Z</td></tr><tr><td>4joke(4joke)</td><td><p>Wg на сервере в пределах страны по-прежнему работает?</p></td><td>2024-08-22T13:09:14.053Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>GBDpi не работает с UDP</p></td><td>2024-08-22T13:09:29.633Z</td></tr><tr><td>bropines(Sergey Pinus)</td><td><p>Хмммм… А есть способ тогда фейкать udp пакеты не изменяя сам конфиг WG?</p></td><td>2024-08-22T13:13:08.217Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>nmap, можете сделать скрипт чтобы слал так несколько фейков, а потом коннектился по ВГ</p>
<blockquote>
<p>nping --udp -p [port] -c1 [serveraddress] --data “[fake packet]”</p>
</blockquote></td><td>2024-08-22T13:19:15.375Z</td></tr><tr><td>ani917(ani)</td><td><p><a href="https://github.com/SenseUnit/dtlspipe" class="inline-onebox" rel="noopener nofollow ugc">GitHub - SenseUnit/dtlspipe: Generic DTLS wrapper for UDP sessions</a> - это точно работает? я не понимаю как этим пользоваться с такой инструкцией</p></td><td>2024-08-22T13:42:15.090Z</td></tr><tr><td>Snawoot</td><td><p>Нет, не точно – 100% гарантии вам никто не даст. Но я точно знаю, что даже в Китае оно достаточно успешно применяется.</p>
<p>Инструкция в <a href="https://github.com/SenseUnit/dtlspipe?tab=readme-ov-file#usage" rel="noopener nofollow ugc">разделе Usage</a>. Если коротко, то нужно добиться, чтобы dtlspipe client был запущен там, где клиент WG, а dtlspipe server там, где сервер WG, параметры запуска увидите по примеру. Тогда клиент wireguard уже настраивается на соединение с портом dtlspipe client, и так далее по цепочке к самому серверу WG. Но при этом нужно добиться, чтобы WG не заворачивал в VPN трафик от самого dtlspipe. Один из вариантов как это сделать – нарисовать исключения адресов так, чтобы IP-адрес сервера в них не попадал, что и показано в инструкции.</p></td><td>2024-08-22T13:59:44.661Z</td></tr><tr><td>ani917(ani)</td><td><p>попробовал, не работает<br>
что то такое пишет</p>
<p><em>&gt; [2024-08-22 18:34:12][INFO]new packet from 127.0.0.1:50493,conv_id=6e55325e</em><br>
<em>&gt; [2024-08-22 18:34:13]<a>INFO</a>sent tcp syn</em><br>
<em>&gt; [2024-08-22 18:34:14]<a>INFO</a>sent tcp syn</em><br>
<em>&gt; [2024-08-22 18:34:15]<a>INFO</a>sent tcp syn</em><br>
<em>&gt; [2024-08-22 18:34:16][INFO]state back to client_idle from client_tcp_handshake</em><br>
<em>&gt; [2024-08-22 18:34:16][WARN]udp fd connect fail -1 Invalid argument</em><br>
<em>&gt; [2024-08-22 18:34:16][WARN]create udp_fd error</em><br>
<em>&gt; [2024-08-22 18:34:16][WARN]get_src_adress() failed</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]udp fd connect fail -1 Invalid argument</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]create udp_fd error</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]get_src_adress() failed</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]udp fd connect fail -1 Invalid argument</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]create udp_fd error</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]get_src_adress() failed</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]udp fd connect fail -1 Invalid argument</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]create udp_fd error</em><br>
<em>&gt; [2024-08-22 18:34:17][WARN]get_src_adress() failed</em><br>
<em>&gt; [2024-08-22 18:34:18][WARN]udp fd connect fail -1 Invalid argument</em><br>
<em>&gt; [2024-08-22 18:34:18][WARN]create udp_fd error</em><br>
<em>&gt; [2024-08-22 18:34:18][WARN]get_src_adress() failed</em><br>
<em>&gt; [2024-08-22 18:34:18][INFO]source_addr is now 169.254.195.199</em><br>
<em>&gt; [2024-08-22 18:34:18][INFO]using port 28982</em><br>
<em>&gt; [2024-08-22 18:34:18][INFO]filter expression is [ip and tcp and src 162.159.193.9 and src port 2408 and dst port 28982]</em></p></td><td>2024-08-22T14:31:42.823Z</td></tr><tr><td>Dhohbr</td><td><p>Где-то ошибка в настройках.<br>
Попробуйте еще <a href="https://github.com/wangyu-/udp2raw">udp2raw</a></p></td><td>2024-08-22T15:00:10.627Z</td></tr><tr><td>dunwaadd(dynua)</td><td><p>Что сейчас можно попробовать для win10. Пользуюсь WG с конфигом Warp 1.1.1.1. Пробовал большинство методов, о которых писали тут и ничего не работает.</p></td><td>2024-08-22T15:04:03.389Z</td></tr><tr><td>Stavenc</td><td><p>Публичные сервисы забанены по IP. Счётчик принятых байт будет по нулям.</p></td><td>2024-08-22T15:13:12.171Z</td></tr><tr><td>dunwaadd(dynua)</td><td><p>а что попробовать можно из бесплатного?</p></td><td>2024-08-22T15:14:09.624Z</td></tr><tr><td>ani917(ani)</td><td><p>но это же тоже самое</p></td><td>2024-08-22T15:20:20.818Z</td></tr><tr><td>Snawoot</td><td><p>а причём тут TCP?</p></td><td>2024-08-22T15:38:06.316Z</td></tr><tr><td>Xunlei</td><td><p>Драйвер <a href="https://npcap.com/dist/npcap-1.79.exe" rel="noopener nofollow ugc">npcap</a> поставили?</p></td><td>2024-08-22T16:30:51.210Z</td></tr><tr><td>ani917(ani)</td><td><p>да стоит, без него не запускалось вообще</p></td><td>2024-08-22T16:33:54.849Z</td></tr><tr><td>Xunlei</td><td><p><s>А на сервере что пишет? Может <code>hw_aes</code> не поддерживается, тогда надо бинарник без.</s></p>
<p>У вас link-local адрес используется <code>source_addr is now 169.254.195.199</code>, что-то не так с настройками сетевого интерфейса.</p></td><td>2024-08-22T16:36:50.037Z</td></tr><tr><td>ani917(ani)</td><td><p>так это и на сервер еще надо? я подключаюсь к обычному серверу варп<br>
тогда это же юзлесс</p></td><td>2024-08-22T16:40:43.668Z</td></tr><tr><td>Xunlei</td><td><p>Да, глупо было ожидать результата выполнив только половину инструкции.</p>
<p>Используйте это:</p>
<aside class="quote no-group" data-username="3230steffie" data-post="86" data-topic="4968" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/3/46a35a/48.png" class="avatar"> 3230steffie:</div>
<blockquote>
<p>Помогло, но наверное скоро тоже исправят…<br>
Вот можно в конфиг этот же скрипт поместить. Как включить скрипты в windows уже тут выложили.</p>
<p>ListenPort = 56123<br>
PreUp = powershell -Command “$wgListenPort = 56123; $wgIP = ‘айпи_сервера’; $wgPORT = порт_сервера; $EndPoints = New-Object System.Net.IPEndPoint([System.Net.IPAddress]::Parse([System.Net.Dns]::GetHostAddresses($wgIP)), $wgPORT); $Socket = New-Object System.Net.Sockets.UDPClient $wgListenPort; $SendMessage = $Socket.Send([Text.Encoding]::ASCII.GetBytes(‘:)’), 2, $EndPoints); $Socket.Close();”</p>
</blockquote>
</aside>
<p>Варп у меня подключается.</p></td><td>2024-08-22T16:41:39.725Z</td></tr><tr><td>ani917(ani)</td><td><p>у меня тоже подключается, но не работает<br>
скрипт не помогает</p></td><td>2024-08-22T16:55:41.446Z</td></tr><tr><td>spv82</td><td><p>У меня после вчерашнего Warp пробивается клиентом от Amnezia и еще warp-plus от иранцев. Мусорить Nping-ом тоже пробовал, не помогло</p></td><td>2024-08-22T17:03:02.172Z</td></tr><tr><td>artenox</td><td><p>nping’ом надо бы подольше мусорить. Несколько минут. Исходящие порты должны совпадать. После пинга сразу коннект. Если протокол спалили, надо ждать или перезагружать модем. Дефолтный endpoint надо сменить на незаблокированный IP.</p></td><td>2024-08-22T17:30:26.809Z</td></tr><tr><td>bropines(Sergey Pinus)</td><td><p>А есть более быстрый метод? На винде же сначала команду, потом быстро запускаешь туннель вг… Чет запарно как-то</p></td><td>2024-08-22T20:04:16.429Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>В клиенте амнезии можно задать для обычного ВГ фейки</p></td><td>2024-08-22T20:27:28.149Z</td></tr><tr><td>ani917(ani)</td><td><p>мне не помогает</p></td><td>2024-08-22T20:51:40.948Z</td></tr><tr><td>bropines(Sergey Pinus)</td><td><p>А есть гайд по настройке? Или сам думай как это настраивается?</p></td><td>2024-08-22T21:22:10.144Z</td></tr><tr><td>0ka(0ka)</td><td><p>В гуглплее скачай и настрой Jc, Jmin, Jmax</p></td><td>2024-08-22T21:22:43.535Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p><a href="https://ntc.party/t/call-the-testers-amneziawg-protocol/6081">Вот тут</a>, там уже запилили отдельный клиент чисто для ВГ, где можно <a href="https://ntc.party/t/call-the-testers-amneziawg-protocol/6081/8">к обычному конфигу</a> пределать фейки. Но и в стоковом их клиенте можно на ВГ навешать фейков</p></td><td>2024-08-22T21:29:20.909Z</td></tr><tr><td>413xk</td><td><p>когда вчера wg порушился зарубежом в рамках РФ всё работало.</p></td><td>2024-08-23T05:22:27.435Z</td></tr><tr><td>zzr</td><td><p>прикол конешн - домашний мемкротик понтключен через виригуард тунель к впске, которайя находится в мск, провайдер рт ина работе провайдер рт понтключен к тому же впске чтобы понтключатся к мемкротику и вэйкОнЛан делать домашнему компу когда необходимо, ну так вот мемкротик конектится ане с рабочий комп перестал конектица яна поминаю один и тот же провайдер, город etc. пришлось на мемкротике zerotier делать пока работает, но ето тож галимый варикант как по мне потому что там прост идёт порт 9993 udp и всех дел на дпи заблочить как нех делать + адреса ихних “лун” тож извесны и огроничены в количестве (прям как тор ноды), но пока работает</p></td><td>2024-08-23T06:22:55.440Z</td></tr><tr><td>anonimnyj45(anonimnyj45)</td><td><p>Самарская область, полосатый оператор. Заметил, что после 21 числа начался точечный бан wg. Если сменить порт на сервере и на клиенте, на короткое время может помочь. Потом снова 92Б принятых и тишина. Что интересно, сам бан временный, снимается через 20-30 минут. Добавил финт с мусорным пакетом, вроде живет. “Чистый” wg уже не работает.</p></td><td>2024-08-23T07:56:31.663Z</td></tr><tr><td>zzr</td><td><p>ето всё замемчательно, и как прикажеште добовлять мусроный пакет в виндовом клиенте который не предусмотрено там ето дело вроде бы, ана мемкротике там тож всё подефолту идёт наверняка, хотя там есь опцийя preshared кей но ет не поможет наверн</p></td><td>2024-08-23T12:54:39.173Z</td></tr><tr><td>VVVVVV</td><td><p>На виндовс вчера у амнезии тоже вышел <a href="https://github.com/amnezia-vpn/amneziawg-windows-client/releases" rel="noopener nofollow ugc">клиент</a>.</p>
<p>Вчера попробовал, настройки которые на wg перестали работать на амнезии с мусорными пакетами заработали, в конфиг такие прописывал:</p>
<p>[Interface]<br>
Jc = 5<br>
Jmin = 50<br>
Jmax = 1000<br>
H1 = 1<br>
H2 = 2<br>
H3 = 3<br>
H4 = 4</p></td><td>2024-08-23T13:16:00.325Z</td></tr><tr><td>4r6nvm</td><td><p>подтверждаю, с 22 августа наглухо залочен опенвпн и вг, даже к свежесозданному серверу не подключается к обоим протоколам.<br>
но к тому же серверу с данными параметрами с помощью клиента amneziawg подключается</p>
<p>остается актуалым вопрос, можно ли на роутере с asus-merlin прошивкой как то автоматизировать отправку junk пакетов, чтобы там так же все заработало?</p></td><td>2024-08-23T15:37:49.656Z</td></tr><tr><td>Travesty6726</td><td><p>На домашнем интернете Билайн (мск) режут Wireguard даже внутри страны - до московской VPS скорость трафика ограничена до 60-70 мбит/с, при том, если без туннеля проверять скорость до сервера, то выдает все 500 мбит/с (вся полоса моего домашнего интернета). Проверял скорость внутри туннеля и без с использованием iperf3.</p></td><td>2024-08-23T15:46:57.584Z</td></tr><tr><td>sillycat</td><td><p>anmeziawg работает неплохо. Но вот <a href="https://github.com/amnezia-vpn/amneziawg-windows-client" class="inline-onebox" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-windows-client: AmneziaWG client for Windows</a> как я понял у них совсем не допилен? Только название сменили и всё. Юзаю <a href="https://github.com/amnezia-vpn/amnezia-client" class="inline-onebox" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amnezia-client: Amnezia VPN Client (Desktop+Mobile)</a> под вендой и андроидом, только на венду не забудьте 4.7 версию взять. В ридми другая, ссылка и она не очень работает. Но надеюсь форк оригинального клиента таки допилят.</p></td><td>2024-08-23T17:35:02.855Z</td></tr><tr><td>alexander-ii(Alexander-II)</td><td><p>Спасибо, помогло!</p></td><td>2024-08-23T17:58:53.474Z</td></tr><tr><td>413xk</td><td><p>Коллеги, как у вас с сабжем дела?<br>
Урал, слегло вообще всё, и обычный вг до зарубежа, и амнезия хендшейк не может совершить (и 7-8-9 со скрина пробовал, и 5-50-1000-1-2-3-4 тоже)*. <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<ul>
<li>до обычного wg сервера</li>
</ul>
<p>Из забавного: этот же провайдер, это же оборудование но в соседнем районе - и там всё четко, всё работает.<br>
И там и там статика, может по диапазонам тестят как-то, а не на уровне AS или провайдера.</p></td><td>2024-08-23T18:24:50.487Z</td></tr><tr><td>Montroms(Monksi)</td><td><p>А какой нужен клиент на андроид, чтобы данный конфиг работал? Скачал последнюю версию амнезии для андроида 4.7.0.0, вбил конфиг ,но не подключается на мобиле, выдает ошибку errorcode: 1000, Ошибка соединения.С тем же конфигом на клиенте под винду все работает.Я же правильно понял, что конфиг вбивается после поля DNS или его нужно вбивать перед private key?</p></td><td>2024-08-23T19:13:22.424Z</td></tr><tr><td>VVVVVV</td><td><p>Клиент от разработчиков: <a href="https://play.google.com/store/apps/details?id=org.amnezia.awg" rel="noopener nofollow ugc">AmneziaWG</a></p>
<p>Если на винде работает, то конфиг с винды можно экспортировать и через “+” импортировать в андроид клиент</p>
<p><img src="wireguard/fb066948fbb3cba4ac9c9d6e66f162d864db51d5.png" alt="image" data-base62-sha1="zOFA1ZUFjh1XUPcXUGI6WbPKkM5" width="391" height="188"></p></td><td>2024-08-23T19:21:16.175Z</td></tr><tr><td>4r6nvm</td><td><p>у меня до паблик сервера амнезия тоже не работает, зато до своего сервера работает</p></td><td>2024-08-23T19:29:42.754Z</td></tr><tr><td>Frrienwrvale</td><td><p>У них паблик на AmneziaWG теперь вроде. Получи новый конфиг через бота и попробуй ещё раз подключиться.</p></td><td>2024-08-23T20:33:21.943Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Что-то у меня мозг сломался. Затеял тут перезд на новый роутер(с Mikrotik ac3 на ax3), перенёс все конфиги, всё завелось кроме WARP, постоянная ругань на пир хэндшейк в логах. Решил что и до меня добрались, начал проверять варианты пробития DPI и выяснил что через nekoray и xray всё прекрасно работает, только скорость не фонтан(через конфиг на роутере было 60Мбит, после заворота через xray стало 10-20Мбит). Если посниффать траффик с роутера - действительно нет ответа от WARP-овского эндпоинта, а если подключаться через nekoray - ответ есть и всё коммуницирует. Насколько я понимаю - что в xray, что в nekoray обычный ванильный WG без доработок, такой же как и в некротиках. Конфига на некротике тоже проверена и перенесена с прошлого роутера, где работала. У меня натурально кончились идеи.</p></td><td>2024-08-24T08:23:44.628Z</td></tr><tr><td>Sanek184</td><td><p>а за какой xray идет речь ?</p></td><td>2024-08-24T11:48:03.061Z</td></tr><tr><td>s.v.d(00svd00)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/XTLS/Xray-core">
  <header class="source">

      <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/043413c3004a20d7e317c83149b87ef5fca33bda_2_690x344.png" class="thumbnail" data-dominant-color="EDF2F4">

  <h3><a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener nofollow ugc">GitHub - XTLS/Xray-core: Xray, Penetrates Everything. Also the best...</a></h3>

    <p><span class="github-repo-description">Xray, Penetrates Everything. Also the best v2ray-core, with XTLS support. Fully compatible configuration.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-08-24T14:09:37.245Z</td></tr><tr><td>ani917(ani)</td><td><p>можно ли в этом как то добавить конфлиг warp?</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/LorenEteval/Furious">
  <header class="source">

      <a href="https://github.com/LorenEteval/Furious" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="wireguard/bf2e76e3d6b05b193249c24d1720af4a1cf024b9_2_690x344.png" class="thumbnail" data-dominant-color="EAE8EB">

  <h3><a href="https://github.com/LorenEteval/Furious" target="_blank" rel="noopener nofollow ugc">GitHub - LorenEteval/Furious: A GUI proxy client based on PySide6. Support...</a></h3>

    <p><span class="github-repo-description">A GUI proxy client based on PySide6. Support Xray-core &amp; hysteria</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-08-24T15:20:59.753Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Наверное можно, судя по названию - это очередная обёртка вокруг xray-core</p></td><td>2024-08-24T18:47:20.985Z</td></tr><tr><td>bob_warper</td><td><p>Привет всем. Кто подскажет как запулить WARP через NEKOBOX (nekoray) на винде. Что то по гайдам у меня не пробивается.</p></td><td>2024-08-25T06:30:27.908Z</td></tr><tr><td>0ka(0ka)</td><td><p>А в нем разве есть какие-то функции обхода блока WG?</p></td><td>2024-08-25T07:13:03.489Z</td></tr><tr><td>bob_warper</td><td><p>Вроде должно, там же через sing-box. На самом деле мне и стандартного wireguard клиента было бы достаточно, с пробивом через мусорные скрипты, или пропатченный amneziawg, но я так и не понял можно ли взять их под контроль? Чтобы не пускать весь траффик, а только нужные приложения через проксифайер…</p></td><td>2024-08-25T07:30:06.326Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="bob_warper" data-post="139" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>Вроде должно, там же через sing-box</p>
</blockquote>
</aside>
<p>чем протокол wireguard отличается в sing-box?</p>
<aside class="quote no-group" data-username="bob_warper" data-post="139" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>На самом деле мне и стандартного wireguard клиента было бы достаточно, с пробивом через мусорные скрипты, или пропатченный amneziawg, но я так и не понял можно ли взять их под контроль? Чтобы не пускать весь траффик, а только нужные приложения через проксифайер…</p>
</blockquote>
</aside>
<p>с 1 темы на другую перепрыгнули, которые никак не связаны, непонятно вообще о чем вы</p></td><td>2024-08-25T07:31:19.746Z</td></tr><tr><td>bob_warper</td><td><aside class="quote no-group" data-username="0ka" data-post="140" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>чем протокол wireguard отличается в sing-box?</p>
</blockquote>
</aside>
<p>Решил, что если nekobox на андроиде пробивает warp, то и декстопный пробьет. Сам незнаю, но китайцы так пробивают. Значит должно работать. Гайд у них брал. Может что-то напутал.<br>
<a href="https://dadaoke.blogspot.com/2023/03/nekoraywireguard-warp.html" rel="noopener nofollow ugc">在NekoRay使用WireGuard WARP节点</a></p>
<aside class="quote no-group" data-username="0ka" data-post="140" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>с 1 темы на другую перепрыгнули, которые никак не связаны, непонятно вообще о чем вы</p>
</blockquote>
</aside>
<p>Я о том, что мне нужен управляемый warp, nekoray дает такую возможность, а стандартный клиент и его форк amneziawg насколько я понял нет. Может опять же ошибаюсь, но гугл ответа не дал)</p></td><td>2024-08-25T07:37:52.042Z</td></tr><tr><td>ani917(ani)</td><td><aside class="quote no-group" data-username="bob_warper" data-post="141" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>Решил, что если nekobox на андроиде пробивает warp, то и декстопный пробьет. Сам незнаю, но китайцы так пробивают.</p>
</blockquote>
</aside>
<p>попробуйте hiddify next, там конфиг не нужен, он генерируется</p></td><td>2024-08-25T07:47:27.700Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="bob_warper" data-post="141" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>но китайцы так пробивают</p>
</blockquote>
</aside>
<p>по ссылке не вижу никакого пробива, совершенно обычный конфиг который будет блочиться</p>
<aside class="quote no-group" data-username="bob_warper" data-post="141" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>Решил, что если nekobox на андроиде пробивает warp, то и декстопный пробьет</p>
</blockquote>
</aside>
<p>ссылка?</p></td><td>2024-08-25T07:58:02.910Z</td></tr><tr><td>bob_warper</td><td><aside class="quote no-group" data-username="ani917" data-post="142" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ani917/48/2978_2.png" class="avatar"> ani917:</div>
<blockquote>
<p>попробуйте hiddify next, там конфиг не нужен, он генерируется</p>
</blockquote>
</aside>
<p>пробую, пробивает, но очень глючная и не могу взять под контроль, весь траф идет через него…</p>
<aside class="quote no-group" data-username="0ka" data-post="143" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar"> 0ka:</div>
<blockquote>
<p>по ссылке не вижу никакого пробива, совершенно обычный конфиг который будет блочиться</p>
</blockquote>
</aside>
<p>прикол, у китайцев варп получается не блочится чтоли?</p></td><td>2024-08-25T08:07:56.996Z</td></tr><tr><td>artenox</td><td><aside class="quote no-group" data-username="bob_warper" data-post="144" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>не могу взять под контроль, весь траф идет через него</p>
</blockquote>
</aside>
<p>Где-то в настройках надо изменить режим tun на proxy.</p></td><td>2024-08-25T08:30:10.664Z</td></tr><tr><td>no.69</td><td><p>Как-то нестабильно работает этот PreUp. Есть ощущение, что не успевает пакет отправиться до хендшейка. Для проверки попробовал в комманду добавить <code>Start-Sleep -Seconds 5;</code>, но соединение поднимается раньше.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="wireguard/08e8477c80477e1a0d5a19b2f66eaff99d977c9b.jpeg" data-download-href="https://ntc.party/uploads/default/08e8477c80477e1a0d5a19b2f66eaff99d977c9b" title="Снимок экрана 2024-08-25 113813"><img src="wireguard/08e8477c80477e1a0d5a19b2f66eaff99d977c9b_2_517x198.jpeg" alt="Снимок экрана 2024-08-25 113813" data-base62-sha1="1gNtuLYkAx9mkpHSSswJ1vlEcqL" width="517" height="198" srcset="wireguard/08e8477c80477e1a0d5a19b2f66eaff99d977c9b_2_517x198.jpeg, wireguard/08e8477c80477e1a0d5a19b2f66eaff99d977c9b.jpeg 1.5x, wireguard/08e8477c80477e1a0d5a19b2f66eaff99d977c9b.jpeg 2x" data-dominant-color="E6E6E6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-08-25 113813</span><span class="informations">723×277 87.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-08-25T08:41:15.318Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="bob_warper" data-post="141" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>что мне нужен управляемый warp</p>
</blockquote>
</aside>
<aside class="quote quote-modified" data-post="1" data-topic="9739">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/0/d78d45/48.png" class="avatar">
    <a href="https://ntc.party/t/9739">Windows wg/awg app based split tunneling</a> <a class="badge-category__wrapper " href="/c/manuals/42"><span data-category-id="42" style="--category-badge-color: #F7941D; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="VPN/Proxy installation and configuration instructions, censorship circumvention software tips and tricks"><span class="badge-category__name">Manuals and How-Tos</span></span></a>
  </div>
  <blockquote>
    Requirements: 
Wireguard / <a href="https://github.com/amnezia-vpn/amneziawg-windows-client/releases/tag/1.0.0">AmneziaWG</a> 
<a href="https://www.nirsoft.net/utils/netrouteview.zip">Nirsoft NetRouteView</a> 
<a href="https://github.com/MatsuriDayo/nekoray/releases">nekoray/nekobox</a> 


wg/awg setup: edit your PROFILE_NAME and add Table=off to the interface section, save and activate 
[image] 
it will prevent wireguard from creating default gateway route 


NetRouteView setup: file - new route, 
change metric to 999, interface to Wireguard tunnel, ok 
[image] 


nekobox: add profile - type “custom sing-box config”, name PROFILE_NAME, config - <a href="https://pastebin.com/Ghsn257n">pastebin</a> 
[image] 
replace PROFILE_NAME in the name and in…
  </blockquote>
</aside>
</td><td>2024-08-25T09:35:03.398Z</td></tr><tr><td>bob_warper</td><td><aside class="quote no-group" data-username="artenox" data-post="145" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/a8b319/48.png" class="avatar"> artenox:</div>
<blockquote>
<p>Где-то в настройках надо изменить режим tun на proxy.</p>
</blockquote>
</aside>
<p>ой, нет, оно того не стоит, глючит, нервирует, постоянные конекты какие то, хотя впринципе настроил, режим прокси, tun mode mixed , через проксифаер, но постоянно конфликты, чтото еще хочет…сплошной nervify какойто, удаляю.</p></td><td>2024-08-25T09:53:22.437Z</td></tr><tr><td>bob_warper</td><td><p>это жостко)))</p></td><td>2024-08-25T09:53:58.096Z</td></tr><tr><td>0ka(0ka)</td><td><p>только что обновил и сделал полегче (через nekobox)</p></td><td>2024-08-25T09:54:21.995Z</td></tr><tr><td>no.69</td><td><p>На скрине уже увидел ошибку в имени переменной wgIP (вместо $wgIP), но проблема с не всегда помогающим PreUp осталась.</p></td><td>2024-08-25T10:45:48.099Z</td></tr><tr><td>bob_warper</td><td><p>был бы просто nekobox, все, проблема решена, а так костыли, оно того не стоит. кстати пытался просто повторить и не понял там пропущены данные варпа или так и задумано? hiddefy в этом плане проще, хотя и глючнее.</p></td><td>2024-08-25T11:12:22.864Z</td></tr><tr><td>bob_warper</td><td><aside class="quote no-group" data-username="ani917" data-post="142" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ani917/48/2978_2.png" class="avatar"> ani917:</div>
<blockquote>
<p>попробуйте hiddify next, там конфиг не нужен, он генерируется</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="bob_warper" data-post="152" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/54ee81/48.png" class="avatar"> bob_warper:</div>
<blockquote>
<p>hiddefy в этом плане проще, хотя и глючнее.</p>
</blockquote>
</aside>
<p>короче, оказывается скачал последнюю версию неглядя, она предрелизная оказалась, поставил стабильную, хоть и тоже глючит, но намного меньше. впринципе вопрос решен, warp + proxifierЫ =.все под контролем. Всем спасибо, отдельное ani917</p></td><td>2024-08-25T11:35:03.759Z</td></tr><tr><td>zzr</td><td><p>виригуард умер доздраствует виригуардАМ <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"> <a href="https://github.com/amnezia-vpn/amneziawg-linux-kernel-module" class="inline-onebox" rel="noopener nofollow ugc">GitHub - amnezia-vpn/amneziawg-linux-kernel-module: AmneziaWG Linux kernel module</a></p></td><td>2024-08-26T08:53:48.973Z</td></tr><tr><td>Verve</td><td><p>Как этим пользоваться? Есть инструкция по сборке, установке. Дальше неясно (втч куда эти настройки ему давать).</p>
<p>У меня Manjaro KDE, в идеале бы сделать в стиле, как тут сейчас добавляются конфиги Wireguard, в NetworkManager.</p></td><td>2024-08-27T17:58:21.205Z</td></tr><tr><td>0ka(0ka)</td><td><p>В репо с модулем ядра инструкция там же, еще нужен <a href="https://github.com/amnezia-vpn/amneziawg-tools" class="inline-onebox">GitHub - amnezia-vpn/amneziawg-tools: Tools for configuring Amnezia-WG</a>. Конфиги в /etc/amnezia/amneziawg. Старт - “awg-quick up NAME”, стоп - down. Остальная инфа в теме по amneziawg</p></td><td>2024-08-27T23:00:13.166Z</td></tr><tr><td>zzr</td><td><p>год назад еим невозможно было пользоваться average пользователям, было два стула либо через прилолжение, которое требует ключи от квартиры (<span class="spoiler">коды от сервера</span>)) (у меня кстати так и незаработало через его прост ошибка после начала выполнения (я вижу в логах что оно залолгинелось по ссшу) и всё) либо собирай из исходников истрадай, теперь же с мудулем ядра всё стало замемчательно, единсвенный момент кто буит ёрзать с им смотрите внимательно там в ридми написано две разные секции одна для дебиана другая для убунты и так и хочется прост скопировать код от дебиана и засунуть на убунту (шо там деб шо там)) но не понтдавайтесь) - я потом три часа старадал ине мог понять почему оно не заводится если у вас не 20(фокал) убунта а выше то буит ошибка что мол у вас ядро невер кернел и оно не может найти исходники для его чтобы собрать дкмс модуль, дая сам виноват знайю <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-08-28T08:53:14.217Z</td></tr><tr><td>Verve</td><td><p>Спасибо. Не знаю, выглядит сырым пока что. У меня не взлетело, хотя встало всё по идее нормально (пир не соединяется с сервером, нет входящих пакетов). Подожду или гайдов нормальных, или может в aur запилят.</p>
<p>(Не исключаю вариант, что и его блокируют, и собственно потому не соединяло, но с этим пока не очевидно).</p></td><td>2024-08-28T17:38:13.417Z</td></tr><tr><td>sun</td><td><aside class="quote no-group" data-username="Verve" data-post="158" data-topic="4968">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/v/8c91f0/48.png" class="avatar"> Verve:</div>
<blockquote>
<p>Не исключаю вариант, что и его блокируют</p>
</blockquote>
</aside>
<p>Не блокируют, все прекрасно работает, даже на самой первой версии которая на go, даже не обновлял ее. Разницы с обычным wg по скорости не замечаю.</p></td><td>2024-08-28T18:13:38.187Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>можно ли обойти блокировку  wg Cloudflare</p></td><td>2024-08-28T18:35:54.997Z</td></tr><tr><td>ani917(ani)</td><td><p>программа wg устарела, используйте другие</p></td><td>2024-08-28T21:17:34.654Z</td></tr><tr><td>zzr</td><td><p>вас что в гугле забанили или щто</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://habr.com/ru/companies/amnezia/articles/807539/">
  <header class="source">
      <img src="wireguard/e8fc7b34a1237fbc93fd62548efc1a4df1f7fa72.png" class="site-icon" data-dominant-color="97BFD2" width="16" height="16">

      <a href="https://habr.com/ru/companies/amnezia/articles/807539/" target="_blank" rel="noopener nofollow ugc">Хабр</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="wireguard/f70692a2d67e18e56d504347eb6d8295d7d799bd_2_690x305.png" class="thumbnail" data-dominant-color="3D4445" width="690" height="305"></div>

<h3><a href="https://habr.com/ru/companies/amnezia/articles/807539/" target="_blank" rel="noopener nofollow ugc">Мы добрались до ядра, или новые возможности AmneziaWG</a></h3>

  <p>Добрый день!&nbsp; На связи команда разработчиков Amnezia.&nbsp; Обычно наши статьи посвящены оригинальному клиенту Amnezia, но сегодня мы будем упоминать AmneziaVPN весьма косвенно, так как речь...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-08-29T04:00:59.704Z</td></tr><tr><td>bob_warper</td><td><p>интересно, а кто нибудь знает этих людей из Amnezia? просто на хабре обычно такое под плашкой 404</p></td><td>2024-08-29T04:46:06.814Z</td></tr><tr><td>zzr</td><td><p>хм странно в выходные мутил ету тему и они были понт плашкой 451 а щас нет</p></td><td>2024-08-29T05:19:24.894Z</td></tr><tr><td>brauzer</td><td><p>Как бы прикрутить вызов nping перед запуском wireguard интерфейса в OpenWRT?</p></td><td>2024-09-30T06:06:36.440Z</td></tr><tr><td>0ka(0ka)</td><td><p>del</p></td><td>2024-09-30T12:49:14.445Z</td></tr><tr><td>spv82</td><td><p>Через <a href="https://openwrt.org/docs/guide-user/base-system/hotplug" rel="noopener nofollow ugc">hotplug</a> вроде такое можно настроить. Основу можно подсмотреть в <a href="https://gist.github.com/koolvn/993d9c7eb2666dbf15bdccc7d3c4fe33" rel="noopener nofollow ugc">скрипте</a> для AsusWrt. Но мне вместо этого было проще zapret/nfqws повесить.</p></td><td>2024-09-30T17:47:07.882Z</td></tr><tr><td>brauzer</td><td><p>В hotplug не нашёл подходящего события до поднятия интерфейса.<br>
ACTION <code>ifdown</code>, <code>ifup</code>, <code>ifup-failed</code>, <code>ifupdate</code>, <code>free</code>, <code>reload</code>, <code>iflink</code>, <code>create</code></p>
<p>Получилось решить проблему, установив amneziawg-kmod на openwrt роутер, даже не меняя обычный wg сервер на амнезию.</p></td><td>2024-10-01T08:51:07.404Z</td></tr><tr><td>shevchuk</td><td><p>В качестве альтернативы nping, который не везде доступен, для отправки мусорных пакетов можно использовать более доступный netcat:</p>
<pre><code class="lang-auto">for i in $(seq 10); do
  head -c 32 /dev/urandom | nc -u -p &lt;ListenPort&gt; &lt;Endpoint_IP&gt; &lt;Endpoint_port&gt; -w 1;
done
</code></pre>
<p>(можно и в одну строчку)</p></td><td>2024-12-24T19:07:37.470Z</td></tr>
    </table>
      </body>
    </html>