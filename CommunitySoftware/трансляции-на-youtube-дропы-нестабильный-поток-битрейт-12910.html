
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>трансляции-на-youtube-дропы-нестабильный-поток-битрейт-12910</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Axolder</td><td><p>Приветствую!<br>
Помогите, пожалуйста разобраться как сделать.<br>
Необходимо запустить рабочую трансляцию на Youtube. Поставил launcher for zapret 1.4. С ним трансляция идет хорошо, без дропов, поток стабильный в обс (зеленый). Как мне написали ранее в лаунчере используется такая стратегия:<br>
<strong>–dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=“tls_clienthello_www_google_com.bin” --dpi-desync-ttl=5</strong><br>
На роутере тоже стоит zapret. С теми стратегиями, которые прописаны в нём, хорошо работают трекеры, дискорд, и ютюб (но только на просмотр), при запуске трансляции на него, появляются либо дропы, либо потом нестабильный (красный, желтый). Если запустить лаунчер, то поток стабилизируется (зеленый). Стратегия в роутере работает по хост листам. Выглядит так:<br>
<strong>NFQWS_OPT="</strong><br>
<strong>–filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig,badsum  --new</strong><br>
<strong>–filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-repeats=13  --new</strong><br>
<strong>–filter-udp=443 --dpi-desync=fake --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --dpi-desync-repeats=13 --dpi-desync-cutoff=d4 </strong><br>
<strong>"</strong><br>
Сказали, что в ней много мусора, она неправильная, но она работает для всего того, что необходимо, кроме собственных трансляций. Repeats=13  стало в сентябре, до этого было 6 и тогда с трансляциями было все в порядке, как только повысилось до 13 началось такое. При 12 уже не загружаются видео на ютюбе.<br>
Попробовал стратегию из лаунчера, с ней ютюб перестает работать.</p></td><td>2024-11-09T03:23:54.436Z</td></tr><tr><td>kotik.neko</td><td><p>Рекомендую настроить DNS over HTTPS или DNS over TLS на роутере. Сам долго маялся со стратегиями, потом настроил DoT от Cloudflare, и все заработало почти на настройках по умолчанию. Попробуйте.</p></td><td>2024-11-09T21:27:37.101Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p><strong>dpi-desync-repeats=13</strong> попробуй уменьшить или удалить эту строчку<br>
И замени на --dpi-desync-ttl=3</p></td><td>2024-11-09T21:38:32.912Z</td></tr><tr><td>Axolder</td><td><p>Без репитсов не работает совсем. Вчера опытным путем выяснял, что стартовать начинает только с 13. 12 и ниже просто не грузится ютюб. Про ttl=3 попробую, спасибо.</p></td><td>2024-11-09T22:09:32.644Z</td></tr><tr><td>Axolder</td><td><p>у меня стояли DoT dns.google 8.8.8.8 и DoT 77.88.8.8 <a href="http://common.dot.dns.yandex.net" rel="noopener nofollow ugc">common.dot.dns.yandex.net</a><br>
Что с ними что без них не заметил сильной разницы в стабильности потока стрима. Попробую DoT от Cloudflare, спасибо.<br>
Вот как было:<br>
<img src="трансляции-на-youtube-дропы-нестабильный-поток-битрейт-12910/8bbf7dd05fbf637bd4c895ae53003b39262774ac.jpeg" alt="DOT" data-base62-sha1="jWgDusdha8tCYG9Kk6n0ELctWMI" width="225" height="407"></p></td><td>2024-11-09T22:14:58.723Z</td></tr><tr><td>kotik.neko</td><td><p>У вас ведь Кинетик, судя по интерфейсу? Гугловские ДНС уже вроде как блокируются, в них особо смысла нет, как и от ДНС Яндекса (если только их использовать, без дополнения другими). Важно не просто прописать в Кинетике новые DoT/DoH, но еще на странице настройки соединения снять везде галки “Использовать DNS провайдера”, после чего переподключить соединение</p></td><td>2024-11-19T14:10:05.307Z</td></tr><tr><td>Axolder</td><td><p>Да, днс провайдера убирал, попробую тогда другие DoT/DoH</p></td><td>2024-11-19T14:17:29.652Z</td></tr><tr><td>kotik.neko</td><td><p>Попробуйте еще в конфиге включить <code>TPWS_ENABLE=1</code> и прописать там:</p>
<pre><code class="lang-auto">TPWS_OPT="
--filter-tcp=80 --methodeol &lt;HOSTLIST&gt; --new
--filter-tcp=443 --tlsrec=sni --split-tls=sni --tlsrec-pos=2 --disorder --methodspace --methodeol --unixeol &lt;HOSTLIST&gt;
"
</code></pre>
<p>Мне это помогло в сочетании с включенным и настроенным NFQWS сломать блокировку.</p></td><td>2024-11-19T14:19:21.596Z</td></tr><tr><td>Axolder</td><td><p>спасибо, попробую, с блокировками вроде пока нормально все, а вот с отдачей потока проблема, почему то помогает либо запустить сам launcher gor zapret 1.4, либо иногда многократное переподключение, тогда потом идет без потерь.</p></td><td>2024-11-19T14:22:09.092Z</td></tr><tr><td>KDS</td><td><p>Еще стримы на ютуб отлично работают с синдатой, с фейком синдаты от ианы.орг<br>
Адреса для ipset такие:</p>
<details>
<summary>
Спойлер</summary>
<p>216.58.209.204<br>
64.233.162.134<br>
64.233.164.134<br>
64.233.184.134<br>
142.250.80.44<br>
142.250.80.76<br>
142.250.80.108<br>
142.250.176.204<br>
142.251.35.172<br>
142.251.40.108<br>
142.251.40.140<br>
142.251.40.172<br>
142.251.40.204<br>
142.251.40.236<br>
142.251.41.12<br>
142.250.64.76<br>
142.250.64.108<br>
142.250.65.172<br>
142.250.65.204<br>
142.250.72.108</p>
</details></td><td>2024-11-19T14:24:51.134Z</td></tr><tr><td>Axolder</td><td><p>А если hostlist пользуюсь? В лист включить данные адреса? Не поделитесь для пробы этим фэйком пожалуйста?</p></td><td>2024-11-19T14:31:33.569Z</td></tr><tr><td>KDS</td><td><p>syndata - это нулевая фаза, там не работают хостлисты</p>
<p>Фейк есть в блокчеке и наборе винбандл</p></td><td>2024-11-19T14:32:34.350Z</td></tr><tr><td>Axolder</td><td><p>пробовал днс клаудалэр и гугловские финские. Все равно как то потом нестабилен по отдаче. При просмотре самого ютюба все в порядке.</p></td><td>2024-12-01T11:47:17.329Z</td></tr><tr><td>kotik.neko</td><td><p>Хостлистами или иными черными/белыми списками пользуетесь? Если да, то можно их на время выбрубить и посмотреть, как на все ресурсы дурение происходит. Если все ок, то проблема в хостлистах - чего-то не хватает там.</p></td><td>2024-12-02T08:36:24.924Z</td></tr><tr><td>abc555</td><td><p>У меня на разных провах, на одних работает трансляция, а на других нет, поработает минуту и что то пошло не так и не удалось никак решить этот вопрос, я просто забил на это дуло.<br>
Если вам удастся решить, то напишите как, мало ли, может и у меня тогда прокатит</p></td><td>2024-12-02T11:21:45.302Z</td></tr><tr><td>Axolder</td><td><p>Отключал хост листы, делал чтобы на все сайты работало. Результата не дало.</p></td><td>2024-12-03T22:01:00.025Z</td></tr><tr><td>Axolder</td><td><p>С Launcher for Zapret 1.4 все работает идеально.<br>
В нем вроде бы используется такая стратегия:</p>
<details>
<summary>
Спойлер</summary>
<p>\winws.exe --wf-tcp=443 --wf-udp=443 --filter-udp=443 --hostlist=\youtube.txt --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=\quic_initial_www_google_com.bin --new --filter-tcp=443 --hostlist=\youtube.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --d --filter-tcp=443 --hostlist=\youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=\tls_clienthello_www_google_com.bin --dpi-desync-ttl=3</p>
</details>
<p>я сделал такую стратегию:</p>
<details>
<summary>
Спойлер</summary>
<p>NFQWS_OPT="<br>
–filter-tcp=80 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --new<br>
–filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-repeats=13 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new<br>
–filter-udp=443 --dpi-desync=fake --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin<br>
"</p>
</details>
<p>С ней все равно дропы и потери. С запретом вроде как все идеально. Хостлисты сверил, всего чего не было добавил - не помогло.</p></td><td>2024-12-03T22:04:37.225Z</td></tr><tr><td>KDS</td><td><p>Стратегии для стриминга на ютуб вообще никакого отношения к стратегиям для просмотра ютуба не имеют.<br>
Непонятно, на кой черт вы эти 13 репитов везде лепите, которые вам все ломают.</p>
<p>Для стриминга нужна отдельная стратегия и отдельный хостлист/IPset чисто на сервера стриминга</p></td><td>2024-12-04T15:01:58.817Z</td></tr><tr><td>Axolder</td><td><p>Вы невнимательно меня читаете. Наверно как то можно немного поуважительней общаться? Я понимаю, что вы лучше разбираетесь, но к чему вся это надменность всегда? Вы тогда дали мне совет со стратегией, сказали что много лишнего, я по вашему совету убрал и все наоборот перестало работать в ответ от вас услышал “ахаха”. Я еще раз повторяю. Если repeats сделать меньше 13 на кинетике или совсем убрать то ролики на ютюбе перестают открываться. Если на кинетике полностью отключить запрет и включить только launcher for zapret 1.4, то трансляцию можно запустить нормально, проблем с потерей кадров нет, поток стабилен, ролики нормально воспроизводятся на компьютере. То есть launcher for zapret 1.4 решает мою проблему, я пытаюсь перенести его настройки на кинетик. Никаких IPset и хостлистов эдаких у запрета нет для стриминга.</p></td><td>2024-12-04T16:19:25.727Z</td></tr><tr><td>KDS</td><td><p>Ну так создайте, раз нет. IP вам были предоставлены. Какой домен вписать в хостлист отдельный, думаю, вы тоже в курсе. Ну займет это на роутере 1 лишний килобайт, думаю хуже ему не станет.<br>
Я вас как раз читаю внимательно, а вот вы похоже не читаете ничего или читаете, но наискосок.<br>
А после предъяв в стиле “Ты меня уважаешь?” разговаривать с вами мне больше не о чем. Желаю вам и дальше бычить на желающих вам помочь - это очень “помогает” в решении проблем.</p></td><td>2024-12-04T20:32:26.334Z</td></tr><tr><td>Axolder</td><td><p>Я бычу? Я адекватно наоборот все расписываю. Первый раз мы с вами  встретились, когда я написал свою стратегию, вы её высмеяли и сказали что много мусора, я с вами согласился, хотя пропустил мимо ушей высмеивание, так как вы больше разбираетесь, убрал как вы советовали. У меня с этой стратегией не завелось, я вам сказал что стратегия не работает, на что получил от вас “ахаха ну тогда ладно”. Сейчас же я написал что если отключить все на роутере, и включить лаунчер то все хорошо, но у меня не получается идентично перенести стратегию из лаунчера на роутер. Вы начинаете писать про репитсы “которые все ломают”. Ранее я писал уже вам что я и убирал репитсы и делал меньше. только с 13 заводится. Отдельная стратегия тоже не нужна, как вы сегодня писали, так как лаунчер спокойно справляется с задачей и без ипсетов. Выложил стратегию, которая у меня сейчас, и выложил стратегию лаунчера, на что начинаются грубости в стиле “начерта”, хотя ранее мы уже обсуждали это, и без них у меня почему то не идет. Я понимаю, что когда человек в чем то разбирается, а другие нет, либо в меньшей степени, его это может раздражать. Но вроде бы как мы сейчас все в одной лодке, я не пришел и не говорю - сделайте мне чтобы все работало. Я пытаюсь разобраться.</p></td><td>2024-12-04T21:44:37.521Z</td></tr><tr><td>KDS</td><td><p>Вы постоянно пытаетесь совместить стратегии для интерфейса ютуба, видео ютуба и стриминга на ютуб. Так это не работает, к сожалению. А если и работает, то явно не со стратегиями из лаунчера.<br>
Да и сами стратегии из лаунчера у вас неправильные, на вторую (которая с 10 репитами) там не ютуб.тхт а отдельный хостлист с гуглвидео, с одним этим доменом.<br>
Создайте отдельную стратегию с отдельным хостлистом и расположите ее самой первой в списке, чтобы ютубовские ниже ей не мешали. Если у вас все работает с лаунчером - оттуда стратегию и используйте, просто сменив в ней хостлист.</p>
<details>
<summary>
Спойлер</summary>
<p><code>--filter-tcp=443 --hostlist=\youtube-rtmps.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=\tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new</code></p>
</details>
<p>Никаких репитов, ломающих обход.<br>
Создайте отдельный хостлист youtube-rtmps.txt в нем 1 домен - <code>rtmps.youtube.com</code><br>
Если после этого не заработает - то я не знаю.</p></td><td>2024-12-04T22:26:32.484Z</td></tr><tr><td>Axolder</td><td><p>Спасибо, попробую это сделать.<br>
Объясню ситуацию. Я не пытаюсь совместить, я в первую очередь пытался настроить на кинетике что-либо, чтобы трансляция могла нормально запуститься. Это не получалось. Постоянные дропы, нестабильный поток красный или желтый. Я отключил все на нем и просто включил launcher for zapret 1.4 на ПК и вдруг трансляция, которую мне необходимо запустить для работы пошла ровно (поток стабильный, зеленый, без потерь кадров и просадок битрейта). Выбираю youtube без дискорда и сайтов и поток сразу стабилизируется и кадры не теряются. Я понимаю что вы говорите лаунчер работает только на ролики и никак не задевает стриминг, но в моем случае он помогает. Соответственно хостлист ютюбоский от лаунчера со списком сайтов. В течение месяца я это протестировал неоднократно (то есть это не случайность) На кинетик я же пытаюсь перенести чтобы не нужно было каждый раз включать запрет а так же чтобы я мог запустить трансляцию допустим на телефоне или другом пк.</p></td><td>2024-12-04T22:57:19.467Z</td></tr>
    </table>
      </body>
    </html>