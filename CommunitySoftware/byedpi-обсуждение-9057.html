
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>byedpi-обсуждение-9057</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>hufrea</td><td><p>Здесь вы можете задавать свои вопросы, предлагать идеи, обсуждать функционал и прочее.</p></td><td>2024-08-09T17:44:48.158Z</td></tr><tr><td>hufrea</td><td></td><td>2024-08-09T17:51:03.843Z</td></tr><tr><td>anon94384997</td><td><p>Не компилируется, к сожалению.</p>
<pre><code class="lang-auto">
cc -std=c99 -O2 packets.c main.c conev.c proxy.c desync.c -I . -o ciadpi
In file included from main.c:11:
./params.h:47:26: warning: backslash-newline at end of file
   47 | #define LOG(s, str, ...) \
      |                           
main.c: In function ‘main’:
main.c:205:35: error: ‘INT_MAX’ undeclared (first use in this function)
  205 |             if (val &lt;= 0 || val &gt; INT_MAX/4 || *end)
      |                                   ^~~~~~~
main.c:14:1: note: ‘INT_MAX’ is defined in header ‘&lt;limits.h&gt;’; did you forget to ‘#include &lt;limits.h&gt;’?
   13 | #include &lt;packets.h&gt;
  +++ |+#include &lt;limits.h&gt;
   14 | 
main.c:205:35: note: each undeclared identifier is reported only once for each function it appears in
  205 |             if (val &lt;= 0 || val &gt; INT_MAX/4 || *end)
      |                                   ^~~~~~~
main.c:269:23: error: ‘INT_MIN’ undeclared (first use in this function)
  269 |             if (val &lt; INT_MIN || val &gt; INT_MAX || *end)
      |                       ^~~~~~~
main.c:269:23: note: ‘INT_MIN’ is defined in header ‘&lt;limits.h&gt;’; did you forget to ‘#include &lt;limits.h&gt;’?
In file included from proxy.c:21:
./params.h:47:26: warning: backslash-newline at end of file
   47 | #define LOG(s, str, ...) \
      |                           
In file included from desync.c:21:
./params.h:47:26: warning: backslash-newline at end of file
   47 | #define LOG(s, str, ...) \
      |                           
desync.c: In function ‘fake_attack’:
desync.c:18:35: warning: implicit declaration of function ‘fileno’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   18 | #define memfd_create(name, flags) fileno(tmpfile())
      |                                   ^~~~~~
desync.c:30:15: note: in expansion of macro ‘memfd_create’
   30 |     int ffd = memfd_create("name", O_RDWR);
      |               ^~~~~~~~~~~~
desync.c:18:42: warning: implicit declaration of function ‘tmpfile’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   18 | #define memfd_create(name, flags) fileno(tmpfile())
      |                                          ^~~~~~~
desync.c:30:15: note: in expansion of macro ‘memfd_create’
   30 |     int ffd = memfd_create("name", O_RDWR);
      |               ^~~~~~~~~~~~
desync.c:32:9: warning: implicit declaration of function ‘perror’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   32 |         perror("memfd_create");
      |         ^~~~~~
desync.c:39:13: warning: implicit declaration of function ‘ftruncate’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   39 |         if (ftruncate(ffd, pos) &lt; 0) {
      |             ^~~~~~~~~
desync.c:48:9: warning: implicit declaration of function ‘memcpy’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   48 |         memcpy(p, pkt.data, psz &lt; pos ? psz : pos);
      |         ^~~~~~
desync.c:23:1: note: include ‘&lt;string.h&gt;’ or provide a declaration of ‘memcpy’
   22 | #include &lt;packets.h&gt;
  +++ |+#include &lt;string.h&gt;
   23 | 
desync.c:48:9: warning: incompatible implicit declaration of built-in function ‘memcpy’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wbuiltin-declaration-mismatch-Wbuiltin-declaration-mismatche]8;;]
   48 |         memcpy(p, pkt.data, psz &lt; pos ? psz : pos);
      |         ^~~~~~
desync.c:48:9: note: include ‘&lt;string.h&gt;’ or provide a declaration of ‘memcpy’
desync.c:59:9: warning: implicit declaration of function ‘usleep’; did you mean ‘sleep’? [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   59 |         usleep(params.sfdelay);
      |         ^~~~~~
      |         sleep
desync.c: In function ‘desync’:
./params.h:48:28: warning: implicit declaration of function ‘printf’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
   48 |     if (params.debug &gt;= s) printf(str, ##__VA_ARGS__)
      |                            ^~~~~~
desync.c:116:5: note: in expansion of macro ‘LOG’
  116 |     LOG(LOG_S, "host: %.*s\n", len, host);
      |     ^~~
desync.c:23:1: note: include ‘&lt;stdio.h&gt;’ or provide a declaration of ‘printf’
   22 | #include &lt;packets.h&gt;
  +++ |+#include &lt;stdio.h&gt;
   23 | 
./params.h:48:28: warning: incompatible implicit declaration of built-in function ‘printf’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wbuiltin-declaration-mismatch-Wbuiltin-declaration-mismatche]8;;]
   48 |     if (params.debug &gt;= s) printf(str, ##__VA_ARGS__)
      |                            ^~~~~~
desync.c:116:5: note: in expansion of macro ‘LOG’
  116 |     LOG(LOG_S, "host: %.*s\n", len, host);
      |     ^~~
./params.h:48:28: note: include ‘&lt;stdio.h&gt;’ or provide a declaration of ‘printf’
   48 |     if (params.debug &gt;= s) printf(str, ##__VA_ARGS__)
      |                            ^~~~~~
desync.c:116:5: note: in expansion of macro ‘LOG’
  116 |     LOG(LOG_S, "host: %.*s\n", len, host);
      |     ^~~
desync.c:120:13: warning: implicit declaration of function ‘fprintf’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wimplicit-function-declaration-Wimplicit-function-declaratione]8;;]
  120 |             fprintf(stderr, "mod http error\n");
      |             ^~~~~~~
desync.c:120:13: note: include ‘&lt;stdio.h&gt;’ or provide a declaration of ‘fprintf’
desync.c:120:13: warning: incompatible implicit declaration of built-in function ‘fprintf’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wbuiltin-declaration-mismatch-Wbuiltin-declaration-mismatche]8;;]
desync.c:120:13: note: include ‘&lt;stdio.h&gt;’ or provide a declaration of ‘fprintf’
desync.c:120:21: error: ‘stderr’ undeclared (first use in this function)
  120 |             fprintf(stderr, "mod http error\n");
      |                     ^~~~~~
desync.c:120:21: note: ‘stderr’ is defined in header ‘&lt;stdio.h&gt;’; did you forget to ‘#include &lt;stdio.h&gt;’?
desync.c:120:21: note: each undeclared identifier is reported only once for each function it appears in
./params.h:48:28: warning: incompatible implicit declaration of built-in function ‘printf’ [e]8;;https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wbuiltin-declaration-mismatch-Wbuiltin-declaration-mismatche]8;;]
   48 |     if (params.debug &gt;= s) printf(str, ##__VA_ARGS__)
      |                            ^~~~~~
desync.c:129:5: note: in expansion of macro ‘LOG’
  129 |     LOG(LOG_L, "split pos: %d, n: %ld\n", pos, n);
      |     ^~~
./params.h:48:28: note: include ‘&lt;stdio.h&gt;’ or provide a declaration of ‘printf’
   48 |     if (params.debug &gt;= s) printf(str, ##__VA_ARGS__)
      |                            ^~~~~~
desync.c:129:5: note: in expansion of macro ‘LOG’
  129 |     LOG(LOG_L, "split pos: %d, n: %ld\n", pos, n);
      |     ^~~
make: *** [Makefile:7: all] Error 1
</code></pre></td><td>2023-06-11T22:12:20.263Z</td></tr><tr><td>hufrea</td><td><p>Спасибо, поправил</p></td><td>2023-06-12T04:11:32.458Z</td></tr><tr><td>VasilyGrigoriev378(Василий Григорьев)</td><td><p>На провайдерах МТС,Yota,Теле2,Мегафон мне кажется такой инструмент не будет работать как положено,там DPI таки конченный у этих провайдров стоит что с горем попалам Zapret работает при блокировках по домену заглушку провайдера выдает часто.</p></td><td>2023-06-12T07:33:05.346Z</td></tr><tr><td>hufrea</td><td><p>Тестировал на Tele2, работает с такими параметрами “-m disorder -s 3” или “-m fake -t 5 -s -1”</p></td><td>2023-06-12T08:14:40.953Z</td></tr><tr><td>VasilyGrigoriev378(Василий Григорьев)</td><td><p>Предложение у меня по развитию программы, добавьте возможность обхода блокировки OpenVPN UDP/TCP ,ну и обход блокировки протокола Wireguard.  Ну и на всякий пожарный еще обход возможной блокировки в будущем это IKEv2/IPsec</p></td><td>2023-06-13T05:44:11.007Z</td></tr><tr><td>fdsadf4345</td><td><p>А как это реализовать в openwrt ? Хотелось бы попробовать, проверить. Какую не будь инструкцию для юзеров вы бы написали, как установить и как настроить, было бы круто, а так догадайся сам, просто не реально.<br>
Может какие нить пакеты нужно дополнительно поставить, сколько надо памяти свободной, ведь не каждый роутер подойдёт, никто этого никогда не пишет, такие кругом пишут инструкции, что не каждый профессор поймёт, как будто памятку пишут для себя чтоб не забыть. Это же нужно быть на одной волне, а если примерно понимаешь, то и в жизни никогда не поймёшь что это, куда и зачем. Я ни разу не видел вообще нормальной инструкции, нигде и никогда</p></td><td>2023-06-14T15:31:30.937Z</td></tr><tr><td>RapWolf</td><td><aside class="quote no-group" data-username="fdsadf4345" data-post="9" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/a3d4f5/48.png" class="avatar"> fdsadf4345:</div>
<blockquote>
<p>Это же нужно быть на одной волне</p>
</blockquote>
</aside>
<p>Потому что гитхаб в первую очередь для разработчиков, а не юзеров.<br>
Инструкции по использованию обычно в документации, а то что у подобных тулз нет общей отдельной документации — это уже проблема категории ПО, так как оно хакерское.</p>
<aside class="quote no-group" data-username="fdsadf4345" data-post="9" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/a3d4f5/48.png" class="avatar"> fdsadf4345:</div>
<blockquote>
<p>Я ни разу не видел вообще нормальной инструкции, нигде и никогда</p>
</blockquote>
</aside>
<p>Если для вас инструкции того же zapret’а не являются нормальными, то в принципе мало чего можно посоветовать. Зачастую у плюс-минус популярных репозиториев инструкции на гх не сильно уступают документации линукса; но, правда, намного хуже бсд — там вообще всё прекрасно и для всех.</p>
<p>У хакерского ПО инструкции это либо то, что написано в самом репозитории, либо ещё есть обсуждения на разных закрытых и не очень ресурсах. Если не хотите искать и вычитывать эти ресурсы или в целом разбираться, то скорее всего вам это и не нужно, используйте готовые решения, например, покупайте впн на v2ray/xray.</p></td><td>2023-06-14T17:27:48.290Z</td></tr><tr><td>hufrea</td><td><p>По сути все, что нужно сделать, это закинуть бинарник на устройство и запустить, параметры обхода можно подобрать с помощью blockcheck из проекта zapret и затем найти аналогичные в byedpi. Так как это socks сервер, то нужно настроить браузер/систему на работу через прокси или же использовать tun2socks. На роутерах я все же рекомендовал бы использовать zapret.</p></td><td>2023-06-14T19:11:08.204Z</td></tr><tr><td>anon94384997</td><td><aside class="quote no-group" data-username="fdsadf4345" data-post="9" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/f/a3d4f5/48.png" class="avatar"> fdsadf4345:</div>
<blockquote>
<p>А как это реализовать в openwrt ? Хотелось бы попробовать, проверить. Какую не будь инструкцию для юзеров вы бы написали, как установить и как настроить, было бы круто, а так догадайся сам, просто не реально.</p>
</blockquote>
</aside>
<p>Собрать на линуксе это можно так. На <a href="https://github.com/hufrea/byedpi" rel="noopener nofollow ugc">гитхабе</a> зеленая кнопка Code - Local - Download ZIP - распаковать, войти в раскакованную папку в терминале командой cd (cd путь/к/byedpi)<br>
Если установлен git, вместо скачивания zip, в терминале можно выполнить:<br>
<code>git clone https://github.com/hufrea/byedpi</code><br>
Это склонирует репозиторий в рабочую папку.</p>
<p>Надо установить gcc и make с помощью пакетного менеджера дистрибутива. В Debian/Ubuntu и производных, это, например, Synaptic. Или в терминале.<br>
<code>sudo apt install git gcc g++ make binutils build-essential</code><br>
build-essential дебиановский метапакет, он притащит с собой gcc и make.<br>
В папке с исходниками выполнить <code>make</code><br>
Среди исходников появится бинарный файл ciadpi, всё остальное можно удалить.<br>
Можно удалить отладочные символы, это уменьшит его размер.<br>
<code>strip --strip-unneeded путь/к/byedpi/ciadpi</code><br>
А потом этот бинарник положить в PATH (например, /usr/local/bin или /usr/bin) на нужной системе. И тогда в терминале можно писать просто <code>ciadpi</code></p>
<p>Но есть ограничения в переносе:</p>
<ul>
<li>Новая система должна быть той свежести или новее. Если glibc будет старее, чем тот, с которым собирался бинарник, то так просто его не запустить. А посему имеет смысл собрать на более старом линуксе (например, в виртуалке).</li>
<li>Архитектура должна совпадаеть. Если openwrt на ARM, то собирать надо или в армовом линуксе (виртуалке?) или кросскомпилировать для ARM (как это сделать я точно не знаю). К слову, если собрать в 32 битном линуксе, можно запустить на 64 битном, доустановив в нем 32 битный glibc (для deb дистров: sudo dpkg --add-architecture i386 &amp;&amp; sudo apt update &amp;&amp; sudo apt install libc6:i386). Но не наоборот.</li>
</ul>
<p>Это что касается компиляции. Запуск, настройка это другой вопрос. Тут пишут, что это прога предоставляет локальный прокси, который надо вписать в браузере. Для openwrt это не очень типичное использование, я так понимаю.</p></td><td>2023-06-15T04:51:48.084Z</td></tr><tr><td>VasilyGrigoriev378(Василий Григорьев)</td><td><p>На МТС и Мегафон не тестили работает ли ByeDPI там?</p></td><td>2023-07-02T12:21:24.968Z</td></tr><tr><td>bolvan</td><td><p>Мне кажется эта прога в принципе не работоспособна, судя по отсутствию требований к привилегиям и после беглого просмотра исходников.<br>
Прогон показывает, что при любых ключах -m выполняется просто split. Отсылка частями кусков данных tcp, на первый из которых ставится низкий TTL. Что по логике спровоцирует SACK со стороны сервера (ведь он не получит 1 куска) и ретрансмиссию.<br>
Никакого disorder или fake я не наблюдаю. Потому что их невозможно отослать через обычный SOCK_STREAM.<br>
Собственно, ничего другого ожидать и не приходится, функционал сильно напоминает tpws --socks</p>
<p>Или я что-то не понял ?</p></td><td>2023-07-02T19:04:51.082Z</td></tr><tr><td>hufrea</td><td><p>Верно, отправляется первый кусок с низким TTL (в частности равное одному, чтобы даже до DPI не дошел, по сути это пустышка для ОС), затем второй с нормальным, второй доходит до сервера, первый нет, ОС выполняет ретрансмисию и снова отправляет первый кусок, итог - DPI обрабатывает сначала второй кусок, а затем только первый. Вот обрезанный вывод tshark:</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">1 192.1.1.1 → 209.2.2.2 TCP 74 63 → 80 [SYN] Seq=0 Win=64240 Len=0 MSS=1460 WS=64
2 209.2.2.2 → 192.1.1.1 TCP 74 80 → 63 [SYN, ACK] Seq=0 Ack=1 Win=28960 Len=0 MSS=1366 WS=128
3 192.1.1.1 → 209.2.2.2 TCP 66 63 → 80 [ACK] Seq=1 Ack=1 Win=64256 Len=0
4 192.1.1.1 → 209.2.2.2 TCP 69 63 → 80 [PSH, ACK] Seq=1 Ack=1 Win=64256 Len=3 // первый кусок с ttl=1, DPI и сервер пакет не видят
5 192.1.1.1 → 209.2.2.2 TCP 142 63 → 80 [PSH, ACK] Seq=4 Ack=1 Win=64256 Len=76 // второй кусок, сервер его получил
6 209.2.2.2 → 192.1.1.1 TCP 78 [TCP Window Update] 80 → 63 [ACK] Seq=1 Ack=1 Win=30080 SLE=4 SRE=80
7 192.1.1.1 → 209.2.2.2 TCP 69 [TCP Retransmission] 63 → 80 [PSH, ACK] Seq=1 Ack=1 Win=64256 Len=3 // опять первый кусок, на этот раз сервер его получает 
8 209.2.2.2 → 192.1.1.1 TCP 66 80 → 63 [ACK] Seq=1 Ack=80 Win=30080 Len=0
9 209.2.2.2 → 192.1.1.1 HTTP 1290 HTTP/1.1 200 OK
</code></pre>
</details></td><td>2023-07-02T20:11:07.913Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="15" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Верно, отправляется первый кусок с низким TTL (в частности равное одному, чтобы даже до DPI не дошел, по сути это пустышка для ОС), затем второй с нормальным, второй доходит до сервера, первый нет, ОС выполняет ретрансмисию и снова отправляет первый кусок, итог - DPI обрабатывает сначала второй кусок, а затем только первый</p>
</blockquote>
</aside>
<p>OK, с disorder я уже сам догадался. Но что с fake ?<br>
Каким образом отослать fake, чтобы он дошел до DPI, но не дошел до сервера ?<br>
Ведь все, что будет засунуто в TCP socket  ОС будет доставлять до адресата, что собьет протокол</p>
<p>C TTL идея неплохая, может быть стоит добавить это в tpws.<br>
Типа как лайт версия disorder без привилегий</p></td><td>2023-07-03T06:25:03.699Z</td></tr><tr><td>hufrea</td><td><p>А для fake используется вызов sendfile. Его особенность в том, что он не копирует данные в буфер ядра, а читает их напрямую из файла, притом данные во время вызова могут быть перезаписаны. И так: создаем файл в озу (memfd/tmpfile), записываем в него поддельные данные (допустим Client Hello с безобидным SNI), выставляем TTL таким, чтобы пакет прошел через DPI, но не дошел до сервера,  и отправляем. Затем записываем в файл уже настоящие данные и восстанавливаем TTL - ОС не получает ответа (или получает SACK если пакет разбиваем на два) и снова отправляет файл, на этот раз в нем уже оригинальные данные и нормальный TTL - пакет успешно доходит до сервера. Конечно есть ограничение - фейк не может быть больше оригинала. Если использовать sendfile только до определенного смещение то порядок отправки будет такой:</p>
<ol>
<li>Первая фейковая часть</li>
<li>Вторая настоящая часть</li>
<li>Первая настоящая часть</li>
</ol></td><td>2023-07-03T07:40:02.538Z</td></tr><tr><td>bolvan</td><td><p>disorder, действительно, работает. правда, на некоторых DPI на некоторых сайтах http вызывает подвисание, но это проблема некоторых DPI, и о ней мне известно.<br>
ядро freebsd при аналогичной технике ведет себя несколько иначе, чем linux. сначала отсылает первую часть с TTL=1 (указанным), потом ретрансмиссия идет полная, а не частичная</p>
<p>а вот fake не похоже, что срабатывает у меня.</p>
<p>router: /tmp/ciadpi  -p 1080 -m f<br>
client: curl --socks5 router <a href="http://lenta.ru">http://lenta.ru</a><br>
router: tcpdump -ni wan -vX tcp port 80</p>
<p>не вижу fake. есть только split<br>
проверил на router mips и виртуалке с ubuntu. на http и https</p></td><td>2023-07-03T09:14:30.604Z</td></tr><tr><td>hufrea</td><td><p>Дело в том, что sendfile используется для первой части пакета, а т.к. параметр split-position по умолчанию равен 3, то отправляются только первые 3 байта от фейка, стоит добавить параметр “-s -1” (разбить по предпоследнему байту)</p></td><td>2023-07-03T09:38:08.949Z</td></tr><tr><td>bolvan</td><td><p>да, так работает. думаю это надо отразить в документации, поскольку неочевидно</p></td><td>2023-07-03T09:43:02.730Z</td></tr><tr><td>bolvan</td><td><p>IP_TTL касается только ipv4<br>
на ipv6 работает IPPROTO_IPV6, IPV6_UNICAST_HOPS<br>
IPPROTO_IPV6, IPV6_HOPLIMIT - это не то.</p></td><td>2023-07-03T09:56:09.590Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="18" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ядро freebsd при аналогичной технике ведет себя несколько иначе, чем linux. сначала отсылает первую часть с TTL=1 (указанным), потом ретрансмиссия идет полная, а не частичная</p>
</blockquote>
</aside>
<p>ага, windows ведет себя также</p>
<aside class="quote no-group quote-post-not-found" data-username="bolvan" data-post="19" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/19">ByeDPI</a></div>
<blockquote>
<p>думаю это надо отразить в документации, поскольку неочевидно</p>
</blockquote>
</aside>
<aside class="quote no-group quote-post-not-found" data-username="bolvan" data-post="20" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/20">ByeDPI</a></div>
<blockquote>
<p>на ipv6 работает IPPROTO_IPV6, IPV6_UNICAST_HOPS</p>
</blockquote>
</aside>
<p>спасибо, поправлю.</p></td><td>2023-07-03T10:28:45.738Z</td></tr><tr><td>bolvan</td><td><p>Кстати, на удивление macos ведет себя аналогично Linux, хотя вроде это и BSD</p></td><td>2023-07-03T10:35:04.079Z</td></tr><tr><td>bolvan</td><td><p>Не может быть гонок в этом коде с sendfile ?<br>
Расчет идет на то, что вызов ядра sendfile до возврата отошлет данные или хотя бы скопирует куда-то.<br>
nanosleep(0) - это просто передача управления следующему потоку в очереди планировщика.<br>
время, после которого вернется nanosleep не гарантировано.<br>
В этот момент копируется в буфер sendfile оригинальный блок данных.<br>
Предполагается, что ядро еще раз обратится к буферу sendfile, чтобы его отослать.<br>
Но когда это будет никто не может гарантировать.<br>
Конечно, наиболее вероятно, что nanosleep вернется гораздо быстрее, чем возникнет необходимость повторной передачи.<br>
Но еще непонятно что будет, когда второй send завершился, данные отправились в сокет, и после этого мы делаем munmap() и закрываем memfd.<br>
Должно быть ядро делает dup() или что-то подобное, чтобы удержать буфер, пока он ему нужен, так что close() в проге не убивает реально буфер мгновенно.<br>
Как вообще с надежностью данной схемы ?</p></td><td>2023-07-03T10:56:56.339Z</td></tr><tr><td>hufrea</td><td><p>TTL восстанавливается после того, как оригинал будет записан в файл, и если ядро каким-то образом захочет снова отправить данные до завершения nanosleep, то этот пакет тоже не дойдет до сервера из-за низкого TTL, что спровоцирует третью попытку. Однако вероятность этого очень мала, т.к. должно пройти время до ретрансмисии (0.2с) или должен быть полечен SACK, что не произойдет т.к. вторая часть отправляется в самом конце. Еще есть вероятность, что фейк не будет отправлен между вызовом sendfile и записи оригинальных данных с восстановлением TTL, чтобы это минимизировать и используется nanosleep, однако и это дает полную гарантию, что ядро успеет отправить фейк.</p></td><td>2023-07-03T11:53:35.052Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="25" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>однако и это дает полную гарантию, что ядро успеет отправить фейк.</p>
</blockquote>
</aside>
<p>Наверно, имелось в виду НЕ дает полную гарантию.<br>
Вот и я смотрю на этот код, и видится мне хак. Не предназначено это для таких попрыгушек<br>
менять данные на лету без синхронизации с ядром на авось. Но возможно это на практике работает довольно стабильно.<br>
Есть разные варианты. Быстрые/медленные/незагруженные/высоконагруженные/одно/многопоточные системы.<br>
На них бы потестить<br>
И еще на разной нагрузке на сам proxy. Я tpws тестировал в очень жестких режимах. До 10000 соединений, торенты через socks, броузер с кучей вкладок, курлы, качающие данные.<br>
Вообщем ему не сладко приходилось, и надо было обеспечить отсутствие потерь кусков данных вследствие закрытий сокетов (буферизированная отправка)<br>
Ну или сразу оговаривать, что режим потенциально ненадежен</p></td><td>2023-07-03T12:02:42.865Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="26" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Наверно, имелось в виду НЕ дает полную гарантию.<br>
Вот и я смотрю на этот код, и видится мне хак.</p>
</blockquote>
</aside>
<p>да, так и есть</p></td><td>2023-07-03T13:19:19.192Z</td></tr><tr><td>Saiv46(Alexander Ivanov)</td><td><p>Спасибо большое за утилиту! А то у DPITunnel кривой HTTP-прокси, отчего не все сайты открываются с ним, а тут же привычный прокси SOCKS5/SOCKS4.</p>
<p>Мне хватает такой конфигурации:</p>
<pre><code class="lang-auto">/opt/ciadpi --method disorder --split-pos 3
</code></pre></td><td>2023-07-21T14:49:18.728Z</td></tr><tr><td>hufrea</td><td><p>Рад быть полезным</p></td><td>2023-07-21T19:18:50.115Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="27" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/27">ByeDPI</a></div>
<blockquote>
<p>Добавлена поддержка UDP с аттакой fake, пока в dev ветке</p>
</blockquote>
</aside>
<p>UDP associate over socks ?<br>
Броузеры это поддерживают ?</p></td><td>2023-07-22T16:25:38.414Z</td></tr><tr><td>hufrea</td><td><p>насколько знаю - нет</p></td><td>2023-07-22T16:30:21.642Z</td></tr><tr><td>Saiv46(Alexander Ivanov)</td><td><p>Вышла новая версия - теперь сайты с IPv6 тоже открываются!</p></td><td>2023-07-31T18:29:51.606Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="33" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/33">ByeDPI</a></div>
<blockquote>
<p>смысл поддержки Windows</p>
</blockquote>
</aside>
<p>В windows имеет смысл все, что можно сделать в рамках stream (не packet) фильтра.<br>
В т.ч. сплит и весь набор http дурилок. tlsrec, разумеется, тоже.<br>
Packet filter уже реализован в goodbyeDPI, и без kernel драйвера его судя по всему не сделать<br>
Кстати, tpws в режиме socks может работать под WSL</p></td><td>2024-02-19T12:02:20.482Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="33" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В windows имеет смысл все</p>
</blockquote>
</aside>
<p>Конечно, однако до этого byedpi был неэффективен для tls, т.к. на многих провайдерах split не дает эффекта, disorder работает некорректно, а fake не поддерживается.</p></td><td>2024-02-19T13:22:37.709Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://datatracker.ietf.org/doc/html/rfc6093#section-3">
  <header class="source">
      <img src="byedpi-обсуждение-9057/a36eaf5ce9c4569f08c317d6e9adb3a1684222ae.png" class="site-icon" data-dominant-color="A39F95" width="32" height="32">

      <a href="https://datatracker.ietf.org/doc/html/rfc6093#section-3" target="_blank" rel="noopener nofollow ugc">IETF Datatracker</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="byedpi-обсуждение-9057/f055836e442579eb80d594c155b6ccf7c2677a1d_2_690x362.png" class="thumbnail" data-dominant-color="ECEBE9" width="690" height="362"></div>

<h3><a href="https://datatracker.ietf.org/doc/html/rfc6093#section-3" target="_blank" rel="noopener nofollow ugc">RFC 6093: On the Implementation of the TCP Urgent Mechanism</a></h3>

  <p>This document analyzes how current TCP implementations process TCP urgent indications and how the behavior of some widely deployed middleboxes affects how end systems process urgent indications. This document updates the relevant specifications such...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<blockquote>
<p>As discussed in Section 2, the TCP urgent mechanism simply permits a<br>
point in the data stream to be designated as the end of urgent<br>
information but does NOT provide a mechanism for sending “out-of-<br>
band” data.</p>
</blockquote>
<blockquote>
<p>Unfortunately, virtually all TCP implementations process TCP urgent<br>
indications differently.  By default, the last byte of “urgent data”<br>
is delivered “out of band” to the application.  That is, it is not<br>
delivered as part of the normal data stream [UNPv1]<br>
( Stevens, W., “UNIX Network Programming, Volume 1.<br>
Networking APIs: Sockets and XTI”, Prentice Hall PTR, 1997.).<br>
For example,<br>
the “out-of-band” byte is read by an application when a recv(2)<br>
system call with the MSG_OOB flag set is issued.</p>
</blockquote>
<blockquote>
<p>Most implementations provide a socket option (SO_OOBINLINE) that<br>
allows an application to override the (broken) default processing of<br>
urgent indications, so that “urgent data” is delivered “in line” to<br>
the application, thus providing the semantics intended by the IETF<br>
specifications.</p>
</blockquote></td><td>2024-02-29T20:50:54.954Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Datura_metel" data-post="35" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>As discussed in Section 2, the TCP urgent mechanism simply permits a<br>
point in the data stream to be designated as the end of urgent<br>
information but does NOT provide a mechanism for sending “out-of-<br>
band” data.</p>
</blockquote>
</aside>
<p>Поэтому DPI и может обработать пакет как обычные данные.</p>
<aside class="quote no-group" data-username="Datura_metel" data-post="35" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>By default, the last byte of “urgent data”<br>
is delivered “out of band” to the application. That is, it is not<br>
delivered as part of the normal data stream [UNPv1]</p>
</blockquote>
</aside>
<p>И поэтому один байт не будет обработан сервером, за некоторыми исключениями</p>
<aside class="quote no-group" data-username="Datura_metel" data-post="35" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>he “out-of-band” byte is read by an application when a recv(2)<br>
system call with the MSG_OOB flag set is issued.</p>
</blockquote>
</aside>
<aside class="quote no-group quote-modified" data-username="Datura_metel" data-post="35" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>ost implementations provide a socket option (SO_OOBINLINE) that<br>
allows an application to override the (broken)…</p>
</blockquote>
</aside>
<p>Конечно, если сервер устанавливает опцию SO_OOBINLINE или флаг MSG_PEEK, принимая обычные данные, то все сломается.</p></td><td>2024-03-01T12:01:40.695Z</td></tr><tr><td>ValdikSS</td><td><p>Один байт отбросит, если делать это вручную и следить за отправкой, но семантически oob-данные являются <em>данными</em>. Попробуйте отправить несколько пакетов с urgent-флагом подряд — они объединятся в один сегмент и придут в приложение обычным потоком.</p>
<p>Хак, безусловно, прикольный, но не настолько универсальный, как может показаться на первый взгляд.</p></td><td>2024-03-01T12:22:18.572Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="37" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<p>семантически oob-данные являются <em>данными</em>. Попробуйте отправить несколько пакетов с urgent-флагом подряд — они объединятся в один сегмент и придут в приложение обычным потоком</p>
</blockquote>
</aside>
<p>Да, поэтому можно отправлять настоящие данные с флагом oob, и все они придут в обычный поток, за исключением последнего байта:<br>
1-я часть с флагом oob:<br>
…“\nHost: rutx” (сервер отбросит x)<br>
2-я часть:<br>
“<a href="http://racker.org" rel="noopener nofollow ugc">racker.org</a>”…</p></td><td>2024-03-01T12:41:40.109Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="hufrea" data-post="36" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>не будет обработан сервером, за некоторыми исключениями</p>
</blockquote>
</aside>
<p>К таким исключениям можно отнести некоторые средства защиты от ддос, в частности заметил поломку на QRATOR</p></td><td>2024-03-01T17:01:38.129Z</td></tr><tr><td>gfqwdgecewgcdw</td><td><p>Залей скомпилированную версию под винду с obb</p></td><td>2024-03-01T19:46:18.820Z</td></tr><tr><td>hufrea</td><td><p><a class="attachment" href="byedpi-обсуждение-9057/Ae9jVG0Ik2YGvHKodF0XOp1jRcs.zip">byedpi-6b484d5.zip</a> (31,7 КБ)</p></td><td>2024-03-01T20:03:38.167Z</td></tr><tr><td>gfqwdgecewgcdw</td><td><p>Большое спасибо</p></td><td>2024-03-01T20:09:39.400Z</td></tr><tr><td>bolvan</td><td><p>техники OOB и tlsrec работают в России в основном только на TLS1.3<br>
На 1.2 rdp-шный DPI сечет ответ сервера и сбрасывает</p></td><td>2024-03-02T12:16:18.888Z</td></tr><tr><td>Elevator</td><td><p>А чем отличается данная прога от TPWS? На первый взгляд функционал обеих программ одинаковый</p></td><td>2024-03-08T20:41:35.915Z</td></tr><tr><td>hufrea</td><td><p>byedpi может быть менее стабильным, чем tpws, не содержит некоторых опций, таких, как hostlist, bind-wait и пр. Но он позволяет совершать более запутанные аттаки, такие как fake, отсылка нескольких oob байт подряд, разбиение по нескольким позициям.</p></td><td>2024-03-08T22:03:03.527Z</td></tr><tr><td>bolvan</td><td><p>Каким образом делается вывод, что ‘не удалось’ ?<br>
В tpws для этого сечется несколько вариантов :</p>
<ol>
<li>RST, пришедший в ответ на первый запрос с хостом.</li>
<li>HTTP редирект, пришедший в ответ на первый запрос с хостом, на глобальный адрес<br>
с доменом 2 уровня, не совпадающим с доменом 2 уровня оригинального запроса.</li>
<li>закрытие соединения клиентом после отправки первого запроса с хостом, если не было на него<br>
ответа со стороны сервера. Это обычно случается по таймауту, когда нет ответа (случай “зависание”).</li>
</ol>
<p>Окей, первые 2 варианта можно обыграть как-то. Придется держать входящий конект и переподключаться несколько раз, чтобы попробовать новый вариант. Сложновато, но реализуемо.<br>
Но как быть с вариантом 3 ? Это очень распространенный вариант.<br>
Броузеры долго висят в ожидании ответа. Придется вводить какой-то более короткий таймаут, чтобы самому попробовать несколько вариантов, оставляя броузер висеть в это время.<br>
Но сколько ждать ?</p>
<p>IP сайта кэшировать не есть гуд. Они могут скакать и быть множественными. Может лучше домен ?<br>
И что в случае перезапуска ? Нигде не сохраняется результат ?</p></td><td>2024-03-11T18:44:54.116Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="46" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Каким образом делается вывод, что ‘не удалось’ ?</p>
</blockquote>
</aside>
<p>Пока обрабатывается только RST на первый запрос.</p>
<aside class="quote no-group" data-username="bolvan" data-post="46" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Придется держать входящий конект и переподключаться несколько раз, чтобы попробовать новый вариант. Сложновато, но реализуемо.</p>
</blockquote>
</aside>
<p>Да, так я и реализовал.</p>
<aside class="quote no-group" data-username="bolvan" data-post="46" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но как быть с вариантом 3 ? Это очень распространенный вариант.<br>
Броузеры долго висят в ожидании ответа. Придется вводить какой-то более короткий таймаут, чтобы самому попробовать несколько вариантов, оставляя броузер висеть в это время.</p>
</blockquote>
</aside>
<p>В первую очередь я хотел решить проблему поломки сайтов из-за tlsrec/oob/disorder, когда сервер сразу сбрасывает соединение. Пока не уверен, нужно ли добавлять обработку заморозки соединения, т.к. высока вероятность ложного срабатывания - высокий пинг, подвисание всей сети, медленный wifi на расстоянии, сайт временно не доступен.</p>
<aside class="quote no-group" data-username="bolvan" data-post="46" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>IP сайта кэшировать не есть гуд. Они могут скакать и быть множественными. Может лучше домен ?<br>
И что в случае перезапуска ? Нигде не сохраняется результат ?</p>
</blockquote>
</aside>
<p>IP сохранять есть смысл при использовании --redirect, чтобы обходить блокировки по IP, когда под ним могут быть и другие невинные сайты. Могут быть случаи невозможности определения домена (запутываются и другие протоколы, ESNI). Но да, IP может быть много, возможно добавлю кеширование доменов, с возможностью добавление IP, если нет домена.</p>
<aside class="quote no-group" data-username="bolvan" data-post="46" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>И что в случае перезапуска ? Нигде не сохраняется результат ?</p>
</blockquote>
</aside>
<p>Не сохраняется, и сами значения в кеше тоже валидны лишь несколько часов. Это сделано для того, чтобы кеш был актуальным, например, при чередовании провайдеров или при масштабных сбоях/временных блокировках, которые в последнее время часто случаются. При обработке только RST, новый перебор каждые несколько часов/суток некритичен, т.к. не занимает много времени.</p></td><td>2024-03-11T19:34:19.661Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="47" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Пока не уверен, нужно ли добавлять обработку заморозки соединения, т.к. высока вероятность ложного срабатывания</p>
</blockquote>
</aside>
<p>Без этого на многих провайдерах затея полностью теряет смысл</p>
<pre><code class="lang-auto">curl --max-time 5 https://rutracker.org
curl: (28) Connection timed out after 5000 milliseconds
curl --max-time 20 http://bbc.com
curl: (28) Operation timed out after 20001 milliseconds with 0 bytes received
</code></pre>
<p>sknt и rostelecom SPB ведут себя так.<br>
Он даже не удосуживается огрызнуться RST. Он отмораживается молча. Вот еще. Буду я на тебя ресурсы тратить. Не дождешься, виси там себе, тупи сколько влезет</p>
<p>На http самая типичная реакция - не RST, а именно редирект</p>
<aside class="quote no-group" data-username="hufrea" data-post="47" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>чередовании провайдеров</p>
</blockquote>
</aside>
<p>Чредование провайдеров это смена wifi или  wifi/cell ?<br>
Так оно может случаться куда быстрее нескольких часов. Это скорее надо как-то детектить, если очень уж хочется.<br>
Таблица маршрутизации доступна и без рута. Можно смотреть default gateway. ip4 и ip6<br>
Можно даже не заморачиваться с netlink. Есть /proc/net/route и /proc/net/ipv6_route<br>
Если поменялся gateway, то сбрасывать кэш. Возможно, стоит смотреть не полностью эту запись, а только название  интерфейса default gateway, чтобы различать cell и wifi. Ведь сотовик может дать разные подсети при каждом подключении. Тут хорошо бы потестить на разных операторах, подергать подключение.<br>
Еще лучше  - держать разные кэши для разных подключений.  Потому что скакать оно может иногда довольно часто.<br>
Аппарат перемещается, то входит в зону wifi, то выходит, плохой прием wifi или cell</p></td><td>2024-03-12T06:15:05.250Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="48" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Без этого на многих провайдерах затея полностью теряет смысл</p>
</blockquote>
</aside>
<p>На таких можно делать наоборот - запутывать все подключения, а исключать лишь поломанные сайты (которые, в основном, сразу присылают RST):<br>
./ciadpi --tlsrec 3+s --auto</p>
<aside class="quote no-group" data-username="bolvan" data-post="48" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Чредование провайдеров это смена wifi или wifi/cell ?<br>
Так оно может случаться куда быстрее нескольких часов. Это скорее надо как-то детектить, если очень уж хочется.</p>
</blockquote>
</aside>
<p>Это так, сходу привел в пример, как одна из причин устаревания кеша, особо данный случай не расматривал, но спасибо за идею. Кажется, подобное лучше реализовывать не внутри прокси, а снаружи (на android за это может отвечать приложение). Наверняка на разных провайдерах будут работать разные методы, тут скорее нужны профили и переключение между ними. Например, на мобильном хорошим вариантом будет обнаруживать блокировки, а на wifi, где соединение замораживается, обнаруживать только поломки. тогда нужно будет перезапускать прокси с разными параметрами для разных сетей.</p></td><td>2024-03-12T09:25:48.391Z</td></tr><tr><td>hufrea</td><td><p>Все же добавлю таймаут, но включаться он будет на усмотрение пользователя (не везде это нужно). Думаю оптимально будет 2-3 секунды, но если увеличивать его, то желательно и время жизни кеша увеличить.</p></td><td>2024-03-12T13:02:08.003Z</td></tr><tr><td>Dhowti(Eugene)</td><td><p>В винде --fake невозможен? Похоже, это единственное, что может пробить моего провайдера.</p></td><td>2024-03-17T03:49:47.784Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Dhowti" data-post="51" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>В винде --fake невозможен?</p>
</blockquote>
</aside>
<p>goodbyedpi умеет</p></td><td>2024-03-17T06:53:37.040Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Dhowti" data-post="51" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>В винде --fake невозможен?</p>
</blockquote>
</aside>
<p>В byedpi он не поддерживается, но, возможно, в теории, его можно как-то реализовать из пользовательского пространства, хотя я сильно сомневаюсь.</p>
<aside class="quote no-group" data-username="Dhowti" data-post="51" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>Похоже, это единственное, что может пробить моего провайдера.</p>
</blockquote>
</aside>
<p>Что насчёт tlsrec или oob?<br>
ciadpi --oob 10+s --tlsrec 1+s</p></td><td>2024-03-17T13:17:48.669Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="hufrea" data-post="53" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>но, возможно, в теории, его можно как-то реализоват</p>
</blockquote>
</aside>
<p>Да, это возможно, используя TransmitFile. Возможно, скоро добавлю поддержку --fake и на Windows</p></td><td>2024-03-17T17:50:32.175Z</td></tr><tr><td>Dhowti(Eugene)</td><td><aside class="quote no-group" data-username="hufrea" data-post="53" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Что насчёт tlsrec или oob?<br>
ciadpi --oob 10+s --tlsrec 1+s</p>
</blockquote>
</aside>
<p>О, работает! Я пробовал эти параметры, но с другими числами. Гран мерси!<br>
Вообще, у меня GDPI давно стоит, но прокси мне удобнее. Особенно с новым параметром --auto.<br>
Кстати, у меня категорически отказывается работать ciadpi на портах из первых тысяч, хотя порты свободны. Поставил 10800, работает, но странно это.</p></td><td>2024-03-17T23:24:28.228Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group quote-post-not-found" data-username="Dhowti" data-post="62" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/62">ByeDPI</a></div>
<blockquote>
<p>у меня категорически отказывается работать ciadpi на портах из первых тысяч</p>
</blockquote>
</aside>
<p>Какая ошибка выводится?</p>
<aside class="quote no-group" data-username="hufrea" data-post="54" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Возможно, скоро добавлю поддержку --fake и на Windows</p>
</blockquote>
</aside>
<p>А вот и тестовая версия:<br>
<a class="attachment" href="byedpi-обсуждение-9057/uciEy4udOC5HvLVhwvA3ysGTlmS.zip">byedpi-3da60eb.zip</a> (51,8 КБ)<br>
Ограничения те же, что и на Linux</p></td><td>2024-03-17T23:45:07.391Z</td></tr><tr><td>Dhowti(Eugene)</td><td><aside class="quote no-group" data-username="hufrea" data-post="56" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Какая ошибка выводится?</p>
</blockquote>
</aside>
<p>10013<br>
5000+ ставил, работает.</p></td><td>2024-03-17T23:52:26.233Z</td></tr><tr><td>Dhowti(Eugene)</td><td><aside class="quote no-group" data-username="hufrea" data-post="56" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>А вот и тестовая версия:<br>
<a class="attachment" href="byedpi-обсуждение-9057/uciEy4udOC5HvLVhwvA3ysGTlmS.zip">byedpi-3da60eb.zip</a> (51,8 КБ)</p>
</blockquote>
</aside>
<p>ciadpi --auto --timeout 3 --oob 8+s --tlsrec 1+s --fake 3+s --ip 127.0.0.1 --port 10800<br>
В общем, так всё открывается вроде, что нужно. Кроме rutor.info, hdrezka.ag, но туда особо и не хожу, просто проверял. Я так понимаю, это просто сами сайты ломаются? Что интересно, Instagram через GDPI открывается только с IP 157. в hosts, а с byDPI без разницы IP.</p></td><td>2024-03-18T00:15:46.172Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Dhowti" data-post="58" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>hdrezka.ag</p>
</blockquote>
</aside>
<p>Этот не поддерживает TLS 1.3.   Техники обхода без фейков могут не работать на TLS 1.2, поскольку сечется ответ сервера</p></td><td>2024-03-18T06:42:30.556Z</td></tr><tr><td>Dhowti(Eugene)</td><td><aside class="quote no-group" data-username="bolvan" data-post="59" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Техники обхода без фейков могут не работать на TLS 1.2</p>
</blockquote>
</aside>
<p>Точно, поэкспериментил на других таких сайтах, типа <a href="http://exler.ru" rel="noopener nofollow ugc">exler.ru</a>. А значит, fake у меня вообще не работает? Убрал его, вернул, что есть, что нет.</p></td><td>2024-03-18T07:35:28.607Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Dhowti" data-post="60" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>Точно, поэкспериментил на других таких сайтах, типа <a href="http://exler.ru">exler.ru </a>. А значит, fake у меня вообще не работает? Убрал его, вернул, что есть, что нет.</p>
</blockquote>
</aside>
<p>Смотрите шарком  tcp port 443.<br>
Методика отсылки фейка в byedpi потенциально ненадежна, а может просто не обходится таким методом у вас.<br>
А еще фейк требует какого-то ограничительного фактора. Им может выступать TTL. TTL нужно подбирать как минимально работающее значение на вашем провайдере</p></td><td>2024-03-18T08:00:54.959Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Dhowti" data-post="58" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dhowti/48/1737_2.png" class="avatar"> Dhowti:</div>
<blockquote>
<p>ciadpi --auto --timeout 3 --oob 8+s --tlsrec 1+s --fake 3+s</p>
</blockquote>
</aside>
<p>Очень избыточно, так можно и заблокированные сайты сломать. --fake 3+s тут совсем не нужен, т.к. на данной позиции будет заголовок tlsrec. Лучше проверить по отдельности, какие методы дают эффект для большинства сайтов. Например, если много где работает tlsrec, а где-то лишь fake, то использовать примерно вот такой конфиг:<br>
ciadpi --auto --tlsrec 1+s --auto --fake -1<br>
Можно еще попробовать <a href="https://ntc.party/t/byedpi/4683/48">такой вариант disorder</a></p>
<aside class="quote no-group quote-post-not-found" data-username="bolvan" data-post="66" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/66">ByeDPI</a></div>
<blockquote>
<p>Техники обхода без фейков могут не работать на TLS 1.2</p>
</blockquote>
</aside>
<p>Да и фейки не везде работают</p>
<aside class="quote no-group quote-post-not-found" data-username="bolvan" data-post="68" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/68">ByeDPI</a></div>
<blockquote>
<p>TTL нужно подбирать как минимально работающее значение на вашем провайдере</p>
</blockquote>
</aside>
<p>Да, можно сразу начать с 32-64, если прилетит ошибка(TLS Alert)/ServerHello, значит исходящий трафик мы можем так запутать. Затем можно перебирать бинарным способом: 16 - ошибка, понижаем; 8 - блокировка, повышаем; 12 - ошибка, понижаем; 10 - успех; 9 - блокировка, оставляем 10.</p></td><td>2024-03-18T10:34:43.572Z</td></tr><tr><td>Dhowti(Eugene)</td><td><aside class="quote no-group" data-username="hufrea" data-post="62" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Очень избыточно, так можно и заблокированные сайты сломать. --fake 3+s тут совсем не нужен, т.к. на данной позиции будет заголовок tlsrec.</p>
</blockquote>
</aside>
<p>Да я fake быстро убрал, потом вернул из-за сайтов с TLS 1.2  и снова убрал. Пробовал и по отдельности, видимо, с виндой действительно проблемы. На телефоне на этом провайдере работает --fake с --ttl 3, на компе никак.<br>
Дамп пока не делал, пока работают большинство нужных сайтов и ладно.<br>
upd: TTL для фейков вообще ничего не меняет от 64 до 1, наверное, всё-таки не работает это.</p></td><td>2024-03-18T10:46:28.436Z</td></tr><tr><td>hufrea</td><td><p>С какими параметрами запускали? Как версия системы? Есть ли ошибки в логах?</p></td><td>2024-03-19T22:20:06.550Z</td></tr><tr><td>tun(tun)</td><td><p>Работает с параметрами --fake -1 --ttl 9 под windows 11)</p></td><td>2024-03-20T17:02:04.948Z</td></tr><tr><td>hufrea</td><td><p>Даже если фейк пакет дошел до сервера, то это не еще конец, главное не допустить выгрузки буфера в приложение. Данные в буфере ядра можно перезаписать, отправив еще один пакет, пересекающийся с предыдущим по SEQ. Надежный способ избежать выгрузки - сделать пробел в буфере. И тут полная ретрансмиссия в Windows превращается в преимущество.<br>
ciadpi --disorder 1 --fake -1 --ttl 64<br>
Первый байт не будет доставлен из-за disorder. Затем будет отправлен фейк, который будет принят сервером, но не доставлен приложению, из-за отсутствующего байта. После система выполнит полную ретрансмиссию с оригинальными данными и перезапишет фейк.</p></td><td>2024-04-05T17:01:19.964Z</td></tr><tr><td>bolvan</td><td><p>Не проверял как ведут себя разные ОС при частичной перезаписи данных in-window ? Переписывают или старое держат ? В сокет, как я понимаю, отправляют сразу же после появления законченного куска любой длины ?</p></td><td>2024-04-06T06:35:56.177Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="67" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Не проверял как ведут себя разные ОС при частичной перезаписи данных in-window ?</p>
</blockquote>
</aside>
<p>Только на Linux проверял, перезаписывать лишь часть уже доставленного пакета не пробовал, это уже с raw нужно делать, но предполагаю, что это возможно.</p>
<aside class="quote no-group" data-username="bolvan" data-post="67" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В сокет, как я понимаю, отправляют сразу же после появления законченного куска любой длины ?</p>
</blockquote>
</aside>
<p>Да. Отправлял пакеты без флага PSH - все равно, сразу попадают в сокет, хотя, прям маленькие кусочки не пробовал.</p></td><td>2024-04-06T14:37:26.349Z</td></tr><tr><td>ValdikSS</td><td><aside class="onebox pdf" data-onebox-src="https://apps.dtic.mil/sti/pdfs/ADA391565.pdf">
  <header class="source">

      <a href="https://apps.dtic.mil/sti/pdfs/ADA391565.pdf" target="_blank" rel="noopener">apps.dtic.mil</a>
  </header>

  <article class="onebox-body">
    <a href="https://apps.dtic.mil/sti/pdfs/ADA391565.pdf" target="_blank" rel="noopener"><span class="pdf-onebox-logo"></span></a>

<h3><a href="https://apps.dtic.mil/sti/pdfs/ADA391565.pdf" target="_blank" rel="noopener">ADA391565.pdf</a></h3>

  <p class="filesize">801.57 KB</p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
Документ 1998 года.</p>
<p><img src="byedpi-обсуждение-9057/0bfb73526c21c476de43dd5c3d946df5e3f0542c.png" alt="image" data-base62-sha1="1HZYU6bK2VTkAJWvLcgxo7GKS6g" width="543" height="205"></p></td><td>2024-04-09T11:08:54.973Z</td></tr><tr><td>lufog(Aleksey Smirnov)</td><td><p>Никак не удается подружить ByeDPI с сайтом провайдера/локальными ресурсами. Ибо единственный нормально работающий у меня обход это <code>--fake -1 --ttl 3</code>, но с ним любой локальный ресурс провайдера выдает <code>ERR_CONNECTION_CLOSED</code>. Что не очень удобно, ибо, чтобы посмотреть баланс, приходится все отключать. Да и в локалке есть интересные ресурсы вроде Синемы с каким-то нереальным количеством сериалов/фильмов.</p>
<p>Пробовал <code>ciadpi --auto --disorder 1 --fake -1 --ttl 3</code> вроде и работает, а вроде и нет. Где-то грузит картинки не с первого раза (например вместо аватарок на YouTube серые кружочки), напрягает, не сильно, ибо случается редко. А где-то картинки не грузит вообще (ERR_TIMED_OUT), пока не уберешь <code> --auto</code> чтобы все сразу в обход шло, что ломает сайт провайдера. Пробовал <code> --auto</code> со всеми возможными параметрами, и в конец ставить, в надежде что все будет работать через <code>--fake</code>, а что сломалось напрямую, но увы так не работает.</p>
<p>Очень нехватает функции вайтлиста. Старикам ставил форк GoodbyeDPI с впиленым вайтлистом, сильно удобней раз добавить сломанные локальные ресурсы, чем постоянно дополнять блеклист сломанными сайтами.</p></td><td>2024-04-21T13:19:15.187Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="lufog" data-post="70" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/lufog/48/4866_2.png" class="avatar"> lufog:</div>
<blockquote>
<p>ERR_TIMED_OUT</p>
</blockquote>
</aside>
<p>А вы пробовали использовать параметр --timeout?</p>
<aside class="quote no-group" data-username="lufog" data-post="70" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/lufog/48/4866_2.png" class="avatar"> lufog:</div>
<blockquote>
<p>Очень нехватает функции вайтлиста.</p>
</blockquote>
</aside>
<p>Будет в следующем релизе, который, возможно, уже завтра.</p></td><td>2024-04-21T14:54:23.142Z</td></tr><tr><td>lufog(Aleksey Smirnov)</td><td><aside class="quote no-group" data-username="hufrea" data-post="71" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>А вы пробовали использовать параметр --timeout?</p>
</blockquote>
</aside>
<p>Как-то я его упустил совсем, с ним заработало! А какое значение лучше поставить? Поставил 5 вроде все грузит.</p>
<p>В общем я, как обычно, не разобрался до конца. У меня похожая ситуация с <code>--fake</code> была, пока не допер что <code>--ttl</code> тоже подбирать надо. Разбаловал меня GDPI своими прессетами, а DPI Tunnel своим автоподбором метода обхода. <img src="https://ntc.party/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:" loading="lazy" width="20" height="20"></p></td><td>2024-04-21T15:21:44.245Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="lufog" data-post="72" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/lufog/48/4866_2.png" class="avatar"> lufog:</div>
<blockquote>
<p>А какое значение лучше поставить?</p>
</blockquote>
</aside>
<p>При низких значениях сайт быстрее окажется в кеше, т.е. задержка при первом открытии будет меньше, однако могут быть ложные срабатывания, думаю 3-5 секунд будет оптимально.</p>
<aside class="quote no-group" data-username="lufog" data-post="72" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/lufog/48/4866_2.png" class="avatar"> lufog:</div>
<blockquote>
<p>В общем я, как обычно, не разобрался до конца.</p>
</blockquote>
</aside>
<p>Так-то это может быть непросто, ведь подробной документации я не оставил.</p></td><td>2024-04-21T16:17:30.473Z</td></tr><tr><td>kitebo</td><td><p>Здравствуйте! Позвольте внести небольшое предложение.<br>
Ваш пример с гитхаба:</p>
<blockquote>
<p>–late-conn --hosts ‘:one.one.one.one’ --dst 1.1.1.1 --disorder 3 --auto=none --auto=torst --timeout 3 --tlsrec 1+s<br>
Для указанного домена применять disorder, подключаясь только на указанный IP и игнорируя адрес из запроса.<br>
Для остальных ничего не делать, <strong>однако если обнаружится блокировка, то попробовать применить tlsrec</strong>.</p>
</blockquote>
<p>А нельзя ли изменить такое поведение? Чтоб домены, перечисленные в --hosts, не обрабатывались даже при обнаружении блокировки. Т.е. сделать их “неприкасаемыми”, скажем так.<br>
Пример:<br>
<em>./ciadpi --hosts ‘:example.com’ --auto=none --auto=torst,redirect --fake -1 --ttl 4</em><br>
, где <a href="http://example.com" rel="noopener nofollow ugc">example.com</a> <strong>не</strong> обрабатывается даже при обнаружении блокировки (в текущей реализации программы он обрабатывается).</p></td><td>2024-05-21T05:21:39.795Z</td></tr><tr><td>hufrea</td><td><p>Здравствуйте.<br>
<code>./ciadpi --auto=torst --hosts ':example.com' --auto=none --fake -1</code></p></td><td>2024-05-21T11:47:52.721Z</td></tr><tr><td>kitebo</td><td><p>Что-то не то…При такой комбинации перестают обрабатываться вообще все <strong>заблокированные</strong> сайты.<br>
Загвоздка где-то в <strong>auto=none</strong>, оно словно обрезает последующую команду.</p>
<p>Можно, конечно, сделать так:<br>
<em>./ciadpi --hosts ‘:example.com’ --auto=none --fake -1</em></p>
<ul>
<li>т.е. без первого auto, в этом случае <a href="http://example.com" rel="noopener nofollow ugc">example.com</a> не обрабатывается (что и требуется), но при этом безусловно обрабатываются <strong>все хосты, включая незаблокированные</strong> - что в лучшем случае просто излишне, а в худшем может что-нибудь и поломать.</li>
</ul></td><td>2024-05-21T13:11:04.065Z</td></tr><tr><td>hufrea</td><td><p>Точно, так не работает. Как раз думал немного изменить логику, т.к. в текущем виде все немного запутанно (сам вот ошибся),  я учту  ваше предложение.</p></td><td>2024-05-21T21:35:39.381Z</td></tr><tr><td>progman_dt(Progman)</td><td><p>Кто-нибудь сумел подобрать параметры для более-менее стабильного обхода замедления ютуба?<br>
–disorder 3 работает в лучшем случает через раз.</p></td><td>2024-07-21T17:41:54.187Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="progman_dt" data-post="78" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/p/b2d939/48.png" class="avatar"> progman_dt:</div>
<blockquote>
<p>–disorder 3 работает в лучшем случает через раз.</p>
</blockquote>
</aside>
<p>Если у вас Windows, то там обычный disorder не работает (точнее работает криво), его следует совмещать со split:</p>
<aside class="quote no-group" data-username="hufrea" data-post="48" data-topic="4683">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"><a href="https://ntc.party/t/byedpi/4683/48">ByeDPI</a></div>
<blockquote>
<p>ciadpi -s 3+s -d 20+s</p>
</blockquote>
</aside></td><td>2024-07-22T10:19:08.449Z</td></tr><tr><td>Zerogoki(Zero Goki)</td><td><p>Интересно, а <a href="http://pbs.twimg.com" rel="noopener nofollow ugc">pbs.twimg.com</a> (картинки в твиттере) на своей стороне блокирует российские айпи? Туда только через впн можно пробиться, byedpi не помогает. В реестре вроде нет даже этого домена</p>
<p>UPD: после того как поигрался с параметрами split position и TLS record split position — заработало. Интересно, учитывая что все остальные заблоченные сайты открывались даже на настройках по умолчанию.</p></td><td>2024-07-23T10:08:12.685Z</td></tr><tr><td>Zerogoki(Zero Goki)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="byedpi-обсуждение-9057/e75cd5fdbc823bd92cc13946b4ad1830765c8c02.jpeg" data-download-href="https://ntc.party/uploads/default/e75cd5fdbc823bd92cc13946b4ad1830765c8c02" title="Screenshot_20240723-225036"><img src="byedpi-обсуждение-9057/e75cd5fdbc823bd92cc13946b4ad1830765c8c02_2_251x500.jpeg" alt="Screenshot_20240723-225036" data-base62-sha1="x0Jc8bFlabIxkT18c5LvHDoAvrY" width="251" height="500" srcset="byedpi-обсуждение-9057/e75cd5fdbc823bd92cc13946b4ad1830765c8c02_2_251x500.jpeg, byedpi-обсуждение-9057/e75cd5fdbc823bd92cc13946b4ad1830765c8c02_2_376x750.jpeg 1.5x, byedpi-обсуждение-9057/e75cd5fdbc823bd92cc13946b4ad1830765c8c02_2_502x1000.jpeg 2x" data-dominant-color="484848"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot_20240723-225036</span><span class="informations">1069×2125 179 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
При включенном byedpi на некоторых сайтах отваливается TLS. Приходит вот такой странный сертификат вместо настоящего. В чем может быть причина?</p></td><td>2024-07-23T19:52:30.891Z</td></tr><tr><td>hufrea</td><td><p>Скорее всего это из-за tlsrec. Он ломает некоторые сайты, поэтому его следует использовать лишь на заблокированных.</p></td><td>2024-07-24T04:40:22.366Z</td></tr><tr><td>spv82</td><td><p>Попробовал собрать под OpenWrt 21/22/23, вдруг пригодится. Пакеты .ipk здесь - <a href="https://github.com/spvkgn/ByeDPI-OpenWrt/releases" class="inline-onebox" rel="noopener nofollow ugc">Releases · spvkgn/ByeDPI-OpenWrt · GitHub</a></p></td><td>2024-07-24T16:37:29.288Z</td></tr><tr><td>HannahHanoi(Hannah Hanoi)</td><td><p>На отдельном устройстве запущен ciadpi с параметрами <em>–fake -1 --md5sig</em><br>
На этом устройстве Ютюб работает без проблем. Если попытаться начать смотреть видео на другом устройстве, предварительно настроив прокси, то Хром сыпет ошибками 403 при попытке достучаться к <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, FF выдает ошибку NS_BINDING_ABORTED. В какую сторону копать?</p></td><td>2024-08-03T14:47:36.353Z</td></tr><tr><td>Dhohbr</td><td><p>На чем у вас byedpi поднят, на Linux? net.ipv4.ip_forward включен?</p></td><td>2024-08-03T15:32:17.526Z</td></tr><tr><td>HannahHanoi(Hannah Hanoi)</td><td><p>Включен.</p></td><td>2024-08-03T15:47:38.216Z</td></tr><tr><td>Dhohbr</td><td><p>С других устройств телнет на порт прокси проходит?<br>
Попробуйте поиграть с настройками QUICK и Kyber в браузере. Отключить временно плагины, фаервол, антивирус, чтобы исключить их влияние.<br>
У меня такая же схема как у вас, только я использую один параметр -d 1, этого пока хватает.</p></td><td>2024-08-03T16:14:16.610Z</td></tr><tr><td>Sanek184</td><td><p>Круто. --obb вообще классно себя показывает в работе.</p></td><td>2024-08-07T17:16:04.323Z</td></tr><tr><td>sakontwist</td><td><p>У меня отлично работает (все сайты, YT в браузере и YT на android) только при определенном сочетании “-d1 -s3”.<br>
Если увеличить сплит до 4 - 7 уже проблемы на android, если поменять местами “-s3 -d1” - проблемы в Лисе.</p>
<p>Интересно, как конкретно работает отсылка с “-d1 -s3” ? Это 2-XX, 2-3, 4-XX, 1 ? В чем разница если поменять местами -d и -s (и есть ли она)?</p></td><td>2024-08-07T19:02:06.124Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="sakontwist" data-post="89" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/c77e96/48.png" class="avatar"> sakontwist:</div>
<blockquote>
<p>как конкретно работает отсылка с “-d1 -s3”</p>
</blockquote>
</aside>
<p>1-3 → 3-e → 0-1<br>
Если наоборот, то сработает только -s 3  (-d 1 не сработает, т.к. первый байт уже отправлен).</p></td><td>2024-08-07T20:08:10.542Z</td></tr><tr><td>sakontwist</td><td><p>Спасибо, теперь понятно, почему -s -d не спасает )</p></td><td>2024-08-07T20:15:00.093Z</td></tr><tr><td>inflame</td><td><p>Не получается заставить работать в связке с <code>tun2socks</code>: <code>byedpi</code> вылетает с первой же попытки подключения, достигнув исчерпания файловых дескрипторов:</p>
<pre><code class="lang-auto">&lt;...&gt;
accept: fd=1019
new event: fd: 1017, evt: EV_DESYNC, mod_iter: 2413
desync params index: 0
host: x.com (22)
split: pos=0-2 (2), m: DESYNC_DISORDER
send: pos=2-68
new event: fd: 1019, evt: EV_REQUEST, mod_iter: 2417
new event: fd: 1019, evt: EV_REQUEST, mod_iter: 2417
new conn: fd=1020, addr=104.244.42.1:80
new event: fd: 1020, evt: EV_CONNECT, mod_iter: 2420
new event: fd: 3, evt: EV_ACCEPT, mod_iter: 0
accept: fd=1021
new event: fd: 1019, evt: EV_DESYNC, mod_iter: 2417
desync params index: 0
host: x.com (22)
split: pos=0-2 (2), m: DESYNC_DISORDER
send: pos=2-68
new event: fd: 1021, evt: EV_REQUEST, mod_iter: 2422
new event: fd: 1021, evt: EV_REQUEST, mod_iter: 2422
new conn: fd=1022, addr=104.244.42.1:80
new event: fd: 1022, evt: EV_CONNECT, mod_iter: 2424
new event: fd: 3, evt: EV_ACCEPT, mod_iter: 0
accept: fd=1023
accept: No file descriptors available
exit
</code></pre>
<p>Запускал так:<br>
<code>ciadpi -x 2 -i 127.0.0.1 -p 10801 -d 2</code><br>
<code>tun2socks -device tun0 -proxy socks5://127.0.0.1:10801 -interface enp4s0</code><br>
При этом сам по себе <code>byedpi</code> с такими параметрами работает. Также работает и <code>tun2socks</code> в связке с <code>shadowsocks</code>. То есть не получается подружить именно <code>byedpi</code> с <code>tun2socks</code>.</p>
<p>В чём может быть проблема?</p></td><td>2024-08-08T17:58:06.684Z</td></tr><tr><td>mike7</td><td><p>Может параметр - interface для tun2socks не нужен?  Shadowsocks тоже на localhost “сидел”?</p></td><td>2024-08-08T20:02:46.152Z</td></tr><tr><td>l8l</td><td><p>У меня видимо глупый вопрос. Можно ли просто сделать чтобы сайты быстрее открывались? т.е. чтобы DPI не мог шерстить трафик не лез в личную жизнь. И может ли такой вопрос касаться и udp протокола тоже?</p></td><td>2024-08-09T05:28:41.398Z</td></tr><tr><td>inflame</td><td><blockquote>
<p>Может параметр - interface для tun2socks не нужен? Shadowsocks тоже на localhost “сидел”?</p>
</blockquote>
<p>Без параметра <code>-interface</code> тоже не работает. Shadowsocks запущен также, как byedpi, на 127.0.0.1, и через него работает.</p></td><td>2024-08-09T06:01:17.125Z</td></tr><tr><td>Sanek184</td><td><p>Хотел спросить вот тут <strong>–auto=none</strong> в конце лишняя или нет, так как работает и так и так, но как синтаксически верно ?:<br>
ciadpi.exe -i 127.0.0.1 -p 10800 --hosts russia-youtube.txt -s 2 --auto=none --hosts russia-blacklist.txt -o 2 <strong>–auto=none</strong></p></td><td>2024-08-09T07:46:15.985Z</td></tr><tr><td>hufrea</td><td><aside class="onebox githubfolder" data-onebox-src="https://github.com/sonvirgo/tun2socks-127.0.0.1-loopback/tree/main">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/sonvirgo/tun2socks-127.0.0.1-loopback/tree/main" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h3><a href="https://github.com/sonvirgo/tun2socks-127.0.0.1-loopback/tree/main" target="_blank" rel="noopener nofollow ugc">GitHub - sonvirgo/tun2socks-127.0.0.1-loopback: Resolve tun2soxks loopback...</a></h3>

  <p><a href="https://github.com/sonvirgo/tun2socks-127.0.0.1-loopback/tree/main" target="_blank" rel="noopener nofollow ugc">main</a></p>

  <p><span class="label1">Resolve tun2soxks loopback problem on Linux, when using 127.0.0.1 socks - sonvirgo/tun2socks-127.0.0.1-loopback</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<details>
<summary>
Спойлер</summary>
<p>Если коротко, вот решение:</p>
<pre><code class="lang-auto">useradd ciadpi
usermod -g mygroup ciadpi

ip r add default via 192.168.1.1 dev enp4s0 metric 1 table 110
ip rule add uidrange 1001-1001 lookup 110 pref 29000

sudo -u ciadpi ciadpi -i 127.0.0.1 -p 10801 -d 2
</code></pre>
<p>1001 - uid нового юзера.<br>
192.168.1.1 - ваш шлюз.</p>
</details></td><td>2024-08-09T13:07:28.837Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Sanek184" data-post="96" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>Хотел спросить вот тут <strong>–auto=none</strong> в конце лишняя или нет, так как работает и так и так, но как синтаксически верно ?:</p>
</blockquote>
</aside>
<p>Правильно с <code>–auto=none</code>, но и без будет работать, т.к. при использовании ограничителей создается пустая группа, на случай, если –auto=none забудут прописать.</p></td><td>2024-08-09T13:15:39.482Z</td></tr><tr><td>khorovodoved</td><td><p>Скажите, пожалуйста, а просто “–auto” без “=torst”, “=none” и т.п. вообще что-либо делает?</p></td><td>2024-08-09T17:19:58.109Z</td></tr><tr><td>hufrea</td><td><p><code>--auto</code> без параметров эквивалентен <code>--auto=torst</code>, сделано так ради совместимости с предыдущей версией, где был просто <code>-A</code> без аргументов. Однако так писать лучше не стоит.</p></td><td>2024-08-09T17:31:03.108Z</td></tr><tr><td>dovecoteescapee(dovecoteescapee)</td><td><p>Подскажите, отсутствие <code>--proto</code> эквивалентно указанию его со всеми возможными параметрами?</p></td><td>2024-08-10T09:31:52.395Z</td></tr><tr><td>hufrea</td><td><p>Нет, без <code>--proto</code> обрабатываются любые протоколы (а с ним только HTTP, TLS и UDP).</p></td><td>2024-08-10T10:29:28.549Z</td></tr><tr><td>Sanek184</td><td><p>попробовал --proto с разными значениями tls,http,udp и все что не поставь одно - все равно работает -o 2, так и должно быть ? а то вроде получается, что все равно все протоколы обрабатываются</p></td><td>2024-08-10T19:53:21.014Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Sanek184" data-post="103" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>попробовал --proto с разными значениями</p>
</blockquote>
</aside>
<p>Как именно? Как выглядит командная строка?</p></td><td>2024-08-10T21:50:06.219Z</td></tr><tr><td>Sanek184</td><td><p>ciadpi.exe -i 127.0.0.1 -p 10800 --proto=tls -o 2<br>
ciadpi.exe -i 127.0.0.1 -p 10800 --proto=http -o 2</p></td><td>2024-08-11T03:46:05.830Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p><code> --auto=t,r,c,s,a</code></p>
<p>Работает ли такая конструкция?</p></td><td>2024-08-12T23:17:54.585Z</td></tr><tr><td>hufrea</td><td><p>Да</p></td><td>2024-08-13T14:51:24.998Z</td></tr><tr><td>hufrea</td><td><p>Проверил эту команду, работает корректно.<br>
Что в логах?</p></td><td>2024-08-13T14:57:00.310Z</td></tr><tr><td>Sanek184</td><td><p>Вот, я просто не пойму при “ciadpi.exe -i 127.0.0.1 -p 10800 --proto=tls -o 2” - не должно же ничего работать ? просто все работает хоть что прописать в proto из доступных опций, что получается все порты итд</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="byedpi-обсуждение-9057/57686a7b2877058568c76f40744806219cbe9b70.png" data-download-href="https://ntc.party/uploads/default/57686a7b2877058568c76f40744806219cbe9b70" title="image"><img src="byedpi-обсуждение-9057/57686a7b2877058568c76f40744806219cbe9b70.png" alt="image" data-base62-sha1="ctffvcvVPRGulip8c5R6SP9GkYU" width="690" height="476" data-dominant-color="E0E1E2"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">815×563 61 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-08-13T14:59:58.560Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Sanek184" data-post="109" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>не должно же ничего работать ?</p>
</blockquote>
</aside>
<p>Должен обходиться весь TLS.<br>
Поставьте <code>--proto=udp</code>, тогда обход работать не будет.<br>
Судя по логам, все работает правильно.</p></td><td>2024-08-13T15:04:35.653Z</td></tr><tr><td>Sanek184</td><td><p>Да, сейчас с http,udp не работает, вчера срабатывало… возможно это keep-alive или что-то остаточное было (много что экспериментировал вчера) Извиняюсь.</p></td><td>2024-08-13T15:24:57.799Z</td></tr><tr><td>Sanek184</td><td><p>Я все хотел заставить работать rezka.ag (не принципиальна ее работа, но мало ли будут подобные ситуации с другими сайтами).<br>
В GoodbyeDPI с пресетом -9 она работает, а в byedpi всякие комбинации пробовал -не хочет.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="byedpi-обсуждение-9057/76b8e966b66c4ab00a7e6aef693a0a627aae549f.png" data-download-href="https://ntc.party/uploads/default/76b8e966b66c4ab00a7e6aef693a0a627aae549f" title="image"><img src="byedpi-обсуждение-9057/76b8e966b66c4ab00a7e6aef693a0a627aae549f.png" alt="image" data-base62-sha1="gWgvOb0ZbR7OajTuam08NWb2O99" width="690" height="348" data-dominant-color="E1E1E1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">752×380 20.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-08-13T15:58:51.019Z</td></tr><tr><td>hufrea</td><td><aside class="quote" data-post="59" data-topic="9057">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/byedpi-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9057/59">ByeDPI: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/byedpi/39"><span data-category-id="39" style="--category-badge-color: #231F20; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="ByeDPI and ByeDPIAndroid Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">ByeDPI</span></span></a>
  </div>
  <blockquote>
    Этот не поддерживает TLS 1.3.   Техники обхода без фейков могут не работать на TLS 1.2, поскольку сечется ответ сервера
  </blockquote>
</aside>
</td><td>2024-08-13T16:57:01.359Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Добрый вечер! Почему-то падает с параметром fake <code>ciadpi.exe -f -1</code><br>
<img src="byedpi-обсуждение-9057/d24d1b155415be79487d105c0804b0885ceb2523.jpeg" alt="f" data-base62-sha1="u0psXU0aoIr4pmXHTUTpcuFglFh" width="677" height="337"></p></td><td>2024-08-13T17:55:33.742Z</td></tr><tr><td>hufrea</td><td><p>А какая у вас версия стоит (<code>ciadpi.exe --version</code>)? Возможно это та ошибка, которая в 0.11.2 была исправлена.</p></td><td>2024-08-13T21:48:43.465Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Самая последняя v0.12, запускаю на win7x64. Причем и на 11.1 и на 11.2 также падает</p></td><td>2024-08-13T22:48:18.627Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>Остановился на таком варианте 8))):</p>
<p>-u 120 -a 2 -T 0.25 --hosts /opt/zapret/youtubelist -o 2 --auto=n --proto=t,h,u --auto=t,r,c,s,a --proto=t,h,u -f -1 -r 2+s -n <a href="http://www.iana.org" rel="noopener nofollow ugc">www.iana.org</a> -t 8 --auto=t,r,c,s,a --proto=t,h,u -d 2+s --auto=t,r,c,s,a --proto=t,h,u -s 2 --auto=t,r,c,s,a --proto=t,h,u -o 3+s --auto=t,r,c,s,a --proto=t,h,u -d 2 --auto=t,r,c,s,a --proto=t,h,u -s 2+s --auto=t,r,c,s,a --proto=t,h,u -f -1 -r 2 -n <a href="http://www.iana.org" rel="noopener nofollow ugc">www.iana.org</a> -t 8</p>
<p>RockyLinux 9 spb sknt</p></td><td>2024-08-13T23:24:41.886Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>С этими комбинациями работает, хотя вру видосики нет</p></td><td>2024-08-13T23:27:27.763Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>desync.c:144</p>
<pre><code class="lang-auto">    int ffd = memfd_create("name", O_RDWR);
</code></pre>
<p>Isn’t <code>O_RDWR</code> equal to <code>MFD_ALLOW_SEALING</code> ?</p></td><td>2024-08-14T00:21:25.885Z</td></tr><tr><td>Sanek184</td><td><p>Завелось с -f -1 -r 2+s -t 8 и видосы показывает.<br>
Вот так выглядит сейчас у меня:<br>
ciadpi.exe -i 127.0.0.1 -p 10800 -H tls.txt -K t,h,u -f -1 -r 2+s -t 8 --auto=none -H russia-youtube.txt -K t,h,u -o 2 --auto=none -H russia-blacklist.txt -K t,h,u -o 2 --auto=none</p></td><td>2024-08-14T04:28:03.817Z</td></tr><tr><td>Sanek184</td><td><p>voidboost.cc нужно также добавить с такой же фрагментацией, чтобы видео показывались на резке<br>
<img src="byedpi-обсуждение-9057/6f02876fb1fdaf015d3e735ab531176150233c06.png" alt="image" data-base62-sha1="fQ2pTyVAiaBb5fofU19Uzu0IgBM" width="166" height="42"></p></td><td>2024-08-14T12:05:50.805Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="EBKJIUD" data-post="106" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ebkjiud/48/6675_2.png" class="avatar"> EBKJIUD:</div>
<blockquote>
<p><code>--auto=t,r,c,s,a</code><br>
Работает ли такая конструкция?</p>
</blockquote>
</aside>
<p>Кажется, не работает или что-то не так делаю?<br>
Запускаю с <code>--tlsrec 3+sni</code>, <a href="https://www.fontanka.ru" rel="noopener nofollow ugc">https://www.fontanka.ru</a> выдает ошибку сертификата<br>
Запускаю с <code>--split 2 --disorder 7</code>, <a href="https://www.fontanka.ru" rel="noopener nofollow ugc">https://www.fontanka.ru</a> открывается без ошибок<br>
Запускаю с <code>--tlsrec 3+sni --auto=t,r,c,s,a --split 2 --disorder 7</code> <a href="https://www.fontanka.ru" rel="noopener nofollow ugc">https://www.fontanka.ru</a> выдает ошибку сертификата. т.е. <code>--auto=t,r,c,s,a</code> не срабатывает?</p></td><td>2024-08-14T12:21:23.835Z</td></tr><tr><td>Sanek184</td><td><p>–split 2 --disorder 7 --auto=t,r,c,s,a -T 1  --tlsrec 3+sni <a href="https://www.fontanka.ru" rel="noopener nofollow ugc">https://www.fontanka.ru</a></p>
<p>Но --auto=t,r,c,s,a не всегда определяет, что сайт не открывается, --tlsrec 3+sni уже ломает сайт и продолжать на --split 2 --disorder 7 уже нет смысла.</p></td><td>2024-08-14T12:33:50.172Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>Обратную бы логику добавить<br>
-H, --hosts<br>
Чтобы не применять определенную группу для определенных доменов, которые могут ломаться в ней.</p>
<p>Пока думаю, поднять несколько процессов на разных портах и заруливать нужное, но так больше телодвижений.</p>
<p>Конфилктовать не должны процессы на одном юните?</p></td><td>2024-08-14T13:48:32.442Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Datura_metel" data-post="119" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>Isn’t <code>O_RDWR</code> equal to <code>MFD_ALLOW_SEALING</code> ?</p>
</blockquote>
</aside>
<p>Equal. There shouldn’t be a flag there at all, thanks.</p></td><td>2024-08-14T14:45:13.924Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="EBKJIUD" data-post="124" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ebkjiud/48/6675_2.png" class="avatar"> EBKJIUD:</div>
<blockquote>
<p>Обратную бы логику добавить</p>
</blockquote>
</aside>
<p>Можно же поменять порядок групп. <code>--hosts ignore.txt --auto=none --tlsrec 1</code></p></td><td>2024-08-14T14:53:55.293Z</td></tr><tr><td>Sanek184</td><td><p>Зачем ? Можно создать сколько угодно txt и в них сайты, каждый с разной фильтрацией - это кстати еще один огромный плюс данного приложения</p></td><td>2024-08-14T14:57:17.838Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>Извиняюсь затупил… Действительно, усложнил в голове себе, очевидно же просто то что не работает, отдельным списком в начало и подбирать нужный метод.</p></td><td>2024-08-14T15:38:50.510Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>я так понимаю вся неопределеность возникает на torst, все остальные тригеры, гарантированно дают результат 1\0 для продвижения дальше</p>
<pre><code class="lang-auto">        torst   : Вышло время ожидания или сервер сбросил подключение после первого запроса
        redirect: HTTP Redirect с Location, домен которого не совпадает с исходящим
        cl_err  : HTTP ответ, код которого равен 40x, но не 429
        sid_inv : session_id в TLS ServerHello и ClientHello не совпадают
        alert   : TLS Error Alert в ответе
</code></pre>
<p>Мне кажется все же имеет смысл делать исключение, чтобы пропустить конкретную группу одному домену, когда работает сотня других проходя через эту последовательность групп.<br>
Без такой возможности потребуется указать все домены к конкретной группе. А чтобы через нее прогнать неизвестный домен, потребуется ее еще раз в каком-то месте указать, это раздует строку запуска.</p>
<p>Как минимум лишним для гибкости не будет.</p>
<p>-T указанный глобально в первичной группе влияет на --auto=torst в остальных?</p></td><td>2024-08-14T15:58:39.193Z</td></tr><tr><td>l8l</td><td><p>Кто нибудь покажите пару примеров для опции --fake-data</p></td><td>2024-08-14T16:04:54.723Z</td></tr><tr><td>EBKJIUD(EBKJIUD)</td><td><p>А пробовали стандартный использовать и методом подбора проверить, как правильно указать его для этого параметра:</p>
<p>GET / HTTP/1.1<br>
Host: <a href="http://habrahabr.ru" rel="noopener nofollow ugc">habrahabr.ru</a><br>
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/50.0<br>
Accept-Encoding: gzip, deflate, br<br>
Connection: keep-alive</p>
<p>Возможно его можно целиком подделать в таком формате…</p>
<p>Возможно в hex надо.</p>
<details>
<summary>
Спойлер</summary>
<p>К примеру в запрете есть такой файлик:<br>
<a href="https://github.com/bol-van/zapret/blob/master/files/fake/http_iana_org.bin" class="inline-onebox" rel="noopener nofollow ugc">zapret/files/fake/http_iana_org.bin at master · bol-van/zapret · GitHub</a><br>
и пачка других в raw. Можно через wireshark дернуть, вот пример.<br>
<a class="attachment" href="byedpi-обсуждение-9057/sYwvOkF3JMPkFqbKTvVmo345QCm.bin">1.bin</a> (285 байтов)</p>
</details></td><td>2024-08-14T16:39:37.553Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Sanek184" data-post="123" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>–split 2 --disorder 7 --auto=t,r,c,s,a -T 1 --tlsrec 3+sni <a href="https://www.fontanka.ru" rel="noopener nofollow ugc">https://www.fontanka.ru</a><br>
Но --auto=t,r,c,s,a не всегда определяет, что сайт не открывается, --tlsrec 3+sni уже ломает сайт и продолжать на --split 2 --disorder 7 уже нет смысла.</p>
</blockquote>
</aside>
<p>Спасибо. Может знаете, вот такую ошибку FF “NS_ERROR_NET_INTERRUPT” как-нибудь обработать в buydpi можно?</p></td><td>2024-08-14T18:08:32.731Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>В общем, выяснилось, что с <code>--fake</code> ciadpi.exe падает лишь на 7-ке. На win10 все ОК.<br>
upd На 7-ке не падает, если использовать <code>--conn-ip</code>. Но при этом <code>--fake</code> все равно не работает как на 10-ке, сайты не грузятся.</p></td><td>2024-08-14T19:23:41.320Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p><code>send_fake()</code> seems to be broken on android x86 7.1 (kernel 4.9.194), the second TCP packets with relative sequence number 1 is filled with the same data as the first one, although <code>send_fake()</code> works on alpine linux 3.2 (kernel 3.18). confusing.<br>
All android images I tested and results:</p>
<div class="md-table">
<table>
<thead>
<tr>
<th>version</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td>android x86 7.1, with kernel 4.9.194</td>
<td>fail</td>
</tr>
<tr>
<td>android x86 7.1, with kernel 4.19.175</td>
<td>success</td>
</tr>
<tr>
<td>android 10, with kernel 4.14.116, HONOR 9X</td>
<td>success</td>
</tr>
<tr>
<td>13 GSI, with kernel 5.10.66-android12-9-00001-g83cbf18b7dcd-ab8546841</td>
<td>success</td>
</tr>
</tbody>
</table>
</div><aside class="onebox allowlistedgeneric" data-onebox-src="https://sourceforge.net/projects/android-x86/files/Release%207.1/">
  <header class="source">
      <img src="byedpi-обсуждение-9057/ed359a1fe61487d245673f9518d46050b252ce9c.png" class="site-icon" data-dominant-color="F37C20" width="180" height="180">

      <a href="https://sourceforge.net/projects/android-x86/files/Release%207.1/" target="_blank" rel="noopener nofollow ugc">sourceforge.net</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://sourceforge.net/projects/android-x86/files/Release%207.1/" target="_blank" rel="noopener nofollow ugc">android-x86 -  Browse /Release 7.1 at SourceForge.net</a></h3>

  <p>A project to bring Android to the x86 platform</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p><a href="https://dl-cdn.alpinelinux.org/alpine/v3.2/releases/x86_64/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://dl-cdn.alpinelinux.org/alpine/v3.2/releases/x86_64/</a></p></td><td>2024-08-16T05:07:53.834Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>I tried another implementation, but no such luck.</p>
<pre><code class="lang-auto">//unix is "golang.org/x/sys/unix"
type MagicResult struct {
	ReadFD  int
	WriteFD int
	Length  int64
}

func MagicWrite(fd int, buf []byte) (MagicResult, error) {
	result := MagicResult{
		ReadFD:  -1,
		WriteFD: -1,
		Length:  0,
	}
	var pipeBuf [2]int
	err := unix.Pipe2(pipeBuf[:], unix.O_NONBLOCK)
	if err != nil {
		return result, err
	}
	defer func() {
		if err != nil {
			unix.Close(pipeBuf[1])
			unix.Close(pipeBuf[0])
		}
	}()
	result.ReadFD = pipeBuf[0]
	result.WriteFD = pipeBuf[1]

	iov := [1]unix.Iovec{{
		Base: &amp;buf[0],
		Len:  uint64(len(buf)),
	}}
	t1, err := unix.Vmsplice(result.WriteFD, iov[:], unix.SPLICE_F_NONBLOCK)
	result.Length=int64(t1)
	if err != nil {
		return result, err
	}
	result.Length, err = unix.Splice(result.ReadFD, nil, fd, nil, len(buf), unix.SPLICE_F_NONBLOCK)
	return result, err
}
</code></pre></td><td>2024-08-18T01:21:21.527Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>А есть ли у byedpi аналог такого параметра у zapret?</p>
<p><code>--dpi-desync-split-seqovl=&lt;int&gt;</code><br>
<em>использовать sequence overlap перед первым отсылаемым оригинальным tcp сегментом</em></p></td><td>2024-08-18T08:37:12.284Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="TesterTi" data-post="133" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>В общем, выяснилось, что с <code>--fake</code> ciadpi.exe падает лишь на 7-ке</p>
</blockquote>
</aside>
<p><code>--fake</code> на 7-ке работать не будет, TransmitFile поддерживается с Windows 8.1.</p></td><td>2024-08-18T15:39:14.124Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Acindaz" data-post="136" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>А есть ли у byedpi аналог такого параметра у zapret?</p>
</blockquote>
</aside>
<p>Нет.</p></td><td>2024-08-18T15:44:58.141Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Datura_metel" data-post="134" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p><code>send_fake()</code> seems to be broken on android x86 7.1 (kernel 4.9.194)</p>
</blockquote>
</aside>
<p>Сhecked, also broken on Android 8.1 (Linux 4.4.9).</p></td><td>2024-08-18T16:30:07.566Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Понятно, спасибо!</p></td><td>2024-08-18T18:29:59.298Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>вроде выше писали про работу IPv6<br>
есть<br>
ciadpi.exe -f -1 --hosts :googlevideo.com --auto=n -d 3 --port 9000<br>
хотел проверить работу yt-dlp как через IPv6 так и без. но он (yt-dlp) при --force-ipv6 не работает через любые прокси что пробовал (socks5/http)</p>
<p>через ByeDPI == --conn-ip 192.168 или --conn-ip 2a00: работает</p>
<p>но у меня провайдер выдает IPv6 каждый раз разные</p>
<p>есть ли планы или уже какая то опция ?</p>
<ol>
<li>для указания --ipv4 --ipv6 без бинда на конкретный адрес ?</li>
<li>пытаться подключится по IPv6 и если он не работает то переключатся на IPv4 ?</li>
</ol>
<pre><code class="lang-auto">Dhcp       Основной    2d10h1m20s 1d10h1m20s 2a00:62c0: ::2
Временный  Основной    2d23h57m3s   9h54m28s 2a00:62c0: :e808
Публичный  Основной    2d23h57m3s 1d23h57m3s 2a00:62c0: :aa29
</code></pre>
<p>p.s. не знаю баг не баг. не показывает ИП сервера. только :443<br>
–debug 1 + IPv6</p>
<p>new conn: fd=412, addr=:443<br>
host: <a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a> (127)</p>
<p>new conn: fd=436, addr=:443<br>
host: <a href="http://manifest.googlevideo.com" rel="noopener nofollow ugc">manifest.googlevideo.com</a> (127)</p>
<p>new conn: fd=428, addr=2a00:1450:400f:1::6:443<br>
host: <a href="http://rr1---sn-5goeenez.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-5goeenez.googlevideo.com</a> (127)</p>
<p>new conn: fd=332, addr=:443<br>
host: <a href="http://redirector.googlevideo.com" rel="noopener nofollow ugc">redirector.googlevideo.com</a> (220)</p></td><td>2024-08-20T04:41:51.369Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group quote-modified" data-username="LeonMskRu" data-post="141" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<ul>
<li>для указания --ipv4 --ipv6 без бинда на конкретный адрес ? ?</li>
</ul>
</blockquote>
</aside>
<p>Чтобы использовать только IPv4 есть <code>--conn-ip 0.0.0.0</code> (еще есть скрытая опция <code>--no-ipv6</code>, но она может быть удалена).<br>
Для использования только IPv6 опций нет, но в ней и смысла нет особого.</p>
<blockquote>
<ul>
<li>пытаться подключится по IPv6 и если он не работает то переключатся на IPv4 ?</li>
</ul>
</blockquote>
<p>Нет. Обычно клиенты должны делать такое.</p>
<blockquote>
<p>p.s. не знаю баг не баг. не показывает ИП сервера. только :443</p>
</blockquote>
<p>Баг, сейчас исправлю.</p></td><td>2024-08-20T14:45:19.474Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>мой косяк.<br>
я перепутал по умолчанию <code>-i 0.0.0.0 и -I ::</code><br>
запускал по примеру конфига в другом месте и пока еще не разобрался во всех опциях</p></td><td>2024-08-20T15:06:32.017Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>FreeBSD also has <code>sendfile</code> .<br>
<a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+14.1-RELEASE&amp;arch=default&amp;format=html" class="onebox" target="_blank" rel="noopener nofollow ugc">https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+14.1-RELEASE&amp;arch=default&amp;format=html</a><br>
Is it possible to port desync?</p></td><td>2024-08-20T20:22:00.252Z</td></tr><tr><td>hufrea</td><td><aside class="onebox githubpullrequest" data-onebox-src="https://github.com/hufrea/byedpi/pull/74">
  <header class="source">

      <a href="https://github.com/hufrea/byedpi/pull/74" target="_blank" rel="noopener nofollow ugc">github.com/hufrea/byedpi</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">



    <div class="github-icon-container" title="Pull Request">
      <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
    </div>

  <div class="github-info-container">



      <h4>
        <a href="https://github.com/hufrea/byedpi/pull/74" target="_blank" rel="noopener nofollow ugc">FreeBSD support</a>
      </h4>

    <div class="branches">
      <code>hufrea:main</code> ← <code>er2off:main</code>
    </div>

      <div class="github-info">
        <div class="date">
          opened <span class="discourse-local-date" data-format="ll" data-date="2024-08-11" data-time="09:55:56" data-timezone="UTC">09:55AM - 11 Aug 24 UTC</span>
        </div>

        <div class="user">
          <a href="https://github.com/er2off" target="_blank" rel="noopener nofollow ugc">
            <img alt="er2off" src="byedpi-обсуждение-9057/a1d34f66745cc5729d3eaa0495177c897714cf86.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="878787">
            er2off
          </a>
        </div>

        <div class="lines" title="1 commits changed 8 files with 58 additions and 19 deletions">
          <a href="https://github.com/hufrea/byedpi/pull/74/files" target="_blank" rel="noopener nofollow ugc">
            <span class="added">+58</span>
            <span class="removed">-19</span>
          </a>
        </div>
      </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Closes #16</p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="bolvan" data-post="79" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/79">Zapret: what's new</a></div>
<blockquote>
<p>От переноса fake в tpws пока воздержался. Необходимо тестировать как он себя поведет на разных системах</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/bolvan">@bolvan</a> проверяли ли вы как ведет себя sendfile на FreeBSD?</p></td><td>2024-08-22T17:38:35.449Z</td></tr><tr><td>bolvan</td><td><p>Нет, с фейком тему не развивал</p></td><td>2024-08-22T18:08:45.168Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>На новой 13 версии <code>invalid value: -A --tlsrec</code>, если byedpi.bat из командной строки запускать</p></td><td>2024-08-22T21:08:46.689Z</td></tr><tr><td>hufrea</td><td><p>Ёмае, батник забыл обновить.</p></td><td>2024-08-22T21:20:26.905Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Теперь все ок, спасибо вам за программу! С <code>--disoob</code> отлично работает, но с<code> --drop-sack</code> почему-то ругается на <code>unknown option</code></p></td><td>2024-08-22T21:54:58.777Z</td></tr><tr><td>hufrea</td><td><p>Забыл написать, эта опция только для Linux. Windows и так ведет себя так, как если бы эта опция на ней была включена.</p></td><td>2024-08-22T22:14:41.247Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Спасибо за разъяснение.<br>
У меня наконец-то стали ловиться ошибки с --auto и срабатывать следующие параметры обхода, круто.</p></td><td>2024-08-22T22:28:18.501Z</td></tr><tr><td>halimon</td><td><p>Посоветуйте пожалуйста конфигурацию для МГТС Москва</p></td><td>2024-08-24T10:44:29.934Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>У меня мегафон, работает стандартная конфигурция в byedpi.bat<br>
И такая тоже <code>ciadpi.exe --oob 3+sni</code><br>
Для мгтс, честно говоря, не знаю, может кто другой подскажет?</p></td><td>2024-08-24T17:13:31.042Z</td></tr><tr><td>makoda</td><td><p>Здравствуйте! Помогите, пожалуйста, разобраться.<br>
Речь идёт о сайтах группы <em><a href="http://kinozal.tv" rel="noopener nofollow ugc">kinozal.tv</a></em>, <em><a href="http://rutor.org" rel="noopener nofollow ugc">rutor.org</a></em>, <em>myzuka.club</em> (вы с ними сталкивались ранее), подключение по <strong>https</strong>.<br>
Blockcheck по ним выдаёт единственную стратегию - использование фейка (а именно - <strong>nfqws --dpi-desync=fake --dpi-desync-ttl=10</strong>). Стратегию проверил на деле - рабочая, блокировка обходится.<br>
Но в моём случае предпочтительней использовать socks, нежели nftset с queue - т.к. подбираю более-менее универсальный вариант, не требующий списка хостов.<br>
Посему решил адаптировать сию стратегию для ByeDPI. Как понимаете, пока что безуспешно.<br>
Т.е. что требуется-то по идее? Просто запуск с параметрами типа “<strong>–fake -1 --ttl 10</strong>”.<br>
Пробовал -1,0,1,2,3++, пробовал +s, пробовал указывать файл <em>tls_clienthello_iana_org.bin</em> в --fake-data, пробовал --md5sig, да много чего перепробовал - всё тщетно. Всегда возвращается одна и та же ошибка “<strong>OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection</strong>”.<br>
Посему позвольте узнать - какая принципиальная разница в фейковом пакете nfqws и ByeDPI? И какой полный ByeDPI-аналог стратегии для nfqws, выдаваемой blockcheck-ом? Т.е. в nfqws ведь не указывается размер фейка, только фейк и TTL - так какой он (размер) по умолчанию? (вопрос не только к <a class="mention" href="/u/hufrea">@hufrea</a> - но и, видимо, к <a class="mention" href="/u/bolvan">@bolvan</a>)</p></td><td>2024-08-25T10:50:51.419Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А у вас не работает стандартный конфиг byepdi? Проверьте, возможно, и не нужно никаких аналогов подбирать. В byedpi еще очень хорошо работают такие <code>--oob 3+s</code> либо <code>--tlsrec 3+s</code></p></td><td>2024-08-25T13:37:08.550Z</td></tr><tr><td>mike7</td><td><p>А blockcheck что выдает для tpws? Тоже socks )</p></td><td>2024-08-25T13:40:58.325Z</td></tr><tr><td>makoda</td><td><blockquote>
<p>А у вас не работает стандартный конфиг byepdi? Проверьте, возможно, и не нужно никаких аналогов подбирать. В byedpi еще очень хорошо работают такие <code>--oob 3+s</code> либо <code>--tlsrec 3+s</code></p>
</blockquote>
<p>В данном случае - нет, не работает.</p>
<blockquote>
<p>А blockcheck что выдает для tpws? Тоже socks )</p>
</blockquote>
<p>Для tpws - ничего не выдаёт. Только для nfqws. Проверил весь чек-лист, везде “!!! AVAILABLE !!!” только для вариантов с фейком, ну и итоговой стратегией указана та, что выше в посте.</p></td><td>2024-08-25T13:48:53.811Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>blockcheck с проверкой tls1.2 + tls1.3 ?<br>
можно посмотреть через<br>
curl -x socks5://127.0.0.1:1080 --tlsv1.3 или --tls-max 1.2</p>
<aside class="quote" data-post="43" data-topic="9057">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/byedpi-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9057/43">ByeDPI: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/byedpi/39"><span data-category-id="39" style="--category-badge-color: #231F20; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="ByeDPI and ByeDPIAndroid Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">ByeDPI</span></span></a>
  </div>
  <blockquote>
    техники OOB и tlsrec работают в России в основном только на TLS1.3 
На 1.2 rdp-шный DPI сечет ответ сервера и сбрасывает
  </blockquote>
</aside>
</td><td>2024-08-25T14:00:44.986Z</td></tr><tr><td>makoda</td><td><blockquote>
<p>blockcheck с проверкой tls1.2 + tls1.3 ?</p>
</blockquote>
<p>Да, вот выдача:</p>
<pre><code class="lang-auto">* SUMMARY
ipv4 myzuka.club curl_test_https_tls12 : tpws not working
ipv4 myzuka.club curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=10
ipv4 myzuka.club curl_test_https_tls13 : tpws not working
ipv4 myzuka.club curl_test_https_tls13 : nfqws --dpi-desync=fake --dpi-desync-ttl=10
</code></pre>
<p>Выхлоп curl одинаков как для <em>–tlsv1.3</em>, так и для <em>–tls-max 1.2</em>:</p>
<pre><code class="lang-auto">* Host localhost:1081 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
*   Trying 127.0.0.1:1081...
* Connected to localhost (127.0.0.1) port 1081
* Host myzuka.club:443 was resolved.
* IPv6: (none)
* IPv4: 172.67.199.164, 104.21.21.170
* SOCKS5 connect to 172.67.199.164:443 (locally resolved)
* SOCKS5 request granted.
* Connected to localhost (127.0.0.1) port 1081
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to myzuka.club:443 
* closing connection #0
curl: (35) OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to myzuka.club:443
</code></pre>
<p>Это при запуске ByeDPI с параметрами <em>–fake -1 --ttl 10</em>. Впрочем, при любых других параметрах выхлоп тот же самый.</p></td><td>2024-08-25T14:26:38.756Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>провайдер / роутер ?<br>
на моем РТ и указанные оба варианта и дефолтный .bat работают</p></td><td>2024-08-25T14:35:28.537Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="makoda" data-post="157" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/f08c70/48.png" class="avatar"> makoda:</div>
<blockquote>
<p>В данном случае - нет, не работает.</p>
</blockquote>
</aside>
<p>А комбинация fake с disorder? <code>--disorder 1 --fake 7</code> или <code>--disorder 1 --fake -1</code></p></td><td>2024-08-25T14:48:12.585Z</td></tr><tr><td>makoda</td><td><blockquote>
<p>провайдер / роутер ?</p>
</blockquote>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://2ip.ru/as/59533/">
  <header class="source">
      <img src="byedpi-обсуждение-9057/8e60228de3841e1bcd31eb80412968da8c787acf.png" class="site-icon" data-dominant-color="81D4F1" width="32" height="32">

      <a href="https://2ip.ru/as/59533/" target="_blank" rel="noopener nofollow ugc">2ip.ru</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="byedpi-обсуждение-9057/3d84396d31b4d51b7ad0407b97863b0c725fcab4_2_690x362.png" class="thumbnail" data-dominant-color="4EC3EB" width="690" height="362"></div>

<h3><a href="https://2ip.ru/as/59533/" target="_blank" rel="noopener nofollow ugc">Информация об ASN59533</a></h3>

  <p>Данные об ASN59533. Название владельца, адрес, адрес сайта, выделенные IP диапазоны, WHOIS.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>И MikroTik на ROS6. Подчеркну, что загвоздка лишь с вышеуказанной группой сайтов, все остальные ByeDPI разблокирует без проблем. Кроме того, nfqws ведь обходит эту блокировку.</p>
<blockquote>
<p>А комбинация fake с disorder? <code>--disorder 1 --fake 7</code> или <code>--disorder 1 --fake -1</code></p>
</blockquote>
<p>Пробовал подобные комбинации - та же ошибка.</p></td><td>2024-08-25T15:05:45.759Z</td></tr><tr><td>hufrea</td><td><blockquote>
<p><code>--fake</code> на 7-ке работать не будет, TransmitFile поддерживается с Windows 8.1.</p>
</blockquote>
<p>Это не так. Дело оказалось вовсе не в TransmitFile (и поддерживается он с Windows XP, Windows 8.1 это для UWP), а в WriteFile, который не работает в Windows 7 без 4-го аргумента (lpNumberOfBytesWritten). Исправил в 13.1</p>
<aside class="quote no-group" data-username="makoda" data-post="154" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/f08c70/48.png" class="avatar"> makoda:</div>
<blockquote>
<p>Т.е. в nfqws ведь не указывается размер фейка, только фейк и TTL - так какой он (размер) по умолчанию?</p>
</blockquote>
</aside>
<p>nfqws отправляет весь фейк, после настоящие данные, притом их он может разбить на пакеты разного размера и отослать в ином порядке (<code>fake + disorder</code>). В ByeDPI так не сделать, размер фейка так же является и позицией, по которой разбивается запрос.<br>
Близкими к <code> --dpi-desync=fake</code> могут быть: <code>--fake 517 --ttl 10</code> (517 - размер фейка по умолчанию) и <code>--fake 0+e --ttl 10</code> (<code>+e</code> - размер оригинального запроса, пока этот флаг нигде не упоминается). Еще можно попробовать <code>--split 5 --fake -1 --tt 10 --fake-offset 5</code>.</p></td><td>2024-08-25T18:02:08.891Z</td></tr><tr><td>makoda</td><td><aside class="quote no-group" data-username="hufrea" data-post="163" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Близкими к <code> --dpi-desync=fake</code> могут быть: <code>--fake 517 --ttl 10</code> (517 - размер фейка по умолчанию) и <code>--fake 0+e --ttl 10</code> (<code>+e</code> - размер оригинального запроса, пока этот флаг нигде не упоминается).</p>
</blockquote>
</aside>
<p>Охренеть! Сработали оба варианта! <strong>hufrea</strong>, благодарю!</p></td><td>2024-08-25T18:28:43.726Z</td></tr><tr><td>3ph</td><td><p>Эмулятор Nox + Android 7. В приложении SmartTube пытаюсь подключиться к Socks-серверу ByeDPI, запущенному на ПК - безуспешно. При этом на самом ПК все работает. Пробовал то же самое сделать через Tor, открыв к нему доступ через SocksPort - никаких проблем при проксировании из эмулятора не возникает. То же самое можно сказать о проксировании через Shadowsocks - тоже никаких проблем. В чем может быть причина?</p>
<p>Эмулятор, разумеется, меня не так интересует. Просто такая же проблема с Android TV на двух устройствах. Может, это как-то связано?</p>
<p>Запускал с ключом --debug, чтобы убедится, что подключение есть и даже обмен какой-то есть, но затем все просто останавливается и соединение закрывается.</p></td><td>2024-08-25T21:55:37.767Z</td></tr><tr><td>Sanek184</td><td><p>del</p></td><td>2024-08-27T11:25:29.548Z</td></tr><tr><td>3ph</td><td><p>Может кому-то пригодится. При проксировании через эмулятор помогла строчка --disorder 1 --fake -1 --ttl 7 auto=none. Теперь проблем нет. Но при перепрыгивании с видео на видео бывает задержка, а в консоле сыпятся десятки сообщений типа send: 0 != 16384 (fd: 560)<br>
pollout (fd=560). Это нормально, или можно что-то подкрутить?</p></td><td>2024-08-27T13:51:01.573Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>ф12 в браузере и смотреть что там в “network”<br>
сейчас у многих проблемы с 403 ответом <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a></p></td><td>2024-08-27T17:13:12.245Z</td></tr><tr><td>3ph</td><td><p>Я в этом не сильно разбираюсь. Просто обратил внимание, что 16384 -  это размер буфера по умолчанию. Подумал, что раз так много сообщений с этим числом, то, может, его (буфер) увеличить нужно, или еще что-то в этом роде. Но с другой стороны, там изредка проскакивают и другие числа, например: send: 0 != 1408 (fd: 752) pollout (fd=752) send: 0 != 16384 (fd: 752)</p></td><td>2024-08-27T20:02:41.109Z</td></tr><tr><td>Sanek184</td><td><p>Так как --disorder на Windows с ретрансмиссией и нормально не работает, хорошо себя показывает --disoob 2+s. По ощущениям быстрее, как и с disorderом без ретрансмиссии. Спасибо за реализацию такой функции</p></td><td>2024-08-28T05:53:30.509Z</td></tr><tr><td>3km(Karim)</td><td><p>подскажите пожалуйста как подобрать аналогичные параметры для ByeDPI<br>
zapret работает с этими:<br>
–dpi-desync=fake,split2 --dpi-desync-ttl=2 --dpi-desync-split-pos=1</p>
<p>–split 5 --fake -1 --tt 10 --fake-offset 5<br>
заработали трекеры, линкедин, X, но youtube не работает - интерфейс и превьюшки махом загружаются, а видео не идет</p></td><td>2024-08-28T14:36:36.863Z</td></tr><tr><td>Sanek184</td><td><p>вместо –split 5 попробовать –split 2, если не поможет –split заменить на  --split 1 --disorder 3<br>
и --ttl а не --tt и значение от 2 подбирать</p>
<p>–split 2 --fake -1 --ttl 5</p></td><td>2024-08-28T16:00:30.767Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Что будет, если запустить сервис без параметров? Ну или напр. просто с --debug 1 ? Будет ли он как-то влиять на траффик или будет просто перегонять его без изменений. Если нет - можно ли каким-то образом такой режим включить?</p></td><td>2024-08-28T21:40:59.593Z</td></tr><tr><td>3ph</td><td><aside class="quote no-group" data-username="3km" data-post="171" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/3km/48/1859_2.png" class="avatar"> 3km:</div>
<blockquote>
<p>подскажите пожалуйста как подобрать аналогичные параметры для ByeDPI<br>
zapret работает с этими:<br>
–dpi-desync=fake,split2 --dpi-desync-ttl=2 --dpi-desync-split-pos=1</p>
</blockquote>
</aside>
<p>Если я правильно понимаю, сначала идет фейк-пакет с ttl=2, потом 1 байт оригинального, потом остаток оригинального. Как писал автор чуть выше, ByeDPI работает по другому принципу, поэтому в точности повторить такую последовательность в нем не получится. Нужно отталкиваться от того, что есть. Sanek184 предложил варианты - пробуйте, эсперементируйте, читайте теорию. Других путей тут нет <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-08-29T07:19:20.028Z</td></tr><tr><td>meadow_seed</td><td><aside class="quote no-group" data-username="3ph" data-post="174" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/3/c77e96/48.png" class="avatar"> 3ph:</div>
<blockquote>
<p>пробуйте, эсперементируйте</p>
</blockquote>
</aside>
<p>А где можно найти информацию по минимальным и максимальным значениям параметров и совместимости параметров друг с другом? Хотелось бы сделать батник примерно следующего вида чтобы автоматически проверять на разных провайдерах<br>
byedpi.exe &lt;параметры&gt;<br>
downloader.exe --proxy localhost:443 --site http:// block.ed/robot.txt --timeout 8000<br>
if errorlevel 0 echo ‘success &lt;параметры&gt;’ &gt; log.txt<br>
Или возможных комбинаций настолько много, что проще вручную пробовать наиболее вероятные как этим занимаются в этом треде?</p></td><td>2024-08-29T11:48:17.360Z</td></tr><tr><td>3km(Karim)</td><td><p>всё сломалось? что сейчас работатет с не,<br>
-o 2 раньше работало</p></td><td>2024-09-13T20:35:33.272Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Есть у кого-то опыт настройки fake для quic?<br>
С zapret’ом пробивается просто: <code>--wf-udp=443 --dpi-desync=fake</code>.<br>
А вот у byedpi почему-то не срабатывает: <code>-K u -f 1 --auto=n</code>.</p></td><td>2024-09-16T07:22:16.719Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Может добавить фейк из последней сборки zapret?<br>
<code>-K u -f 1 --fake-data tls_clienthello_www_google_com.bin --auto=n</code> Или это не для ютуба?</p></td><td>2024-09-16T22:56:39.634Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Для YT, для андроида (byedpiandroid). Но у app нет разрешений на чтение файлов, поэтому не выйдет.<br>
А на ПК протестировать не получается, т.к. ни chrome, ни curl не хотят quic через проксю гнать.</p></td><td>2024-09-17T06:16:22.729Z</td></tr><tr><td>Ori</td><td><p>Через nekobox+byedpi-neko можно попробовать. Там есть разрешение.<br>
А ещё можно прописать фейк руками.<br>
Касательно udp, у меня провайдер тупо блочит длинные фейки, например. Подошел только <code>quic_short_header.bin</code> из файлов запрета. Хз почему так.</p>
<p>Вообще, если помотреть инструкцию к byedpi, то здесь fake работает не так как в аналогах, насколько я понимаю. Тут написано, что фейк подобен дисордер. Попробуйте какой-нибудь --fake -1?</p></td><td>2024-09-17T06:50:35.094Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Я пробовал для фейка разные значения. Попробовал вместо файла вписать “0x00000000”. Пока безуспешно. На андроиде YT по tls пробивается на раз-два, но приложение YT постоянно норовит следующий кусок видео брать по quic, из-за чего регулярные затыки воспроизведения.</p></td><td>2024-09-17T07:23:26.265Z</td></tr><tr><td>Ori</td><td><p>Через NewPipe не пробовали, вместо обычного приложения ютуба? Я хз использует ли оно udp, но может там такой проблемы нет?<br>
Вообще в byedpi на телефоне у меня сейчас работает --disorder 1 --fake -1 --md5sig, но я не знаю оказывает ли это эффект на udp, или видосы тянутся по tcp.</p></td><td>2024-09-17T07:37:15.410Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Я не очень доверяю сторонним YT приложениям, плюс мне важна связка YT на телефоне и на ТВ. С телефона можно листать комменты и организовывать очередь воспроизведения на ТВ.</p>
<p>Попробуйте вообще оставить <code>--disorder 1</code>, для YT этого должно хватать.</p></td><td>2024-09-17T08:14:06.873Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Acindaz" data-post="177" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Есть у кого-то опыт настройки fake для quic?</p>
</blockquote>
</aside>
<p><code>--proto=udp --pf=443 --udp-fake 3 -An</code></p>
<aside class="quote no-group" data-username="Acindaz" data-post="181" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Попробовал вместо файла вписать “0x00000000”</p>
</blockquote>
</aside>
<p>Тут другой <a href="https://en.wikipedia.org/wiki/Escape_sequences_in_C" rel="noopener nofollow ugc">формат</a>:<br>
<code>--fake-data=:\x00\x00\x00</code></p></td><td>2024-09-17T16:10:22.216Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Спасибо! Проверил на нескольких роликах. Пока зависаний не было. Совместил параметры так:</p>
<pre><code class="lang-auto">--proto=tls,udp --pf=443 --hosts=":googlevideo.com" --disorder=1 --udp-fake=3 --auto=n
</code></pre>
<p>Если я понимаю правильно, конфликтов при таком совмещении не будет, disorder сработает только для tls, а udp-fake только для quic?</p></td><td>2024-09-17T16:28:23.934Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Acindaz" data-post="185" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Если я понимаю правильно, конфликтов при таком совмещении не будет, disorder сработает только для tls, а udp-fake только для quic?</p>
</blockquote>
</aside>
<p>Да.</p></td><td>2024-09-17T16:30:43.657Z</td></tr><tr><td>yocx_xcoy</td><td><p>Подскажите пожалуйста, есть ByeDPI на Android - там через UI сделаны настройки (вроде банальные) и они работают для yt:</p>
<details>
<summary>
Settings</summary>
<blockquote>
<ul>
<li>Mode VPN</li>
<li>DNS 8.8.8.8</li>
<li>IPv6 off</li>
<li>proxy address 127.0.0.1</li>
<li>port 1080</li>
<li>Max num 512</li>
<li>Buffer size 16384</li>
<li>no domain off</li>
<li>tcp fast open off</li>
<li>hosts disabled (тут вариативно, можно вкл blacklist и там <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>)</li>
<li>default ttl 0</li>
<li>desync method fake</li>
<li>split position 1</li>
<li>split at host off</li>
<li>drop SACK off</li>
<li>ttl of fake packets 8</li>
<li>fake offset 0</li>
<li>sni of fake packet <a href="http://www.iana.org" rel="noopener nofollow ugc">www.iana.org</a></li>
<li>desync http on</li>
<li>desync https on</li>
<li>desync udp off</li>
<li>host mixed case off</li>
<li>domain mixed case off</li>
<li>host remove spaces off</li>
<li>split tls record on</li>
<li>tls record split position 0</li>
<li>split tls record at sni on</li>
</ul>
</blockquote>
</details>
<p>Как аналогичные настройки сделать через параметры строчные - чтобы проверить сначала на пк через <code>ciadpi.exe</code> а далее закинуть на роутер в конфиг <code>byedpi</code>?</p>
<p>Спасибо!</p></td><td>2024-09-18T09:09:38.888Z</td></tr><tr><td>hufrea</td><td><p><code>--ip 127.0.0.1 --hosts :googlevideo.com --fake 1 --ttl 8 --tlsrec 0+s -An</code><br>
Вряд ли fake здесь имеет смысл, особенно если используется лишь 1 байт, возможно будет достаточно использовать <code>--disorder 1</code>.</p>
<blockquote>
<p>проверить сначала на пк через ciadpi.exe</p>
</blockquote>
<p>На Windows fake и disorder работают немного иначе, поэтому параметры, работающие на Linux/Android, могут не работать.</p>
<blockquote>
<p>закинуть на роутер</p>
</blockquote>
<p>На него лучше Zapret ставить, если это возможно.</p></td><td>2024-09-18T09:56:28.136Z</td></tr><tr><td>Dhohbr</td><td><p>Не увидел в мануале возможность использования файла конфигурации. Не планируете его реализовать?</p></td><td>2024-09-18T10:12:36.187Z</td></tr><tr><td>yocx_xcoy</td><td><p>Роутер Asus RT-N11P B1 и насколько я понимаю - туда запрет накатить очень проблематично - насколько я понял.</p>
<p>Спасибо за конфиг - попробовал на телефоне+wifi, переключившись на command line editor - с disorder yt работает через revanced.<br>
Пробую этот же конфиг закинуть в роутер и проверить на пк (который подключен к роутеру по проводу) - yt не грузится почти совсем (даже ui нормально не прогружается)…</p>
<p><em>Сам роутер является НЕ первым в цепи, он висит после терминала (192.168.1.1) на адресе 192.168.1.3 - не знаю, важна ли эта инфа или нет в данном случае, т.к. с телефона к тому же роутеру - всё работает.</em></p>
<hr>
<p>К слову, на пк работает ещё так goodbyedpi (текущий дефолтовый):</p>
<details>
<summary>
goodbyedpi</summary>
<p><code>goodbyedpi.exe -9 --fake-gen 5 --fake-from-hex 160301FFFF01FFFFFF0303594F5552204144564552544953454D454E542048455245202D202431302F6D6F000000000009000000050003000000 --blacklist ..\russia-blacklist.txt --blacklist ..\russia-youtube.txt</code></p>
</details>
<hr>
<p>Убрав из конфига hosts - ui стал прогружаться, ролики как-то странно - один да и перемотка быстрая - другой и несколько других - просто нет…</p></td><td>2024-09-18T10:19:20.153Z</td></tr><tr><td>yocx_xcoy</td><td><p>Подскажите, каким образом лучше подойти к накрутке параметров? (ну кроме как накинуть параметр, обновить конфиг, сделать рестарт сервиса и пойти на yt)</p>
<p>Решил начать с простого:<br>
<code>option cmd_opts '--disorder 3'</code></p>
<p>Пробую простучать гугл и ртрекер так:<br>
<code>curl -I -x socks5://192.168.1.3:1080 -k https://rutracker.org/myip //...google.com</code></p>
<p>Ответ на гугл 200, на рутрекер же:<br>
<code>curl: (35) Recv failure: Connection was reset</code></p>
<p>Если конфиг такой:<br>
<code>--fake 1 --ttl 8 --tlsrec 0+s -An</code><br>
то:<br>
<code>curl: (97) Could not resolve host: rutracker.org</code></p>
<p>А если такой:<br>
<code>--disorder 1 --ttl 8 --tlsrec 0+s -An</code><br>
то:<br>
<code>curl: (35) schannel: failed to receive handshake, SSL/TLS connection failed</code></p>
<hr>
<p>Куда копать и что можно попробовать?</p>
<p>Спасибо!</p>
<hr>
<p>p.s. включаю на винде goodbyedpi такой (даже с активным byedpi на роутере):</p>
<details>
<summary>
goodbyedpi.exe</summary>
<pre><code class="lang-auto">goodbyedpi.exe -9 --fake-gen 5 --fake-from-hex 160301FFFF01FFFFFF0303594F5552204144564552544953454D454E542048455245202D202431302F6D6F000000000009000000050003000000 --blacklist ..\russia-blacklist.txt --blacklist ..\russia-youtube.txt
</code></pre>
</details>
<p>И Yt сразу работает.</p></td><td>2024-09-19T11:52:07.203Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Попробуйте просто <code>--hosts=":googlevideo.com" --split=2 --auto=n</code>.<br>
Вчера на многих провайдерах отломался disorder.</p></td><td>2024-09-19T12:04:15.095Z</td></tr><tr><td>yocx_xcoy</td><td><p>Попробовал с доменом - yt не грузит (да и ui не грузит такое ощущение)<br>
Попробовал без: <code>--split 2 --auto n</code> - yt видео не грузит (ui вроде грузит)</p>
<p>Если без домена и пробить трекер:<br>
<code>curl: (35) schannel: failed to receive handshake, SSL/TLS connection failed</code></p>
<p>Такое ощущение, что или что-то не так у меня или оно совсем не работает…</p>
<p><code>--hosts :googlevideo.com --split 2 --auto=n</code><br>
так ютуб вообще плохо (вообще почти не) грузится, ну а пробив трекера (логично) не проходит совсем:<br>
<code>curl: (35) Recv failure: Connection was reset</code></p>
<p><em>p.s. при этом byedpi android - работает, ну и goodbyedpi win - работает.</em></p></td><td>2024-09-19T12:41:41.680Z</td></tr><tr><td>yocx_xcoy</td><td><p>Вариант из предложенных ранее, например:<br>
<code>option cmd_opts '-s 3+s -d 20+s'</code></p>
<p>в логах роутера выдает:<br>
<code>daemon.err ciadpi[6957]: recv: Connection reset by peer</code></p>
<p>Буду признателен, если кто-то сможет подсказать в какую сторону копать)</p></td><td>2024-09-19T16:10:57.189Z</td></tr><tr><td>sakontwist</td><td><p>У меня на домру например работал fake только с ttl 2, больше или меньше - все отлетает)</p>
<p>Я всегда начинаю с самого простого - disorder 1 split 4. Потом начинаю эти значения немного менять. Если не помогает, пробую уже fake +s и двигать ttl.</p>
<p>Если совсем ничего не помогает, то может быть просто заблочены ip. В таком случае никакие выкрутасы не помогут.</p>
<p>Учитывайте, что приложение  на Андроиде скорее всего использует quic (udp) и там вполне работает fake udp. Браузер (и curl) идут другим путем</p></td><td>2024-09-19T18:02:10.648Z</td></tr><tr><td>yocx_xcoy</td><td><aside class="quote no-group" data-username="sakontwist" data-post="195" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/c77e96/48.png" class="avatar"> sakontwist:</div>
<blockquote>
<p>Если совсем ничего не помогает, то может быть просто заблочены ip. В таком случае никакие выкрутасы не помогут.</p>
</blockquote>
</aside>
<p>Спасибо за советы - попробуем.<br>
А что на вэбе тоже лучше включить quic + попробовать fake или это не тот случай?)</p>
<p>Подскажите, а как узнать что заблочены ip?</p>
<hr>
<p>И ещё момент - стоит ли сразу при тесте добавлять хост:<br>
<code>--hosts :googlevideo.com --disorder 1 --split 4</code></p>
<p>или лучше тестить без хоста?</p></td><td>2024-09-19T20:34:13.572Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>9000 это ByeDPI</p>
<p>это сервер с которого скорее всего ютуб будет качать видео<br>
curl -4 -x socks5://127.0.0.1:9000 <a href="https://redirector.googlevideo.com/report_mapping?di=no" rel="noopener nofollow ugc">https://redirector.googlevideo.com/report_mapping?di=no</a><br>
=&gt; svo04s27 : router:     “pr05.svo03” next_hop_address: “5.143.253.164”</p>
<p>у меня он не отвечает по HTTPS от слова  ваще<br>
tcping 5.143.253.164 443<br>
Probing 5.143.253.164:443/tcp - No response - time=2001.609ms<br>
Probing 5.143.253.164:443/tcp - No response - time=2004.141ms<br>
Probing 5.143.253.164:443/tcp - No response - time=2003.353ms<br>
Probing 5.143.253.164:443/tcp - No response - time=2004.190ms</p>
<p>где то в РосТелекоме похоже  стоит<br>
nmap -p 443 --traceroute 5.143.253.164<br>
3   28.00 ms 213.59.232.180<br>
4   40.00 ms 5.143.253.164</p>
<p>а это вроде не РТ (получил  через yt-dlp)<br>
tcping -4 <a href="http://rr8---sn-n8v7kn7k.googlevideo.com" rel="noopener nofollow ugc">rr8---sn-n8v7kn7k.googlevideo.com</a> 443<br>
Probing 173.194.177.26:443/tcp - Port is open - time=22.596ms<br>
Probing 173.194.177.26:443/tcp - Port is open - time=67.280ms<br>
Probing 173.194.177.26:443/tcp - Port is open - time=24.328ms<br>
Probing 173.194.177.26:443/tcp - Port is open - time=33.368ms</p>
<details>
<summary>
Спойлер</summary>
<p>nmap -p 443 --traceroute <a href="http://rr8---sn-n8v7kn7k.googlevideo.com" rel="noopener nofollow ugc">rr8---sn-n8v7kn7k.googlevideo.com</a><br>
1   7.00 ms  192.168.1.1<br>
2   35.00 ms <a href="http://1.net-59-pppoe-pool.kaluga.ru" rel="noopener nofollow ugc">1.net-59-pppoe-pool.kaluga.ru</a> (212.106.59.1)<br>
3   21.00 ms 213.59.232.184<br>
4   29.00 ms 217.107.120.221<br>
5   55.00 ms 72.14.197.6<br>
6   30.00 ms 192.178.241.117<br>
7   24.00 ms 64.233.174.217<br>
8   25.00 ms <a href="http://svo07s07-in-f26.1e100.net" rel="noopener nofollow ugc">svo07s07-in-f26.1e100.net</a> (173.194.177.26)</p>
</details></td><td>2024-09-19T21:22:14.204Z</td></tr><tr><td>yocx_xcoy</td><td><p>Возращаясь к вопросу про android + quic - как тест:<br>
ByeDpi on Android with command line:<br>
<code>--ip 127.0.0.1 --hosts :googlevideo.com --disorder 1 --ttl 8 --tlsrec 0+s -An</code><br>
Chrome Android с выключенным флагом Quic</p>
<p>Всё грузится и показывает через моибльный браузер + через revanced.</p>
<hr>
<p>Аналогично прописываем на роутере в конфиге для ciadpi - не работает ничего.<br>
Аналогично прописываем в батнике <code>byedpi.bat</code> для ciadpi на винде - не работает ничего.</p>
<p><em>Про goodbyedpi - уже писал - с ним всё работает на винде (но это чуть другое решение)</em></p>
<p>В чем подвох? Ведь вроде условия и средства на роутере и андроиде одинаковы, или после настройки на роутере - нужно что-то ещё сделать на устройствах?</p></td><td>2024-09-20T07:04:02.198Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Dhohbr" data-post="189" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/8797f3/48.png" class="avatar"> Dhohbr:</div>
<blockquote>
<p>Не увидел в мануале возможность использования файла конфигурации. Не планируете его реализовать?</p>
</blockquote>
</aside>
<p>Пока в планах нет.</p>
<aside class="quote no-group" data-username="yocx_xcoy" data-post="198" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/65b543/48.png" class="avatar"> yocx_xcoy:</div>
<blockquote>
<p>Аналогично прописываем в батнике <code>byedpi.bat</code></p>
</blockquote>
</aside>
<p>На Windows обычный disorder плохо работает, возможно сработает <code>--split 1 --disorder 2</code> или <code>--disoob 1</code></p>
<aside class="quote no-group" data-username="yocx_xcoy" data-post="198" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/65b543/48.png" class="avatar"> yocx_xcoy:</div>
<blockquote>
<p>В чем подвох? Ведь вроде условия и средства на роутере и андроиде одинаковы, или после настройки на роутере - нужно что-то ещё сделать на устройствах?</p>
</blockquote>
</aside>
<p>Было бы неплохо, если бы вы сделали дамп трафика. Или хотя бы логи (параметр <code>--debug 2</code>) с обоих устройств приложили.</p></td><td>2024-09-20T09:48:03.073Z</td></tr><tr><td>W1T</td><td><p>Эти настройки сейчас не работают. Подскажите рабочие настройки?</p></td><td>2024-09-21T15:04:36.982Z</td></tr><tr><td>3MMM</td><td><p>Установил ByeDPI на Coreelec как написано здесь: <a href="https://4pda.to/forum/index.php?showtopic=990018&amp;st=6280#entry132361119" rel="noopener nofollow ugc">https://4pda.to/forum/index.php?showtopic=990018&amp;st=6280#entry132361119</a><br>
Первый день показывал ютуб с установками по умолчанию:<br>
ExecStart=/storage/.config/ByeDPI/bin/ciadpi-aarch64 --hosts /storage/.config/ByeDPI/bin/russia-blacklist.txt --disorder 2 --auto=none<br>
На второй день перестал показывать. Менял --disorder 2 на --disorder 1 и --disorder 3 и т.д. Не показывает. Поменял --disorder 2 на --split 1 начал показывать. Через день опять не показывает.<br>
Какие настройки  поставить?<br>
На роутере установлен tor. Если в Coreelec в настройках системы указать на этот socks 5 proxy tor то ютуб показывает но перестает работать просмотр через torrserver.<br>
Как бы организовать так чтобы через прокси шло только для выборочных доменов?<br>
Можно ли использовать ByeDPI пока не работает обход просто для заворачивания на другой socks5 proxy по списку --hosts ? Тут: <a href="https://github.com/hufrea/byedpi" class="inline-onebox" rel="noopener nofollow ugc">GitHub - hufrea/byedpi: Bypass DPI</a> про это ничего не нашел, хотя где то вроде видел, сейчас найти не могу (</p></td><td>2024-09-22T09:54:37.593Z</td></tr><tr><td>destiny08-lab(Destiny)</td><td><p>вопрос к автору и знающим:<br>
работает много различных вариантов, например,</p>
<blockquote>
<p>–proto=udp --pf=443 --udp-fake 3</p>
</blockquote>
<p>, но как только (к любому из вариантов) добавляешь <code>disorder</code>, то сразу ютуб перестает работать (проблема с disorder началась на этой неделе).<br>
без изпользования <code>disorder</code> открываются торренты, ютуб работает, а вот ntc.party - нет!<br>
собственно куда копать и что навертеть с ключами/параметрами (используются контейнеры byedpi и tun2socks на микроте) ?</p></td><td>2024-09-22T10:35:49.747Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А если добавить что-нибудь вроде <code> --tlsrec 3</code> или<code> --oob 3</code> или <code>--split 2</code> ?</p></td><td>2024-09-22T11:08:07.545Z</td></tr><tr><td>destiny08-lab(Destiny)</td><td><p>странно, <code>--split 2</code> помогло частично только для chrome desktop (kyber default, quic default).<br>
лису (и desktop и android) кидает на заглушку провайдера, chrome android кидает на заглушку провайдера</p></td><td>2024-09-22T11:12:01.768Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>На заглушку обычно кидает по http. Может, у вас в хроме в настройках включен режим “Только HTTPS”, а в FF нет?</p></td><td>2024-09-22T11:27:42.428Z</td></tr><tr><td>destiny08-lab(Destiny)</td><td><p>это скорее я плохо тестировал, теперь попробовал с перезапусков браузеров.<br>
итоги следующие:<br>
–tlsrec 3 - ютуб не работает, ntc.party работает<br>
–oob 3 - ютуб не работает, ntc.party работает<br>
–split 2 - ютуб работает, ntc.party не работает</p></td><td>2024-09-22T11:29:02.250Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Тогда сделайте разные настройки для разных хостов:<br>
<code>--hosts ntc.txt --oob 3 --auto=none --hosts youtube.txt --split 2</code></p></td><td>2024-09-22T11:32:14.462Z</td></tr><tr><td>destiny08-lab(Destiny)</td><td><p>такой вариант сработал, спасибо.</p></td><td>2024-09-22T11:49:03.596Z</td></tr><tr><td>ZugDuk</td><td><p>Как избавиться от redsocks и сделать прозрачное проксирование прямо на byedpi?</p></td><td>2024-09-22T13:35:30.155Z</td></tr><tr><td>Dhohbr</td><td><p>–transparent, режим прозрачного прокси, если вы про это.</p></td><td>2024-09-22T14:27:42.527Z</td></tr><tr><td>ZugDuk</td><td><p>Кстати redsocks падал без причины.<br>
А по byedpi хелп глянул - ключ -E и ключ -p (порт) нужно использовать, чтобы поднять прозрачный прокси.</p></td><td>2024-09-22T14:36:00.552Z</td></tr><tr><td>Dhohbr</td><td><p>Если заработает, напишите как следали. А то я на миктротике пытался сделать, не заработало. Хотя, я пока глубоко не вникал в это.</p></td><td>2024-09-22T14:44:04.367Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p><a class="mention" href="/u/hufrea">@hufrea</a> <code>--transparent</code> почему-то не работает</p>
<pre><code class="lang-auto">d:\byedpi-14.1-x86_64-w64&gt;ciadpi.exe --ip 127.0.0.1 --port 18081 --transparent --split 1 --disorder 3+s --mod-http=h,d --auto=torst --tlsrec 1+s
ciadpi.exe: unknown option -- transparent
</code></pre></td><td>2024-09-22T17:19:44.575Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="TesterTi" data-post="213" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p><code>ciadpi.exe</code></p>
</blockquote>
</aside>
<p><code>--transparent</code> поддерживается только на Linux.</p></td><td>2024-09-22T17:30:50.220Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Понятно, спасибо!</p></td><td>2024-09-22T17:32:39.833Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="3MMM" data-post="201" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/3/82dd89/48.png" class="avatar"> 3MMM:</div>
<blockquote>
<p>использовать ByeDPI пока не работает обход просто для заворачивания на другой socks5 proxy по списку --hosts ?</p>
</blockquote>
</aside>
<p>Нет. Перенаправление на другой прокси планировалось, чтобы сочетать это с <code>--auto=torst</code>, но было решено не добавлять его. Для обычного фильтра по доменам можно использовать sing-box или другие проекты.</p></td><td>2024-09-22T17:41:18.058Z</td></tr><tr><td>ZugDuk</td><td><p>А хрен знает что такое микротик. Могу написать как сделать для debian</p>
<ol>
<li>файл с правилами iptables (кладется в папку, скрипты из которой запускаются перед поднятием сетевых карт /etc/network/if-pre-up.d/)</li>
</ol>
<pre><code class="lang-auto">iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT
iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X

echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
ipset create vpn_domains hash:ip
iptables -t nat -A PREROUTING -i eth1 -m set --match-set vpn_domains dst -p tcp --dport 80 -j REDIRECT --to-port 31338
iptables -t nat -A PREROUTING -i eth1 -m set --match-set vpn_domains dst -p tcp --dport 443 -j REDIRECT --to-port 31338
</code></pre>
<p>тут eth0 - внешняя сетевая карта, eth1 - внутренняя</p>
<ol start="2">
<li>Конфиг dnsmasq.conf</li>
</ol>
<pre><code class="lang-auto">port=53
interface=eth1
bind-interfaces
</code></pre>
<p>В папку дополнительных конфигов dnsmasq /etc/dnsmasq.d я скачал список доменов для редиректа в byedpi<br>
wget <a href="https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-dnsmasq-ipset.lst" rel="noopener nofollow ugc">https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-dnsmasq-ipset.lst</a><br>
и переименовал их в inside-dnsmasq-ipset.conf (домены в этом файле перечислены уже в формате, понятном dnsmasq)</p>
<ol start="3">
<li>systemd unit для запуска byedpi при загрузке debian<br>
/etc/systemd/system/byedpi.service</li>
</ol>
<pre><code class="lang-auto">[Unit]
Description=byedpi
Requires=network.target
After=network.target network-online.target networking.service
Wants=network-online.target
Conflicts=umount.target
Before=umount.target

[Service]
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
User=byedpi
Type=simple
Restart=on-failure
RestartSec=5
WorkingDirectory=/home/byedpi/
ExecStart=/home/byedpi/ciadpi-x86_64 --conn-ip 192.168.0.1 -E -p 31338 -s1 -At -d2 -At -f-1 -r1+s -An
LimitNPROC=10000
LimitNOFILE=1000000

[Install]
WantedBy=multi-user.target
</code></pre>
<p>тут нужно создать юзера useadd -m byedpi и положить в его домашнюю папку программу ciadpi-x86_64<br>
и включить юнит смстемд systemctl enable byedpi</p>
<p>Общий принцип - с помощью iptables и ipset, в порт, который слушает byedpi, заворачивается трафик к ip адресам, которые узнает dnsmasq из dns ответов.</p>
<p>Просьба к автору. Можешь сделать, чтобы при использовании прозрачного прокси, сокс прокси тоже оставался? Например прозрачный прокси по умолчанию на порту 31338, а сокс5 на порту 1080.</p></td><td>2024-09-23T07:51:04.004Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Пытаюсь перенести из zapret’а стратегию <code>--dpi-desync=fake --dpi-desync-ttl=5</code>.<br>
Получается <code>--fake 1 --ttl 5</code>.<br>
Но не срабатывает, что еще можно подкрутить?</p></td><td>2024-09-24T03:22:04.248Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Попробуйте <code>--fake 0+e --ttl 5</code> или так <code>--fake 517 --ttl 5</code>. Для ютуба можно еще добавить <code>--tls-sni=www.google.com</code> или монструозный фейк отсюда <a href="https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/138" class="inline-onebox">ByeDPI for Android: обсуждение - #138 by hufrea</a></p></td><td>2024-09-24T10:28:26.585Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Это не для YT. Попробую, спасибо.<br>
Что означает <code>0+e</code>? В readme вижу только <code>+s</code> и <code>+h</code>.</p>
<p>Сегодня <code>--split=2</code> отвалился для YT, который еще вчера работал. Методом тыка нашел рабочее:<br>
<code>--split=1 --oob=1 --mod-http=h,d</code></p></td><td>2024-09-24T11:30:06.789Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Acindaz" data-post="220" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Что означает <code>0+e</code>? В readme вижу только <code>+s</code> и <code>+h</code>.</p>
</blockquote>
</aside>
<p>Это недокументированный параметр от автора byedpi hufrea ) <a href="https://ntc.party/t/byedpi-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9057/163" class="inline-onebox">ByeDPI: обсуждение - #163 by hufrea</a></p></td><td>2024-09-24T16:20:34.821Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group quote-modified" data-username="hufrea" data-post="184" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>–proto=udp --pf=443 --udp-fake 3 -An</p>
</blockquote>
</aside>
<p>Подскажите, что еще можно для quic подкрутить. Сегодня цитированного перестало хватать. Пробовал больше 3 указывать - не помогло. У запрета опытным путем для quic добавил <code>--dpi-desync-repeats=4</code>.</p></td><td>2024-09-25T06:41:23.701Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А может вам udp вообще не проксировать? Добавить <code>--no-udp</code> ? Или так не работает? Или же <code>--ttl</code> подобрать от 1 до 10.</p></td><td>2024-09-25T09:26:19.577Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>На андроиде в приложении YT нельзя отключить quic. Начальные 9 секунд видео тянутся с локального сервака по tcp, а последующие куски уже по udp с калифорнийских. Без обхода quic видео просто встает колом после 9 секунд. Перезапуски могу заставить выдаваться последующие куски тоже по tcp с местных серваков, но это не просмотр видео, а тапания каждые пару минут, потому что YT все равно периодически норовит пользовать udp.</p>
<p>Сейчас опять есть затык после 9 секунд для новых (ранее не смотренных) роликов, который, к счастью, лечится одним перезапуском. Но чую я, то ли еще будет.</p></td><td>2024-09-25T10:29:11.408Z</td></tr><tr><td>rewhat</td><td><p>Кто-нибудь пробовал на Windows использовать ByeDPI через nekoray в режиме TUN? Как системный прокси работает, а в режиме TUN - нет. nekoray выдает ошибки типа “wsarecv: An existing connection was forcibly closed by the remote host”.</p></td><td>2024-10-06T17:45:29.069Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="rewhat" data-post="225" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>в режиме TUN</p>
</blockquote>
</aside>
<p>А что это за режим? Как его включить?</p></td><td>2024-10-06T18:26:13.556Z</td></tr><tr><td>rewhat</td><td><p>В Винде создается новый сетевой интерфейс, и весь трафик обрабатывает NekoBox. Ну типа системного прокси, только работает реально на всю систему, т.е даже на программы, которые игнорируют настройки системного прокси, плюс системный прокси вроде как не обрабатывает udp, а tun обрабатывает всё.</p>
<p>Включить можно в NekoBox. Когда открываешь его, справа вверху две галочки есть “Режим TUN” и “Режим системного прокси”.</p>
<p>upd: на винде софтина называется nekoray, а не nekobox</p></td><td>2024-10-06T18:35:53.114Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А, это в некобоксе “Режим TUN”, в не в byedpi, ясно, спасибо.</p></td><td>2024-10-06T18:48:46.615Z</td></tr><tr><td>neutrino</td><td><p><a class="mention" href="/u/hufrea">@hufrea</a><br>
привет, можешь, пожалуйста, подсказать какие параметры аналогичны тем что используются в zapret? да и возможно ли это тут использовать, доку смотрел, но решения пока что так и не нашел, спасибо<br>
<a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-discord-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/11132">Блокировка Discord (обсуждение + обход блокировки)</a></p></td><td>2024-10-09T08:15:18.678Z</td></tr><tr><td>ROBiNGOoD315(RGD_315)</td><td><p>Может кто-то пояснить как включить desync UDP через параметр запуска? Я никак не могу разобраться какой за это отвечает.</p></td><td>2024-10-09T11:52:55.949Z</td></tr><tr><td>rewhat</td><td><p>Вроде как --fake-data может и файл и строку принимать? Можно пример строки?</p></td><td>2024-10-10T00:40:46.305Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group quote-modified" data-username="rewhat" data-post="231" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>–fake-data</p>
</blockquote>
</aside>
<aside class="quote quote-modified" data-post="138" data-topic="9075">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar">
    <a href="https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/138">ByeDPI for Android: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/byedpi/39"><span data-category-id="39" style="--category-badge-color: #231F20; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="ByeDPI and ByeDPIAndroid Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">ByeDPI</span></span></a>
  </div>
  <blockquote>
    hexdump -v -e '"\\" "x" 1/1 "%02X"' tls_clienthello_www_google_com.bin 
<details><summary>Спойлер</summary>--fake-data=":\x16\x03\x01\x02\x87\x01\x00\x02\x83\x03\x03\x5F\x15\x63\xCB\x06\xEA\x1C\xDD\x40\x76\xF5\x8C\x44\x50\x6E\x01\xF3\xA3\x83\xAC\xC2\xE2\x33\x69\x86\xEC\xA9\x67\x21\x30\xBD\x27\x20\xB9\xCE\x31\xFC\x02\xEC\x08\xE5\x25\x9B\x90\x1C\x60\xB0\x1E\x1F\x12\xB5\x38\xE4\xA6\x88\xBB\x24\xAA\x96\x3F\xA6\xC7\xF7\xB4\xDB\x00\x22\x13\x01\x13\x03\x13\x02\xC0\x2B\xC0\x2F\xCC\xA9\xCC\xA8\xC0\x2C\xC0\x30\xC0\x0A\xC0\x09\x…</details>
  </blockquote>
</aside>
</td><td>2024-10-10T10:38:16.645Z</td></tr><tr><td>rewhat</td><td><p>спасибо</p></td><td>2024-10-10T11:30:50.868Z</td></tr><tr><td>Dhohbr</td><td><p>Сегодня перестал yt через byedpi работать.<br>
Использовал --split 2 --fake 1  --ttl 4<br>
Поперебирал ttl, на 7 вроде что-то начало работать, но через какие-то время перестало.<br>
Увеличение split и fake результатов не дают.<br>
Проверил схемы, которые писали тут в последних сообщениях, тоже не заработали.<br>
Есть какой-то способ узнать как именно происходит блокировка? Желательно под линукс.</p></td><td>2024-10-10T13:52:03.180Z</td></tr><tr><td>danaYatsuta</td><td><p>У меня все еще работает просто <code>--disorder 1</code>, тоже на линуксе.</p></td><td>2024-10-10T14:14:48.451Z</td></tr><tr><td>Dhohbr</td><td><p>disorder тоже не помогает.<br>
Заработало на схеме от <a class="mention" href="/u/shinodem">@shinodem</a> в соседней ветке</p><aside class="quote" data-post="190" data-topic="9075">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/shinodem/48/10497_2.png" class="avatar">
    <a href="https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/190">ByeDPI for Android: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/byedpi/39"><span data-category-id="39" style="--category-badge-color: #231F20; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="ByeDPI and ByeDPIAndroid Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">ByeDPI</span></span></a>
  </div>
  <blockquote>
    -s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An 
на билайне пока работает
  </blockquote>
</aside>
</td><td>2024-10-10T15:32:30.436Z</td></tr><tr><td>W1T</td><td><p>Куда это вводить если на телефоне? ps  разобрался.</p></td><td>2024-10-10T21:06:48.294Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="ByeDPI for Android: обсуждение" data-post="190" data-topic="9075">
<div class="title">
<div class="quote-controls"></div>
<a href="https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/190">ByeDPI for Android: обсуждение</a></div>
<blockquote>
<p>-s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An</p>
</blockquote>
</aside>
<p>Премного благодарен</p></td><td>2024-10-12T11:13:05.027Z</td></tr><tr><td>D4NICKY(D4NICKY)</td><td><p>Не понятно почему на винде параметр -b 500 обеспечивает работу ютуба. При чем интересно если прокси завернуть с поддержкой UDP например воткнуть в приложение через Netch то все работает без -b 500. очень странный прикол.</p></td><td>2024-10-12T19:40:52.435Z</td></tr><tr><td>wabixa</td><td><p>Здравствуйте!<br>
Скажите, пожалуйста, в чём разница между параметрами “<strong>–no-udp</strong>” и “<strong>–proto t,h</strong>”? Ведь в обоих случаях UDP исключается из обработки?<br>
Если ByeDPI используется только как socks для браузера (обработка quic при этом <strong>не</strong> требуется) - причём только в режиме <strong>–auto</strong>, то нужно ли включать вышеуказанные параметры, дабы исключить обработку какого-либо UDP-трафика?</p></td><td>2024-10-13T06:41:10.706Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="wabixa" data-post="240" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/74df32/48.png" class="avatar"> wabixa:</div>
<blockquote>
<p>Ведь в обоих случаях UDP исключается из обработки?</p>
</blockquote>
</aside>
<p>Нет, с <code>–proto t,h</code> для UDP используется неявно созданная пустая группа, он продолжит проксироваться.</p>
<aside class="quote no-group" data-username="wabixa" data-post="240" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/74df32/48.png" class="avatar"> wabixa:</div>
<blockquote>
<p>Если ByeDPI используется только как socks для браузера (обработка quic при этом <strong>не</strong> требуется) - причём только в режиме <strong>–auto</strong>, то нужно ли включать вышеуказанные параметры, дабы исключить обработку какого-либо UDP-трафика?</p>
</blockquote>
</aside>
<p>Нет, браузеры пока проксировать UDP не умеют, насколько я в курсе.</p></td><td>2024-10-13T17:24:10.819Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="hufrea" data-post="241" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Нет, браузеры пока проксировать UDP не умеют, насколько я в курсе.</p>
</blockquote>
</aside>
<p>Возможно, Chrome <a href="https://www.chromium.org/quic/playing-with-quic/#proxying-requests" rel="noopener nofollow ugc">умеет</a>:</p>
<blockquote>
<p>–proxy-server=quic://www.example.org:6121</p>
</blockquote></td><td>2024-10-13T17:32:11.987Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Acindaz" data-post="242" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>–proxy-server=quic://www.example.org:6121</p>
</blockquote>
</aside>
<p>Через QUIC прокси возможно, но я подразумевал UDP через SOCKS5, который предоставляет программа.<br>
<a href="https://chromium.googlesource.com/experimental/chromium/src/+/refs/tags/79.0.3945.46/net/docs/proxy.md#SOCKSv5-proxy-scheme" class="onebox" target="_blank" rel="noopener nofollow ugc">https://chromium.googlesource.com/experimental/chromium/src/+/refs/tags/79.0.3945.46/net/docs/proxy.md#SOCKSv5-proxy-scheme</a></p>
<blockquote>
<p>In Chrome SOCKSv5 is only used to proxy TCP-based URL requests. It cannot be used to relay UDP traffic.</p>
</blockquote></td><td>2024-10-13T17:42:39.138Z</td></tr><tr><td>Sanek184</td><td><p>Починил долгое открытие видео на ютубе. Раньше работало с -o 2, теперь добавив -s 25+s ( -o 2 -s 25+s) снова все отлично начало работать. Может кому поможет.</p></td><td>2024-10-14T05:55:23.726Z</td></tr><tr><td>us3r</td><td><p>На linux работает такой крокодил:</p>
<p><code>-b 900  --disorder -2 --tls-sni=www.mercusys.com  --fake-offset 7 --oob-data yez -Y -s 1 -s 4+s -s 1 -q 5 --oob 155+s --fake 35+s --md5sig --fake-offset 20 --tlsrec 3+s --udp-fake 500 --mod-http=h,d,r --oob-data MNOGORAZNYHBUKVVIDEONAYOUTUBE --fake-offset 999 --fake-data=":https://www.youtube.com/@Abcde" --fake 1000+s --ttl 5  --no-udp --auto-mode 1 --timeout 20 --ip-opt 5  --fake-data ":GET /ds-site/images/banners/bl-black-mobile-new.png HTTP/1.1"   --ip-opt=":MNOGORAZNYHBUKVVIDEONAYOUTUBE"</code></p>
<p>На android с таким конфигом не запускается VPN, но если половину этого выкинуть, тоже работает.<br>
(вообще не понимаю как эта магия работает)</p>
<p>В --tls-sni=<a href="http://www.mercusys.com" rel="noopener nofollow ugc">www.mercusys.com</a> пробовал указывать разные сайты, в том числе .ru, вроде как тоже работает.</p></td><td>2024-10-14T06:40:48.592Z</td></tr><tr><td>Sanek184</td><td><aside class="quote no-group" data-username="us3r" data-post="245" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/u/8edcca/48.png" class="avatar"> us3r:</div>
<blockquote>
<p>но если половину этого выкинуть, тоже работает</p>
</blockquote>
</aside>
<p>потому-что из всей этой абракадабры нужно всего пару аргументов для того чтобы работало.</p></td><td>2024-10-14T07:08:13.699Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group quote-modified" data-username="us3r" data-post="245" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/u/8edcca/48.png" class="avatar"> us3r:</div>
<blockquote>
<p>–udp-fake 500 … --no-udp</p>
</blockquote>
</aside>
<p>И это только вершина абсурда этого “крокодила”. <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="Sanek184" data-post="244" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>-o 2 -s 25+s</p>
</blockquote>
</aside>
<p>У меня работает <code>-s1 -q1 -Y -Mh,d</code>, но ваш тоже сработал.</p></td><td>2024-10-14T07:58:58.778Z</td></tr><tr><td>Sanek184</td><td><p>такая конфигурация будет отменять сплит, -s 1 -q 3 кстати тоже норм заработало, но непонятно будет ли ретранcлировать disoob все пакеты в Win как это делает disorder</p></td><td>2024-10-14T08:14:39.778Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="Sanek184" data-post="248" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>такая конфигурация будет отменять сплит</p>
</blockquote>
</aside>
<p>Если я правильно понимаю доки, то <code>-s1 -q1</code> отправит “rutracker” как “r” + “utracker” + “a”, а <code>-q1</code> без сплита отправит “utrackera” + “r”. Это на андроиде. И на деле <code>-s1 -q1</code> срабатывает, а <code>-q1</code> нет.</p></td><td>2024-10-14T08:47:53.216Z</td></tr><tr><td>Sanek184</td><td><p>Действительно при -s 1 -q 1 отмены сплита нет. Значит можно так прописывать<br>
НО. В Windows disorder ретранслирует весь пакет заново (про это писал сам автор), с disoob похоже тоже самое происходит. Поэтому лично я пытаюсь найти рабочий вариант без disorder и disoob, но работает - да.</p></td><td>2024-10-14T09:03:38.773Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="Acindaz" data-post="249" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>а <code>-q1</code> без сплита отправит “utrackera” + “r”.</p>
</blockquote>
</aside>
<p>“utracker” + “ra”.</p>
<aside class="quote no-group" data-username="Sanek184" data-post="250" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/d26b3c/48.png" class="avatar"> Sanek184:</div>
<blockquote>
<p>рабочий вариант без disorder и disoob</p>
</blockquote>
</aside>
<p><code>-o 0 -s 1</code>?</p></td><td>2024-10-14T10:30:25.330Z</td></tr><tr><td>Sanek184</td><td><aside class="quote no-group" data-username="hufrea" data-post="251" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p><code>-o 0 -s 1</code>?</p>
</blockquote>
</aside>
<p>Попробовал, также открывает долго видео (как стало с -o 2), только c -o 2 -s 25+s отлично, меньше пробовал значение - не срабатывает. Пока на таком варианте и остановился.</p></td><td>2024-10-14T11:03:10.511Z</td></tr><tr><td>mark17(Марк)</td><td><p>Спасибо за прогу, работает, но есть предложение сделать выбор смещения разбиения по доменному имени, не включая поддомен, так лучше работает, видимо ТСПУ каждый фрагмент пакета брутфорсит на наличие совпадений до сборки. Можно конечно как Sanek184 предложил, указывать 25+s смещение, но это только для гуглвидео наверное подойдет с его длинными поддоменами.<br>
У себя я сделал, правда колхозно, я не программист, но если кому надо то под спойлер убрал:</p>
<details>
<summary>
Спойлер</summary>
<p>в desync.c функция desync:</p>
<p>заменить</p>
<p>if ((len = parse_tls(buffer, n, &amp;host))) {<br>
type = IS_HTTPS;<br>
}</p>
<p>на</p>
<p>if ((len = parse_tls(buffer, n, &amp;host))) {<br>
type = IS_HTTPS;</p>
<pre><code>/*   temporary sni fix   */
int dotcount = 0;
char *sni_full = host;
host += len;
do {
    host--;
    dotcount += (*host == '.');
} while (dotcount &lt; 2 &amp;&amp; host &gt;= sni_full);
host++;
/*   -----------------   */
</code></pre>
<p>}</p>
</details>
<p>Как времянка сойдет, если кому надо, а так конечно, хотелось бы такую опцию.</p></td><td>2024-10-14T14:50:00.019Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="mark17" data-post="253" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/22d042/48.png" class="avatar"> mark17:</div>
<blockquote>
<p>сделать выбор смещения разбиения по доменному имени, не включая поддомен</p>
</blockquote>
</aside>
<p>Думаю это будет лишним. Но можно добавить смещение от конца домена и писать что-то вроде <code>--split -5+se</code>.</p></td><td>2024-10-14T18:41:50.230Z</td></tr><tr><td>MiZantr0pe</td><td><p>Дай бог вам здоровья, у тоже заработало с этим конфигом. NekoBox 1.2.9, плагин byedpi, оператор wi-fire Орловская область.</p></td><td>2024-10-14T18:59:24.570Z</td></tr><tr><td>Sanek184</td><td><p>Если Вам не сложно реализуйте такой вариант (сплит с конца домена), такой сплит в нынешних способах очень нужная опция аргумента</p></td><td>2024-10-16T05:30:05.462Z</td></tr><tr><td>3km(Karim)</td><td><p>Добрый день!<br>
Раньше с -o 2 всё работало, заменил на  -o 2 -s 25+s не помогло((<br>
Как ие еще варианты можно попробовать?</p></td><td>2024-10-16T07:03:50.003Z</td></tr><tr><td>hufrea</td><td><p>Еще во вчерашнем коммите. Можете собрать и тестировать.</p><aside class="onebox githubcommit" data-onebox-src="https://github.com/hufrea/byedpi/commit/b95926d9d2dfee8a87c20105f044cfdb2315dd61">
  <header class="source">

      <a href="https://github.com/hufrea/byedpi/commit/b95926d9d2dfee8a87c20105f044cfdb2315dd61" target="_blank" rel="noopener nofollow ugc">github.com/hufrea/byedpi</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/hufrea/byedpi/commit/b95926d9d2dfee8a87c20105f044cfdb2315dd61" target="_blank" rel="noopener nofollow ugc">Add more offset flags</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2024-10-15" data-time="01:33:20" data-timezone="UTC">01:33AM - 15 Oct 24 UTC</span>
      </div>

      <div class="user">
        <a href="" rel="noopener">
          <img alt="" src="" class="onebox-avatar-inline" width="20" height="20">
          
        </a>
      </div>

      <div class="lines" title="changed 3 files with 78 additions and 44 deletions">
        <a href="https://github.com/hufrea/byedpi/commit/b95926d9d2dfee8a87c20105f044cfdb2315dd61" target="_blank" rel="noopener nofollow ugc">
          <span class="added">+78</span>
          <span class="removed">-44</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-16T08:39:46.740Z</td></tr><tr><td>yocx_xcoy</td><td><p>Помогите пожалуйста разобраться:</p>
<ol>
<li>
<p>поставил чистый openwrt</p>
</li>
<li>
<p>в сети роутер не один, у него стоит фикс ip (192.168.1.33) и DHCP вырублен (устройствам ip’ы выдает первый (главный) роутер)</p>
</li>
<li>
<p>накатил отсюда сборку <em>ByeDPI-OpenWrt</em> <a href="https://github.com/spvkgn/ByeDPI-OpenWrt/releases/tag/v0.14.1-23.05" class="inline-onebox" rel="noopener nofollow ugc">Release v0.14.1 for OpenWrt 23.05 · spvkgn/ByeDPI-OpenWrt · GitHub</a> (закинул в /tmp и установил через консоль)</p>
</li>
<li>
<p><strong>на android через аппку ByeDPI 1.2.0</strong> работает сейчас такой конфиг (для ютуба и данного форума):<br>
<code>-s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An</code></p>
</li>
<li>
<p>зашел в конфиг на роутере - там дефолт такой (и он не работает):<br>
<code>option cmd_opts '--split 1 --disorder 3+s --mod-http=h,d --auto=torst --tlsrec 1+s'</code><br>
меняю его на:<br>
<code>option cmd_opts '-s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An'</code></p>
</li>
<li>
<p>делаю restart через System - Startup</p>
</li>
<li>
<p>проверяю System Log на наличие каких-то ошибок от ciadpi - ничего нет</p>
</li>
<li>
<p>проверяю Processes - там есть:<br>
<code>2314	nobody	/usr/bin/ciadpi -s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An</code></p>
</li>
<li>
<p>проверяю через консоль: <code>netstat -tulpn</code> и там есть строка:<br>
<code>tcp        0      0 0.0.0.0:1080            0.0.0.0:*               LISTEN      2314/ciadpi</code></p>
</li>
</ol>
<p>НО доступа на устройствах, что подключены к этому роутеру к ютубу и тд. - нет. как будто оно не работает, хотя по всем данным выше - оно активно.</p>
<p>Куда копать и что можно попробовать сделать?</p>
<p>Спасибо!</p>
<hr>
<p>p.s. пробовал писать в конфиг так:<br>
<code>option cmd_opts '--split 1 --disoob 1 --drop-sack --auto r --split 5 --oob 1+s --auto t --fake -1 --tlsrec 1+s --auto s --split 1 --oob 1+s --split -1 --auto n'</code></p>
<p>но я так понимаю это необязательно и можно писать короткую версию как выше (как для Android) - верно?)</p>
<p>Так же пробовал добавлять <code>--ip 127.0.0.1</code> - ничего не меняется.</p></td><td>2024-10-16T15:56:38.575Z</td></tr><tr><td>holy-filipp(Filipp)</td><td><p>Здарова ребята. Имеется роутер с OpenWRT, на нём стоит byedpi версии 14.1. Также стоит tun2socks и он настроен на подключение к socks5 от byedpi. В firewall прописано правило для перенаправления траффика из LAN в tun0. Все работало до сегодняшнего дня. Но ночью в ТГ пришло сообщение об изменении IPшника, я сразу понял что снова пропатчили ТСПУ. Перестал работать Ютуб с Дискордом (Дискорд до этого работал без обходов).<br>
Tl;Dr<br>
Нужны новые параметры для byedpi (я не особо разбираюсь как настроить обход под индивидуальный случай), и желательно, если возможно, чтобы Войс дискорда тоже был рабочим через byedpi. Всем добра</p></td><td>2024-10-17T11:13:22.532Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group quote-modified" data-username="hufrea" data-post="258" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Еще во вчерашнем коммите. Можете собрать и тестировать.<br>
<a href="https://github.com/hufrea/byedpi/commit/b95926d9d2dfee8a87c20105f044cfdb2315dd61" class="inline-onebox" rel="noopener nofollow ugc">Add more offset flags · hufrea/byedpi@b95926d · GitHub</a></p>
</blockquote>
</aside>
<p>Спасибо! нужная опция.</p>
<aside class="quote no-group" data-username="holy-filipp" data-post="260" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/holy-filipp/48/11293_2.png" class="avatar"> holy-filipp:</div>
<blockquote>
<p>Также стоит tun2socks и он настроен на подключение к socks5 от byedpi</p>
</blockquote>
</aside>
<p>в новых версия есть прозрачный прокси если что, можно и без tun2socks обойтись.</p>
<aside class="quote no-group" data-username="holy-filipp" data-post="260" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/holy-filipp/48/11293_2.png" class="avatar"> holy-filipp:</div>
<blockquote>
<p>Нужны новые параметры для byedpi</p>
</blockquote>
</aside>
<p>попробуйте --fake 1 --disoob 3+s --ttl 3<br>
на ростелекоме в нижнем новгороде youtube работает, правда ttl надо вам подбирать свой, насчет дискорда не могу подсказать, это вам надо по на гитхабе наверное полазить в обсуждениях.</p></td><td>2024-10-17T12:36:03.418Z</td></tr><tr><td>holy-filipp(Filipp)</td><td><p>Спасибо за ответ, параметры рабочие, даже с таким же ttl. Можете поподробнее про прозрачный прокси, как его настроить на openwrt?</p></td><td>2024-10-17T17:05:28.969Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="hufrea" data-post="258" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Еще во вчерашнем коммите. Можете собрать и тестировать.</p>
</blockquote>
</aside>
<p>А как самому собрать exe  с исходников гихаба? Может кто-нибудь дать инструкцию для чайников?</p></td><td>2024-10-17T17:12:12.559Z</td></tr><tr><td>spv82</td><td><p>Можно форкнуть и в Actions собрать. Для линукса такое настроил <a href="https://github.com/spvkgn/byedpi/releases" class="inline-onebox" rel="noopener nofollow ugc">Releases · spvkgn/byedpi · GitHub</a> , для винды там еще проще (см. в readme). Сам пока с телефона, неудобно это сделать.</p></td><td>2024-10-17T17:58:23.400Z</td></tr><tr><td>yocx_xcoy</td><td><aside class="quote no-group" data-username="mark17" data-post="261" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/22d042/48.png" class="avatar"> mark17:</div>
<blockquote>
<p>попробуйте --fake 1 --disoob 3+s --ttl 3</p>
</blockquote>
</aside>
<p>Подскажите, пробую эти параметры подсунуть в <strong>byedpi.bat</strong> и после запустить его (не запуская сервисом) - открывается командная строка и всё.<br>
Ютуб не работает.</p>
<p>Может как-то можно проверить что byedpi работает?</p>
<p>Спасибо!</p></td><td>2024-10-17T18:33:44.568Z</td></tr><tr><td>rewhat</td><td><p>а вы прокси прописали?</p></td><td>2024-10-17T18:35:46.242Z</td></tr><tr><td>yocx_xcoy</td><td><p>вот тут как раз вопрос - где его и какой прописывать?<br>
пробовал на win10 в настройках писать <code>socks5://127.0.0.1 port 9090</code><br>
но не понимаю помогает ли.</p>
<p>а второй момент - в рамках винды - это тест, далее хочу его на роутере openwrt запустить-настроить - там я вот не очень понимаю, нужно ли где-то прокси прописывать?</p>
<p>Подскажите пожалуйста.</p></td><td>2024-10-17T19:53:52.365Z</td></tr><tr><td>rewhat</td><td><p>В роутерах не шарю, но на винде сокс так можно прописать: <a href="https://superuser.com/a/1618473" class="inline-onebox">How can I set socks proxy on windows? - Super User</a> (либо не морочиться, и использовать nekoray например, ибо так удобнее)</p>
<p>И еще у вас порт неправильный:</p>
<pre><code class="lang-auto">-i, --ip &lt;ip&gt;
    Прослушиваемый IP, по умолчанию 0.0.0.0

-p, --port &lt;num&gt;
    Прослушиваемый порт, по умолчанию 1080
</code></pre>
<p>Т.е если не используете -i, -p параметры, то прописывайте 127.0.0.1, а порт 1080.</p></td><td>2024-10-17T19:56:47.916Z</td></tr><tr><td>yocx_xcoy</td><td><aside class="quote no-group" data-username="rewhat" data-post="268" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>В роутерах не шарю, но на винде сокс так можно прописать</p>
</blockquote>
</aside>
<p>Спасибо большое!<br>
Да, есть вариант прописать как по ссылке + там же есть для винды10 в прокси настройках так:<br>
<code>socks=127.0.0.1</code></p>
<p>Да, про порт - согласен - те конфигурации которые выдает чеккер порт иной, в итоге на винде настроил и указал так:<br>
<code>socks=127.0.0.1 | port 18081</code></p>
<p>Заработало.</p>
<hr>
<p>Теперь бы понять как такое настроить на openwrt - что я ставил и как, <a href="https://ntc.party/t/byedpi-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9057/259">вот тут</a></p>
<p>Понимаю что по роутерам это не к вам - но может кто подскажет где и что там дополнительно прописать, чтобы на роутере всё заработало, раз на винде всё заработало с указанием прокси.</p>
<hr>
<p>В рамках роутера, я думал, что если я там НЕ указываю порт и не указываю ИП, то оно висит на 0.0.0.0 и это как бы будет доступно всем клиентам кто подключен к роутеру - но как будто это не так.</p>
<p>Вот хочу понять а как тогда там сделать надо?</p></td><td>2024-10-17T20:12:24.528Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group" data-username="holy-filipp" data-post="262" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/holy-filipp/48/11293_2.png" class="avatar"> holy-filipp:</div>
<blockquote>
<p>Можете поподробнее про прозрачный прокси, как его настроить на openwrt?</p>
</blockquote>
</aside>
<p>вот <a href="https://github.com/hufrea/byedpi/discussions/195" rel="noopener nofollow ugc">тут</a> почитайте, правда там с прозрачным прокси с дискордом судя по всему проблемы, для вас скорее всего не подойдет.</p>
<aside class="quote no-group" data-username="TesterTi" data-post="263" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>А как самому собрать exe с исходников гихаба? Может кто-нибудь дать инструкцию для чайников?</p>
</blockquote>
</aside>
<p>Надо скачать mingw и make, посмотрите в ютубе как это сделать, а потом просто откройте в папке с исходниками консоль и вбейте make windows.</p></td><td>2024-10-17T20:13:39.919Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Можно добавить параметр  <code>--debug 1</code> или  <code>--debug 2</code>, тогда все будет логироваться. А насчет роутера, если что  - то можно его заменить хотспотом на windows - подробнее по ссылке <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/741" class="inline-onebox">Окологудбайдипиайный флуд - #741 by TesterTi</a></p></td><td>2024-10-17T21:20:44.790Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="mark17" data-post="270" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/22d042/48.png" class="avatar"> mark17:</div>
<blockquote>
<p>Надо скачать mingw и make, посмотрите в ютубе как это сделать, а потом просто откройте в папке с исходниками консоль и вбейте make windows.</p>
</blockquote>
</aside>
<p>Огромное спасибо! Пойду разбираться</p>
<aside class="quote no-group" data-username="spv82" data-post="264" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>Можно форкнуть и в Actions собрать. Для линукса такое настроил <a href="https://github.com/spvkgn/byedpi/releases">Releases · spvkgn/byedpi · GitHub </a> , для винды там еще проще (см. в readme). Сам пока с телефона, неудобно это сделать.</p>
</blockquote>
</aside>
<p>И вам спасибо, но сначала попробую с mingw и make</p></td><td>2024-10-17T21:21:11.743Z</td></tr><tr><td>yocx_xcoy</td><td><aside class="quote no-group" data-username="TesterTi" data-post="271" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Можно добавить параметр <code>--debug 1</code> или <code>--debug 2</code>, тогда все будет логироваться. А насчет роутера, если что - то можно его заменить хотспотом на windows - подробнее по ссылке <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/741">Окологудбайдипиайный флуд - #741 by TesterTi</a></p>
</blockquote>
</aside>
<p>Про логи понимаю, спасибо.<br>
А про хотспот - так у меня задача завести byedpi на роутере, где он уже стоит, чтобы не запускать его на каждом устройстве.</p>
<p>Вот хочу понять, почему он не хочет работать там или как там прокси прописать, аналогично винде - где не работало, пока не прописал.</p></td><td>2024-10-17T21:26:14.770Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Возможно тут есть что полезное <a href="https://github.com/hufrea/byedpi/discussions/65" class="inline-onebox">Поднять на роутере Keenetic · hufrea/byedpi · Discussion #65 · GitHub</a></p></td><td>2024-10-17T21:33:51.164Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="272" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Огромное спасибо! Пойду разбираться</p>
</blockquote>
</aside>
<p>кстати make не обязательно устанавливать, он в mingw уже есть, я что-то забыл. mingw32-make windows команда.</p>
<aside class="quote no-group" data-username="yocx_xcoy" data-post="273" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/65b543/48.png" class="avatar"> yocx_xcoy:</div>
<blockquote>
<p>Вот хочу понять, почему он не хочет работать там или как там прокси прописать, аналогично винде - где не работало, пока не прописал.</p>
</blockquote>
</aside>
<p>для того чтобы программа заработала, на нее надо траффик направить через iptables/nftables либо через прозрачный режим, либо с использованием сторонних программ, если не ответит никто, то завтра вечером напишу, там с nftables не так тривиально, как я думал, меня вон человек спросил, я и задумался, сам я через netfilter-queue сижу с другой программой, там всего одна строчка в nft.</p></td><td>2024-10-17T22:03:17.614Z</td></tr><tr><td>yocx_xcoy</td><td><aside class="quote no-group" data-username="TesterTi" data-post="274" data-topic="9057" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Возможно тут есть что полезное <a href="https://github.com/hufrea/byedpi/discussions/65" rel="noopener nofollow ugc">Поднять на роутере Keenetic · hufrea/byedpi · Discussion #65 · GitHub </a></p>
</blockquote>
</aside>
<p>а <code>--transparent</code> не поможет, если указать в роутере?</p>
<p>судя по ссылке выше (спасибо за неё) - то по умолчанию на роутере оно идёт на 0.0.0.0 и вот в моем понимании, это значит что все клиенты подключенные к нему - будут через него сидеть, но судя по не рабочему ютубу - это не так.</p></td><td>2024-10-17T22:03:22.450Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="yocx_xcoy" data-post="276" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/65b543/48.png" class="avatar"> yocx_xcoy:</div>
<blockquote>
<p>а <code>--transparent</code> не поможет, если указать в роутере?</p>
</blockquote>
</aside>
<p>У меня нет роутера, не знаю. Проверьте, может и поможет.</p></td><td>2024-10-17T22:30:58.059Z</td></tr><tr><td>spv82</td><td><p>Добавил сборку для винды <a href="https://github.com/spvkgn/byedpi/releases/download/latest/byedpi-6dca571-x86_64-w64.zip" rel="noopener nofollow ugc">https://github.com/spvkgn/byedpi/releases/download/latest/byedpi-6dca571-x86_64-w64.zip</a><br>
Также там есть для 32-бит (i686-w64)</p></td><td>2024-10-18T06:07:11.919Z</td></tr><tr><td>Sanek184</td><td><p>Спасибо за компилирование. -o 2 <strong>-s -5+se</strong> работает отлично</p></td><td>2024-10-18T07:21:19.039Z</td></tr><tr><td>yocx_xcoy</td><td><p>Подскажите, а какие есть простые варианты настройки прокси, после настройки byedpi на openwrt? (чтобы все клиенты шли через него)</p></td><td>2024-10-18T07:47:26.280Z</td></tr><tr><td>holy-filipp(Filipp)</td><td><aside class="quote no-group" data-username="mark17" data-post="270" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/22d042/48.png" class="avatar"> mark17:</div>
<blockquote>
<p>вот <a href="https://github.com/hufrea/byedpi/discussions/195" rel="noopener nofollow ugc">тут </a> почитайте, правда там с прозрачным прокси с дискордом судя по всему проблемы, для вас скорее всего не подойдет.</p>
</blockquote>
</aside>
<p>Спасибо, я в общем забил на прозрачный прокси, буду также через tun2socks сидеть.</p>
<p>К слову войс дискорда фиксится с помощью <code>--udp-fake 1</code>. Ну и в <code>hosts</code> нужно ещё домены дискорда добавить.</p>
<p>У меня другая проблема появилась, вчера конфиг <code>--fake 1 --disoob 3+s --ttl 3</code> работал на ютуб. Сегодня он не работает на youtube, зато работает на дс. То есть с дискордом всё хорошо, войс работает, он грузится, а у ютуба не грузятся именно видео. В devtoolsах я смотрю на запросы, videoplayback создаются и потом у них появляется статус <code>cancelled</code>. В логах byedpi вот такое:</p>
<pre><code class="lang-auto">Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: host: rr8---sn-pivhx-n8vz.googlevideo.com (127)
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: split: pos=0-1 (1), m: DESYNC_FAKE
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: split: pos=1-130 (129), m: DESYNC_DISOOB
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: send: pos=130-1809
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: desync params index: 1
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: host: fonts.gstatic.com (154)
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: accept: fd=45
Fri Oct 18 09:28:21 2024 daemon.err ciadpi[11281]: new conn: fd=46, addr=85.112.121.48:443
</code></pre>
<p>В целом ничего выдающегося.<br>
Помогите пожалуйста пофиксить эту проблему, у меня уже голова кружится <img src="https://ntc.party/images/emoji/twitter/woozy_face.png?v=12" title=":woozy_face:" class="emoji" alt=":woozy_face:" loading="lazy" width="20" height="20"></p></td><td>2024-10-18T09:37:10.638Z</td></tr><tr><td>danaYatsuta</td><td><p>Прошу прощения если в этой теме уже где-то есть ответ на этот вопрос, я ее прочитала с даты блокировки дискорда и так и не нашла.</p>
<p>Подскажите пожалуйста, в конечном итоге есть какой-нибудь способ заставить войс дискорда работать с ByeDPI на линуксе? Пробовала <code>--udp-fake</code> и заходила на дискорд как с веб клиента на firefox который настроен на использование прокси, так и линукс клиента запущенного через <code>discord --proxy-server=socks5://127.0.0.1:1080</code>, все безрезультатно. Нужен ли еще какой-то софт или через ByeDPI на линуксе заставить голос работать в принципе невозможно?</p></td><td>2024-10-18T10:05:09.711Z</td></tr><tr><td>hufrea</td><td><p><a class="mention" href="/u/holy-filipp">@holy-filipp</a> <a class="mention" href="/u/danayatsuta">@danaYatsuta</a><br>
Почему бы вам не использовать Zapret? Это проще, чем возиться с tun2socks.</p></td><td>2024-10-18T10:20:02.467Z</td></tr><tr><td>holy-filipp(Filipp)</td><td><p>у меня сейчас упирается всё чисто в настройку byedpi, вся тех часть работает уже</p></td><td>2024-10-18T10:20:41.832Z</td></tr><tr><td>danaYatsuta</td><td><p>Честно говоря просто устала возиться и изучать новый софт лол. Но если через запрет будет таки легче, то придется изучать. Спасибо за ответ.</p></td><td>2024-10-18T10:22:42.207Z</td></tr><tr><td>Sanek184</td><td><p>Кстати. Если кому достаточно в Windows, чтобы было прописано в системном прокси, то socks5 прописывается именно так (не просто socks) <a href="http://socks=127.0.0.1" rel="noopener nofollow ugc">http://socks=127.0.0.1</a>:порт - тогда все приложения,что умеют брать из системного прокси настройки будут работать и на socks5.</p></td><td>2024-10-18T10:47:20.035Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Круто, спасибо!</p></td><td>2024-10-18T15:27:41.963Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="holy-filipp" data-post="281" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/holy-filipp/48/11293_2.png" class="avatar"> holy-filipp:</div>
<blockquote>
<p>У меня другая проблема появилась, вчера конфиг <code>--fake 1 --disoob 3+s --ttl 3</code> работал на ютуб. Сегодня он не работает на youtube, зато работает на дс. То есть с дискордом всё хорошо, войс работает, он грузится, а у ютуба не грузятся именно видео.</p>
</blockquote>
</aside>
<p>Попробуйте менять <code>--disoob</code> на<code> --oob/--split/--tlsrec</code>, менять 3+s на 1+s 2+s и т.д  а также добавить<code> --tls-sni=www.google.com</code> (или <a href="http://drive.google.com">drive.google.com</a> или <a href="http://translate.google.ru">translate.google.ru</a> т.е. на адрес любого доступного сервиса гугла) Плюс поиграйтесь c  --ttl от 1 до 10,<br>
Если не поможет, прогоните скрипт гудчека для запрета <a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880" class="inline-onebox">GoodCheck - блокчек-скрипт для GoodbyeDPI, Zapret, ByeDPI</a><br>
или блокчек для запрета <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck</a> для <a href="http://rr8---sn-pivhx-n8vz.googlevideo.com">rr8---sn-pivhx-n8vz.googlevideo.com</a><br>
Будет примерно понятно , какие параметры рабочие и сможете подобрать аналог на byedpi</p></td><td>2024-10-18T15:37:48.945Z</td></tr><tr><td>irregular-circle</td><td><p>Да, есть <a href="https://github.com/hufrea/byedpi/discussions/195" rel="noopener nofollow ugc">способ</a> заставить войс чат дискорда работать, с запуском byedpi от другого юзера чтобы избежать бесконечной петли трафика и использованием tun2socks или hevsocks5tunnel, но Zapret наверное проще. Если запускать дискорд с флагом --proxy-server, то он просто не будет проксировать udp трафик, нужно его заворачивать в прокси вручную.</p></td><td>2024-10-19T03:27:01.803Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group" data-username="holy-filipp" data-post="281" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/holy-filipp/48/11293_2.png" class="avatar"> holy-filipp:</div>
<blockquote>
<p>У меня другая проблема появилась, вчера конфиг <code>--fake 1 --disoob 3+s --ttl 3</code> работал на ютуб. Сегодня он не работает на youtube, зато работает на дс.</p>
</blockquote>
</aside>
<p>могу только посоветовать собрать самому или скачать сборку, поддерживающую указание смещения сплита с конца sni. тогда либо --disoob -5+se пробовать (без фейка или с фейком) или Sanek184 скидывал свои параметры -o 2 -s -5+se.</p></td><td>2024-10-19T15:40:15.189Z</td></tr><tr><td>3km(Karim)</td><td><p>Добрый днень!<br>
Хочу вынести домены из строки в отдельный файл такого плана -K t -H youtube.txt<br>
Не могу понять где в Linux должен распологаться этот файл?</p></td><td>2024-10-19T21:22:04.973Z</td></tr><tr><td>us3r</td><td><p>Все как везде) :</p>
<ul>
<li>либо в каталоге с запускаемым приложением, тода необходимо указать только наименование файла:<br>
<code>./byedpi -i 127.0.0.1 -p 1080 -s1 --hosts youtube.txt</code></li>
<li>либо в произвольном каталоге, главное чтобы у приложения был достук к файлу:<br>
<code>./byedpi -i 127.0.0.1 -p 1080 -s1 --hosts "/home/user_name/byedpi/youtube.txt"</code></li>
</ul>
<p>Не знают только, в каком порядке, в списке параметров должны указываться  --hosts, если их более одного и необходимо чтобы к каждому файлу применялись свои правила.</p>
<p><code>./byedpi -s1 --hosts youtube.txt    -s2 --hosts ntc.txt</code><br>
Или<br>
<code>./byedpi --hosts youtube.txt -s1    --hosts ntc.txt -s2 </code></p>
<p>P.s. исходный ciadpi_64 - переименован в byedpi для удобства.</p></td><td>2024-10-20T02:53:39.596Z</td></tr><tr><td>Sanek184</td><td><p>Нужно обязательно каждое правило закрывать условием, например <strong>–auto=none</strong> :  -H list.txt -o 2 <strong>–auto=none</strong> -H list2.txt -r 2 -f -1 -t 5 <strong>–auto=none</strong> -H youtube.txt -o 2 -s -5+se <strong>–auto=none</strong></p></td><td>2024-10-20T05:21:41.768Z</td></tr><tr><td>Rex214</td><td><p>GoodCheck выдал такие варианты для ciadpi</p>
<p>–split 1 --disorder 3+s --mod-http=h,d --auto=torst --tlsrec 1+s<br>
–split 2 --disorder 7<br>
–split 2 --disoob 3+sni --fake 517 --ttl 5<br>
-s 3+s -d 20+s<br>
-s2 -d3<br>
–split 1 --disorder 3+s --mod-http=h,d --auto none --fake -1 --tlsrec 3+h<br>
–split 1 --disorder 3+s --mod-http=h,d --auto none --tlsrec 1+s<br>
–split 2 --disorder 3+s --mod-http=h,d --auto none --tlsrec 1+s<br>
–split 3 --disorder 3+s --mod-http=h,d --auto none --tlsrec 1+s<br>
–split 1 --disorder 1+s --mod-http=h,d --auto none --tlsrec 1+s<br>
–split 1 --disorder 2+s --mod-http=h,d --auto none --tlsrec 1+s<br>
–split 1 --disorder 3+s --mod-http=h,d<br>
–split 1+s --disorder 3+s --mod-http=h,d --auto none --tlsrec 1+s</p>
<p>На первом видео не всегда стартует сразу, и периодически останавливается. Оживает, если перемотать. Другие не лучше первого, некоторые в браузере видео не показывают. Что можно улучшить?</p></td><td>2024-10-22T00:05:22.035Z</td></tr><tr><td>Dimon228El(Dimon228 El)</td><td><p>Привет амигосы. Есть какое-то решение для самсунга? Юзаю этот конфиг, но в телеге не грузятся картинки, плюс отваливаются некоторые приложения для работы. Постоянный дрочь кнопки выключит/включить<br>
-s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An<br>
Либо если как-то можно, вставить файл блеклиста, но хз где он на андройде и есть ли вообще</p></td><td>2024-10-22T12:31:30.837Z</td></tr><tr><td>us3r</td><td><p>А в режеме прокси не работает?<br>
ByeByeDPI   запущен в режеме прокси.<br>
В браузере Firefox установлено расширение FoxyProxy Base, в котором  соответсвенно добавлено подключение 127.0.0.1:1080 socks5.</p>
<p>Если не обману, то примерно так  --hosts “:  <a href="http://yotube.com" rel="noopener nofollow ugc">yotube.com</a> googlevideo”.</p></td><td>2024-10-22T12:44:35.745Z</td></tr><tr><td>Enobarbous</td><td><p>Доброго дня всем.<br>
Не подскажите, кто какие использует конфиги для обхода блокировки сайтов с tls 1.2 (rezka.ag, psiphon.ca для примера)?<br>
Такто все остальные блокировки у меня пробиваются через split +tlsrec, но сайты с tls 1.2 оно (закономерно) не берет. Пару дней пробовал разные варианты fake (+ split + disoob +fake-data +tls-sni +ttl1-64 +tlsrec) с разными параметрами и в разных сочетаниях, но ни в какую.<br>
Погонял blokcheck/zapret, из него рабочие</p>
<pre><code class="lang-auto"> --dpi-desync=fake --dpi-desync-fooling=badseq
 --dpi-desync=fake --dpi-desync-fooling=md5sig
 --dpi-desync=syndata --dpi-desync-fake-syndata=tls_clienthello_www_google_com.bin
 --dpi-desync=syndata,split2 --dpi-desync-fake-syndata=tls_clienthello_www_google_com.bin
 --dpi-desync=syndata,disorder2 --dpi-desync-fake-syndata=tls_clienthello_www_google_com.bin
</code></pre>
<p>badseq byedpi не умеет, md5sig не работает под вин. С syndata непонятно, но вроде тоже аналога нет?<br>
Так что может у кого есть что-нибудь (не)монструзное (из разряда “десяток сплитов-пяток фейков и еще сверху”) или еще что? А то у меня уже фантазии не хватает)<br>
P.S. Я бы пользовался запретом/гудбаем, но они с фаерволом дружат отвратно. А он, увы, нужен…</p></td><td>2024-10-22T14:50:21.720Z</td></tr><tr><td>hufrea</td><td><p><code>--fake -1 --tlsrec 3+s</code><br>
<code>--split 10 --fake -1 --fake-offset 10</code></p></td><td>2024-10-22T15:20:29.141Z</td></tr><tr><td>Enobarbous</td><td><p>Примерно это было первое что пробовал, не работает (в том числе и с другими параметрами split и fake-offset). ssl_error_decode_error_alert или ssl_error_rx_malformed_server_hello в браузере</p></td><td>2024-10-22T15:33:58.622Z</td></tr><tr><td>Sanek184</td><td><p>А так ? : -r 2 -f -1 -t 5</p></td><td>2024-10-22T20:29:27.495Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Enobarbous" data-post="297" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/838e76/48.png" class="avatar"> Enobarbous:</div>
<blockquote>
<p>Не подскажите, кто какие использует конфиги для обхода блокировки сайтов с tls 1.2 (rezka.ag, psiphon.ca для примера)?</p>
</blockquote>
</aside>
<p>У меня оба сайта открываются с таким конфигом</p>
<pre><code class="lang-auto">--disoob 2+sni --fake 517 --ttl 5 --tls-sni=translate.google.ru
</code></pre>
<p>Но значение ttl понятное дело нужно подбирать под себя</p></td><td>2024-10-22T21:46:09.175Z</td></tr><tr><td>Enobarbous</td><td><p>Неа, оба варианта не работают, без разницы от значения ttl (я пробовал все в 1-64)<br>
У меня вообще похоже fake ломает обход - стоит добавить даже fake 0 в рабочий набор и кирдык.<br>
В любом случае, спасибо ответившим. И если вдруг у кого будут еще какие мысли, я не откажусь)</p></td><td>2024-10-23T19:16:58.749Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Вижу что там появились пакеты v0.15 и для 19.07. Можно ожидать для 18.06?</p></td><td>2024-10-30T21:30:49.763Z</td></tr><tr><td>spv82</td><td><p>На докерхабе нет контейнеров ниже 19.07 версии.</p></td><td>2024-10-31T03:27:41.236Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Эх, жаль. Придётся самому тогда. 18.06 - последняя официальная для многих 4/32 была (и с которой на некоторых 4/32 еще оставалось достаточно места под что-нибудь дополнительное).</p></td><td>2024-10-31T06:23:28.002Z</td></tr><tr><td>RandomNamelessUser(Random Nameless User)</td><td><p>удалено<br>
*немного темой ошибся, перепостил в тему по андроидовской версии</p></td><td>2024-11-09T14:14:50.772Z</td></tr><tr><td>ZugDuk</td><td><p>Настроил прозрачность с использованием tun2socks. Но без отключения в лисе параметра security.tls.enable_kyber не работает (а в винде работает, но мне надо чтоб везде).<br>
Можно это пофиксить?</p></td><td>2024-11-10T20:01:36.525Z</td></tr><tr><td>mark17(Марк)</td><td><p>а без использования tun2socks, просто подключаясь браузером через socks работает?</p></td><td>2024-11-11T13:56:52.784Z</td></tr><tr><td>ZugDuk</td><td><p>Выяснил поточнее, что нигде никак не работает с включенным kyber. Что это за протокол такой? Почему он не работает через byedpi?</p></td><td>2024-11-11T23:54:53.438Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group" data-username="ZugDuk" data-post="309" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>Что это за протокол такой?</p>
</blockquote>
</aside>
<p>вот <a href="https://habr.com/ru/companies/globalsign/articles/832078/" rel="noopener nofollow ugc">тут</a> почитайте.</p>
<aside class="quote no-group" data-username="ZugDuk" data-post="309" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>Почему он не работает через byedpi?</p>
</blockquote>
</aside>
<p>У меня с kyber работает, причина видимо в другом.</p>
<p>С какими параметрами запускаете? и какую версию?</p></td><td>2024-11-12T01:36:32.436Z</td></tr><tr><td>ZugDuk</td><td><p>Последнюю версию с параметрами (взяты из этой ветки):<br>
-s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An<br>
что из этого может ломать kyber ?</p></td><td>2024-11-12T13:47:00.912Z</td></tr><tr><td>mark17(Марк)</td><td><aside class="quote no-group" data-username="ZugDuk" data-post="311" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>что из этого может ломать kyber ?</p>
</blockquote>
</aside>
<p>да ничего не должно, более того у меня с вашими параметрами все работает и на винде и на линуксе. Вы когда выключаете security.tls.enable_kyber у вас сразу начинает работать?</p></td><td>2024-11-12T14:18:05.435Z</td></tr><tr><td>ZugDuk</td><td><p>Да, довольно четко - включаю ролик ютуба, он не идет, стоит на месте. Затем инвертирую параметр security.tls.enable_kyber в false, проходит секунд 10, данные прогружаются и ролик воспроизводится.</p></td><td>2024-11-12T14:23:37.957Z</td></tr><tr><td>mark17(Марк)</td><td><p>ну у меня с вашими параметрами с kyber тоже дольше грузит, но грузит.<br>
А если просто --disorder 3+s --proto tls попробовать?<br>
или --disoob 3+s --proto tls</p></td><td>2024-11-12T14:37:53.020Z</td></tr><tr><td>irregular-circle</td><td><p>Мб ещё стоит попробовать -q1 -r25+s или -d1 -s25+s -d30+s для ютуба потестить?</p></td><td>2024-11-12T15:18:40.248Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="315" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>-q1 -r25+s или -d1 -s25+s -d30+s</p>
</blockquote>
</aside>
<p>Спасибо! Это сработало. (откуда люди такие умные? наверное нужно меньше ютуба смотреть и больше книг читать))</p></td><td>2024-11-12T15:51:05.420Z</td></tr><tr><td>irregular-circle</td><td><p>С включенным кибером сработало?</p></td><td>2024-11-12T16:04:21.641Z</td></tr><tr><td>ZugDuk</td><td><p>Ага. Ну я потестирую еще конечно в виндовсе и на смартфонах, а в лисе в линуксе работает с включеным кибером.</p></td><td>2024-11-12T16:07:25.747Z</td></tr><tr><td>ZugDuk</td><td><p>ок…</p></td><td>2024-11-12T16:11:05.511Z</td></tr><tr><td>ZugDuk</td><td><p>Твоя программа лучше, чем механизм с DNS ответами, работает со списком доменов. Можешь сделать опцию, чтобы можно было перенаправлять трафик от определенных доменов в другой socks5 сервер? Потому что есть много сайтов, трафик к которым лучше заворачивать в xray.</p></td><td>2024-11-16T18:11:27.575Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="ZugDuk" data-post="320" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>Потому что есть много сайтов, трафик к которым лучше заворачивать в xray.</p>
</blockquote>
</aside>
<p>Там вроде есть режим sniff для точечного перенаправления отдельных доменов. В других прокси-тулчейнах, в singbox, например, точно есть подобное.</p></td><td>2024-11-17T13:17:35.195Z</td></tr><tr><td>anonimnyj81(anonimnyj81)</td><td><p>Здравствуйте а подскажите почему может не работать byedpi и прокси ставил. И без прокси. Я про ciadpi для виндовс.</p></td><td>2024-11-17T16:49:12.446Z</td></tr><tr><td>mark17(Марк)</td><td><p>что конкретно делаете? как подключаетесь, через системный прокси, через настройки браузера или через pac-файл? какие параметры byepdi? до этого запускался и работал или первый раз настраиваете?</p></td><td>2024-11-18T12:56:36.834Z</td></tr><tr><td>anonimnyj81(anonimnyj81)</td><td><p>Запускал через фаерфокс туда вписывал 127.0.0.1 порт 9090 вроде. Пак файлы не использовал. Ещё помню что- то бай дпи ссыпал какую то ошибку сейчас не вспомню. Но не один сайт не открывается даже Яндекс. Это был первый запуск раньше не использовал bye dpi. Запрет и гудбай дпи работают, если что. Конфиг был простой типо ip, порт, disorder и ттл 3</p></td><td>2024-11-18T15:12:22.615Z</td></tr><tr><td>mark17(Марк)</td><td><p>ну тут либо в настройках about:config найти параметр network.proxy.allow_hijacking_localhost выставить в true, либо если вам только ютуб нужен, ну и этот сайт, допустим, то проще наверное создать pac-файл, то есть открыть блокнот вбить текст примерно такого содержания:</p>
<details>
<summary>
Спойлер</summary>
<p>function FindProxyForURL(url, host) {<br>
if  (dnsDomainIs(host, “<a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://ggpht.com" rel="noopener nofollow ugc">ggpht.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://ytimg.com" rel="noopener nofollow ugc">ytimg.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://googleapis.com" rel="noopener nofollow ugc">googleapis.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://googleusercontent.com" rel="noopener nofollow ugc">googleusercontent.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://gstatic.com" rel="noopener nofollow ugc">gstatic.com</a>”) ||<br>
dnsDomainIs(host, “<a href="http://l.google.com" rel="noopener nofollow ugc">l.google.com</a>”) ||<br>
dnsDomainIs(host, “ntc.party”)) {<br>
return “SOCKS5 127.0.0.1:9090”;<br>
}<br>
}</p>
</details>
<p>и сохранить в формате .pac, например firefox_proxy_byedpi.pac и указать к нему путь в настройках прокси. Тогда network.proxy.allow_hijacking_localhost трогать не надо.</p></td><td>2024-11-19T00:13:35.495Z</td></tr><tr><td>anonimnyj85(anonimnyj85)</td><td><p>Да помог вариант именно с пак файлом. Грузить вроде начало. А можно сделать чтобы проксировало весь трафик это что нужно прописать?</p></td><td>2024-11-19T15:17:00.440Z</td></tr><tr><td>mark17(Марк)</td><td><p>ну если весь трафик надо, то лучше без pac файла, а вы точно вводите адрес в “узел SOCKS” а не http/https? должно работать.</p></td><td>2024-11-19T15:37:21.643Z</td></tr><tr><td>anonimnyj85(anonimnyj85)</td><td><p>Глухо только через Пак файл работает. И почему то грузит доступные сайты Яндекс мэил. Ntc не могу открыть. По ходу не судьба бай дпи пользоваться. И ссыпит ошибку ss: invalid version 0x43 (трех значные числа разные )</p></td><td>2024-11-19T18:50:02.052Z</td></tr><tr><td>anonimnyj85(anonimnyj85)</td><td><p>Все разобрался спасибо за помощь. Да в cокс надо прописывать. вот конфиг кому надо<br>
<code> -s1 -q1 --ttl 5 --tls-sni=www.google.com</code><br>
Работает бодро все открывает почти</p></td><td>2024-11-19T22:33:10.442Z</td></tr><tr><td>slq</td><td><p>Есть у кого-нибудь список стратегий или может на гитхабе файл со списком, а я криво смотрю?? Пробовал подобрать стратегию через встроенный перебор в байбайдпи, но выкидывает из приложения после проверки нескольких стратегий, на древнем планшете запускал. Хочу попробовать через гудчек прогнать или через само приложение, но разделить на несколько частей, чтобы успеть проверить до выкидывания из приложения.</p></td><td>2024-11-22T08:04:08.219Z</td></tr><tr><td>Chatlanin</td><td><p>сравнил ради интереса, goodbyedpi работает шустрее в виндовс</p></td><td>2024-11-30T15:46:52.257Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Приветствую. Подскажите пожалуйста как запустить bye dpi в linux mint, ubuntu какую версию скачать и какой командой его запустить.</p></td><td>2024-12-11T16:12:55.416Z</td></tr><tr><td>ser3zha(Ser3zha)</td><td><p>приветсвую, вот видеоинструкция, сам не проверял правда, загуглил за вас<br>
<a href="https://www.youtube.com/watch?v=zlWMp8IlGCU" rel="noopener nofollow ugc">https://www.youtube.com/watch?v=zlWMp8IlGCU</a></p></td><td>2024-12-11T16:41:08.804Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Благодарю. Попробую.</p></td><td>2024-12-11T17:01:57.755Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p><a class="mention" href="/u/hufrea">@hufrea</a> Подскажите, плс, будет ли работать задание сразу 2 фейков для разных протоколов?</p>
<pre><code class="lang-auto">--hosts "yt.txt" --fake -5 --ttl 5 --proto t,h --fake-data ":\x16\x03\x01\x02\x87\x01" --proto u --fake-data ":\xc3\x00\x00\x00\x01\x08" --udp-fake 11 --auto=n
</code></pre>
<p>Или так не выйдет?</p></td><td>2025-01-02T09:43:17.292Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="TesterTi" data-post="335" data-topic="9057">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>будет ли работать задание сразу 2 фейков для разных протоколов?</p>
</blockquote>
</aside>
<p>Да. В примере, в первой группе, для <code>yt.txt</code>, будут использоваться дефолтные фейки, для других сайтов с TLS и HTTP - <code>":\x16\x03..."</code>, <code>":\xc3\x00..."</code> для UDP, для остального (нераспознанный TCP) дефолт.</p></td><td>2025-01-03T18:43:34.423Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Отлично. Спасибо большое!</p></td><td>2025-01-03T19:09:48.139Z</td></tr><tr><td>zzr</td><td><p>руки дошли пощупать ету вашу байдпи - тоже топчик, из преимуществ - не требуются права админисратора чтобы запускать ето, что облегчает использование в корп. environment</p></td><td>2025-01-15T13:00:02.075Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Подскажите, пожалуйста. Кто-нибудь может пробить данный сайт через ByeDPI - <a href="https://animego.online/" rel="noopener nofollow ugc">https://animego.online/</a></p>
<p>Через запрет получается пробить, а вот через ByeDPI вообще никак. Пробовал, в том числе, пробить этот домен через автоподбор стратегий в форке ByeByeDPI, но тоже безуспешно. Пробовал подобрать свои стратегии, тоже не густо. Все остальное пробивается без проблем, но этот сайт отказывается упорно.<br>
Также попробовал стратегии, которые здесь предлагают, тоже безуспешно.</p></td><td>2025-01-16T16:08:40.819Z</td></tr><tr><td>t2000</td><td><p>Этот сайт один из тех для которых нужно применять реальный и целый клиентхелло, вот еще такойже сайт <a href="http://novichok-lordfilm.com" rel="noopener nofollow ugc">novichok-lordfilm.com</a></p></td><td>2025-01-16T16:53:26.163Z</td></tr><tr><td>Aleksandr75ru</td><td><p>То есть, пробить данные сайты в ByeDPI нельзя?<br>
Или вы имеете в виду использование<code> --tls-sni или --fake-data</code>?</p>
<p>Хотя, их я тоже пробовал и это не дало пробития.</p></td><td>2025-01-16T16:57:30.587Z</td></tr><tr><td>destiny08-lab(Destiny)</td><td><p>глянул что там на главной - ТАКОЕ я бы и сам забанил=))</p></td><td>2025-01-16T18:07:01.698Z</td></tr><tr><td>t2000</td><td><p>чтобы попасть на такие сайты хватает этого -i 127.0.0.1 --disorder 1 --fake -1 --tls-sni=<a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a></p></td><td>2025-01-16T19:41:01.377Z</td></tr><tr><td>t2000</td><td><p>смотрел там сериал - лихие, вполне не плохой</p></td><td>2025-01-16T19:42:16.824Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Большое спасибо, что откликнулись!<br>
Но, к сожалению, пробить эти сайты через Bye так и не смог.<br>
Ладно, видимо не судьба.</p></td><td>2025-01-16T20:21:12.041Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>Not working.<br>
freebsd-test.go:</p>
<pre><code class="lang-auto">package main

import (
	"flag"
	"fmt"
	"net"
	"runtime"
	"syscall"
	"time"
	"unsafe"
)

const SF_SYNC = 0x00000004
const SF_NOCACHE = 0x00000010

func FreeBSDSendfile(outfd int, infd int, offset *int64, count int, flags int) (written int, err error) {
	var writtenOut uint64 = 0
	_, _, e1 := syscall.Syscall9(syscall.SYS_SENDFILE, uintptr(infd), uintptr(outfd), uintptr(*offset), uintptr(count), 0, uintptr(unsafe.Pointer(&amp;writtenOut)), uintptr(flags), 0, 0)

	written = int(writtenOut)

	if e1 != 0 {
		err = e1
	}
	return
}
func Msync(mem []byte, flags int) error {
	_, _, errno := syscall.RawSyscall6(
		syscall.SYS_MSYNC,
		uintptr(unsafe.Pointer(&amp;mem[0])),
		uintptr(len(mem)),
		uintptr(flags),
		0, 0, 0)
	if errno != 0 {
		return errno
	}
	return nil
}
func p(e error) {
	if e != nil {
		panic(e)
	}
}
func main() {
	var (
		dstStr      string
		ttl         int
		tmpFilePath string
	)
	flag.StringVar(&amp;dstStr, "dst", "9.9.9.10:443", "")
	flag.IntVar(&amp;ttl, "ttl", 10, "")
	flag.StringVar(&amp;tmpFilePath, "path", "/tmp/sendfile-test1.txt", "")
	flag.Parse()

	dst, err := net.ResolveTCPAddr("tcp", dstStr)
	p(err)
	isIPv6 := dst.IP.To4() == nil
	conn, err := net.DialTCP("tcp", nil, dst)
	p(err)
	defer conn.Close()
	raw, _ := conn.SyscallConn()
	var sockFD int
	raw.Control(func(t uintptr) {
		sockFD = int(t)
	})
	if isIPv6 {
		syscall.SetsockoptInt(sockFD, syscall.IPPROTO_IPV6, syscall.IPV6_UNICAST_HOPS, ttl)
	} else {
		syscall.SetsockoptInt(sockFD, syscall.IPPROTO_IP, syscall.IP_TTL, ttl)
	}

	fileFD, err := syscall.Open(tmpFilePath, syscall.O_CREAT|syscall.O_RDWR|syscall.O_SYNC, 0o600)
	p(err)
	defer func() {
		syscall.Close(fileFD)
		syscall.Unlink(tmpFilePath)
	}()
	err = syscall.Ftruncate(fileFD, 4)
	p(err)
	firstSegment, err := syscall.Mmap(fileFD, 0, 4, syscall.PROT_WRITE, syscall.MAP_SHARED)
	p(err)
	defer syscall.Munmap(firstSegment)
	copy(firstSegment, []byte("haha"))

	var n int64
	fmt.Printf("GOOS: %s\n", runtime.GOOS)
	if runtime.GOOS == "freebsd" {
		_, err = FreeBSDSendfile(sockFD, fileFD, &amp;n, 4, SF_NOCACHE)
	} else {
		_, err = syscall.Sendfile(sockFD, fileFD, &amp;n, 4)
	}
	p(err)

	copy(firstSegment, []byte("1234"))
	err = Msync(firstSegment, syscall.MS_SYNC)
	p(err)
	time.Sleep(100 * time.Microsecond)

	if isIPv6 {
		syscall.SetsockoptInt(sockFD, syscall.IPPROTO_IPV6, syscall.IPV6_UNICAST_HOPS, 64)
	} else {
		syscall.SetsockoptInt(sockFD, syscall.IPPROTO_IP, syscall.IP_TTL, 64)
	}
	_, err = conn.Write([]byte("567\n"))

	time.Sleep(4 * time.Second)
}

</code></pre>
<p>fix-syscall9.patch:</p>
<pre><code class="lang-auto">--- a/freebsd-test.go
+++ b/freebsd-test.go
@@ -13,7 +13,7 @@
 const SF_SYNC = 0x00000004
 const SF_NOCACHE = 0x00000010
 
-func FreeBSDSendfile(outfd int, infd int, offset *int64, count int, flags int) (written int, err error) {
+/*func FreeBSDSendfile(outfd int, infd int, offset *int64, count int, flags int) (written int, err error) {
 	var writtenOut uint64 = 0
 	_, _, e1 := syscall.Syscall9(syscall.SYS_SENDFILE, uintptr(infd), uintptr(outfd), uintptr(*offset), uintptr(count), 0, uintptr(unsafe.Pointer(&amp;writtenOut)), uintptr(flags), 0, 0)
 
@@ -23,7 +23,7 @@
 		err = e1
 	}
 	return
-}
+}*/
 func Msync(mem []byte, flags int) error {
 	_, _, errno := syscall.RawSyscall6(
 		syscall.SYS_MSYNC,
@@ -85,7 +85,7 @@
 	var n int64
 	fmt.Printf("GOOS: %s\n", runtime.GOOS)
 	if runtime.GOOS == "freebsd" {
-		_, err = FreeBSDSendfile(sockFD, fileFD, &amp;n, 4, SF_NOCACHE)
+		//_, err = FreeBSDSendfile(sockFD, fileFD, &amp;n, 4, SF_NOCACHE)
 	} else {
 		_, err = syscall.Sendfile(sockFD, fileFD, &amp;n, 4)
 	}

</code></pre>
<pre><code class="lang-auto">GOOS=freebsd go build freebsd-test.go
patch -p 1 &lt; fix-syscall9.patch
GOOS=linux go build -o linux-test freebsd-test.go
</code></pre>
<p>I only tested <code>sendfile()</code> on FreeBSD-14.2-RELEASE-amd64-bootonly.iso .</p></td><td>2025-01-17T06:20:45.060Z</td></tr><tr><td>hufrea</td><td><p>I wrote similar code, but it works for me on FreeBSD 14.1 (however, i’m testing in virtualbox). Can you check this?</p><aside class="onebox githubfolder" data-onebox-src="https://github.com/hufrea/byedpi/tree/fbsd_sf">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/hufrea/byedpi/tree/fbsd_sf" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h3><a href="https://github.com/hufrea/byedpi/tree/fbsd_sf" target="_blank" rel="noopener nofollow ugc">GitHub - hufrea/byedpi at fbsd_sf</a></h3>

  <p><a href="https://github.com/hufrea/byedpi/tree/fbsd_sf" target="_blank" rel="noopener nofollow ugc">fbsd_sf</a></p>

  <p><span class="label1">Bypass DPI. Contribute to hufrea/byedpi development by creating an account on GitHub.</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2025-01-17T16:28:15.215Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>I have tested fbsd_sf branch, still not working for me. My Configuration:<br>
GUI frontend: virt-manager<br>
hypervisor: KVM<br>
emulator: QEMU-system<br>
network: default<br>
<code>virsh net-dumpxml default</code> :</p>
<pre><code class="lang-auto">&lt;network connections='1'&gt;
  &lt;name&gt;default&lt;/name&gt;
  &lt;uuid&gt;5f1aaee0-c200-5a54-9b03-40d2a96c69a5&lt;/uuid&gt;
  &lt;forward mode='nat'&gt;
    &lt;nat ipv6='yes'&gt;
      &lt;port start='1024' end='65535'/&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name='virbr0' stp='on' delay='0'/&gt;
  &lt;mac address='66:3c:4a:64:ef:d8'/&gt;
  &lt;ip address='192.168.122.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='192.168.122.2' end='192.168.122.254'/&gt;
    &lt;/dhcp&gt;
  &lt;/ip&gt;
  &lt;ip family='ipv6' address='fdf3:a26d:a7d0:3f82::1' prefix='64'&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</code></pre></td><td>2025-01-18T02:20:31.364Z</td></tr><tr><td>y5uhf</td><td><p>Кто-нибудь может подсказать конфиг для yt music? Текущий конфиг, на котором youtube работает в yt music не может самое главное - воспроизводить музыку, интерфейс и прочий функционал грузится.<br>
Флаги командой строки:</p>
<p><code>s1 -q1 -Y -Ar -s5 -o1+s -At -f-1 -r1+s -As -s1 -o1 +s -s-1 -An</code></p></td><td>2025-01-24T17:55:12.215Z</td></tr><tr><td>etry374e</td><td><p>разные провайдеры, разные настройки тспу, у других будет работать конфиг который у вас не будет и наоборот, подбирайте сами прочитав расшифровку ключей</p></td><td>2025-01-24T18:04:00.593Z</td></tr>
    </table>
      </body>
    </html>