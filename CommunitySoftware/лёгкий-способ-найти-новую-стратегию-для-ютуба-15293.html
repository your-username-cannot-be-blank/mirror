
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>лёгкий-способ-найти-новую-стратегию-для-ютуба-15293</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>0x7f</td><td><p>Во времена когда методы блокировки ютуба часто меняли мне было лень каждый раз запускать блокчек, ждать пока он отработает, запускать установочный скрипт и копипастить новую стратегию в конфиг - поэтому я сделал небольшой баш-скрипт который делает это за меня.</p>
<blockquote>
<p><a href="https://gist.github.com/kotsmotritnastul/989b0cc025abdd9c58fb149d4e8c0d29" rel="noopener nofollow ugc">ссылка на скачивание</a></p>
</blockquote>
<p>Для работы скрипта надо всё-таки разок установить и настроить запрет чтобы в конфиге была строка вида <code>--filter-tcp=443 РАБОЧАЯ_СТРАТЕГИЯ --hostlist=/opt/zapret/lists/yt.txt --new</code> где <code>/opt/zapret/lists/yt.txt</code> это файл в котором перечислены домены ютуба по одному на строчку, вот так</p>
<pre><code class="lang-auto">yt.be
youtu.be
googlevideo.com
youtube.com
i.ytimg.com
ytimg.com
</code></pre>
<p>Как работает скрипт:</p>
<ol>
<li>проверяет на какой системе его запустили - опенврт, линукс с системд или что-то экзотическое, если экзотика то скрипт выходит на всякий случай</li>
<li>загружает страничку ютуба и парсит её на предмет адреса Google Global Cache - странички обычно не блочат а замедляют поэтому это не должно вызывать проблем</li>
<li>выключает запрет через системд или опенвртшное управление службами</li>
<li>запускает блокчек с тем адресом GGC который он взял во втором пункте и пишет его вывод в файл</li>
<li>ищет в файле строку с рабочей новой стратегией</li>
<li>ищет в конфиге запрета строчку со старой стратегией обхода и меняет её на новую</li>
<li>включает запрет обратно</li>
</ol>
<p>Делал я этот скрипт для себя, но может он и вам пригодится. Если там какие-то баги - сообщите, может я чего-то не учёл.</p></td><td>2025-03-21T12:13:06.813Z</td></tr><tr><td>victoria(vika)</td><td><p>если говорить про openwrt этот скрипт работает только на офф версию или на все включая luci(<a href="https://github.com/remittor/zapret-openwrt" class="inline-onebox" rel="noopener nofollow ugc">GitHub - remittor/zapret-openwrt: OpenWrt packages of https://github.com/bol-van/zapret</a>)?</p></td><td>2025-03-21T21:27:07.028Z</td></tr><tr><td>0x7f</td><td><p>я тестировал только с этой версией <a href="https://github.com/bol-van/zapret/" class="inline-onebox" rel="noopener nofollow ugc">GitHub - bol-van/zapret: DPI bypass multi platform</a> никаких других у меня нет и про их совместимость я ничего гарантировать не могу.</p></td><td>2025-03-21T21:35:56.974Z</td></tr><tr><td>victoria(vika)</td><td><p>в файл yt.txt же можно скинуть все домены ну к примеру того же клауд флеер или для правильной работы скрипта нужно только домены ютуб и гугл видео?</p></td><td>2025-03-21T21:56:56.121Z</td></tr><tr><td>3a9LL(3a9LL)</td><td><p>Стопэ я что то не понял. Как запускать на десятке этот скрипт? Не работает</p></td><td>2025-03-21T23:16:42.910Z</td></tr><tr><td>easyone11</td><td><p>он для роутера</p></td><td>2025-03-22T04:10:13.080Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="0x7f" data-post="1" data-topic="15293">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/0x7f/48/14192_2.png" class="avatar"> 0x7f:</div>
<blockquote>
<p>запускает блокчек с тем адресом GGC который он взял во втором пункте</p>
</blockquote>
</aside>
<p>запихнуть туда можно чё угодно, но скрипт прогоняет поиск страт для ggc, если так получится что страта будет работать и для других сайтов то тебе это поможет</p></td><td>2025-03-22T04:14:17.115Z</td></tr>
    </table>
      </body>
    </html>