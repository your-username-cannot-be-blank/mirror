[
    {
        "id": 110,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-16T06:25:20.967Z",
        "cooked": "<p>Сюда буду сбрасывать информацию о последних изменениях в проекте</p><aside class=\"onebox githubrepo\" data-onebox-src=\"https://github.com/bol-van/zapret\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/bol-van/zapret\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n  <img width=\"690\" height=\"344\" src=\"zapret-whats-new-61/b908f24ed97549441ae7fe84f8bd9d1d478c1fbc_2_690x344.png\" class=\"thumbnail\" data-dominant-color=\"F1F4F1\">\n\n  <h3><a href=\"https://github.com/bol-van/zapret\" target=\"_blank\" rel=\"noopener\">GitHub - bol-van/zapret: DPI bypass multi platform</a></h3>\n\n    <p><span class=\"github-repo-description\">DPI bypass multi platform</span></p>\n</div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>КОМПЛЕКТ ДЛЯ WINDOWS : <a href=\"https://github.com/bol-van/zapret-win-bundle\" class=\"inline-onebox\">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a></p>\n<p>Опишу кратко назначение.<br>\nПроект нацелен на прозрачный обход блокировок и замедлений веб сайтов http(s) на <strong>Windows, Linux, FreeBSD, OpenBSD, частично MacOS</strong>, в том числе на роутерах на базе <strong>openwrt</strong>. Может применяться и для противодействия сигнатурному анализу произвольных tcp и udp протоколов<br>\nОн состоит из следующих компонент :</p>\n<ol>\n<li>Скрипты для автоматизации получения списка заблокированных ip и хостов и их обработки (ipset, ip2net, mdig).</li>\n<li>Программы для обхода DPI на http и https : nfqws,dvtws,winws,tpws,</li>\n<li>Скрипты задействования этих программ + фаервола на разных системах - openwrt, sysv, systemd, macos (init.d)</li>\n<li>blockcheck - средство проверки рабочих методов обхода DPI</li>\n<li>То, что не автоматизировано. Описательная часть для продвинутых пользователей : как организовать выборочное прозрачное проксирование соединений, заворот на VPN, способы модификации существующих VPN решений для изменений их стандартного протокола с целью скрытия от DPI</li>\n</ol>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-05-03T14:06:48.363Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3536,
        "reads": 803,
        "readers_count": 802,
        "score": 17825.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 12,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret",
                "internal": false,
                "reflection": false,
                "title": "GitHub - bol-van/zapret: Обход DPI в linux",
                "clicks": 665
            },
            {
                "url": "https://github.com/bol-van/zapret-win-bundle",
                "internal": false,
                "reflection": false,
                "title": "GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows",
                "clicks": 422
            },
            {
                "url": "https://ntc.party/t/%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D0%BF%D0%BE%D0%B4-linux/8479/2",
                "internal": true,
                "reflection": true,
                "title": "Работа под Linux",
                "clicks": 17
            },
            {
                "url": "https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/71",
                "internal": true,
                "reflection": true,
                "title": "ByeDPI for Android: обсуждение",
                "clicks": 12
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/4009",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/1",
        "can_translate": false
    },
    {
        "id": 111,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-16T06:26:59.576Z",
        "cooked": "<p>Изменения май-июнь 2019<br>\nПроект был существенно доработан.</p>\n<p>Сделана максимально упрощенная установка для пользователей основных дистрибутивов linux и openwrt через скрипт install_easy.sh.<br>\nВариант по умолчанию ставит сплиттер http запросов + Host =&gt; HOST<br>\nПереписаны скрипты для debian и openwrt.<br>\nУбрана вся каша с провайдерами, потому что все равно не буду следить за актуальностью что на каком провайдере.<br>\nТеперь все более логично. Вы выбираете что использовать : tpws или nfqws, их параметры.<br>\nМожно легко самому добавлять в скрипты запуск дополнительных демонов или их копий с разными параметрами.<br>\nДобавление правил firewall вынесено в отдельные процедуры, которые можно использовать при модификации скрипта.<br>\nДобавление правил firewall под openwrt вынесено в отдельный firewall include /etc/firewall.zapret, чтобы /etc/firewall.user использовать для своих целей и не смешивать команды.<br>\nНастройки вынесены из init скриптов в отдельный файл “config”.<br>\nВсе выглядит проще и лаконичней imho<br>\nЛисты РКН разрослись до мегабайтов. Теперь они хранятся в сжатом виде, что уменьшает в разы требования свободного места на роутере.<br>\nНовая программа ip2net позволяет в 2-3 раза уменьшить ipset-ы, объединяя ip в подсети.<br>\nМногопоточный ресолвер mdig делает снова реальным самостоятельный ресолвинг реестра через get_reestr.sh.<br>\nДобавлены бинарики для arm64, mips64, ppc.<br>\nБинарики для всех архитектур, кроме mips64, запакованы в upx. Это уменьшает их размер в 2 раза.<br>\nСделан автоматический распознаватель архитектуры и установщик бинариков - install_bin.sh<br>\ninstall_easy.sh в случае необнаружения подходящих бинариков может сам их собрать при условии наличия gcc,make и необходимых -dev пакетов<br>\nМожно запустить install_easy с параметром “make”, чтобы форсировать сборку.<br>\nСделана поддержка ipv6. Она и раньше была в tpws, nfqws, но сейчас она пронесена через все компоненты.<br>\ntpws получил дополнительные функции для привязки к определенным IP и возможности по ожиданию готовности интерфейсов,<br>\nвозможность чтения hostlist-ов в формате gzip<br>\nЛогика управления соединениями в tpws переписана на использование неблокирующих сокетов, устранены многочисленные потенциальные проблемы кода, унаследованного у взятого где-то в сети примера не лучшего качества<br>\nnfqws больше не требует рута для работы, ограничиваясь сбросом capabilities до CAP_NET_ADMIN.<br>\nВ tpws и nfqws кроме --user добавлена возможность установки uid:gid через параметр --uid. Это полезно на android, поскольку там нет /etc/passwd.<br>\nНаписана документация по настройке policy based routing на примере wireguard.<br>\nОписан метод модификации wireguard для противостояния возможным попыткам заблокировать VPN протоколы на DPI (суверенный рунет).</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-17T17:47:31.532Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 22,
        "reads": 625,
        "readers_count": 624,
        "score": 235.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/2",
        "can_translate": false
    },
    {
        "id": 112,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-16T06:27:27.889Z",
        "cooked": "<p>Изменения сентябрь 2019</p>\n<p>Выяснилось откуда в реестре появляется миллион+ IP и этот список неудержимо растет.<br>\nАвтоматическое распознавание телеграм прокси.<br>\nВот вы сидите в метро через wifi, тыкаетесь в новонайденный телеграм прокси.<br>\nА вас снифают. И сливают инфу РКН.<br>\nПереработаны скрипты получения ipset.<br>\nДобавлена поддержка листов с <a href=\"https://antifilter.network\" rel=\"nofollow noopener\">https://antifilter.network</a> на замену get_antizapret.<br>\nумные префиксированныо-вычищенные листы оставляют нас всего лишь с десятками тысяч префиксов, что запросто потянет роутер с 64 Mb RAM<br>\nПереработано получение листов непосредственно из реестра (get_reestr_*.sh)<br>\nбывший get_reestr.sh переименован в get_reestr_resolve.sh. Это скрипт для самостоятельного ресолва доменов из реестра через mdig.<br>\nНа смену get_combined.sh пришел get_reestr_combined.sh. Теперь он работает только с реестром, не используя другие листы.<br>\nget_reestr_ip.sh подтягивает IP в том виде, в каком они значатся в реестре<br>\nget_reestr_ip, get_reestr_combined поддерживают теперь ipv6. Оба убирают мусор , которым на данный момент считается телеграм<br>\nВ ip2net добавлена поддержка ipv6 и настройка параметров через командную строку. create_ipset.sh обновлен до поддержки этой функции.<br>\nПараметры ip2net вынесены в config</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-17T17:47:53.039Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 268,
        "readers_count": 267,
        "score": 93.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://antifilter.network",
                "internal": false,
                "reflection": false,
                "title": "Antifilter",
                "clicks": 29
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/3",
        "can_translate": false
    },
    {
        "id": 173,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-22T15:28:21.001Z",
        "cooked": "<p>Добавлена поддержка режима socks4/5<br>\nОн не требует повышенных привилегий, рута<br>\nможет использоваться на нерутированных android устройствах с программами, поддерживающими socks или через хитрые методы прозрачного заворота через tun</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-30T16:44:54.601Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 229,
        "readers_count": 228,
        "score": 95.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/4",
        "can_translate": false
    },
    {
        "id": 176,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2019-09-22T18:53:21.326Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"bolvan\" data-post=\"4\" data-topic=\"61\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png\" class=\"avatar\"> bolvan:</div>\n<blockquote>\n<p>может использоваться на нерутированных android устройствах с программами, поддерживающими socks или через хитрые методы прозрачного заворота через tun</p>\n</blockquote>\n</aside>\n<p>Для разработки программы, которая бы использовала zapret, можно взять исходный код программы <a href=\"https://github.com/Jigsaw-Code/Intra\">Intra</a> или какого-нибудь проксификатора (например, shadowsocks). Почти все подобные программы используют badvpn tun2socks.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-30T16:45:00.785Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 88,
        "reads": 200,
        "readers_count": 199,
        "score": 485.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/Jigsaw-Code/Intra",
                "internal": false,
                "reflection": false,
                "title": "GitHub - Jigsaw-Code/Intra: An experimental tool that allows you to test new DNS-over-HTTPS services on Android",
                "clicks": 13
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/5",
        "can_translate": false
    },
    {
        "id": 194,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-23T06:35:02.007Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ValdikSS\" data-post=\"5\" data-topic=\"61\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png\" class=\"avatar\"> ValdikSS:</div>\n<blockquote>\n<p>Для разработки программы, которая бы использовала zapret, можно взять исходный код программы <a href=\"https://github.com/Jigsaw-Code/Intra\">Intra </a> или какого-нибудь проксификатора (например, shadowsocks). Почти все подобные программы используют badvpn tun2socks.</p>\n</blockquote>\n</aside>\n<p>Лично у меня совсем нет опыта в android development, и вряд ли я начну делать аппликуху сам. Но если кто желает, пожалуйста.<br>\nХотя, если так подумать, то при таком подходе зачем нужен бинарик tpws ? Ведь можно то же самое и на яве соорудить. Не зависеть от платформы.<br>\nС tpws преимущество разве что в скорости немного. Но я не думаю, что это существенно для мобильников</p>\n<p>Можно сделать универсальную аппликуху для рута и без рута. Если рут, то адвансед моде и тпвс в транспарент режиме, иначе через выкрутасы</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-23T13:24:43.399Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 188,
        "readers_count": 187,
        "score": 62.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/6",
        "can_translate": false
    },
    {
        "id": 270,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-09-28T08:50:28.201Z",
        "cooked": "<p>В tpws добавлена опция --hostpad=<br>\nДобавляет паддинг-хедеров перед Host: на указанное количество байтов<br>\nПолезно против DPI, выполняющих реассемблинг TCP с ограниченным буфером.<br>\nЕсли техника работает, то после некоторого количества bytes http запрос начнет проходить до сайта.<br>\nЕсли при этом критический размер padding около MTU, значит скорее всего DPI не выполняет реассемблинг пакетов, и лучше будет использовать обычные опции --split-…<br>\nЕсли все же реассемблинг выполняется, то критический размер будет около размера буфера DPI. Он может быть 4K или 8K, возможны и другие значения.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-09-30T16:45:21.090Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 161,
        "readers_count": 160,
        "score": 42.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/7",
        "can_translate": false
    },
    {
        "id": 534,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-11-01T16:29:33.237Z",
        "cooked": "<p>Реализована атака десинхронизации DPI для http и https. За основу взята идея от ValdikSS.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-11-01T20:26:07.387Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 148,
        "readers_count": 147,
        "score": 39.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/8",
        "can_translate": false
    },
    {
        "id": 697,
        "name": "",
        "username": "AmiGO",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/85e7bf/{size}.png",
        "created_at": "2019-12-05T00:20:31.993Z",
        "cooked": "<p>Очень крутая и полезная вещь, у нескольких хостеров (включая Селектел) отлично работает, что позволяет пользоваться запрещёнкой без оверхеда на VPN с большим RTT.<br>\nСпасибо!</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-12-05T00:20:41.404Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 156,
        "readers_count": 155,
        "score": 41.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 104,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/9",
        "can_translate": false
    },
    {
        "id": 707,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-12-05T09:49:32.105Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"AmiGO\" data-post=\"9\" data-topic=\"61\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/letter_avatar_proxy/v4/letter/a/85e7bf/48.png\" class=\"avatar\"> AmiGO:</div>\n<blockquote>\n<p>у нескольких хостеров (включая Селектел) отлично работает</p>\n</blockquote>\n</aside>\n<p>Речь про десинхронизацию или другие опции ?<br>\nПока про десинхронизацию у меня нет отзывов, тестирование было крайне ограниченным</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-12-05T09:49:32.105Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 3,
        "reads": 152,
        "readers_count": 151,
        "score": 50.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/10",
        "can_translate": false
    },
    {
        "id": 708,
        "name": "",
        "username": "AmiGO",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/85e7bf/{size}.png",
        "created_at": "2019-12-05T18:05:14.131Z",
        "cooked": "<p>Да, речь про десинхронизацию и она прекрасна своей изящностью в сочетании с минимальным оверхедом.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2019-12-12T19:02:48.707Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 148,
        "readers_count": 147,
        "score": 114.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 104,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/11",
        "can_translate": false
    },
    {
        "id": 755,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2019-12-27T12:51:17.723Z",
        "cooked": "<p>Добавлен выбор режима десинхронизации DPI.<br>\nНа текущий момент это может быть</p>\n<ul>\n<li>поддельный пакет с разрешенным запросом : --dpi-desync без параметра или --dpi-desync=fake</li>\n<li>пакет сброса соединения : --dpi-desync=rst</li>\n</ul>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-01-02T19:37:37.829Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 146,
        "readers_count": 145,
        "score": 49.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/12",
        "can_translate": false
    },
    {
        "id": 770,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-01-03T14:10:49.319Z",
        "cooked": "<p>Добавлен режим disorder для dpi-desync.</p>\n<p>В этом режиме пакет с http request или tls client hello разбивается на 2 части. Отсылка идет следующим образом :</p>\n<ol>\n<li>2-й сегмент</li>\n<li>поддельный 1-й сегмент</li>\n<li>1-й сегмент</li>\n<li>поддельный 1-й сегмент</li>\n</ol>\n<p>цель атаки - максимально усложнить DPI реконструкцию сообщения, по которому принимается решение о блокировке</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-02-25T21:40:00.443Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 145,
        "readers_count": 144,
        "score": 89.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/14",
        "can_translate": false
    },
    {
        "id": 822,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-01-18T11:30:40.230Z",
        "cooked": "<p>Исправлен баг, при котором была невозможна отправка поддельных пакетов ipv4 и ipv6 с одного процесса nfqws. Для 4 и 6 теперь используются разные raw сокеты.</p>\n<p>Добавлен режим --dpi-desync-fooling=badseq. Испорченные sequence numbers в поддельных пакетах.<br>\nВозможно сочетание любых режимов через запятую : --dpi-desync-fooling=badseq,badsum,md5sig</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-02-25T21:40:05.881Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 135,
        "readers_count": 134,
        "score": 57.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/15",
        "can_translate": false
    },
    {
        "id": 838,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-01-22T19:09:05.788Z",
        "cooked": "<p>Отработана схема использования nfqws на мобильных модемах Huawei.<br>\nПроверено на E8372. Вероятно работает на E3372 с минимальными модификациями.<br>\nВозможно, на других устройствах.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-01-22T19:09:05.788Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 133,
        "readers_count": 132,
        "score": 66.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/16",
        "can_translate": false
    },
    {
        "id": 932,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-02-02T16:53:48.883Z",
        "cooked": "<p>Изменение window size в nfqws считается устаревшим и более не поддерживается в скриптах.<br>\nНа замену ему приходит более быстрая альтернатива --dpi-desync=split2, лишенная других недостатков wsize (типа невозможности заменить регистр Host: при --wsize=3 на пакетах от linux клиента)</p>\n<p>В свете последних изменений переписана вводная часть readme.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-02-02T16:53:48.883Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 23,
        "reads": 137,
        "readers_count": 136,
        "score": 142.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/7",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/17",
        "can_translate": false
    },
    {
        "id": 934,
        "name": "",
        "username": "AmiGO",
        "avatar_template": "/letter_avatar_proxy/v4/letter/a/85e7bf/{size}.png",
        "created_at": "2020-02-03T02:11:51.030Z",
        "cooked": "<p>Не планируете интеграцию наработок <a href=\"https://github.com/Kkevsterrr/geneva\" rel=\"nofollow noopener\">https://github.com/Kkevsterrr/geneva</a> ?</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-02-25T21:40:10.722Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 131,
        "readers_count": 130,
        "score": 61.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/Kkevsterrr/geneva",
                "internal": false,
                "reflection": false,
                "title": "GitHub - Kkevsterrr/geneva: client-side censorship evasion engine from the Geneva AI",
                "clicks": 29
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 104,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/18",
        "can_translate": false
    },
    {
        "id": 935,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-02-03T07:33:33.668Z",
        "cooked": "<p>Универсальный тампер движок портировать с питона не планирую<br>\nНо по мере необходимости готов добавлять новые стратегии, работающие в exUSSR</p>",
        "post_number": 19,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-02-25T21:40:14.044Z",
        "reply_count": 0,
        "reply_to_post_number": 18,
        "quote_count": 0,
        "incoming_link_count": 51,
        "reads": 153,
        "readers_count": 152,
        "score": 285.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "AmiGO",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/85e7bf/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/19",
        "can_translate": false
    },
    {
        "id": 1576,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-07-10T09:00:50.316Z",
        "cooked": "<p>Изменение поведения опций сплита в tpws.</p>\n<p>Теперь tpws в состоянии распознавать не только http, но и TLS ClientHello.<br>\nsplit-http-req может применяться совместно с split-pos. Если блок данных является http запросом, будет применяться split-http-req, в ином случае split-pos.<br>\nsplit-pos по умолчанию работает только с http и TLS ClientHello. Если вам нужно сплитать все остальное, укажите --split-any-protocol.<br>\n–hostlist так же теперь работает со SNI из TLS ClientHello.</p>\n<p>В config параметры TPWS_OPT_HTTP и TPWS_OPT_HTTPS удалены, вместо них единый TPWS_OPT.</p>\n<p>Простой инсталятор и скрипты запуска адаптированы, чтобы более не запускать по отдельному инстансу на http и https. Добавлен режим tpws_hostlist_https.</p>",
        "post_number": 20,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-08-08T00:41:16.223Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 20,
        "reads": 208,
        "readers_count": 207,
        "score": 141.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/20",
        "can_translate": false
    },
    {
        "id": 1596,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-07-13T12:42:04.633Z",
        "cooked": "<p>В продолжение предыдущего.</p>\n<p>В tpws добавлена возможность биндаться на множество адресов.<br>\nПараметры --bind-addr и --bind-iface* начинают новый бинд. Следующие параметры --bind-wait*, --bind-linklocal относятся к последнему бинду.<br>\nЕсли хотите указывать link-local явно в --bind-addr, то теперь к нему надо добавлять %interface_name.<br>\nНапример : fe80::1111:2222:3333:4444%br-lan<br>\nЕсли явно не создан ни один бинд, то в целях совместимости параметров создается бинд по умолчанию на все адреса.</p>\n<p>init скрипты адаптированы, чтобы запускать только 1 tpws в любых случаях. Ранее их могло быть до 6 шт.<br>\nОсобую проблему это представляло при использовании hostlist. Каждый инстанс подгружал свой hostlist. RAM это съедало до 6 раз больше, чем могло бы быть. На soho роутерах и листах от РКН это означало невозможность использования в такой конфигурации</p>",
        "post_number": 21,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-08-08T00:41:19.981Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 15,
        "reads": 212,
        "readers_count": 211,
        "score": 117.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/21",
        "can_translate": false
    },
    {
        "id": 2040,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2020-10-19T19:51:16.649Z",
        "cooked": "<p>8 posts were merged into an existing topic: <a href=\"/t/topic/726/2\">Обсуждение</a></p>",
        "post_number": 22,
        "post_type": 3,
        "posts_count": 163,
        "updated_at": "2020-10-19T19:51:16.995Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 151,
        "readers_count": 150,
        "score": 65.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/topic/726/2",
                "internal": true,
                "reflection": false,
                "title": "Zapret: обсуждение",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "action_code": "split_topic",
        "post_url": "/t/zapret-whats-new/61/22",
        "can_translate": false
    },
    {
        "id": 2029,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-10-19T17:57:19.141Z",
        "cooked": "",
        "post_number": 30,
        "post_type": 3,
        "posts_count": 163,
        "updated_at": "2020-10-19T17:57:19.141Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 142,
        "readers_count": 141,
        "score": 33.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "action_code": "closed.enabled",
        "post_url": "/t/zapret-whats-new/61/30",
        "can_translate": false
    },
    {
        "id": 2122,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-10-30T12:50:39.356Z",
        "cooked": "<p>Сделана экспериментальная поддержка flow offloading в openwrt , включая простой инсталятор<br>\nВ openwrt flow offloading работает только глобально. Либо включено, либо выключено. nfqws не работает с включенным offloading.<br>\nСкрипты zapret теперь сами в состоянии выборочно управлять трафиком, который идет на offload, отключая при этом системную установку. То есть в люси у вас будет чекбоксик выключен, но оффлоад на самом деле будет работать там, где он не мешает nfqws</p>\n<p>Тестировалось только на software flow offloading, на hardware возможности проверить нет<br>\nЕсли кто-то может проверить, буду благодарен.</p>",
        "post_number": 31,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-10-30T13:24:17.845Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 99,
        "reads": 148,
        "readers_count": 147,
        "score": 524.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/31",
        "can_translate": false
    },
    {
        "id": 2126,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-11-01T11:31:29.070Z",
        "cooked": "<p>Сделал рефакторинг системы управления режимами. Вместо впихивания нескольких опций в один строковый параметр MODE, эти опции теперь разделены по разным переменным.<br>\nПоддержка keep alive в nfqws больше не требует custom скрипта. Она теперь вшита в основной функционал.</p>\n<pre><code># CHOOSE OPERATION MODE\n# MODE : nfqws,tpws,filter,custom\n# nfqws : use nfqws\n# tpws : use tpws\n# filter : no daemon, just create ipset or download hostlist\n# custom : custom mode. should modify custom init script and add your own code\nMODE=tpws\n# apply fooling to http\nMODE_HTTP=1\n# for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet\nMODE_HTTP_KEEPALIVE=0\n# apply fooling to https\nMODE_HTTPS=1\n# none,ipset,hostlist\nMODE_FILTER=none</code></pre>",
        "post_number": 32,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2020-11-01T11:31:29.070Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 21,
        "reads": 151,
        "readers_count": 150,
        "score": 135.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/32",
        "can_translate": false
    },
    {
        "id": 2233,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2020-11-26T12:33:45.656Z",
        "cooked": "<p>Добавлена проверка на подмену DNS в простой инсталятор install_easy.sh<br>\nИнсталятор сам не будет решать проблему DNS за вас, но предупредит о возможной подмене</p>",
        "post_number": 33,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-08T23:12:52.513Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 110,
        "readers_count": 109,
        "score": 47.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/33",
        "can_translate": false
    },
    {
        "id": 2460,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-03T10:41:50.799Z",
        "cooked": "<p>Было замечено, что virtualbox и vmware ломает большинство техник nfqws, если сеть настроена в режиме NAT.<br>\nПринудительно заменяется TTL на ttl хоста, не проходят фейковые ретрансмиссии<br>\nНеобходимо настраивать VM в режиме bridge<br>\nОжидаемо так же не работает и GoodbyeDPI с --set-ttl</p>",
        "post_number": 34,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-08T23:12:57.166Z",
        "reply_count": 0,
        "reply_to_post_number": 33,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 114,
        "readers_count": 113,
        "score": 72.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/34",
        "can_translate": false
    },
    {
        "id": 2462,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-03T18:05:10.188Z",
        "cooked": "<p>В nfqws добавлена возможность комбинирования режимов десинхронизации<br>\nРежим 1-й фазы может быть fake,rst,rstack. Режим 2-й фазы может быть disorder,disorder2,split,split2.<br>\nПишем через запятую : --dpi-desync=fake,split<br>\nМожет быть полезно, когда у провайдера стоит не один DPI.<br>\n–dpi-desync без  параметров раньше приравнивался к fake. Теперь это больше не поддерживается, требуется явное указание режима.</p>",
        "post_number": 36,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-08T23:13:02.175Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 116,
        "readers_count": 115,
        "score": 63.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/36",
        "can_translate": false
    },
    {
        "id": 2525,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-11T15:23:13.457Z",
        "cooked": "<p>Ограниченная поддержка систем FreeBSD и OpenBSD<br>\nработают mdig, ip2net, tpws<br>\nна FreeBSD полностью работоспособны скрипты ipset/*.sh. Они заполняют ipfw lookup tables.<br>\nтестировалось на FreeBSD 12.2 и OpenBSD 6.8. на значительно более старых скорее всего будут проблемы<br>\nпортирование nfqws напрямую невозможно. nfqueue в BSD отсутствует в принципе. нужно искать другой аналогичный механизм</p>",
        "post_number": 38,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-12T11:58:09.587Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 118,
        "readers_count": 117,
        "score": 63.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/38",
        "can_translate": false
    },
    {
        "id": 2555,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-15T16:44:09.813Z",
        "cooked": "<p>Добил поддержку FreeBSD и OpenBSD.<br>\nНа замену nfqws пришел dvtws. Это nfqws, собираемый под divert sockets.<br>\nРаботает почти точно так же, как nfqws. Разница только в способах перенаправления трафика.<br>\nipfw команды или pf.conf вместо iptables</p>\n<p>Экспериментально. Тестируйте, кто может.</p>",
        "post_number": 39,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-15T16:44:09.813Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 110,
        "readers_count": 109,
        "score": 52.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/39",
        "can_translate": false
    },
    {
        "id": 2560,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-19T15:17:33.823Z",
        "cooked": "<p>Ограниченная поддержка MacOS.<br>\nЯблочники там убрали все самое вкусное, поэтому dvtws и tpws в прозрачном режиме не завести.<br>\nРаботает tpws socks. Его можно сделать прозрачным через приложение Proxifier (на не совсем новых версиях macos ставит свой модуль ядра).<br>\nСкрипты ipset/*.sh работают после установки через brew некоторых GNUшных программ взамен устаревшим имеющимся в macos.<br>\nОписание в docs/bsd.txt</p>",
        "post_number": 40,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-19T15:30:04.935Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 27,
        "reads": 100,
        "readers_count": 99,
        "score": 155.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/40",
        "can_translate": false
    },
    {
        "id": 2564,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-23T14:23:39.922Z",
        "cooked": "<p>Прозрачный режим tpws в MacOS.<br>\nЯблочники убрали net/pfvar.h, где находятся определения, необходимые для получения оригинального адреса в прозрачном режиме.<br>\nВзял из старых версий яблочного SDK. Сработало. Они изменили некоторые структуры, поэтому вариант из BSD не работал.<br>\nНо теперь это недокументировано, и запросто могут еще что-нибудь поубирать в будущих версиях.</p>",
        "post_number": 41,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-23T14:24:51.662Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 89,
        "readers_count": 88,
        "score": 32.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/41",
        "can_translate": false
    },
    {
        "id": 2592,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-02-27T16:53:20.374Z",
        "cooked": "<p>Сделан install_easy.sh для MacOS<br>\nПоддерживается весь стандартный набор, но только для tpws<br>\nInternet sharing не поддерживается !! При его включении PF начинает функционировать странно.<br>\nРедиректы не работают. При выключении все лишние anchor-ы убираются, состояние становится как до включения, но редиректы уходят в никуда.<br>\nЛечится только через pfctl -f /etc/pf.conf.  В причинах пока не разобрался. Возможно, какие-то хитрости яблочников, выходящие за пределы стандартного поведения PF</p>",
        "post_number": 42,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-02-27T16:53:44.261Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 95,
        "readers_count": 94,
        "score": 34.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/42",
        "can_translate": false
    },
    {
        "id": 2619,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-03-06T09:11:03.735Z",
        "cooked": "<p>В простой инсталятор внесен режим socks.</p>\n<p>Редизайн выбора LAN и WAN интерфейсов на десктопных системах.<br>\nВ этом процессе есть ряд важных нюансов, которые нужно осознавать, включая фильтрацию по интерфейсам.<br>\nОни описаны в readme в разделе “простая установка”</p>",
        "post_number": 43,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-03-06T09:11:03.735Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 97,
        "readers_count": 96,
        "score": 29.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/43",
        "can_translate": false
    },
    {
        "id": 2898,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-03-20T10:50:21.731Z",
        "cooked": "<p>Новая схема дурения DPI, которые секут не только TLS ClientHello, но и ServerHello.<br>\nКак же с этим бороться ? Сложно заставить сервер посылать не то, на что он запрограммирован.<br>\nЛучшее решение было бы всем перейти на TLS 1.3, где ServerHello шифрован.<br>\nНо переход идет вяло. Владельцы серверов годами остаются на давно настроенных и стабильных системах. Потому там может быть только TLS 1.2.<br>\nНо кое-что все-таки сделать можно. Почему бы не возродить старую идею со сменой winsize, только наоборот ?<br>\nВ nfqws добавлен параметр --wssize=&lt;window_size&gt;[:&lt;scale_factor&gt;]<br>\nОн позволяет менять window size и scale factor для сервера до тех пор, пока не будет отослан запрос, на который должен придти фрагментированный ответ, затем перестать менять winsize, чтобы вернуть скорость.<br>\nМенять winsize и scale factor надо во всех пакетах от начала соединения до отсылки TLS ClientHello, иначе это не сработает на linux серверах.<br>\nТипичное использование --wssize=1:6. scale_factor - это степень двойки, на которую умножается winsize.<br>\nЧем он больше, тем потом будет выше скорость, однако если его сделать слишком большим, то не будет достигнута цель, а если слишком малым - потом будут тормоза.<br>\nДля http такая схема бесполезна, поэтому заодно введена возможность в скриптах отдельно настраивать опции дурения nfqws для http и https</p>\n<p><strong>Код:</strong></p>\n<pre><code>NFQWS_OPT_DESYNC=\"--dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-fooling=badsum\"\n#NFQWS_OPT_DESYNC_HTTP=\"--dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum\"\n#NFQWS_OPT_DESYNC_HTTPS=\"--wssize=1:6 --dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum\"\n</code></pre>\n<p>Для http берется NFQWS_OPT_DESYNC_HTTP, если он пустой - NFQWS_OPT_DESYNC<br>\nДля https берется NFQWS_OPT_DESYNC_HTTPS, если он пустой - NFQWS_OPT_DESYNC<br>\nСхема себя показала эффективной против ТСПУ, даже без fake, но со split</p>",
        "post_number": 44,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-03-21T11:15:31.542Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 113,
        "readers_count": 112,
        "score": 92.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/44",
        "can_translate": false
    },
    {
        "id": 2962,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-04-07T09:26:02.748Z",
        "cooked": "<p>Режим десинхронизации synack. Отсылаем SYN,ACK перед SYN.<br>\nПопытка убедить  DPI , что роли клиента и сервера перепутаны.<br>\nРаботает только если между атакующим девайсом и DPI нет NAT.<br>\nЕсли верить geneva, возможно сработает в KZ (если уже не пофиксили)</p>",
        "post_number": 45,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-04-07T10:17:15.603Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 101,
        "readers_count": 100,
        "score": 55.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/45",
        "can_translate": false
    },
    {
        "id": 4482,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-11-12T14:13:12.854Z",
        "cooked": "<p>Добавил поддержку openrc в install_easy.sh<br>\nПроверено на nitrux и alpine.<br>\nalpine - сильно обрезанная система, отсутствуют по умолчанию ip(6)tables<br>\nДелать автоустановку не стал, чтобы не привязываться к специфической для обрезанной системы пакетной базе : apk add iptables ip6tables<br>\nДолжно работать и на gentoo при условии ручной установки ipset : emerge ipset</p>\n<p>Более надежное определение systemd. Некоторые дистрибутивы оставляют systemctl и юниты, хотя systemd там отсутствует</p>\n<p>Для облегчения интеграции с обрезанными системами и прошивками sysv init доработан до поддержки максимально спартанских условий. Может теперь работать с разными adduser/useradd или вовсе без них. Поддержка readonly root.<br>\nИмея rw /opt, туда можно установить entware, необходимые проги, и все, что не дает использовать zapret на полную, это лишь отсутствующие модули ядра. Тут ничем помочь не могу.</p>",
        "post_number": 46,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-11-12T14:16:55.959Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 103,
        "readers_count": 102,
        "score": 55.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/46",
        "can_translate": false
    },
    {
        "id": 4636,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-08T14:15:11.305Z",
        "cooked": "<p>Сделан собственный скрипт для автоматизации проверки стратегий обхода DPI через nfqws - blockcheck.sh<br>\nЕго следует запускать, когда любые инструменты обхода блокировок неактивны.<br>\nПроверка подмены DNS убрана из install_easy.sh и перенесена в blockcheck.sh</p>",
        "post_number": 47,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-08T14:15:11.305Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 97,
        "readers_count": 96,
        "score": 24.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/47",
        "can_translate": false
    },
    {
        "id": 4682,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-10T17:28:32.003Z",
        "cooked": "<p>Реализовано задание раздельных опций nfqws для http и https и для версий ip протоколов 4,6 :</p>\n<pre><code class=\"lang-auto\">NFQWS_OPT_DESYNC_HTTP=\"--dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum\"\nNFQWS_OPT_DESYNC_HTTPS=\"--wssize=1:6 --dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum\"\nNFQWS_OPT_DESYNC_HTTP6=\"--dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none\"\nNFQWS_OPT_DESYNC_HTTPS6=\"--wssize=1:6 --dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none\"\n</code></pre>\n<p>Если какая-то из переменных NFQWS_OPT_DESYNC_HTTP/NFQWS_OPT_DESYNC_HTTPS не определена, берется значение NFQWS_OPT_DESYNC.<br>\nЕсли какая-то из переменных NFQWS_OPT_DESYNC_HTTP6/NFQWS_OPT_DESYNC_HTTPS6 не определена, берется значение NFQWS_OPT_DESYNC_HTTP/NFQWS_OPT_DESYNC_HTTPS.<br>\nЗначит, если определено только NFQWS_OPT_DESYNC, то все 4 специализированные переменные берут это значение.<br>\nЗачем это надо : вряд ли ttl будет одинаковым для ipv4 и ipv6. Если для ipv4 он окажется 9, то таким ttl вы вполне можете начать рубить сайты на ipv6</p>\n<p>Скрипты всеми силами стараются минимизировать количество процессов nfqws, чтобы сохранить память. Для роутеров это важно, а если используется hostlist, то 4 процесса nfqws легко забьют и 256 Mb.  Если для разных вариантов используются одни параметры, то запускается только один процесс с ними.</p>",
        "post_number": 48,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-10T17:31:29.259Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 126,
        "readers_count": 125,
        "score": 55.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/48",
        "can_translate": false
    },
    {
        "id": 4683,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-10T19:15:26.982Z",
        "cooked": "<p>В nfqws добавлен параметр --dpi-desync-ttl6, задающий отдельное значение для ipv6 hop limit.<br>\nЕсли --dpi-desync-ttl6 не указан, то берется значение --dpi-desync-ttl. Чтобы отключить hop limit на ipv6 используйте --dpi-desync-ttl6=0.<br>\nПараметр позволяет не запускать лишний процесс nfqws, когда стратегия обхода для ipv4 и ipv6 отличается лишь ttl.</p>",
        "post_number": 49,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-10T19:15:26.982Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 120,
        "readers_count": 119,
        "score": 29.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/49",
        "can_translate": false
    },
    {
        "id": 4712,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-12T13:09:40.742Z",
        "cooked": "<p>В blockcheck.sh добавлена поддержка FreeBSD через фаервол ipfw<br>\nНеобходима загрузка модулей ipfw.ko и ipdivert.ko</p>",
        "post_number": 50,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-12T13:09:40.742Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 133,
        "readers_count": 132,
        "score": 36.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/50",
        "can_translate": false
    },
    {
        "id": 4863,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-26T14:28:40.719Z",
        "cooked": "<p>В nfqws добавлена возможность настройки дурения badseq.<br>\nМожно указать инкремент seq и ack_seq в виде знакового десятичного числа или знакового hex числа (1000,-1000,0x8000,-0x8000)</p>\n<pre><code class=\"lang-auto\">--dpi-desync-badseq-increment=&lt;int|0xHEX&gt; ; badseq fooling seq signed increment. default -10000\n--dpi-desync-badack-increment=&lt;int|0xHEX&gt; ; badseq fooling ackseq signed increment. default -65000\n</code></pre>\n<p>Изменены значения по умолчанию. Раньше инкремент для обоих параметров был 0x80000000.<br>\nКак оказалось, на некоторых провайдерах дурение badseq работает только в пределах ограниченного окна от текущего seq.</p>",
        "post_number": 51,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-26T14:28:40.719Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 34,
        "reads": 124,
        "readers_count": 123,
        "score": 194.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/51",
        "can_translate": false
    },
    {
        "id": 4867,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2021-12-26T18:09:24.042Z",
        "cooked": "<p>В nfqws добавлен параметр <code>--dpi-desync-fake-unknown=&lt;filename&gt;</code><br>\nв нем указывается файл, который будет отсылаться в качестве фейка при<code> --dpi-desync=fake --dpi-desync-any-protocol</code><br>\nи обработке не http запроса и не TLS ClientHello вместо стандартного пакета из 256 нулей</p>\n<p>cutoff теперь имеет 3 варианта ограничителя<br>\nn - номер пакета, начиная с 1<br>\nd - номер пакета с данными, начиная с 1<br>\ns - relative sequence number. он равен количеству переданных от клиента байтов + 1<br>\nОтсечение происходит, если параметр равен или больше заданного значения.</p>\n<pre><code class=\"lang-auto\">--wssize-cutoff=[n|d|s]N               ; apply server wsize only to packet numbers (n, default), data packet numbers (d), relative sequence (s) less than N\n--dpi-desync-cutoff=[n|d|s]N           ; apply dpi desync only to packet numbers (n, default), data packet numbers (d), relative sequence (s) less than N\n</code></pre>\n<p>Вкратце поясню зачем вся эта котовасья.<br>\nПредставьте , что настал очередной печальный день в истории рунета, и РКН решил заблокировать SMTP (тут можете подставить ваш любимый протокол, телеграм, допустим). Шлите почту только через авторизованные сервисы, где сидит тов. майор. SMTP протокол распознается и режется на ТСПУ.</p>\n<p>Задача точно такая же, как и в случае http/https. Сделать так, чтобы DPI не понял, что это SMTP.<br>\nНо так случилось, что абы чего DPI не пропускает. Левые протоколы тоже стали резать.<br>\nНадо подсунуть что-то безобидное. Например, http запрос.<br>\nИ делать это до того момента, как начнется шифрованная фаза (ведь вы конечно же не будете слать почту без TLS ?)<br>\nОбычно при отсылке почты через SMTP клиент выдает 2 открытых сообщения “EHLO servername” и “STARTTLS”, потом идет TLS handshake.</p>\n<pre><code class=\"lang-auto\">nfqws --qnum=250 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync=fake,split2 --dpi-desync-ttl=5 --dpi-desync-fake-unknown=/opt/zapret/files/fake/fake_http_req_example.bin\n</code></pre>\n<p>Будут обработаны первые 3 исходящих пакета TCP соединения с данными (то есть не будут в нумерации учтены пустые пакеты с ACK)<br>\nБудут отосланы следующие сообщения : Будут отосланы следующие сообщения :</p>\n<pre><code class=\"lang-auto\">фейк : GET / HTTP/1.1 ... Host: iana.org\nреал : EH\nреал : LO mail.myserver.com\nфейк : GET / HTTP/1.1 ... Host: iana.org\nреал : ST\nреал : ARTTLS\nфейк : TLSClientHello от w3.org\nреал : TLSClientHello от mail.myserver.com - первые 2 байта\nреал : TLSClientHello от mail.myserver.com - остальные байты\n</code></pre>\n<p>после этого наступает состояние desync-cutoff (отсечение desync).<br>\nnfqws больше не трогает это соединение, чтобы не замусоривать канал всякой ерундой и не снижать скорость</p>\n<p>если добавите <code>--debug</code>, все станет понятно из лога nfqws</p>\n<p>Разумеется, описанный сценарий пока чисто гипотетический, он служит лишь для иллюстрации техники. Будет ли это работать и с какими нюансами - покажет время.<br>\nЕсли тупо забанят 25 порт или по IP startmail, protonmail, … - не сработает точно</p>",
        "post_number": 52,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2021-12-27T14:21:50.169Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 22,
        "reads": 142,
        "readers_count": 141,
        "score": 138.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/52",
        "can_translate": false
    },
    {
        "id": 4947,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-01-01T17:51:34.877Z",
        "cooked": "<p>Реализован задел для десинхронизации udp протоколов.<br>\nНацелено прежде всего всего на quic и dht, хотя далеко не только.<br>\nПоддерживается только режим десинхронизации fake, поскольку фрагментация udp невозможна на транспортном уровне. Возможна только ip фрагментация - она пока не реализована.<br>\nFake нацелен на атаку на stateful DPI и бесполезен для stateless.</p>\n<p>quic - новый протокол для доступа к сайтам по http3. Полностью шифрован. DPI вынужден будет расшифровывать непростым алгоритмом каждый пакет, чтобы хотя бы выдернуть SNI. Слишком дорого для stateless анализа и слишком опасно быть за-ddos-еным. Потому если ему скормить фейк, это может решить вопрос. Пока еще тестировать не на чем, но все впереди. Возможно, будут просто резать quic.</p>\n<p>DHT бутстрап выполняется по UDP. Уже однажды пытались его заблокировать. Исследователи <a href=\"https://ntc.party/t/bittorrent-dht/1335\">сообщали</a>, что если перед запросом скормить левый udp пакет с теми же source/dest port, то DPI отстает от UDP канала до истечения таймаута неактивности.</p>\n<p>Задействование атаки на первый исходящий пакет данных :</p>\n<pre><code class=\"lang-auto\">iptables -t mangle -I POSTROUTING -p udp --dport 443 -j NFQUEUE --queue-num 200 --queue-bypass\nnfqws --qnum=200 --dpi-desync-any-protocol --dpi-desync=fake --dpi-desync-ttl=5 --dpi-desync-cutoff=d2\n</code></pre>\n<p>Фулинг работает только по ttl и badsum. Другое к udp неприменимо.<br>\nМожно заменить fake payload так : --dpi-desync-fake-unknown-udp=/opt/zapret/files/fake/fake_quic_initial_example.bin</p>",
        "post_number": 53,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-01-01T20:08:42.289Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 27,
        "reads": 115,
        "readers_count": 114,
        "score": 158.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/bittorrent-dht/1335",
                "internal": true,
                "reflection": false,
                "title": "Блокировка BitTorrent DHT",
                "clicks": 2
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/53",
        "can_translate": false
    },
    {
        "id": 4960,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-01-03T09:44:25.264Z",
        "cooked": "<p>Реализована фрагментация ipv4 и ipv6 на уровне ip : <code>--dpi-desync=ipfrag2</code><br>\nК сожалению, это не прорыв, а скорее научный интерес. Современная сеть крайне враждебна к IP фрагментации.<br>\nФрагментированные пакеты часто застревают или пересобираются/перефрагментируются по пути.<br>\nЧасто их отбрасывают принимающие узлы, возможно как мера против ddos атак.<br>\nLinux всегда пересобирает проходящие (forwarded) фрагментированные ipv6, если это возможно.<br>\nНо как последнее средство для какой-то конкретной цели при соблюдении определенных условий теоретически может сработать<br>\nМожно проверить с некоторой долей вероятности сработает ли обход на конкретном ресурсе через команду ping с размером пакета &gt;1472.<br>\nЕсли обычный пинг ходит, а длинный не ходит, то фрагментация режется.</p>\n<p>IP фрагментация доступна для tcp и udp протоколов.<br>\nВозможно, с cutoff  хороший вариант для доступа к своему wireguard серверу в случае блокировки wireguard протокола, если провайдер и хостер не режут фрагменты</p>",
        "post_number": 54,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-01-03T11:01:16.157Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 102,
        "readers_count": 101,
        "score": 50.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/54",
        "can_translate": false
    },
    {
        "id": 5172,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-01-23T08:55:15.721Z",
        "cooked": "<p>Обеспечена совместимость с последними версиями pfsense.<br>\nДобавлены бинарики , собранные на FreeBSD 11 x64. Они должны работать на системах с ядром FreeBSD 11 и выше.<br>\nХотя они и запускаются как минимум на FreeBSD 10, бинарик dvtws нельзя использовать на этих системах !<br>\nВ коде присутствует условная компиляция , исправляющая баг/фичу FreeBSD 10.x и более старых.<br>\nНа более старых системах нужно собирать самостоятельно, при этом скорее всего придется обновлять и компилятор CLang не из репозитория. Эти системы уже out-of-support, могут быть даже проблемы с удаленными с серверов репозиториями. Лучше проапгрейдиться</p>\n<p>Для запуска в pfsense требуется выполнить ряд действий, описанных в docs/bsd.txt</p>",
        "post_number": 56,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-01-23T08:59:45.048Z",
        "reply_count": 0,
        "reply_to_post_number": 54,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 80,
        "readers_count": 79,
        "score": 41.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/56",
        "can_translate": false
    },
    {
        "id": 5251,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-02-01T17:47:18.466Z",
        "cooked": "<p>Только для ipv6 режим десинхронизации hopbyhop, fooling hopbyhop,hopbyhop2.</p>\n<p>Fooling : добавляется ipv6 extenstion header “hop-by-hop options” во все фейки.<br>\nВ варианте hopbyhop2 добавляются 2 хедера, что является нарушением стандарта и гарантированно отбрасывается стеком протоколов во всех ОС. Один хедер hop-by-hop принимается всеми ОС, однако на некоторых каналах/провайдерах такие пакеты могут фильтроваться и не доходить. Расчет идет на то, что DPI проанализирует пакет с hop-by-hop, но он либо не дойдет до адресата всилу фильтров провайдера, либо будет отброшен сервером, потому что хедера два.</p>\n<p>Desync: (не путать с fooling !) заключается в добавлении хедера “hop-by-hop options” во все оригинальные пакеты, попадающие под десинхронизацию. Здесь надо обязательно понимать, что добавление хедера увеличивает размер пакета, потому не может быть применено к пакетам максимального размера. Это имеет место при передаче больших сообщений. В случае невозможности отослать модицифированный пакет дурение будет отменено, пакет будет выслан в оригинале.<br>\nРасчет идет на то, что DPI увидит 0 в поле next header основного заголовка ipv6 и не будет скакать по<br>\nextension хедерам в поисках транспортного хедера. Таким образом не поймет, что это tcp или udp, и пропустит пакет без анализа. Возможно, какие-то DPI на это купятся.<br>\nМожет сочетаться с любыми режимами 2-й фазы.<br>\nНапример, “hopbyhop,split2” означает разбить tcp пакет на 2 сегмента, в каждый из них добавить hop-by-hop.<br>\nПри “hopbyhop,ipfrag2” последовательность хедеров будет : ipv6,hop-by-hop,fragment,tcp/udp.<br>\nПри поступлении пакета ipv4 режим hopbyhop игнорируется, но работает десинхронизация 2-й фазы, если таковая имеется.<br>\nМожет применяться как к tcp, так и к udp.</p>",
        "post_number": 57,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-02-02T12:33:23.102Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 85,
        "readers_count": 84,
        "score": 42.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/57",
        "can_translate": false
    },
    {
        "id": 5285,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-02-05T12:49:41.324Z",
        "cooked": "<p>Добавлены режимы десинхронизации ipv6  destopt и ipfrag1.<br>\nЗаключаются в добавлении хедеров “destination options” и “fragment” (фрагмент единственный).<br>\nВ thc-ipv6 toolkit есть прога firewall6. Она пытается применить различные экзотические комбинации extension headers для проверки что пропускается, а что нет.<br>\nhopbyhop часто режется. на 2 провайдерах проверил. destopt и единственный фрагмент обычно не режутся.<br>\nостается понять как будут DPI воспринимать эти хедеры. будут ли они реагировать.<br>\nпока не на чем проверить</p>\n<p>По поводу режима ipfrag1 внимательно читать комментарии по IP фрагментации в readme.txt<br>\nОбычно для ухода фрагментов ipv6 с локальной системы (OUTPUT) достаточно занести эти пакеты в notrack, но если фрагмент только один, fragment header может быть молча убран модулем nf_defrag_ipv6.<br>\nКак повезет. На некоторых системах это случается, на некоторых нет. Гарантии может дать только загрузка модуля ip6table_raw с параметром raw_before_defrag=1.<br>\nВ openwrt нужно изменить файл вот так :</p>\n<pre><code class=\"lang-auto\">cat /etc/modules.d/ipt-raw6\nip6table_raw raw_before_defrag=1\n</code></pre>\n<p>и ребутнуть систему.</p>",
        "post_number": 58,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-02-05T15:12:13.654Z",
        "reply_count": 0,
        "reply_to_post_number": 57,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 88,
        "readers_count": 87,
        "score": 47.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/58",
        "can_translate": false
    },
    {
        "id": 5362,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-02-15T14:49:35.214Z",
        "cooked": "<p>Проведен мощный рефакторинг скриптов запуска с целью поддержки nftables.<br>\nОсновная мотивация - переход будущей версии OpenWRT на firewall4+nftables.<br>\niptables уходят из мейнстрима openwrt, хотя могут быть доустановлены и использованы параллельно с nftables.<br>\nНо есть и некоторая нерешаемая боль, связанная с nftables, о которой можно почитать здесь :</p>\n<p><a href=\"https://github.com/bol-van/zapret/blob/master/docs/nftables_notes.txt\">https://github.com/bol-van/zapret/blob/master/docs/nftables_notes.txt</a></p>\n<p>nftables можно использовать на linux с достаточно новыми версиями ядра и утилиты nft.<br>\nНа OpenWRT nftables можно использовать, начиная с 21.xx. На более старых скорее всего будут проблемы.<br>\nНа OpenWRT 21.xx в nftables недоступен hardware flow offloading и не будет работать software flow offloading,если есть названия интерфейсов , начинающихся с цифры. Обычно это происходит, когда включен ipv6 и имеется 6to4,6in4. (fixed в snapshot версиях после 21.x)</p>\n<p>На более новых системах, где уже основной фаервол firewall4+nftables, можно переключить zapret на iptables.<br>\nПлюс - возможность использования больших ip lists на роутерах, минус - отсутствие поддержки flow offloading в любом варианте.</p>\n<p>Что нужно понимать про скрипты запуска в OpenWRT : на системах с firewall3 при использовании iptables производится интеграция в fw3, как это было и раньше.<br>\n/etc/init.d/zapret {start,stop} не трогают фаервол<br>\nВместо этого правила применяются через firewall include в /etc/config/firewall : /etc/firewall.zapret<br>\nПри использовании nftables, либо iptables на системах с firewall4, управление фаерволом происходит в init скрипте, как это делается на традиционных linux.<br>\nВ custom скриптах появилась отдельная функция для применения фаервола nft<br>\nВ openwrt custom теперь в iptables функции требуется и стартовать, и останавливать правила, как это сделано в традиционном linux.<br>\nФункция стала полностью совместима с версией из sysv.<br>\nЕще одно небольшое новшество - написан openrc адаптер для запуска sysv init.<br>\nОказалось, что некоторые системы с openrc (alpine linux), не автозапускают скрипты из /etc/init.d, если они не #!/sbin/openrc-run</p>",
        "post_number": 59,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-02-17T16:45:27.518Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 92,
        "readers_count": 91,
        "score": 88.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret/blob/master/docs/nftables_notes.txt",
                "internal": false,
                "reflection": false,
                "title": "zapret/nftables_notes.txt at master · bol-van/zapret · GitHub",
                "clicks": 10
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/59",
        "can_translate": false
    },
    {
        "id": 5397,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-02-23T11:05:26.773Z",
        "cooked": "<p>Новости про nftables.</p>\n<p>Выпустили, наконец, релиз nft 1.0.2.<br>\nПофиксена проблема с кавычками в flowtable</p>\n<p>Боль с количеством RAM и nfset-ами по прежнему там. Создал баг в багзилле netfilter.</p>",
        "post_number": 60,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-02-23T13:16:08.222Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 85,
        "readers_count": 84,
        "score": 77.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/60",
        "can_translate": false
    },
    {
        "id": 5716,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-03-04T16:55:44.703Z",
        "cooked": "<p>В связи сами знаете с чем банят известные ресурсы типа МОРДО КНИГИ<br>\nОни используют QUIC. QUIC базируется на UDP и полностью зашифрован. Для DPI довольно сложно расшифровать QUIC , чтобы распознать домен. Потому начали на ТСПУ блочить QUIC. Видимо на все IP адреса, кроме whitelist (на ВКОНТАКТ QUIC не блокируется)<br>\nТочно блокируется на youtube, google, facebook.</p>\n<p>Я сделал поддержку UDP в nfqws упреждающе (см выше мои посты). Она сработала как надо.<br>\nВот это решает проблему :</p>\n<pre><code class=\"lang-auto\">iptables -t mangle -I POSTROUTING -p udp --dport 443 -m mark ! --mark 0x40000000/0x40000000 -m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:3 -j NFQUEUE --queue-num 205 --queue-bypass\nnfqws --qnum=205 ---dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d4\n</code></pre>\n<p>Небольшое изменение в custom скриптах. Теперь необходимо указывать протокол “-p tcp” в фильтре zapret_custom_firewall<br>\nНаписан custom скрипт custom-nfqws-quic4all, который наследует режим MODE=nfqws и включает обход блокировки QUIC на все адреса, вне зависимости от фильтра ipset/hostlist.</p>\n<p>Как оказалось, движок QUIC от chromium ловит не только UDP, но и ICMP ttl expired in transit, связанные со своими UDPшками. Они приходят от фейк-пакетов с низким TTL. Как только броузер славливает такой ICMP, сеанс считает порванным, дальше ничего не проходит. Mozilla этим НЕ страдает.<br>\nЛечение : либо резать ttl expired in transit (нехорошо, поломаете трейсилки), либо отказаться от ttl fooling и заменить на любой другой, который сработает. Например, badsum.<br>\nА можно вообще убрать fooling. В этом случае фейки будут доходить до сервера, но поскольку там трэш, они будут отбрасываться процессом веб сервера.<br>\nНо если вы вдруг используете badsum и что-то на пути будет дропать пакеты с badsum (роутеры mediatek, заводские прошивки с linux), то обход не сработает<br>\nПроще и надежнее убрать fooling</p>",
        "post_number": 61,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-03-04T17:03:15.658Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 32,
        "reads": 96,
        "readers_count": 95,
        "score": 179.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/61",
        "can_translate": false
    },
    {
        "id": 6134,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-03-17T10:38:29.457Z",
        "cooked": "<p>В последнее время начали банить крупные сайты по типу facebook. У них прыгающий IP. Если ресолвить <a href=\"http://facebook.com\">facebook.com</a> и добавлять в ip list, то очень быстро перестает работать.<br>\nМожно использовать некоторые листы с antifilter.download, где эта проблема решена (например, allyouneed). Если это не вариант, теперь можно самому закидывать дополнительные ip из скрипта IPSET_HOOK в конфиге. Этот скрипт вызывается при каждом заполнении ipset/nfset/table с параметром $1=имя таблицы. IP адреса или подсети должны быть выведены в stdout.<br>\nПроблема пересечения интервалов в nfset решается автоматически. Об этом думать не нужно.<br>\nЕсли задана переменная LISTS_RELOAD, IPSET_HOOK будет вызван 1 раз без параметров.</p>\n<p>Пример как добавить в таблицу zapret все IPv4 адреса из автономной системы facebook/instagram :</p>\n<pre><code class=\"lang-auto\">#!/bin/sh\n\n# AS32934 - facebook,instagram\n\nAS=\"32934\"\n\naslist()\n{\n    whois -h whois.radb.net -- \"-i origin AS$1\" | sed -nre 's/^route: *(.*)/\\1/p'\n}\n\n[ \"$1\" = \"zapret\" ] &amp;&amp; {\n    for as in $AS; do\n        aslist $as\n    done\n}\n</code></pre>\n<p>Номера автономных систем перечисляются в переменной AS через пробел</p>",
        "post_number": 62,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-03-17T10:40:35.860Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 15,
        "reads": 92,
        "readers_count": 91,
        "score": 93.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://facebook.com",
                "internal": false,
                "reflection": false,
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/62",
        "can_translate": false
    },
    {
        "id": 6265,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-03-20T17:59:14.286Z",
        "cooked": "<p>реализовано определение протокола QUIC<br>\nтеперь не обязательно указывать --dpi-desync-any-protocol, чтобы работать по QUIC initial<br>\nрасшифровка QUIC initial и извлечение имени хоста, чтобы работал --hostlist, не поддерживается</p>\n<p>К сожалению, было замечено на одном из провайдеров с ТСПУ, что начало QUIC сеанса устанавливается успешно, но пакеты вскоре внезапно перестают ходить, так что качество броузинга становится значительно хуже с таким QUIC, чем без него<br>\nпричины пока не ясны</p>",
        "post_number": 63,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-03-20T17:59:14.286Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 78,
        "readers_count": 77,
        "score": 65.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/63",
        "can_translate": false
    },
    {
        "id": 6355,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-03-22T11:09:28.726Z",
        "cooked": "<p>Еще немного по поводу IP фрагментации.</p>\n<p>При использовании iptables и NAT, похоже, что нет способа прицепить обработчик очереди после NAT.<br>\nMASQUERADE является финальным таргетом, после него NFQUEUE не срабатывает.<br>\nПроходящий пакет попадает в nfqws с source адресом внутренней сети, затем фрагментируется и уже не обрабатывается NAT.<br>\nТак и уходит во внешюю сеть с src ip 192.168.x.x. Следовательно, метод не срабатывает.<br>\nВидимо единственный рабочий метод - отказаться от iptables и использовать nftables.<br>\nХук должен быть с приоритетом 101 или выше.</p>\n<p>В nftables скриптах от zapret  реализован перехват пакетов в NFQUEUE после NAT. Там это сделать достаточно просто.<br>\nНо при этом если сгенерированные в nfqws пакеты не вводить в состояние notrack, то они заново процессятся NAT, происходит подмена src port. Потому добавлен хук predefrag, где эти пакеты помечаются как notrack. Дополнительно открывается путь , чтобы отсылать ipv6 фрагменты на ядрах 4.16+</p>",
        "post_number": 64,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-03-22T11:13:04.454Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 81,
        "readers_count": 80,
        "score": 71.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/64",
        "can_translate": false
    },
    {
        "id": 6479,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-03-25T14:17:14.926Z",
        "cooked": "<p>Сделал расшифровку и анализ QUIC initial crypto frames в nfqws.<br>\nТеперь работает hostlist и видно куда лезем в режиме --debug</p>\n<p>Алгоритм довольно сложный. Требует крипто библиотеки. Чтобы не тащить тяжелые зависимости, минимально необходимый код понадерган из разных исходников + написано своего<br>\nНежатый бинарик вырос примерно на 20 кб</p>",
        "post_number": 65,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-03-25T14:17:14.926Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 94,
        "readers_count": 93,
        "score": 88.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/65",
        "can_translate": false
    },
    {
        "id": 6959,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-04-12T13:01:35.826Z",
        "cooked": "<p>Реализованы режимы десинхронизации fakeknown и udplen<br>\nfakeknown - это то же самое, что fake, только применяется исключительно к распознанным протоколам, даже если выставлено --dpi-desync-any-protocol. При этом вторая фаза десинхронизации применяется как раньше.<br>\nudplen - режим, относящийся только к udp. Пакет увеличивается в размере, дополняясь нулями, на указанное в --dpi-desync-udplen-increment количество байт. По умолчанию - 2. Нацелено на обман DPI, ориентирующихся на размеры пакетов. Может сработать при условии, что протокол приложения не завязан жестко на размер udp payload и не обижается на изменение размера.<br>\nК сожалению, обмануть таким образом статистическое застревание QUIC на ТСПУ не удается</p>",
        "post_number": 66,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-04-12T13:01:35.826Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 37,
        "reads": 98,
        "readers_count": 97,
        "score": 204.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/66",
        "can_translate": false
    },
    {
        "id": 7462,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-05-10T18:01:40.050Z",
        "cooked": "<p>Сделал инструкцию для быстрого старта</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt\" target=\"_blank\" rel=\"noopener\">bol-van/zapret/blob/master/docs/quick_start.txt</a></h4>\n\n\n      <pre><code class=\"lang-txt\">﻿Специально для тех, кто хочет побыстрее начать, но не хочет слишком углубляться в простыню readme.txt.\n\nПредупреждение : не пишите в issue вопросы типа \"как скопировать файл\", \"как скачать\", \"как запустить\", ...\nТо есть все , что касается базовых навыков обращения с ОС linux. Эти вопросы буду закрывать сразу.\nЕсли у вас подобные вопросы возникают, рекомендую не использовать данный софт или искать помощь где-то в другом месте.\n\nОбход DPI является хакерской методикой. Под этим словом понимается метод, которому сопротивляется окружающая среда,\nкоторому автоматически не гарантирована работоспособность в любых условиях и на любых ресурсах,\nтребуется настройка под специфические условия у вашего провайдера. Условия могут меняться со временем,\nи методика может начинать или переставать работать, может потребоваться повторный анализ ситуации.\nМогут обнаруживаться отдельные ресурсы, которые заблокированы иначе, и которые не работают или перестали работать.\nПоэтому очень желательно иметь знания в области сетей, чтобы иметь возможность проанализировать техническую ситуацию.\nНе будет лишним иметь обходные каналы проксирования трафика на случай, если обход DPI не помогает.\n\nБудем считать, что у вас есть система на базе традиционного linux или openwrt.\nЕсли у вас традиционный linux - задача обойти блокировки только на этой системе, если openwrt - обойти блокировки\nдля подключенных устройств. Это наиболее распространенный случай.\n\n1) Скачайте zip архив проекта с github в /tmp, распакуйте его там,\nлибо клонируйте проект через : git clone --depth 1 https://github.com/bol-van/zapret\n</code></pre>\n\n\n\n  This file has been truncated. <a href=\"https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt\" target=\"_blank\" rel=\"noopener\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 67,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-05-10T18:01:40.050Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 27,
        "reads": 106,
        "readers_count": 105,
        "score": 161.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt",
                "internal": false,
                "reflection": false,
                "title": "zapret/quick_start.txt at master · bol-van/zapret · GitHub",
                "clicks": 95
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/67",
        "can_translate": false
    },
    {
        "id": 7527,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-05-15T13:02:01.336Z",
        "cooked": "<p>nfqws теперь учитывает fwmark пакетов, попадающих к нему на обработку<br>\nесли в результате обработки пакета nfqws генерит свой пакет, его fwmark будет не 0x40000000, а 0x40000000 | &lt;original_fwmark&gt;</p>\n<p>добавлен алгоритм лечения проблемы неверного выбора исходящего интерфейса для сгенерированных пакетов<br>\nпараметры --bind-fix4 и --bind-fix6<br>\nлечение идет через вызов bind() на raw socket и setsockopt SO_BINDTODEVICE<br>\nинтерфейс назначения берется из NFQUEUE. куда оригинальный пакет уходил, туда и отправляем сгенеренные. это возможно как для OUTPUT, так и POSTROUTING<br>\nlinux не был бы linux-ом, если бы это не работало по разному для ipv4 и ipv6</p>\n<p>в случае отсутствия опции bind-fix для соответствующего семейства ip отправка идет так, как было раньше. то есть система решает сама<br>\nПроблема неверного выбора интерфейса может случиться, когда у вас несколько аплинков или присутствует policy routing на базе source ip.<br>\nПричина - особенности маршрутизации пакетов , отправленных через raw sockets.<br>\nДля сценария стандартного роутера LAN-WAN это не актуально</p>",
        "post_number": 68,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-05-15T14:43:47.877Z",
        "reply_count": 1,
        "reply_to_post_number": 67,
        "quote_count": 0,
        "incoming_link_count": 19,
        "reads": 108,
        "readers_count": 107,
        "score": 121.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/68",
        "can_translate": false
    },
    {
        "id": 8010,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-05-30T06:41:42.673Z",
        "cooked": "<p>Удалось забороть хаотические зависания QUIC на ТСПУ при пробивке udp фейком.<br>\nВсего лишь вместо нулей надо слать достаточно длинный пакет с quic short header вместо нулей.</p>\n<pre><code class=\"lang-auto\">nfqws --qnum=210 --user=daemon --dpi-desync-fwmark=0x40000000 --dpi-desync=fake --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_short_header.bin\niptables -t mangle -I POSTROUTING -p udp --dport 443 -m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:3 -m mark ! --mark 0x40000000/0x40000000 -j NFQUEUE --queue-num 210 --queue-bypass\n</code></pre>\n<p>Если использовать скрипты, то вариант custom с файлом custom-nfqws-quic4all<br>\nи параметром config</p>\n<blockquote>\n<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_short_header.bin”</p>\n</blockquote>\n<p>Шифрованное содержимое особого значения не имеет, потому что DPI все равно не способен его расшифровать. Важен лишь первый байт, а точнее 2 его старших бита, и общая длина пакета.</p>",
        "post_number": 69,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-05-30T06:57:00.905Z",
        "reply_count": 0,
        "reply_to_post_number": 68,
        "quote_count": 0,
        "incoming_link_count": 27,
        "reads": 110,
        "readers_count": 109,
        "score": 157.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/69",
        "can_translate": false
    },
    {
        "id": 8540,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-06-18T09:46:05.296Z",
        "cooked": "<p>Обновил инструкции по настройке policy routing openwrt → vps на базе wireguard .<br>\nДобавлены правила nftables и способ их прикрутки для новых версий openwrt.<br>\nУчтен новый статус wireguard. Он был включен в ядро linux 5.6.<br>\nТак же обновлен вариант для redsocks.</p>",
        "post_number": 70,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-06-18T09:47:22.730Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 100,
        "reads": 196,
        "readers_count": 195,
        "score": 539.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/70",
        "can_translate": false
    },
    {
        "id": 8582,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-06-21T11:20:24.242Z",
        "cooked": "<p>Информация для любителей кинетиков на стоковой прошивке, где есть entware.</p>\n<p>NDMS имеет проприетарное ядро, где в параллель со стандартными средствами маркировки mark и ct mark имеется в skbuff еще 1 марк - проприетарный ndmmark.<br>\nОн был сделан, чтобы управлять логикой iptables, оставляя основной марк полностью свободным для юзера.</p>\n<p>В частности, ndmmark используется для ограничения маскарада. Только пакеты с определенным ndmmark идут на маскарад. См <code>iptables-save -t nat</code></p>\n<p>Если вы пытаетесь обойти блокировку quic через nfqws, то nfqws в этом случае дропает первый UDP пакет с quic initial, затем отправляет фейк своими средствами, ничего не зная о ndmmark. Первый пакет создает запись в conntrack, и она будет без маскарада.<br>\nВсе дальнейшие пакеты будут уходить на внешний интерфейс с source ip 192.168.x.x и дропаться провайдером.</p>\n<p>Таким образом, вы заставляете nfqws работать не на обход, а на блокировку QUIC.<br>\nИ это даже иногда делает экспиренс лучше, если вдруг у провайдера DPI плохо блокирует QUIC, позволяя сеансу пройти дальше initial, а затем обрывая поток.<br>\nТого же эффекта вы можете достичь просто блокируя порт udp:443 на выход. Для этого nfqws не нужен.</p>\n<p>Для лечения посмотрите как устроены ваши цепочки и добавьте в  нужную цепочку маскарад на исходящий интерфейс WAN. Это может быть , например, ppp0, если у вас pppoe.</p>\n<p>Если используются скрипты от zapret в варианте sysv, то можно добавить лечение в custom.<br>\nКак-то так, но смотрите какие у вас реально цепочки (я за версии прошивок не ручаюсь), и какой внешний интерфейс.<br>\nПример лечащей добавки в скрипт custom-nfqws-quic4all</p>\n<pre><code class=\"lang-auto\">zapret_custom_firewall()\n{\n        # $1 - 1 - run, 0 - stop\n\n        local MODE_OVERRIDE=nfqws\n        local f\n        local first_packets_only=\"-m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:3\"\n        local desync=\"-m mark ! --mark $DESYNC_MARK/$DESYNC_MARK\"\n\n        zapret_do_firewall_rules_ipt $1\n\n        f=\"-p udp --dport 443\"\n        fw_nfqws_post $1 \"$f $desync $first_packets_only\" \"$f $desync $first_packets_only\" $QNUM2\n\n        # fix NDM kernel masquerade for nfqws\n        ipta_add_del $1 _NDM_MASQ -t nat -o ppp0 -j MASQUERADE\n}\n</code></pre>",
        "post_number": 71,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-06-21T11:48:27.550Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7045,
        "reads": 233,
        "readers_count": 232,
        "score": 35241.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/8074/442",
                "internal": true,
                "reflection": true,
                "title": "Обсуждение: Замедление YouTube в России",
                "clicks": 31
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/100",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 10
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/3278",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/71",
        "can_translate": false
    },
    {
        "id": 9238,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-07-23T20:38:40.702Z",
        "cooked": "<p>Попал мне девайс Irbis TZ797 на android 8.1<br>\nЕсли запускать обработчик очереди NFQUEUE на пакеты с интерфейса с сотовой сети, при этом кабель USB не воткнут (нет зарядки), то ядро очень быстро частично виснет, так что перестают работать тач и физические кнопки. При этом в броузере может продолжать анимироваться картинка.<br>\nВыяснил, что проблема связана с UID. По умолчанию nfqws назначает себе UID 0x7FFFFFFF. Видимо, в более новых ведроидах (на 5 точно такого не было), процессы с такими UID могут ложиться в suspend, что блокирует обработку очереди , а на это завязаны вызовы ядра. И получаем то, что видим.<br>\nЛекарство : nfqws --uid 1<br>\nПерепробовал несколько вариантов из низких uid. Все не виснут.<br>\nДля nfqws не нужны специальные uid 3003,3004,3005.<br>\nДело в том, что nfqws назначает себе привилегии cap_net_raw, cap_net_admin. Это необходимо для работы с nfqueue и raw sockets. Для android это является одним из разрешающих условий для доступа к сети, вне зависимости от uid.</p>",
        "post_number": 72,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-07-23T20:38:40.702Z",
        "reply_count": 0,
        "reply_to_post_number": 71,
        "quote_count": 0,
        "incoming_link_count": 30,
        "reads": 174,
        "readers_count": 173,
        "score": 184.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/72",
        "can_translate": false
    },
    {
        "id": 9394,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-07-27T13:59:27.832Z",
        "cooked": "<p>Добавлена возможность усекания пакетов в режиме udplen (отрицательный increment). Более, чем до 1 байта, усечение не работает.<br>\nМожет быть полезно, когда прога добавляет паддинг в пакет, который ни на что не влияет, не проверяется, однако DPI проверяет размер пакета на минимальную длину.<br>\nУсечение пакетов от стандартных программ может помочь.</p>\n<p>Поддержка множественных листов включения и исключения.<br>\nАльтернативой ipset является использование tpws или nfqws со списком доменов.<br>\nОба демона принимают неограниченное количество листов include (–hostlist) и exclude (–hostlist-exclude).<br>\nВсе листы одного типа обьединяются, и таким образом остаются только 2 листа.<br>\nПрежде всего проверяется exclude list. При вхождении в него происходит отказ от дурения.<br>\nДалее при наличии include list проверяется домен на вхождение в него. При невхождении в список отказ от дурения.<br>\nПустой список приравнивается к его отсутствию.<br>\nВ иных случаях происходит дурение.<br>\nНет ни одного списка - дурение всегда.<br>\nЕсть только exclude список - дурение всех, кроме.<br>\nЕсть только include список - дурение только их.<br>\nЕсть оба - дурение только include, кроме exclude.<br>\nВ системе запуска это обыграно следующим образом.<br>\nПрисутствуют 2 include списка :<br>\nipset/zapret-hosts-users.txt.gz или ipset/zapret-hosts-users.txt<br>\nipset/zapret-hosts.txt.gz или ipset/zapret-hosts.txt<br>\nи 1 exclude список<br>\nipset/zapret-hosts-users-exclude.txt.gz или ipset/zapret-hosts-users-exclude.txt<br>\nПри режиме фильтрации MODE_FILTER=hostlist система запуска передает nfqws или tpws все листы, файлы которых присутствуют.<br>\nЕсли вдруг листы include присутствуют, но все они пустые, то работа аналогична отсутствию include листа.<br>\nФайл есть, но не смотря на это дурится все, кроме exclude.<br>\nЕсли вам нужен именно такой режим - не обязательно удалять zapret-hosts-users.txt. Достаточно сделать его пустым.<br>\nПоддомены учитываются автоматически. Например, строчка “<code>ru</code>” вносит в список “<code>*.ru</code>”. Строчка “<code>*.ru</code>” в списке не сработает.<br>\nСписок доменов РКН может быть получен скриптами ipset/get_reestr_hostlist.sh или ipset/get_antizapret_domains.sh - кладется в ipset/zapret-hosts.txt.gz.<br>\nПри фильтрации по именам доменов демон должен запускаться без фильтрации по ipset.<br>\ntpws и nfqws решают нужно ли применять дурение в зависимости от хоста, полученного из протокола прикладного уровня (http, tls, quic).</p>",
        "post_number": 73,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-08-31T12:06:58.142Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 81,
        "reads": 160,
        "readers_count": 159,
        "score": 437.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/73",
        "can_translate": false
    },
    {
        "id": 10814,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-11-01T07:44:22.074Z",
        "cooked": "<p>Обнаружилось, что в openwrt на базе nftables на самой типичной конфигурации реального роутера (bridge lan/wlan), не срабатывала схема включения hardware offload. Причина - проверка, чтобы все компоненты моста поддерживали hw offload. wlan его не поддерживает. Сделал, чтобы из моста выбирались только поддерживающие интерфейсы, и только они добавлялись в flowtable.</p>",
        "post_number": 74,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-11-01T07:49:31.703Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 18,
        "reads": 108,
        "readers_count": 107,
        "score": 111.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/74",
        "can_translate": false
    },
    {
        "id": 10947,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-11-15T12:43:52.525Z",
        "cooked": "<p>Интересная проблема обнаружилась с hardware flow offloading.<br>\nСтабильная версия openwrt 22.03 имеет ядро 5.10.<br>\nТолько начиная с ядра 5.13 автоматически определяются физические интерфейсы под мостами, pppoe и vlan. До этого надо было как-то вручную определять порты моста, базовый ethernet device под vlan или pppoe, и только их совать в flowtable.<br>\nДля мостов и VLAN особых проблем нет. /sys/class/net/&lt;iface_name&gt; содержит ссылки lower_* на нужные интерфейсы. common/nft.sh из zapret умеет с таким работать. В случае hardware offload нижние девайсы определяются автоматом и засовываются в flowtable. Скрипт пытается туда засунуть и верхние, и нижние девайсы. Что проглотит - то и хорошо.</p>\n<p>Но в случае pppoe не так все просто. Видимо нет очевидного способа определить что лежит под pppoe. В fw4 девайс определяется через вызов к netifd<br>\n“ifstatus wan” возвращает<br>\n“l3-device”: “pppoe-wan”<br>\n“device”: “eth0”<br>\nон и берется для засовывания в flow table</p>\n<p>Пришлось и мне сделать нечто подобное. Но это работает только в openwrt.<br>\nЕсли вдруг каким-то образом у вас старенькая традиционная linux система с hw offload, которая не умеет засовывать в hw offload   pppoe, то вам придется самому вписать добавление в flowtable физического интерфейса. Например, через hook. Впрочем, это весьма маловероятный случай<br>\nЛучшим решением будет проапгрейдить ядро.</p>\n<p>Другое изменение : для традиционных linux и macos в конфиге теперь можно использовать отдельный список IFACE_WAN6 для исходящих ipv6  интерфейсов.</p>\n<p>В правила nft внесен тестовый счетчик для проверки flow offload</p>\n<pre><code class=\"lang-auto\">nft list chain inet zapret  flow_offload\n\ntable inet zapret {\n        chain flow_offload {\n                oifname @wanif tcp dport 80 ip daddr @zapret ip daddr != @nozapret return comment \"direct flow offloading exemption\"\n                oifname @wanif tcp dport 443 ct original packets 1-4 ip daddr @zapret ip daddr != @nozapret return comment \"direct flow offloading exemption\"\n                meta l4proto { tcp, udp } flow add @ft\n                meta l4proto { tcp, udp } counter packets 1227 bytes 75527 comment \"if offload works here must not be too much traffic\"\n        }\n}\n</code></pre>\n<p>Посмотрите текущий counter. Запустите speedtest. counter не должен увеличиваться сильно. Не должно быть никаких увеличивающихся мегабайтов.<br>\nЕсли они там есть - offload не работает.<br>\nПосмотрите какие интерфейсы занесены в flowtable.<br>\nДля software offload должны быть высокоуровневые интерфейсы (мосты, pppoe, vpn, …). Для hardware могут потребоваться лежащие под ними низкоуровневые интерфейсы (lan1, lan2, lan3, lan4). Общее правило - должны быть и входящие, и исходящие интерфейсы.<br>\nЕсли там их нет - значит что-то работает не так.</p>\n<pre><code class=\"lang-auto\">nft list flowtable inet zapret ft\ntable inet zapret {\n        flowtable ft {\n                hook ingress priority filter - 1\n                devices = { br-lan, wan }\n        }\n}\n</code></pre>",
        "post_number": 75,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-11-15T13:09:50.616Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 69,
        "reads": 118,
        "readers_count": 117,
        "score": 368.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/75",
        "can_translate": false
    },
    {
        "id": 11290,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2022-12-11T10:13:26.600Z",
        "cooked": "<p>Решил сделать свой сервис по обработке выгрузки реестра РКН.<br>\nГлавная мотивация - отсутствие ipv6 в решениях от antifilter.network<br>\nДля получения листов используйте get_reestr_preresolved.sh и get_reestr_preresolved_smart.sh<br>\nПодробности тут <a href=\"https://rutracker.org/forum/out.php?url=https%3A%2F%2Fgithub.com%2Fbol-van%2Fzapret%2Fissues%2F130&amp;p=84022606&amp;t=5171734&amp;f=616&amp;u=29533471\">https://github.com/bol-van/zapret/issues/130</a></p>",
        "post_number": 76,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2022-12-11T10:13:26.600Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 91,
        "readers_count": 90,
        "score": 88.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://rutracker.org/forum/out.php?url=https%3A%2F%2Fgithub.com%2Fbol-van%2Fzapret%2Fissues%2F130&p=84022606&t=5171734&f=616&u=29533471",
                "internal": false,
                "reflection": false,
                "title": "сюда постим поддомены, чтобы они попали в get_reestr_preresolved · Issue #130 · bol-van/zapret · GitHub",
                "clicks": 45
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/76",
        "can_translate": false
    },
    {
        "id": 11620,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-01-06T08:52:50.080Z",
        "cooked": "<p>В mdig добавлены опции --log-resolved и --log-failed<br>\nдля создания логов успешных и провальных доменов</p>\n<p>На <a href=\"http://list.nethub.fi\">http://list.nethub.fi</a> появились листы проверенных доменов из реестра РКН, которые ресолвятся по ipv4, ipv6 и “ipv4 или ipv6” .<br>\nКак оказалось, примерно половина доменов из реестра не ресолвятся никак, фактические являясь трэшем</p>",
        "post_number": 77,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-01-07T09:42:50.956Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 33,
        "reads": 101,
        "readers_count": 100,
        "score": 185.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://list.nethub.fi",
                "internal": false,
                "reflection": false,
                "clicks": 18
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/77",
        "can_translate": false
    },
    {
        "id": 14668,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-07-02T16:13:02.747Z",
        "cooked": "<p>Блокировка QUIC все больше начала оформляться у провайдеров во что-то законченно-логичное вместо хаотических попыток что-то там заткнуть или заткнуть вообще весь протокол или порт.</p>\n<p>На большинстве провайдеров сделана блокировка по SNI (идет расшифровка на DPI) как на ipv4, так и на ipv6, по списку заблокированных доменов.<br>\nОднако, модули распознавания QUIC initial видимо еще старые и кривые, потому могут сечь, например, curl с nghttp3 и chromium, но не сечь curl с quiche или firefox, потому блокировка может быть не видна с первого взгляда.<br>\nКак правило блокировки QUIC по SNI - stateful, поскольку анализировать каждый пакет в соединении чревато гигабитным флудом и залеганием DPI в bypass. Расшифровка QUIC - непростая операция. Это значит, что если DPI в сеансе UDP первым пакетом не видит ничего осудительного, то все остальное не анализируется.</p>\n<p>Итак, QUIC внесен полностью в основные скрипты и инсталятор с поддежкой фильтрации по ipset/hostlist, аналогично http/https.<br>\nОсобого смысла менять режим десинхронизации нет. Просто выбираете MODE=nfqws и отвечаете yes или no на “enable QUIC”. Дальше все само. По понятным причинам QUIC работает только с nfqws и не работает с tpws.</p>\n<p>К сожалению, пока внести автопроверку на QUIC в blockcheck не представляется возможным, поскольку поддержка quic экспериментальна, и стандартные курлы http3 не поддерживают.<br>\nПотому можно посмотреть по F12 в броузере на <a href=\"http://facebook.com\">facebook.com</a> перешел ли он на HTTP3 после включения обхода.<br>\nИли лучше всего через curl --http3-only или посмотреть в wireshark udp port 443.<br>\nПрекомпиленые бинарики с поддержкой http3 можно загуглить для linux x86_64 и windows.<br>\nЕсли не обходится - выключайте.</p>",
        "post_number": 78,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-07-03T06:52:47.629Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 41,
        "reads": 114,
        "readers_count": 113,
        "score": 232.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://facebook.com",
                "internal": false,
                "reflection": false,
                "title": "Facebook – Anmelden oder Registrieren",
                "clicks": 5
            },
            {
                "url": "https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0-bittorrent/4424/17",
                "internal": true,
                "reflection": true,
                "title": "Поддержка BitTorrent",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/78",
        "can_translate": false
    },
    {
        "id": 14689,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-07-03T12:39:06.539Z",
        "cooked": "<p>Неплохой проект <a href=\"https://ntc.party/t/byedpi/4683/1\" class=\"inline-onebox\">ByeDPI</a><br>\nРаботает как прокси и не требует дополнительных привилегий в системе, тем не менее реализует режимы disorder2 и fake (последний может быть ненадежно).<br>\nТем не менее содержит очень интересные идеи, до которых я бы раньше не догадался. Спасибо разработчику.<br>\nВариант --disorder перенесен в tpws, обновлен blockcheck.<br>\ntpws имеет преимущества : работает в MacOS и не требует привилегий в режиме socks<br>\nРежим работает не так, как хотелось бы, в FreeBSD, OpenBSD и Windows вследствие особенностей ядра.</p>\n<p>От переноса fake в tpws пока воздержался. Необходимо тестировать как он себя поведет на разных системах, поскольку используются потенциально ненадежные хаки.</p>",
        "post_number": 79,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-07-03T12:41:38.600Z",
        "reply_count": 0,
        "reply_to_post_number": 78,
        "quote_count": 0,
        "incoming_link_count": 20,
        "reads": 113,
        "readers_count": 112,
        "score": 122.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/byedpi/4683",
                "internal": true,
                "reflection": false,
                "title": "ByeDPI",
                "clicks": 0
            },
            {
                "url": "https://ntc.party/t/byedpi-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9057/145",
                "internal": true,
                "reflection": true,
                "title": "ByeDPI: обсуждение",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/79",
        "can_translate": false
    },
    {
        "id": 16356,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-08-12T06:59:35.609Z",
        "cooked": "<p>Добавил в nfqws определение wireguard handshake initiation.<br>\nПо крайней мере с тем блоком, что был недавно включен на ТСПУ, больше не потребуется --dpi-desync-any-protocol.<br>\nЧто касается openvpn, то глубоко не изучал особенности его блокировки. Включат опять - будут смотреть имеет ли смысл добавлять определение протокола в nfqws</p>\n<p>Заодно проверил работает ли увеличение длины пакета с wireguard. Не работает. Wg отбрасывает эти пакеты, так что --dpi-desync=udplen для wg не подходит. А было бы здорово, если бы работал. Диссектор из NDPI четко проверяет udplen==148</p>",
        "post_number": 80,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-08-12T07:01:06.273Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 116,
        "readers_count": 115,
        "score": 108.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/80",
        "can_translate": false
    },
    {
        "id": 17206,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-09-06T09:30:42.160Z",
        "cooked": "<p>Сегодня стали блочить DHT.<br>\nБлокируются исходящие udp пакеты с длиной 101…399 , начинающиеся с “d1” и заканчивающиеся на “e”, с номерами src port 1025…65536.  &lt;=1024 не блокируются.<br>\nБлокировка stateful, но только в одну сторону. После пробивки с одной стороны аналогичные пакеты с другой стороны ходить не начинают.<br>\nВозможно, это связано с несколькими ТСПУ на пути : у исходящего провайдера, у входящего провайдера и на магистрали.<br>\nНекоторые DHT все же доходят с разных IP адресов. Предполагаю, что не на всех путях установлен ТСПУ, который считает пакет исходящим. Бывает не доходит даже из-за бугра, где нет ТСПУ (но может быть на магистрали).</p>\n<p>Создан custom script custom-nfqws-dht4all.</p>\n<p>nftables фильтр : ct original packets 1 meta length 109-407 meta l4proto udp <span class=\"mention\">@th</span>,64,16 0x6431<br>\niptables фильтр : -p udp -m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:1 -m length --length 109:407 -m u32 --u32 ‘0&gt;&gt;22&amp;0x3C@8&gt;&gt;16=0x6431’<br>\nip6tables фильтр : -p udp -m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:1 -m length --length 109:407 -m u32 --u32 ‘48&gt;&gt;16=0x6431’<br>\nnfqws : --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-ttl=5</p>\n<p>(длина считается вместе с udp заголовком 8 байт)</p>\n<p>Возможно, ситуация связана с выборами, и скоро отключат, но надо быть готовым</p>",
        "post_number": 81,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-09-06T12:37:59.846Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 34,
        "reads": 109,
        "readers_count": 108,
        "score": 191.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/81",
        "can_translate": false
    },
    {
        "id": 17266,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-09-07T11:07:28.090Z",
        "cooked": "<p>Сделал поддержку параметра nfqws --dpi-desync-udplen-pattern.<br>\nМожно задать файл или hex строку, которой добиваются udp пакеты при режиме десинхронизации udplen.<br>\nТеперь везде, где nfqws раньше читал файл, можно указывать как имя файла, так и HEX строку, которая начинается с 0x</p>",
        "post_number": 82,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-09-07T11:07:28.090Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 103,
        "readers_count": 102,
        "score": 45.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/82",
        "can_translate": false
    },
    {
        "id": 17301,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-09-07T17:28:03.918Z",
        "cooked": "<p>Сделал распознавание протокола DHT. Распознается как udp, начинающийся с d1, кончающийся e (соответствует фильтру ТСПУ).<br>\nНовый режим десинхронизации tamper.<br>\nЭтот режим предназначен для корректной модификации известных пейлоадов, чтобы DPI их не распознавал, но пейлоад оставался корректным и нес ту же смысловую нагрузку.<br>\nДля DHT это вставление строки “2:001:x” после “d” в начале. Вставляется ничего не значащий элемент в bencode dictionary с длиной ключа 2, вместо 1. Таким образом dht начинается с d2.</p>\n<p>Этот метод может помочь, если вдруг сделают блокировку stateless. fake против stateless не работает</p>",
        "post_number": 83,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-09-08T06:06:29.818Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 106,
        "readers_count": 105,
        "score": 66.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/83",
        "can_translate": false
    },
    {
        "id": 17852,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-09-20T06:28:16.404Z",
        "cooked": "<p>Нашел средство обьединять подсети.<br>\nip2net работает только с отдельными IP адресами, пропуская подсети как есть.<br>\nЭто позволило существенно сократить размер листов с <a href=\"http://list.nethub.fi\">list.nethub.fi</a><br>\nДля роутеров с nft и обьемом памяти &lt;256 Mb  это крайне актуально</p>",
        "post_number": 84,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-09-20T06:28:57.498Z",
        "reply_count": 0,
        "reply_to_post_number": 83,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 110,
        "readers_count": 109,
        "score": 72.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://list.nethub.fi",
                "internal": false,
                "reflection": false,
                "clicks": 5
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/84",
        "can_translate": false
    },
    {
        "id": 18699,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-10-12T09:46:30.573Z",
        "cooked": "<p>Принципиально новый способ дурения через tpws : --tlsrec<br>\nРазбиение ClientHello на уровне TLS Record. Одну TLS record нарезаем на две в одном TCP сегменте (при желании потом и это можно разделить на 2 tcp сегмента через --split-pos и перепутать порядок пакетов --disorder).<br>\nРежем или прямо по хосту в SNI, что исключает бинарный поиск паттерна без парсинга протокола, или на указанной байтовой позиции.<br>\nГоворят, работает даже на китайском фаерволе.</p>\n<p>Метод хороший, но ломает различные ddos защиты, потому где-то 10% сайтов обломаются. gosuslugi не работают. Без фильтра использовать нецелесообразно.</p>\n<p>В России не работает на TLS 1.2, поскольку rdp-шный DPI еще смотрит на сертификат из ответа сервера TLS ServerHello. Это можно обойти через комбо с nfqws --wssize.</p>\n<p>Удивительно, но многие серьезные сайты все еще не поддерживают TLS 1.3<br>\nСреди них сбер, другие банки, гос услуги, <a href=\"http://mail.ru\">mail.ru</a><br>\nСреди заблокированных точно не поддерживает <a href=\"http://lostfilm.tv\">lostfilm.tv</a></p>",
        "post_number": 85,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-10-14T08:53:34.965Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 51,
        "reads": 117,
        "readers_count": 116,
        "score": 278.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://lostfilm.tv",
                "internal": false,
                "reflection": false,
                "clicks": 17
            },
            {
                "url": "http://mail.ru",
                "internal": false,
                "reflection": false,
                "title": "Mail.ru: почта, поиск, новости, прогноз погоды, гороскоп, программа передач",
                "clicks": 3
            },
            {
                "url": "https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/16",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 20
            },
            {
                "url": "https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/10",
                "internal": true,
                "reflection": true,
                "title": "ByeDPI for Android: обсуждение",
                "clicks": 2
            },
            {
                "url": "https://ntc.party/t/byedpi/4683/33",
                "internal": true,
                "reflection": true,
                "title": "ByeDPI",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/85",
        "can_translate": false
    },
    {
        "id": 19144,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-10-23T06:45:52.630Z",
        "cooked": "<p>Вышел недавно openwrt 23.05.<br>\nПринципиальных изменение по сравнению с 22.03.05 в нем не так много.<br>\nНо есть одно, касающееся zapret.<br>\nopenwrt перешел по умолчанию на mbedtls вместо wolfssl.  mbedtls не поддерживает TLS1.3<br>\nСледовательно при использовании штатного curl не работают методы проверки TLS 1.3 в blockcheck. Сам blockcheck предупреждает, что libcurl не поддерживает TLS1.3.</p>\n<p>Что можно сделать для решения этой проблемы :</p>\n<ol>\n<li>Взять статический бинарик с  <a href=\"https://github.com/bol-van/bins\" class=\"inline-onebox\">GitHub - bol-van/bins: precompiled static binaries for android</a><br>\nи заменить им родной.  если у вас почти нет места, можно записать его в какую-нибудь директорию в /tmp, затем добавить в PATH в начало эту директорию. временное решение только для проверки blockcheck</li>\n<li>Пересобрать openwrt с libcurl, базированном на другой tls library. Например, openssl. Заодно поискать какие пакеты зависят от wolfssl или mbedtls и заменить там preferred tls library. Так можно попытаться вообще убрать mbedtls, чтобы он не занимал места.</li>\n<li>Не пересобирать весь openwrt, а взять SDK одноименной версии, собрать libcurl с другой TLS library, взять из bin ipk пакеты только самого libcurl и его зависимости , установить на openwrt, замещая текущие. Проверить, что ничего не сломалось.</li>\n<li>Не запускать blockcheck на роутере, а вместо этого использовать виртуалку с linux, отключив предварительно zapret на роутере. Не забыть, что найденные TTL следует уменьшить на 1, чтобы стратегия была корректной для рутера.</li>\n</ol>\n<p>TLS1.2 - более жесткий случай. Если какие-то стратегии работают на 1.2, они будут работать и на 1.3.<br>\nПроверка 1.3 нужна только, если не удалось найти рабочий вариант для 1.2. Чтобы хоть как-то работало.</p>",
        "post_number": 86,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-10-23T07:56:21.825Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 117,
        "readers_count": 116,
        "score": 73.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/bins",
                "internal": false,
                "reflection": false,
                "title": "GitHub - bol-van/bins: precompiled static binaries for android",
                "clicks": 10
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/86",
        "can_translate": false
    },
    {
        "id": 19259,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-10-26T12:23:12.876Z",
        "cooked": "<h2><a name=\"autohostlist-1\" class=\"anchor\" href=\"#autohostlist-1\"></a>Режим фильтрации autohostlist</h2>\n<p>Этот режим позволяет проанализировать как запросы со стороны клиента, так и ответы от сервера.<br>\nЕсли хост еще не находится ни в каких листах и обнаруживается ситуация, похожая на блокировку,<br>\nпроисходит автоматическое добавление хоста в список autohostlist как в памяти, так и в файле.<br>\nnfqws или tpws сами ведут этот файл.<br>\nЧтобы какой-то хост не смог попась в autohostlist используйте hostlist-exclude.<br>\nЕсли он все-же туда попал - удалите запись из файла вручную и перезапустите tpws/nfqws<br>\nили дайте им сигнал HUP, чтобы они перечитали листы.<br>\ntpws/nfqws сами назначают владельцем файла юзера, под которым они работают после сброса привилегий, чтобы иметь возможность обновлять лист.</p>\n<p>В случае nfqws данный режим требует перенаправления в том числе и входящего трафика.<br>\nКрайне рекомендовано использовать ограничитель connbytes, чтобы nfqws не обрабатывал гигабайты.<br>\nПо этой же причине не рекомендуется использование режима на BSD системах. Там нет фильтра connbytes.</p>\n<p>Как вообще могут вести себя DPI, получив “плохой запрос” и приняв решение о блокировке :</p>\n<ol>\n<li>Зависание : просто отмораживается, блокируя прохождение пакетов по TCP каналу.</li>\n<li>RST : отправляет RST клиенту и/или серверу</li>\n<li>Редирект : (только для http) отправляет редирект на сайт-заглушку</li>\n<li>Подмена сертификата : (только для https) полный перехват TLS сеанса с попыткой всунуть что-то<br>\nсвое клиенту. Применяется нечасто, поскольку броузеры на такое ругаются.</li>\n</ol>\n<p>nfqws и tpws могут сечь варианты 1-3, 4 они не распознают.<br>\nВсилу специфики работы с отдельными пакетами или с TCP каналом tpws и nfqws распознают эти ситуации по-разному.<br>\nЧто считается ситуацией, похожей на блокировку :</p>\n<ol>\n<li>[nfqws] Несколько ретрансмиссий первого запроса в TCP сеансе, в котором имеется hostname.</li>\n<li>[nfqws,tpws] RST, пришедший в ответ на первый запрос с хостом.</li>\n<li>[nfqws,tpws] HTTP редирект, пришедший в ответ на первый запрос с хостом, на глобальный адрес с доменом 2 уровня, не совпадающим с доменом 2 уровня оригинального запроса.</li>\n<li>[tpws] закрытие соединения клиентом после отправки первого запроса с хостом, если не было на него ответа со стороны сервера. Это обычно случается по таймауту, когда нет ответа (случай “зависание”).</li>\n</ol>\n<p>Чтобы снизить вероятность ложных срабатываний, имеется счетчик ситуаций, похожих на блокировку.<br>\nЕсли за определенное время произойдет более определенного их количества, хост считается заблокированным и заносится в autohostlist. По нему сразу же начинает работать стратегия по обходу блокировки.</p>\n<p>На практике работа с данным режимом выглядит так.<br>\nПервый раз пользователь заходит на сайт и получает заглушку, сброс соединения или броузер подвисает, вываливаясь по таймауту с сообщением о невозможности загрузить страницу.<br>\nНадо долбить F5, принуждая броузер повторять попытки. После некоторой попытки сайт<br>\nначинает работать, и дальше он будет работать всегда.</p>\n<p>С этим режимом можно использовать техники обхода, ломающие значительное количество сайтов.<br>\nЕсли сайт не ведет себя как заблокированный, значит обход применен не будет.<br>\nВ противном случае терять все равно нечего.<br>\nОднако, могут быть временные сбои сервера, приводящие к ситуации, аналогичной блокировке.<br>\nМогут происходит ложные срабатывания. Если такое произошло, стратегия может начать ломать<br>\nнезаблокированный сайт. Эту ситуацию, увы, придется вам контролировать вручную.<br>\nЗаносите такие домены в <code>ipset/zapret-hosts-user-exclude.txt</code>, чтобы избежать повторения.</p>\n<p>Скрипты zapret ведут autohostlist в <code>ipset/zapret-hosts-auto.txt</code>.<br>\ninstall_easy.sh при апгрейде zapret сохраняет этот файл.<br>\nРежим autohostlist включает в себя режим hostlist.<br>\nМожно вести <code>ipset/zapret-hosts-user.txt</code>, <code>ipset/zapret-hosts-user-exclude.txt</code>.</p>",
        "post_number": 87,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-10-26T12:31:53.388Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 103,
        "readers_count": 102,
        "score": 70.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/87",
        "can_translate": false
    },
    {
        "id": 19452,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-10-31T09:30:34.875Z",
        "cooked": "<p>Удалось ускорить blockcheck. Для этого требуется sleep с возможностью спать меньше секунды.<br>\nВ openwrt этого по умолчанию нет. На новых openwrt, где есть ucode, удалось извернуться. Для более старых требуется установка coreutils-sleep. Внесено предолжение по установке coreutils-sleep в install_easy.sh в случае  необходимости</p>\n<p>Собственно, зачем нужен микро sleep.<br>\nПроверка осуществляется так. Сначала устанавливается общее правило перенаправления трафика, которое не меняется на время тестирования всего блока параметров.<br>\nПри тестировании каждого параметра запускается nfqws/dvtws или tpws, параметр тестируется , затем nfqws/dvtws или tpws прибиваются.<br>\nИм требуется какое-то время для инициализации. Если послать запрос раньше, в случае tpws получим полный облом - connection refused, в случае nfqws/dvtws  если система достаточно медленная, получим отброс первого пакета и ретрансмиссию.  Это все ведет к задержкам при тестировании каждого параметра. На деле ждать 1 секунду избыточно. Вполне достаточно 100 мсек. Но вот беда, в openwrt бизибокс, собранный без поддержки float sleep и без usleep, и нечем вызвать syscall nanosleep().<br>\nБлаго, ucode все-таки это может. Есть функция запуска процесса с таймаутом. Но ucode появился вместе с fw4 в 22-й версии openwrt. В более старых нет. Потому там надо устанавливать coreutils-sleep, который умеет спать с дробями секунды. Благо, он весит всего 40-50K. Зато блокчек в разы шустрее пробегает.<br>\nИспользуется 4 варианта поспать мало. Если никакой из них не сработал - спим 1 секунду</p>",
        "post_number": 88,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-10-31T14:10:43.012Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 81,
        "readers_count": 80,
        "score": 41.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/88",
        "can_translate": false
    },
    {
        "id": 19820,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-11-09T09:22:50.449Z",
        "cooked": "<p>В tpws и nfqws добавлена возможность логгинга положительных решений по autohostlist.<br>\nМожно разобраться когда и по какой причине что-то попало в лист.<br>\nЧерез скрипты проведено как переменная AUTOHOSTLIST_DEBUGLOG.<br>\nПри значении “1” ведется лог в ipset/zapret-hosts-auto-debug.log</p>\n<details>\n<summary>\nПример</summary>\n<pre><code class=\"lang-auto\">09.11.2023 12:42:39 : dostfilms.site : incoming RST\n09.11.2023 12:42:39 : dostfilms.site : fail counter 1/2\n09.11.2023 12:42:39 : dostfilms.site : incoming RST\n09.11.2023 12:42:39 : dostfilms.site : fail counter 2/2\n09.11.2023 12:42:39 : dostfilms.site : adding\n09.11.2023 12:43:30 : sun9-33.userapi.com : incoming RST\n09.11.2023 12:43:30 : sun9-33.userapi.com : fail counter 1/2\n09.11.2023 12:43:31 : sun9-75.userapi.com : incoming RST\n09.11.2023 12:43:31 : sun9-75.userapi.com : fail counter 1/2\n09.11.2023 12:43:31 : sun9-61.userapi.com : incoming RST\n09.11.2023 12:43:31 : sun9-61.userapi.com : fail counter 1/2\n09.11.2023 14:20:04 : sun9-46.userapi.com : incoming RST\n09.11.2023 14:20:04 : sun9-46.userapi.com : fail counter 1/2\n09.11.2023 14:20:04 : sun9-28.userapi.com : incoming RST\n09.11.2023 14:20:04 : sun9-28.userapi.com : fail counter 1/2\n09.11.2023 14:20:04 : sun9-5.userapi.com : incoming RST\n09.11.2023 14:20:04 : sun9-5.userapi.com : fail counter 1/2\n09.11.2023 14:21:53 : sun9-33.userapi.com : incoming RST\n09.11.2023 14:21:53 : sun9-33.userapi.com : fail counter 1/2\n09.11.2023 14:25:08 : hd-rezka.pro : redirect to another domain\n09.11.2023 14:25:08 : hd-rezka.pro : fail counter 1/2\n09.11.2023 14:25:11 : hd-rezka.pro : redirect to another domain\n09.11.2023 14:25:11 : hd-rezka.pro : fail counter 2/2\n09.11.2023 14:25:11 : hd-rezka.pro : adding\n09.11.2023 14:25:43 : films1080.best : redirect to another domain\n09.11.2023 14:25:43 : films1080.best : fail counter 1/2\n09.11.2023 14:25:44 : films1080.best : redirect to another domain\n09.11.2023 14:25:44 : films1080.best : fail counter 2/2\n09.11.2023 14:25:44 : films1080.best : adding\n09.11.2023 14:29:48 : tv1.lordfilm.black : redirect to another domain\n09.11.2023 14:29:48 : tv1.lordfilm.black : fail counter 1/2\n09.11.2023 14:29:49 : tv1.lordfilm.black : redirect to another domain\n09.11.2023 14:29:49 : tv1.lordfilm.black : fail counter 2/2\n09.11.2023 14:29:49 : tv1.lordfilm.black : adding\n</code></pre>\n</details>\n<p>Из примера видно, что разные поддомены незаблокированного <a href=\"http://userapi.com\">userapi.com</a> периодически дают RST. Это можно списать на перегруженность серверов. Устойчивой картины нет, поэтому порог срабатывания 2 фейла за 60 секунд не достигается. Домены не заносятся в лист.<br>\nДругие домены дают устойчивую картину, потому заносятся в лист<br>\nПорогами срабатывания можно играться</p>\n<details>\n<summary>\nДругой пример</summary>\n<pre><code class=\"lang-auto\">09.11.2023 12:41:23 : www.kinozone.online : tcp retrans threshold reached\n09.11.2023 12:41:23 : www.kinozone.online : fail counter 1/2\n09.11.2023 12:41:26 : www.kinozone.online : tcp retrans threshold reached\n09.11.2023 12:41:26 : www.kinozone.online : fail counter 2/2\n09.11.2023 12:41:26 : www.kinozone.online : adding\n09.11.2023 12:42:03 : hd-rezka.pro : tcp retrans threshold reached\n09.11.2023 12:42:03 : hd-rezka.pro : fail counter 1/2\n09.11.2023 14:24:05 : hd-rezka.pro : tcp retrans threshold reached\n09.11.2023 14:24:05 : hd-rezka.pro : fail counter 1/2\n09.11.2023 14:24:06 : hd-rezka.pro : tcp retrans threshold reached\n09.11.2023 14:24:06 : hd-rezka.pro : fail counter 2/2\n09.11.2023 14:24:06 : hd-rezka.pro : adding\n09.11.2023 14:28:59 : kinogo.io : tcp retrans threshold reached\n09.11.2023 14:28:59 : kinogo.io : fail counter 1/2\n09.11.2023 14:29:00 : kinogo.io : tcp retrans threshold reached\n09.11.2023 14:29:00 : kinogo.io : fail counter 2/2\n09.11.2023 14:29:00 : kinogo.io : adding\n</code></pre>\n</details>\n<p>Из этого примера видно, что провайдер не шлет RST, а отмораживается на плохие домены. Сеансы виснут. Клиент пытается слать ретрансмиссии, не получая ACK. Достигнув порога в 3 ретрансмиссии происходит срабатывание события “похоже на блокировку”. 2 раза так подвисли за 60 секунд - занесли в лист<br>\nК hd-rezka.pro пробовали обращаться в 12:42. Страница подвисла, но передалбливаться не стали. Долбанулись только 1 раз и расслабились. Порог достигнут не был. Потом в 14:24 начали долбиться более настойчиво, что вызвало срабатывание.</p>",
        "post_number": 89,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-11-09T11:42:10.917Z",
        "reply_count": 0,
        "reply_to_post_number": 88,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 88,
        "readers_count": 87,
        "score": 62.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://userapi.com",
                "internal": false,
                "reflection": false,
                "title": "VK | Herzlich Willkommen",
                "clicks": 2
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/89",
        "can_translate": false
    },
    {
        "id": 19838,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-11-12T08:40:31.466Z",
        "cooked": "<p>Обратили мое внимание на штуку, о которой знать не знал.<br>\nchrome://flags   kyber<br>\nЭто постквантовая штука для TLS , которая раздувает ClientHello до 2 TCP frames.<br>\nСледовательно, nfqws ломается. Он в принципе не занимается реассемблингом TCP frames. А DPI занимается и корректно блокирует.<br>\nЕсли вдруг хромисты начнуть дефолтить эту фичу, придется доделывать nfqws</p>\n<p>Кстати, это так же пинок в адрес GoodbyeDPI<br>\nУ него та же проблема. Или нет ? Если вдруг он не парсит целую TLS запись, а ищет паттерн, то ему все равно.<br>\nНО. Chrome засовывает SNI в разные места ClientHello. Попадает то в 1-й пакет, то во 2-й. 2-й пакет вообще не содержит сколько нибудь вразумительного начала.</p>\n<p>Предполагаемый способ решения проблемы в nfqws.</p>\n<ol>\n<li>Разрешить partial ClientHello. Это поможет проанализировать 1-й пакет, даже если он порезан на середине. Если SNI находится там, вопрос решен</li>\n<li>Если все-же SNI находится не в 1-м сегменте, то придется делать реассемблинг до тех пор, пока не обнаружится SNI. И тогда делать desync не на 1-й пакет , а на тот, где находится SNI. Ведь это и есть цель.  Делать на все не есть хорошо, потому что есть фильтры hostlist, и вообще неясно есть ли SNI в TLS сообщении. Но что тогда ? Запоминать все пакеты, пока не будет возможность принять решение, и потом их выплевывать ? Можно, хотя и сложновато</li>\n</ol>\n<p>в tpws этой проблемы ожидаемо нет</p>",
        "post_number": 90,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-11-12T19:43:34.567Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 93,
        "readers_count": 92,
        "score": 63.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/90",
        "can_translate": false
    },
    {
        "id": 19994,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-11-15T16:49:11.651Z",
        "cooked": "<p>Сделана поддержка работы с TLS ClientHello, размазанными на несколько пакетов</p>\n<p>РЕАССЕМБЛИНГ TCP<br>\nnfqws поддерживает реассемблинг некоторых видов tcp запросов.<br>\nНа текущий момент это TLS ClientHello. Он бывает длинным, если в chrome включить пост-квантовую<br>\nкриптографию tls-kyber, и занимает как правило 2 пакета.<br>\nchrome рандомизирует фингерпринт TLS. SNI может оказаться как в начале, так и в конце, то есть<br>\nпопасть в 1 или 2 пакет. stateful DPI обычно реассемблирует запрос целиком, и только потом<br>\nпринимает решение о блокировке.<br>\nnfqws реагирует десинхронизацией на каждый пакет из TLSClientHello, если задана опция<br>\n–dpi-desync-skip-nosni=0. В противном случае десинхронизация идет на сам пакет,<br>\nвключающий SNI, и все последующие.</p>\n<p>РЕАССЕМБЛИНГ QUIC<br>\ntls-kyber может так же размазываться по 2 пакетам QUIC Initial.<br>\nПока их реассемблинг не реализован, поскольку русский DPI не реагирует на такие пакеты.<br>\nИдет десинхронизация полных hello в одном пакете и частичных hello, где SNI попал в 1-й пакет.<br>\nМожно только гадать как будут рубить сеанс, если вдруг блокировщики реализуют поддержку подобных hello.<br>\nЕсли, допустим, они станут буферизировать 2 пакета, и после 2 рубить сеанс, если им не понравился SNI, то можно выплюнуть что-то между 1 и 2. Если они будут сечь долго сеанс QUIC на предмет продолжения initial, то плеваться придется между множеством пакетов. Если же и это не сработает, значит придется дурить сразу на 1 пакете, чтобы они не распознали начало QUIC протокола и не стали ничего высекать из последующих пакетов. Но это потребует буферизации уже на стороне nfqws.<br>\nТак что писанина кода ожидается разная</p>\n<p>Так же обновлена логика детекта tcp ретрансмиссий.<br>\nПо мере реконструкции TLS запроса выясняется диапазон tcp sequence numbers, покрывающий запрос.<br>\nРетрансмиссиями запроса считаются только повторные передачи из этого диапазона.<br>\nПри обнаружении пакета вне диапазона, счетчик ретрансмиссий немедленно завершается.<br>\nОбнаружение RST или http редирект теперь жестко завязано на sequence=1 со стороны сервера.<br>\nТо есть реакция только на RST сразу и молча, либо передачу http redirect сразу.<br>\nВсе, что потом, не трогается, и реакции по auto hostlist нет</p>",
        "post_number": 91,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-11-15T16:57:06.669Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 105,
        "readers_count": 104,
        "score": 56.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/91",
        "can_translate": false
    },
    {
        "id": 20304,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-11-26T11:35:57.993Z",
        "cooked": "<p>В скриптах ipset/get_reestr* сделана поддержка ipban.<br>\nЗабаненными IP считаются IP из реестра, которым не назначен hostname.<br>\nИсточник : <a href=\"https://raw.githubusercontent.com/zapret-info/z-i/master/dump.csv\">https://raw.githubusercontent.com/zapret-info/z-i/master/dump.csv</a><br>\nНа деле какие-то IP забанены, какие-то нет. В dump.csv нет информации разбанена ли запись или нет.<br>\nПотому лист избыточен</p>",
        "post_number": 92,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-11-26T11:35:57.993Z",
        "reply_count": 0,
        "reply_to_post_number": 91,
        "quote_count": 0,
        "incoming_link_count": 16,
        "reads": 91,
        "readers_count": 90,
        "score": 98.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://raw.githubusercontent.com/zapret-info/z-i/master/dump.csv",
                "internal": false,
                "reflection": false,
                "clicks": 4
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/92",
        "can_translate": false
    },
    {
        "id": 20966,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2023-12-12T18:27:07.619Z",
        "cooked": "<p>Добавлена возможность переопределить порты для некоторых протоколов, проведенных через основные скрипты</p>\n<p>#HTTP_PORTS=80-81,85<br>\n#HTTPS_PORTS=443,500-501<br>\n#QUIC_PORTS=443,444</p>\n<p>Может понадобится, если DPI сечет разные порты.<br>\nНо вбивать сюда 1-65535 крайне не рекомендовано, поскольку весь трафик может упасть на nfqws или tpws</p>",
        "post_number": 93,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2023-12-12T18:27:36.732Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 88,
        "readers_count": 87,
        "score": 27.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/93",
        "can_translate": false
    },
    {
        "id": 21366,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-01-01T07:39:55.080Z",
        "cooked": "<p>Переменные конфига</p>\n<p>OPENWRT_WAN4<br>\nOPENWRT_WAN6</p>\n<p>позволяют переопределить в openwrt WAN интерфейсы для ipv4 и ipv6<br>\nинтерфейсы задаются как имена логических интерфейсов netifd (wan,lan), а не интерфейсов linux (eth0, eth1, br-lan)<br>\nмножественные интерфейсы пишутся в кавычках через пробел<br>\nвсе по аналогии с OPENWRT_LAN<br>\nполезно, когда у вас несколько ipv6 аплинков, и общая стратегия может ломать другой аплинк</p>\n<p>проверка : /etc/init.d/zapret list_ifsets</p>",
        "post_number": 94,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-01-01T07:40:42.917Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 101,
        "readers_count": 100,
        "score": 65.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/94",
        "can_translate": false
    },
    {
        "id": 22049,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-01-23T10:35:25.105Z",
        "cooked": "<p>Вынес отдельным скриптом install_prereq.sh установку дополнительных пакетов в ОС.<br>\nЭто надо для упрощения начальной процедуры развертывания, когда install_easy еще не выполнен и надо запускать blockcheck.sh.<br>\nЧтобы не запускать install_easy и не прерывать его после установки пакетов, и чтобы не помнить/читать про необходимые пакеты, не копипастить большие команды по их установке. Вместо этого install_bin + install_prereq сразу готовят систему к blockcheck</p>",
        "post_number": 95,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-01-23T10:35:25.105Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 99,
        "readers_count": 98,
        "score": 59.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/95",
        "can_translate": false
    },
    {
        "id": 22970,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-02-27T11:04:04.530Z",
        "cooked": "<p>Заменил в nfqws дефолтный фейк http/https с <a href=\"http://w3.org\">w3.org</a> на <a href=\"http://iana.org\">iana.org</a>.<br>\n<a href=\"http://w3.org\">w3.org</a> переехал на cloudflare.<br>\nОсобенность cloudflare такова, что он позволяет дергать все свои сайты с любых своих IP.<br>\nТеперь представьте, что вы тестите в блокчеке <a href=\"http://rutracker.org\">rutracker.org</a>, который тоже на клауде.<br>\nЕсли TTL превысит длину пути до сервера, то сервер получит фейк.<br>\nИ вместо отлупа мы получаем 200 OK или 307 redirect, как будто все в порядке.<br>\nА на самом деле не в порядке, эта стратегия будет ломать сайт.</p>",
        "post_number": 96,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-02-27T11:04:04.530Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 90,
        "readers_count": 89,
        "score": 38.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://iana.org",
                "internal": false,
                "reflection": false,
                "clicks": 7
            },
            {
                "url": "http://w3.org",
                "internal": false,
                "reflection": false,
                "clicks": 3
            },
            {
                "url": "http://rutracker.org",
                "internal": false,
                "reflection": false,
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/96",
        "can_translate": false
    },
    {
        "id": 23261,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-02T15:10:03.023Z",
        "cooked": "<p>Хочу обратить внимание на особенности применения zapret в текущих условиях в России.</p>\n<p>Сейчас ТСПУ любят ставить у магистралов, потому приходится сдвигать TTL дальше провайдера. Может быть и 8, и даже 11.<br>\nМожет быть балансировка нагрузки на разные магистралы. И на одном DPI на 5-м , на другом на 11-м.<br>\nЗначит от раза к разу количество хопов может быть разным до сервера из-за разного маршрута.<br>\nМожет быть и такое, что на разные направления идет стабильно разный маршрут.<br>\nЧтобы обойти какие-то сайты на одном маршруте, вы ставите 11, но на другие маршрут иной, существенно короче, и там идет облом.</p>\n<p>Проблема случается, когда фейковые пакеты без фулинга доходят до сервера и воспринимаются им как реальные пакеты от клиента. На http это могут быть ошибки 400. Так реагируют сервера на необслуживаемый домен (<a href=\"http://iana.org\">iana.org</a>, <a href=\"http://w3.org\">w3.org</a>)<br>\nНа https будут ошибки другого вида, связанные с невозможностью выполнить TLS handshake.</p>\n<p>Вообщем, здесь необходим дополнительный ограничитель.<br>\nСамый универсальный и совместимый - md5sig. Но он работает только с linux серверами.<br>\nbadsum, кажется, перестал работать на многих провайдерах. Возможно, DPI стали проверять tcp checksum<br>\nbadseq, как показывает практика, может работать только с https, но не работать с http (особенности DPI от <a href=\"http://rdp.ru/%D0%A2%D0%A1%D0%9F%D0%A3\">rdp.ru/ТСПУ</a>)</p>\n<p>blockcheck.sh был создан не как конечный судья, выносящий вердикт “какие буковки писать сюда”.<br>\nОн скорее напоминает томограф, а вы - врач, изучающий томограмму и ставящий диагноз. За вас он это не всегда сможет сделать.<br>\nПотому тут надо думать и понимать что происходит, чтобы получить надежный результат, а не когда-то открывается, когда-то нет, а почему я без понятия, все вписал как сказали. Нет, это уже тоже не всегда работает</p>\n<p>Самый бронебойный вариант - обход только нужных вам сайтов, которые можно вписать в фильтр по ip или hostlist, или же autohostlist.<br>\nautohostlist хорош тем, что при должной настройке и минимальном обслуживании не трогает то, что трогать не нужно, тем самым минимизируя риск поломки всевозможных сбербанков.<br>\nНо это не избавляет от необходимости находить надежную стратегию, иначе не будет нормально работать обход того, что вам нужно</p>",
        "post_number": 99,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-02T15:10:03.023Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 92,
        "readers_count": 91,
        "score": 68.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://iana.org",
                "internal": false,
                "reflection": false,
                "clicks": 4
            },
            {
                "url": "http://rdp.ru/%D0%A2%D0%A1%D0%9F%D0%A3",
                "internal": false,
                "reflection": false,
                "clicks": 2
            },
            {
                "url": "http://w3.org",
                "internal": false,
                "reflection": false,
                "clicks": 2
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/99",
        "can_translate": false
    },
    {
        "id": 23262,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-02T15:10:11.571Z",
        "cooked": "<ol>\n<li>tpws : поддержка нового метода десинхронизации --oob. Посылка нулевого out of band байта после первой части сплита.</li>\n<li>Перевод схемы nftables на обслуживание tcp соединений после NAT (POSTNAT). Это позволяет задействовать атаки, ломающие NAT. При использовании MASQUERADE они невозможны на iptables, поскольку iptables не позволяют перехватить трафик после NAT.<br>\nВ nftables теперь используется еще 1 бит в mark : DESYNC_MARK_POSTNAT. Так помечаются пакеты, перенаправляемые на nfqws в POSTNAT режиме. Чтобы потом можно было пакеты, генерируемые в nfqws, помечать как notrack, чтобы NAT их не ломал.<br>\nPOSTNAT ломает десинхронизацию UDP протоколов с первого пакета, поэтому udp идет по старинке в PRENAT режиме</li>\n<li>Режим дурения datanoack. Ломающий NAT режим, требует внешнего IP адреса на системе, где производится атака. Отсылка дурящего пакета без флага ACK. Это неправильно, поэтому сервера отбрасывают, а DPI может схавать</li>\n<li>Режим autottl в nfqws. На каких-то провайдерах может неплохо работать, на каких-то хуже или вообще плохо. Можно пробовать крутить параметры. Какой TTL выбрал автомат видно в nfqws --debug. Там же и видны TTL обрабатываемых пакетов. Для реализации режима требуется перенаправить как минимум первый пакет SYN,ACK</li>\n</ol>\n<p>Как работает autottl.<br>\n<code>--dpi-desync-autottl=[&lt;delta&gt;[:&lt;min&gt;[-&lt;max&gt;]]]</code><br>\nБерется входящий TTL. Если он ниже не более, чем на 31 хоп от стандартных значений 64,128,255, то соответствующее значение берется за исходный TTL входящего пакета и вычисляется длина пути как разница.<br>\nПри других TTL алгоритм идет в отказ.<br>\nДалее от длины пути отнимается дельта, которую можно указать в параметре --dpi-desync-autottl. По умолчанию она = 1.<br>\nПолученное значение берется как TTL фейк пакетов.<br>\nЕсли оно выходит за пределы min-max, то оно нормализуется до min или до max. Если после нормализации превышена длина пути, алгоритм выдает отказ.<br>\nПри отказе используется фиксированное значение ttl, заданное в параметре --dpi-desync-ttl.<br>\nЕсли у вас нет других ограничителей по fooling, лучше указать --dpi-desync-ttl=1, чтобы в случае отказа фейк пакет не дошел до сервера.<br>\nМожно настроить отдельную версию параметров для ipv6.<br>\nСмысл значений min-max  означает диапазон длин пути, между которыми находится DPI. Нет смысла атаковать сервера слишком близкие, которые еще до DPI. Это обычно ресурсы самого провайдера. Так же нет смысла гнать фейки слишком далеко куда-то в США, потому что там тоже нет блокирующих DPI.<br>\nЗначение дельты позволяет несколько сгладить небольшую разницу в длине исходящего и входящего пути. Но если сделать слишком большое значение, то можно вылезти в область DPI. Фейки перестанут доходить до DPI, и обход перестанет работать.<br>\nБлокчек прогоняет тесты на несколько вариантов delta. Это тот случай, когда тестирование надо выполнять на чем большем количестве заблокированых доменов, тем лучше. На разных доменах могут работать разные дельты. Если на большинстве доменов работает какая-то дельта, то ее и нужно использовать. Если везде все по разному, то от autottl стоит отказаться.</p>",
        "post_number": 100,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-02T19:42:00.939Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 94,
        "readers_count": 93,
        "score": 33.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/100",
        "can_translate": false
    },
    {
        "id": 23351,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-05T12:06:47.777Z",
        "cooked": "<p>В tpws добавлена возможность указать OOB байт. В виде символа или 0xHEX.<br>\nТам же новые параметры --tamper-start и --tamper-cutoff позволяют ограничить байтовые позиции или номер блока исходящего потока, к которым применяется дурение.   start&lt;=pos&lt;cutoff<br>\ncutoff - это точка отсечения, с которой больше не дурим.<br>\nПозиция относится к началу текущего принятого от клиента блока.</p>",
        "post_number": 101,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-09T11:38:26.421Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 85,
        "readers_count": 84,
        "score": 27.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/101",
        "can_translate": false
    },
    {
        "id": 23365,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-05T13:56:17.987Z",
        "cooked": "<p>Обнаружилось, что некоторые провайдеские NAT datanoack проходит корректно. В этом случае внешний IP адрес может быть не обязателен.<br>\nmegafon, beeline мобильные работают.<br>\nНо linux NAT оно не проходит. За домашним роутером это бесполезно, но можно с него.</p>",
        "post_number": 102,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-05T16:45:50.170Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 83,
        "readers_count": 82,
        "score": 46.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/102",
        "can_translate": false
    },
    {
        "id": 23558,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-10T07:41:02.376Z",
        "cooked": "<p>autottl на BSD системах можно завести безкровно. В смысле, не надо перенаправлять весь входящий трафик с порта (ибо connbytes отсутствует).<br>\nДостаточно перенаправить 1 пакет SYN,ACK, и его легко фильтрануть правилом ipfw или PF.<br>\nautohostlist в dvtws по-прежнему не рекомендован на BSD, тк требует перенаправляения более одного входящего пакета на tcp соединение, и ограничить не представляется возможным.<br>\nЕсли ваш провайдер виснет на заблокированных ресурсах, то сработать может и без.<br>\nВариант “зависло” детектится на основе только исходящего трафика. Вариант RST или redirect детектиться не будут<br>\ntpws c autohostlist работает без ограничений</p>",
        "post_number": 103,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-10T07:45:54.161Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 85,
        "readers_count": 84,
        "score": 27.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/103",
        "can_translate": false
    },
    {
        "id": 23586,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-11T16:06:27.129Z",
        "cooked": "<p>Сделана частичная поддержка blockcheck в OpenBSD и MacOS. Частичная в том смысле, что tpws не поддерживается в OpenBSD, а в MacOS не поддерживается dvtws.<br>\nУвы, я до сих пор не понимаю как перенаправлять трафик в OpenBSD на tpws с локальной системы (не проходной)<br>\nЕсли брать инструкцию с route-to от TOR, то она работает, но невозможно узнать оригинальный адрес назначения у сокета через DIOCNATLOOK, так что этот варик редиректа бесполезен<br>\nВ MacOS это работает без проблем.</p>",
        "post_number": 104,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-11T17:50:29.131Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 86,
        "readers_count": 85,
        "score": 32.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/104",
        "can_translate": false
    },
    {
        "id": 23697,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-14T13:55:03.451Z",
        "cooked": "<p>Перевел тест tpws в blockcheck на использование socks, выкинув всю муть с перенаправлением трафика через фаервол.<br>\nРаньше от этого отказывался, потому что невозможно управлять версией ip (ipv4/ipv6), когда CURL работает через прокси.<br>\nПришлось вынести ресолвер отдельно. mdig ресолвит домен, далее курлу подсовывается ключ --connect-to. Он доступен с версии 7.49, следовательно совсем уж древние курлы старее мая 2016 отваливаются , равно как и старые дистрибутивы ОС в варианте “из коробки”. Если у вас такой древнющий курл, можно собрать самому или взять готовый статический бинарик.<br>\nВ openwrt с LEDE 17 версия curl достаточно новая.<br>\nВ итоге tpws теперь можно тестировать в openbsd и pfsense, а код скрипта упростился</p>",
        "post_number": 105,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-14T13:55:03.451Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 83,
        "readers_count": 82,
        "score": 71.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/105",
        "can_translate": false
    },
    {
        "id": 23715,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-14T21:03:42.768Z",
        "cooked": "<p>В blockcheck добавлена проверка на обход QUIC. Для нее требуется curl с поддержкой опции --http3-only.<br>\nСейчас пока это диковинка, родной curl скорее всего не умеет<br>\nТут есть статики для разных платформ : <a href=\"https://github.com/stunnel/static-curl/releases\" class=\"inline-onebox\">Releases · stunnel/static-curl · GitHub</a></p>",
        "post_number": 106,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-14T21:03:42.768Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 81,
        "readers_count": 80,
        "score": 36.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/stunnel/static-curl/releases",
                "internal": false,
                "reflection": false,
                "title": "Releases · stunnel/static-curl · GitHub",
                "clicks": 11
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/106",
        "can_translate": false
    },
    {
        "id": 23727,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-15T12:55:38.133Z",
        "cooked": "<p>Десинхронизация udp на nftables тоже переведена на POSTNAT схему вместе с TCP.<br>\nЭтот вариант позволяет задействовать любые атаки, в том числе ломающие NAT, однако при включенном masquerade для проходного трафика может использоваться только через nftables.<br>\nНапример, вариант ipfrag2 работает на многих сайтах для обхода блокировки QUIC.<br>\nСеть очень плохо относится к фрагментации tcp на уровне IP. Это ненормальная ситуация, поэтому как правило такое режется.<br>\nНо к фрагментации udp сеть относится относительно лояльно. Есть ситуации, когда это вообще нормально.<br>\nIP фрагментация используется в IKE. В IKE уже изобрели свой метод фрагментации сообщений на уровне L7, но старые ОС об этом не знают. windows 7 отсылает фрагментированные udp, windows 10 - несколько нефрагментированных udp. Именно поэтому на некоторых VPS вам упорно не удастся подключиться к вашему strongwan с win7, и все лишь потому, что у вас слишком упертый хостер, который решил подрезать фрагментированные пакеты полностью.<br>\nФрагментация QUIC по сути тоже ненормальна, но мало кто будет лезть так глубоко и анализировать udp payload (который еще надо суметь собрать).<br>\ncloudflare и <a href=\"http://bbc.com\">bbc.com</a> обходятся через ipfrag2, на facebook режут.</p>",
        "post_number": 107,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-15T13:00:28.535Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 93,
        "readers_count": 92,
        "score": 58.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://bbc.com",
                "internal": false,
                "reflection": false,
                "title": "BBC Home - Breaking News, World News, US News, Sports, Business, Innovation, Climate, Culture, Travel, Video & Audio",
                "clicks": 8
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/107",
        "can_translate": false
    },
    {
        "id": 23872,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-19T10:59:54.013Z",
        "cooked": "<p>Новый метод десинхронизации нулевой фазы SYNDATA.<br>\nТермин нулевой фазы относится к десинхронизации на этапе TCP 3 way handshake.<br>\nК ней неприменимы фильтры на основе hostlist.<br>\nЭтот тот случай, когда в --dpi-desync может быть 3 параметра через запятую.<br>\nМожно так :  --dpi-desync=syndata,fake,split2</p>\n<p>Суть в добавлении данных в пакет SYN. ОС принимают такие SYN пакеты, но данные игнорируют, а некоторые DPI их принимают. Кое-где работает на наших ТСПУ, но только для http.<br>\nНа https может работать, если в параметре --dpi-desync-fake-syndata передать файл, содержащий TLS client hello с незаблокированным доменом. Фактически это аналог fake, поскольку расчет на то, что DPI  принимает этот пейлоад как часть tcp stream, а сервер - нет.<br>\nНекоторые российские ТСПУ/DPI на http впадают в проблемы с синхронизацией sequence numbers, что приводит только к зависанию соединения.<br>\nЛомает некоторые сайты, видимо из-за собственных систем antiddos, которые плохо реагируют на аномалии</p>\n<p>Поскольку ограничить хостлистом или аутохостлистом невозможно, применять с осторожностью</p>\n<p>Главная цель этого режима десинхронизации - не атака на веб сайты, а атака на произвольные протоколы на конкретном сервере без применения техники split.<br>\nСейчас наблюдается такая тема на ТСПУ. Если какой-то VPN сервис или другой сервис начинает применять техники обхода блокировок, связанные с сегментацией, то ТСПУ их обнаруживает и сразу блокирует соединение. Делается это обычно на ограниченных диапазонах IP.<br>\nВ условиях жестких блокировок и противодействия техникам их обхода, ценна может быть каждая дырочка на свой сервер.<br>\nНа udp это может быть ipfrag2, а на tcp - syndata.</p>",
        "post_number": 108,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-19T11:34:50.715Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 87,
        "readers_count": 86,
        "score": 47.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/108",
        "can_translate": false
    },
    {
        "id": 23882,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-19T15:08:50.722Z",
        "cooked": "<p>Оказывается, старый добрый фейк на http и https может не работать в оригинальном виде.<br>\nКогда ты лезешь на http и шлешь фейк http <a href=\"http://iana.org\">iana.org</a>, это может не сработать. Но если послать ерунду типа нулей, то может сработать. На syndata может быть наоборот. Ерунда не работает на https, а tls fake от <a href=\"http://iana.org\">iana.org</a> - работает.</p>\n<p>В связи с этим обновлен blockcheck на предмет поиска новых заковыристых стратегий</p>",
        "post_number": 109,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-19T15:08:50.722Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 76,
        "readers_count": 75,
        "score": 50.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://iana.org",
                "internal": false,
                "reflection": false,
                "title": "Internet Assigned Numbers Authority",
                "clicks": 2
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/109",
        "can_translate": false
    },
    {
        "id": 23888,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-19T18:21:33.608Z",
        "cooked": "<p>Еще немного по поводу SYNDATA.<br>\nНа самом деле не запрещено по стандарту слать данные прямо в SYN. Поэтому такие пакеты без проблем проходят NAT и могут учитываться DPI.<br>\nОригинальный стандарт запрещает передавать данные из SYN в сокет до полного прохождения tcp handshake. Но фактически по крайней мере linux, freebsd и windows данные в SYN игнорируют. При этом все последующие пакеты идут с сиквенсами, как будто бы SYN был пустой. То есть данные в SYN просто отбрасываются на стандартных сокетах.</p>\n<p>Но есть еще более новый стандарт TCP fast open. В нем как раз отсылка данных в процессе хэндшейка - это нормально. Однако, для задействования функционала требуется особое программирование специально для поддержки fast open. Это должен уметь и серверный процесс, и клиентский.</p>\n<p>Хотя некоторые веб сервера и умеют, и даже некоторые броузеры на некоторых платформах умеют, мало кто сейчас озабочен этим fast open. У меня нет статистики где и на каких ОС и на скольких сайтах он включен по умолчанию. Но как я понимаю немного где. Это уже устаревшая технология. Сейчас актуален QUIC. Он решает в том числе и проблему RTT.</p>\n<p>Но если вдруг SYNDATA будет использован именно на fast open соединении, несомненно оно сломается. Поэтому соединения с признаками fast open не трогаются.</p>",
        "post_number": 110,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-19T18:59:23.678Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 80,
        "readers_count": 79,
        "score": 41.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/35",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/110",
        "can_translate": false
    },
    {
        "id": 23995,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-23T20:02:46.862Z",
        "cooked": "<p>Сделал автоматическое перечитывание autohostlist другими процессами nfqws/tpws при модификации файла.<br>\nВыдал, допустим, блокчек 4 разных стратегии для http/https/ipv4/ipv6.<br>\nЮзер тупо вписал это в конфиг. Запущено 4 процесса.<br>\nДернул https ipv4. Отлично, занеслось в аутолист.<br>\nПотом не работает. Почему ? Да потому что полезло по ipv6, а там не обновилось.</p>",
        "post_number": 111,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-23T20:02:46.862Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 76,
        "readers_count": 75,
        "score": 30.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/111",
        "can_translate": false
    },
    {
        "id": 24016,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-24T08:13:31.305Z",
        "cooked": "<p>Реализован режим quick в blockcheck.<br>\nЕго цель - найти хоть что-то работающее максимально быстро.<br>\nИзначально blockcheck создавался не как делатель волшебных пиллюль для копипасты в определенное место как на картинке. Это инструмент исследования DPI на предмет техник обхода блокировок.<br>\nНо юзера некоторые ниче не понимают, они все равно копипастят, и это их единственный шанс, чтобы оно заработало. Иначе им только отказываться от продукта, потому что не могут понять что там за буковки и что с ними делать.<br>\nВ том числе для них может пригодиться этот режим, потому что все равно лишние буковки для них бесполезны.</p>\n<p>Суть его в чем</p>\n<ol>\n<li>Отказ от тестов tpws. Все равно он как правило не обеспечивает должный уровень обхода.  Чтобы вернуть используйте переменную SKIP_TPWS=0</li>\n<li>Поиск идет до первой рабочей стратегии</li>\n<li>При нескольких попытках любой фейл приводит к концу серии попыток. Ведь все равно будет итоговый фейл</li>\n</ol>\n<p>По умолчанию все равно оставляю standard, чтобы основная цель скрипта оставалась неизменной</p>\n<p>Из blockcheck убраны тесты ipfrag tcp, поскольку современная сеть практически не оставляет никаких шансов этому варианту.</p>",
        "post_number": 112,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-24T08:24:29.910Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 87,
        "readers_count": 86,
        "score": 52.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/112",
        "can_translate": false
    },
    {
        "id": 24114,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-25T20:31:30.663Z",
        "cooked": "<p>Немного наблюдений по поводу протокола QUIC.<br>\nЕсли кратко, то на DPI он обрабатывается криво. Алгоритмы несовершенны.<br>\nПоведение DPI может зависеть от типа клиентской библиотеки.<br>\nquiche может пробивать блокировку и без средств обхода.<br>\nПакеты initial от разных библиотек могут не собираться DPI, и он может не извлекать host.<br>\ncurl с nghttp3 может долго (1-3 сек) выполнять запрос с пробивкой по fake. Там то ли теряются, то ли искажаются пакеты от сервера, вынуждая клиент еще раз слать initial.<br>\nПри этом firefox может сразу и быстро открывать этот же сайт по quic, если количество пробивочных пакетов 5 и выше, и подвисать на QUIC, если меньше.<br>\nАналогично у них реализуется и блокировка wireguard udp и openvpn udp. Для пробивки нужно слать 5 фейков.<br>\nDPI по-прежнему не может корректно сечь разбросанный на несколько пакетов initial. В хромах уже начали включать кибер по умолчанию, так что 50/50. Рандомизирует сигнатуру. То в первый пакет SNI попадет, то во 2-й<br>\nВообщем, сложная эта штука QUIC, и curl test может не отражать реальной специфики как поведет себя броузер</p>",
        "post_number": 113,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-25T20:31:30.663Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 94,
        "readers_count": 93,
        "score": 28.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/113",
        "can_translate": false
    },
    {
        "id": 24124,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-26T10:08:21.718Z",
        "cooked": "<p>В tpws реализованы фильтры протоколов для disorder и oob.<br>\nПараметр oob претерпел несовместимое изменение. Теперь наравне с disorder он берет название протокола http или tls. Если без параметра - применяется дурение ко всем протоколам. Если с параметром - только к этому протоколу.<br>\nМожет быть несколько --disorder или --oob. Например, можно сказать ему сделать oob для tls и http, но не делать для остальных, при условии что задано --split-any-protocol.<br>\nБайт OOB перенесен в параметр --oob-data. Это нужно, потому что в tpws стали появляться стратегии, которые нужны для одних протоколов, но могут ломать другие.<br>\nДля http есть отдельный split --split-http-req. Он имеет приоритет над --split-pos.<br>\nЕсли это не http, то применяется --split-pos. Получается, можно двумя этими параметрами задать разный сплит для http и tls.<br>\nНо вот disorder может сломать http на ТСПУ. В скриптах запуска можно было этот вопрос решить как с nfqws - сделать несколько параметров для http,https,http6,https6.<br>\nНо tpws еще ценен наличием режима socks, а там такое сделать не выйдет, потому что в прогах нет 4 поля socks для разных вариантов. Потому принято решение идти по пути обьединения стратегий в 1 процесс.<br>\nКстати, это еще один пример, что вот так просто взять копипастнуть как на картинке может не получиться. Если вы захотите пойти путем tpws, то там только 1 поле, а стратегии выдал blockcheck две разные. И все, вы тут встряли, если вы - копипастер. А на самом деле это сделано потому, что все можно запихать в 1 стратегию, если их обьеденить, но это не для копипастеров. И, конечно, чтобы не ломать достоинство socks.<br>\ntpws в текущих реалиях в России работает, но ограниченно.<br>\nКак правило он может пробить http, а https только на tls 1.3.<br>\nНе поддерживающие tls 1.3 заблокированные сайты пробить не получится.</p>",
        "post_number": 114,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-26T10:11:29.660Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 97,
        "readers_count": 96,
        "score": 49.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/114",
        "can_translate": false
    },
    {
        "id": 24162,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-03-27T15:01:10.754Z",
        "cooked": "<p>Худой, но как-то работающий способ пробить TLS1.2 на tpws. Не везде, но много где. Не особо качественно. Но лучше, чем ничего.</p>\n<p>–mss устанавливает опцию сокета TCP_MAXSEG. Клиент выдает это значение в tcp опциях SYN пакета.<br>\nСервер в ответ в SYN,ACK выдает свой MSS. На практике сервера обычно снижают размеры отсылаемых ими пакетов, но они все равно не вписываются в низкий MSS, указанный клиентом. Обычно чем больше указал клиент, тем больше шлет сервер. На TLS 1.2 если сервер разбил заброс так, чтобы домен из сертификата не попал в первый пакет, это может обмануть DPI, секущий ответ сервера.<br>\nСхема может значительно снизить скорость и сработать не на всех сайтах.<br>\nНесовместимо с фильтром по hostlist. Невозможен фильтр по версии TLS.<br>\nВзамен имеется фильтр по портам --mss-pf. --mss-pf=443 применяет дурение только к https.<br>\nПрименяя данную опцию к сайтам TLS1.3, если броузер тоже поддерживает TLS1.3, то вы делаете только хуже.<br>\nНо нет способа автоматически узнать когда надо применять, когда нет, поскольку MSS идет только в<br>\n3-way handshake еще до обмена данными, а версию TLS можно узнать только по ответу сервера, который может привести к реакции DPI.<br>\nИспользовать только когда нет ничего лучше или для отдельных ресурсов.<br>\nРаботает только на linux, не работает на BSD и MacOS.</p>",
        "post_number": 115,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-03-27T15:01:59.228Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 92,
        "readers_count": 91,
        "score": 38.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/115",
        "can_translate": false
    },
    {
        "id": 24429,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-02T15:55:04.810Z",
        "cooked": "<p>В tpws ликвидировано узкое место, связанное с ресолвером хостов.<br>\nУ socks proxy есть режим переадресации по IP адресу и по хосту.<br>\nВ curl за выбор режима отвечают параметр --socks5 или --socks5-hostname. Можно использовать  параметр --proxy socks5://… и --proxy socks5h://…    . socks5h - это как раз ресолвинг через прокси.</p>\n<p>tpws основан на однопоточном обслуживании всех соединений с использованием неблокирующих сокетов и событийной модели. Тормоза в каком-то соединении не вешают остальные соединения. Но раньше ресолвинг ломал эту модель, поскольку использовался блокирующий вызов getaddrinfo. На время ресолвинга все замирало.</p>\n<p>Сейчас это больше не так. Задача по ресолвингу решается в отдельных потоках, организованных в виде thread pool. Есть очередь запросов, а потоки их по мере возможности разгребают. На время ресолвинга соединение ставится на паузу, не прерывая процессинг всего остального.</p>\n<p>Количество потоков ресолвера выбирается по умолчанию как  5+max_conn/50. По умолчанию max_conn=512, следовательно потоков 15. Можно переопределить в параметре --resolver-threads.</p>\n<p>Да, можно было использовать какую-то отдельную библиотеку для асинхронных ресолвингов, ведь libc в общем случае такой возможности не имеет. Имеет только glibc, а musl и другие - нет. Но это зависимости, это тяжесть процесса, которую хочется избежать.</p>\n<p>Помимо прямого назначения, это нововведение несет в себе и другую цель. Использование tpws в socks режиме с удаленным ресолвингом хостов дает tpws возможность узнать hostname еще до подключения к серверу. Следовательно, задействуется механизм, ограничивающий дурение по MSS через hostlist. В любом другом режиме MSS будет применяться неограниченно ко всем соединениям.</p>\n<p>Как задействовать socks в броузерах.<br>\nВ хромиум подобных вызвать chrome так : chrome.exe --proxy-server=“socks5://localhost:1111” . Они сразу начинают задействовать режим remote_dns.<br>\nВ firefox можно глобально задать в about:flags параметр network.proxy.socks_remote_dns=true. А можно использовать расширение foxyproxy. Оно позволяет оперативно переключать прокси, и можно задать remote_dns для каждого прокси отдельно.</p>",
        "post_number": 116,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-03T09:46:52.983Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 94,
        "readers_count": 93,
        "score": 58.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/116",
        "can_translate": false
    },
    {
        "id": 24463,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-03T19:31:13.430Z",
        "cooked": "<p>WSL 1.  Подсистема linux на win10/11 и windows server.<br>\nЭмуляция вызовов ядра linux, позволяющая запускать бинарики linux.<br>\nНо, естественно, в реализации есть кривизна.</p>\n<p>Проверял на windows server 2022. Оказалось глючат linux pipes.<br>\nДелаешь splice в pipe. Возвращает, что записал 8192 байт.<br>\nДелаешь splice из pipe в сокет. B хрен вам.  EAGAIN. Как будто ничего нет в этом пайпе.<br>\nДелаешь read из пайпа - тоже самое. То есть там действительно пусто.<br>\nПроблема не в сокете. Если в него слать send-ом, то ошибки нет, уходит.<br>\nПолучается суешь в пайп, и это куда-то пропадает неизвестно куда.<br>\nЛогика неблокирующих сокетов приводит к зацикливанию процесса, сьедая целое ядро.</p>\n<p>Сколько ни тестировал на linux, такого нет, а в винде воспроизводится на раз два.</p>\n<p>Лечение - параметр --nosplice. Обход глюка винды</p>",
        "post_number": 117,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-03T19:35:30.938Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 86,
        "readers_count": 85,
        "score": 47.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/117",
        "can_translate": false
    },
    {
        "id": 24560,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-08T16:51:43.037Z",
        "cooked": "<p>Исправлен целый ряд проблем, все же имевшихся в схеме postnat.<br>\nДесинхронизация на первый пакет (syndata на tcp или первый пакет udp, quic, например) несет в себе проблему. Если дропать в очереди первый пакет, то ломается запись в conntrack. Его нельзя дропать.<br>\nПотому было сделано особое уродование первого оригинального пакета, чтобы его пропускать в очереди.<br>\nTTL использовать нельзя, поскольку linux сечет expired icmp и ресетает сокет.<br>\nИспользованы следующие схемы :</p>\n<p>ipv4 - портим L3 чексумму ipv4 хедера. с порченой чексуммой пакет будет отброшен первым же роутером<br>\ntcp - в SYN пакете сбрасываем все флаги и этим самым так же портим чексумму L4<br>\nudp - в первом пакете обрезаем все данные после udp хедера, делаем длину в udp хедере нулевой (минимум 8 требуется - длина самого хедера), портим чексумму L4</p>\n<p>эти меры призваны достичь результата, даже если вдруг сетевой адаптер на все делает чексум оффлоад<br>\nглавная цель - чтобы этот пакет никем по возможности не был воспринят как что-то значимое. ни DPI, ни сервером. но в то же время не испортилась бы запись в коннтрак</p>",
        "post_number": 118,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-08T16:52:28.914Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 93,
        "readers_count": 92,
        "score": 33.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/118",
        "can_translate": false
    },
    {
        "id": 24714,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-13T08:16:31.347Z",
        "cooked": "<p>Для дурения произвольных протоколов в nfqws добавлен параметр --dpi-desync-start.</p>\n<p>Он полностью аналогичен --dpi-desync-cutoff, но работает как начальный ограничитель. cutoff - конечный ограничитель.<br>\nТаким образом дублируется функционал connbytes FROM:TO на уровне nfqws. Можно вырезать по номеру пакета (n), смещению позиции данных (s), а так же отсутствующий в connbytes режим - по номеру пакета данных (d). d от n отличается только тем, что считаются пакеты с непустым data payload.<br>\nЭтот фильтр помогает решить вопрос с отсутствующим connbytes на BSD системах или на прошивочках linux с покоцаным ядром, где нет матча connbytes.<br>\nПри наличии connbytes лучше это делать средствами iptables/nftables. Тогда не будет лишних редиректов user mode, скорость будет выше в разы.<br>\nЕсли надо ограничить дурение в d режиме, игнорируя непонятное количество пустых ACK, то делаем ограничитель connbytes на максимум возможных пакетов, где нам надо что-то поймать, дальше уточняющий ограничитель в d режиме на nfqws.</p>\n<p>В tpws уже реализована пара похожих параметров --tamper-start, --tamper-cutoff</p>",
        "post_number": 119,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-13T08:21:31.526Z",
        "reply_count": 0,
        "reply_to_post_number": 118,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 91,
        "readers_count": 90,
        "score": 73.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/119",
        "can_translate": false
    },
    {
        "id": 24792,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-17T06:56:50.035Z",
        "cooked": "<p>В nfqws теперь обязателен параметр --qnum. Раньше был номер очереди по умолчанию 0.<br>\nСделано во избежание неверного использования, вызванного непониманием как оно работает.<br>\nВ iptables, кстати, NFQUEUE тоже имеет по умолчанию номер очереди 0. То есть если раньше кто-то писал iptables без queue-num, а nfqws запускал без qnum, то это работало, а теперь перестанет. Вернуть этот вариант можно через nfqws --qnum 0</p>",
        "post_number": 120,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-17T06:59:11.619Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 87,
        "readers_count": 86,
        "score": 42.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/120",
        "can_translate": false
    },
    {
        "id": 24995,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-20T18:14:04.654Z",
        "cooked": "<p>В nfqws сделана система задержки пакетов.<br>\nНачиная с chrome 124 по умолчанию включена пост-квантовая криптография kyber. Это раздувает TLS ClientHello до 2 пакетов, QUIC initial до 2 или 3 пакетов. Может быть и больше при низком MTU.<br>\nРанее nfqws умел реассемблировать TLS ClientHello, но проводил десинхронизацию на тот сегмент TCP, где появилось SNI и все последующие. Допустим, имеется 5 пакетов, в 3-м из которых SNI. Получается, мы имеем : tls1,tls2,fake,tls3,fake,tls4,fake,tls5. Не слишком корректное поведение. QUIC же вообще никак не реассемблировался.<br>\nТеперь введена система задержки пакетов. Мы получаем tls1…tls5, но в сеть не шлем, а только запоминаем. По приходу последнего tls5 выполняется десинхронизация tls1 на основании полностью собранного запроса. Выходит так : fake,tls1,tls2,tls3,tls4,tls5. Что куда более корректно, ведь суть фейка - вынудить DPI отстать от запроса. Но как он от него отстанет в предыдущем варианте, если он сначала видит tls1. Он начинает реассемблировать вплоть до tls5. И получает испорченный блок данных где-то посередине. Такое тоже обычно срабатывает для обхода, но все же это не достигает изначальной цели fake.<br>\nДля QUIC производится аналогичная процедура, только с дешифровкой каждого куска, конкатенацией расшифрованных данных до тех пор, пока из них не соберется полный ClientHello.<br>\nЛюбая ошибка при сборке вызывает немедленную отмену реассемблирования, отсылку задержанных пакетов и отмену десинхронизации.</p>",
        "post_number": 121,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-20T18:30:21.129Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 97,
        "readers_count": 96,
        "score": 34.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/121",
        "can_translate": false
    },
    {
        "id": 25257,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-26T18:54:32.978Z",
        "cooked": "<p>Реализован nfqws для windows - winws.<br>\nЭто фактически замена GoodbyeDPI с up-to-date функциями из nfqws.<br>\nРаботает практически все.<br>\nИз ограничений : нет ipset, не поддерживается проходящий трафик (расшаривание соединения)<br>\nПоддерживается blockcheck, но он требует установки cygwin.<br>\nСам winws установки cygwin не требует.</p>\n<p>Читайте docs/windows.txt, docs/quick_start_windows.txt</p>\n<p>Это дебют, так что welcome тестировать.</p>",
        "post_number": 122,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-26T18:57:01.650Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 132,
        "reads": 93,
        "readers_count": 92,
        "score": 678.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/122",
        "can_translate": false
    },
    {
        "id": 25285,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-28T09:53:19.782Z",
        "cooked": "<p>Создан bundle для ускоренного и упрощенного запуска blockcheck под windows. Его достаточно для полноценного развертывания winws.</p>\n<aside class=\"onebox githubrepo\" data-onebox-src=\"https://github.com/bol-van/zapret-win-bundle\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/bol-van/zapret-win-bundle\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n  <img width=\"690\" height=\"344\" src=\"zapret-whats-new-61/6a4d4e93b25d01d87d7db18939fcb5735e6b4e0e_2_690x344.png\" class=\"thumbnail\" data-dominant-color=\"EEF4EE\">\n\n  <h3><a href=\"https://github.com/bol-van/zapret-win-bundle\" target=\"_blank\" rel=\"noopener\">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a></h3>\n\n    <p><span class=\"github-repo-description\">zapret and blockcheck binary bundle for windows</span></p>\n</div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Адаптирована инструкция из основного репозитория docs/quick_start_windows.txt</p>",
        "post_number": 123,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-28T09:53:57.043Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 95,
        "readers_count": 94,
        "score": 44.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret-win-bundle",
                "internal": false,
                "reflection": false,
                "title": "GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows",
                "clicks": 170
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/123",
        "can_translate": false
    },
    {
        "id": 25337,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-04-30T12:50:38.455Z",
        "cooked": "<p>Сделан запуск в виде windows служб.<br>\nСм service_*.cmd<br>\nМожно запускать и через планировщик, и как службы. Как вам больше нравится.</p>",
        "post_number": 124,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-04-30T12:50:38.455Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 89,
        "readers_count": 88,
        "score": 32.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/124",
        "can_translate": false
    },
    {
        "id": 25350,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-05-01T10:59:02.633Z",
        "cooked": "<p>Устранена гонка при одновременном запуске нескольких инстансов winws.<br>\nОна связана с CreateService/StartService драйвера windivert.sys<br>\nЭто проблема не связана напрямую с winws, а с windivert.dll</p>\n<p>Устранено возможное падение при остановке сервиса</p>",
        "post_number": 125,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-05-01T10:59:02.633Z",
        "reply_count": 0,
        "reply_to_post_number": 124,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 85,
        "readers_count": 84,
        "score": 32.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/125",
        "can_translate": false
    },
    {
        "id": 25432,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-05-04T12:24:08.329Z",
        "cooked": "<p>Поделюсь своим опытом изучения windows 10 arm64 под qemu-aarch64 на платформе x86.</p>\n<p>Известно, что эта платформа имеет встроенный эмулятор кода x86. Бинарная трансляция. Примерно так, как это сделано в android x86 для arm - там используются libhoodini.<br>\nЦелью было выяснить возможно ли вообще использовать winws на базе x86_64 cygwin с неподписанным драйвером windivert для arm в режиме ядра testsigning.</p>\n<p>Попытка установить win11 закончилась провалом. Все мои попытки заканчивались ошибкой установщика уже на этапе после наката install.wim на HDD. Тоже самое получалось и если install.wim накатить вручную через dism, а bcd создать вручную</p>\n<p>win10 встала. Но первое, что я заметил, были совершенно невообразимые тупняки.<br>\nКонечно, тормоза ожидались, но там все просто ложилось почти намертво.<br>\nКак выяснилось, бинарный транслятор кода x86 под qemu-aarch64 при попытке выполнить любой бинарик x86 зацикливается с отьеданием 100% одного ядра.<br>\nНеважно что это - хоть простейший cmd. Можно ждать хоть часами - ничего не меняется.<br>\nТак что миссия на этом этапе провалилась. Не работает x86 код вообще.</p>\n<p>А встроенного кода x86 там хватает. На удивление microsoft сильно схалявил. Целый ряд компонент windows не был перенесен на arm, а выполняется как x86 !!<br>\nНачиная с onedrive, который автоматически запускается и добавляет тупняка, и заканчивая powershell, без которого , например, даже нельзя снести все эти ненужные магазинные приложения.</p>\n<p>По мере чистки от левака с убиранием из автозапуска всего x86 система стала гораздо более отзывчива и даже почти юзабельна.</p>\n<p>Так что пока тестировать не на чем. Требуется реальная подходящая arm железяка</p>",
        "post_number": 126,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-05-04T12:27:59.536Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 95,
        "readers_count": 94,
        "score": 74.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/126",
        "can_translate": false
    },
    {
        "id": 25454,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-05-05T19:26:01.373Z",
        "cooked": "<p>Проверена работа winws на windows 11 arm64 с неподписанным драйвером windivert в режиме testsigning.<br>\nОно работает. Для быстрого наката arm64 версии сделан батник в bundle : arm64/install_arm64.cmd<br>\nВсе, кроме драйвера, работает в x64 эмуляции.<br>\nWindows 10 arm64 не поддерживается по причине отсутствия x64 эмуляции. Поддерживается только x86.</p>",
        "post_number": 128,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-05-05T19:27:27.518Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 93,
        "readers_count": 92,
        "score": 28.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/128",
        "can_translate": false
    },
    {
        "id": 26479,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-18T14:58:27.058Z",
        "cooked": "<p>Пару недель назад прошла такая тема, что в ОАЭ и СаудиАрабиа перестал работать GoodByeDPI.<br>\nПросто начисто. Блокчек от winws так же показал безуспешность всех вариантов.<br>\nДумали все очень сложно. Но оказалась банальщина. Они ищут в отдельных пакетах stateless сигнатуру SNI и смотрят там хост.<br>\nПомогает сплит на SNI. Но , увы, такой функции нет в zapret. Недавно Валдик дописал это для GDPI.</p>\n<p>Сейчас догоняет и zapret. Но там все несколько сложнее. Потому что поддерживаются многосегментные запросы.<br>\nВ tpws добавлен параметр --split-tls. Там все довольно просто, поскольку мы не имеем дело с отдельными пакетами. Все равно сколько пакетов в итоге будет.<br>\nВ nfqws добавлены параметры --dpi-desync-split-http-req и --dpi-desync-split-tls.<br>\nИ в nfqws, и в tpws для tls допустимы значения sni и sniext.  sni - значит резать после 1 символа хоста. sniext - резать между байтами 2-байтной длины SNI extension.<br>\nВ nfqws реализация оказалась сложнее. SNI может попасть на любой пакет в серии. Поэтому сплит-десинхронизация применяется только к тому пакету, в котором оказалась искомая позиция относительно начала всего многопакетного сообщения. Это касается как явно заданной позиции в байтах, так и автоопределения через split-tls. fake и многие другие опции идут при этом только на первый пакет серии.<br>\nЭто все надо, чтобы в ОАЭ без отключения кибера сразу же заработала обманка на chrome.<br>\nGDPI пока что требует отключения кибер.</p>\n<p>В tpws добавлена поддержка --tlsrec=sniext.<br>\ntlsrec может сочетаться со split-tls. В этом случае они адаптируются , и вычисляется корректная позиция, чтобы сплит попал куда надо, учитывая дописывание дополнительного заголовка TLS record.</p>\n<p>В блокчек добавлены новые тесты для описанного функционала.<br>\nСделан кэш mdig.<br>\nИзначально curl запускался с именем домена. Он сам его и ресолвил. Но оказывается, что при использования прокси опции -4 и -6 не могут корректно рулить через какую версию ip пойдет запрос. А прокси нужен для tpws. На некоторых платформах прозрачный режим не работает для локального хоста, либо его сложно автоматически задействовать.<br>\nПотому curl теперь гоняется с --connect-to , а хост ресолвит mdig. Ранее при каждом запросе запускался mdig. Теперь он запускается 1 раз на хост и ip версию, а результат запоминается в переменных shell. Запоминаются все ответы, и каждый раз выбирается случайный. Точно так же, как это делает стандартная система DNS</p>",
        "post_number": 129,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-18T17:10:33.828Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 93,
        "readers_count": 92,
        "score": 28.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/129",
        "can_translate": false
    },
    {
        "id": 26495,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-19T06:11:03.366Z",
        "cooked": "<p>github внезапно отключил gzip compression. сломались скрипты ipset/get_reestr*.sh<br>\nисправлено<br>\nиспользовать curl --compressed нельзя, потому что на кастрированных системах curl без zlib. потому приходится эту логику реализовывать самому через шелл</p>",
        "post_number": 130,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-19T06:12:01.606Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 83,
        "readers_count": 82,
        "score": 21.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/130",
        "can_translate": false
    },
    {
        "id": 26506,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-19T16:56:34.432Z",
        "cooked": "<p>Добавлена важная функция в winws.<br>\nВ --ssid-filter можно через запятую задать неограниченное количество имен wifi сетей (SSID). Если задана хотя бы одна сеть, то winws включается только, если подключен указанный SSID. Если SSID исчезает, winws отключается. Если SSID появляется снова, winws включается. Это нужно, чтобы можно было применять раздельное дурение к каждой отдельной wifi сети.<br>\nНазвания сетей должны быть написаны в том регистре, в котором их видит система. Сравнение идет с учетом регистра !<br>\nПри этом нет никаких проверок куда реально идет трафик. Если одновременно подключен, допустим, ethernet, и трафик идет туда, то дурение включается и выключается просто по факту наличия wifi сети, на которую трафик может и не идти. И это может сломать дурение на ethernet. Поэтому полезно так же будет добавить фильтр --wf-iface на индекс интерфейса wifi адаптера, чтобы не трогать другой трафик.</p>\n<p>Зачем это надо. Представьте себе, что вы настроили winws на ноуте чайника, который ничего не понимает, никуда не полезет и ничего не будет ни запускать, ни менять. Можно настроить и сделать сервис. Окей, чайник переехал и подключился к другому wifi. Стратегия не работает и ломает сайты. Что делать ? Ограничить дурение только на те сети, в которых вы знаете какая стратегия работает. Если таких несколько, то можно создать несколько инстансов winws с разными стратегиями и разными --ssid-fllter.<br>\nТаким образом чайник ничего не делает, и у него либо обходится блокировка, либо хотя бы ничего не ломается.</p>",
        "post_number": 131,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-20T05:17:51.048Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 92,
        "readers_count": 91,
        "score": 33.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/131",
        "can_translate": false
    },
    {
        "id": 26517,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-20T09:23:40.230Z",
        "cooked": "<p>В blockcheck добавлены тесты открытости порта 80,443 (требуется ncat или netcat openbsd, бизибокс netcat не поддерживается !) и тесты блокировки по IP на DPI.</p>\n<p>С портами все понятно. Если нет коннекта, то это сразу <em>ВСЕ</em>.<br>\nДомен может ресолвиться в несколько IP. Может не быть конекта на отдельных IP, если какие-то IP зарублены полностью.</p>\n<p>Бывает так же и частичный IP блок. Конект идет, но на любые запросы возвращается reset или только на определенные протоколы типа http, tls, вне зависимости от домена.<br>\nСуть тестов блокировки по IP - дернуть заблокированный домен на предположительно незаблокированном ip (ip <a href=\"http://iana.org\">iana.org</a> по умолчанию) и незаблокированный домен (<a href=\"http://iana.org\">iana.org</a>) на заблокированном IP.<br>\nДополнительно тестируется сам неблокированный домен (<a href=\"http://iana.org\">iana.org</a>), чтобы быть точно уверенным, что в вашей экзотической стране не зарубили даже его.<br>\nИнтерпретация результата целиком на пользователе и требует понимания.<br>\nЛогика примерно такая. Если блок идет только на DPI по домену, то блокированный домен будет давать reset, timeout или redirect на любом IP.<br>\nНеблокированный домен на блокированном IP будет давать или available для http (на самом деле http code 409 или что-то такое реально вернет сервер), или ошибка при подключения по TLS сразу без задержек (что-то вроде handshake error).<br>\nЭта ситуация говорит об отсутствии блока по IP.<br>\nЕсли reset, timeout, redirect идут на неблокированном домене на блокированном IP, а блокированный домен на неблокированном IP выдает available или TLS error сразу без задержек, значит вероятно имеет место блок только по IP.<br>\nЕсли reset, timeout, redirect идут в обоих тестах, то может иметься блок как по IP, так и по домену.<br>\nТест на блокированные IP проводится на каждый IP блокированного домена, если их несколько, а на неблокированный IP - только 1 раз на любой из IP неблокированного домена.<br>\nСобственно, это то, что я часто прошу сделать руками в случае непоняток. Сейчас это автоматизировано, и по логу блокчека можно понять больше.<br>\nЕсли действительно есть блок по IP, значит вероятно все последующие тесты будут безуспешны.<br>\nОднако, бывают ситуации, когда и частичный IP блок пробивается.<br>\nНапример, в СаудиАрабиа оказалось, что добавление destopt хедера в ipv6 запросе пробивает блокировку. DPI не может следовать дополнительным ipv6 хедерам, не воспринимает пакет как tcp и пропускает его.<br>\nВ этом и суть частичного блока. Блок на IP только определенных протоколов транспортного и прикладного уровня. Если DPI не может опознать протокол, то блокировки нет.</p>\n<p>Полезные переменные для blockcheck<br>\nCURL_MAX_TIME=sec - сколько секунд до таймаута curl запроса. по умолчанию 2<br>\nCURL_MAX_TIME_QUIC=sec - отдельно для quic. по умолчанию совпадает с предыдущим<br>\nCURL_CMD=1 - показывать строку запуска curl каждый раз<br>\nCURL_VERBOSE=1 - опция -v для curl. в добавок автоматически CURL_CMD=1<br>\nSKIP_TPWS=1 - отказаться от TPWS тестов<br>\nSKIP_TPWS=0 - не отказываться от TPWS тестов, когда по умолчанию предусмотрен отказ<br>\nSKIP_PKTWS=1 - отказаться от nfqws/dvtws/winws тестов<br>\nUNBLOCKED_DOM - домен, используемый для ip block тестов. по умолчанию <a href=\"http://iana.org\">iana.org</a><br>\nDOMAINS=“dom1 dom2 … domN” - какие домены тестировать. по умолчанию <a href=\"http://rutracker.org\">rutracker.org</a></p>\n<p>Переменные используются так :<br>\nCURL_MAX_TIME=1 SKIP_TPWS=1 CURL_CMD=1 /opt/zapret/blockcheck.sh</p>",
        "post_number": 132,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-20T09:55:26.613Z",
        "reply_count": 1,
        "reply_to_post_number": 131,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 106,
        "readers_count": 105,
        "score": 81.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://iana.org",
                "internal": false,
                "reflection": false,
                "title": "Internet Assigned Numbers Authority",
                "clicks": 4
            },
            {
                "url": "http://rutracker.org",
                "internal": false,
                "reflection": false,
                "title": "RuTracker.org",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/132",
        "can_translate": false
    },
    {
        "id": 26543,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-22T13:24:54.771Z",
        "cooked": "<p>ПРИМЕРЫ БЛОКИРОВКИ ТОЛЬКО ПО ДОМЕНУ БЕЗ БЛОКА ПО IP</p>\n<pre><code class=\"lang-auto\">&gt; testing iana.org on it's original ip\n!!!!! AVAILABLE !!!!!\n&gt; testing rutracker.org on 192.0.43.8 (iana.org)\ncurl: (28) Operation timed out after 1002 milliseconds with 0 bytes received\n&gt; testing iana.org on 172.67.182.196 (rutracker.org)\nHTTP/1.1 409 Conflict\n&gt; testing iana.org on 104.21.32.39 (rutracker.org)\nHTTP/1.1 409 Conflict\n\n&gt; testing iana.org on it's original ip\n!!!!! AVAILABLE !!!!!\n&gt; testing rutracker.org on 192.0.43.8 (iana.org)\ncurl: (28) Connection timed out after 1001 milliseconds\n&gt; testing iana.org on 172.67.182.196 (rutracker.org)\ncurl: (35) OpenSSL/3.2.1: error:0A000410:SSL routines::ssl/tls alert handshake failure\n&gt; testing iana.org on 104.21.32.39 (rutracker.org)\ncurl: (35) OpenSSL/3.2.1: error:0A000410:SSL routines::ssl/tls alert handshake failure\n\n&gt; testing iana.org on it's original ip\n!!!!! AVAILABLE !!!!!\n&gt; testing rutracker.org on 192.0.43.8 (iana.org)\nHTTP/1.1 307 Temporary Redirect\nLocation: https://www.gblnet.net/blocked.php\n&gt; testing iana.org on 172.67.182.196 (rutracker.org)\nHTTP/1.1 409 Conflict\n&gt; testing iana.org on 104.21.32.39 (rutracker.org)\nHTTP/1.1 409 Conflict\n\n&gt; testing iana.org on it's original ip\n!!!!! AVAILABLE !!!!!\n&gt; testing rutracker.org on 192.0.43.8 (iana.org)\ncurl: (35) Recv failure: Connection reset by peer\n&gt; testing iana.org on 172.67.182.196 (rutracker.org)\ncurl: (35) OpenSSL/3.2.1: error:0A000410:SSL routines::ssl/tls alert handshake failure\n&gt; testing iana.org on 104.21.32.39 (rutracker.org)\ncurl: (35) OpenSSL/3.2.1: error:0A000410:SSL routines::ssl/tls alert handshake failure\n</code></pre>\n<p>ПРИМЕР ПОЛНОГО IP БЛОКА ИЛИ БЛОКА TCP ПОРТА ПРИ ОТСУТСТВИИ БЛОКА ПО ДОМЕНУ</p>\n<pre><code class=\"lang-auto\">* port block tests ipv4 startmail.com:80\nncat -z -w 1 145.131.90.136 80\n145.131.90.136 does not connect. netcat code 1\nncat -z -w 1 145.131.90.152 80\n145.131.90.152 does not connect. netcat code 1\n\n* curl_test_http ipv4 startmail.com\n- checking without DPI bypass\ncurl: (28) Connection timed out after 2002 milliseconds\nUNAVAILABLE code=28\n\n- IP block tests (requires manual interpretation)\n&gt; testing iana.org on it's original ip\n!!!!! AVAILABLE !!!!!\n&gt; testing startmail.com on 192.0.43.8 (iana.org)\nHTTP/1.1 302 Found\nLocation: https://www.iana.org/\n&gt; testing iana.org on 145.131.90.136 (startmail.com)\ncurl: (28) Connection timed out after 2002 milliseconds\n&gt; testing iana.org on 145.131.90.152 (startmail.com)\ncurl: (28) Connection timed out after 2002 milliseconds\n</code></pre>",
        "post_number": 133,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-22T13:32:52.677Z",
        "reply_count": 1,
        "reply_to_post_number": 132,
        "quote_count": 0,
        "incoming_link_count": 15,
        "reads": 103,
        "readers_count": 102,
        "score": 100.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/133",
        "can_translate": false
    },
    {
        "id": 26612,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-24T14:05:23.395Z",
        "cooked": "<p>Новое дополнение к split и disorder. Опция --dpi-desync-split-seqovl.<br>\nЭто достаточно сложная для понимания концепция, если не представляешь себе хорошо как работает tcp протокол.<br>\nЕсли сказать по-простому, то это замешивание фейковых данных и реальных в разделяемые сегменты tcp. Замешивание идет через игру с sequence numbers таким образом, чтобы сервер воспринял лишь оригинал, а DPI было очень сложно разобраться где оригинал, а где мусор.<br>\nЭтот вариант может не требовать отдельных фейк пакетов, а следовательно TTL и fooling.</p>\n<p>На ТСПУ игра с sequence обычно вызывает зависание http, но работает на https.</p>\n<p>Полное описание из readme.</p>\n<p>seqovl добавляет в начало первой отсылаемой части оригинального пакета (1 часть для split и 2 часть для disorder) seqovl байт со смещенным в минус sequence number на величину seqovl.<br>\nВ случае split2 расчет идет на то, что предыдущий отсыл, если он был, уже попал в сокет серверного приложения, поэтому новая пришедшая часть лишь частично находится в пределах текущего окна (in-window). Спереди фейковая часть отбрасывается, а оставшаяся часть содержит оригинал и начинается с начала window, поэтому попадает в сокет. Серверное приложение получает все, что реально отсылает клиент, отбрасывая фейковую out-of-window часть. Но DPI не может этого понять, поэтому у него происходит sequence десинхронизация.</p>\n<p>Для disorder2 overlap идет на 2-ю часть пакета. Обязательно, чтобы seqovl был меньше split_pos, иначе все отосланное будет передано в сокет сразу же, включая фейк, ломая протокол прикладного уровня. При соблюдении этого условия 2-я часть пакета является полностью in-window, поэтому серверная ОС принимает ее целиком, включая фейк. Но поскольку начальная часть данных из 1 пакета еще не принята, то фейк и реальные данные остаются в памяти ядра, не отправляясь в серверное приложение. Как только приходит 1-я часть пакета, она переписывает фейковую часть в памяти ядра. Ядро получает данные из 1 и 2 части, поэтому далее идет отправка в сокет приложения. Таково поведение всех unix ОС - оставлять последние принятые данные.<br>\nДля windows серверов может быть наоборот, поэтому не факт, что такой вариант будет на них работать. Метод позволяет обойтись без fooling и TTL. Фейки перемешаны с реальным данными.<br>\nsplit/disorder вместо split2/disorder2 по-прежнему добавляют дополнительные отдельные фейки.</p>\n<p>Как показывает практика, на https оно может не работать на TLS1.2, поскольку сечется ответ сервера с сертификатом. Только --wssize 1:6 позволяет это обойти.</p>",
        "post_number": 134,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-24T16:49:18.626Z",
        "reply_count": 1,
        "reply_to_post_number": 133,
        "quote_count": 0,
        "incoming_link_count": 13,
        "reads": 116,
        "readers_count": 115,
        "score": 93.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/112",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 6
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/134",
        "can_translate": false
    },
    {
        "id": 26626,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-06-25T06:56:08.898Z",
        "cooked": "<p>Исправлен существенный косяк blockcheck.<br>\nНа curl, собранном с использованием версии openssl с quic (quictls), библиотека не определялась как openssl и не включался параметр tls-max.<br>\nПоэтому все запросы шли реально на tls1.3, что давало искаженную картину.</p>\n<p>Добавлен специфический seqovl тест на подсовывание полного ClientHello от <a href=\"http://iana.org\">iana.org</a>. Аналог <strong>fake,split2</strong> , только в одном флаконе.<br>\nТСПУ отстает от такого TLS 1.2 запроса, не проверяя ответ сервера, и поэтому не нужен --wssize , снижающий скорость</p>\n<pre><code class=\"lang-auto\">- checking nfqws --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2\ncurl: (35) Recv failure: Connection reset by peer\nUNAVAILABLE code=35\n- checking nfqws --dpi-desync=split2 --dpi-desync-split-seqovl=336 --dpi-desync-split-seqovl-pattern=/opt/zapret/files/fake/tls_clienthello_iana_org.bin\n!!!!! AVAILABLE !!!!!\n</code></pre>\n<p>336 потому, что остаток до 517 байт заполнен нулями. ТСПУ их игнорирует.  У нас же пойдет начало реального запроса вместо нулей. По умолчанию 2 байта.</p>\n<p>В zapret-win-bundle еще косяк. Не положил files/fake. Из-за этого все тесты, их использующие, не работали.<br>\n/bin/sh был копией /bin/bash. Заменено на dash.  dash в несколько раз быстрее bash. blockcheck стал бегать повеселее</p>",
        "post_number": 135,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-06-25T09:26:51.198Z",
        "reply_count": 0,
        "reply_to_post_number": 134,
        "quote_count": 0,
        "incoming_link_count": 15,
        "reads": 117,
        "readers_count": 116,
        "score": 98.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://iana.org",
                "internal": false,
                "reflection": false,
                "title": "Internet Assigned Numbers Authority",
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/135",
        "can_translate": false
    },
    {
        "id": 26925,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-07-12T12:24:55.444Z",
        "cooked": "<p>В winws в добавок к ssid-filter сделан NLM filter.</p>\n<pre><code class=\"lang-auto\">--nlm-filter=net1[,net2,net3,...] ; включать winws только когда подключена любая из указанных сетей NLM\n--nlm-list[=all] ; вывести список сетей NLM. по умолчанию только подключенных, all - всех.\n</code></pre>\n<p>–nlm-filter аналогичен --ssid-filter, но работает с именами или GUIDами сетей Network List Manager (NLM). Это те сети, которые вы видите в панели управления в разделе “Центр управления сетями и общим доступом”. Под сетью подразумевается не конкретный адаптер, а именно сетевое окружение конкретного подключения. Обычно проверяется mac адрес шлюза. К сети можно подключиться через любой адаптер, и она останется той же самой. Если подключиться, допустим, к разными роутерам по кабелю, то будут разные сети. А если к одному роутеру через 2 разных сетевых карточки на том же компе - будет одна сеть. NLM абстрагирует типы сетевых адаптеров. Он работает как с wifi, так и с ethernet и любыми другими. Поэтому это более универсальный метод, чем ssid фильтр.</p>",
        "post_number": 136,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-07-12T12:25:24.572Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 18,
        "reads": 119,
        "readers_count": 118,
        "score": 118.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/136",
        "can_translate": false
    },
    {
        "id": 27197,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-07-16T11:53:35.840Z",
        "cooked": "<p>В режим autohostlist внесен дополнительный механизм избегания ложных срабатываний.<br>\nРаньше чтобы добавить в лист домен нужно было, чтобы он фейлился столько-то раз на протяжении такого-то времени. При этом могло быть так. Плохо,  хорошо, плохо, хорошо, хорошо, плохо. Это вызывало попадание в лист. Сейчас “хорошо” сразу же сбрасывает счетчик “плохо”. Цель - обнаружить постоянное “плохо”. Если оно через раз, значит либо это проблемы самого сайта (перегруз, например), либо ваша стратегия обхода неустойчива.<br>\nРаботает и в nfqws, и в tpws.<br>\nПод “хорошо” понимается прием любых данных от сервера, не содержащих http redirect на другой домен (заглушку), либо отсыл любого пакета с sequence number, выходящим за пределы TLS ClientHello (то есть процесс пошел дальше, значит клиент принял что-то от сервера, и это уже не затык на DPI)</p>",
        "post_number": 137,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-07-16T12:03:22.271Z",
        "reply_count": 0,
        "reply_to_post_number": 136,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 126,
        "readers_count": 125,
        "score": 55.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/137",
        "can_translate": false
    },
    {
        "id": 28196,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-07-30T14:33:31.585Z",
        "cooked": "<p>В blockcheck сделана корректная зачистка при обрыве терминала. Например, отвалился ssh.</p>\n<p>Из git удалены все изменяемые файлы. Это config, init.d/{macos,sysv,openwrt}/custom, ipset/zapret-hosts-user*.txt<br>\nОни переименованы с расширением .default.<br>\nИнсталятор если увидит отсутствие этих файлов скопирует их с .default<br>\nblockcheck скопирует только config<br>\nzapret-hosts-user-ipban.txt и zapret-hosts-user.txt удалены. они заполняются кодом в инсталяторе.</p>\n<p>Это сделано чтобы можно было не парясь накатывать файлы поверх имеющейся инсталяхи или делать git pull не парясь о нестыковках.</p>",
        "post_number": 138,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-07-30T14:33:31.585Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 28,
        "reads": 127,
        "readers_count": 126,
        "score": 165.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/138",
        "can_translate": false
    },
    {
        "id": 28313,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-07-31T07:11:47.541Z",
        "cooked": "<p>Распространенная проблема, связанная с ютубе,</p>\n<p>Чел сканирует блокчеком, находит стратегию с TTL. Она обходит большинство заблокированных ресурсов.<br>\nЧел добавляет <a href=\"http://googlevideo.com\">googlevideo.com</a>. Он ломается.<br>\nДогадайтесь почему. &lt;вступает в силу необходимость понимать что пишешь, а не копировать&gt;</p>\n<details>\n<summary>\nСпойлер</summary>\n<p>Все дело в том, что GGC ставятся поближе к провайдеру и часто имеют длину пути ниже указанного в стратегии. Фейки доходят до сервера и ломают сеанс.<br>\nРешение - добавить ограничитель. Наиболее совместимый - --dpi-desync-fooling=md5sig<br>\nЕсли у вас работает --dpi-desync-fooling=datanoack, то можно избавиться от TTL полностью.<br>\nОн вероятно не будет работать через домашний роутер, но может работать с него.</p>\n</details>\n<p>другая возможная причина тупняка - не настроен обход quic<br>\nда, quic они тоже замедляют. работает --dpi-desync=fake.<br>\nего нельзя сочетать с ttl.<br>\nвозможно, какие-то ТСПУ еще не научились разбирать kyber quic, потому на них дефолтный хроме может обходить замедление сам по себе. потому в сети ходит противоречивая инфа то включать quic, то выключать. GDPI quic не поддерживает.<br>\nтак же известно, что у ТСПУ исторически были проблемы с пакетами quic от разных библиотек разных версий. и на протяжении истории это менялось. они что-то доделывали.<br>\nс zapret-ом , наверно, лучше все-же сделать fake на quic. хуже не станет. и kyber тоже поддерживается</p>",
        "post_number": 139,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-07-31T09:23:22.334Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 35,
        "reads": 158,
        "readers_count": 157,
        "score": 206.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://googlevideo.com",
                "internal": false,
                "reflection": false,
                "title": "Google Videos",
                "clicks": 7
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/139",
        "can_translate": false
    },
    {
        "id": 28525,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-01T05:59:25.082Z",
        "cooked": "<p>Еще немного наблюдений по поводу обхода замедления ютубе.</p>\n<p>split2 работает, но исключительно потому, что позиция по умолчанию - 2.<br>\nРаботает простой сплит на позиции 1 и 2. 3 байта в начале - это маркер TLS. Если DPI видит TLS оно начинает реассемблировать пакеты до получения full tls client hello. Внедрение кибера не оставила вариантов цензорам. Приходится реассемблить.<br>\nПоэтому простые сплиты на позиции более 2 не срабатывают.<br>\nНо работает практически любая мишура. fake, disorder2, oob, split.</p>",
        "post_number": 140,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-01T06:03:41.210Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 159,
        "readers_count": 158,
        "score": 186.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BF%D0%BE%D0%BF%D1%8B%D1%82%D0%BA%D0%B0-%D0%BF%D1%80%D0%B8%D0%BD%D1%83%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE-%D1%84%D1%80%D0%B0%D0%B3%D0%BC%D0%B5%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-sni-%D1%81%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B0%D0%BC%D0%B8-mikrotik/8987/4",
                "internal": true,
                "reflection": true,
                "title": "Попытка принудительно фрагментировать SNI средствами mikrotik",
                "clicks": 7
            },
            {
                "url": "https://ntc.party/t/byedpi-for-android/7314/68",
                "internal": true,
                "reflection": true,
                "title": "ByeDPI for Android",
                "clicks": 2
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/140",
        "can_translate": false
    },
    {
        "id": 28569,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-01T08:57:29.481Z",
        "cooked": "<p>Написал краткий FAQ по поводу обхода youtube средствами zapret :</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://github.com/bol-van/zapret/discussions/200\">\n  <header class=\"source\">\n      <img src=\"https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg\" class=\"site-icon\" data-dominant-color=\"\" width=\"32\" height=\"32\">\n\n      <a href=\"https://github.com/bol-van/zapret/discussions/200\" target=\"_blank\" rel=\"noopener\">GitHub</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/344;\"><img src=\"zapret-whats-new-61/322f17304088f52391a9756b2929dfebda018f53_2_690x345.png\" class=\"thumbnail\" data-dominant-color=\"F0F3F1\" width=\"690\" height=\"345\"></div>\n\n<h3><a href=\"https://github.com/bol-van/zapret/discussions/200\" target=\"_blank\" rel=\"noopener\">Обход замедления youtube в России · bol-van/zapret · Discussion #200</a></h3>\n\n  <p>РКН замедляет некоторые домены youtube как на https, так и на quic. Проверка на youtube android app показывает замедление или блокировку следующих доменов (включая поддомены, если таковые есть) : g...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 141,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-01T08:57:29.481Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 56,
        "reads": 180,
        "readers_count": 179,
        "score": 316.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret/discussions/200",
                "internal": false,
                "reflection": false,
                "title": "Обход замедления youtube в России · bol-van/zapret · Discussion #200 · GitHub",
                "clicks": 367
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/141",
        "can_translate": false
    },
    {
        "id": 29096,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-02T17:44:08.613Z",
        "cooked": "<p>Оказывается, не так все просто с windows 7 и готовым winws из комплекта zapret.</p>\n<p>Требования к подписи драйверов windows изменились в 2021 году. Официальные бесплатные обновления windows 7 закончились в 2020. После этого несколько лет продолжали идти платные обновления по программе ESU. Именно в этих ESU обновлениях находится обновление ядра windows 7, позволяющиее загрузить драйвер windivert 2.2.2-A, который идет в поставке zapret.<br>\nПоэтому варианты следующие :</p>\n<ol>\n<li>\n<p>Взять windivert64.sys и windivert.dll версии 2.2.0-C или 2.2.0-D отсюда : <a href=\"https://reqrypt.org/download\" class=\"inline-onebox\">Index of /download/</a><br>\nи заменить эти 2 файла. В zapret-win-bundle есть отдельных 2 места, где находится winws : zapret-winws и blockcheck/zapret/nfq. Надо менять в обоих местах. Этот вариант проверен и должен работать. Тем не менее патч 10 летней давности, который включает SHA256 сигнатуры, все еще необходим.</p>\n</li>\n<li>\n<p>Взломать ESU : <a href=\"https://hackandpwn.com/windows-7-esu-patching/\" class=\"inline-onebox\">Windows 7 ESU Patching · HackAndPwn</a><br>\n<a href=\"http://www.bifido.net/tweaks-and-scripts/8-extended-security-updates-installer.html\" class=\"inline-onebox\">Скрипт для установки и интеграции платных обновлений (ESU)</a><br>\nи обновить систему</p>\n</li>\n<li>\n<p>Использовать UpdatePack7R2 от simplix : <a href=\"https://blog.simplix.info\">https://blog.simplix.info</a><br>\nНо с этим паком есть проблема. Автор из Украины, он очень обиделся на русских. Если в панели управления стоит регион RU или BY, появляется неприятный диалог. Чтобы эту проблему обойти, можно поставить временно любой другой регион, потом вернуть. Так же нет никаких гарантий, что автор не насовал туда какой-то зловредный код. Использовать на свой страх и риск.<br>\nБолее безопасный вариант - скачать последнюю нормальную версию : 22.2.10<br>\n<a href=\"https://nnmclub.to/forum/viewtopic.php?t=1530323\" class=\"inline-onebox\">Набор обновлений UpdatePack7R2 для Windows 7 SP1 и Server 2008 R2 SP1 22.2.10 [Multi/Ru] :: NNM-Club</a><br>\nЕе достаточно, чтобы windivert 2.2.2-A заработал на windows 7.</p>\n</li>\n</ol>",
        "post_number": 142,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-03T03:26:47.955Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 340,
        "reads": 183,
        "readers_count": 182,
        "score": 1741.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://nnmclub.to/forum/viewtopic.php?t=1530323",
                "internal": false,
                "reflection": false,
                "title": "Набор обновлений UpdatePack7R2 для Windows 7 SP1 и Server 2008 R2 SP1 22.2.10 [Multi/Ru] :: NNM-Club",
                "clicks": 30
            },
            {
                "url": "https://reqrypt.org/download",
                "internal": false,
                "reflection": false,
                "title": "Index of /download/",
                "clicks": 28
            },
            {
                "url": "https://hackandpwn.com/windows-7-esu-patching/",
                "internal": false,
                "reflection": false,
                "title": "Windows 7 ESU Patching · HackAndPwn",
                "clicks": 26
            },
            {
                "url": "https://blog.simplix.info",
                "internal": false,
                "reflection": false,
                "title": "simplix.info — полезные разработки 🇺🇦",
                "clicks": 16
            },
            {
                "url": "http://www.bifido.net/tweaks-and-scripts/8-extended-security-updates-installer.html",
                "internal": false,
                "reflection": false,
                "title": "Скрипт для установки и интеграции платных обновлений (ESU)",
                "clicks": 10
            },
            {
                "url": "https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D0%B8-%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2-windows-7-x64/8510/26",
                "internal": true,
                "reflection": true,
                "title": "Подписи драйверов Windows 7 x64",
                "clicks": 5
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/142",
        "can_translate": false
    },
    {
        "id": 34930,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-22T14:18:08.259Z",
        "cooked": "<p>Оказалось, что утечки памяти ядра и падения кинетика при использовании nfqws к zapret отношения не имеют. Кинетик использует старое ядро с багом, который давно пофиксили, но в кинетике непатченная версия. Разрабы собираются выкатывать патч в новых прошивках</p>",
        "post_number": 143,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-22T14:18:38.377Z",
        "reply_count": 0,
        "reply_to_post_number": 142,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 141,
        "readers_count": 140,
        "score": 58.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-youtube-%D0%B8-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BE%D0%BA-%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B5-keenetic-%D1%81-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E-nfqws-tpws-zapret/9426/199",
                "internal": true,
                "reflection": true,
                "title": "Обсуждение: Обход замедления YouTube и блокировок на прошивке Keenetic с помощью nfqws / tpws (zapret)",
                "clicks": 9
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/143",
        "can_translate": false
    },
    {
        "id": 35455,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-24T07:20:55.541Z",
        "cooked": "<p>Очередное обновление.</p>\n<p>Почистили немного C код по результатам статического и динамического анализа</p>\n<p>В dvtws больше не используются raw сокеты для отсылки ipv4 пакетов. Вместо них используется divert. Поэтому “not sockarg” в правилах ipfw больше не нужно. Так же это призвано наладить совместимость с древними версиями BSD, где sockarg еще нет ( я не проверял, но кто-то писал issue, у него были проблемы из-за этого в freebsd 7.4, вышедшей в 2011 году ).<br>\nНо главной целью этого изменения было попробовать завести divert через divert-to в pf. Увы, попытка провалилась, идет зацикливание. Механизм предотвращения зацикливания divert в pf сломан в FreeBSD и как следствие в pf/opn sense включая версию ядра 14-RELEASE.<br>\nКто-то выкатывал патч для ядра BSD, но видимо его еще не накатили в релизе.<br>\nА ipfw иногда глючит с pf вместе. Потому запуск dvtws на pf/opn sense может иметь неожиданные последствия.</p>\n<p>В nfqws и tpws исправлен детект TLS ClientHello на очень старых криптолибах, которые шлют SSL 3.0 версию в TLS record layer , а в handshake - TLS 1.2. Старые телики самсунг, например.</p>\n<p>nfqws и tpws теперь умеют логить --debug в файл и syslog.<br>\nsyslog очень удобен на openwrt, потому что там используется logd с циклическим буфером в памяти. Читать через logread.<br>\n–debug параметр можно вносить в опции NFQWS или TPWS в конфиге, но лучше в самом начале, иначе не поймаются ошибки при анализе командной строки.</p>\n<p>В tpws добавлена опция --connect-bind-addr. В ней можно задать ipv4 или ipv6 адрес, с которого будут выполняться исходящие подключения. Для указания и v4, и v6 можно опцию повторить.<br>\nПоддерживается и нотация fe80:xxxx:xxxx:…%interface_name для v6 link locals.<br>\nОднако , это не отменяет правил маршрутизации. Пакет пойдет на тот интерфейс, куда его направит система маршрутизации ip rule/ip route и прочее. Исключение - разве что link local. Там пойдет на тот интерфейс, который будет после %. По другому и нельзя применять link locals.<br>\nТак что не ждите чуда, чтобы направить коннект на какой-то специфический интерфейс.<br>\nНа openwrt используются правила маршрутизации ipv6 с from, поэтому там это может сработать.<br>\nИ не стоит удивляться, если вдруг вы указали адрес VPN, а в tcpdump оно идет на обычный инет с адресом обычного инета. Если default route на обычный инет более приоритетен, то ваш IP адрес VPN превращается через MASQUERADE в адрес обычного инета.<br>\nВообщем, эта опция не есть панацея для выбора исходящего интерфейса сама по себе.</p>\n<p>В tpws в режиме --debug добавлено логирование с какого enpoint-а (ip:source_port) идет подключение к удаленному ресурсу. Это может быть полезно для соотнесения лога tpws с дампом wireshark или tcpdump.</p>",
        "post_number": 144,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-24T07:20:55.541Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 16,
        "reads": 142,
        "readers_count": 141,
        "score": 108.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/144",
        "can_translate": false
    },
    {
        "id": 35905,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-26T12:25:57.597Z",
        "cooked": "<p>Немного переписана логика закрытия соединений в tpws.</p>\n<p>Обнаружена такая проблема, что если клиент инициирует shutdown соединения, и нет неотосланных данных, tpws сразу же бросает оба конекта, не давая серверу дослать оставшиеся данные. Получается, клиент ждет последнего ответа, а ему приходит FIN, как будто сервер ничего не прислал.<br>\nЛогика этой ситуации переписана с использованием вызова shutdown().<br>\nТеперь соединение через tpws должно корректно перекачивать все байтики до конца.<br>\nТак же сделан детект обрыва соединения через RST и воспроизведение RST на другом конце (leg).<br>\nЭто секут броузеры. Если им приходит RST, они пытаются что-то делать еще, а если FIN, то могут посчитать, что сервер прислал пустышку (ошибка протокола).</p>\n<p>В результате этих изменений могут появляться надолго подвисшие конекты через tpws, если один из концов принял соединение и повис, не отвечая на FIN.<br>\nЭта ситуация разрешается через FIN_WAIT timeout. Через какое-то время (до нескольких минут на BSD) соединения закроются.</p>",
        "post_number": 145,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-26T12:25:57.597Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 26,
        "reads": 128,
        "readers_count": 127,
        "score": 155.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/145",
        "can_translate": false
    },
    {
        "id": 36161,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-27T15:38:21.035Z",
        "cooked": "<p>Для смягчения вышеописанного недостатка с FIN_TIMEOUT на linux и macos сделал поддержку tcp user timeout. FreeBSD и OpenBSD не поддерживают.</p>\n<p>–local-tcp-user-timeout и --remote-tcp-user-timeout устанавливают значение таймаута в секундах<br>\nдля соединений клиент-прокси и прокси-сервер. Этот таймаут соответствует опции сокета linux<br>\nTCP_USER_TIMEOUT. Под таймаутом подразумевается время, в течение которого буферизированные данные не переданы или на переданные данные не получено подтверждение (ACK) от другой стороны.<br>\nЭтот таймаут никак не касается времени отсутствия какой-либо передачи через сокет лишь потому,<br>\nчто данных для передачи нет. Полезно для сокращения время закрытия подвисших соединений.<br>\nПоддерживается только на Linux и MacOS.</p>\n<p>По умолчанию - 10 сек для local leg, 20 сек - для remote leg.<br>\nЕсли сделать 0, то setsockopt не будет выполнен, оставляя системное значение.</p>",
        "post_number": 146,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-27T15:40:21.284Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 35,
        "reads": 161,
        "readers_count": 160,
        "score": 212.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/146",
        "can_translate": false
    },
    {
        "id": 36571,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-08-29T07:12:11.097Z",
        "cooked": "<p>Проверил на эмуляторе android youtube app от google.<br>\nТупит, не загружается.<br>\nТупит на <a href=\"http://youtubei.googleapis.com\">youtubei.googleapis.com</a> и *.googlevideo.com<br>\nОстальное превьюшки - и еще что-то.<br>\n<a href=\"http://yt3.ggpht.com\">yt3.ggpht.com</a> у меня вообще был заблокирован - зависание или RST</p>\n<pre><code class=\"lang-auto\">googlevideo.com\nyoutubei.googleapis.com\ni.ytimg.com\nyt3.ggpht.com\n</code></pre>\n<p>После задуривания всех этих доменов в режиме как на обход блокировок приложение работает нормально.</p>",
        "post_number": 147,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-08-29T07:12:49.363Z",
        "reply_count": 0,
        "reply_to_post_number": 146,
        "quote_count": 0,
        "incoming_link_count": 38,
        "reads": 191,
        "readers_count": 190,
        "score": 228.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "http://yt3.ggpht.com",
                "internal": false,
                "reflection": false,
                "clicks": 9
            },
            {
                "url": "http://youtubei.googleapis.com",
                "internal": false,
                "reflection": false,
                "clicks": 3
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/147",
        "can_translate": false
    },
    {
        "id": 39965,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-14T19:26:01.906Z",
        "cooked": "<p>Провы по глупости стали дурить DPI, чтобы создать сиюминутное конкурентное преимущество.<br>\nВ ответ в РКН включили особый режим против дурения на некоторых ggc.<br>\nПерестали работать фейки. Но им пришлось оставить разрешенными SNI от гуглодоменов.<br>\nПоэтому дописываем в стратегию <code>--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</code> , и пока этого достаточно для дурения и блокировок, и ютуба.</p>\n<p>Тем не менее чисто профилактически в nfqws заменен дефольный ClientHello на версию от firefox 128 без kyber. Сделана рандомизация SNI в формате <code>[a-z][a-z0-9]{5}\\.(com|org|net|edu|gov|biz)</code><br>\nТак же рандомизируются поля random и session id.<br>\nРандомизация применяется только к дефолтному фейку. Если указать внешний файл для фейка - он будет как есть. Рандомизация выполняется 1 раз при старте nfqws.</p>\n<p>Пофиксены 2 проблемы на архитектуре mips64 : сломаный seccomp filter и threaded resolver в tpws</p>\n<p>В mdig пофиксено отображение статистики на 32-битных архитектурах с 64-битным time_t</p>",
        "post_number": 148,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-14T19:29:35.579Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 215,
        "reads": 213,
        "readers_count": 212,
        "score": 1117.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/549",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 26
            },
            {
                "url": "https://ntc.party/t/%D1%82%D1%80%D0%B0%D1%84%D1%84%D0%B8%D0%BA-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8-%D1%83%D0%BF%D0%B0%D0%BB-%D0%B4%D0%BE-20/14048/46",
                "internal": true,
                "reflection": true,
                "title": "Траффик YouTube в России упал до 20%",
                "clicks": 0
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/664",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 0
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/548",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/148",
        "can_translate": false
    },
    {
        "id": 41203,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-17T17:09:56.282Z",
        "cooked": "<p>МНОЖЕСТВЕННЫЕ СТРАТЕГИИ<br>\nnfqws способен по-разному реагировать на различные запросы и применять разные стратегии дурения. Это реализовано посредством поддержки множества профилей дурения. Профили разделяются в командной строке параметром --new. Первый профиль создается автоматически.<br>\nДля него не нужно --new. Каждый профиль имеет фильтр. По умолчанию он пуст, то есть профиль удовлетворяет любым условиям. Фильтр может содержать жесткие параметры : версия ip протокола или порты tcp/udp. Они всегда однозначно идентифицируются даже на нулевой фазе десинхронизации, когда еще хост неизвестен. В качестве фильтра могут выступать и хост-листы. Они могут сочетаться с жесткими параметрами. При поступлении запроса идет проверка профилей в порядке от первого до последнего до достижения первого совпадения с фильтром. Жесткие параметры фильтра сверяются первыми. При несовпадении идет сразу же переход к следующему профилю. Если какой-то профиль удовлетворяет жесткому фильтру и содержит авто-хостлист, он выбирается сразу. Если профиль удовлетворяет жесткому фильтру, для него задан хостлист, и у нас еще нет имени хоста, идет переход к следующему профилю. В противном случае идет проверка по хостлистам этого профиля. Если имя хоста удовлетворяет листам, выбирается этот профиль. Иначе идет переход к следующему.<br>\nМожет так случиться, что до получения имени хоста соединение идет по одному профилю, а при получении хоста профиль меняется на лету. Поэтому если у вас есть параметры дурения нулевой фазы, тщательно продумывайте что может произойти при переключении стратегии. Смотрите debug log, чтобы лучше понять что делает nfqws.<br>\nНумерация профилей идет с 1 до N. Последним в цепочке создается пустой профиль с номером 0.<br>\nОн используется, когда никакие условия фильтров не совпали.</p>\n<p>ВАЖНО : множественные стратегии создавались только для случаев, когда невозможно обьединить имеющиеся стратегии для разных ресурсов. Копирование стратегий из blockcheck для разных сайтов во множество профилей без понимания как они работают приведет к нагромождению параметров, которые все равно не покроют все возможные заблокированные ресурсы. Вы только увязните в этой каше.</p>\n<p>Мульти-профиль для tpws будет позже.<br>\nРефакторинг был серьезный, поэтому необходимо тестирование !</p>",
        "post_number": 149,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-17T19:59:46.850Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 435,
        "reads": 233,
        "readers_count": 232,
        "score": 2221.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/955",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 5
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/149",
        "can_translate": false
    },
    {
        "id": 41207,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-17T17:15:26.214Z",
        "cooked": "<p>Несколько практических замечаний по поводу мульти-стратегий.<br>\nЕсли используются скрипты zapret, то в опции NFQWS сначала пишите специальные стратегии для особых доменов. После них пишите --new и дальше то, что было там раньше.<br>\nВсе свои “фишки” типа стандартных листов / автолиста скрипты zapret добавляют в конец - к последнему профилю десинхронизации.</p>\n<p><strong>НЕСОВМЕСТИМОЕ ИЗМЕНЕНИЕ.</strong><br>\n<strong>В новой концепции профилей методы нулевой фазы десинхронизации несовместимы с хост-листами и больше не применяются !</strong><br>\nРанее они применялись , игнорируя хостлист.<br>\nЕсли у вас были стратегии с syndata или wssize и включен режим hostlist, то syndata и wssize не будут применены. Остальные методы 1 и 2 фазы будут применены как обычно.<br>\nЕсли включен режим autohostlist, то syndata и wssize будут применяться, поскольку профиль с autohostlist приоритетен.</p>\n<p>Пример :<br>\n<code>NFQWS_OPT_DESYNC=\"--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --new --dpi-desync=fake,split --dpi-desync-ttl=0 --dpi-desync-fooling=datanoack\" NFQWS_OPT_DESYNC_HTTPS6=\"--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-ttl=5 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-ttl=5 --dpi-desync-fooling=datanoack\"</code></p>\n<p>Вот так изменилось содержимое preset_russia.cmd для winws :<br>\n<code>start \"zapret: http,https,quic\" /min \"%~dp0winws.exe\" --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 --new --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --filter-tcp=443 --hostlist=\"%~dp0list-youtube.txt\" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=\"%~dp0tls_clienthello_www_google_com.bin\" --new --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig</code></p>\n<p>windivert filter : это то, что захватывает ядро и передает процессу winws. Аналог ip/nf tables.<br>\n1 профиль : udp 443 - для quic<br>\n2 профиль : tcp port 80 - для http<br>\n3 профиль : tcp port 443 с листом list-youtube.txt .  https для ютуба<br>\n4 профиль : все остальные https</p>\n<p>Теперь продумайте логику как это работает.<br>\nМы обрабатываем только порты 80 и 443 для tcp и порт 443 для udp.<br>\nИного к нам не спустит windivert.</p>\n<p>Если у нас порт udp 443, то применять fake.<br>\nТут жесткая фиксация, udp на другой профиль попасть не может.</p>\n<p>Если tcp port 80, то тут тоже все однозначно. Другой профиль невозможен</p>\n<p>Если tcp port 443, то начало соединения на нулевой фазе идет по профилю 4.<br>\nНо т.к. нет методов нулевой фазы (wssize, syndata и тому подобное), то никаких действий не будет.<br>\nКак только получаем хостнейм из SNI, идет проверка заново по всем профилям.<br>\n1,2 профили отбрасываются , поскольку не удовлетворяют жесткому фильтру.<br>\nНа 3 профиле идет проверка hostname по листу list-youtube.txt<br>\nЕсли хост в этом листе, выбирается профиль 3. Здесь происходит смена профиля на лету.<br>\nИначе профиль остается как был - 4.</p>\n<p>Посмотрим на preset_russia_autohostlist.cmd<br>\n<code>start \"zapret: http,https,quic\" /min \"%~dp0winws.exe\" --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 --new --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto=\"%~dp0autohostlist.txt\" --new --filter-tcp=443 --hostlist=\"%~dp0list-youtube.txt\" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=\"%~dp0tls_clienthello_www_google_com.bin\" --new --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto=\"%~dp0autohostlist.txt\"</code></p>\n<p>Разница только в наличии параметра --hostlist-auto. Причем он подтянут сразу к 2 профилям : 2 и 4.<br>\nМожно делать разные автолисты для жестких профилей, но можно использовать и 1 файл.<br>\nПочему я написал 2 раза автолист ? Потому что сперва идет проверка жесткого фильтра. Если у нас порт 80, до профиля 4 мы не доберемся, и автолист не будет задействован.<br>\nАвтолист всегда надо писать на последнем профиле, к которому может дойти проверка на жестком фильтре. Если таких путей несколько, и вы хотите автолист на всех, то и писать надо во все места.<br>\nНо если бы вы написали автолист на профиле 3, это была бы большая глупость.<br>\nДо профиля 4 дело бы вообще не дошло, и все бы обслуживалось по профилю 3.</p>\n<p>Теперь подумайте куда надо было бы написать wssize и syndata для https, если бы они были в стратегии. Правильный ответ - в профиль 4. Даже для ютуба, который идет по профилю 3. И они будут применятся ко всем сайтам, потому что не фильтруются по хостлисту.</p>\n<p>А что будет со старыми конфигами ? Ничего не будет. Они так же будут работать по единственному профилю. За исключением упомянутого выше несовместимого изменения. Если в стратегии были syndata или wssize, и был задан режим hostlist, стратегия полностью или частично перестанет работать. Например, может пропасть ютубе на телике, но остаться на компе (тк TLS 1.2 перестал обходиться). В последнем случае меняйте стратегию или отказывайтесь от hostlist. Чтобы работало как раньше, надо было бы дописать еще один профиль c wssize/syndata, но уже после дополнительных параметров с листами, которые сформируют скрипты zapret. Пока это не реализовано в основном функционале, хотя может быть сделано через custom script.</p>\n<p>Почему нельзя было бы сделать как раньше сразу ? Представьте такой вариант<br>\n<code>--hostlist a --wssize 1:6 --new --hostlist b --wssize 2:5</code><br>\nхостнейм мы не знаем. что выбирать ?</p>",
        "post_number": 150,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-18T06:51:59.105Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 459,
        "reads": 252,
        "readers_count": 251,
        "score": 2345.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 8,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%B3%D0%B4%D0%B5-%D0%BD%D0%B0%D0%B9%D1%82%D0%B8-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8E-%D0%BA%D0%B0%D0%BA-%D0%BE%D0%B1%D1%8A%D0%B5%D0%B4%D0%B8%D0%BD%D1%8F%D1%82%D1%8C-%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B5%D0%B3%D0%B8%D0%B8/10663/4",
                "internal": true,
                "reflection": true,
                "title": "Где найти инструкцию как объединять стратегии?",
                "clicks": 10
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1148",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 6
            },
            {
                "url": "https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/778",
                "internal": true,
                "reflection": true,
                "title": "Окологудбайдипиайный флуд",
                "clicks": 3
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2237",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/150",
        "can_translate": false
    },
    {
        "id": 41617,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-18T16:39:16.538Z",
        "cooked": "<p>Решение проблемы с несовместимостью <code>wssize/syndata</code> с <code>MODE_FILTER=hostlist.</code></p>\n<p>Добавлены переменные конфига</p>\n<pre><code class=\"lang-auto\">#NFQWS_OPT_DESYNC_SUFFIX=\"--dpi-desync=syndata\"\n#NFQWS_OPT_DESYNC_HTTP_SUFFIX=\"--dpi-desync=syndata\"\n#NFQWS_OPT_DESYNC_HTTPS_SUFFIX=\"--wssize 1:6\"\n#NFQWS_OPT_DESYNC_HTTP6_SUFFIX=\"--dpi-desync=syndata\"\n#NFQWS_OPT_DESYNC_HTTPS6_SUFFIX=\"--wssize 1:6\"\n</code></pre>\n<p>Значения по умолчанию копируются в незаполненные специализированные версии аналогичным образом, как и в основных параметрах.<br>\nК параметрам nfqws добавляется <code>--new &lt;suffix_strategy&gt;</code>.<br>\nИтоговые параметры nfqws могут быть такими :  <code>&lt;main_strategy&gt; --hostlist=ipset/zapret-hosts-user.txt --new &lt;suffix_strategy&gt;</code></p>\n<p>Реальный пример.<br>\nУ вас раньше стояло так :</p>\n<pre><code class=\"lang-auto\">MODE_FILTER=hostlist\nNFQWS_OPT_DESYNC_HTTPS=\"--dpi-desync=fake --dpi-desync-fooling=datanoack --wssize 1:6\"\n</code></pre>\n<p>Это перестало работать.<br>\nНадо сделать так :</p>\n<pre><code class=\"lang-auto\">MODE_FILTER=hostlist\nNFQWS_OPT_DESYNC_HTTPS=\"--dpi-desync=fake --dpi-desync-fooling=datanoack\"\nNFQWS_OPT_DESYNC_HTTPS_SUFFIX=\"--wssize 1:6\"\n</code></pre>\n<p>Здесь вы явно указываете, что wssize применяется всегда, вне зависимости от хостлист фильтра.<br>\nТак было и раньше, но теперь старый вариант указания параметров не работает.<br>\nМенять запись нужно только если MODE_FILTER=hostlist. Если там что-то еще - не нужно. Наоборот, если вы уберете wssize из основных параметров и напишите в суффикс без MODE_FILTER=hostlist, то wssize опять перестанет работать, поскольку дело не дойдет до suffix профиля.</p>\n<p>Чтобы wssize работал всегда вне зависимости от MODE_FILTER, можно написать так :</p>\n<pre><code class=\"lang-auto\">NFQWS_OPT_DESYNC_HTTPS=\"--dpi-desync=fake --dpi-desync-fooling=datanoack --wssize 1:6\"\nNFQWS_OPT_DESYNC_HTTPS_SUFFIX=\"--wssize 1:6\"\n</code></pre>",
        "post_number": 151,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-18T16:52:19.773Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 764,
        "reads": 241,
        "readers_count": 240,
        "score": 3873.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/151",
        "can_translate": false
    },
    {
        "id": 42344,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-20T08:42:38.941Z",
        "cooked": "<p>tpws тоже переделан на множественные стратегии</p>\n<p>Работают аналогично nfqws, кроме некоторых моментов.<br>\nНет параметра --filter-udp, поскольку tpws udp не поддерживает.<br>\nМетоды нулевой фазы (–mss) могут работать по хостлисту в одном единственном случае :<br>\nесли используется режим socks и удаленный ресолвинг хостов через прокси.<br>\nТо есть работоспособность вашей настройки в одном и том же режиме может зависеть от того,<br>\nприменяет ли клиент удаленный ресолвинг. Это может быть неочевидно.<br>\nВ одной программе работает, в другой - нет.<br>\nЕсли вы используете профиль с хостлистом , и вам нужен mss, укажите mss в профиле с хостлистом,<br>\nсоздайте еще один профиль без хостлиста, если его еще нет, и в нем еще раз укажите mss.<br>\nТогда при любом раскладе будет выполняться mss.<br>\nИспользуйте <code>curl --socks5</code> и <code>curl --socks5-hostname</code> для проверки вашей стратегии.<br>\nСмотрите вывод --debug, чтобы убедиться в правильности настроек.</p>\n<p>В стандартных скриптах запуска --mss так же копируется в suffix и используется оттуда при <code>MODE_FILTER=hostlist</code>.</p>\n<pre><code class=\"lang-auto\">MODE_FILTER=hostlist\nTPWS_OPT=\"--hostspell=HOST --split-http-req=method --split-pos=3 --oob --mss 88\"\nTPWS_OPT_SUFFIX=\"--mss 88\"\n</code></pre>\n<p><strong>Это несовместимое изменение 1.</strong><br>\n<strong>Несовместимое изменение 2 - удалена опция --mss-pf за ненадобностью. Функция реализована через профили.</strong></p>",
        "post_number": 152,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-20T08:44:18.288Z",
        "reply_count": 0,
        "reply_to_post_number": 151,
        "quote_count": 0,
        "incoming_link_count": 130,
        "reads": 226,
        "readers_count": 225,
        "score": 695.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/766",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 19
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/152",
        "can_translate": false
    },
    {
        "id": 44392,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-09-23T05:27:34.400Z",
        "cooked": "<p>В blockcheck внесена поддержка переменных<br>\nTPWS_EXTRA - для tpws<br>\nPKTWS_EXTRA - для nfqws/dvtws/winws<br>\nэти переменные добавляются к параметрам тестовых запусков соотв демонов</p>\n<p>основное применение - включение разных внешних пейлоадов</p>\n<p><code>PKTWS_EXTRA=\"--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin\" ./blockcheck.sh</code></p>\n<p>чтобы не уродовать код скрипта ради сиюминутных частных веяний и хотелок</p>",
        "post_number": 153,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-09-23T05:28:21.936Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 60,
        "reads": 228,
        "readers_count": 227,
        "score": 350.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/886",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 36
            },
            {
                "url": "https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/139",
                "internal": true,
                "reflection": true,
                "title": "Подбор рабочего конфига для GGC ютуба через blockcheck",
                "clicks": 8
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/153",
        "can_translate": false
    },
    {
        "id": 47857,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-02T08:33:14.520Z",
        "cooked": "<p>Дополнение к *_EXTRA.</p>\n<p>Похоже, что нельзя адекватно в стандартную шелл переменную засунуть множество аргументов командной строки для вызываемого процесса.<br>\nПроблема в пробелах.</p>\n<p>Допустим, у нас PKTWS_EXTRA=“–hostcase --hostnospace”<br>\nЯ передаю эту переменную как есть $PKTWS_EXTRA без кавычек в дочерний процесс.<br>\nПолучается 2 аргумента. Все хорошо.</p>\n<p>но что делать, если PKTWS_EXTRA=“–hostcase --dpi-desync-fake-tls=”/opt/xxxx xxx xxx/fake.bin\"\"</p>\n<p>Нельзя никак сделать, чтобы стало 2 аргумента. И так, и сяк пробовал. Нет нормального способа разделить корректно. Будет или 1 аргумент, или огрызки, или будут передаваться кавычки как есть в процесс. А это - неправильно и не сработает.</p>\n<p>Возможно, есть решение через какие-то внешние стандартные команды, но скрипт затачивается на огрызочный busybox environment. Там нет ничего advanced. И баша тоже нет.</p>\n<p>Решение такое</p>\n<p>PKTWS_EXTRA остается<br>\nВ него можно совать аргументы через пробел, где в отдельно взятом аргументе нет пробелов.<br>\nЕсли пробелы есть или просто так по желанию можно использовать PKTWS_EXTRA_1 , PKTWS_EXTRA_2, … , PKTWS_EXTRA_9</p>\n<p>корректно будет так :</p>\n<p>PKTWS_EXTRA_1=“–hostcase” PKTWS_EXTRA_2=“–dpi-desync-fake-tls=/opt/xxxx xxx xxx/fake.bin” ./blockcheck.sh</p>\n<p>Если у вас cygwin, то обратные слэши не подходят. Надо обратные слэши в пути перевернуть в прямые. Или использовать cygwin пути : /cygdrive/x/path/to/file.bin.<br>\nВ скриптах для автоматизации конверсии путей надо использовать команду cygpath.<br>\nПример cygpath есть в blockcheck.cmd</p>\n<p>Аналогичная схема реализована и для TPWS_EXTRA</p>",
        "post_number": 154,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-02T08:46:49.770Z",
        "reply_count": 1,
        "reply_to_post_number": 153,
        "quote_count": 0,
        "incoming_link_count": 55,
        "reads": 266,
        "readers_count": 265,
        "score": 333.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/140",
                "internal": true,
                "reflection": true,
                "title": "Подбор рабочего конфига для GGC ютуба через blockcheck",
                "clicks": 18
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/154",
        "can_translate": false
    },
    {
        "id": 47914,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-02T09:45:39.934Z",
        "cooked": "<p>Сделал проверку в blockcheck на уже запущенные процессы zapret и вывод предупреждения, если они есть.<br>\nТолько предупреждение. Блокчек ничего не знает об install_easy, о способе запуска этих процессов, не знает ничего о службах systemd, openrc, sysv, ничего не будет останавливать и трогать. Только warning.<br>\nНаличие процессов может свидетельствовать о неободимости остановить службу zapret, а может ни о чем не свидетельствовать. Например, болтается инстанс на порт wireguard или tpws --socks.<br>\nСами думайте надо ли что-то делать или нет.</p>\n<p>Сделал еще детект goodbyedpi. Он тоже будет мешать блокчеку</p>",
        "post_number": 155,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-02T10:44:54.953Z",
        "reply_count": 0,
        "reply_to_post_number": 154,
        "quote_count": 0,
        "incoming_link_count": 80,
        "reads": 293,
        "readers_count": 292,
        "score": 458.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/155",
        "can_translate": false
    },
    {
        "id": 51491,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-10T05:09:56.686Z",
        "cooked": "<blockquote>\n<p>-filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-autottl=2 --dpi-desync-repeats=11</p>\n</blockquote>\n<p>отсутствие понимания создает огромную проблему, и она множится от копипасты<br>\nзапрет не будет думать за вас<br>\nон будет срать 11 пакетами на каждый реальный как вы ему и сказали<br>\nпричем не только на дискорд<br>\nторентики в 10 раз замедлились на раздачу ? вот поэтому, что вы трэш написали</p>\n<p>desync any protocol  нуждается в connbytes или  cutoff ограничителе.<br>\nпример взят  c винды, где connbytes нет</p>\n<p>в добавок в этом примере tamper - лишний. он работает пока только с DHT.<br>\nа так же autottl не будет работать на всех провайдерах. или вообще, или потребуется поиск рабочей delta. Для каких-то протоколов это не так важно, потому что сервер отбрасывает невалидные пакеты, даже если они до него дошли. Типичный пример - QUIC. А для других может испортить что-то.<br>\nПоскольку нет фильтра по IP, а только по портам, то насиловаться будут все udp с портами 50000+. И что-то может сломаться. Совершенно неожиданно и внезапно.</p>",
        "post_number": 156,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-10T07:29:58.952Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 195,
        "reads": 301,
        "readers_count": 300,
        "score": 1035.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/156",
        "can_translate": false
    },
    {
        "id": 53391,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-12T10:23:24.620Z",
        "cooked": "<p>Добавлена поддержка множественных custom скриптов в директориях custom.d</p>\n<details>\n<summary>\nСпойлер</summary>\n<h2><a name=\"p-53391-custom-1\" class=\"anchor\" href=\"#p-53391-custom-1\"></a>Вариант custom</h2>\n<p>custom код вынесен в отдельные shell includes.<br>\nПоддерживается старый вариант в<br>\n/opt/zapret/init.d/sysv/custom<br>\n/opt/zapret/init.d/openwrt/custom<br>\n/opt/zapret/init.d/macos/custom<br>\nОн считается устаревшим. Актуальный вариант - помещать отдельные скрипты там же, но в директорию “custom.d”.<br>\nОна будет просканирована стандартным образом, т.е. в алфавитном порядке, и каждый скрипт будет применен.<br>\nРядом имеется “custom.d.examples”. Это готовые скрипты, которые можно копировать в “custom.d”.<br>\nОсобо стоит отметить “10-inherit-*”. Они наследуют стандартные режимы nfqws/tpws/tpws-socks.<br>\nПолезно, чтобы не писать код заново. Достаточно лишь скопировать соответствующий файл.<br>\nМожно наследовать и более сложным образом.<br>\n“10-inherit-tpws4http-nfqws4https” наследует для http tpws, а для https и quic - nfqws.</p>\n<p>Для linux пишется код в функции<br>\nzapret_custom_daemons<br>\nzapret_custom_firewall<br>\nzapret_custom_firewall_nft</p>\n<p>Для macos<br>\nzapret_custom_daemons<br>\nzapret_custom_firewall_v4<br>\nzapret_custom_firewall_v6</p>\n<p>zapret_custom_daemons поднимает демоны nfqws/tpws в нужном вам количестве и с нужными вам параметрами.<br>\nДля систем традиционного linux (sysv) и MacOS в первом параметре передается код операции : 1 = запуск, 0 = останов.<br>\nДля openwrt логика останова отсутствует за ненадобностью.<br>\nСхема запуска демонов в openwrt отличается - используется procd.</p>\n<p>zapret_custom_firewall поднимает и убирает правила iptables.<br>\nВ первом параметре передается код операции : 1 = запуск, 0 = останов.</p>\n<p>zapret_custom_firewall_nft поднимает правила nftables.<br>\nЛогика останова отсутствует за ненадобностью.</p>\n<p>Если вам не нужны iptables или nftables - можете не писать соответствующую функцию.</p>\n<p>В linux можно использовать локальные переменные FW_EXTRA_PRE и FW_EXTRA_POST.<br>\nFW_EXTRA_PRE добавляет код к правилам ip/nf tables до кода, генерируемого функциями-хелперами.<br>\nFW_EXTRA_POST добавляет код после.</p>\n<p>В linux функции-хелперы добавляют правило в начало цепочек, то есть перед уже имеющимися.<br>\nПоэтому специализации должны идти после более общих вариантов.<br>\nПоэтому наследования идут с префиксом 10, а остальные custom скрипты с префиксом 50.<br>\nДопустим, у вас есть особые правила для IP подсети youtube. Порты те же самые.<br>\nВключен и общий обход. Чтобы youtube пошел приоритетом, скрипт должен применяться после<br>\nобщего обхода.<br>\nДля macos правило обратное. Там правила добавляются в конец. Поэтому inherit скрипты<br>\nимеют префикс 90.</p>\n<p>В macos firewall-функции ничего сами никуда не заносят. Их задача - лишь выдать текст в stdout,<br>\nсодержащий правила для pf-якоря. Остальное сделает обертка.</p>\n<p>Особо обратите внимание на номер демона в функциях “run_daemon” и “do_daemon”, номера портов tpws<br>\nи очередей nfqueue.<br>\nОни должны быть уникальными во всех скриптах. При накладке будет ошибка.<br>\nПоэтому используйте функции динамического получения этих значений из пула.</p>\n<p>custom скрипты могут использовать переменные из config. Можно помещать в config свои переменные<br>\nи задействовать их в скриптах.<br>\nМожно использовать функции-хелперы. Они являются частью общего пространства функций shell.<br>\nПолезные функции можно взять из примеров скриптов. Так же смотрите “common/*.sh”.<br>\nИспользуя хелпер функции, вы избавитесь от необходимости учитывать все возможные случаи<br>\nтипа наличия/отсутствия ipv6, является ли система роутером, имена интерфейсов, …<br>\nХелперы это учитывают, вам нужно сосредоточиться лишь на фильтрах {ip,nf}tables и<br>\nпараметрах демонов.</p>\n</details>\n<p>Сделаны экспериментальные custom скрипты 50-discord.<br>\nАвтор не изучал блокировку этого сервиса. Сделано с информации community.<br>\nМожете дополнять, изменять и оптимизировать.</p>",
        "post_number": 158,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-12T18:40:29.420Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 61,
        "reads": 269,
        "readers_count": 268,
        "score": 358.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/158",
        "can_translate": false
    },
    {
        "id": 55100,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-15T12:30:01.143Z",
        "cooked": "<p>Сделаны скрипты получения листов get_refilter_ipsum.sh, get_refilter_domains.sh</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://habr.com/ru/articles/850292/\">\n  <header class=\"source\">\n      <img src=\"zapret-whats-new-61/e8fc7b34a1237fbc93fd62548efc1a4df1f7fa72.png\" class=\"site-icon\" data-dominant-color=\"97BFD2\" width=\"16\" height=\"16\">\n\n      <a href=\"https://habr.com/ru/articles/850292/\" target=\"_blank\" rel=\"noopener\">Хабр</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"zapret-whats-new-61/1557834368779be24e277f5ec0be00056e71ef49_2_690x389.jpeg\" class=\"thumbnail\" data-dominant-color=\"F4F5F5\" width=\"690\" height=\"389\"></div>\n\n<h3><a href=\"https://habr.com/ru/articles/850292/\" target=\"_blank\" rel=\"noopener\">Альтернативный список заблокированных в РФ ресурсов Re:filter</a></h3>\n\n  <p>В этой статье я хочу описать проблему с которой я столкнулся будучи пользователем существующих списков заблокированных ресурсов, шаги к решению и результаты работы. Статья в меньшей степени...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<aside class=\"onebox githubrepo\" data-onebox-src=\"https://github.com/1andrevich/Re-filter-lists\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/1andrevich/Re-filter-lists\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n  <img width=\"690\" height=\"344\" src=\"zapret-whats-new-61/b1fc6abcf90b039b5ca7598bcbcf4401b1ab330f_2_690x344.png\" class=\"thumbnail\" data-dominant-color=\"EAECED\">\n\n  <h3><a href=\"https://github.com/1andrevich/Re-filter-lists\" target=\"_blank\" rel=\"noopener\">GitHub - 1andrevich/Re-filter-lists: Re:filter is (an attempt to create) an actual list...</a></h3>\n\n    <p><span class=\"github-repo-description\">Re:filter is (an attempt to create) an actual list of blocked domains and IPs in RU + popular and blocked for RU users </span></p>\n</div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Если вкратце, то это интеллектуальная попытка расчистить нарко-казиношный трэш из реестра</p>",
        "post_number": 159,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-15T12:30:01.143Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 28,
        "reads": 258,
        "readers_count": 257,
        "score": 191.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://habr.com/ru/articles/850292/",
                "internal": false,
                "reflection": false,
                "title": "Альтернативный список заблокированных в РФ ресурсов Re:filter / Хабр",
                "clicks": 71
            },
            {
                "url": "https://github.com/1andrevich/Re-filter-lists",
                "internal": false,
                "reflection": false,
                "title": "GitHub - 1andrevich/Re-filter-lists: Re:filter is (an attempt to create) an actual list of blocked domains and IPs in RU + popular and blocked for RU users",
                "clicks": 43
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/159",
        "can_translate": false
    },
    {
        "id": 55533,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-16T13:04:48.705Z",
        "cooked": "<p>Сделаны ipset-ы в tpws и nfqws. User mode реализация, которая ни в коей мере не должна быть использована как удобная замена сложным ковыряниям в ip/nf tables лишь потому, что это просто и удобно. Это будет порочной практикой. Сделано для систем windows и linux без ipset (Android, например)</p>\n<p>ipset-ами фильтруются профили. ipset является жестким фильтром, он работает сразу после первого пакета.</p>\n<p>Поддержка фильтрации L7 (–filter-l7). L7 протокол становится известен обычно после первого пакета с данными вместе с hostname. Поэтому он не работает для нулевой фазы. На нулевой фазе L7 всегда равен unknown.</p>\n<p>autohostlist debug log теперь содержит ip:port клиента и название L7 протокола. В postnat режиме вы не увидите ip клиента, а увидите endpoint самого роутера, с которого идет внешний конект.</p>\n<p>custom scripts<br>\nПеременные FW_EXTRA_PRE, FW_EXTRA_POST для добавления строчки в nft rule или iptables rule до и после правила zapret. Можно использовать как локальные переопределения для одной или более операций в своих custom скриптах.<br>\nНапример, вам очень нужно дурить DPI только для клиентов с одной подсети. Если используется postnat режим, сначала надо маркировать пакеты каким-то битом, не конфликтующим с nfqws, а<br>\nзатем добавлять фильтр по mark.</p>\n<p>Чтобы исключить конфликты по номерам портов , демонов и очередей введена динамическая аллокация через хелперы alloc_dnum, alloc_qnum alloc_tpws_port.</p>\n<p>Новая функция zapret_custom_firewall_nft_flush предназначена для зачистки своих цепочек и set-ов. Нужна только, если таковые есть. Стандартные цепочки zapret чистятся автоматически.</p>\n<p>Новые скрипты получения ip и host листов get_refilter_ipsum.sh , get_refilter_domain.sh</p>\n<p>Багфиксы.<br>\nЗависание tpws/nfqws с 100% cpu usage, если хостлист в gzip и содержит комментарий.<br>\nИсправлено применение autottl при смене профиля на лету.<br>\ntpws: исправлено не-применение MSS в transparent proxy mode.</p>\n<p>zapret-win-bundle. Обновлен preset-russia на поддержку discord voice. Фильтруется по портам и ipset.<br>\nДобавлен killall.exe и reload_lists.cmd для перечитки листов без убивания процесса. Может не работать с сервисом и scheduled task !</p>\n<p>32-битная версия под windows : <a href=\"https://github.com/bol-van/zapret-win32\" class=\"inline-onebox\">GitHub - bol-van/zapret-win32</a></p>",
        "post_number": 160,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-16T17:56:43.075Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 413,
        "reads": 264,
        "readers_count": 263,
        "score": 2117.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://github.com/bol-van/zapret-win32",
                "internal": false,
                "reflection": false,
                "title": "GitHub - bol-van/zapret-win32",
                "clicks": 48
            },
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1460",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 11
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/160",
        "can_translate": false
    },
    {
        "id": 57928,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-21T18:57:52.116Z",
        "cooked": "<p>Сделан минимальный вариант запуска tpws на openwrt для систем с ограниченным местом на диске.<br>\ninit.d/openwrt-minimal<br>\nТребования к диску от 120 до 200 кб. 200 кб - для iptables и ipv6</p>\n<p>Управление конфигом tpws через UCI : /etc/config/tpws. Управление фаерволом через файлы /etc/firewall.user для iptables и /etc/nftables.d/90-tpws.nft  для nftables</p>",
        "post_number": 161,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-21T18:59:57.275Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 225,
        "readers_count": 224,
        "score": 105.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/161",
        "can_translate": false
    },
    {
        "id": 58024,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-22T05:27:14.310Z",
        "cooked": "<p>Собираюсь убирать все это хозяйство с HTTP,HTTPS,QUIC,MODE<br>\nОно создавалось под вариант, когда не было мультистратегий и фильтров.<br>\nСейчас натягивают сову на глобус, пытаясь запихнуть в QUIC незапихуемое только потому, что там udp. Это полнейший misuse и трэш.<br>\nБудет несовместимое изменение, полностью ломающее старый конфиг.<br>\nКонфигурация будет приближена к winws.<br>\nОтдельно настраиваем перехват по портам и отдельно опции единственного инстанса nfqws и/или tpws.<br>\nСтандартный autohostlist будет в виде переменной $AUTOHOSTLIST, стандартный hostlist - $HOSTLIST. Куда надо, туда и воткнете. Будете сами думать куда. Как в винде.<br>\nСкачивание сетов/листов будет отдельно настраиваться.</p>\n<p>Кастомы останутся, но уже без MODE=custom. Достаточно их наличия.<br>\nМогут быть варианты, не вписывающиеся даже в новую схему.<br>\nТот же дискорд требует особого ipset. Проводить в конфиг - это слишком частно, такого не будет.<br>\nНа винде ipset идет через параметр --ipset winws, а на не винде это порочная практика. Естественно, по незнанию и по упрощению будут насиловать несвойственным образом, но это ненормально. Надо использовать kernel ipsets.<br>\nДумаю воткну в инсталятор проверку на наличие параметра --ipset и принудительный отказ продолжать. Иначе один кто-то напишет, а потом по сети этот копипастный трэш будет распространяться.</p>",
        "post_number": 162,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-22T05:40:53.495Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 29,
        "reads": 237,
        "readers_count": 236,
        "score": 192.4,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/162",
        "can_translate": false
    },
    {
        "id": 59201,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-25T11:59:51.462Z",
        "cooked": "<p>Масштабное переосмысление системы запуска под linux,openwrt,macos.<br>\nКонфиг потерял совместимость.<br>\nИнсталлятор при замещении /opt/zapret будет предупреждать о несовместимости параметров и отказываться их сохранять. Придется настраивать заново.</p>\n<p>Основная причина рефакторинга - приведение конфига к функции мульти-стратегий.<br>\nБольше не надо разделять на инстансы http, quic и прочее.<br>\nНе надо натягивать сову на неестественные места. В сети распространились конфиги, где дискорд пытаются засунуть в QUIC.</p>\n<p>Больше нет никаких http, https, quic.<br>\nЕсть отдельно настраиваемые параметры запуска tpws, tpws-socks, nfqws и параметры перехвата трафика через ядро (iptables, nftables).<br>\nОчень похоже на вариант winws на windows.<br>\nПараметра MODE тоже больше нет. Стандартные режимы имеют свои выключатели и включаются независимо, а custom scripts применяются просто по факту их наличия в custom.d<br>\nМожно легко комбинировать tpws и nfqws вместе, и потом на эту систему подвесить еще tpws socks для получения обходного прокси.</p>\n<p>custom скрипты <em>inherit</em> больше не нужны. Если их не убрать, будет рекурсивное зацикливание.</p>\n<p>Применение стандартных хостлистов идет через маркер <code>&lt;HOSTLIST&gt;</code> в конфиге. Скрипты подставляют на его место фактические параметры листов из ipset в зависимости от MODE_FILTER и убирают, если не задана фильтрация по хостлистам.</p>\n<p>Особо читайте раздел “Выбор параметров” в readme.txt, а так же docs/quick_start.txt.</p>",
        "post_number": 163,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-25T12:03:04.699Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 419,
        "reads": 238,
        "readers_count": 237,
        "score": 2132.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1825",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 16
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/163",
        "can_translate": false
    },
    {
        "id": 59264,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-25T15:56:56.134Z",
        "cooked": "<p>Еще одно слабое место остается в nfqws и tpws.<br>\nПри дублировании хостлистов по профилям они дублируются и в  памяти.<br>\nЕсли листы большие - занимаемая память увеличивается кратно.<br>\nТак сделано из-за обьединения всех листов одного типа.<br>\nЕсли 1 профиль имеет хостлист a и b, а другой имеет b, то фактически это разные хостлисты в памяти, поскольку список “a+b” - не a и не b. Там не отделить одно от другого.<br>\nНадо хранить все листы в памяти раздельно и проверять несколько штук в 1 профиле тоже раздельно. И делать дедупликацию. Не загружать заново.<br>\nАналогично и с ipset</p>",
        "post_number": 164,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-25T15:57:53.204Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 246,
        "readers_count": 245,
        "score": 134.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/164",
        "can_translate": false
    },
    {
        "id": 59483,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-26T14:54:20.690Z",
        "cooked": "<p>В blockcheck сделана поддержка DoH.<br>\nОна включается автоматически, если обнаружена подмена DNS.<br>\nЧтобы включить или выключить принудительно, можно использовать переменную<br>\nSECURE_DNS=0|1<br>\nВ код зашит список из 5 открытых ресолверов DoH. Проверяются все по очереди до первого работающего. Этот и используется.<br>\nПереопределить список для поиска можно в переменной DOH_SERVERS. Задать конкретный сервер можно через DOH_SERVER.</p>\n<p>Технически ресолвинг опирается на обновленный mdig и выполняется так :<br>\n<code>mdig --family=6 --dns-make-query=rutracker.org | curl --data-binary @- -H \"Content-Type: application/dns-message\" https://cloudflare-dns.com/dns-query | mdig --dns-parse-query</code></p>\n<p>Поэтому он не требует никакого специального софта и может работать на openwrt без плясок.<br>\nВстроенная поддержка doh в curl может во-первых не быть, во-вторых он будет каждый раз призадумываться. В blockcheck сделано кэширование DNS записей, и этот вариант не очень сочетается.</p>",
        "post_number": 165,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-26T15:03:17.390Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 33,
        "reads": 255,
        "readers_count": 254,
        "score": 216.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/165",
        "can_translate": false
    },
    {
        "id": 59771,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-27T16:32:54.229Z",
        "cooked": "<p>В blockcheck сделана фильтрация только по IP:port тестируемого в настоящий момент домена.<br>\nВсе остальное больше не трогается. Не рушит на час работу броузера.</p>",
        "post_number": 166,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-27T16:32:54.229Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 32,
        "reads": 265,
        "readers_count": 264,
        "score": 218.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1866",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 12
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/166",
        "can_translate": false
    },
    {
        "id": 60294,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-10-29T18:46:01.718Z",
        "cooked": "<p>upcoming release 67 notes</p>\n<p>Самое главное изменение - переделана система внутреннего управления листами в nfqws и tpws.<br>\nЕсли раньше листы одного профиля кидались в общую неделимую кучу и загружались заново для каждого следующего профиля, то теперь листы все загружаются отдельно, исключая повторы.<br>\nЕсли раньше вы писали <code>&lt;HOSTLIST&gt;</code> в 3 профилях и использовали большой РКН лист, то требуемая память умножалась на 3 и могла доходить до внушительных для слабых систем значений. Теперь это больше не так.</p>\n<details>\n<summary>\nСпойлер</summary>\n<pre><code class=\"lang-auto\">--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new \\\n--filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new \\\n--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 &lt;HOSTLIST&gt; --debug\n\nlists summary:\nhostlist file /opt/zapret/ipset/zapret-hosts-user-exclude.txt\nhostlist file /opt/zapret/ipset/zapret-hosts.txt.gz\nhostlist file /opt/zapret/ipset/zapret-hosts-user.txt\nprofile 1 include hostlist /opt/zapret/ipset/zapret-hosts.txt.gz\nprofile 1 include hostlist /opt/zapret/ipset/zapret-hosts-user.txt\nprofile 1 exclude hostlist /opt/zapret/ipset/zapret-hosts-user-exclude.txt\nprofile 2 include hostlist /opt/zapret/ipset/zapret-hosts.txt.gz\nprofile 2 include hostlist /opt/zapret/ipset/zapret-hosts-user.txt\nprofile 2 exclude hostlist /opt/zapret/ipset/zapret-hosts-user-exclude.txt\nprofile 3 include hostlist /opt/zapret/ipset/zapret-hosts.txt.gz\nprofile 3 include hostlist /opt/zapret/ipset/zapret-hosts-user.txt\nprofile 3 exclude hostlist /opt/zapret/ipset/zapret-hosts-user-exclude.txt\n</code></pre>\n</details>\n<p>Кроме того сделана автоматическая перечитка всех листов при изменении времени модификации файлов. HUP больше не нужен.<br>\nИсчезновение какого-либо файла листа или потеря доступа к нему больше не является фатальной проблемой. Раньше демоны в этом случае аварийно завершались. Сейчас в этой ситуации ничего страшного не случится. Будет использоваться копия в памяти. При появлении файла или возобновлении доступа он опять будет проверен на время изменения и при необходимости перегружен.<br>\nПерегрузка выполняется не сразу, а только по факту использования данного листа.</p>\n<p>Все сказанное полностью распространяется и на user mode ipsets.</p>\n<p>Параметры <code>--filter-tcp</code>, <code>--filter-udp</code> теперь берут список портов или диапазонов портов через запятую.<br>\nОсобый знак <code>*</code> есть синоним 1-65535.</p>\n<p>В конфиге в опциях tpws и nfqws введен еще 1 маркер <code>&lt;HOSTLIST_NOAUTO&gt;</code>.<br>\nОн аналогичен <code>&lt;HOSTLIST&gt;</code>, только <code>ipset/zapret-hosts-auto.txt</code> для текущего профиля вставляется как обычный лист, что позволяет выключить логику распознавания блокировок.<br>\nЕсли другой профиль обновил автолист, остальные профили принимают изменения автоматически, поскольку теперь это хранится в одной области памяти без дублирования.</p>\n<p>blockcheck теперь дурит только IP:port тестируемого домена. Все остальное не затрагивается.<br>\nВведена поддержка DoH серверов, которая включается автоматически при обнаружении подмены DNS.<br>\nЭлевация до рута сохраняет переменные исходного юзера. Больше не надо получать сначала рутовый шелл, чтобы скармливать переменные blockcheck.<br>\nblockcheck не проводит элевацию до рута, если SKIP_PKTWS=1 или система MacOS (тк там всегда только tpws)</p>\n<p>Репозиторий zapret-win32 удален. Его содержимое перемещено в основной репозиторий в binaries/win32.<br>\nwin64/zapret-winws так же удален. Его содержимое осталось только в zapret-win-bundle.</p>\n<p>nfqws: исправлено вероятное падение при включении опций --hostcase, --hostnospace, --domcase</p>\n<p>В nfqws, tpws поддерживается чтение конфига из файла через первый и единственный параметр @&lt;config_file&gt;</p>",
        "post_number": 167,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-10-31T15:00:46.581Z",
        "reply_count": 0,
        "reply_to_post_number": 166,
        "quote_count": 0,
        "incoming_link_count": 103,
        "reads": 281,
        "readers_count": 280,
        "score": 571.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/167",
        "can_translate": false
    },
    {
        "id": 63866,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-11-08T08:55:58.564Z",
        "cooked": "<p>release 68</p>\n<p>Удалены binaries. Binaries теперь только в релизах, собираемых через github actions.<br>\nРусская документация переведена в markdown.<br>\nnfqws,tpws: альтернативное использование знака ‘$’ для чтения параметров запуска из файла :$&lt;config_file&gt;<br>\nuninstall_easy.sh: предложение удалить зависимости на openwrt<br>\ninstall_easy.sh: предложение скачивать хостлисты в режиме фильтрации autohostlist<br>\nБагфиксы</p>\n<p>На традиционных *nix платформах по-прежнему можно использовать основную репу без бинариков. Их можно собрать самому, имея <code>cc</code>, <code>make</code> и необходимые dev пакеты : <code>zlib1g-dev libcap-dev libnetfilter-queue-dev</code>. <code>install_easy.sh</code> при отсутствии бинариков сам запустит make. Но установка dev пакетов и компилятора - на вас.<br>\nТак же актуализирована и дока по сборке на openwrt под SDK в <code>docs/compile</code></p>",
        "post_number": 168,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-11-08T09:09:12.455Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 234,
        "readers_count": 233,
        "score": 206.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/168",
        "can_translate": false
    },
    {
        "id": 68015,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-11-19T16:14:59.718Z",
        "cooked": "<h3><a name=\"p-68015-zapret-v69-1\" class=\"anchor\" href=\"#p-68015-zapret-v69-1\"></a>zapret v69</h3>\n<ul>\n<li>nfqws,tpws : поддержка сплита на нескольких позициях : <code>multisplit</code> и <code>multidisorder</code></li>\n<li>nfqws : переименование <code>split</code> =&gt; <code>fakedsplit</code> , <code>disorder</code> =&gt; <code>fakeddisorder</code>. старые варианты остаются как синонимы.</li>\n<li>nfqws : депрекация <code>--dpi-desync-split-http-req</code>, <code>--dpi-desync-split-tls</code>. старые параметры добавляют split позиции к списку.</li>\n<li>nfqws : <code>split2</code> и <code>disorder2</code> становятся синонимами <code>multisplit</code> и <code>multidisorder</code>. сохраняется автоматическая split позиция 2, если не указано <code>--dpi-desync-split-pos</code>.</li>\n<li>nfqws : отмена <code>seqovl</code> без отмены desync в случае превышения MTU. только для Linux.</li>\n<li>nfqws : <code>seqovl</code> берет позиционные маркеры для disorder и только число для split</li>\n<li>tpws : депрекация <code>--split-http-req</code> , <code>--split-tls</code>. старые параметры добавляют split позиции к списку.</li>\n<li>tpws : <code>--tlsrec</code> берет позиционные маркеры, а не только фиксированные смещения</li>\n<li>tpws : депрекация <code>--tlsrec-pos</code>. старый параметр создает абсолютный положительный маркер.</li>\n<li>tpws : починка не срабатывающего мультисплита через <code>--fix-seg</code></li>\n<li>nfqws,tpws : назначение владельца лог файлам и автохостлисту после парсинга всех опций</li>\n<li>nfqws,tpws : установка переменной окружения EXEDIR для использования в <code>@config</code></li>\n<li>dvtws : установка рандомного поля ip_id вместо нулевого</li>\n<li>repo : бинарники для android API level 21+ (Android 5.0)</li>\n<li>install_easy : поддержка APK packet manager в openwrt</li>\n<li>blockcheck : убран вопрос “игнорировать сертификаты”</li>\n<li>blockcheck : убраны переменные IGNORE_CA, CURL_VERBOSE. вместо них добавлена переменная CURL_OPT.</li>\n<li>blockcheck : поддержка новых стратегий multisplit</li>\n<li>blockcheck : переработка порядка тестирования стратегий</li>\n<li>blockcheck : показ всех рабочих стратегий в summary</li>\n<li>багфиксы</li>\n</ul>",
        "post_number": 169,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-11-19T16:19:07.155Z",
        "reply_count": 0,
        "reply_to_post_number": 168,
        "quote_count": 0,
        "incoming_link_count": 95,
        "reads": 218,
        "readers_count": 217,
        "score": 518.6,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/169",
        "can_translate": false
    },
    {
        "id": 68816,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-11-23T10:55:18.701Z",
        "cooked": "<h3><a name=\"p-68816-zapret-v691-1\" class=\"anchor\" href=\"#p-68816-zapret-v691-1\"></a>zapret v69.1</h3>\n<ol>\n<li>tpws : исправлена логика процессинга хостлистов в режиме --socks5-hostname и логика обработки неизвестного протокола с хостлистами.</li>\n<li>10-keenetic-udp-fix : лечащая добавка для кинетика против отсутствия маскарада без ndmmark</li>\n</ol>\n<h3><a name=\"p-68816-zapret-v692-2\" class=\"anchor\" href=\"#p-68816-zapret-v692-2\"></a>zapret v69.2</h3>\n<ul>\n<li>nfqws,tpws: новый параметр <code>--skip</code> для временного исключения профиля без удаления параметров</li>\n<li>nfqws: новый параметр <code>--methodeol</code>. убрать пробел после <code>Host:</code> и добавить <code>\\n</code> перед методом</li>\n<li>init.d: не использовать pgrep в sysv для совместимости с busybox (keenetic, прошивки, alpine)</li>\n</ul>",
        "post_number": 170,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-11-23T10:55:45.422Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 20,
        "reads": 221,
        "readers_count": 220,
        "score": 144.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/170",
        "can_translate": false
    },
    {
        "id": 69127,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-11-24T14:45:57.241Z",
        "cooked": "<p>zapret v69.4</p>\n<ul>\n<li>nfqws: обрамление фейками обоих сегментов в fakedsplit/fakeddisorder</li>\n<li>nfqws: задание содержимого фейков в fakedsplit/fakeddisorder через --dpi-desync-fakedsplit-pattern</li>\n<li>багфиксы</li>\n</ul>\n<p>На некоторых операторах такой зоопарк, что без обрамления обоих сегментов fakedsplit не пробивает.<br>\nДолго думал почему. Резал и по midsld. Нифига не работало.<br>\nКак он определяет какие фейки, какие нет, если все идет подряд с одинаковой длиной и sequence, а во втором куске нет полного имени хоста ? Но по факту если второй кусок тоже облепить, то работает</p>",
        "post_number": 171,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-03T07:32:24.733Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 22,
        "reads": 219,
        "readers_count": 218,
        "score": 158.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/171",
        "can_translate": false
    },
    {
        "id": 70452,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-12-03T15:45:03.526Z",
        "cooked": "<p>zapret v69.5</p>\n<ul>\n<li>nfqws,tpws: опция проверки параметров командной строки без фактического запуска --dry-run</li>\n<li>install_easy: проверка параметров командной строки tpws и nfqws</li>\n</ul>",
        "post_number": 172,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-03T15:45:10.170Z",
        "reply_count": 1,
        "reply_to_post_number": 171,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 205,
        "readers_count": 204,
        "score": 131.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/172",
        "can_translate": false
    },
    {
        "id": 71620,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-12-09T11:10:01.247Z",
        "cooked": "<p>zapret v69.6</p>\n<ul>\n<li>nfqws: Установка NETLINK_NO_ENOBUFS для NFQUEUE. Решает проблему с аварийным выходом процесса на некоторых системах (keenetic).</li>\n<li>init.d: Унификация custom скриптов для linux. Удалены init.d/{openwrt,sysv}/custom.d.examples. Скрипты теперь имеют формат как раньше для sysv, примеры находятся в `init.d/custom.d.examples.linux’. Совместимость со старым openwrt вариантом сохраняется. Но копипастные инструкции немного слетят.</li>\n<li>init.d: Новый custom скрипт 20-fw-extra. Например, для тех, кому нужно дурить трафик через nfqws только с одного входящего интерфейса и не дурить с остальных.</li>\n<li>init.d: Новый custom скрипт 50-wg4all. Ищет в ядре udp пакеты wireguard handshake initiation на любые порты и перенаправляет на nfqws.</li>\n</ul>\n<p>Пояснения на счет 20-fw-extra.<br>\nМеня не раз спрашивали что делать, если надо дурить на nfqws только одну внутреннюю сеть, а другую нет. Чтобы был публичный wifi с ограничениями и непубличный wifi для своих, например. Обычно я предлагал отказаться от скриптов и запускать руками.<br>\nНо теперь эта задача может быть решена и на уровне скриптов.<br>\nГлавная проблема - отсутствие возможности в стандартном варианте задавать свои условия ip/nf tables. Вторая проблема - невозможность фильтрации по внутренним IP в варианте nftables при использовании схемы postnat.<br>\nЗадача решается примерно так :</p>\n<ol>\n<li>Разнести их на разные подсети и интерфейсы. Так проще будет понять нужно ли им дурение. Хотя, если вы можете назначать “своим” особые IP адреса, можно и по ним тоже сечь.</li>\n<li>Сделать NFQWS_ENABLE=0 в config.</li>\n<li>Переписать <code>init.d/custom.d.examples.linux/20-fw-extra</code> в <code>custom.d</code></li>\n<li>Настроить config :</li>\n</ol>\n<pre><code class=\"lang-auto\">NFQWS_ENABLE_OVERRIDE=1\nFW_EXTRA_PRE_NFQWS_IPT=\"-m mark --mark 0x10000000/0x10000000\"\nFW_EXTRA_PRE_NFQWS_NFT=\"mark and 0x10000000 != 0\"\n</code></pre>\n<ol start=\"5\">\n<li>Отдельными средствами маркировать битом 0x10000000 пакеты, предназначенные для дурения на этапе до POSTROUTING. Для проходящего трафика это можно сделать в PREROUTING, для исходящего с самой системы - в OUTPUT.</li>\n</ol>\n<p>50-wg4all - это простое решение для дурения любого wireguard, не требующее настройки по портам и чему-либо еще. Переписал и работает. Оверхеда на системе практически не создает.<br>\nЕдинственная возможная настройка - стратегия дурения в config : <code>NFQWS_OPT_DESYNC_WG</code>.<br>\nПо умолчанию - <code>--dpi-desync=fake</code>. Туда можно добавить репиты по необходимости.</p>",
        "post_number": 173,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-09T11:15:32.066Z",
        "reply_count": 0,
        "reply_to_post_number": 172,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 224,
        "readers_count": 223,
        "score": 94.8,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/173",
        "can_translate": false
    },
    {
        "id": 72491,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-12-13T16:39:06.140Z",
        "cooked": "<p>zapret v69.7</p>\n<ul>\n<li>nfqws,tpws: параметр --comment. любые комментарии в любом месте.</li>\n<li>nfqws: предупреждение о возможной “ТРЭШ ФЛУД” конфигурации. Когда пишите --dpi-desync-any-protocol без --dpi-desync-cutoff и используете методы с фейками. Это не всегда плохо, но когда плохо, то очень плохо.</li>\n<li>winws: многократное снижение использования процессора за счет отказа от процессинга пустых TCP ACK пакетов в --wf-tcp</li>\n<li>nfqws: в android версии исправлен bad system call при завершении процесса</li>\n</ul>",
        "post_number": 174,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-13T16:39:06.140Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 221,
        "readers_count": 220,
        "score": 64.2,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/174",
        "can_translate": false
    },
    {
        "id": 72747,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-12-15T13:44:12.949Z",
        "cooked": "<h3><a name=\"p-72747-zapret-v698-1\" class=\"anchor\" href=\"#p-72747-zapret-v698-1\"></a>zapret v69.8</h3>\n<ol>\n<li>winws: обработка пустых исходящих TCP с FIN или RST в --wf-tcp для нужд conntrack</li>\n<li>repo: сборка под mips-rlx5281 (lexra)</li>\n</ol>",
        "post_number": 175,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-15T13:44:12.949Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 25,
        "reads": 220,
        "readers_count": 219,
        "score": 169.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/3953",
                "internal": true,
                "reflection": true,
                "title": "Zapret: обсуждение",
                "clicks": 8
            }
        ],
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/175",
        "can_translate": false
    },
    {
        "id": 74023,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2024-12-21T13:43:01.083Z",
        "cooked": "<p>Где-то месяца два назад пробовал смотреть почему не работает приложение youtube TV.<br>\nОно использует GQUIC, который zapret не опознает и не реагирует на него.<br>\nДумал уже надо делать поддержку GQUIC.<br>\nНо поставив свежую версию с apkmirror обнаружил, что GQUIC больше нет, есть IETF QUIC, и все и так работает.<br>\nСледовательно страждующим - обновляйте приложение.</p>\n<p>У меня заработало вот это<br>\n<code>com.google.android.youtube.tv_5.21.300-521300320_minAPI24(armeabi-v7a)(nodpi)_apkmirror.com.apk</code></p>\n<p>На эмуляторе genymotion под образом android 12 версия для x64 не работает, но не из-за блокировки, а по причине отсутствия чего-то в системе. Возможно, кодеков. На реальном устройстве заработало без проблем</p>\n<p>Делаю вывод, что тратить силы на поддержку GQUIC не имеет смысла, тк протокол устаревший, и используется только в старых версиях отдельных приложений. И есть обновление, которое отказалось от использования этого протокола</p>\n<p>Приложение Android TV завелось на чистом Android 9 (не сток) без установленных gapps. Официальные требования - Android 7.0+. Следовательно, могу предположить, что требования не очень мощные, и должно пойти на достаточном количестве устройств. Но должно быть какие-то старые телики и приставки обломаются, поскольку нельзя на них обновить версию приложения.<br>\nAndroid 5.0 поддерживают только старые версии приложения 2.x</p>\n<p>Для владельцев старых девайсов можно сделать дурение всего UDP на 443 без листов<br>\n<code>--filter-udp=443 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-repeats=СКОЛЬКО_НАДО</code><br>\nХуже не будет</p>\n<p>Или отдельно для quic через `–filter-udp=443 --filter-l7=quic\", затем вышеописанное</p>",
        "post_number": 176,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2024-12-21T19:44:00.118Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 65,
        "reads": 220,
        "readers_count": 219,
        "score": 369.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 5,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/176",
        "can_translate": false
    },
    {
        "id": 77321,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2025-01-03T11:08:39.745Z",
        "cooked": "<p>В блокчеке 2 нововведения</p>\n<ol>\n<li>\n<p>Переменная PARALLEL=1 включает параллельные попытки тестирования стратегий.  По умолчанию не включается из-за опасности обидеть сайт дятло-долбежкой и получить неверный результат.</p>\n</li>\n<li>\n<p>Возможность задать ответы на диалоговые вопросы через переменные и убрать тем самым эти вопросы. Чтобы сразу запускался процесс и не было вопросов на что-нибудь нажать или что-нибудь ввести.<br>\n<code>CURL_MAX_TIME=1 CURL_MAX_TIME_QUIC=2 SKIP_DNSCHECK=1 DOMAINS=nnmclub.to IPVS=46 ENABLE_HTTP=1 ENABLE_HTTPS_TLS12=1 ENABLE_HTTPS_TLS13=1 ENABLE_HTTP3=1 REPEATS=8 PARALLEL=1 SCANLEVEL=standard BATCH=1 ./blockcheck.sh</code></p>\n</li>\n</ol>\n<p>Для использования с релизом достаточно заменить файл blockcheck.sh из git.</p>",
        "post_number": 177,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2025-01-03T11:09:53.884Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 67,
        "reads": 175,
        "readers_count": 174,
        "score": 375.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/177",
        "can_translate": false
    },
    {
        "id": 83166,
        "name": "",
        "username": "bolvan",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png",
        "created_at": "2025-03-24T11:55:15.434Z",
        "cooked": "<p>v70.5</p>\n<ul>\n<li>nfqws: множественные фейки для всех типов протоколов через указание множественных параметров <code>--dpi-desync-fake-???</code>. (кроме syndata, это - не протокол)</li>\n<li>nfqws: поддержка меж-пакетной дефрагментации QUIC фреймов CRYPTO. так стали делать свежие chrome броузеры. на более старой версии пакеты не собираются, хост не вытаскивается</li>\n</ul>\n<p>Если не обновлять pktws, на последних chrome слетит дурение quic и перестанут работать хостлисты по quic. Либо придется отключать KYBER</p>",
        "post_number": 178,
        "post_type": 1,
        "posts_count": 163,
        "updated_at": "2025-03-24T11:55:37.496Z",
        "reply_count": 0,
        "reply_to_post_number": 177,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 92,
        "readers_count": 91,
        "score": 23.0,
        "yours": false,
        "topic_id": 61,
        "topic_slug": "zapret-whats-new",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "Zapret anti-DPI software staff",
        "title_is_group": false,
        "reply_to_user": {
            "username": "bolvan",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/b/8e8cbc/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": false,
        "staff": true,
        "group_moderator": true,
        "user_id": 19,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/zapret-whats-new/61/178",
        "can_translate": false
    }
]