
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>fake-packets-auto-ttl-гайд-2632</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Owyn(Owyn)</td><td><p>У прова DPI при tracert показывает что стоит то на 4м хопе, то на 7м, то ещё на каком - рандомно меняется, так что каждый раз надо вручную прописывать set-ttl в свойствах запуска, может можно с этим что сделать или auto-ttl использовать? (так и не понял как или в чём польза auto-ttl - какиеб значения не ставил - ничего хорошего не выходит)</p></td><td>2022-06-11T22:51:31.558Z</td></tr><tr><td>vanyaindigo</td><td><p>При tracert DPI невозможно увидеть.</p></td><td>2022-06-12T06:23:15.667Z</td></tr><tr><td>zhenyolka</td><td><p>auto-ttl хорош только в том случае, если ну никак не получается подобрать правильный ttl. Но она может ломать некоторые сайты. Про tracert тут уже сказали, что не поможет. Тут нужна программа, которая бы поочередно отправляла пакеты с постоянно увеличивающимся ttl и смотрела, когда придет tcp rst.<br>
В данном случае я бы воспользовался простым бинарным поиском (ну или типа того) на интервале от 0 до скажем 20, т.е. вот так: поставить set-ttl 10, и посмотреть, будут ли открываться заблокированные сайты, если нет, то поставить 15, если да, то 5. Дальше повторять эту операцию, пока не выяснится пограничное рабочее значение.</p></td><td>2022-06-12T07:13:14.130Z</td></tr><tr><td>zhenyolka</td><td><p>Ну или можно попробовать режим wrong-seq, он очень часто работает</p></td><td>2022-06-12T07:15:04.962Z</td></tr><tr><td>ValdikSS</td><td><p>Опция auto-ttl сделана для того, чтобы не приходилось настраивать set-ttl вручную. Она может выдавать “плохие” значения (слишком большие, в этом случае пакет дойдёт до сайта и он не откроется, либо слишком маленькие, в этом случае DPI не обойдётся), но это купируется списком заблокированных сайтов, чтобы поддельный пакет не отправлялся на все соединения.</p>
<p>У вас опция вообще не работает? Какую проблему вы пытаетесь решить и как запускаете программу?</p></td><td>2022-06-12T07:15:37.960Z</td></tr><tr><td>Owyn(Owyn)</td><td><p>А почему тогда мне всё видно если невозможно?</p>
<p>У меня в хопах прямо пишет что провайдерский узел такой то по счёту -и мне понятно что на нём DPI стоит и всегда TTL именно до него помогает - меньше\больше - ломается уже</p>
<blockquote>
<p>wrong-seq</p>
</blockquote>
<p>Сама по себе ломала некоорые сайты у меня <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<blockquote>
<p>У вас опция вообще не работает? Какую проблему вы пытаетесь решить и как запускаете программу?</p>
</blockquote>
<p>Может и работает… еслиб я знал что она должно точно делать и в каких случаях))</p>
<p>Запускаю: “\goodbyedpi.exe” -e 2 -f 2 --max-payload --reverse-frag --min-ttl 7 --set-ttl 7</p>
<p>Вот делаю</p>
<pre><code class="lang-auto">Трассировка маршрута к rutracker.org [104.21.56.234]
с максимальным числом прыжков 30:

  1     3 ms     2 ms     2 ms  100.123.0.1
  2     *        *        *     Превышен интервал ожидания для запроса.
  3    11 ms    11 ms    11 ms  85.21.225.13
  4     *        *        *     Превышен интервал ожидания для запроса.
  5     *        *        *     Превышен интервал ожидания для запроса.
  6    22 ms    24 ms    21 ms  195.14.54.161
  7    23 ms    21 ms    39 ms  tc-bb-telia-loop.corbina.net [85.21.1.45]
  8     *       22 ms    26 ms  et-1-0-22.edge4.Stockholm2.Level3.net [213.249.107.189]
  9    30 ms    29 ms    32 ms  ae2.3205.edge2.Copenhagen2.level3.net [4.69.163.118]
 10    30 ms    30 ms    30 ms  212.73.252.114
 11    29 ms    29 ms    29 ms  104.21.56.234

Трассировка завершена.
</code></pre>
<p>Ага - вижу провайдерский DPI на 7м хопе (мой правайдер назывался Corbina) - ставлю TTL 7, - всё отлично всегда работает по такой схеме действий</p>
<p>Но<br>
Проблема что каждые несколько дней для всех (заблокированных) сайтов (или по отдельности для некоторых в любое время) хоп становится не 7м, а например 4м, или 6м - и чтоб “починить” (чтоб заблокированный сайт открывался) надо прописывать новый ttl в строчку запуска - вот и спрашиваю может можно как-то автоматизировать?</p></td><td>2022-06-12T12:04:34.349Z</td></tr><tr><td>ValdikSS</td><td><aside class="quote no-group" data-username="Owyn" data-post="6" data-topic="2632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/o/f4b2a3/48.png" class="avatar"> Owyn:</div>
<blockquote>
<p>А почему тогда мне всё видно если невозможно?</p>
<p>У меня в хопах прямо пишет что провайдерский узел такой то по счёту -и мне понятно что на нём DPI стоит и всегда TTL именно до него помогает - меньше\больше - ломается уже</p>
</blockquote>
</aside>
<p>Это просто первый узел, у которого прописан PTR, поэтому вы видите его имя, а не только IP-адрес. Все предыдущие узлы тоже провайдерские. Совершенно не обязательно, что DPI находится на этом бордер-узле (вернее, наиболее вероятно, что он там НЕ находится, а расположен топологически ближе к вам, пользователю). Также, чаще всего, DPI прозрачно маршрутизирует трафик (не уменьшает TTL), из-за чего не виден в виде хопа в трассировке.</p>
<aside class="quote no-group" data-username="Owyn" data-post="6" data-topic="2632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/o/f4b2a3/48.png" class="avatar"> Owyn:</div>
<blockquote>
<p>Проблема что каждые несколько дней для всех (заблокированных) сайтов (или по отдельности для некоторых в любое время) хоп становится не 7м, а например 4м, или 6м - и чтоб “починить” (чтоб заблокированный сайт открывался) надо прописывать новый ttl в строчку запуска - вот и спрашиваю может можно как-то автоматизировать?</p>
</blockquote>
</aside>
<p>Вы пробовали ничего не менять, а просто запустить программу в рекомендуемыми настройками (которые включают и рекомендуемые настройки auto-ttl)?</p></td><td>2022-06-12T20:20:33.693Z</td></tr><tr><td>Owyn(Owyn)</td><td><blockquote>
<p>Совершенно не обязательно, что DPI находится на этом бордер-узле (вернее, наиболее вероятно, что он там НЕ находится, а расположен топологически ближе к вам, пользователю).</p>
</blockquote>
<p>Ну по крайней мере видно что TTL должен быть не выше хопа последнего провайдерского - иначе ошибки начинают лезть вместо сайтов</p>
<p>Да, стандартный auto-ttl чаще не помогает с рекомендуемыми настройками, поэтому и начал смотреть что можно поменять и как, но к сожалению вообще непонятно про значения auto-ttl написано и как их ставить (этого вообще нет) и поможет ли это <img src="https://ntc.party/images/emoji/twitter/woman_shrugging.png?v=12" title=":woman_shrugging:" class="emoji" alt=":woman_shrugging:" loading="lazy" width="20" height="20"></p></td><td>2022-06-13T22:59:37.151Z</td></tr><tr><td>ValdikSS</td><td><p>Подробная информация по auto-ttl написана в посте <a href="https://github.com/ValdikSS/GoodbyeDPI/issues/258#issuecomment-1073355987" class="inline-onebox">auto-ttl не хочет быть auto? · Issue #258 · ValdikSS/GoodbyeDPI · GitHub</a> и чуть ниже постами.</p>
<aside class="quote no-group" data-username="Owyn" data-post="8" data-topic="2632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/o/f4b2a3/48.png" class="avatar"> Owyn:</div>
<blockquote>
<p>Да, стандартный auto-ttl чаще не помогает с рекомендуемыми настройками</p>
</blockquote>
</aside>
<p>Если на вашем канале DPI действительно установлен далеко (ближе к бордеру, а не к клиенту), то попробуйте<br>
<code>--auto-ttl 1-2-8</code>, <code>--min-ttl 3</code></p></td><td>2022-06-14T10:12:25.781Z</td></tr>
    </table>
      </body>
    </html>