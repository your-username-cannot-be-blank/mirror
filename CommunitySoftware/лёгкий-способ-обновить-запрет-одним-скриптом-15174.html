
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>лёгкий-способ-обновить-запрет-одним-скриптом-15174</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>0x7f</td><td><p>Мне было лень вручную проверять обновления запрета и обновлять запрет руками, поэтому я написал для себя небольшой скрипт который должен уметь обновлять запрет почти без участия человека на опенврт и на большинстве популярных дистрибутивов. Может вам он тоже пригодится.</p>
<blockquote>
<p><strong><a href="https://gist.github.com/kotsmotritnastul/7aa584b6174e918a70ab47d97a7e744b" rel="noopener nofollow ugc">ссылка на скачивание</a></strong></p>
</blockquote>
<p>Крайне желательно чтобы перед запуском скрипта у вас уже был установленный и хотя бы разок настроенный запрет.</p>
<p>Насколько я его тестировал скрипт умеет:</p>
<ol>
<li>проверять где его запустили</li>
<li>проверять версию на устройстве и на гитхабе</li>
<li>если на гитхабе версия новее - скрипт скачивает новую версию, распаковывает её и обновляет вроде не трогая конфиги и пользовательские хостлисты.</li>
</ol>
<p>Если в функции <code>pc_download_and_install_freshest_zapret</code> убрать все <code>sudo</code> и посадить скрипт в рутовский кронтаб то я думаю можно полностью автоматизировать обновление запрета на новую версию.</p>
<p>Изначально в нём использовалась утилита <code>jq</code> но она требует устанавливать отдельный пакет поэтому я переделал скрипт под <code>awk</code> который предустановлен везде включая официальные сборки опенврт. Если кому-то больше нравится <code>jq</code> (она парсит json без костылей) то можете раскомментировать строчки с ней и закомментировать строчки с <code>awk</code>.</p></td><td>2025-03-17T13:51:20.575Z</td></tr>
    </table>
      </body>
    </html>