[
    {
        "id": 42681,
        "name": "",
        "username": "Kolobok",
        "avatar_template": "/user_avatar/ntc.party/kolobok/{size}/8347_2.png",
        "created_at": "2024-09-20T18:04:33.422Z",
        "cooked": "<p><strong>Ошибка</strong>:</p>\n<pre><code class=\"lang-auto\">x86_64-w64-mingw32-gcc  blackwhitelist.o  dnsredir.o  fakepackets.o  goodbyedpi.o  service.o  ttltrack.o  utils/getline.o  utils/repl_str.o goodbyedpi-rc.o -fstack-protector -Wl,-O1,-pie,--dynamicbase,--nxcompat,--sort-common,--as-needed -Wl,--disable-auto-image-base -Wl,--high-entropy-va -Wl,--pic-executable,-e,mainCRTStartup -L../WinDivert-2.2.0-D/x64 -lWinDivert -lws2_32 -l:libssp.a -s -o goodbyedpi.exe\n/usr/lib/mingw64-toolchain/lib/gcc/x86_64-w64-mingw32/14/../../../../x86_64-w64-mingw32/bin/ld: cannot find -l:libssp.a: No such file or directory\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:56: goodbyedpi.exe] Error 1\n</code></pre>\n<p><strong>Контекст ошибки</strong>:<br>\nНастроила я себе походный телефончик для беспроводного доступа: интернет принимает по вайфаю, блютузу через туннель, и 5G от йоты. Публичные сети игнорирует, скрытые SSID находит, простые пароли сам подбирает, а сложные - слушает эфир и, если повезёт, отправляет серверу с P100 на анализы. Пакеты пересылает, обфусцирует, себя как хоп не выдаёт, под ситуацию подстраивается - всё работает стабильно, без нареканий.<br>\nМеста на карте памяти ещё предостаточно, веб-сервер наполняю нужными в современном быту файлами. Захотелось добавить и GoodbyeDPI на крайний случай, если придётся с маздайного устройства в сеть мирную выходить, потеряв телефон.<br>\nРелизы готовые скачивать не хочу и не буду: не то чтобы авторов не уважала, просто софт - дело пикантное, тем более такой как тут. Скачанный блоб не лучше неизвестного исполнимого файла.<br>\nФормирование релизов не автоматизировано, единственный способ проверки - сравнение с артефактами от <code>build.yml</code>, что неудобно. У меня свои списки хостов и скрипты, так что достаточно лишь собрать исполняемый <code>goodbyedpi.exe</code> под x86_64 (можно и под x86, чем чёрт не шутит), и дело сделано.<br>\nНо вот незадача, при компиляции вылетает ошибка вышеуказанная, и ничего не работает.</p>\n<p>На телефоне стоит Gentoo свежая <code>~arm64</code> на 23.0 профиле без <code>musl</code>, со всех сторон обновлённая, <code>ssp</code> USE-флаг поднят. С ним и <code>sys-devel/gcc</code>, и <code>sys-libs/glibc</code> собраны. Компилирую с использованием <code>dev-util/mingw64-toolchain</code>, у которого внутри gcc v14.1.0. Ядро разве что старовато, но оно от Андройда, и не влияет здесь ни на что.</p>\n<p><strong>Что было сделано</strong>:<br>\nСмена на <code>-lssp</code> тоже не помогает: разница лишь в том, что компилятор <code>cannot find -lssp</code> молвит.<br>\nПроблема чинится убиранием libssp с корнем из Makefile, то бишь примерно вот так:</p>\n<pre data-code-wrap=\"diff\"><code class=\"lang-diff\">diff --git a/src/Makefile b/src/Makefile\nindex 015490e..2038e86 100644\n--- a/src/Makefile\n+++ b/src/Makefile\n@@ -7,9 +7,7 @@ WINDIVERTLIBS = ../../binary\n MINGWLIB = /usr/x86_64-w64-mingw32/lib/\n\n TARGET = goodbyedpi.exe\n-# Linking SSP does not work for some reason, the executable doesn't start.\n-#LIBS = -L$(WINDIVERTLIBS) -Wl,-Bstatic -lssp -Wl,-Bdynamic -lWinDivert -lws2_32\n-LIBS = -L$(WINDIVERTLIBS) -lWinDivert -lws2_32 -l:libssp.a\n+LIBS = -L$(WINDIVERTLIBS) -lWinDivert -lws2_32\n CC = $(CPREFIX)gcc\n\n CCWINDRES = $(CPREFIX)windres\n@@ -25,7 +23,7 @@ CFLAGS = -std=c99 -pie -fPIE -pipe -I$(WINDIVERTHEADERS) -L$(WINDIVERTLIBS) \\\n          -Wstringop-overflow=4 \\\n          -Wformat-signedness -Wstrict-overflow=2 -Wcast-align=strict \\\n          -Wfloat-equal -Wcast-align -Wsign-conversion \\\n-         #-fstack-protector-strong\n+         -fstack-protector-strong\n LDFLAGS = -fstack-protector -Wl,-O1,-pie,--dynamicbase,--nxcompat,--sort-common,--as-needed \\\n -Wl,--disable-auto-image-base\n</code></pre>\n<p>После такой заплатки программка собирается как надо и работает исправно, без сучка и задоринки. Применять её при каждой пересборке проблемы не составляет, но хочется ведь по стариковской привычке разобраться, в чём же здесь закавыка и как её решить раз и навсегда.<br>\nПрименить такой финт ушами по умолчанию, как я поняла из комментария в этом самом Makefile, вариантом не является: скомпилироваться-то программка скомпилируется, но опосля запуститься откажется по причине отсутствия внешней libssp, которой по умолчанию, как и всего остального уважаемым людям необходимого, в маздае нет.<br>\nДумаю я, что можно как-то определять наличие libssp перед компиляцией, например, по наличию отсутствия <code>--disable-libssp</code> флага сборки компилятора, но нет никакой уверенности, что будет такое решение надёжным, или правильным самым.</p>\n<p>Поэтому и спрашиваю здесь, может, кто разбирается лучше: нужен ли тут вообще <code>stack-protector</code>, и можно ли как-то грамотно проблему эту обойти? Заранее спасибо!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2024-09-20T18:04:33.422Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 43,
        "reads": 57,
        "readers_count": 56,
        "score": 226.4,
        "yours": false,
        "topic_id": 10451,
        "topic_slug": "goodbyedpi-%D0%B1%D0%B5%D0%B7-libssp",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 4932,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/goodbyedpi-%D0%B1%D0%B5%D0%B7-libssp/10451/1",
        "can_translate": false
    },
    {
        "id": 42717,
        "name": "",
        "username": "denium",
        "avatar_template": "/letter_avatar_proxy/v4/letter/d/7c8e57/{size}.png",
        "created_at": "2024-09-20T19:45:03.197Z",
        "cooked": "<p>Попробуйте скомпилировать в <a href=\"https://packages.debian.org/bookworm/amd64/gcc-mingw-w64-x86-64-win32-runtime/filelist\" rel=\"noopener nofollow ugc\">mingw</a> из Debian.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2024-09-20T19:45:03.197Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 48,
        "readers_count": 47,
        "score": 19.6,
        "yours": false,
        "topic_id": 10451,
        "topic_slug": "goodbyedpi-%D0%B1%D0%B5%D0%B7-libssp",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://packages.debian.org/bookworm/amd64/gcc-mingw-w64-x86-64-win32-runtime/filelist",
                "internal": false,
                "reflection": false,
                "title": "Debian -- File list of package gcc-mingw-w64-x86-64-win32-runtime/bookworm/amd64",
                "clicks": 6
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 5609,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/goodbyedpi-%D0%B1%D0%B5%D0%B7-libssp/10451/2",
        "can_translate": false
    }
]