
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>tor-relay-availability-checker-1633</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>ValdikSS</td><td><p>This small script downloads all Tor Relay IP addresses from <a href="https://onionoo.torproject.org/">onionoo.torproject.org</a> and checks whether random Relays are available.</p>
<p>It could be used to find working Relay in a countries with internet censorship and blocked Tor.</p>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/ValdikSS/tor-relay-scanner">
  <header class="source">

      <a href="https://github.com/ValdikSS/tor-relay-scanner" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="tor-relay-availability-checker-1633/b93786913f82d25edd97538b438e33f11b3e0b22_2_690x344.png" class="thumbnail" data-dominant-color="EEEFF1">

  <h3><a href="https://github.com/ValdikSS/tor-relay-scanner" target="_blank" rel="noopener">GitHub - ValdikSS/tor-relay-scanner: Tor Relay availability checker, for using it as a...</a></h3>

    <p><span class="github-repo-description">Tor Relay availability checker, for using it as a bridge in countries with censorship</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2022-01-12T23:18:45.931Z</td></tr><tr><td>ValdikSS</td><td><h2><a name="p-5101-the-site-now-only-contains-working-relays-use-the-program-above-to-perform-real-scan-1" class="anchor" href="#p-5101-the-site-now-only-contains-working-relays-use-the-program-above-to-perform-real-scan-1"></a><strong>The site now only contains working Relays. Use the program above to perform real scan.</strong></h2>
<h2><a name="p-5101-h-2" class="anchor" href="#p-5101-h-2"></a><strong>На сайте теперь только публикуются рабочие Релеи. Используйте программу выше для проведения настоящего сканирования.</strong></h2>
<br>
<p>Pure Javascript version that works in browser.</p>
<p>В России на провайдерах с ТСПУ доступно множество Tor Relay’ев, которые можно использовать в качестве Bridge (мостов). Их блокируют гораздо реже, а работают они стабильней.</p>
<p>Сделал страницу для поиска рабочих Relay’ев прямо в браузере:</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://torscan-ru.ntc.party">
  <header class="source">

      <a href="https://torscan-ru.ntc.party" target="_blank" rel="noopener">torscan-ru.ntc.party</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:152/92;"><img src="tor-relay-availability-checker-1633/a852c53b81f668364b6cbe739641bd40964321dc.png" class="thumbnail" data-dominant-color="84628F" width="152" height="92"></div>

<h3><a href="https://torscan-ru.ntc.party" target="_blank" rel="noopener">Tor Relay List</a></h3>

  <p>Рабочие Tor Relay для доступа к Tor в обход российских блокировок</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2022-01-13T11:39:57.968Z</td></tr><tr><td>Nah6o</td><td><p>Nice work!</p>
<p>Shouldn’t this script check relay flag’s and outputs only ‘Stable’ and ‘Valid’ nodes?</p>
<p><a href="http://onionoo.torproject.org" rel="noopener nofollow ugc">onionoo.torproject.org</a> is blocked by my ISP, so I need a proxy to download relay list.</p></td><td>2022-01-13T20:09:58.539Z</td></tr><tr><td>ValdikSS</td><td><p>The script loads only <code>running=true</code> nodes over API, I guess that’s sufficient.<br>
Javascript version has two proxies in case the main endpoint is blocked.</p></td><td>2022-01-13T20:16:44.620Z</td></tr><tr><td>hookz(Talya)</td><td><p>Развернул тоже у себя в <a href="https://t.me/mtpro_xyz_bot" class="inline-onebox" rel="noopener nofollow ugc">Telegram: Contact @mtpro_xyz_bot</a>, не помешает</p></td><td>2022-01-16T17:36:37.119Z</td></tr><tr><td>anonymous15(anonymous15)</td><td><p>Трафик к узлам появился, начнутся блокировки. Было бы интересно изучать эту динамику для оставшихся узлов.</p></td><td>2022-01-17T09:28:09.142Z</td></tr><tr><td>zinoid</td><td><p>Возможно они оставили эти узлы для спецслужб. Помните фразу: пришли из спецслужб к роскомнадзору и говорят “вы нам работать мешаете”.  Хотя скорее всего просто недосмотр.</p></td><td>2022-01-17T17:44:33.193Z</td></tr><tr><td>anonymous16(anonymous16)</td><td><aside class="quote no-group" data-username="zinoid" data-post="7" data-topic="1633">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/8e8cbc/48.png" class="avatar"> zinoid:</div>
<blockquote>
<p>Хотя скорее всего просто недосмотр.</p>
</blockquote>
</aside>
<p>Недосмотра нет. Узлы и мосты находят из трафика через ТСПУ.</p></td><td>2022-01-19T12:29:18.038Z</td></tr><tr><td>zinoid</td><td><p>А как они определяют принадлежность к obfs4, если порт нетипичный?</p>
<p>Кстати, заметил проблему с релеями, которые предлагает Valdik. Tor подключается, но если им не пользоваться какое-то время, то потом он уже не коннектится (после простоя). В браузере ошибка таймаута. В логе тор пишет что-то вроде (я уже удалил лог): “запрос от приложения… хорошей идеей будет соединиться со знакомыми узлами”. Таких строчек много. Релеев указано 10 (3 нерабочих).<br>
Дважды такое было. А с obfs4 все в порядке.</p>
<p>Tor 0.4.3.5 standalone как systemd служба на Ubuntu 16.04 + браузер SeaMonkey 2.53.4. Это не с российского IP, интернет чистый.<br>
Рестарт службы помогает, конечно.</p></td><td>2022-01-20T16:25:09.295Z</td></tr><tr><td>anonymous17(anonymous17)</td><td><aside class="quote no-group" data-username="zinoid" data-post="9" data-topic="1633">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/8e8cbc/48.png" class="avatar"> zinoid:</div>
<blockquote>
<p>А как они определяют принадлежность к obfs4, если порт нетипичный?</p>
</blockquote>
</aside>
<p>Хороший вопрос.</p>
<aside class="quote no-group" data-username="zinoid" data-post="9" data-topic="1633">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/8e8cbc/48.png" class="avatar"> zinoid:</div>
<blockquote>
<p>Tor подключается, но если им не пользоваться какое-то время, то потом он уже не коннектится (после простоя)</p>
</blockquote>
</aside>
<p>Использование релея в качестве моста это необычный сценарий. Возможны ошибки, которые не замечали/не исправимы.</p></td><td>2022-01-20T19:34:05.381Z</td></tr><tr><td>tango</td><td><aside class="quote no-group" data-username="zinoid" data-post="9" data-topic="1633">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/8e8cbc/48.png" class="avatar"> zinoid:</div>
<blockquote>
<p>В браузере ошибка таймаута. В логе тор пишет что-то вроде (я уже удалил лог): “запрос от приложения… хорошей идеей будет соединиться со знакомыми узлами”.</p>
</blockquote>
</aside>
<p>Was it this?</p>
<pre><code class="lang-plaintext">Application request when we haven't used client functionality lately. Optimistically trying known bridges again.
</code></pre>
<p>There is a long-existing bug in tor where it sometimes stops trying to connect, if one of its bridges does not work. At least, I think that is the cause—I don’t fully understand myself. Here are two issues to look at:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/core/tor/-/issues/40212">
  <header class="source">
      <img src="tor-relay-availability-checker-1633/a8e6f285e78cd818e67619cd96388c5cd020e05e.png" class="site-icon" data-dominant-color="787472" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40212" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <img width="64" height="64" src="tor-relay-availability-checker-1633/0314050800e4e3aea5469b147559d8bb12021fd7.png" class="thumbnail onebox-avatar" data-dominant-color="979087">

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40212" target="_blank" rel="noopener">Brittle behavior when running with bridges and NumEntryGuards=2 (#40212) ·...</a></h3>

  <p>During my experiments in</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.torproject.org/tpo/core/tor/-/issues/40396">
  <header class="source">
      <img src="tor-relay-availability-checker-1633/a8e6f285e78cd818e67619cd96388c5cd020e05e.png" class="site-icon" data-dominant-color="787472" width="32" height="32">

      <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40396" target="_blank" rel="noopener">GitLab</a>
  </header>

  <article class="onebox-body">
    <img width="64" height="64" src="tor-relay-availability-checker-1633/0314050800e4e3aea5469b147559d8bb12021fd7.png" class="thumbnail onebox-avatar" data-dominant-color="979087">

<h3><a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40396" target="_blank" rel="noopener">Good bridge + bad bridge = no bootstrap (#40396) · Issues · The Tor Project /...</a></h3>

  <p>Summary If I configure tor with one known-good bridge and one known-bad bridge (e.g. the host is simply not a...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2022-02-03T05:17:54.543Z</td></tr><tr><td>zinoid</td><td><aside class="quote no-group" data-username="tango" data-post="11" data-topic="1633">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/e36b37/48.png" class="avatar"> tango:</div>
<blockquote>
<p><code>Application request when we haven't used client functionality lately. Optimistically trying known bridges again.</code></p>
</blockquote>
</aside>
<p>Yes, that’s the error.<br>
Someone mentioned patches in the discussion.</p></td><td>2022-02-04T23:32:49.198Z</td></tr><tr><td>anonymous21(anonymous21)</td><td><p>Фсё.<br>
Добавили первоисточник в источник адресов для блокировки.</p></td><td>2022-02-16T13:41:30.956Z</td></tr><tr><td>ValdikSS</td><td><p>Что это значит?</p></td><td>2022-02-16T14:56:05.271Z</td></tr><tr><td>anonymous21(anonymous21)</td><td><p>Блокируют адреса (практически) всех узлов.</p></td><td>2022-02-16T15:16:00.226Z</td></tr><tr><td>ValdikSS</td><td><p>Хм, вы правы, но заблокированы они иначе: узлы выдают connection refused вместо отсутствия ответа.</p></td><td>2022-02-16T15:28:03.983Z</td></tr><tr><td>ValdikSS</td><td><p>Узлы снова работают, спустя 2 минуты. Похоже, тестируют новый способ блокировки на части ТСПУ.</p></td><td>2022-02-16T15:30:17.866Z</td></tr><tr><td>Supp</td><td><p>torscan-ru.ntc.party пишет, что relay доступны, хотя по всем релеям та же консоль браузера пишет GET https://IP_XX:9001/ net::ERR_CONNECTION_REFUSED</p></td><td>2022-02-16T18:36:40.888Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ValdikSS" data-post="17" data-topic="1633" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar"> ValdikSS:</div>
<blockquote>
<p>Хм, вы правы, но заблокированы они иначе: узлы выдают connection refused вместо отсутствия ответа.</p>
</blockquote>
</aside>
<p>Сегодня утром на тиере все именно так<br>
Почти все ipv4 релеи заблокированы<br>
Я поправил количество узлов в коде на 50. Все-таки иногда проскакивают доступные ipv4 релеи</p></td><td>2022-02-17T07:14:59.661Z</td></tr><tr><td>anonymous21(anonymous21)</td><td><p>Самый большой вклад в блокировки может дать использование ru узлов которые сумели попасть в консенсус, но при этом сидят за чебурнетом.</p>
<p>Можно добавить исключение для выдачи ru релеев (если адрес такого узла был найден этим сканером). Или, что надежней, попросить (все) управляющие директории исключить ru узлы и мосты.</p></td><td>2022-02-17T07:30:39.114Z</td></tr><tr><td>Nah6o</td><td><p>Script on <a href="https://torscan-ru.ntc.party/">https://torscan-ru.ntc.party/</a> checks only Timeout error. For some relays ISP/TSPU replaces SYN-ACK from tor relay by TCP-RST, so I get not timeout but connection refused error.</p>
<p>But script checks only Timeout, not connection refused.</p>
<pre><code>    const check = (hostport, fingerprint) =&gt; {
        fetchWithTimeout(`https://${hostport}`)
            .then((response) =&gt; document.getElementById("result").innerText = response)
            .catch((error) =&gt; {
                const line = `${hostport} ${fingerprint}\n`;

                if (error.name === 'AbortError') {
                    document.getElementById("notworking").value += line;
                } else {
                    document.getElementById("working").value += line;
                }
            })
    };
</code></pre>
<p>Some TOR relays are awailable for me hence.</p></td><td>2022-02-20T06:06:42.489Z</td></tr><tr><td>ValdikSS</td><td><p>Yes, until recently Tor relays were blocked with packet dropping rule, but now newer relays are blocked with TCP RST. There’s no means to detect error type in the browser.</p>
<p>Use standalone program <a href="https://github.com/ValdikSS/tor-relay-scanner" class="inline-onebox">GitHub - ValdikSS/tor-relay-scanner: Tor Relay availability checker, for using it as a bridge in countries with censorship</a>, I’ve just updated it to use proxies is onionoo is not reachable directly.</p></td><td>2022-02-21T06:28:14.864Z</td></tr><tr><td>yuichi001(Никита)</td><td><p>Попробовал через термукс на телефоне - коннект просто не проходит к onioo, даже с обходом dpi через dpitunnel. С обходом кстати в браузере onioo работает, без понятия почему через термукс нет коннекта.</p></td><td>2022-03-04T16:33:29.314Z</td></tr><tr><td>ValdikSS</td><td><p>В программу вбиты прокси, неужели и через них не работает? Приложите вывод скрипта.</p></td><td>2022-03-04T16:34:56.224Z</td></tr><tr><td>yuichi001(Никита)</td><td><p>С последним прокси действительно работает, но смех в том что сколько бы не парсились мосты, ни один из них не работает. Т.е. в All reachable relays пусто.</p></td><td>2022-03-04T16:36:56.440Z</td></tr><tr><td>yuichi001(Никита)</td><td><p><a class="attachment" href="tor-relay-availability-checker-1633/z2f5aog87mzTdTU39kiasO2hTfW.txt">log.txt</a> (19.0 КБ)</p></td><td>2022-03-04T16:39:29.757Z</td></tr><tr><td>ValdikSS</td><td><p>Да, заблокировали почти всё. Вот доступные на текущий момент, если несколько раз запускать программу:</p>
<pre><code class="lang-nohighlight">94.34.51.58:443 00BAF809714E59E30AD0B1C6F14FCCB45FEF5D0F
185.62.58.88:4002 0891003D7938967C5EC1F733E17A56428F55B9DD
185.62.57.9:4002 0C24D8BE44723CCFB2674354DE12C1548380937B
179.83.250.234:9151 0E3850037648FFBC99DF862277A16DD2F070A601
5.63.32.29:21 109353ACFB6E45477B12DFE2EED935A14463D42C
</code></pre></td><td>2022-03-04T16:53:00.463Z</td></tr><tr><td>yuichi001(Никита)</td><td><p>получается осталось только vpn/proxy ?</p></td><td>2022-03-04T17:08:36.855Z</td></tr><tr><td>ValdikSS</td><td><p>Я привёл вам список рабочих relay выше. Также продолжает работать snowflake.</p></td><td>2022-03-04T17:29:54.620Z</td></tr><tr><td>zhenyolka</td><td><p>Для справки в сотый наверное раз поясняю, как работает dpitunnel. Мы же про dpitunnel новый еще не рализнутый говорим? Так вот, он работает как прокси сервер. При старте он прописывает себя в системные настройки прокси. Термукс, как и все консольное, кладет на андроидовские настройки, поэтому обход и не будет работать. Браузеры же, как и остальные приложения android framework обычно используют системные прокси, если специально разраб приложения не отключил возможность использования прокси.</p></td><td>2022-03-04T17:35:09.257Z</td></tr><tr><td>zhenyolka</td><td><p>Если нужны прокси в термуксе, ставьте их как в линуксе. Т.е. для curl, к примеру, есть ключ “-x”.</p></td><td>2022-03-04T17:36:11.174Z</td></tr><tr><td>yuichi001(Никита)</td><td><p>Да, я думал об этом, но в тулзе к сожалению еще нет возможности прокси подключить.</p></td><td>2022-03-04T17:44:30.986Z</td></tr><tr><td>ValdikSS</td><td><p>На <a href="https://torscan-ru.ntc.party/">https://torscan-ru.ntc.party/</a> теперь публикуются рабочие Tor Relay списком.</p></td><td>2022-03-04T19:26:52.655Z</td></tr><tr><td>Truman(Alex)</td><td><p>С obfs4 их как-то можно использовать? Конвертировать?</p></td><td>2022-03-19T04:39:00.982Z</td></tr><tr><td>ValdikSS</td><td><p>Нет, релеи все работают по «обычному» протоколу.<br>
Работоспособность обычных бриджей можно проверять вручную, хоть <code>curl</code>'ом.</p></td><td>2022-03-19T21:14:27.852Z</td></tr><tr><td>anton90(Anton)</td><td><p>tor-relay-scanner с опциями --outfile и --torrc :</p>
<details>
<summary>
Спойлер</summary>
<p>Bridge [2a03:e600:100::78]:443 434148E6979921E8BD33DB75618A85E28CB42331<br>
Bridge 23.128.248.75:443 D0A5578655659B95C7370C06F059896429299036<br>
[2602:fc05::75]:443 D0A5578655659B95C7370C06F059896429299036<br>
Bridge 124.189.16.220:13579 87F0A268531A7412B76F210A9F14D1C36FFE3B6F<br>
[2001:8003:d067:4c00:16b0:3965:a984:f876]:16383 87F0A268531A7412B76F210A9F14D1C36FFE3B6F<br>
Bridge 154.16.167.18:444 7D1C86A6E970C911B7F75263AD6684DDE22626A1<br>
UseBridges 1</p>
</details>
<p>Bridge не дописывается к ipv6 адресам, если они не первые в списке.</p></td><td>2022-04-23T05:41:41.757Z</td></tr><tr><td>ValdikSS</td><td><p>Исправлено в 0.0.7.</p></td><td>2022-04-23T17:05:57.269Z</td></tr><tr><td>CrispSundew(Crisp Sundew)</td><td><p>У меня вопрос, друзья: а существует ли аналогичный сканер для obfs4 мостов? Если нет, то возможно ли его создать?</p></td><td>2023-02-27T05:42:58.092Z</td></tr><tr><td>anonymous104(anonymous104)</td><td><p>Мосты получаемые через браузер, почту или сайт будут работать, сканер не нужен.</p></td><td>2023-02-27T08:36:29.508Z</td></tr><tr><td>ValdikSS</td><td><p>Это бессмысленно: мостов нет в публичном доступе, а просканировать порты на доступность, если у вас есть список, можно и любым другим сетевым сканером.</p></td><td>2023-02-27T10:35:50.781Z</td></tr><tr><td>CrispSundew(Crisp Sundew)</td><td><p>Спасибо за ваш ответ. Если вам несложно, подскажите для этого удобный и простой в использовании сетевой сканер. Заранее благодарю!</p></td><td>2023-02-27T10:47:33.928Z</td></tr><tr><td>anonymous104(anonymous104)</td><td><p>Сканером можно триггернуть блокировки, причем они будут не автономные. Система помнит многие адреса и собирает статистику. Зависит от места и способа применения. И они неизвестны.</p></td><td>2023-02-27T11:23:40.975Z</td></tr>
    </table>
      </body>
    </html>