
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>zapret-обсуждение-726</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>bolvan</td><td><p>Все вопросы по поводу zapret пишите сюда.</p></td><td>2020-10-19T17:56:56.170Z</td></tr><tr><td>anonimus28(anonimus)</td><td><p>Добрый день, использовал программу для Linux nfqws. До недавнего времени все работало. Но что то поменяли в настройках сети, либо придумали ещё что то мои настройки nfqws  перестали работать. Использовали эти команды, также изменял размер пакета. ИСпользовал на линукс сервере.<br>
iptables -A OUTPUT -p tcp -m tcp --sport 443 --tcp-flags SYN,ACK SYN,ACK -j NFQUEUE --queue-num 200 --queue-bypass<br>
плюс изменял размер:<br>
zapret/binaries/x86_64/nfqws --qnum=200 --wsize=8 --daemon<br>
Но к сожалению это уже не работает. Выдает ошибку на у клиента опен transport error. Посоветуйте как можно изменить настройки этой проги</p></td><td>2020-10-18T19:21:08.152Z</td></tr><tr><td>bolvan</td><td><p>Фрагментация на сервере - не панацея. Этой технике уже много лет, она начала использоваться давным давно для борьбы с китайским фаерволом. Разумеется, сейчас это уже там не работает.<br>
И у нас это сработает лишь на тех провайдерах, DPI которых достаточно для обмана лишь фрагментация TLS ClientHello. Такие провайдеры существуют, но их меньшинство.<br>
DPI развиваются. Посмотрите какие техники используются в атаке десинхронизации. Вы не сможете без помощи со стороны клиента преодолеть такие DPI. И уж точно никогда не сможете сделать универсальную пиллюлю, которая работала бы везде и гарантированно.</p>
<p>Попробуйте посмотреть в сторону TLS 1.3+ESNI. Это тоже не панацея, требует поддержку в броузере (не всегда включено по умолчанию), спецификация еще не RFC, потому поддержки в веб серверах нет. Но уже есть proxy-поделки.</p></td><td>2020-10-18T19:44:02.471Z</td></tr><tr><td>anonimus28(anonimus)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ь на тех провайдерах, DPI которых достаточно для обмана лишь фрагментация TLS ClientHello. Такие провайдеры существуют, но их меньшинство.<br>
DPI развиваются. Посмотрите какие техники используются в атаке десинхронизации. Вы не сможете без помощи со стороны клиента преодолеть такие DPI. И уж точно никогда не сможете сделать универсальную пиллюлю, которая работала бы везде и гарантированно.</p>
</blockquote>
</aside>
<p>Думаю попробовать какие то другие техники, возможно помогут, или zapret уже не справиться с задачей которую я ставлю? Я могу с вами пообщаться в приватном чате? Или могу ли я написать вам в личку?</p></td><td>2020-10-19T09:54:43.231Z</td></tr><tr><td>anonimus28(anonimus)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Попробуйте посмотреть в сторону TLS 1.3+ESNI.</p>
</blockquote>
</aside>
<p>Как можно реализовать эту технологию? Мне в этом поможет программа zapret?</p></td><td>2020-10-19T09:59:19.137Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonimus28" data-post="5" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/ad7895/48.png" class="avatar"> anonimus28:</div>
<blockquote>
<p>Как можно реализовать эту технологию? Мне в этом поможет программа zapret?</p>
</blockquote>
</aside>
<p>Я с этим не связывался сам, но полагаю у cloudflare можно заказать fronting с поддержкой ESNI.<br>
Или ищите прокси-поделку для терминации TLS у себя на сервере. Где-то проскакивало, но не запомнил как называется.<br>
zapret предназначен для обмана DPI на стороне клиента. даже не думал, что кто-то это будет использовать на сервере</p>
<p>Большинство DPI способно принять решение о запрете по первому пакету с данными от клиента. TLS client hello или http request. С сервера можно повлиять только на разбивку посредством wsize, но как уже сказал это далеко не всегда сработает</p></td><td>2020-10-19T10:58:38.872Z</td></tr><tr><td>anonimus28(anonimus)</td><td><aside class="quote no-group" data-username="bolvan" data-post="17" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/whats-new/61/17">What's new</a></div>
<blockquote>
<p>Изменение window size в nfqws считается устаревшим и более не поддерживается в скриптах.<br>
На замену ему приходит более быстрая альтернатива --dpi-desync=split2, лишенная других недостатков wsize (типа невозможности заменить регистр Host: при --wsize=3 на пакетах от linux клиента)</p>
</blockquote>
</aside>
<p>Возможно это поможет, мне? Пожалуйста подскажите как мне запустить этот парметр в  nfqws. А то я немного затрудняюсь.Я хочу попробовать реализовать это на сервере.</p></td><td>2020-10-19T11:09:03.293Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonimus28" data-post="7" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/ad7895/48.png" class="avatar"> anonimus28:</div>
<blockquote>
<p>Я хочу попробовать реализовать это на сервере.</p>
</blockquote>
</aside>
<p>Это ничем вам не поможет. Даже если вы разобьете ответ от сервера, клиент без специальных средств будет отсылать обычный ClientHello, на который тут же ополчится DPI. Вашему серверу даже отвечать не придется. DPI  отрежет клиента до того, как серверу представится шанс что-то сделать</p></td><td>2020-10-19T11:21:01.436Z</td></tr><tr><td>cypherpunks(cypherpunks:writecodes)</td><td><blockquote>
<p>Это ничем вам не поможет. Вашему серверу даже отвечать не придется.</p>
</blockquote>
<p>О каких способах обхода блокировки тогда могла идти речь в следующей теме?</p>
<aside class="quote quote-modified" data-post="1" data-topic="271">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar">
    <a href="https://ntc.party/t/topic/271">Предложение владельцам заблокированных сайтов</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    У меня есть несколько экспериментальных способов обхода блокировок на серверной стороне заблокированных сайтов, без необходимости каких-либо действий на стороне клиентов. Способы реализованы и протестированы, они показали свою эффективность при определенных условиях, но тестировались ограниченно и на малом количестве провайдеров. 
Мне было бы интересно протестировать их на реальных заблокированных сайтах, с большим количеством посетителей из разных мест России. Если вы владелец заблокированного …
  </blockquote>
</aside>
</td><td>2021-02-04T11:17:22.272Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="cypherpunks" data-post="10" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/e19adc/48.png" class="avatar"> cypherpunks:</div>
<blockquote>
<p>О каких способах обхода блокировки тогда могла идти речь в следующей теме?</p>
</blockquote>
</aside>
<p>Если порассуждать немного…<br>
Большинство DPI заблокируют стрим при первом же пакете с данными от клиента, где http запрос или TLS client hello.<br>
Значит действовать надо уже на этапе 3-way handshake.<br>
Можно попытаться сделать реверс-десинхронизацию, базируясь на пришедшем TTL. Или  badsum, badseq<br>
Чтобы desync пакеты доходили до DPI, но не доходили до клиента.<br>
Попробовать от сервера послать RST. Как будто сервер сбросил конект. Но чтобы не дошло до клиента. Или послать какой-то левый пакет данных, например левый http response.<br>
Возможно, какие-то DPI это задурит<br>
По IP можно определить провайдера, и имея базу провайдеров что работает на каком, изменять тип реверс-дурения</p></td><td>2021-02-04T13:54:17.381Z</td></tr><tr><td>runetchecker</td><td><p>Как запускать <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom" rel="noopener nofollow ugc">custom</a>-скрипты, такие как <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-nfqws-dht4all" rel="noopener nofollow ugc">custom-nfqws-dht4all</a>? Хотелось бы подробную иструкцию для работы со скриптами.</p></td><td>2023-09-06T19:31:56.138Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="runetchecker" data-post="12" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/b3f665/48.png" class="avatar"> runetchecker:</div>
<blockquote>
<p>Как запускать <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom">custom </a>-скрипты, такие как <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-nfqws-dht4all">custom-nfqws-dht4all </a>? Хотелось бы подробную иструкцию для работы со скриптами.</p>
</blockquote>
</aside>
<p>Попробная инструкция написана в readme. Раздел “вариант custom”.<br>
Готовые скрипты включаются копированием соотв. файла в файл “custom” с его замещением, затем выбор в config  MODE=custom.<br>
Код скрипта следует прочитать, там в коментах пишу необходимые дополнительные переменные в config.<br>
dht скрипт наследует режим nfqws, потому вся остальная конфигурация ему соответствует.<br>
Можно прогнать install_easy с MODE=nfqws, настроить, убедиться в работоспособности, затем перейти на custom</p></td><td>2023-09-07T05:46:05.755Z</td></tr><tr><td>zzr</td><td><p>после того как попробовал гудбайдпи на винде и на моё удивление проканало, решил попробовать запрет на линуксе сначала он (вместе со мной)) как то приуныл (UNAVAILABLE) а потом как попёрли (AVAILABLE!!!) и ведь риально работает, спасибо вам всем за титаникстический труд!</p>
<p>ps<br>
к сожительению после 24 февраля автономный обход блокировок становется всё меннее актуально всвязи с тем что ето уже нетолько лиш у нас но и на той стороне начали блокировать с росийских айпишники</p>
<p>pps<br>
и в тоже самое время автономный обход блокировок не теряет свой актульности так как ркн усилили методы борьбы с впнами и прочим шифротрафиком который идёт через границу как я понел</p></td><td>2023-10-12T10:32:35.259Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="zzr" data-post="14" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zzr/48/14949_2.png" class="avatar"> zzr:</div>
<blockquote>
<p>всё меннее актуально всвязи с тем что ето уже нетолько лиш у нас но и на той стороне начали блокировать с росийских айпишники</p>
</blockquote>
</aside>
<p>Потому у меня и создана система “ipban”. Потому что все автономно обойти невозможно.<br>
Но это только хелпер, основа - руками</p></td><td>2023-10-12T12:35:55.691Z</td></tr><tr><td>usnevst</td><td><aside class="quote no-group" data-username="bolvan" data-post="85" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/whats-new/61/85">What's new</a></div>
<blockquote>
<p>В России не работает на TLS 1.2, поскольку rdp-шный DPI еще смотрит на сертификат из ответа сервера TLS ServerHello. Это можно обойти через комбо с nfqws --wssize.</p>
</blockquote>
</aside>
<p>Интересно, что смотрит ответ только если SNI нет, но TLS выявлен. При наличии SNI блокирует или прекращает следить.</p></td><td>2023-10-13T16:35:33.756Z</td></tr><tr><td>zzr</td><td><p>nice</p></td><td>2023-10-17T06:09:44.837Z</td></tr><tr><td>cimon357(Elena)</td><td><p>Добрый день.</p>
<p>Прошу помощи в настройке zapret в такой конфигурации домашней сети:</p>
<p>клиенты - virtual box (192.168.199.65, openWrt, установлен zapret) - основной роутер - интернет.</p>
<p>Чтобы можно было указать в качестве прокси на клиентах (ПК, смартфоны) IP и порт виртуальной машины (я предпочитаю использовать privoxy, 192.168.199.65:8118).</p>
<p>Можно ли так настроить, если да, то как это сделать?<br>
Или как можно настроить в подобной конфигурации?</p>
<p>Если после запуска файла blockcheck.sh в сводке доступных способов обхода есть строка:<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http : tpws --methodeol<br>
можно ли мне выбрать при настройке (install_easy.sh) в качестве способа обхода tpws и потом указать в файле<br>
TPWS_OPT=“–methodeol”<br>
Будет ли так работать?</p>
<p>После настройки zapret у меня запускается, как процесс, виден в htop<br>
/opt/zapret/tpws/tpws --user=daemon --bind addr=127.0.0.127 --port=988 --methodeol</p>
<p>Буду благодарна за помощь.<br>
Если вопросы некорректны, то прошу прощения - только начала с этим разбираться.<br>
GoodByeDPI на Windows у меня работает, теперь пробую настроить на openWrt.<br>
Если получится настроить на виртуальной машине, потом так же сделаю на роутере.</p></td><td>2023-10-17T17:33:58.495Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="cimon357" data-post="18" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cimon357/48/3804_2.png" class="avatar"> cimon357:</div>
<blockquote>
<p>клиенты - virtual box (192.168.199.65, openWrt, установлен zapret) - основной роутер - интернет.</p>
</blockquote>
</aside>
<p>Сеть не должна быть в режиме NAT. Нужен bridge. Иначе почти никакие методы не будут работать.</p>
<aside class="quote no-group" data-username="cimon357" data-post="18" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cimon357/48/3804_2.png" class="avatar"> cimon357:</div>
<blockquote>
<p>Чтобы можно было указать в качестве прокси на клиентах (ПК, смартфоны) IP и порт виртуальной машины (я предпочитаю использовать privoxy, 192.168.199.65:8118).</p>
<p>Можно ли так настроить, если да, то как это сделать?</p>
</blockquote>
</aside>
<p>Можно, но такая настройка zapret не касается, а ликбезом по linux я не занимаюсь. Ищите информацию в сети.<br>
Если вкратце, то zapret обходит блокировки в тч на локальном устройстве. Значит надо установить любой прокси на то же устройство, и соединения с него пойдут через zapret.<br>
Хотя такая конфигурация и не очень логична, правильнее было бы использовать маршрутизацию</p>
<aside class="quote no-group" data-username="cimon357" data-post="18" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cimon357/48/3804_2.png" class="avatar"> cimon357:</div>
<blockquote>
<p>TPWS_OPT=“–methodeol”<br>
Будет ли так работать?</p>
</blockquote>
</aside>
<p>Будет для http , ломая значительное количество сайтов. Для https не будет.</p></td><td>2023-10-17T19:33:44.125Z</td></tr><tr><td>cimon357(Elena)</td><td><p>Спасибо Вам за ответ</p>
<aside class="quote no-group" data-username="bolvan" data-post="19" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сеть не должна быть в режиме NAT. Нужен bridge.</p>
</blockquote>
</aside>
<p>У меня в настройках виртуальной машины в разделе “Сеть” выбран “Тип подключения” - “Сетевой мост”, речь, наверное, об этом?</p>
<p>Тогда какие выбрать настройки для install_easy.sh, если у меня такие способы обхода:</p>
<p>ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http : tpws --methodeol<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http : nfqws --dpi-desync=split --dpi-desync-ttl=8<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls12 : tpws not working<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls12 : nfqws --dpi-desync=fake,split2 --dpi-desync-ttl=4</p></td><td>2023-10-17T20:03:32.447Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="cimon357" data-post="20" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cimon357/48/3804_2.png" class="avatar"> cimon357:</div>
<blockquote>
<p>ipv4 <a href="http://rutracker.org">rutracker.org</a> curl_test_http : tpws --methodeol<br>
ipv4 <a href="http://rutracker.org">rutracker.org</a> curl_test_http : nfqws --dpi-desync=split --dpi-desync-ttl=8<br>
ipv4 <a href="http://rutracker.org">rutracker.org</a> curl_test_https_tls12 : tpws not working<br>
ipv4 <a href="http://rutracker.org">rutracker.org</a> curl_test_https_tls12 : nfqws --dpi-desync=fake,split2 --dpi-desync-ttl=4</p>
</blockquote>
</aside>
<p>Те, что с nfqws, раздельно для http и https</p></td><td>2023-10-18T05:49:10.752Z</td></tr><tr><td>cimon357(Elena)</td><td><p>Спасибо Вам огромное за помощь. Все работает, сайты открываются. Замечательный скрипт.</p></td><td>2023-10-18T21:29:38.937Z</td></tr><tr><td>zzr</td><td><p><img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji only-emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<pre><code class="lang-auto">* SUMMARY
ipv4 instagram.com curl_test_https_tls12 : tpws not working
ipv4 instagram.com curl_test_https_tls12 : nfqws not working
ipv4 instagram.com curl_test_https_tls13 : tpws not working
ipv4 instagram.com curl_test_https_tls13 : nfqws not working

</code></pre>
<p>не то чтобы он мне сильно нужон, просто интересно как такойе возможно, другие сайты открывает норм<br>
а может быть такойе что например дпи оно пробивает но сам ихний веб-сервер дропает видоизменённые несоответствующие не одному стандарту пакеты? <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p></td><td>2023-11-09T06:10:30.853Z</td></tr><tr><td>bolvan</td><td><p>У таких сайтов обычно прыгающие IP, и часть из них может быть заблокирована по IP<br>
У меня норм обходит</p></td><td>2023-11-09T06:34:01.025Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Заметил интересную особенность, сайт <a href="http://windscribe.com" rel="noopener nofollow ugc">windscribe.com</a> на 99% провайдеров не имеет рабочей стратегии обхода блокировки. Блокировки по ip нет нигде, но стратегию все равно найти не удалось.</p>
<p>Заработало только на AS12695 DINET-AS, причем для всех заблокированных сайтов достаточно обычного fake на TCP TLS 1.2, а для <a href="http://windscribe.com" rel="noopener nofollow ugc">windscribe.com</a> нужен</p>
<blockquote>
<p>–dpi-desync=fake,split2 --dpi-desync-split-pos=1</p>
</blockquote>
<p>И заработало на NAT64 мобильного мегафона через fake,split2. На том же мегафоне без NAT64 стратегии обхода нет</p></td><td>2024-01-10T05:36:14.797Z</td></tr><tr><td>bolvan</td><td><p><a href="http://windscribe.com">windscribe.com</a> на 3 провайдерах не конектит на порт 443 вообще. таймаут<br>
о каком zapret речь ?</p></td><td>2024-01-10T07:53:34.585Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Как выше описал, на магафоне NAT64 и небольшом провайдере в Москве zapret срабатывает на <a href="http://windcribe.com" rel="noopener nofollow ugc">windcribe.com</a>, на остальных провайдерах где тестировал - нет</p>
<p>Видимо блок по v4 именно на порт 443 на большинстве провайдеров. Хотя просто пинги до сайта ходят. Если необходимо могу поднять ВПН и дать Вам временный доступ для теста к этой точке которую выше описывал (AS12695 DINET-AS) 85.192.51.Х</p></td><td>2024-01-10T08:06:20.525Z</td></tr><tr><td>bolvan</td><td><p>блокируется по ip только порт 443<br>
на 80 http работает даже без обхода</p></td><td>2024-01-10T08:07:59.710Z</td></tr><tr><td>anon57137390</td><td><p>del</p></td><td>2024-01-10T12:21:16.713Z</td></tr><tr><td>AlexPlay(AlexPlay)</td><td><p>Добрый день.<br>
Настроил на роутере keenetic zapret c nfqws и wireguard сервер</p>
<p>Нужно чтобы через zapret проходил только трафик с wireguard</p></td><td>2024-03-05T15:09:07.549Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="AlexPlay" data-post="30" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/alexplay/48/4556_2.png" class="avatar"> AlexPlay:</div>
<blockquote>
<p>Нужно чтобы через zapret проходил только трафик с wireguard</p>
</blockquote>
</aside>
<p>Откажитесь от скриптов, сделайте все руками</p></td><td>2024-03-05T15:14:19.243Z</td></tr><tr><td>AlexPlay(AlexPlay)</td><td><p>а через /opt/zapret/init.d/sysv/custom никак?</p></td><td>2024-03-05T19:00:36.250Z</td></tr><tr><td>bolvan</td><td><p>Можно через custom script<br>
Переписать логику nfqws и добавить фильтр -s 192.168.5.0/24 (подсеть wireguard)</p>
<p>Можно взять за основу это, только избавиться от tpws и заменить его на nfqws. nftables можно не писать.</p><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-tpws4http-nfqws4https">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-tpws4http-nfqws4https" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-tpws4http-nfqws4https" target="_blank" rel="noopener">bol-van/zapret/blob/master/init.d/sysv/custom-tpws4http-nfqws4https</a></h4>


      <pre><code class="lang-d/sysv/custom-tpws4http-nfqws4https"># this custom script demonstrates how to apply tpws to http and nfqws to https
# it preserves config settings : MODE_HTTP, MODE_HTTPS, MODE_FILTER, TPWS_OPT, NFQWS_OPT_DESYNC, NFQWS_OPT_DESYNC_HTTPS

zapret_custom_daemons()
{
	# $1 - 1 - run, 0 - stop

	local opt

	[ "$MODE_HTTP" = "1" ] &amp;&amp; {
		opt="--port=$TPPORT $TPWS_OPT"
		filter_apply_hostlist_target opt
		do_tpws $1 1 "$opt"
	}

	[ "$MODE_HTTPS" = "1" ] &amp;&amp; {
		opt="--qnum=$QNUM $NFQWS_OPT_DESYNC_HTTPS"
		filter_apply_hostlist_target opt
		do_nfqws $1 2 "$opt"
	}
</code></pre>



  This file has been truncated. <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom-tpws4http-nfqws4https" target="_blank" rel="noopener">show original</a>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-03-05T20:20:49.364Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>А как. Зайти. Через Google Chrome По http Я пытался. Ну что-то не получается Автоматом. Заходит. По https</p></td><td>2024-03-18T10:43:20.230Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="110" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/whats-new/61/110">What's new</a></div>
<blockquote>
<p>Но есть еще более новый стандарт TCP fast open. В нем как раз отсылка данных в процессе хэндшейка</p>
</blockquote>
</aside>
<p>К слову. Я недавно проверял возможность запутыванию с помощью TFO. Если засунуть запрос в SYN, то можно пробить некоторые DPI, однако ТСПУ (под ним имею ввиду то, что замораживает соединение, даже если пробит первый DPI), может собрать такой запрос и заблокировать, но и он пробивается, если размер данных в SYN &lt; 3 байт, притом split на тех же позициях не работает. Похоже, что он либо учитывает расширение tfo, либо грубо сканирует все первые пакеты, размер которых превышает некоторое число.</p></td><td>2024-03-19T20:09:45.271Z</td></tr><tr><td>bolvan</td><td><p>Сплит через TFO может работать только на серверах, поддерживающих TFO. А чтобы это узнать, придется отправить тестовый запрос, и если нет, то придется заново переподключаться, держа при этом клиента на связи<br>
Действительно, я тоже замечал замораживание на http, но не на https. Под замораживанием я понимаю такое состояние, когда DPI в процессе своей грязной работы задерживает пакеты и правит sequence numbers, и в случае десинхронизации соединение ломается. Обычно это видно на disorder. Зависание. syndata так же может вызывать слом. На некоторых провайдерах норм, на других ломается.<br>
На https TFO не пробовали ?</p>
<aside class="quote no-group" data-username="hufrea" data-post="35" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Похоже, что он либо учитывает расширение tfo, либо грубо сканирует все первые пакеты, размер которых превышает некоторое число.</p>
</blockquote>
</aside>
<p>Смотря на результат, мы видим работу произвольного количества DPI на пути. Обычно их не один там, и разные могут вести себя по-разному</p></td><td>2024-03-20T06:02:30.951Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="36" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сплит через TFO может работать только на серверах, поддерживающих TFO.</p>
</blockquote>
</aside>
<p>Да, а серверов поддерживающих TFO не так уж и много, но rutracker, например, поддерживает.</p>
<aside class="quote no-group" data-username="bolvan" data-post="36" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>А чтобы это узнать, придется отправить тестовый запрос, и если нет, то придется заново переподключаться, держа при этом клиента на связи</p>
</blockquote>
</aside>
<p>Не придется, ядро делает это прозрачно. Если у ядра есть сохранённый cookie, то он отправит данные в первом SYN, если же нет, то он отправит обычный SYN с расширением TFO,  для получения первого cookie от сайта. Затем просто отправит запрос после рукопожатия. Если сервер прислал в ответ TFO, то впредь данные ему будут отправляться в первом SYN.</p>
<aside class="quote no-group" data-username="bolvan" data-post="36" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>На https TFO не пробовали ?</p>
</blockquote>
</aside>
<p>Как раз на нем и пробовал (несколько недель назад у меня перестал блокироваться HTTP на всех DPI). На обычных сайтах замораживания не было, только на заблокированных. Т.е. DPI умеет собирать такие запросы при условии, что полезной нагрузки &gt; 2 байт.</p></td><td>2024-03-20T07:31:36.846Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="37" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Если у ядра есть сохранённый cookie, то он отправит данные в первом SYN, если же нет, то он отправит обычный SYN с расширением TFO, для получения первого cookie от сайта.</p>
</blockquote>
</aside>
<p>Вот это и вводит неопределенность. Нельзя сделать обычными средствами так, чтобы всегда были данные в SYN. Или можно, сделав предварительный конект. Но можно ли узнать потом действительно ли сервер поддерживает TFO ?<br>
Прозрачность удобна, но для наших целей засунуть данные в SYN может быть не очень удобна</p>
<p>Гуглится вот что :<br>
The case that you are sure fast open was used is when you have a non-blocking socket, you already have a fast open cookie and sendto() does not return EINPROGRESS:<br>
For non-blocking socket, it returns the number of bytes queued (and transmitted in the SYN-data packet) if cookie is available. If cookie is not available, it transmits a data-less SYN packet with Fast Open cookie request option and returns -EINPROGRESS like connect().</p></td><td>2024-03-20T07:40:12.715Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="38" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Нельзя сделать обычными средствами так, чтобы всегда были данные в SYN.</p>
</blockquote>
</aside>
<p>Если имеется ввиду и случаи, когда на сервере нет TFO, то похоже, что это невозможно. В Linux (начиная вроде с 4.11) есть такая опция - TCP_FASTOPEN_CONNECT. Если cookie у ядра есть, то connect мнгновенно вернет 0, если нет, то EINPROGRESS. Т.е. можно сделать предварительное подключение, не отправляя данные.</p></td><td>2024-03-20T08:01:43.261Z</td></tr><tr><td>ech0brav0</td><td><p>Возможно ли как-нибудь посредством zapretа реализовать блокировку quic (блокировка от провайдера то есть, то нет)? Максимально криво работает и единственным способом избежать проблем становится принудительное отключение quic в браузерах. Но хотелось бы найти способ заблокировать quic на домашних устройствах полностью</p></td><td>2024-03-25T21:10:49.566Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Закройте порт udp 443 на выход из домашней сети и никакого quic не будет</p></td><td>2024-03-25T22:45:11.971Z</td></tr><tr><td>bolvan</td><td><p>Попробуйте еще пробивать не --dpi-desync=fake, а с добавлением --dpi-desync-repeats=6<br>
Вчера такую тему просек на sknt ipv6</p></td><td>2024-03-26T06:09:12.328Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Добрый день . Вчера заметил странные вещи . Вчера скачал . Последнюю версию zapret . На роутер . Кинетик пик . Он Почему-то  запускается . От имени пользователя Starting daemon 1: /opt/zapret/nfq/nfqws --user=tpws И ничего не работает А должно быть Starting daemon 1: /opt/zapret/nfq/nfqws --user=nobody . Как. Это. Лечить . Или как скачать . Предыдущую версию</p></td><td>2024-03-26T10:49:32.930Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="43" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>Как. Это. Лечить .</p>
</blockquote>
</aside>
<p>keenetic официально я не поддерживаю.<br>
скрипты sysv пытаются добавить юзера tpws. если даже в entware и есть adduser, то он будет добавлять в /opt/etc/passwd, а tpws/nfqws будут читать из /etc/passwd и не найдут юзера tpws, потому они с ошибкой будут завершаться<br>
/etc/passwd - это ссылка на /tmp, где прошивка динамически в tmpfs генерит слишком нестандартный и обрезаный passwd/group<br>
сам же корень большинства стоковых прошивкок является readonly squashfs, что резко сокращает возможности по управлению ими, отчего и заточен zapret под openwrt</p>
<p>решается добавлением в config<br>
WS_USER=nobody</p></td><td>2024-03-26T10:59:25.593Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Вроде предыдущих версиях такого не было</p></td><td>2024-03-26T11:05:12.391Z</td></tr><tr><td>bolvan</td><td><p>в предыдущих версиях обламывался useradd по причине отсутствия группы nogroup. я это поправил командой добавления группы. useradd перестал обламываться, скрипт стал думать, что юзер добавляется и использует его, что приводит к ошибке</p>
<p>добавил в базовый конфиг</p>
<pre><code class="lang-auto"># redefine user for zapret daemons. required on Keenetic
#WS_USER=nobody
</code></pre></td><td>2024-03-26T11:06:55.631Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Благодарю за Помощь всё заработало</p></td><td>2024-03-26T11:14:09.135Z</td></tr><tr><td>nospace</td><td><p><strong>bolvan</strong>, ваш метод, мягко говоря, не самый простой. И мне интересно какой результат он в итоге дает. Я понял только то, что нельзя обойти блокировку IP-адреса. Но можно ли вашим методом разблокировать, например, Рутрекер, Флибусту, Либген и т.п.? И что лучше использовать - любой десктопный дистрибутив или openwrt?</p></td><td>2024-03-29T03:33:44.051Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="nospace" data-post="48" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e47c2d/48.png" class="avatar"> nospace:</div>
<blockquote>
<p>мягко говоря, не самый простой</p>
</blockquote>
</aside>
<p>Да, вы правы. Если для вас все кажется слишком сложным, я рекомендую пройти мимо. Никогда не ставил себе задачу сделать это для всех одним нажатием кнопки.<br>
А обходит практически все, кроме блоков по IP. Блоки по IP приходится заворачивать в VPN, для чего сделаны хелперы, но настройка еще сложнее в разы, чем сам zapret<br>
Для роутеров только openwrt, для десктопа - практически любой linux. Хотя если можете сделать роутер из обычного linux, тоже ничто не мешает</p></td><td>2024-03-29T06:55:27.925Z</td></tr><tr><td>soulja(Serano)</td><td><p>Добрый день, а как можно обновиться на новую версию?</p></td><td>2024-04-10T08:54:06.269Z</td></tr><tr><td>bolvan</td><td><p>Скачать и распаковать в /tmp, дальше оттуда install_easy.sh</p></td><td>2024-04-10T10:49:05.327Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>добрый у меня такой вопрос если сайт не обходится запретом и его ip не пингуется и не проходит трасировку это что значит блокировка или поломка сети</p></td><td>2024-04-20T10:12:05.732Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Если это блокировка . Что мешает . Все сайты таким образом заблокировать . И Запрет не будет работать</p></td><td>2024-04-20T10:30:40.896Z</td></tr><tr><td>Xunlei</td><td><p>Проверьте из другой сети:</p>
<pre><code class="lang-auto">https://www.whatismyip.com/port-scanner/
https://dnschecker.org/port-scanner.php
https://check-host.net/
https://ping.pe/
https://looking.house/index.php
</code></pre>
<p>Если проходит, значит блокировка на стороне тспу или администратора сайта.</p>
<p>Ничего не мешает.</p></td><td>2024-04-20T10:42:09.531Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="Xunlei" data-post="54" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar"> Xunlei:</div>
<blockquote>
<p>Ничего не мешает.</p>
</blockquote>
</aside>
<p>про CDN забыли? <a href="https://host.io/ip/104.21.68.2">https://host.io/ip/104.21.68.2</a><br>
или думаете что ркн они не мешают?</p></td><td>2024-04-20T10:53:37.826Z</td></tr><tr><td>0ka(0ka)</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="52" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>не проходит трасировку</p>
</blockquote>
</aside>
<p>смотрите где заканчивается трассировка, если в РФ или в сети провайдера - ТСПУ, если за границей (cogent, telia, …) - админ сайта блочит вас</p></td><td>2024-04-20T10:56:04.034Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="52" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>добрый у меня такой вопрос если сайт не обходится запретом и его ip не пингуется и не проходит трасировку это что значит блокировка или поломка сети</p>
</blockquote>
</aside>
<p>Первым делом в таком случае тестируется сама возможность подключения по TCP к 80 или 443.<br>
Если она отсутствует, то zapret насиловать смысла нет. Он чудес не творит.<br>
Дальше - написали выше. Неплохо сделать подключение с забугорного хоста на порт. Если нет VPSки, есть полно веб порт сканеров</p></td><td>2024-04-20T11:13:15.632Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>я пытаюсь зайти   вот сюда <a href="http://mail.proton.me" rel="noopener nofollow ugc">mail.proton.me</a> запретом хотя сайт <a href="https://proton.me/ru/mail" class="inline-onebox" rel="noopener nofollow ugc">Proton Mail&nbsp;— конфиденциальная и надёжная почта с шифрованием | Proton</a>  Легко открывается запретом</p></td><td>2024-04-20T11:26:45.816Z</td></tr><tr><td>bolvan</td><td><p>Заблокировано по IP адресу на ТСПУ. Сразу идет RST на SYN. connection refused<br>
Трейс на соседние IP нормальный, на этот обрыв на 7 хопе после провайдера.<br>
Применение zapret бессмысленно, требуется перенаправление через сторонний хост</p></td><td>2024-04-20T11:40:02.432Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Как сделать Перенаправление сторонним хостом.Это Только VPN</p></td><td>2024-04-20T11:44:27.631Z</td></tr><tr><td>bolvan</td><td><p>Да, только VPN или прокси.<br>
В zapret есть система ipban, облегчающая построение policy routing или выборочного прозрачного перенаправления на прокси. Но это непросто, требуется много понимания и работы руками<br>
Простая альтренатива - только включение/выключение VPN или прокси</p></td><td>2024-04-20T12:26:01.468Z</td></tr><tr><td>anon57137390</td><td><aside class="quote no-group" data-username="bolvan" data-post="59" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Заблокировано по IP адресу на ТСПУ</p>
</blockquote>
</aside>
<p>Но из <a href="https://reestr.rublacklist.net/en/record/4659367/" rel="noopener nofollow ugc">реестра</a>.</p>
<p>Результат <a href="https://ntc.party/t/%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B8-email-%D0%BC%D0%B5%D0%B6%D0%B4%D1%83-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B9%D1%81%D0%BA%D0%B8%D0%BC%D0%B8-%D0%B8-%D0%B7%D0%B0%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%B8-%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%B0%D0%BC%D0%B8/400">блокировки почтовиков</a> в ходе борьбы с лже-минерами. Борьбы была суровой, доставалось даже <a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%B0-dropmailme/851">пейджерам</a>.</p></td><td>2024-04-20T12:40:27.016Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Заработала . При смене DNS</p></td><td>2024-04-20T13:08:26.405Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Доброе утро А Можно ли добавить Ещё один старт в config например http Отдельно https Отдельно vpn Отдельно</p></td><td>2024-04-24T05:59:39.967Z</td></tr><tr><td>bolvan</td><td><p>Если запихать все редко желаемые хотелки в систему, то система станет перегруженой. Программы с кучей редко используемых неуниверсальных, частных функций и кнопок в тулбаре плохо юзабельны, поэтому я по такому пути не пойду.</p>
<p>Сейчас можно включить или выключить http, https, quic раздельно в конфиге.<br>
Другие конфигурации, тем более VPN, где нет ни стандартного порта, ни стандартного протокола, реализуются либо custom скриптами, либо руками. Другого не дано</p></td><td>2024-04-24T06:17:22.814Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Спасибо. Всё понял. У меня при такой конфигурации работает</p>
<pre><code class="lang-auto"># CHOOSE OPERATION MODE
# MODE : nfqws,tpws,tpws-socks,filter,custom
# nfqws : nfqws for dpi desync
# tpws : tpws transparent mode
# tpws-socks : tpws socks mode
# filter : no daemon, just create ipset or download hostlist
# custom : custom mode. should modify custom init script and add your own code
MODE=custom
# apply fooling to http
MODE_HTTP=1
# for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet
MODE_HTTP_KEEPALIVE=1
# apply fooling to https
MODE_HTTPS=1
# apply fooling to quic
MODE_QUIC=1
# none,ipset,hostlist
MODE_FILTER=none

# CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run "nfq/nfqws --help" for option list
DESYNC_MARK=0x40000000
#NFQWS_OPT_DESYNC="--dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=md5sig"
NFQWS_OPT_DESYNC_HTTP="--dpi-desync=split --dpi-desync-fooling=md5sig --dpi-desync-fooling=badsum"
NFQWS_OPT_DESYNC_HTTPS="--dpi-desync=fake,disorder --dpi-desync-ttl=9 --dpi-desync-fooling=badsum --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-repeats=6"
#NFQWS_OPT_DESYNC_HTTP6="--dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none"
#NFQWS_OPT_DESYNC_HTTPS6="--wssize=1:6 --dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-repeats=6 --dpi-desync-ttl=9"
#NFQWS_OPT_DESYNC_QUIC6="--dpi-desync=hopbyhop"
</code></pre>
<p>Но хотелось бы Чтобы https Сайтaм не мешало</p></td><td>2024-04-24T06:32:28.934Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="66" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>MODE=custom</p>
</blockquote>
</aside>
<p>Если вы при этом ничего не делали с самим custom скриптом, то эта конфигурация не будет делать ровно ничего.  Выбирать custom - это как бы для полупрограммистов. Нельзя просто так взять, сделать custom, и все заработало. Тут нет никакой простой и волшебной таблетки</p></td><td>2024-04-24T11:57:38.930Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Ну работает же Open VPN tcp udp работает wireguard работает ikev2 работает При такой конфигурации</p></td><td>2024-04-24T14:00:46.352Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>в custom Я кое-какие поправки делаль для udp</p></td><td>2024-04-24T14:04:46.879Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Спасибо за zapret На Windows Всё отлично работает</p></td><td>2024-04-29T04:55:56.108Z</td></tr><tr><td>anonimnyj25(anonimnyj25)</td><td><p>Добрый день, запустил <code>blockcheck.sh</code> и получил такую информацию:</p>
<pre><code class="lang-auto">* SUMMARY
ipv4 twitter.com curl_test_http : working without bypass
ipv4 twitter.com curl_test_https_tls12 : tpws not working
ipv4 twitter.com curl_test_https_tls12 : nfqws --dpi-desync=syndata --dpi-desync-fake-syndata=/opt/zapret/files/fake/tls_clienthello_iana_org.bin
ipv4 twitter.com curl_test_https_tls13 : tpws not working
ipv4 twitter.com curl_test_https_tls13 : nfqws --dpi-desync=syndata --dpi-desync-fake-syndata=/opt/zapret/files/fake/tls_clienthello_iana_org.bin
</code></pre>
<p>Сейчас zapper запущен в режиме:<br>
<code>Starting daemon 1: /opt/zapret/tpws/tpws --user=tpws --bind-addr=127.0.0.127 --port=988 --hostspell=HOST --split-http-req=method --split-pos=3 --oob</code></p>
<p>Не совсем понятно, как перенастроить демон на работу с <code>nfqws</code>.</p>
<p>Был бы признателен, если ткните носом в какую сторону копать, спасибо!</p></td><td>2024-05-09T13:23:29.027Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonimnyj25" data-post="71" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/7feea3/48.png" class="avatar"> anonimnyj25:</div>
<blockquote>
<p>Был бы признателен, если ткните носом в какую сторону копать, спасибо!</p>
</blockquote>
</aside>
<p>блокчек был выполнен без остановки zapret ? странные результаты. если так, то это все неверно.<br>
инсталятор позволяет все выбрать, что нужно</p></td><td>2024-05-09T13:42:52.732Z</td></tr><tr><td>kitebo</td><td><p>Прошу прощения за вопрос, не относящийся напрямую к теме…А что означает (как расшифровывается) суффикс <strong>ws</strong> в именах приложений? nfq<strong>ws</strong>, tp<strong>ws</strong>, win<strong>ws</strong> <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p></td><td>2024-05-22T05:46:39.352Z</td></tr><tr><td>bolvan</td><td><p>проект начинался в далеком 2016. тогда первой идеей была смена   window size с целью фрагментации запроса. отсюда пошло название. дальше обросло фукнциями, а название осталось</p></td><td>2024-05-22T08:27:07.487Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Вопросы по настройке zapret’а в связке со Squid’ом: что нужно будет изменить в nftables? Нужно ли заварачивать трафик с кальмара в запрет или наоборот? Или это будет зависить от самого режима настроек прокси, а точнее от того, как он слушает трафик: 1. Браузер настроен жестко на работу с прокси через прописывание самого прокси и порта, 2. Браузер работает без настроек прокси, а трафик на калшьмар заварачивается средствами таблиц. Второй вариант предпочтительнее и интереснее, так как отпадает необходимость прописывать прокси на всех девайсах домашней сети. Буду признателен к паре-тройке примеров готовых правил табличек. Сам запрет крутится в режиме авто-хост листа, т.е. самоубучении возможным заблокированным сайтам и как следствие добавления оных в нужный лист обхода. Не нужно ли будет менять режим работы запрета при этом?</p></td><td>2024-06-04T14:23:10.463Z</td></tr><tr><td>bolvan</td><td><p>с nfqws проблем быть не должно в обоих случаях.<br>
с  tpws проблем нет в режиме squid как обычный прокси, но возможны проблемы в транспарент варианте. хотя и они решаются, но придется понять как оно все вместе.будет жить.<br>
в чем смысл  squid ?</p></td><td>2024-06-04T15:20:21.925Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Смысл в том, что из-за массовых блокировок подсетей на ТСПУ вынужден был поднять подключение к vpn через SoftetherVPN клиент (последний правда кривоватый и на openwrt стабильно работает только 4 версия, да и то, консольная vpncmd в режиме клиента не умеет подключаться к udp vpn серверам ни в какую, есть даже топик в issue у разрабов, но его почему-то закрыли как solved), соответственно хочу немного покэшировать трафик, который ползет через vpn через squid, так как zapret не может (что очевидно и было уже упомянуто) пробивать ip блокировки. Вообщем наверное это кривые костыли, но сейчас у меня работает все так - все что можно надурить zapret’ом идет напрямую в сеть, все что забанено по ip роутиться статическими маршрутами через vpn. А хочу еще и добавить прокси в эту цепочку. И как понимаю zapret точно должен быть после squid’а, так как вроде Вы говорили, что кальмар все пересобирает и дурение не будет работать если пустить трафик с zapret’а на него. Если конечно моя задумка вообще возможна практически к реализации. Проблем с местом и памятью не будет, так как все крутится на реальной машине с 8Гб оперативы и жирным ССД. Ах да, самое главное, что забыл указать, в zapret’е вертится у меня nfqws.</p></td><td>2024-06-04T15:44:34.208Z</td></tr><tr><td>bolvan</td><td><p>squid   не может кэшировать https. plain http уже почти нет. да и смысл кэширования для пробивки ип блоков в чем?<br>
ваша проблема решается через полиси роутинг. в запрете для этого существует    ipban. есть и мануал по прикрутке к вирегард. но суть от замены впн не меняется</p>
<p>да запрет должен быть после прокси</p></td><td>2024-06-04T15:49:24.679Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Ах-да, конечно же Вы правы, как я мог забыть про https. Что бы кешировать https, это надо сувать самопальный сертификат в цепочку сервер - прокси - клиент, расшифровывать и зашифровывать им, да и плюс дырка это в безопасности будет. Тупо забыл, мой косяк. Эту затею видимо придется отбросить. Одно мне тогда не понятно (хоть и к запрету уже отношения не имеет) - как тогда работают обычные открытые прокси, использующиеся для обхода блокировок? Или там крутится что-то продвинутое или используются какие-то прокси, котрые умееют проксировать https трафик?</p></td><td>2024-06-04T16:05:18.319Z</td></tr><tr><td>bolvan</td><td><p>они проксят без дешифровки<br>
для кэширования нужно лезть в содержимое под тлс</p></td><td>2024-06-04T17:02:37.502Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>squid удобен только более или менее внятными и удобными настройками<br>
и можно почти без гимора подсовывать все списки (от автора. от валдика. етк) чтобы заворачивать нужные домены/ИП куда то.<br>
у меня IPv6+частьРФ DIRECT, чтото в VPN (socks5 через Privoxy), остальное вообще в TOR (через HTTPTunnelPort оно понимает/принимает только CONNECT)</p>
<p>на роутерах это тоже иногда можно сделать но ИМХО с большим гемороем<br>
часть задумок можно завернуть через <a href="https://habr.com/ru/articles/687512/" class="inline-onebox">Безопасный HTTPS-прокси менее чем за 10 минут / Хабр</a> (от автора opera/hola/etc-proxy)</p></td><td>2024-06-04T17:20:27.755Z</td></tr><tr><td>bolvan</td><td><p>в свое время интересовался и не нашел возможности заворачивать по сни в скуиде<br>
это должен уметь хрей</p></td><td>2024-06-04T18:09:54.495Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>у меня к сожалению 3.5.28 на windows10<br>
он вообше многово не умеет. dst_as например и надо искать актуальные списки тех же cloudflare IP/network (причем непересекающиеся ибо squid достанет warning-ами)<br>
но вот ваши списки раскидать в VPN/TOR/etc через cache_peer ИМХО удобно и просто. причем можно и завернуть на какой нибудь прокси на роутере с Запретом/АнтиЗапретом или на этой же машине наверно подобрать рабочие настройки как указано выше</p></td><td>2024-06-04T19:11:25.382Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="ShiroiBara" data-post="77" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/shiroibara/48/4734_2.png" class="avatar"> ShiroiBara:</div>
<blockquote>
<p>сейчас у меня работает все так - все что можно надурить zapret’ом идет напрямую в сеть, все что забанено по ip роутиться статическими маршрутами через vpn. А хочу еще и добавить прокси в эту цепочку.</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="LeonMskRu" data-post="81" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>чтото в VPN (socks5 через Privoxy), остальное вообще в TOR (через HTTPTunnelPort оно понимает/принимает только CONNECT)</p>
<p>на роутерах это тоже иногда можно сделать но ИМХО с большим гемороем</p>
</blockquote>
</aside>
<p>У меня сейчас zapret работает на роутере (ImmortalWrt 21, Privoxy, переход с устройств по IP_роутера:8118), но хотелось бы еще сделать (если это возможно) переход на некоторых сайтах (например, <a href="http://intel.com" rel="noopener nofollow ugc">intel.com</a>, который закрыт с той стороны) через openVPN  или что-то подобное.</p>
<p>Мне не хватает пошаговой инструкции, как это сделать. Может быть, кто-то, кто уже настроил у себя подобное, напишет такую инструкцию, была бы благодарна.</p></td><td>2024-06-07T09:00:04.845Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>“просто” это врядли<br>
тем более разные VPNы<br>
для пользователей только варианты типа <a href="https://chromewebstore.google.com/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif">https://chromewebstore.google.com/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif</a><br>
и там уже прописывать .PAC антизапрета. и разные socks/https прокси включая локальные наподобие TOR / Psiphon / etc</p>
<p>у меня например каждый список/прокси это куча правил в конфиге. я сам иногда в них путаюсь уже <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"><br>
acl TXT1 dstdomain “/etc/squid/_PKH1.LST”<br>
cache_peer_access Opera allow TXT1<br>
cache_peer_access Privoxy allow TXT1<br>
acl PPP dstdomain “/etc/squid/_6_tor.LST”<br>
cache_peer_access TOR deny PPP !C0NNECT<br>
cache_peer_access TCP deny PPP !C0NNECT<br>
cache_peer_access TOR allow PPP C0NNECT<br>
cache_peer_access TCP allow PPP C0NNECT</p></td><td>2024-06-07T10:49:48.778Z</td></tr><tr><td>bolvan</td><td><p>писать пошаговые, конечно, не стану<br>
но я бы решал этот вопрос через полиси роутинг и цепочку прокси<br>
выборочно рулить на впн можно через таблицу маршрутизации, но она касается только ип адресов. либо через ip rule. а там можно выбирать в том числе по  uid процесса.<br>
если запустить под отдельным uid простой прокси типа tpws,  заруливая с него на отдельную таблицу, а на сам  tpws с привокси по набору фильтров, то эффект будет достигнут.<br>
если привокси не может рулить по sni, можно использовать xray.<br>
или если не надо обруливать сайты на cdn,  то достаточно заруливания по ipset. см систему ipban в zapret<br>
а для юзера это решается гораздо проще средствами броузера и расширениями типа фокси прокси</p></td><td>2024-06-07T11:08:42.841Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="bolvan" data-post="86" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>писать пошаговые, конечно, не стану</p>
</blockquote>
</aside>
<p>Вам огромное спасибо за замечательный zapret, который здорово выручает в наши дни.<br>
Только сюда заходят люди, которые реализовали разные способы. Может быть, кто-то из них, кто уже настроил и пользуется, написал бы такую подробную инструкцию.<br>
Лично я знаю пока один простой способ составлять списки (для пользователя начального уровня, вроде меня). Когда на устройстве с zapret настроены privoxy и tor. Тогда достаточно в конфигурационном файле privoxy указать:</p>
<p>forward-socks4a *.intel.com/ 192.168.199.10:9050 .</p>
<p>Такой способ у меня тоже работал. Проблема в том, что на маломощных роутерах (как у меня в данный момент времени) tor с obfs4proxy не запустишь. Вот и подумалось: может, есть какие-то другие способы как-то разделить трафик? Так-то удобно: у нас получается одно устройство в локальной сети, адрес которого можно прописать в том же FoxyProxy (в броузере) или на планшете, например, а оно уже разделяет трафик, что куда.</p>
<p>Так-то чувствуется, что инструмент мощный, только сложный в освоении.</p>
<p>Может завести отдельную тему на форуме, где люди будут делиться своими способами настройки (инструкциями)? Все равно их надо будет куда-то отдельно складывать. Хочется в итоге получить универсальное устройство, которое будет подключено к основному роутеру и через которое при необходимости можно пустить трафик со всех домашних устройств. (По моему, в преддверии грядущих тотальных блокировок это будет актуально).</p></td><td>2024-06-07T12:29:48.128Z</td></tr><tr><td>bolvan</td><td><p>в любом случае нужен внешний впн или прокси вне зоны ру. только выборочно рулить по домену проще через прокси. сопряжение этого с сетевым стеком ос требует дополнительных усилий, поскольку там имена доменов не используются, а ип адреса могут прыгать на цдн или по геоип.<br>
если есть впс, то достаточно ssh. он сделает сокс прокси.</p></td><td>2024-06-07T13:16:28.741Z</td></tr><tr><td>Xunlei</td><td><aside class="quote no-group" data-username="cimon357" data-post="87" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cimon357/48/3804_2.png" class="avatar"> cimon357:</div>
<blockquote>
<p>Может завести отдельную тему на форуме, где люди будут делиться своими способами настройки (инструкциями)?</p>
</blockquote>
</aside>
<p>Таких тем уже несколько было. С инструкциями и способами. На <a href="http://intel.com" rel="noopener nofollow ugc">intel.com</a> хотя бы из тора заходит, в отличие от <a href="http://ti.com" rel="noopener nofollow ugc">ti.com</a>.</p></td><td>2024-06-07T13:46:14.949Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>роутеры даже сейчас ИМХО не настолько круты по всем параметрам<br>
CPU / RAM / SSD / “OS” (гибкость настроек и доступных пакетов)<br>
самое “простое” и надежное если понимать что делать это ПК с линуксом<br>
а уж на нем поднимать все нужное<br>
причем сейчас есть довольно компактные хоть и дорогие “сборки”. на 4пда вроде были темы <a href="https://4pda.to/forum/index.php?showforum=1077">https://4pda.to/forum/index.php?showforum=1077</a><br>
и самое главное тот же ЗАПРЕТ и другое работает без напильника</p></td><td>2024-06-07T22:28:09.663Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="LeonMskRu" data-post="90" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>тот же ЗАПРЕТ и другое работает без напильника</p>
</blockquote>
</aside>
<p>Что значит “без напильника”? По любому на разных провайдерах надо блокчек прогонять. У меня дома один провайдер (проводной), на даче другой (беспроводной) и “общий конфиг” не работает (пробовала).</p>
<p>У меня сейчас zapret работает на компактном (но маломощном) tl-mr3020 и я им очень даже довольна. (Эти роутеры мне за их дизайн  нравятся, они маленькие и таких устройств можно раскидать где угодно: дома/на даче/у родственников и т.д., подключенными к основному роутеру). Только вот tor на нем не запустишь, а другие варианты настроить - пока тому не научена, не умею. Вот и ищу доступную инструкцию.<br>
Мне с zapret-ом повезло, что удалось найти пошаговую инструкцию по настройке.</p>
<p>Можно неттоп с Linux использовать (я взяла б/у, подешевле…)<br>
У меня была идея подключаться удаленно к моему домашнему неттопу и использовать его как прокси-сервер. Попробовать хотелось (интересно же…), но по некоторой причине не получилось (выключили тот неттоп).</p>
<p>Варианты разные могут быть. Сам zapret нетребователен к ресурсам и запускать его можно на любом подходящем оборудовании - как удобнее настроить.</p></td><td>2024-06-08T06:24:54.597Z</td></tr><tr><td>RapWolf</td><td><aside class="quote no-group" data-username="LeonMskRu" data-post="90" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>линуксом</p>
</blockquote>
</aside>
<p>Оставьте это на сервере и десктопе. На роутере онли OPNsense, на крайняк pfSense</p>
<aside class="quote no-group" data-username="LeonMskRu" data-post="90" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>роутеры даже сейчас ИМХО не настолько круты по всем параметрам<br>
CPU / RAM / SSD</p>
</blockquote>
</aside>
<p>С чего бы это? Путаете, наверное, что-то. То, что вы скинули больше похоже на роутер, чем чудовища франкештейна, которые впаривают людям недобросовестные провайдеры, где 4-в-1 модем+AP+роутер+свитч и арм проц хорошо если пятнадцатого года</p></td><td>2024-06-08T06:37:58.872Z</td></tr><tr><td>bolvan</td><td><p>не знаю чем так привлекает *sense<br>
интерфейсом может быть?<br>
на деле linux далеко обогнал  bsd по возможностям<br>
на фаерволах pf и ipfw очень много чего нельзя из того, что можно с  netfilter, nftables, iproute</p></td><td>2024-06-08T07:24:10.875Z</td></tr><tr><td>RapWolf</td><td><aside class="quote no-group" data-username="bolvan" data-post="93" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>не знаю чем так привлекает *sense</p>
</blockquote>
</aside>
<p>Тем, что это устоявшийся проект конкретно для роутеров, фаерволлов, и т.д.</p>
<aside class="quote no-group" data-username="bolvan" data-post="93" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>на фаерволах pf и ipfw очень много чего нельзя из того, что можно с netfilter, nftables, iproute</p>
</blockquote>
</aside>
<p>Но в данном случае такой спорный их недостаток как отсутствие приемлемой дефолтной конфигурации перевешивает. Чтобы поставить OPNsense и настроить там VPN, Pi-hole, лоад балансинг и мб даже шейпинг трафика – много ума не надо, о лине такого не скажешь. Рядовой Вася не обязан иметь скиллы нетадмина для того, чтобы самому установить роутер. Да и помщников никаких нет в любом случае, самый очевидный претендент занят продажей китайских недоразумений с 256мб оперативы и флеш-памяти</p>
<aside class="quote no-group" data-username="bolvan" data-post="93" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>на деле linux далеко обогнал bsd по возможностям</p>
</blockquote>
</aside>
<p>Роутер – это почти такое же критическое звено в телекоммуникациях как браузер, так что нужны не возможности, а безопасность. В случае *sense её гарантируют и упомянутые выше дефолты, и компания Netgate, спонсирующая как сам проект, так и патчи CVE в используемых пакетах, и лицензия (нарушений меньше, чем у GPL, самое крупное от Sony, то есть вообще в другой плоскости). Вот где точно обогнал, так это в поддержке устройств (удачи на *BSD если сетевая карта с чипом не от intel) и беспроводной связи</p></td><td>2024-06-08T15:32:26.459Z</td></tr><tr><td>bolvan</td><td><p>Некорректно сравнивать appliance в веб мордой с голым linux.<br>
Тогда уж с openwrt сравнивайте.<br>
И прикиньте что будет, когда предложенных в морде возможностей станет недостаточно.<br>
Когда станут нужны юниксоидные прикрутки через шелл. Нестандартные схемы. Хаки, борьба против системы.<br>
zapret тот же. Очень это удобно будет ?<br>
А тупо проNATить и раскидать инет может любая мыльница со стоком</p></td><td>2024-06-08T19:03:21.456Z</td></tr><tr><td>hufrea</td><td><p>Про перезапись в TCP.<br>
Возьмем такие фейк-данные:<br>
<code>00 00 00 00 16 03</code><br>
Если их отправить в пакете со смещением SEQ в -4 от предыдущего, то первые нули отбросятся, а <code>1603</code> попадет в приложение.<br>
Таким образом можно объединить фейковые данные и полезную нагрузку в один пакет, так что DPI не сможет ни правильно  спарсить его, ни проигнорировать, т.к. потеряет начало следующего пакета.<br>
В nfqws можно сделать как-то так:<br>
<code>./nfqws --qnum=200 --dpi-desync=fake --dpi-desync-fake-tls=0x000000001603 --dpi-desync-fooling=badseq --dpi-desync-badack-increment=0 --dpi-desync-badseq-increment=-4</code><br>
Однако второй пакет все-же будет целый + нужен кастомный фейк.<br>
Было бы неплохо иметь некий параметр <code>--fake-overwrite=n</code>, который скопирует n байт в конец фейка и обрежет начало настоящего пакет на столько же.</p></td><td>2024-06-10T12:01:02.988Z</td></tr><tr><td>bolvan</td><td><p>Спасибо за идею. Будет время - рассмотрю этот вариант</p></td><td>2024-06-10T12:37:52.259Z</td></tr><tr><td>ech0brav0</td><td><p>Всем добрый день. Решил сегодня обновиться до свежей ветки и поломал себе весь обход. До сегодняшнего дня сидел со стратегией --dpi-desync=fake,disorder2 --dpi-desync-ttl=3 и всё прекрасно работало. Обновился до свежей, выставил в install_easy.sh --qnum=0 и свою прошлую стратегию. По итогу демон запускается с такими параметрами</p>
<pre data-code-wrap="bash"><code class="lang-bash">/opt/zapret/nfq/nfqws --user=tpws --dpi-desync-fwmark=0x40000000 --qnum=200 --qnum=0 --dpi-desync=fake,disorder2 --dpi-desync-ttl=3
</code></pre>
<p>Обход не срабатывает. Сижу на Keenetic Viva (KN-1912)</p></td><td>2024-06-23T14:11:33.495Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>а провайдер ничего не менял ?<br>
тот же blockcheck все тоже самое предлагает ?</p>
<p>и  меня кстати тут заинтересовало. это мой РТ что то чудит или все таки IPv6 блокируют хоть и не весь ?!<br>
ipv6 <a href="http://rutracker.org">rutracker.org</a> curl_test_http : working without bypass<br>
ipv6 <a href="http://rutracker.org">rutracker.org</a> curl_test_https_tls12 : working without bypass<br>
ipv6 <a href="http://rutracker.org">rutracker.org</a> curl_test_https_tls13 : working without bypass<br>
ipv6 <a href="http://rutracker.org">rutracker.org</a> curl_test_http3 : winws --wf-l3=ipv6 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=2</p></td><td>2024-06-23T15:22:37.064Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Для keenetic’a user=nobody, а не tpws. Ну и если UDP нужно, то надо <a href="https://ntc.party/t/zapret-whats-new/61/71">маскарад добавлять</a>.</p></td><td>2024-06-23T15:43:37.493Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ech0brav0" data-post="98" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/bc8723/48.png" class="avatar"> ech0brav0:</div>
<blockquote>
<p>Всем добрый день. Решил сегодня обновиться до свежей ветки и поломал себе весь обход.</p>
</blockquote>
</aside>
<p>Возможно вы делали по одной из инструкций в инете, где советуют править скрипты без обьяснения сути и причины сего исправления. А потом накатили оригинальную версию без этой правки.<br>
См здесь</p><aside class="quote quote-modified" data-post="44" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/44">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    keenetic официально я не поддерживаю. 
скрипты sysv пытаются добавить юзера tpws. если даже в entware и есть adduser, то он будет добавлять в /opt/etc/passwd, а tpws/nfqws будут читать из /etc/passwd и не найдут юзера tpws, потому они с ошибкой будут завершаться 
/etc/passwd - это ссылка на /tmp, где прошивка динамически в tmpfs генерит слишком нестандартный и обрезаный passwd/group 
сам же корень большинства стоковых прошивкок является readonly squashfs, что резко сокращает возможности по упра…
  </blockquote>
</aside>
</td><td>2024-06-23T16:30:22.132Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="LeonMskRu" data-post="99" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>и меня кстати тут заинтересовало. это мой РТ что то чудит или все таки IPv6 блокируют хоть и не весь ?!</p>
</blockquote>
</aside>
<p>С ipv6 у меня на провайдере какое-то скакание. То нужно тяжелым бить с fake,split. То работает простейший hostcase или split2. А бывает некоторые домены вообще перестают блокироваться</p></td><td>2024-06-23T16:32:43.542Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="96" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Было бы неплохо иметь некий параметр <code>--fake-overwrite=n</code>, который скопирует n байт в конец фейка и обрежет начало настоящего пакет на столько же.</p>
</blockquote>
</aside>
<p>Думаю над вашей идеей. Если для первого пакета с данными от клиента или после L7 раундтрипа (запрос-ответ-запрос-атака_на_него), то вроде неплохо выглядит. Но если вдруг поток идет сплошняком. desync any protocol, допустим, или еще какой-то случай.  если прошлый пакет еще не был выплюнут в сокет ? unix системы презервят ласт дата. Потому мы перепишем кусок полезной нагрузки ерундой, и это будет передано серверному приложению</p></td><td>2024-06-23T16:50:41.627Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>ну меня немного удивило ибо<br>
может я как то не так проверяю ?<br>
curl -6 --http3 -v <a href="https://rutracker.org/myip">https://rutracker.org/myip</a><br>
Connected to <a href="http://rutracker.org">rutracker.org</a> (2606:4700:3031::6815:2027) port 443<br>
using HTTP/3<br>
&lt; HTTP/3 200<br>
ip: 2a00:62c0: :2b23 RU</p></td><td>2024-06-23T16:58:20.581Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="LeonMskRu" data-post="104" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/leonmskru/48/2810_2.png" class="avatar"> LeonMskRu:</div>
<blockquote>
<p>может я как то не так проверяю ?</p>
</blockquote>
</aside>
<p>–http3-only. --http3 лезет по tcp сначала.<br>
вообще на счет quic-а много неясностей.<br>
запросы от разных libraries имеют разный эффект.<br>
одно время на quiche вообще блокировка не действовала.<br>
теперь на quiche не действует обход ни через fake, ни через ipfrag. и на curl от BSD систем тоже не действует.<br>
а на ngtcp3 все норм. и на броузерах тоже.<br>
на первый взгляд, сравнивая хедеры, различия видны. это и packet number length, и длина connection id, и наличие непустого destination id в initial клиента.<br>
похоже, там кроме собственно фильтра, расшифровывающего SNI, стоит фингерпринт резалка. может быть против каких-то отдельных приложений, использующих quic. Псифон ? Им подобные ? Я не знаю.<br>
На одном из доступных мне провайдеров, который подключен через globalnet, вообще блок любого quic на 443. Рудимент от магистрала не выключенный</p></td><td>2024-06-23T17:04:52.108Z</td></tr><tr><td>ech0brav0</td><td><p>Спасибо, помогло</p></td><td>2024-06-23T17:20:37.415Z</td></tr><tr><td>ech0brav0</td><td><p>Спасибо, помогло!</p></td><td>2024-06-23T17:20:51.897Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>вот теперь вижу блокировку. спасибо за опцию</p>
<p>curl -6 --http3-only -v <a href="https://rutracker.org/myip">https://rutracker.org/myip</a><br>
QUIC connection has been shut down<br>
QUIC connect to 2606:4700:3031::6815:2027 port 443 failed: Couldn’t connect to server</p></td><td>2024-06-23T17:28:55.979Z</td></tr><tr><td>hufrea</td><td><p>Лучше это применять только для первого пакета, для последующих же делать как по прежнему.<br>
Для потока нужна другая логика, например:<br>
Оригинальный запрос: <code>01 02 03 04 05</code><br>
Создаем первый пакет:<br>
<code>00 00 04 05</code><br>
Отправляем этот пакет со смещением SEQ в +1.<br>
Затем отправляем второй пакет со смещением 0:<br>
<code>01 02 03 </code><br>
Получается нечто схожее с fake+disorder2.<br>
Недостатки:</p>
<ul>
<li>Есть небольшой риск, что первый пакет придет позже второго и все сломает, поэтому желательно отправлять второй только при ретрансмисии, это даст небольшую задержку.</li>
<li>Размер фейка должен быть меньше размера запроса или же обрезаться до него, поэтому DPI может не клюнуть на него.</li>
</ul>
<p>Достоинства:</p>
<ul>
<li>Экономится один пакет по сравнению с обычным fake2.</li>
<li>Сложнее восстановить поток (более запутанно).</li>
<li>Не нужно использовать fooling.</li>
</ul></td><td>2024-06-23T23:45:10.598Z</td></tr><tr><td>bolvan</td><td><p>Можно назвать весь комплекс этих атак sequence overlap</p></td><td>2024-06-24T06:12:19.800Z</td></tr><tr><td>LeonMskRu(Leon MskRu)</td><td><p>да уж. навертели (с)(r)™<br>
кстати Psiphon у меня вроде работает без проблем == не знаю чего они там тогда блочат</p>
<p>C:\ProgramData\chocolatey\bin\curl.exe --version<br>
curl 8.8.0 (x86_64-w64-mingw32) libcurl/8.8.0 LibreSSL/3.9.2 zlib/1.3.1 brotli/1.1.0 zstd/1.5.6 WinIDN libpsl/0.21.5 libssh2/1.11.0 nghttp2/1.62.1 ngtcp2/1.5.0 nghttp3/1.3.0<br>
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp ws wss<br>
Features: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM PSL SPNEGO SSL SSPI threadsafe UnixSockets zstd</p>
<p>M:_Microsoft_MSYS2\ucrt64\bin\curl.exe --version<br>
curl 8.8.0 (Windows) libcurl/8.8.0 OpenSSL/3.3.1 zlib/1.3.1 brotli/1.1.0 zstd/1.5.6 libidn2/2.3.7 libpsl/0.21.5 libssh2/1.11.0 nghttp2/1.61.0 nghttp3/1.4.0<br>
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp<br>
Features: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM PSL SPNEGO SSL SSPI threadsafe TLS-SRP UnixSockets zstd</p>
<p>C:\ProgramData\chocolatey\bin\curl.exe -6 --http3-only -v <a href="https://rutracker.org/myip">https://rutracker.org/myip</a></p>
<ul>
<li>ngtcp2_conn_handle_expiry returned error: ERR_HANDSHAKE_TIMEOUT</li>
<li>using HTTP/3<br>
&lt; HTTP/3 200</li>
</ul>
<p>M:_Microsoft_MSYS2\ucrt64\bin\curl.exe -6 --http3-only -v <a href="https://rutracker.org/myip">https://rutracker.org/myip</a></p>
<ul>
<li>QUIC connection has been shut down</li>
<li>QUIC connect to 2606:4700:3031::6815:2027 port 443 failed: Couldn’t connect to server</li>
<li>QUIC connection has been shut down</li>
<li>QUIC connect to 2606:4700:3034::ac43:b6c4 port 443 failed: Couldn’t connect to server</li>
<li>Failed to connect to <a href="http://rutracker.org">rutracker.org</a> port 443 after 60064 ms: Couldn’t connect to server</li>
<li>Closing connection<br>
curl: (7) QUIC connection has been shut down</li>
</ul></td><td>2024-06-24T11:55:54.588Z</td></tr><tr><td>bolvan</td><td><aside class="quote quote-modified" data-post="134" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/134">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Новое дополнение к split и disorder. Опция --dpi-desync-split-seqovl. 
Это достаточно сложная для понимания концепция, если не представляешь себе хорошо как работает tcp протокол. 
Если сказать по-простому, то это замешивание фейковых данных и реальных в разделяемые сегменты tcp. Замешивание идет через игру с sequence numbers таким образом, чтобы сервер воспринял лишь оригинал, а DPI было очень сложно разобраться где оригинал, а где мусор. 
Этот вариант может не требовать отдельных фейк пакетов,…
  </blockquote>
</aside>
</td><td>2024-06-24T14:06:43.487Z</td></tr><tr><td>hufrea</td><td><p>По поводу autohostlist.<br>
Что если изменить логику на такую:<br>
После срабатывания сразу же начать обход (заносить во временный список). Обход будет длиться недолго, секунд 10, после отключается. После этого времени, если произойдет обращение к сайту и обнаружится блокировка, то вносить домен в постоянный список.<br>
Так можно почти однозначно определить блокировку, исключив перегрузки и пр., а также быстрее открывать заблокированные сайт.</p></td><td>2024-07-16T13:22:50.201Z</td></tr><tr><td>bolvan</td><td><p>С обходом не понять есть ли блокировка или ее нет. А без обхода это носит вероятностный характер.<br>
То ли блокировка, то ли проблемы на сервере. Поэтому и используется такая модель, чтобы юзер долбился. Несколько попыток подряд проблема - считаем, что блокировка.<br>
Единственный вариант, когда можно сразу с 1 попытки что-то сказать уверенно, это http redirect. Зависание и RST могут легко и самим сервером генериться</p>
<p>Можно, конечно, пробовать через раз обход/без обхода, чтобы набрать какую-то статистику работает ли обход. Но во время набора статистики будет хаос для клиента. То пашет, то не пашет</p></td><td>2024-07-16T16:26:27.374Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="114" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>С обходом не понять есть ли блокировка или ее нет.</p>
</blockquote>
</aside>
<p>Обход включается после обнаружения блокировки. После нескольких секунд выключается (за это время может быть несколько успешных обращений к сайту)<br>
Если получается, что сначала недоступно, с обходом доступно, а без снова не работает, то это наверняка блокировка.<br>
А что если сайт упал? Пользователь ломится, а он все не открывается. И с существующуей логикой zapret должен добавлять сайт лишь в том случае, когда после обхода сайт открылся. А так можно сэкономить время.</p></td><td>2024-07-16T16:49:07.251Z</td></tr><tr><td>bolvan</td><td><p>Зачем собственно этот список нужен. Не проще ли без него вообще ?<br>
Он сделан, потому что обход сайты может ломать. Есть такие стратегии, которые ломают большое количество сайтов, и с ними без ограничителя плохо будет.<br>
Если сайт ломающийся, то после первого сбоя ваш алгоритм его еще сильнее прижмет и заставит не работать дольше.<br>
Кроме того, распознавание сломанных сайтов и блокировок различно, тк ответы разные получаются. Сломанный сайт распознать намного сложнее</p></td><td>2024-07-16T16:56:32.806Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="116" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если сайт ломающийся, то после первого сбоя ваш алгоритм его еще сильнее прижмет и заставит не работать дольше.</p>
</blockquote>
</aside>
<p>Имеется ввиду случай, когда произошел обычный сбой, включился обход и произошел еще один сбой, но уже из-за нестабильного метода? Вероятность этого достаточно маленькая. <s>Но даже если, это просто добавит одну лишнюю перезагрузку страницы.</s><br>
Ах да, поломка может быть сложно обнаруживаемая, тогда сайт будет сломан некоторое время, но все же, блокировка обнаружится (этот список может быть потом полезен для других методов), рабочий сайт и так не попадет в список.</p></td><td>2024-07-16T17:19:05.536Z</td></tr><tr><td>bolvan</td><td><p>Если сайт ломающийся, то вероятность этого равна вероятности произойти обычному сбою.<br>
У меня autolist гоняется с дебаг логом. Каждый день много такого :</p>
<p>16.07.2024 18:28:27 : <a href="http://widget.svk-native.ru">widget.svk-native.ru</a> : tcp retrans threshold reached<br>
16.07.2024 18:28:27 : <a href="http://widget.svk-native.ru">widget.svk-native.ru</a> : fail counter 1/3<br>
16.07.2024 22:00:10 : <a href="http://contile.services.mozilla.com">contile.services.mozilla.com</a> : tcp retrans threshold reached<br>
16.07.2024 22:00:10 : <a href="http://contile.services.mozilla.com">contile.services.mozilla.com</a> : fail counter 1/3<br>
16.07.2024 22:00:38 : <a href="http://versioncheck-bg.addons.mozilla.org">versioncheck-bg.addons.mozilla.org</a> : tcp retrans threshold reached<br>
16.07.2024 22:00:38 : <a href="http://versioncheck-bg.addons.mozilla.org">versioncheck-bg.addons.mozilla.org</a> : fail counter 1/3<br>
16.07.2024 22:36:53 : <a href="http://connectivitycheck.gstatic.com">connectivitycheck.gstatic.com</a> : tcp retrans threshold reached<br>
16.07.2024 22:36:53 : <a href="http://connectivitycheck.gstatic.com">connectivitycheck.gstatic.com</a> : fail counter 1/3</p>
<p>там и мейл ру, и яндекс попадают. все, вообщем, известные нагруженные сайты время от времени сбоят. сюда можно еще добавить плохой конект по сотовой сети.</p>
<p>Если стратегия сильно ломающая, то проблемы будут<br>
Даже если не сильно ломающая, и сломается какой-нибудь сбербанк, без которого никак<br>
Таймауты обычно броузеры сами разруливают. фокс 2 раза пытается, хроме не меньше 3.<br>
Но если там прилетит код 409 или SSL alert, то будет ругань и останов</p></td><td>2024-07-16T19:40:13.366Z</td></tr><tr><td>Elevator</td><td><p>Возможно задам глупый вопрос. Но поддерживает ли dvtws расшифровку quic clienthello и реассемблинг kyber?</p></td><td>2024-07-29T14:35:34.162Z</td></tr><tr><td>bolvan</td><td><p>Поддерживает</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">packet: id=0 len=1278 outbound IPv6=1 IPChecksum=1 TCPChecksum=1 UDPChecksum=0 IfIdx=5.0
IP6: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx =&gt; 2a00:1450:4010:c0e::5e proto=udp ttl=64 sport=59280 dport=443
UDP: C7 00 00 00 01 08 0F E0 FA E2 ED 14 26 CE 00 00 44 BC 1B EC 83 5E 40 C6 11 70 26 41 00 E4 E2 4F ... : ............&amp;...D....^@..p&amp;A...O ...
packet contains QUIC initial
packet contains partial TLS ClientHello
starting reassemble. now we have 1195/16384
DELAY desync until reasm is complete (#1)
packet: id=14 drop
packet: id=15 len=1278 outbound IPv6=1 IPChecksum=1 TCPChecksum=1 UDPChecksum=0 IfIdx=5.0
IP6: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx =&gt; 2a00:1450:4010:c0e::5e proto=udp ttl=64 sport=59280 dport=443
UDP: C3 00 00 00 01 08 0F E0 FA E2 ED 14 26 CE 00 00 44 BC 4B B1 F4 B0 CE 4B BA 57 AC 0C FE 4C B3 12 ... : ............&amp;...D.K....K.W...L.. ...
packet contains QUIC initial
reassemble : feeding data payload size=1195. now we have 2390/16384
packet contains full TLS ClientHello
DELAY desync until reasm is complete (#2)
REPLAYING delayed packet #1 offset 0
REPLAY IP6: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx =&gt; 2a00:1450:4010:c0e::5e proto=udp ttl=64 sport=59280 dport=443
UDP: C7 00 00 00 01 08 0F E0 FA E2 ED 14 26 CE 00 00 44 BC 1B EC 83 5E 40 C6 11 70 26 41 00 E4 E2 4F ... : ............&amp;...D....^@..p&amp;A...O ...
packet contains QUIC initial
packet contains full TLS ClientHello
hostname: update.googleapis.com
dpi desync src=[xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]:59280 dst=[2a00:1450:4010:c0e::5e]:443
sending fake request : 40 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... : @............................... ...
reinjecting original packet. len=1278 len_payload=1230
DROPPING delayed packet #1
REPLAYING delayed packet #2 offset 1230
REPLAY IP6: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx =&gt; 2a00:1450:4010:c0e::5e proto=udp ttl=64 sport=59280 dport=443
UDP: C3 00 00 00 01 08 0F E0 FA E2 ED 14 26 CE 00 00 44 BC 4B B1 F4 B0 CE 4B BA 57 AC 0C FE 4C B3 12 ... : ............&amp;...D.K....K.W...L.. ...
SENDING delayed packet #2 unmodified
reassemble session finished
packet: id=15 drop
</code></pre>
</details></td><td>2024-07-29T16:40:00.337Z</td></tr><tr><td>Elevator</td><td><p>Действительно, работает. Спасибо</p></td><td>2024-07-29T17:30:52.525Z</td></tr><tr><td>Max-16(Max)</td><td><p>Здравствуйте! Помогите настроить zapret на openwrt с nftables для обхода замедления ютуб. Установил его с помощью install_easy:</p>
<ul>
<li>firewall type : nftables</li>
<li>ipv6 support: No</li>
<li>MODE : nfqws</li>
<li>NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-split-pos=1” (остальные пустые)</li>
<li>http suppport: No</li>
<li>https support: Yes</li>
<li>quic:               No</li>
<li>filtering :         hostlist</li>
<li>flow offloading : donttouch</li>
</ul>
<p>Чтобы проверять отключил службу и запускаю вручную с  --debug=1 но в выводе ничего нет, и я так понимаю что у меня вся проблема в том что роутер с openwrt используется в качестве точки доступа и подключен одним проводом в LAN порт, а в nftables в таблице zapret  wanif и lanif - оба br-lan. По факту так и есть, и вход и выход в br-lan, но так не работает. Пробовал сносить все правила и добавлять все тоже самое но с lan - phy1-ap0(wifi) и wan eth0 - все равно в дебаге ничего нет. Подскажите, пожалуйста, что можно сделать?</p></td><td>2024-07-30T07:17:17.706Z</td></tr><tr><td>bolvan</td><td><p>Точка доступа - обычно это bridge. L2 соединение, а не L3.<br>
iptables/nftables для zapret работают на уровне L3. Они не могут работать с bridge.<br>
Чтобы они заработали, надо сделать routed конфигурацию (L3).<br>
Сделайте отдельный bridge для wifi, если несколько SSID, иначе не надо делать.<br>
Отдельный интерфейс для WAN. Настройте между ними маршрутизацию по IP.<br>
На шлюзе тоже придется прописать статический маршрут до подсети wifi.</p>
<p>Например<br>
inet - GW (192.168.1.1/24) - AP (192.168.1.2/24, 192.168.2.1/24)<br>
На GW прописываем статик роуте 192.168.2.0/24 со шлюзом AP 192.168.1.2<br>
Если надо , чтобы клиенты из 192.168.1.1/24 могли работать с wifi клиентами , можно использовать dhcp options с route</p>
<pre><code class="lang-auto">config dhcp 'lan'
  option interface 'lan'
  ....
  list dhcp_option '121,192.168.2.0/24,192.168.1.2'
  list dhcp_option '249,192.168.2.0/24,192.168.1.2'
</code></pre>
<p>Для упрощения или если на GW доступа нет можно использовать NAT. Но это не лучший варик.</p>
<p>Если надо ipv6 - с этим чуть посложнее. Зависит от того, как раздаются ip адреса - slaac или dhcpv6.<br>
Если slaac, то надо, чтобы оба роутера выдавали в сеть router advertisement. точка доступа - только на свою подсеть без default route. С odhcpd это может не получиться. Может потребоваться использовать radvd. windows клиенты это подхватят, а в linux потребуется на каждом клиенте делать еще sysctl : sysctl -w net.ipv6.conf.$IFACE.accept_ra_rt_info_max_plen=64</p>
<p>У меня именно такая конфигурация дома, так что если что - пишите в личку, вопрос это не по теме zapret</p>
<p>Или если  по уму - надо ставить запрет на сам GW. Если есть такая возможность. Тогда и выкрутасов не понадобится</p></td><td>2024-07-30T09:28:44.837Z</td></tr><tr><td>Max-16(Max)</td><td><p>Понял, спасибо, ipv6 не нужен, буду пробовать как то на l3 переделать.</p></td><td>2024-07-30T09:56:26.361Z</td></tr><tr><td>elain(dmitry)</td><td><p>Не получилось у меня установить запрет на flint ax1800. Выдает ошибку: * opkg_install_cmd: Cannot install package iptables-mod-nfqueue.<br>
could not install prerequisites<br>
Попробовал добавить несколько репозиториев, но в поиске все равно не появляется “iptables-mod-nfqueue.”</p></td><td>2024-07-31T17:04:46.722Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="elain" data-post="125" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/elain/48/6315_2.png" class="avatar"> elain:</div>
<blockquote>
<p>flint ax1800</p>
</blockquote>
</aside>
<p>В toh openwrt нет такого устройства.<br>
Чьи-то само-собиралки ? В самопалах часто отсутствует репозитории, модули ядра, так что неудивительно. К тому же явно какая-то старая версия, раз iptables используются.<br>
Где-то найденный файлик на форумах. Репозитории могли давно протухнуть.<br>
Или это вообще не openwrt, а мерлин какой-нибудь ?<br>
Или даже отсебятина от производителя пре-инсталлед ? Тогда там наверняка все протухло</p></td><td>2024-07-31T17:23:03.122Z</td></tr><tr><td>elain(dmitry)</td><td><p>Это не совсем чистый openwrt, да.<br>
Но может этот пакет<br>
с iptables тут такая ситуация. Не знаю может я просто не нашел правильный репозиторий где есть пакет  iptables-mod-nfqueue.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/8324ebbad81dd09a205d006b1727bb32f3bead21.png" data-download-href="https://ntc.party/uploads/default/8324ebbad81dd09a205d006b1727bb32f3bead21" title="image"><img src="zapret-обсуждение-726/8324ebbad81dd09a205d006b1727bb32f3bead21_2_690x426.png" alt="image" data-base62-sha1="iI9EmUdbYBJw8XeKRKoHKArjMAh" width="690" height="426" srcset="zapret-обсуждение-726/8324ebbad81dd09a205d006b1727bb32f3bead21_2_690x426.png, zapret-обсуждение-726/8324ebbad81dd09a205d006b1727bb32f3bead21_2_1035x639.png 1.5x, zapret-обсуждение-726/8324ebbad81dd09a205d006b1727bb32f3bead21.png 2x" data-dominant-color="17172B"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1273×787 45.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-08-01T01:24:05.796Z</td></tr><tr><td>bolvan</td><td><p>Накатывать левые репозитории на систему = почти наверняка ее портить<br>
Если даже каким-то чудом оно встанет, то оно никак не компенсирует отсутствие совместимых модулей ядра. Если их нет, это <em>все</em></p></td><td>2024-08-01T04:54:03.546Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="126" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В toh openwrt нет такого устройства.<br>
Чьи-то само-собиралки ?</p>
</blockquote>
</aside>
<p>Да это продукция китайской фирмы GL-inet. У них OpenWRT из коробки идёт.<br>
А коли ручки китайцев взялись, то на выходе получаем - Г.</p>
<p>У них явно magic у модулей ядра не совпадает с официальными релизными сборками OpenWRT.<br>
А в из офф репозитория нету способа собрать прошивку для устройств на чипах qcom ipq6000.</p>
<p>Вот так всё плохо. Проще поменять роутер.</p></td><td>2024-08-01T05:23:29.772Z</td></tr><tr><td>bolvan</td><td><p>Можно похимичить с tpws в ручном режиме без скриптов.<br>
Он ничего дополнительного не требует<br>
Для ютубе точно хватит</p></td><td>2024-08-01T05:43:24.077Z</td></tr><tr><td>boltor</td><td><p>blockcheck.sh поддерживает ли тест не заблокированных, но замедляемых доменов вроде googlevideo?<br>
Пытался на линуксе протестить <a href="http://rr2---sn-hgn7rn7r.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-hgn7rn7r.googlevideo.com</a>, говорит доступно без байпаса и на этом останавливается, но замедление вроде есть.</p>
<p><a href="http://rr2---sn-q4fl6nss.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-q4fl6nss.googlevideo.com</a> начал тестировать, но там почему-то с таймаута началось. Видимо поэтому и начал, т.к. первичную проверку доступности не прошёл.</p>
<p>iptables, IPv4, http N, остальное дефолт</p></td><td>2024-08-01T07:14:27.764Z</td></tr><tr><td>bolvan</td><td><p>Не поддерживает</p></td><td>2024-08-01T07:21:46.912Z</td></tr><tr><td>boltor</td><td><p>А можно ли принудительно заставить bloсkcheck.sh подбирать параметры для домена, если домен доступен?</p></td><td>2024-08-01T07:36:03.210Z</td></tr><tr><td>bolvan</td><td><p>Да, режим force при выборе quick/standard/force.<br>
Но это не поможет протестировать замедление</p></td><td>2024-08-01T08:04:42.764Z</td></tr><tr><td>Elevator</td><td><p>А нужно ли поднимать два процесса под tcp и udp отдельно или можно обойтись одним?</p></td><td>2024-08-01T20:18:33.838Z</td></tr><tr><td>bolvan</td><td><p>Зависит от стратегии. Если они сочетаемы - да, иначе - нет<br>
–dpi-desync=split2<br>
–dpi-desync=fake</p>
<p>сочесть нельзя без дополнительных параметров, ограничивающих fake на tcp. и это не должен быть TTL<br>
можно так сделать : winws --wf-tcp=443 --wf-udp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badsum<br>
на *nix перенаправить udp 443 и tcp 443 на одну очередь/divert port<br>
но этот пример каксается только замедления ютуба без обхода блокировок</p>
<p>в целом multi-instance это нормальное явление в zapret. так и задумано</p></td><td>2024-08-02T05:46:05.211Z</td></tr><tr><td>ValdikSS</td><td><p>23 posts were split to a new topic: <a href="/t/%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D0%B8-%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2-windows-7-x64/8510">Подписи драйверов Windows 7 x64</a></p></td><td>2024-08-02T15:42:15.643Z</td></tr><tr><td>Max-16(Max)</td><td><p>Приветствую! Подскажите, если я запускаю zapret с дебагом и вижу что он обрабатывает пакеты - значить обход должен работать? Я его поставил  ради Ютуба на ТВ, вижу что он вроде бы работает но поведение на ТВ  какое-то странное, то играет видео в любом качестве, то другое видео уже не играет. Но самое частое: включаешь видео и через ± две минуты останавливается и приходится перезапускать проигрывание возвращаясь назад и включать по новой. Иногда можно качество поменьше выбрать и заиграет снова, но чаще это не помогает. zapret поднят на роутере с опенврт. Опенврт был настроен точкой доступа(кабель с инетом включен в lan, lan в бридже с wifi, dhcp отключен). Добавил второй бридж с другим wifi и с другой адресацией и dhcp сервером, телек подключен к нему по wifi. Второй бридж ходит в инет через первый получается. Zapret пробовал и со split2 и disorder2, split-pos 1 и 2. Во всех сочетаниях вижу что запрет пакеты обрабатывает но Ютуб скорее не работает чем работает… Подскажите что можно покрутить или какие логи приложить чтобы прояснить ситуацию.</p></td><td>2024-08-02T16:58:21.062Z</td></tr><tr><td>bolvan</td><td><p>Тот факт, что пакеты поступают на nfqws, говорит лишь о том, что они туда поступают, и ни о чем больше.<br>
Если стратегия не работает, то и обход не будет работать.<br>
Необходимы curl тесты, которые приведены тут : <a href="https://github.com/bol-van/zapret/discussions/200" class="inline-onebox">Обход замедления youtube в России · bol-van/zapret · Discussion #200 · GitHub</a></p></td><td>2024-08-02T18:03:54.189Z</td></tr><tr><td>Max-16(Max)</td><td><p>А я думал что тспу везде один и тот же и детектит и замедляет Ютуб везде одинаково и стратегия должна работать что и у всех… Провел тесты curl’oм - замедления как будто нет вообще, файл скачивается всегда на около тарифной скорости. В лисе на ПК все ок, и с quic и без него, на андроид приложение тоже все ок. Проверял все  без обходов, а   вот на двух разных телевизорах lg с webos  приложение Ютуб так толком и не работает со вчерашнего дня(</p></td><td>2024-08-02T19:33:55.828Z</td></tr><tr><td>Max-16(Max)</td><td><p>Хотел отредактировать сообщение, а сделал дубликат</p></td><td>2024-08-02T19:45:25.674Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>собрал вот такого кадавра</p>
<pre><code class="lang-auto">winws --wf-l3=ipv4 --wf-tcp=80,443 --dpi-desync=fake,disorder2 --dpi-desync-ttl=9 --dpi-desync-fooling=datanoack --wf-udp=443
</code></pre>
<p>на первый взляд открывает тоже что и gbd и не ломает то что gbd не ломает(но надо больше тестить)<br>
из положительного теперь нет разницы h3 или h2 на тытрубе по таймингам в f12 и буферу в стате0дмина<br>
единственно напрягает (не помню как допустим месяцы назад было) что videoplayback?expire= в network f12 минимум половина красные (с gbd также) т.е. половину таки режут? или по 2+ разу надо фрагменты запрашивать чтоб норм.скорость была…</p>
<p>но и другие вопросы остались<br>
-как нибудь без указаний стапицот портов автодетект в tcp можно сделать? для holavpn. или точно также как в gbd сначала найти а потом перечислить? а ограниченье какое?</p>
<ul>
<li></li>
</ul>
<details>
<summary>
Спойлер</summary>
<p>как нибудь кроме остановки службы\процесса указать хосты к каким ненужно применять пробивку или в целом как замодить ключи, чтоб к прововскому кабинету попасть. а он на 5-6 хопе</p>
</details>
<p>поправка по прову. теперь (в отличьи от gbd) на удивление открывает без ошибки серта кабинет. но просто ОООоочень долго</p></td><td>2024-08-03T01:25:44.012Z</td></tr><tr><td>bolvan</td><td><p>Нельзя сочетать quic и TTL ! Если это и работает, то вам повезло, что роутер на 9 хопе не шлет icmp expired in transit</p>
<aside class="quote no-group" data-username="Quqas" data-post="143" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>-как нибудь без указаний стапицот портов автодетект в tcp можно сделать? для holavpn. или точно также как в gbd сначала найти а потом перечислить? а ограниченье какое?</p>
</blockquote>
</aside>
<p>Можно запустить весь диапазон 1-65535, но редирект трафика - дорогое удовольствие<br>
Может начать жраться CPU при upload-ах.<br>
Лучше зафиксировать порты</p></td><td>2024-08-03T02:57:19.651Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ок<br>
значит ещё и везение…<br>
просто показалось сранным чтоб больше одного процесса запускать</p>
<p>а какой сайт из лоченых знаешь чтоб там точно quic работал?</p>
<p>ну чтоб если и делать отдельно так с минимумом ключей</p></td><td>2024-08-03T09:54:01.057Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>понял что вчера я плохо тестил</p>
<p>quic внезависимости от ttl бажит на тытрубе</p>
<p>если fake выставлять он именно видеофрагменты в h1.1 грузит вместо h3 (поэтому и буфер хороший)</p>
<p>а все остальные split\disorder h3 не ломают но и не ускоряют <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p></td><td>2024-08-03T11:50:59.310Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>H3 это udp, а split и disorder не работают на udp пакеты. Посмотрите в readme список поддерживаемых стратегий для каждого протокола</p></td><td>2024-08-03T12:34:12.749Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>кроме fake ничего там не вижу</p>
<p>а fake ломает сам h3</p>
<p>покрайней мере на тытрубе = замкнутый круг</p></td><td>2024-08-03T12:53:17.480Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ещё ipfrag2 нашёл<br>
но тоже самое<br>
udp пропадает для видео<br>
лишь какието картинки и незначительная петушь по h3 идёт<br>
т.е. не на 100% отрубается. но для видео напрочь нехочет</p></td><td>2024-08-03T13:15:25.576Z</td></tr><tr><td>bolvan</td><td><p>fake вряд ли может ломать куик<br>
если он правильно работает<br>
всякие кинетики как раз и ломают куик при попытке его фейкнуть</p>
<p>но конечно может дпи плохо среагировать на фейк и начать в середине сеанса дропать<br>
тогда будут подвисания и фоллбэк на тцп</p>
<p>ипфраг режется гуглом он на ютубе не работает. но работат на клоудфларе. если конечно ваш домашний роутео или пров с нат фрагменты не обьединят</p>
<p>тест обхода куик на рутракер ннм кинозал они все на клауде</p></td><td>2024-08-04T05:30:31.495Z</td></tr><tr><td>_rv</td><td><p>Ростелеком, такая же история - рутрекер, ннм и проч открываются, но видео контент ютуба грузится http/1.1.  --dpi-desync=fake --dpi-desync-repeats=6</p></td><td>2024-08-04T08:51:47.254Z</td></tr><tr><td>ech0brav0</td><td><p>Не может ли быть такого, что РКН тупо собрал подсети cdn гугла и режет трафик именно по принадлежности ip адреса к подсети</p></td><td>2024-08-04T09:55:31.861Z</td></tr><tr><td>anon60595749</td><td><p>Да, такое подозрение есть:</p><aside class="quote quote-modified" data-post="5" data-topic="8240">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/8240/5">Обход замедления YouTube в России</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    <a name="p-29645-h-1" class="anchor" href="#p-29645-h-1"></a>Сборник самых популярных вопросов
<a name="p-29645-h-2" class="anchor" href="#p-29645-h-2"></a><img width="20" height="20" src="https://ntc.party/images/emoji/twitter/grey_question.png?v=12" title="grey_question" alt="grey_question" class="emoji"> Как удалить программу?


Закройте окно программы. Это всё. Если программа не запущена, она не работает. Программа никуда не устанавливается, не меняет настройки системы ни скрыто, ни явно (даже опция DNS-перенаправления). 


Запустите service_remove.cmd от имени администратора. Если вы устанавливали программу как службу (сервис), это остановит и удалит её, а также удалит службу драйвера WinDivert. 


Драйвер программы WinDivert.sys / WinDivert64.…
  </blockquote>
</aside>
</td><td>2024-08-04T10:06:51.704Z</td></tr><tr><td>litev</td><td><p>Подскажите как исправить проблему.<br>
Запускаю блокчек, но на все тесты пишет:</p>
<blockquote>
<p>seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp</p>
</blockquote>
<p>Прошивка openwrt, из последних релизов.<br>
Соответственно, итогом блокчека не находит стратегии обхода, хотя GoodByeDPI у меня отлично работает.</p></td><td>2024-08-04T10:49:30.102Z</td></tr><tr><td>bolvan</td><td><p>если у вас новый полноценный опенврт, а не что то запущеное в контейнере, то секкомп ядро поддерживает<br>
но даже если нет, то это просто предупреждение. на функционал не влияет<br>
причина неработы в другом</p></td><td>2024-08-04T12:27:07.772Z</td></tr><tr><td>bolvan</td><td><p>он мог бы, но тогда бы он прирезал их остальные сервисы<br>
там ип скачут. выделить отдельно туб  непросто</p></td><td>2024-08-04T12:29:18.732Z</td></tr><tr><td>litev</td><td><p>Оу, не полноценный опенврт. Сборка на базе NSS и в сонфиге билда seccomp отключен.<br>
Насколько это критично для работы запрета и блокчека?<br>
Так же, роутер подключен по WAN порту к другому роутеру, который уже подключен к интернету, так можно?<br>
Если всё ок, будет ли работать если роутер с openwrt будет переведен в режим моста?</p></td><td>2024-08-04T13:16:26.239Z</td></tr><tr><td>Elevator</td><td><p>А какой quic initial отправляется по умолчанию? iana?</p>
<p>И почему для quic достаточно указать fake без fooling?</p></td><td>2024-08-04T13:45:27.325Z</td></tr><tr><td>ech0brav0</td><td><p>Вполне возможно, что NAT на втором роутере (который подключен к провайдеру) может ломать дурение</p></td><td>2024-08-04T14:23:38.660Z</td></tr><tr><td>litev</td><td><p>GoodByeDPI работает нормально. Или NAT может ломать запрет, но не трогать конечные устройства?</p></td><td>2024-08-04T14:27:31.984Z</td></tr><tr><td>Xunlei</td><td><p>Типичный NAT смотрит только порты в заголовке. Ломать может высокоуровневый корпоративный брандмауэр.</p></td><td>2024-08-04T14:28:27.625Z</td></tr><tr><td>litev</td><td><p>Идеально было бы настроить zapret на основном роутере, а openwrt переключить в свитч, но там rt-n56u с padavan на борту и я тупо не понимаю, что там и как настраивать, инструкция под openwrt проще. И поменять их не могу, расположение и задачи у них разные</p></td><td>2024-08-04T14:31:59.707Z</td></tr><tr><td>bolvan</td><td><p>отправляется quic short<br>
0x40 0x00 0x00 …</p></td><td>2024-08-04T18:28:20.009Z</td></tr><tr><td>bolvan</td><td><p>нат разные бывают<br>
нат от вируалок ломает почти все<br>
линуховый нат ломает некоторые методы<br>
еще роутеры кое что могут ломать. бадсум не пропускать</p></td><td>2024-08-04T18:30:33.683Z</td></tr><tr><td>bolvan</td><td><p>недавно узнал что с модулем ядра  br_netfilter можно работать с ип нф таблес на мостах<br>
возможно и запрет пойдет без дополнительного л3 роутинга</p></td><td>2024-08-04T18:32:47.043Z</td></tr><tr><td>litev</td><td><p>Доступен пакет kmod-br-netfilter. Это оно? Без дополнительного роутинга - это просто переткнуть основной роутер в LAN и отключить DHCP?<br>
Скорее всего проблема в моих нулевых знаниях OpenWrt и есть просто способ объединить сети двух роутеров через WAN. Мне всего-то нужен доступ ко всем устройствам в обоих сетях</p></td><td>2024-08-04T18:40:26.872Z</td></tr><tr><td>bolvan</td><td><p>да это оно. обьдинить через лан<br>
дхцп откл на опенврт<br>
на опенврт задать статик ип вне диапазона дхцп чтобы доступ не потерять без другого рутера</p></td><td>2024-08-05T03:49:00.595Z</td></tr><tr><td>litev</td><td><p>Збс, спасибо. Будем попробовать.<br>
Получилось настроить сам запрет и всё отлично, но есть нюанс.<br>
В хроме ютуб работает богически, протогол h3, изредка проглядывает h1.1<br>
Огнелис мертв совсем, там h2 и h1.1 попеременно и ничего не грузит, пакеты теряются с ns_error_dom_bad_url<br>
Телефон грузит хорошо, но с периодическими затупами.<br>
Куда копать?<br>
Настройки:</p>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=badsum”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=fake --dpi-desync-ttl=3<br>
NFQWS_OPT_DESYNC_HTTPS=”–dpi-desync=split2 --dpi-desync-split-pos=1"<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fooling=md5sig”</p>
</blockquote>
<p>Провайдер прихвостень ЭР-телеком, dnscrypt обязательно<br>
П.С. Спасибо за советы и саму прогу. С неё, конечно, ёжика родишь, пока настраиваешь, но работает магистрально.<br>
П.П.С. В блокчек можно сразу несколько доменов закидывать? Если нет - функция нужная, ибо долго и проще штук 10 разных кинуть и забыть на пару часов, а потом текстовик изучить.</p></td><td>2024-08-05T04:15:30.992Z</td></tr><tr><td>bolvan</td><td><p>домены можно вводить через пробел в блокчеке</p>
<p>копать в исследование что происходит<br>
ф12 и вирешарк + знания и голова<br>
и эксперименты со стратегиями</p>
<p>таблетки волшебной нет на все случаи</p></td><td>2024-08-05T14:17:26.132Z</td></tr><tr><td>kobzev-dmitriy(Kobzev Dmitriy)</td><td><p>Я например нашел настройки под GDI, можно ли как-то эти опции конвертировать в nfqs? Хотел конечно через blockcheck, но он у меня не работает под keenetic</p></td><td>2024-08-05T14:47:26.516Z</td></tr><tr><td>bolvan</td><td><p>можно но зачем ?<br>
с компа прогнать блокчек<br>
для роутера уменьшить ттл на 1 если он есть</p></td><td>2024-08-05T17:03:20.252Z</td></tr><tr><td>disappointed</td><td><p>Нашёл еденичные хосты GGC ютуба, к которым зависает TLS даже без SNI, пробивается только режимом syndata. Подскажите насколько он проблемный в режиме hostlist? Получается он поправляет все SYN-ы на 443 порт. На первый вгляд всё работает хорошо, но даже wireshark из-за этого пейлоада в конце, не может нормально отобразить флаги tcp.<br>
UPD: К сожалению нашёл сайт который ломается этой стратегией.</p></td><td>2024-08-06T15:33:18.570Z</td></tr><tr><td>bolvan</td><td><p>синдата не работает с хостлистами</p></td><td>2024-08-06T18:28:26.026Z</td></tr><tr><td>disappointed</td><td><p>Я неверно сформулировал вопрос, я понимаю что не работает, имеется ввиду синдата как добавление к режиму хостилист. Но я уже понял, что вполне ломает некоторые сервисы. Нашёл сайт, нужный по работе, который даже при добавлении одного 0x00 в конец SYN, перестаёт реагировать на коннект.</p></td><td>2024-08-06T18:43:40.474Z</td></tr><tr><td>bolvan</td><td><p>фильтр по ип или ипсет<br>
других вариантов не вижу</p></td><td>2024-08-07T04:12:35.598Z</td></tr><tr><td>electrifying</td><td><p>Хотелось бы узнать, а почему автор не советует использовать zapret на роутерах keenetic если он там работает и многие ставят? Или это относится только к определенным старым моделям устройств? Ютуб обходится, заблокированные сайты тоже, все дело в том что кинетик каким-то образом нарушает обход если включен квик?</p></td><td>2024-08-07T06:12:02.510Z</td></tr><tr><td>bolvan</td><td><p>там есть ряд проблем<br>
используйте если хотите<br>
автор лишь открещивается от любой поддержки этих устройств<br>
все сами</p></td><td>2024-08-07T11:12:41.375Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Вопрос или идея может быть уже обсуждалась, но все же спрошу снова - возможна ли будующая реализация программы с применением разных правил для разных доменов? Дело в том, что провренные методы обхода не всегда работают для всех сайтов и иногда попадается варианты, где требуется более тонкая настройка для определенного домена, которая ломает или не срабатывает на остальных. Что-то из рода такого:<br>
–dpi-desync=fake --domain-list=domainlist1.txt для <a href="http://domain1.com" rel="noopener nofollow ugc">domain1.com</a><br>
–dpi-desync-disorder2 --domain-list=domainlist2.txt для domain2.txt<br>
Все это для процесса nfwqs под linux’ом. Да и все конечно в одной строке, при одном запущенном zapret’е формат привел чисто как идею.<br>
Или это можно реализовать через запуск нескольких процессов с разной очередью и правилами файервола? Сейчас приходится часть заворачивать в 6to4 туннель, для тех, которые имеют поддержку 6го протокола и АААА записи в ДНС, а 4ые в впн, по причинам разных методов обхода, которые не всегда четко срабатывают. И да, понимаю, что с автохостлистом сложности будут, но возможно тогда просто он будет отключен в новом режиме.</p></td><td>2024-08-10T16:46:58.593Z</td></tr><tr><td>bolvan</td><td><p>планирую это в ближаший месяц-два<br>
сейчас только через подбор стоатегии класса общий знаменатель</p></td><td>2024-08-10T17:44:27.002Z</td></tr><tr><td>BOLNICHKA39</td><td><p>Ко мне в конце недели придет роутер banana pi r4, сейчас самый лучший вариант для обхода dpi это zapret от болвана?</p></td><td>2024-08-14T15:22:48.306Z</td></tr><tr><td>bolvan</td><td><p>если интересует автономный обход, кроме запрета есть еще byedpi. и его можно прозрачно завернуть через redsocks или tun2socks<br>
а других аналогичных решений под линух я и не знаю</p></td><td>2024-08-14T16:19:18.698Z</td></tr><tr><td>yatolkosprosit</td><td><p>Если я верно понял, программу можно установить запуская последовательно скрипты, а можно скомпиллировать из исходников. И я слышал, что эти варианты не равнозначны. А в чем разница?</p></td><td>2024-08-14T20:58:05.922Z</td></tr><tr><td>bolvan</td><td><p>есть готовые бинарики. собирать их на нетрадиционном линухе было бы мучением</p>
<p>есть скрипты установки и запуска. это один путь.<br>
но можно их не использовать, а сделать все сасому. запускать бинарики и своими правилами редиректить трафик. это другой путь</p></td><td>2024-08-15T03:55:03.176Z</td></tr><tr><td>yatolkosprosit</td><td><p>А правила для Iptables нужны когда используется tpws или для nfqws они нужны тоже?</p></td><td>2024-08-15T04:14:21.714Z</td></tr><tr><td>bolvan</td><td><p>нужны для всего, кроме tpws socks mode</p></td><td>2024-08-15T06:00:36.851Z</td></tr><tr><td>yatolkosprosit</td><td><p>Если я возьму бинарик nfqws из x86_64, помещу его в произвольную директорию, добавлю в нее текстовый файл .txt со списком нужных доменов для опции --hostlist и запущу nfqws из командной строки, то этого будет достаточно? (+ правила Iptables + опции для “дурения”).</p>
<p>Опция --hostlist только с nfqws работает?</p></td><td>2024-08-15T18:51:01.411Z</td></tr><tr><td>gepron1x(Георгий)</td><td><p>Да, достаточно запустить nfqws или tpws и настроить ip/nftables, чтобы тот направлял траффик в запрет</p>
<p>Хостлист есть и для tpws, чекай readme</p></td><td>2024-08-15T22:11:02.156Z</td></tr><tr><td>SuperUser</td><td><p>Ув. <a class="mention" href="/u/bolvan">@bolvan</a>, в утилите tpws есть возможность применять пользовательский список типа ‘исключения’ (‘hostlist-exclude=’).<br>
Есть ли возможность добавить опцию к этим спискам - не просто не применять ‘дурение’, а делать перенаправление на конкретный интерфейс?<br>
Поясню, насколько могу судить, алгоритмы противодействия dpi полезны пока домен не попадет в блокировку по ip, поэтому бесполезно будет просто отправлять запрос из списка ‘исключений’ на произвол судьбы, а лучше отправить его в тунель vpn.<br>
Да можно фильтровать не посредственно то что должно попасть в обработку к tpws, но предложенный мной вариант был бы полезен в некоторых ситуациях (например, когда проще настраивать списки по ip range - iptables перенаправят заросы по нему или в vpn тунель или в прокси - tpws, чем по конкретным ip адресам и может возникнуть ситуация, что какой то домен из ip range должен пойти в тунель vpn, а какой то домен, из того же ip range - лучше через ваш прокси).<br>
Да это не функционал вашей утилиты, не для этого она предназначена, но это сильно упростит сосуществование с различными способами блокировки.</p></td><td>2024-08-16T12:05:42.230Z</td></tr><tr><td>bolvan</td><td><p>если что-то блочится по ip,  с ним и надо разбираться по ip. а не по домену<br>
заводим ипсет, по нему делаем марк, по марку выбор таблицы маршрутизации<br>
и не нужны тут никакие  юзер программы<br>
все умеет ядро</p>
<p>а на уровне юзер прог итерфейсы не выбираются<br>
xray умеет снифать хост из запроса и перенаправлять запрос на другой прокси<br>
если сделать на локалхосте прокси, настроить  на его uid правило на другую таблицу маршрутизации, то можно достигнуть желаемого</p></td><td>2024-08-16T17:12:47.215Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Для quic у меня работает (winws):</p>
<pre><code class="lang-auto">--wf-udp=443 --dpi-desync=fake
</code></pre>
<p><a class="mention" href="/u/bolvan">@bolvan</a> какая стратегия параллельно к этому будет самой оптимальной для https?</p>
<p>// для всех заблокированных (<em>использую сейчас</em>)</p>
<pre><code class="lang-auto">--dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig
</code></pre>
<p>// либо для всех</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --dpi-desync=syndata,disorder2 --dpi-desync-fake-syndata=tls_clienthello_iana_org.bin
</code></pre>
<p>// либо syndata для всех без YT и disorder2 отдельно для YT</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --dpi-desync=syndata --dpi-desync-fake-syndata=tls_clienthello_iana_org.bin
--wf-tcp=80,443 --dpi-desync=disorder2
</code></pre>
<p>blockcheck нашел много рабочих стратегий, внутренний перфекционист не дает покоя. <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-08-17T06:45:14.267Z</td></tr><tr><td>sashalomaetdpi</td><td><p>ТСПУ обходится обычным fake с ттл до последнего провайдерского хопа (в данном случае имеются в виду все российские провайдеры на пути до последнего бордера магистрала). Если ттл не угадать, или он слишком длинный (например, криво настроенный cgnat), ТСПУ 100% ломает badseq. Т.е. --dpi-desync=fake --dpi-desync-fooling=badseq в большинстве случаев должен ломать тспу, а также дпи от vasexperts. Но может сломать и некоторые сайты не из списка, не все любят badseq. Замедление обходит split2, желательно поменять --dpi-desync-split-pos=1, т.к. с 2 по дефолту ютуб перестает выдавать список GGC кэшей и вы привязаны к провайдерским (причина этого пока не установлена, но выявлена на 3 провайдерах) Либо использовать disorder2, но он ломает некоторые не заблокированные сайты. В плане замедления ничего в тспу не менялось со времен замедления твиттера, как split2 это все обходил так и обходит. Если по каким-то причинам это не работает, нужно проверить адекватность выдоваемых вам днс ответов и что вы не находитель за каким-нибудь злым натом (типа мобильный интернет), и нужные вам сайты не забанены по ип вашим провайдером. Если провайдер вам гадит в трафик до такой степени, что вам приходится использовать какие-то лестницы из обхода блокировок - проще сменить провайдера, это никогда не будет работать хорошо без жестких списков исключений\включений.<br>
TLDR<br>
Если у вас тспу или скат, нужно начать с --dpi-desync=fake,disorder2 --dpi-desync-fooling=badseq и проверить ютуб, твиттер, рутрекер. Открылось, скорость норм? Убираем disorder2, добавляем split2 --dpi-desync-split-pos=1. Открылось, скорость норм? Убираем --dpi-desync-fooling=badseq, добавляем --dpi-desync-ttl=n --dpi-desync-fooling=md5sig, вместо n подбираем ттл, 4-5 обычно достаточно.<br>
Я имел дело с тспу, с тройным тспу, с тспу+скат, из провайдеров ТТК, РТК, их клиенты. Вы себе этими конструкциями только хуже делаете, тспу обходится крайне просто.</p></td><td>2024-08-17T09:13:41.502Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Предполагаю, что вы отвечаете мне. У меня и обходится все просто, fake и md5sig для нужных сайтов, disorder2 для YT, и ttl подбирать не требуется.</p>
<p>Но почитал readme, там есть syndata, которая работает на этапе установки соединения и обходит у меня блокировку всех нужных сайтов кроме YT. Т.е. не нужно трогать/фейкать пакеты данных, все работает до их отправки. Разве это не лучший вариант? Плюс disorder2 или split2 пустить отдельно для YT.</p></td><td>2024-08-17T13:25:41.070Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>syndata ломает сайты на DDOS guard точно, мб какие-то еще (у меня еще банковске приложение одно не прогружается с syndata). Как пример, попробуйте с syndata зайти на <a href="http://ixbt.com" rel="noopener nofollow ugc">ixbt.com</a>, он будет очень долго прогружать из-за анти-ддос защиты. А ограничить syndata по определенным доменам нельзя, т.к. она срабатывает раньше (в readme обозначено как 0 стадия).<br>
На YT подкрутили фильтр ТСПУ пару дней назад буквально, там теперь просто fake лично у меня не срабатывает. Нужно еще например split2 докинуть.</p></td><td>2024-08-17T14:18:42.196Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="wigeance" data-post="193" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>ограничить syndata по определенных доменам нельзя</p>
</blockquote>
</aside>
<p>Вот это смущает, конечно.</p></td><td>2024-08-17T14:32:09.317Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="sashalomaetdpi" data-post="191" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/b5e925/48.png" class="avatar"> sashalomaetdpi:</div>
<blockquote>
<p>тспу обходится крайне просто.</p>
</blockquote>
</aside>
<p>Только вот открывает все равно не все сайты, даже те что по айпи не забанены как,например, rutor.info(работает только по http) или torrentgalaxy.to. С остальными проблем нет, но все же будто чего-то не хватает. Хотя рутор в инкогнито открывает, а вот torrentgalaxy нет</p></td><td>2024-08-17T15:01:48.967Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>может быть только порт 443 забанен на этом ip, поэтому по http все работает, а по https нет.<br>
Проверьте curl с резрешенный доменом на адрес заблокированного сайта который по https не открывается, но работает по http</p>
<blockquote>
<p>curl -v <a href="https://ya.ru" rel="noopener nofollow ugc">https://ya.ru</a> --connect-to ::0.0.0.0 (ip заблоченного сайта)</p>
</blockquote></td><td>2024-08-17T15:21:53.706Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Хотел попробовать обойтись без fake, не нашлось одинаковой стратегии для YT и остальных блокированных <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"></p>
<p>Для блокированных работает:</p>
<pre><code class="lang-auto">--dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sni
</code></pre>
<p>Для YT:</p>
<pre><code class="lang-auto">--dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2
</code></pre>
<p>А запустить два winws с <code>--wf-tcp=443</code> и разными стратегиями для разных блэклистов, естественно, нельзя.</p></td><td>2024-08-17T16:07:15.792Z</td></tr><tr><td>SuperUser</td><td><p>Не удалось настроить работу youtube на тв самсунг (старый, 2015г).<br>
Все устройства в сети работают (Windows, iOS, Android, Android TV и тп),  но на тв самсунг - приложение открывается, доступный контент отображается корректно, но если начать воспроизводить - темный экран и бесконечная надпись ‘загрузка’.<br>
При этом, если сделать перенаправление домена <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> в vpn тунель (остальные домены ютуба через zapret) - на тв начинает проигрывать ролики.<br>
Т.е. проблема только с одним доменом и только со старыми тв самсунг.</p>
<p>Кому то удалось заставить работать на тв?<br>
Проверял через прокси twps.</p></td><td>2024-08-17T16:16:28.253Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Запустите блокчек на заблокированный ресурс с параметром force и перебирайте все стратегии которые он выдаст, пока не найдете ту, которая и YT и сайты разблокирует</p></td><td>2024-08-17T16:19:45.224Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Так и делал. Без fake, т.е. только disorder2/split2, общей стратегии не нашлось.</p></td><td>2024-08-17T16:38:41.824Z</td></tr><tr><td>electrifying</td><td><p>Похоже, так оно и есть. Есть способ это обойти? У этого сайта нет http</p>
<blockquote>
<p>curl -v <a href="https://torrentgalaxy.to" rel="noopener nofollow ugc">https://torrentgalaxy.to</a> --connect-to ::176.97.124.208</p>
<ul>
<li>Connecting to hostname: 176.97.124.208</li>
<li>Trying 176.97.124.208:443…</li>
<li>connect to 176.97.124.208 port 443 from 0.0.0.0 port 49600 failed: Timed out</li>
<li>Failed to connect to 176.97.124.208 port 443 after 21055 ms: Couldn’t connect to server</li>
<li>Closing connection<br>
curl: (28) Failed to connect to 176.97.124.208 port 443 after 21055 ms: Couldn’t connect to server</li>
</ul>
</blockquote>
<p>А вот сайт у которого только http, но он почему-то в основном профиле не открывается только через инкогнито</p>
<blockquote>
<p>curl -v <a href="http://rutor.info" rel="noopener nofollow ugc">http://rutor.info</a> --connect-to ::193.46.255.29</p>
<ul>
<li>Connecting to hostname: 193.46.255.29</li>
<li>Trying 193.46.255.29:80…</li>
<li>Connected to 193.46.255.29 (193.46.255.29) port 80<br>
GET / HTTP/1.1<br>
Host: rutor.info<br>
User-Agent: curl/8.8.0<br>
Accept: <em>/</em></li>
<li>Request completely sent off</li>
</ul>
</blockquote></td><td>2024-08-17T16:45:35.182Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Вам надо вызывать curl с НЕЗАБЛОКИРОВАННЫМ доменом на ip адресс заблокированного домена:</p>
<blockquote>
<p>~ # curl -v <a href="https://ya.ru" rel="noopener nofollow ugc">https://ya.ru</a> --connect-to ::176.97.124.208 --max-time 5</p>
<ul>
<li>Connection timed out after 5001 milliseconds<br>
curl: (28) Connection timed out after 5001 milliseconds</li>
</ul>
</blockquote>
<blockquote>
<p>~ # curl -v <a href="https://ya.ru" rel="noopener nofollow ugc">https://ya.ru</a> --connect-to ::193.46.255.29</p>
<ul>
<li>TLSv1.3 (OUT), TLS handshake, Client hello (1):</li>
<li>TLSv1.3 (IN), TLS handshake, Server hello (2):</li>
<li>TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):</li>
<li>TLSv1.3 (IN), TLS handshake, Certificate (11):</li>
<li>TLSv1.3 (IN), TLS handshake, CERT verify (15):</li>
<li>TLSv1.3 (IN), TLS handshake, Finished (20):</li>
<li>TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):</li>
<li>TLSv1.3 (OUT), TLS handshake, Finished (20):</li>
<li>SSL: no alternative certificate subject name matches target host name ‘<a href="http://ya.ru" rel="noopener nofollow ugc">ya.ru</a>’</li>
<li>TLSv1.3 (OUT), TLS alert, close notify (256):<br>
curl: (60) SSL: no alternative certificate subject name matches target host name ‘<a href="http://ya.ru" rel="noopener nofollow ugc">ya.ru</a>’<br>
More details here: <a href="https://curl.se/docs/sslcerts.html" class="inline-onebox" rel="noopener nofollow ugc">curl - SSL CA Certificates</a></li>
</ul>
</blockquote>
<p>Лично у меня torrentgalaxy заблокирован по ip, даже не пингуется. А rutor работает по http через zapret.</p></td><td>2024-08-17T16:56:01.154Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>У вас всегда есть стратегия:</p>
<blockquote>
<p>–dpi-desync=split2 --dpi-desync-split-seqovl=336 --dpi-desync-split-seqovl-pattern=/…/tls_clienthello_iana_org.bin</p>
</blockquote>
<p>и еще стратегии с syndata и wssize.</p></td><td>2024-08-17T16:58:19.604Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="wigeance" data-post="202" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Лично у меня torrentgalaxy заблокирован по ip, даже не пингуется.</p>
</blockquote>
</aside>
<p>Понял, я айпишник сайта внес в zapret-hosts-user-ipban но что-то все равно доступа нет.Этого недостаточно? Хотя на гитхабе запрета написано, что это не поможет если блок по ip, хотя файл для ipban есть</p></td><td>2024-08-17T18:04:04.779Z</td></tr><tr><td>bolvan</td><td><p>ipban это только хелпер для ведения ипсета<br>
он ресолвит сам домены и пропускает ипшники и подсети как есть<br>
но полиси роутинг на впн или редсокс на прокси это за вами</p></td><td>2024-08-17T18:14:16.413Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Добрый день! Подскажите, пожалуйста, что не так?<br>
Запускаю с параметром <code>--hostlist-auto=autohostlist.txt</code></p>
<blockquote>
<p>winws.exe --wf-tcp=80,443 --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto=autohostlist.txt<br>
В консоли сообщения<br>
Loading hostlist autohostlist.txt<br>
loading plain text list<br>
Loaded 0 hosts from autohostlist.txt<br>
windivert initialized. capture is started.</p>
</blockquote>
<p>Недоступные сайты не грузятся, файл autohostlist.txt создается, но остается пустым.<br>
Убираю <code>--hostlist-auto=autohostlist.txt</code> - все недоступные сайты прекрасно открываются</p></td><td>2024-08-18T12:27:54.591Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Прочитайте как работает autohostlist в readme. У вас в нем сейчас 0 сайтов. Чтобы они там появились надо или руками их туда записать или открывать заблокированные сайты несколько раз подряд за короткий промежуток времени.</p></td><td>2024-08-18T13:41:35.208Z</td></tr><tr><td>andmail</td><td><p>Пытаюсь запустить скрипт <code>blockcheck.sh</code> под Windows 10:<br>
Используя <a href="https://learn.microsoft.com/ru-ru/windows/wsl/install" rel="noopener nofollow ugc">WSL</a> установил <code>Ubuntu</code> и <code>Debian</code><br>
Клонировал репозиторий: <code>git clone https://github.com/bol-van/zapret</code><br>
Выполнил <code>make -C "/home/andmail/zapret"</code></p>
<details>
<summary>
Получил:</summary>
<p>make: Entering directory ‘/home/andmail/zapret’<br>
make[1]: Entering directory ‘/home/andmail/zapret/nfq’<br>
rm -f nfqws dvtws winws.exe<br>
make[1]: Leaving directory ‘/home/andmail/zapret/nfq’<br>
make[1]: Entering directory ‘/home/andmail/zapret/tpws’<br>
rm -f tpws *.o<br>
make[1]: Leaving directory ‘/home/andmail/zapret/tpws’<br>
make[1]: Entering directory ‘/home/andmail/zapret/ip2net’<br>
rm -f ip2net *.o<br>
make[1]: Leaving directory ‘/home/andmail/zapret/ip2net’<br>
make[1]: Entering directory ‘/home/andmail/zapret/mdig’<br>
rm -f mdig *.o<br>
make[1]: Leaving directory ‘/home/andmail/zapret/mdig’<br>
make[1]: Entering directory ‘/home/andmail/zapret/nfq’<br>
cc -s -std=gnu99 -Wno-logical-op-parentheses -O3 -o nfqws <em>.c crypto/</em>.c  -lnetfilter_queue -lnfnetlink -lz<br>
/bin/sh: 1: cc: not found<br>
make[1]: *** [Makefile:14: nfqws] Error 127<br>
make[1]: Leaving directory ‘/home/andmail/zapret/nfq’<br>
make: *** [Makefile:6: all] Error 2<br>
make: Leaving directory ‘/home/andmail/zapret’</p>
</details>
<p>Выполнил <code>./install_bin.sh</code></p>
<details>
<summary>
Получил:</summary>
<p>/home/andmail/zapret/binaries/my/ip2net is absent<br>
my is NOT OK<br>
x86_64 is OK<br>
installing binaries …<br>
linking : …/binaries/x86_64/ip2net =&gt; /home/andmail/zapret/ip2net<br>
linking : …/binaries/x86_64/mdig =&gt; /home/andmail/zapret/mdig<br>
linking : …/binaries/x86_64/nfqws =&gt; /home/andmail/zapret/nfq<br>
linking : …/binaries/x86_64/tpws =&gt; /home/andmail/zapret/tpws</p>
</details>
<p>Выполнил <code>./install_prereq.sh</code></p>
<details>
<summary>
Получил:</summary>
<ul>
<li>checking system<br>
system is not either systemd, openrc or openwrt based<br>
easy installer can set up config settings but can’t configure auto start<br>
you have to do it manually. check readme.txt for manual setup info.<br>
system is based on linux</li>
<li>checking privileges<br>
root is required</li>
<li>checking system<br>
system is not either systemd, openrc or openwrt based<br>
easy installer can set up config settings but can’t configure auto start<br>
you have to do it manually. check readme.txt for manual setup info.<br>
system is based on linux</li>
<li>checking privileges</li>
</ul>
<p>select firewall type :<br>
1 : iptables<br>
2 : nftables<br>
your choice (default : nftables) : 2<br>
selected : nftables</p>
<ul>
<li>checking prerequisites<br>
required utilities exist : curl nft</li>
</ul>
</details>
<p>Выполнил<code>./blockcheck.sh</code></p>
<details>
<summary>
Получил:</summary>
<ul>
<li>checking system<br>
Linux detected<br>
firewall type is nftables</li>
<li>checking privileges<br>
root is required</li>
<li>checking system<br>
Linux detected<br>
firewall type is nftables</li>
<li>checking privileges</li>
<li>checking prerequisites<br>
nftables queue support is not available. pls install modules.</li>
</ul>
</details>
<p><code>nftables v1.0.6 (Lester Gooch #5)</code><br>
Подскажите, пожалуйста, что нужно для работы скрипта <code>blockcheck.sh</code> ?</p></td><td>2024-08-18T15:08:35.655Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Есть же набор для win:</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/bol-van/zapret-win-bundle">
  <header class="source">

      <a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/6a4d4e93b25d01d87d7db18939fcb5735e6b4e0e_2_690x344.png" class="thumbnail" data-dominant-color="EEF4EE">

  <h3><a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener nofollow ugc">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a></h3>

    <p><span class="github-repo-description">zapret and blockcheck binary bundle for windows</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-08-18T15:33:05.811Z</td></tr><tr><td>bolvan</td><td><p>zapret теоретически может заработать только под WSL2, который суть виртуалка с linux<br>
но и там надо как-то сделать маршрутизацию, чтобы трафик шел через ядро linux<br>
на WSL1 пойдет только tpws в режиме socks, не будут работать несколько опций - oob,mss,disorder<br>
и придется отключить splice (–nosplice)<br>
nfqws нет шансов<br>
для этого есть нативная версия winws под винду</p></td><td>2024-08-18T15:38:16.157Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="wigeance" data-post="207" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Прочитайте как работает autohostlist в readme. У вас в нем сейчас 0 сайтов. Чтобы они там появились надо или руками их туда записать или открывать заблокированные сайты несколько раз подряд за короткий промежуток времени.</p>
</blockquote>
</aside>
<p>Спасибо. Все равно не могу понять, как это все работает. В readme</p>
<blockquote>
<p>сколько раз нужно обнаружить ситуацию, похожую на блокировку, чтобы добавить хост в лист (по умолчанию: 3)</p>
</blockquote>
<p>Открываю десятки раз инстраграмм, рутрекер, рутор, кинозал. В итоге ни один из этих сайтов не открылся. В autohostlist добавились ютубовские домены, хотя ютуб-то как раз никто не открывал.</p>
<ul>
<li><a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a></li>
<li><a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a></li>
<li><a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a></li>
</ul>
<details>
<summary>
В логе logfile.txt опять-таки запросы к гуглу и ютубу</summary>
<p>18.08.2024 18:31:46 : <a href="http://accounts.youtube.com" rel="noopener nofollow ugc">accounts.youtube.com</a> : tcp retrans threshold reached<br>
18.08.2024 18:31:46 : <a href="http://accounts.youtube.com" rel="noopener nofollow ugc">accounts.youtube.com</a> : fail counter 1/3<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : incoming RST<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : fail counter 1/3<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : incoming RST<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : fail counter 2/3<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : incoming RST<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : fail counter 3/3<br>
18.08.2024 19:48:59 : <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a> : adding<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : incoming RST<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : fail counter 1/3<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : incoming RST<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : fail counter 2/3<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : incoming RST<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : fail counter 3/3<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : adding<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : incoming RST<br>
18.08.2024 19:49:03 : <a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a> : fail counter 1/3<br>
18.08.2024 19:49:04 : <a href="http://googleads.g.doubleclick.net" rel="noopener nofollow ugc">googleads.g.doubleclick.net</a> : tcp retrans threshold reached<br>
18.08.2024 19:49:04 : <a href="http://googleads.g.doubleclick.net" rel="noopener nofollow ugc">googleads.g.doubleclick.net</a> : fail counter 1/3<br>
18.08.2024 19:49:04 : <a href="http://googleads.g.doubleclick.net" rel="noopener nofollow ugc">googleads.g.doubleclick.net</a> : tcp retrans threshold reached<br>
18.08.2024 19:49:04 : <a href="http://googleads.g.doubleclick.net" rel="noopener nofollow ugc">googleads.g.doubleclick.net</a> : fail counter 2/3<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : incoming RST<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : fail counter 1/3<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : incoming RST<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : fail counter 2/3<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : incoming RST<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : fail counter 3/3<br>
18.08.2024 20:35:38 : <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> : adding</p>
</details></td><td>2024-08-18T18:37:22.810Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>А у вас сайты просто по ip не забанены? Прочитайте в каких случаях автохостлист срабатывает</p></td><td>2024-08-18T18:52:38.095Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Неа, все пингуется. blockcheck выдал <code>DNS подменяется, но провайдер не перехватывает обращения к сторонним DNS, поменяйте DNS на публичный</code>. Сейчас стоит гугловский 8.8.8.8<br>
Заблокированные сайты с параметром --hostlist-auto отваливаются <code>по таймауту с сообщением о невозможности загрузить страницу</code>. Без --hostlist-auto те же сайты прекрасно открываются с запущенным zapret. Ладно, видно не судьба в авторежиме список вести, буду вручную добавлять.</p></td><td>2024-08-18T19:03:02.815Z</td></tr><tr><td>yatolkosprosit</td><td><p>Небольшой отчет о проделанной работе. Хотел попробовать zapret. Решил установить Linux на флешку и его туда - типа как печочница <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> В общем все установил, нифига не сработало, вынул флешку - оказалось я сломал компуктер и система теперь не запускается. То автоматом в BIOS, то черный экран с предложением установить загрузочный девайс. Так что я теперь тоже хакер. Но есть ньюанс. Хакеры ломают чужие системы, а я свою. <img src="https://ntc.party/images/emoji/twitter/laughing.png?v=12" title=":laughing:" class="emoji" alt=":laughing:" loading="lazy" width="20" height="20"></p>
<p>Дополнение<br>
Вопрос. Сколько по времени занимает проверка блокчеком и стоит ли для проверки Рутрекер заменить на googlevideo?</p></td><td>2024-08-18T21:20:53.620Z</td></tr><tr><td>BBS</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="214" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Решил установить Linux на флешку и его туда - типа как печочница</p>
</blockquote>
</aside>
<p>Для песочницы используйте virtualbox (free), hyper-v (win10 pro), или vmware workstation (shareware). На торрентах есть даже готовые образы уже установленных linux дистрибутивов, для совсем ленивых.</p>
<aside class="quote no-group" data-username="yatolkosprosit" data-post="214" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Сколько по времени занимает проверка блокчеком</p>
</blockquote>
</aside>
<p>Минут 20</p>
<aside class="quote no-group" data-username="yatolkosprosit" data-post="214" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>стоит ли для проверки Рутрекер заменить на googlevideo</p>
</blockquote>
</aside>
<p>Нет, не стоит. Block checker не определит замедление ресурса.</p></td><td>2024-08-18T22:37:10.691Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="BBS" data-post="215" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/e47774/48.png" class="avatar"> BBS:</div>
<blockquote>
<p>Для песочницы используйте virtualbox (free), hyper-v (win10 pro), или vmware workstation (shareware). На торрентах есть даже готовые образы уже установленных linux дистрибутивов, для совсем ленивых.</p>
</blockquote>
</aside>
<p>здесь важно предостеречь от использования нат на виртуалках. все поломает</p>
<aside class="quote no-group" data-username="yatolkosprosit" data-post="214" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Рутрекер заменить на googlevideo?</p>
</blockquote>
</aside>
<p>сам googlevideo не предназначен для обращения. будет ошибка сертификата везде</p></td><td>2024-08-19T04:33:29.888Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="TesterTi" data-post="211" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Все равно не могу понять, как это все работает.</p>
</blockquote>
</aside>
<p>у автолиста есть дебаг режим<br>
лог файл что и почему он делает</p></td><td>2024-08-19T04:39:19.498Z</td></tr><tr><td>BBS</td><td><aside class="quote no-group" data-username="bolvan" data-post="216" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>здесь важно предостеречь от использования нат на виртуалках. все поломает</p>
</blockquote>
</aside>
<p>NAT внутри одной подсети ничего не ломает. И разницы виртуалка/не виртуалка нет никакой.</p></td><td>2024-08-19T11:09:21.829Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="bolvan" data-post="217" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>у автолиста есть дебаг режим<br>
лог файл что и почему он делает</p>
</blockquote>
</aside>
<p>Да, вот выше этот файл logfile.txt под спойлером <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/211" class="inline-onebox">Zapret: обсуждение - #211 by TesterTi</a><br>
Там ютубовские хосты, которые не открывались. А сайтов, которые открывались десятки раз (к примеру, рутрекер, инстаграмм), там нет почему-то. И в итоге в автохостлист попали</p>
<ul>
<li><a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a></li>
<li><a href="http://play-fe.googleapis.com" rel="noopener nofollow ugc">play-fe.googleapis.com</a></li>
<li><a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a></li>
</ul>
<p>Магия, в общем )</p></td><td>2024-08-19T13:00:00.335Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="BBS" data-post="218" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/e47774/48.png" class="avatar"> BBS:</div>
<blockquote>
<p>NAT внутри одной подсети ничего не ломает. И разницы виртуалка/не виртуалка нет никакой.</p>
</blockquote>
</aside>
<p>гипервизорный нат это не линух нат и не провайдерский. он ломает большинство методов<br>
виртуалку только в бридж</p></td><td>2024-08-19T13:15:40.679Z</td></tr><tr><td>BBS</td><td><aside class="quote no-group" data-username="bolvan" data-post="220" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>гипервизорный нат это не линух нат и не провайдерский. он ломает большинство методов<br>
виртуалку только в бридж</p>
</blockquote>
</aside>
<p>А я про линуксовый NAT на самой виртуалке. Ни разу не тестил NAT от гипервизоров.</p></td><td>2024-08-19T13:34:02.507Z</td></tr><tr><td>bolvan</td><td><p>надо смотреть лог nfqws --debug<br>
возможно блокировка идет не сразу<br>
и метод детектирования не срабатывает</p></td><td>2024-08-19T13:44:41.827Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Спасибо. А на windows это сработает? Я запускаю через winws.exe</p></td><td>2024-08-19T14:24:34.525Z</td></tr><tr><td>bolvan</td><td><p>сработает<br>
лучше запускать с cygwin prompt, чтобы был | tee</p></td><td>2024-08-19T17:25:27.481Z</td></tr><tr><td>tim1ch(Тимофей)</td><td><p>Всем привет! Пару дней назад поставил себе на роутер Zapret, доволен был до того момента, пока инет не стал пропадать. В одном из Telegram-чатов мне сказали, что дело скорее всего в том что Zapret имеет много утечек памяти. Я пробовал отключать Zapret и инет не пропадал. Возможно это совпадение, а может и нет.</p></td><td>2024-08-21T15:39:24.253Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>На кинетик ставили? Если да, то из-за особенностей NDM там есть утечка памяти при использовании запрета. При чисто v4 проблема заметна не сильно, при v4+v6 может меньше чем за сутки забить ОЗУ в роутере</p></td><td>2024-08-21T16:14:52.909Z</td></tr><tr><td>bolvan</td><td><p>если кинетик, то я его не поддерживаю<br>
и судя по всему там течет патченое ядро, а не zapret<br>
всем, кто может, рекомендую слезать со стока на openwrt</p></td><td>2024-08-21T16:43:30.212Z</td></tr><tr><td>tim1ch(Тимофей)</td><td><p>Да, Keenetic. Интернет IPv4, но отключений больше не было. Думаю что провайдер (РТО-Дон) менял ТСПУ.</p></td><td>2024-08-22T13:35:16.480Z</td></tr><tr><td>tim1ch(Тимофей)</td><td><p>Понял, приму к сведению.</p></td><td>2024-08-22T13:35:50.297Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>добрый вечер перестали работать конфигурационные файлы варп впн сама программа подключается варп а вот файл конфига не подключается все остальные впны работают включенным запретом</p></td><td>2024-08-22T19:18:59.077Z</td></tr><tr><td>bolvan</td><td><p>подробности. как запущен zapret, с какими параметрами<br>
какой протокол VPN (wireguard ?), конфиг wireguard (без индивидуальных приватных ключей, если такие есть)</p>
<p>для WG есть только вариант fake. иногда надо делать repeats &gt;=6, иногда &gt;=12<br>
ipfrag2 помочь может только со своими серверами<br>
на ТСПУ могут включать stateless режим для некоторых известных диапазонов IP, чтобы сделать фейки нерабочими.</p></td><td>2024-08-23T05:14:22.271Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Ну допустим, у меня вчера включили stateless . Как с ним бороться  Дo вчерашнего дня… Всё работало</p></td><td>2024-08-23T11:33:19.905Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>. И Что странно. Только warp . Конфигураторы . Не работают. Сама программа 1.1.1.1 WARP  работает</p></td><td>2024-08-23T11:38:31.292Z</td></tr><tr><td>bolvan</td><td><p>Мало что понятно из такого обьяснения. Я не знаю что такое конфигураторы.<br>
Мне надо знать какой VPN протокол используется и на какие IP адреса нацелен, а так же как настроен zapret для противодействия предполагаемой проблеме</p></td><td>2024-08-23T11:53:52.024Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Interface]<br>
PrivateKey = <em>удалено</em><br>
Address = 172.16.0.2/32, fd01:5ca1:ab1e:8c88:472d:77ce:3f:8a48/128<br>
DNS = 1.1.1.1</p>
<p>[Peer]<br>
PublicKey = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=<br>
AllowedIPs = 0.0.0.0/0, ::/0<br>
Endpoint = 162.159.193.5:500<br>
Протокол wireguard Провайдер . Таттелеком</p></td><td>2024-08-23T12:01:55.358Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><h1><a name="p-35243-override-ports-1" class="anchor" href="#p-35243-override-ports-1"></a>override ports</h1>
<p>#HTTP_PORTS=1-65535<br>
HTTPS_PORTS=83-65535<br>
QUIC_PORTS=21,83-65535</p>
<h1><a name="p-35243-choose-operation-mode-2" class="anchor" href="#p-35243-choose-operation-mode-2"></a>CHOOSE OPERATION MODE</h1>
<h1><a name="p-35243-mode-nfqwstpwstpws-socksfiltercustom-3" class="anchor" href="#p-35243-mode-nfqwstpwstpws-socksfiltercustom-3"></a>MODE : nfqws,tpws,tpws-socks,filter,custom</h1>
<h1><a name="p-35243-nfqws-nfqws-for-dpi-desync-4" class="anchor" href="#p-35243-nfqws-nfqws-for-dpi-desync-4"></a>nfqws : nfqws for dpi desync</h1>
<h1><a name="p-35243-tpws-tpws-transparent-mode-5" class="anchor" href="#p-35243-tpws-tpws-transparent-mode-5"></a>tpws : tpws transparent mode</h1>
<h1><a name="p-35243-tpws-socks-tpws-socks-mode-6" class="anchor" href="#p-35243-tpws-socks-tpws-socks-mode-6"></a>tpws-socks : tpws socks mode</h1>
<h1><a name="p-35243-filter-no-daemon-just-create-ipset-or-download-hostlist-7" class="anchor" href="#p-35243-filter-no-daemon-just-create-ipset-or-download-hostlist-7"></a>filter : no daemon, just create ipset or download hostlist</h1>
<h1><a name="p-35243-custom-custom-mode-should-modify-custom-init-script-and-add-your-own-code-8" class="anchor" href="#p-35243-custom-custom-mode-should-modify-custom-init-script-and-add-your-own-code-8"></a>custom : custom mode. should modify custom init script and add your own code</h1>
<p>MODE=custom</p>
<h1><a name="p-35243-apply-fooling-to-http-9" class="anchor" href="#p-35243-apply-fooling-to-http-9"></a>apply fooling to http</h1>
<p>MODE_HTTP=1</p>
<h1><a name="p-35243-for-nfqws-only-support-http-keep-alives-enable-only-if-dpi-checks-for-http-request-in-any-outgoing-packet-10" class="anchor" href="#p-35243-for-nfqws-only-support-http-keep-alives-enable-only-if-dpi-checks-for-http-request-in-any-outgoing-packet-10"></a>for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet</h1>
<p>MODE_HTTP_KEEPALIVE=1</p>
<h1><a name="p-35243-apply-fooling-to-https-11" class="anchor" href="#p-35243-apply-fooling-to-https-11"></a>apply fooling to https</h1>
<p>MODE_HTTPS=1</p>
<h1><a name="p-35243-apply-fooling-to-quic-12" class="anchor" href="#p-35243-apply-fooling-to-quic-12"></a>apply fooling to quic</h1>
<p>MODE_QUIC=1</p>
<h1><a name="p-35243-noneipsethostlist-13" class="anchor" href="#p-35243-noneipsethostlist-13"></a>none,ipset,hostlist</h1>
<p>MODE_FILTER=none</p>
<h1><a name="p-35243-choose-nfqws-daemon-options-for-dpi-desync-mode-run-nfqnfqws-help-for-option-list-14" class="anchor" href="#p-35243-choose-nfqws-daemon-options-for-dpi-desync-mode-run-nfqnfqws-help-for-option-list-14"></a>CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run “nfq/nfqws --help” for option list</h1>
<p>DESYNC_MARK=0x40000000<br>
#NFQWS_OPT_DESYNC=“–dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=md5sig”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=fake,disorder --dpi-desync-ttl=9 --dpi-desync-fake-http=0x00000000”<br>
NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=fake,disorder2 --dpi-desync-ttl=9 --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-repeats=6 --dpi-desync-fooling=md5sig,badsum”<br>
#NFQWS_OPT_DESYNC_HTTP6=“–dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none”<br>
#NFQWS_OPT_DESYNC_HTTPS6=“–dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig --dpi-desync-any-protocol=1 --dpi-desync-cutoff=d2”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig --dpi-desync-any-protocol=1 --dpi-desync-cutoff=d2 --dpi-desync-repeats=6”<br>
#NFQWS_OPT_DESYNC_QUIC6=“–dpi-desync=hopbyhop”</p></td><td>2024-08-23T12:04:59.378Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><h1><a name="p-35244-this-custom-script-in-addition-to-modenfqws-runs-desync-to-all-quic-initial-packets-without-ipsethostlist-filtering-1" class="anchor" href="#p-35244-this-custom-script-in-addition-to-modenfqws-runs-desync-to-all-quic-initial-packets-without-ipsethostlist-filtering-1"></a>this custom script in addition to MODE=nfqws runs desync to all QUIC initial packets, without ipset/hostlist filtering</h1>
<h1><a name="p-35244-need-to-add-to-config-nfqws_opt_desync_quic-dpi-desyncfake-2" class="anchor" href="#p-35244-need-to-add-to-config-nfqws_opt_desync_quic-dpi-desyncfake-2"></a>need to add to config : NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake”</h1>
<h1><a name="p-35244-note-do-not-use-ttl-fooling-chromium-quic-engine-breaks-sessions-if-ttl-expired-in-transit-received-3" class="anchor" href="#p-35244-note-do-not-use-ttl-fooling-chromium-quic-engine-breaks-sessions-if-ttl-expired-in-transit-received-3"></a>NOTE : do not use TTL fooling. chromium QUIC engine breaks sessions if TTL expired in transit received</h1>
<p>QNUM2=$(($QNUM+10))</p>
<p>zapret_custom_daemons()<br>
{<br>
# $1 - 1 - run, 0 - stop</p>
<pre><code>local MODE_OVERRIDE=nfqws
local opt

zapret_do_daemons $1

opt="--qnum=$QNUM2 $NFQWS_OPT_BASE $NFQWS_OPT_DESYNC_QUIC"
do_nfqws $1 100 "$opt"
</code></pre>
<p>}<br>
zapret_custom_firewall_nft()<br>
{<br>
# stop logic is not required</p>
<pre><code>local MODE_OVERRIDE=nfqws
local f
local first_packets_only="$nft_connbytes 1-3"
local desync="mark and $DESYNC_MARK == 0"

zapret_apply_firewall_rules_nft

f="udp dport {$QUIC_PORTS}"
nft_fw_nfqws_post "$f $desync $first_packets_only" "$f $desync $first_packets_only" $QNUM2
</code></pre>
<p>}<br>
zapret_custom_firewall()<br>
{<br>
# $1 - 1 - run, 0 - stop</p>
<pre><code>    local MODE_OVERRIDE=nfqws
    local f
    local first_packets_only="-m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:3"
    local desync="-m mark ! --mark $DESYNC_MARK/$DESYNC_MARK"

    zapret_do_firewall_rules_ipt $1

    f="-p udp --dport 443"
    fw_nfqws_post $1 "$f $desync $first_packets_only" "$f $desync $first_packets_only" $QNUM2
    
    # fix NDM kernel masquerade for nfqws
    ipta_add_del $1 _NDM_MASQ -t nat -o ovpn_br5 -j MASQUERADE
    ipta_add_del $1 _NDM_MASQ -t nat -o ppp0 -j MASQUERADE
    ipta_add_del $1 _NDM_MASQ -t nat -o ovpn_br6 -j MASQUERADE
    ipta_add_del $1 _NDM_MASQ -t nat -o apcli0 -j MASQUERADE
</code></pre>
<p>}</p></td><td>2024-08-23T12:07:11.048Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Похоже вы на кинетике пытаетесь запустить? В кинетике нет и не было nftables. Зачем вам маскарад не на ван интерфейсах? Кинетик не поддерживается автором, плюс имеет проблему с udp. Зачем disorder2 в “NFQWS_OPT_DESYNC_QUIC”? Посмотрите список стратегий для tcp и udp.</p></td><td>2024-08-23T14:09:14.561Z</td></tr><tr><td>bolvan</td><td><p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig --dpi-desync-any-protocol=1 --dpi-desync-cutoff=d2 --dpi-desync-repeats=6”</p>
<p>вот тут все, кроме fake и repeats не нужно. nfqws может распознавать wireguard handshake, ему не нужно any protocol. остальные параметры относятся только к tcp и никак не влияют на udp</p>
<p>custom был содран с какого-то старого поста видимо.<br>
сейчас QUIC уже давно забит в основные скрипты и использует QNUM 210<br>
повторный запуск из custom с QNUM 210 не сработает, потому что основная часть уже запустит nfqws на этой очереди<br>
правило перенаправления на udp 443 так же дублиует основное правило QUIC_PORTS=21,83-65535</p>
<p>непонятно зачем задан такой широкий диапазон портов QUIC и HTTPS. лучше фиксировать порты и не заставлять бедный nfqws и слабенький роутер процессить всякие торенты</p>
<p>этот кадавр как-то работал только потому, что в итоге порт wireguard перенаправлялся на инстанс nfqws, отвечающий за quic, и в нем была стратегия fake с repeats</p>
<p>видимо она перестала работать</p>
<p>и да. 162.159.193.5 относится к cloudflare, и именно там я замечал включение stateless на части диапазонов</p>
<p>ipfrag2 возможно помог бы. cloudflare его не режет. но его невозможно запустить на iptables для проходящего трафика. требуются nftables. следовательно кинетик на отдых</p>
<p>конфиг wg проверил на моем провайдере. просто так не работает, одиночный fake пробивает блок, stateless не наблюдаю. но не факт, что на некоторых других тспу его не включили</p></td><td>2024-08-23T14:31:33.926Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Можно ли прошить. . Этот роутер. На openwrt Или он не поддаётся. Перепрошивки</p></td><td>2024-08-23T15:38:49.726Z</td></tr><tr><td>bolvan</td><td><p><a href="https://openwrt.org/toh/start" class="onebox" target="_blank" rel="noopener">https://openwrt.org/toh/start</a><br>
вот тут вбиваем model keenetic и проверяем по названию и ревизии</p>
<p>тут обсуждают у многих отвалилось</p><aside class="quote" data-post="122" data-topic="4968">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/v/90db22/48.png" class="avatar">
    <a href="https://ntc.party/t/wireguard/4968/122">WireGuard</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    На виндовс вчера у амнезии тоже вышел <a href="https://github.com/amnezia-vpn/amneziawg-windows-client/releases" rel="noopener nofollow ugc">клиент</a>. 
Вчера попробовал, настройки которые на wg перестали работать на амнезии с мусорными пакетами заработали, в конфиг такие прописывал: 
[Interface] 
Jc = 5 
Jmin = 50 
Jmax = 1000 
H1 = 1 
H2 = 2 
H3 = 3 
H4 = 4
  </blockquote>
</aside>
</td><td>2024-08-23T15:40:31.472Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="bolvan" data-post="239" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ipfrag2</p>
</blockquote>
</aside>
<p>А на Windows. Он сработает</p></td><td>2024-08-23T16:40:22.908Z</td></tr><tr><td>bolvan</td><td><p>большая вероятность, что NAT подрежет или обьединит фрагменты.<br>
ipfrag может потребовать внешнего IP на устройстве с zapret<br>
вообще эта техника только для точечного пробива отдельных ресурсов и работает лишь иногда, а не как правило</p>
<p>можно попробовать прогнать блокчек на QUIC на <a href="http://rutracker.org">rutracker.org</a><br>
если ipfrag срабатывает, то шансы есть</p></td><td>2024-08-23T16:50:34.690Z</td></tr><tr><td>m-nikitin(M Nikitin)</td><td><p>Кто-нибудь сталкивался:<br>
Zapret на компьютере и android tv - работает идеально.<br>
На телефонах, планшетах - при старте каждого видео задержка 5-10 сек.<br>
После того как видео уже запустилось, перематывается хорошо, без подгрузок</p>
<p>Zapret установлен на роутере (OpenWrt),<br>
конфиг NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-ttl=2”</p></td><td>2024-08-24T09:02:08.433Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>blockcheck показывает</p>
<p>preparing winws redirection</p>
<ul>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=2<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=10<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=20<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=8<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=16<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=24<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=32<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=40<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=64<br>
!!! AVAILABLE !!!</li>
</ul>
<p>но winws открывает только сайт рутрекер на протоколы он не действует даже с теми стратегиями которые стоят в роутере</p></td><td>2024-08-24T12:18:49.734Z</td></tr><tr><td>bolvan</td><td><p>winws и nfqws на роутере мешать нельзя, они будут друг другу мешать</p></td><td>2024-08-24T13:18:40.062Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>я отключал в роутере запрет Я запускал на Windows</p></td><td>2024-08-24T13:29:29.407Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="245" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>но winws открывает только сайт рутрекер на протоколы он не действует даже с теми стратегиями которые стоят в роутере</p>
</blockquote>
</aside>
<p>не только рутракер. nnmclub, kinozal. те, что на cloudflare.<br>
там не блокируют ip фрагменты udp<br>
но вообще это неплохая новость, значит дурение с ipfrag помогает<br>
да и fake тоже помогает. fake гораздо более живуч, чем ipfrag.<br>
можно попробовать его напустить на wireguard на порт 500<br>
лучше в командной строке с --debug, чтобы смотреть действительно ли идет дурение wireguard handshake</p></td><td>2024-08-24T14:04:48.102Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>А как правильно. Запустить . Командной строке</p></td><td>2024-08-24T15:44:48.593Z</td></tr><tr><td>bolvan</td><td><p>точно так же, только порт заменить с 443 на 500<br>
и --debug для проверки</p></td><td>2024-08-24T16:02:26.915Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>А нет ли случайно сего чудного решения в формате докер образа? Хочется попробовать на некротик припарковать</p></td><td>2024-08-24T17:07:08.643Z</td></tr><tr><td>bolvan</td><td><p>Не будет работать. Там отдельный network namespace, ограниченные права и нехватка модулей ядра<br>
Эта тема предназначена только для запуска сервисных приложений, но никак не для рулежки сетевой подсистемой</p></td><td>2024-08-24T17:13:01.433Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Окей, приниматся, под капотом некротики действительно странные. А если парковать на какую-нибудь малинку? А в контейнер положить WG сервер, который и будет входным интерфейсом для всего, что туда заворачивается?</p></td><td>2024-08-24T17:23:00.496Z</td></tr><tr><td>bolvan</td><td><p>Мне кажется смысла нет.<br>
zapret разрабатывался изначально исходя из абсолютного минимума зависимостей.<br>
Он работает на сильно обрезаных прошивках, так что к userland окружению совершенно нетребователен.<br>
А вот к модулям ядра требователен, и их не подтянешь докером.<br>
Традиционный linux обычно расчитан на загрузку модулей по мере надобности. Сами команды типа iptables, nftables их загружают. Что будет в контейнере, где эти команды не увидят модулей от основного ядра ? Наверно, придется их искусственно загружать перед запуском контейнера.<br>
Но там же еще есть выбор iptables, nftables, и модули нужны разные. Все что ли загружать ? iptables есть еще nft и legacy. Старое ядро не потянет новые nftables даже если я положу nft в контейнер.</p></td><td>2024-08-24T17:33:55.677Z</td></tr><tr><td>s.v.d(00svd00)</td><td><p>Звучит разумно. Жаль. Хотелось решение в формате “чёрного ящика”, не конфликтющего с уже навешанными правилами iptables и прочими накрученными чудесами в системе.</p></td><td>2024-08-24T17:49:24.929Z</td></tr><tr><td>bolvan</td><td><p>Черный ящик - это виртуалка. Требования к ней самые минимальные.<br>
Но настраивать все равно придется</p>
<p>Тоже самое можно сделать и на паравиртуализации<br>
network namespace это как отдельный хост<br>
но придется руками разбираться с модулями ядра и настраивать мосты с хостом<br>
Впрочем, на виртуалке тоже придется настраивать интерфейсы как-то</p></td><td>2024-08-24T17:51:49.210Z</td></tr><tr><td>temak(Temak)</td><td><p>Почитал я readme.txt, поматерился, но так и не понял: как же сделать исключение для сайта? Любая фильтрация работает странно, но вкратце autohostlist работал, hostlist работал с добавленным сайтом, но сейчас пробуя то же — не получается. Ключ none для фильтрации срабатывает против замедления, но ломает сайт. Поделитесь, как вы делаете исключения?!</p></td><td>2024-08-25T03:35:11.070Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>вот что происходит пакеты дропаются</p>
<p>winws.exe --wf-l3=ipv4 --wf-udp=2408 --dpi-desync=ipfrag2 --dpi-desync-ipfrag-pos-udp=8 --debug<br>
windivert filter size: 420<br>
windivert filter:<br>
!impostor and !loopback and ip and<br>
((outbound and ((udp.DstPort == 2408)) and ((ip.DstAddr &lt; 127.0.0.1 or ip.DstAddr &gt; 127.255.255.255) and (ip.DstAddr &lt; 10.0.0.0 or ip.DstAddr &gt; 10.255.255.255) and (ip.DstAddr &lt; 192.168.0.0 or ip.DstAddr &gt; 192.168.255.255) and (ip.DstAddr &lt; 172.16.0.0 or ip.DstAddr &gt; 172.31.255.255) and (ip.DstAddr &lt; 169.254.0.0 or ip.DstAddr &gt; 169.254.255.255)))<br>
or<br>
(inbound and tcp and false))<br>
initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
windivert initialized. capture is started.<br>
packet: id=0 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=50682 dport=2408<br>
UDP: 01 00 00 00 23 58 84 D1 F0 5B 80 F0 3D E0 F2 42 18 6F E4 EE FE A6 15 2A FE B1 EE BF 8B 2B 3C EF … : …<span class="hashtag-raw">#X</span>…[…=…B.o…<em>…+&lt;. …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:50682 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C1 20 00 80 11 60 9F C0 A8 28 23 A2 9F C1 05 C5 FA 09 68 00 9C 94 3B : E…m. …`…(#…h…;<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C1 00 01 80 11 80 12 C0 A8 28 23 A2 9F C1 05 01 00 00 00 23 58 84 D1 F0 5B 80 F0 3D E0 F2 42 18 6F E4 EE FE A6 15 2A FE B1 EE BF 8B 2B 3C EF A2 8A FD 00 17 96 EF 1F D3 B7 B0 1E 02 EF D8 A4 65 F2 33 DB 8E 6B DD 38 F4 19 12 3F … : E…m…(#…<span class="hashtag-raw">#X</span>…[…=…B.o…</em>…+&lt;…e.3…k.8…? …<br>
packet: id=0 drop<br>
packet: id=1 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=50682 dport=2408<br>
UDP: 01 00 00 00 69 D8 AB 6A 2C F8 6C 59 CC B2 32 10 EA 4C 29 AC 47 D9 17 81 DC 4A C3 23 8B 1F DF D2 … : …i…j,.lY…2…L).G…J.#… …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:50682 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C2 20 00 80 11 60 9E C0 A8 28 23 A2 9F C1 05 C5 FA 09 68 00 9C 17 EC : E…m. …`…(#…h…<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C2 00 01 80 11 80 11 C0 A8 28 23 A2 9F C1 05 01 00 00 00 69 D8 AB 6A 2C F8 6C 59 CC B2 32 10 EA 4C 29 AC 47 D9 17 81 DC 4A C3 23 8B 1F DF D2 64 01 58 EA 71 DD AF 1F 63 98 48 D9 FE 51 06 43 38 96 47 D1 F4 1E B9 84 C8 A5 0A 61 … : E…m…(#…i…j,.lY…2…L).G…J.#…d.X.q…c.H…Q.C8.G…a …<br>
packet: id=1 drop<br>
packet: id=2 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=50682 dport=2408<br>
UDP: 01 00 00 00 AB E3 F5 3A 45 EB E8 6E 2E 3A D8 93 2E DD 88 4A 6E E0 1E EC 7B E2 19 A7 AF D1 62 D1 … : …:E…n.:…Jn…{…b. …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:50682 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C3 20 00 80 11 60 9D C0 A8 28 23 A2 9F C1 05 C5 FA 09 68 00 9C 1F BF : E…m. …`…(#…h…<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C3 00 01 80 11 80 10 C0 A8 28 23 A2 9F C1 05 01 00 00 00 AB E3 F5 3A 45 EB E8 6E 2E 3A D8 93 2E DD 88 4A 6E E0 1E EC 7B E2 19 A7 AF D1 62 D1 DE 08 3D EA 6A 41 63 47 CE B2 CE 13 B8 95 60 60 A2 C9 A9 79 DA C5 E2 AE 24 E5 40 AB … : E…m…(#…:E…n.:…Jn…{…b…=.jAcG…``…y…$.@. …<br>
packet: id=2 drop<br>
packet: id=3 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=50682 dport=2408<br>
UDP: 01 00 00 00 02 25 CA 25 25 B4 41 77 CB B6 F5 60 08 3A FC 83 E7 39 BC B7 EA C3 E0 CA 25 CC CA 91 … : …%.%%.Aw…`.:…9…%… …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:50682 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C4 20 00 80 11 60 9C C0 A8 28 23 A2 9F C1 05 C5 FA 09 68 00 9C 12 33 : E…m. …`…(#…h…3<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C4 00 01 80 11 80 0F C0 A8 28 23 A2 9F C1 05 01 00 00 00 02 25 CA 25 25 B4 41 77 CB B6 F5 60 08 3A FC 83 E7 39 BC B7 EA C3 E0 CA 25 CC CA 91 FD 86 EF FF 99 52 00 7F 49 FA 89 3E 16 5E CD F2 95 5F 1D F3 49 41 20 D0 94 D1 BF E8 … : E…m…(#…%.%%.Aw…`.:…9…%…R.I…&gt;.^…_…IA … …<br>
packet: id=3 drop<br>
packet: id=4 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=64478 dport=2408<br>
UDP: 01 00 00 00 49 45 60 B9 E4 E8 62 48 F9 78 E0 3C 3A FE A4 4E 63 7B 9D 50 C9 A3 38 9F CF 17 9E 75 … : …IE`…bH.x.&lt;:…Nc{.P…8…u …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:64478 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C5 20 00 80 11 60 9B C0 A8 28 23 A2 9F C1 05 FB DE 09 68 00 9C DA E4 : E…m. …`…(#…h…<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C5 00 01 80 11 80 0E C0 A8 28 23 A2 9F C1 05 01 00 00 00 49 45 60 B9 E4 E8 62 48 F9 78 E0 3C 3A FE A4 4E 63 7B 9D 50 C9 A3 38 9F CF 17 9E 75 3E DF BE BE E4 6E 0F 18 1E 1C 42 F4 C9 9C 13 32 20 DD A0 F8 4C 0D 49 FC 47 07 B9 45 … : E…m…(#…IE`…bH.x.&lt;:…Nc{.P…8…u&gt;…n…B…2 …L.I.G…E …<br>
packet: id=4 drop<br>
packet: id=5 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=64478 dport=2408<br>
UDP: 01 00 00 00 A7 36 24 06 CC 37 F7 3F 7F 8A AD EB 0A 1F 83 26 33 76 7F 9C FD A2 FA 9B A1 B8 8F 14 … : …6$…7.?..&amp;3v… …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:64478 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C6 20 00 80 11 60 9A C0 A8 28 23 A2 9F C1 05 FB DE 09 68 00 9C 57 31 : E…m. …`…(#…h…W1<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C6 00 01 80 11 80 0D C0 A8 28 23 A2 9F C1 05 01 00 00 00 A7 36 24 06 CC 37 F7 3F 7F 8A AD EB 0A 1F 83 26 33 76 7F 9C FD A2 FA 9B A1 B8 8F 14 82 7F FF CB 6D E3 C4 22 F6 54 11 4D A0 6D 3B B3 A1 05 FE 90 22 AA 47 35 48 AB 10 85 … : E…m…(#…6$…7.?..&amp;3v…m…“.T.M.m;…”.G5H… …<br>
packet: id=5 drop<br>
packet: id=6 len=176 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=1 IfIdx=19.0<br>
IP4: 192.168.40.35 =&gt; 162.159.193.5 proto=udp ttl=128 sport=64478 dport=2408<br>
UDP: 01 00 00 00 D5 E1 E2 6A 1B D6 EA E7 4F 86 79 9D 6C 47 41 87 77 64 6B F6 B5 E5 60 EF BB 6E FD C5 … : …j…O.y.lGA.wdk…`…n… …<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:64478 dst=162.159.193.5:2408<br>
sending 1st ip fragment 0-7 ip_payload_len=8 : 45 00 00 1C 6D C7 20 00 80 11 60 99 C0 A8 28 23 A2 9F C1 05 FB DE 09 68 00 9C B9 BB : E…m. …`…(#…h…<br>
sending 2nd ip fragment 8-155 ip_payload_len=148 : 45 00 00 A8 6D C7 00 01 80 11 80 0C C0 A8 28 23 A2 9F C1 05 01 00 00 00 D5 E1 E2 6A 1B D6 EA E7 4F 86 79 9D 6C 47 41 87 77 64 6B F6 B5 E5 60 EF BB 6E FD C5 33 19 4D 93 93 86 DF 12 5D EE 13 3C DC E5 61 A7 41 69 81 39 C0 22 12 C5 A3 24 EB C9 … : E…m…(#…j…O.y.lGA.wdk…`…n…3.M…]…&lt;…a.Ai.9."…$… …<br>
packet: id=6 drop</p></td><td>2024-08-25T05:24:02.150Z</td></tr><tr><td>bolvan</td><td><p>Не работает выходит. drop это нормально. дропнутый пакет заменяется собственными отсылаемыми фрагментами. Но они фильтруются. Значит не взлетело.<br>
Идет периодическая отсылка запроса wireguard без ответа.<br>
Порт 500 стремноват немного. Он используется IKE. Если возможно лучше бы заменить порт на другой. Хоть на 443.<br>
Но скорее всего IP warp в бане, либо если они прыгающие, применена тактика усиленной блокировки (любое подозрительное убиваем, используем более сложные методы обнаружения, stateless режим) на диапазоне IP. Возможно, с фильтром по порту</p></td><td>2024-08-25T05:36:10.753Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>но сайт с включенным kyber открывается</p></td><td>2024-08-25T05:40:33.884Z</td></tr><tr><td>bolvan</td><td><p>На kyber идет фрагментация на уровне application protocol, а ipfrag - фрагментация на уровне IP.</p></td><td>2024-08-25T05:41:23.891Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>тогда почему дропаются на моих настройка которые на роутере прекрасно работают а на виндоусе дропают</p></td><td>2024-08-25T05:49:54.771Z</td></tr><tr><td>bolvan</td><td><p>я не понял вопроса. кто что дропает ?</p></td><td>2024-08-25T05:53:56.693Z</td></tr><tr><td>G7ZmNT(G7ZmNT)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Здравствуйте. Подскажите, пожалуйста, есть ли рабочая стратегия под OpenVPN UDP и Lightway UDP/TCP. Lightway это протокол от ExpressVPN (<a href="https://github.com/expressvpn/lightway-core" class="inline-onebox" rel="noopener nofollow ugc">GitHub - expressvpn/lightway-core: Lightway Core is a modern VPN protocol by ExpressVPN, to deliver a VPN experience that’s faster, more secure, and more reliable.</a>)<br>
Для wireguard уже составил и всё прекрасно работает, спасибо за инструмент этот. Под windows 10 интересует подходящее решение.</p></td><td>2024-08-25T07:09:58.133Z</td></tr><tr><td>bolvan</td><td><p>Для UDP есть только fake, ipfrag2, udplen и tamper.<br>
fake самый универсальный , ipfrag для точечного пробития<br>
udplen только для протоколов, не ругающихся на дописки в конец пакета (чтобы  DPI не увидел длину)<br>
tamper только для протоколов, которые можно переписывать на лету (пока только DHT)</p>
<p>если протокол не распознается , надо использовать --dpi-desync-any-protocol и --dpi-desync-cutoff. в последнем указывать dX или nX, где X - конечный номер пакета, на котором обрываем десинхронизацию, нумерация с 1.   Например, d2 значит только первый пакет, а на 2-м уже стоп</p></td><td>2024-08-25T07:29:49.566Z</td></tr><tr><td>easyone11</td><td><p>Как лучше всего обновлять программу чтобы она не трогала созданные ранее рабочие настройки?<br>
При установке поверх через изи инсталл скрипт же не видит что программы стоит и работает и на сколько помню всё равно предлагает настройку как новую?<br>
Можно ли просто убив демона, распаковать новый zapret-master.zip и заменить все файлы через шару на роутере?</p></td><td>2024-08-27T04:22:34.709Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="easyone11" data-post="266" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>Можно ли просто убив демона, распаковать новый zapret-master.zip и заменить все файлы через шару на роутере?</p>
</blockquote>
</aside>
<p>С винды права могут угробиться.<br>
Лучше через распаковку в /tmp и easy_install или через git pull, если есть extroot<br>
Если точно известно, что никакие файлы новые не создаются, а пишется поверх имеющихся, то можно и копированием. Например, заменить бинарики</p></td><td>2024-08-27T05:32:32.344Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="267" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Лучше через распаковку в /tmp и easy_install</p>
</blockquote>
</aside>
<p>предварительно сохранив рабочий конфиг и не важно что отвечать на вопросы в изи инстале, а после установки просто заменить конфиг?</p></td><td>2024-08-27T05:41:11.682Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="267" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>С винды права могут угробиться.</p>
</blockquote>
</aside>
<p>у вас написано в ридмишки что права восстановятся если в opt кидать, или я не так понял</p>
<blockquote>
<p>Система простой инсталяции заточена на любое умышленное или неумышленное изменение прав доступа на файлы.<br>
Устойчива к репаку под windows. После копирования в /opt права будут принудительно восстановлены.</p>
</blockquote></td><td>2024-08-27T05:46:14.469Z</td></tr><tr><td>bolvan</td><td><p><em>после_копирования_в_opt</em><br>
инсталятором</p>
<p>когда установка производится из другого места происходит уничтожение /opt/zapret с опциональным сохранением конфигов, копирование новой версии с принудительным выставлением прав, восстановление конфигов<br>
если запускать инсталятор из /opt/zapret, восстановления не будет<br>
так же не будет восстановления волшебного просто от копирования</p></td><td>2024-08-27T05:57:57.014Z</td></tr><tr><td>makoda</td><td><p>Кстати, адрес <em><a href="http://putinhuylo.com" rel="noopener nofollow ugc">putinhuylo.com</a></em> (захардкоженный в blockcheck-е) не резолвится)) Может, чем-нибудь заменить?</p>
<p>Ещё при конфигурировании blockcheck-а вылазит такая штука:</p>
<pre><code class="lang-auto">specify domain(s) to test. multiple domains are space separated.
domain(s) (default: rutracker.org) : 
ping: connect: Сеть недоступна
</code></pre>
<p>Это, если правильно понимаю, жалоба на отсутствие IPv6?</p></td><td>2024-08-27T10:20:24.683Z</td></tr><tr><td>bolvan</td><td><p>Да, все верно.<br>
Путин уже не …  Домен умер<br>
заменено на ntc.party</p></td><td>2024-08-27T11:46:29.342Z</td></tr><tr><td>ananas</td><td><p>Всем привет.</p>
<p>На устройстве с OpenWRT всё поставилось. Благодарю за проделанную работу.</p>
<p>Есть вопрос: Почему-то обход работает только на одном порту(или на одном клиенте) с которого я и заходил в роутер через ssh.</p>
<p>Можете подсказать как сделать чтобы обход работал и на других портах?</p>
<p>Спасибо.</p></td><td>2024-08-28T06:47:22.436Z</td></tr><tr><td>bolvan</td><td><p>Я не думаю, что это связано с портами свитча. Совпадение, причина в другом.<br>
Но стоит проверить на всякий случай не включен ли offloading в настройках фаервола.</p>
<p>Иначе надо поднимать логгинг (–debug в tpws, nfqws - см доку) и смотреть заворачивается ли трафик</p></td><td>2024-08-28T07:05:42.729Z</td></tr><tr><td>ananas</td><td><p>Благодарю за ответ.</p>
<p>Кажется вы правы, может быть причина в другом.</p>
<p>На устройстве с OpenWrt всего 3 порта - Wan и 2 Lan. Десктоп(с которого всё работает), и второй LAN занял еще один роутер - возможно беда в нём. Буду смотреть в сторону его настроек. Может что-то надо сделать в настройках DHCP.</p>
<p>Потыкаюсь.</p>
<p>Еще раз спасибо.</p></td><td>2024-08-28T08:41:48.489Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Здравствуйте. Можете подсказать. По какому Принцип работы. Приложение 1.1.1.1 warp cloudflare Почему она обходится zapret И спокойно Работает. А вот wg warp config cloudflare Не обходится zapret</p></td><td>2024-08-28T11:12:22.847Z</td></tr><tr><td>spv82</td><td><p>Про приложение не в курсе. У меня нет проблем с WG Warp в связке с nfqws. Смотрите --debug или что там происходит.</p></td><td>2024-08-28T14:35:20.885Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="spv82" data-post="277" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>debug</p>
</blockquote>
</aside>
<p>Как использовать в роутере keenetic</p></td><td>2024-08-28T16:09:27.936Z</td></tr><tr><td>easyone11</td><td><p>если у вас послед версия запрета<br>
то можно попробовать вот так, будет выгружаться в файл, путь указывайте куда вам надо</p>
<p>NFQWS_OPT_DESYNC=“-debug=@/opt/zapret/log.txt --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-ttl=3 --dpi-desync-fooling=md5sig”</p></td><td>2024-08-28T16:17:23.227Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="easyone11" data-post="279" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>=</p>
</blockquote>
</aside>
<p>вот wg config</p>
<p>initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘0’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
set_socket_buffers fd=6 rcvbuf=2048 sndbuf=32768<br>
fd=6 SO_RCVBUF=4096<br>
fd=6 SO_SNDBUF=65536<br>
seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp<br>
Running as UID=65534 GID=65534<br>
set_socket_buffers fd=4 rcvbuf=65536 sndbuf=32768<br>
fd=4 SO_RCVBUF=131072<br>
fd=4 SO_SNDBUF=65536<br>
packet: id=1 len=176 mark=00000000<br>
IP4: 192.168.40.35 =&gt; 162.159.192.9 proto=udp ttl=127 sport=55477 dport=4500<br>
UDP: 01 00 00 00 70 E9 2F DF E4 82 DF 73 D2 0D B2 D0 9B 97 66 CE 9C DF C4 24 15 82 F5 37 4D 80 3A 60 … : …p./…s…f…$…7M.:` …<br>
desync-cutoff not reached (mode d): 1/2<br>
packet contains wireguard handshake initiation<br>
dpi desync src=192.168.40.35:55477 dst=162.159.192.9:4500<br>
sending fake request : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 … : … …<br>
reinjecting original packet. len=176 len_payload=148<br>
applying linux postnat conntrack workaround<br>
packet: id=1 pass modified. len=28</p>
<p>вот само приложение cloudflare warp<br>
initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘0’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
set_socket_buffers fd=6 rcvbuf=2048 sndbuf=32768<br>
fd=6 SO_RCVBUF=4096<br>
fd=6 SO_SNDBUF=65536<br>
seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp<br>
Running as UID=65534 GID=65534<br>
set_socket_buffers fd=4 rcvbuf=65536 sndbuf=32768<br>
fd=4 SO_RCVBUF=131072<br>
fd=4 SO_SNDBUF=65536<br>
packet: id=1 len=311 mark=00000000<br>
IP4: 192.168.40.35 =&gt; 162.159.192.6 proto=udp ttl=127 sport=52444 dport=2408<br>
UDP: C1 03 87 00 24 46 D6 01 5F 44 C9 AD 71 FE BC C7 64 F0 35 DC C5 B1 76 0E E1 70 FE 94 3D A1 1E 0D … : …$F…_D…q…d.5…v…p…=… …<br>
desync-cutoff not reached (mode d): 1/2<br>
applying tampering to unknown protocol<br>
dpi desync src=192.168.40.35:52444 dst=162.159.192.6:2408<br>
sending fake request : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 … : … …<br>
reinjecting original packet. len=311 len_payload=283<br>
applying linux postnat conntrack workaround<br>
packet: id=1 pass modified. len=28</p></td><td>2024-08-28T17:12:42.299Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Так в первом случае идет соединение по wg:</p>
<aside class="quote no-group" data-username="ivanixa333" data-post="280" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>packet contains wireguard handshake initiation</p>
</blockquote>
</aside>
<p>Во втором по какому-то неизвестному протоколу (видимо что-то кастомное внутри приложения warp)</p>
<aside class="quote no-group" data-username="ivanixa333" data-post="280" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>applying tampering to unknown protocol</p>
</blockquote>
</aside>
<p>Скорее всего вг режется на ТСПУ, а второй протокол нет</p></td><td>2024-08-28T18:31:56.309Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Короче я так понял  wg Cloudflare zapretom Больше не открыть. Всё прикрыли лавочку</p></td><td>2024-08-28T18:50:27.771Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Обрисуйте еще раз свою схему подключения. Выше Вы скидывали дебаг с пк с ipfrag (это был шнур от провайдера воткнут в пк напрямую, без роутера?), а сейчас был дебаг с роутера при включении warp через конфиг WG и через приложение? Я так понимаю что ВГ с роутера не работает? Это кинетик? Покажите еще раз строчку NFQWS_OPT_DESYNC_QUIC из конфига запрета в роутере, покажите строчку с портами которые идут на nfqws. У вас 100% что-то настроено не так по ощущениям.</p></td><td>2024-08-28T19:25:40.599Z</td></tr><tr><td>banana</td><td><p>Всем привет.</p>
<p>BlockCheck сразу кидает алёрт что DNS HIJACK DETECTED. Я правильно понимаю что нужно поставить dnscrypt-proxy+dnsmasq и убедиться что blockcheck не жалуется на DNS прежде чем приступать к дальнейшии действиям?</p>
<p>Спасибо</p></td><td>2024-09-08T10:31:24.562Z</td></tr><tr><td>bolvan</td><td><p>не совсем<br>
жаловаться он не перестанет. он сравнивает системный днс и публичные. разница останется. определить где правда он не может, поскольку у него нет средств обратиться к эталону<br>
но dnscrypt или doh поставить надо</p></td><td>2024-09-08T12:10:37.836Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Скажите пожалуйста, а можно как-то tpws запустить в режиме прокси на windows? Или это нереально?</p></td><td>2024-09-08T16:42:56.723Z</td></tr><tr><td>bolvan</td><td><p>только под wsl<br>
см docs/windows.txt</p></td><td>2024-09-08T17:18:10.451Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Понятно, спасибо!</p></td><td>2024-09-08T17:19:43.534Z</td></tr><tr><td>banana</td><td><p>Привет еще раз.</p>
<p>Что-то я немного уже забамбузлился. Роутер буквально вчера перезагрузился от моргания света и с того момента что бы я ни сделал - работать не хочет.</p>
<p>dnsmasq есть. dnscrypt-proxy уже включён. (есть ли железобетон как проверить что они действительно дают нужный эффект?)</p>
<p>Начинаю подозревать что я как-то не так вбиваю настройки и в первый раз я просто на удаче как-то правильно занёс.</p>
<p>Думаю оператор подкинул палку в колёса, начал собирать новый алгоритм.</p>
<p>blockcheck находит мне конфигурацию и выдает с следующей информацией:</p>
<p>!!! curl_test_https_tls13: working strategy found for ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> : nfqws --dpi-desync=split2 !!!</p>
<p>clearing nfqws redirection</p>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http : tpws --split-http-req=method --hostcase --oob<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http : nfqws --dpi-desync=fake --dpi-desync-ttl=2<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls12 : tpws --split-pos=1<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls12 : nfqws --dpi-desync=split2<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls13 : tpws --split-pos=2<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls13 : nfqws --dpi-desync=split2</li>
</ul>
<p>Можете подсказать как должен выглядеть итоговый файл с настройками?</p>
<p>Я понял полученный результат вот так:</p>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=fake --dpi-desync-ttl=2”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split2”<br>
NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2”<br>
NFQWS_OPT_DESYNC_HTTP6=“”<br>
NFQWS_OPT_DESYNC_HTTPS6=“”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”<br>
NFQWS_OPT_DESYNC_QUIC6=“”</p>
<p>Спасибо.</p></td><td>2024-09-08T19:09:06.381Z</td></tr><tr><td>easyone11</td><td><p>У меня NFQWS_OPT_DESYNC применяется ко всем протоколам, остальное всё закоменчено кроме квика<br>
Мне кажется подбирать под каждый это прям специфичная задача</p>
<p>по dns, блокчек вроде бы в начале проверяет наличие подмены у провайдера и репортует если есть проблема<br>
через nslookup глянуть будет юзаться прокся<br>
сайт <a href="https://www.dnsleaktest.com" rel="noopener nofollow ugc">https://www.dnsleaktest.com</a></p></td><td>2024-09-08T19:51:52.649Z</td></tr><tr><td>dark_spirit</td><td><p>Попробуй убрать значения у этих параметров:</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split2”
NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2”
</code></pre>
<p>PS: и проверь, что запрет вообще запущен. Сам когда ставил, забыл автозапуск подключить и когда свет моргнул он естественно отвалился.</p></td><td>2024-09-08T20:00:23.998Z</td></tr><tr><td>wigeance(Wigeance)</td><td><aside class="quote no-group" data-username="banana" data-post="289" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/65b543/48.png" class="avatar"> banana:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=fake --dpi-desync-ttl=2”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split2”<br>
NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2”</p>
</blockquote>
</aside>
<p>Вы определяете стратегию, а потом в следующих двух строчках переопределяете ее (заменяете на другую). Если вы оставите только самую верхнюю строчку, убедитесь, что эта стратегия у вас работает не только для http, но и для https.</p>
<aside class="quote no-group" data-username="banana" data-post="289" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/65b543/48.png" class="avatar"> banana:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”</p>
</blockquote>
</aside>
<p><a href="https://github.com/bol-van/zapret#:~:text=%D0%94%D0%BB%D1%8F%20UDP%20%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D1%83%D1%8E%D1%82%20%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE%20%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D1%8B%20%D0%B4%D0%B5%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8%20fake%2Chopbyhop%2Cdestopt%2Cipfrag1%2Cipfrag2%2Cudplen%2Ctamper.">Для UDP действуют только режимы десинхронизации fake,hopbyhop,destopt,ipfrag1,ipfrag2,udplen,tamper.</a></p></td><td>2024-09-08T21:24:21.847Z</td></tr><tr><td>banana</td><td><p>Всем привет.</p>
<p>Благодарю dark_spirit, easyone11, wigeance за ответы выше.</p>
<p>Попробовал поставить только первую строчку с результатом блокчера - лучший результат, пока что, то что я смог курлануть рутрекер, но в вебе он все равно не грузился, ютуб продолжал лагать.</p>
<p>Опишу последовательность действий, которые были предприняты позже по порядку т.к. возможно загвоздка где-то в других деталях.</p>
<ol>
<li>
<p>Полный вайп ПО роутера.</p>
</li>
<li>
<p>Создание нового PPPoE соединения с добавлением портов в пул. Добавлял интерфейсы в пул wan, wan6 - всё работает. Если добавлять lan - почему-то работает всё наполовину, будто половина сайтов не резолвились - здесь я не совсем понимаю что так, добавил в пул wan, wan6 т.к. с ними всё ок.</p>
</li>
<li>
<p>Установка dnscrypt-proxy2, который при старте жалуется что нет конфига. Запускал позже с --config с указанием пути - жаловался на 53-й порт, занят DNSMASQ’ом.</p>
</li>
<li>
<p>Стартовал DNSMASQ - фейлился при старте с ошибой udhcp no lease, failing. Где-то пишут в сети что она не критичная и не аффектит вас никак если у вас PPPoE, подтвердить, это, я конечно же не могу.<br>
После таких-то манипуялций из двух пунктов выше сделал вывод что связка не работает.</p>
</li>
<li>
<p>Позже решил что надо какой-то путь попроще и поискал видео на ютубе, нашел видео от Van Tech Corner про DoH(https-dns-proxy + dnsmasq), вайпнул с нуля, сделал как по гайду с установой luci-app, с виду всё работает, но не уверен решает ли это проблему, о которой предупреждает blockckeck при старте.</p>
</li>
<li>
<p>Ищу новый алгоритм. Нашлось --dpi-desync=disorder2.</p>
</li>
<li>
<p>Запускаю install_easy. NFQWS, поле с QUIC оставляю как есть, остальные стираю, ставлю первой строчкой  NFQWS_OPT_DESYNC=“–dpi-desync=disorder2”.</p>
</li>
<li>
<p>Дальше протыкиваю всё Y. Качаем хостлист, пункт 3.</p>
</li>
<li>
<p>Курлую рутрекер - есть ответ в курле, в вебе не работает.</p>
</li>
</ol>
<p>По пунктам 3 и 4 путём гуглежки в интернете выяснил что есть 3 конфига - .toml файл dnscrypt-proxy, dnsmasq.conf, и udhcp конфиг. Я правильно понимаю что сейчас вся беда в том что связка из пунктов 3 и 4 не работает и нужно править конфига? Или их установкой и неверной конфигурацией я и сам zapret ломаю?</p>
<p>P.S. Делал zapret начистую без манипуляций с днскриптом и днсмаском - не работало.</p>
<p>На данном этапе могу сделать всё с полного нуля с вайпами т.к. уже отладил процесс до буквально тройки минут.</p>
<p>Буду благодарен за любой совет.</p>
<p>Спасибо.</p></td><td>2024-09-09T05:05:03.482Z</td></tr><tr><td>easyone11</td><td><ol>
<li>По DNS, могу посоветовать сделать как у меня, это наверно не бестпрактикс, но в данном случае у меня работает<br>
ставишь https-dns-proxy<br>
удаляешь в HTTPS DNS Proxy - Instances существующие<br>
добавляешь в самом низу Custom данный DOH <a href="https://dns.controld.com/comss" rel="noopener nofollow ugc">https://dns.controld.com/comss</a><br>
проверить работает или нет по ссылке <a href="http://www.dnsleaktest.com" rel="noopener nofollow ugc">www.dnsleaktest.com</a> и <a href="https://controld.com/status" class="inline-onebox" rel="noopener nofollow ugc">Configuration Status</a><br>
я этот doh добавлял для работы chatpgt, по идеи клауд и гугл тоже рабочие</li>
<li>Тестируй доступность заблокированных сайтов в режиме none или autohostlist, это исключит ошибки с имена доменов в твоём лист, как всё оттестишь можно превестись в hostlist</li>
<li>В браузере F12 и смотри закладку network, будешь видеть куда обращается сайт</li>
<li>Поиск рабочей стратегии это самый геморой уже, либо перебором из того что блокчек выдаёт по разным сайтам, либо читать что каждый параметр значит и в этом разбираться после чего подставлять нужные</li>
</ol></td><td>2024-09-09T06:01:27.196Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>А можно для каждого хоста свою стратегию прописать?<br>
Или в будущем может реализуется такая возможность?</p></td><td>2024-09-11T06:35:51.041Z</td></tr><tr><td>bolvan</td><td><p>обычно такое желание возникает из-за непонимания как работают стратегии и  следовательно от неумения находить общий знаменатель<br>
но и правда бывают случаи, когда это нужно<br>
возможно, осенью сделаю</p></td><td>2024-09-11T13:18:04.161Z</td></tr><tr><td>_rv</td><td><p>Ростелеком, Омск - умер ютуб. Сервера <a href="http://rr9---sn-n8v7snl7.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-n8v7snl7.googlevideo.com</a> <a href="http://rr2---sn-gvnuxaxjvh-vhnl.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-gvnuxaxjvh-vhnl.googlevideo.com</a> <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> - ns_binding_aborted</p>
<p>Я читал, что для гуглвидео блокчек запускать нет смысла, тогда какой у меня алгоритм для поиска решения? Пока что остальные заблокированные сайты открываются - да тот же нтц пати.</p>
<p>rr9, rr2 - пингуются, так что, наверно, это не блокировка по ip?</p></td><td>2024-09-12T12:21:14.225Z</td></tr><tr><td>Ori</td><td><p>В командной строке проверьте вот так <code>curl -sv -o NUL https://rr*---</code> и там адрес проблемных серверов вставьте.</p>
<p>В соседней теме пишут что начали фильтровать --wrong-seq, так что попробуйте другую стратегию.</p></td><td>2024-09-12T12:35:19.935Z</td></tr><tr><td>IndeecFOX(IndeecFox)</td><td><p>Если используете GoodByeDPI, то:<br>
В батнике (.cmd) прописать вместо -9 надо -7, либо -q -f 2 -k 2 -n -e 2 --reverse-frag --wrong-chksum --max-payload<br>
Начали фильтровать --wrong-seq</p></td><td>2024-09-12T12:38:32.166Z</td></tr><tr><td>_rv</td><td><pre><code class="lang-auto">* Host rr9---sn-n8v7snl7.googlevideo.com:80 was resolved.
* IPv6: (none)
* IPv4: 173.194.151.27
*   Trying 173.194.151.27:80...
* Connected to rr9---sn-n8v7snl7.googlevideo.com (173.194.151.27) port 80
&gt; GET / HTTP/1.1
&gt; Host: rr9---sn-n8v7snl7.googlevideo.com
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/1.1 404 Not Found
&lt; Date: Thu, 12 Sep 2024 12:38:19 GMT
&lt; Content-Type: text/html; charset=UTF-8
&lt; Server: gvs 1.0
&lt; Content-Length: 1561
&lt; X-XSS-Protection: 0
&lt; X-Frame-Options: SAMEORIGIN
&lt;
{ [1561 bytes data]
* Connection #0 to host rr9---sn-n8v7snl7.googlevideo.com left intact
</code></pre>
<p>Остальные дают такой же ответ.</p></td><td>2024-09-12T12:40:17.390Z</td></tr><tr><td>_rv</td><td><p>Если бы я пользовался GoodByeDPI, я бы написал в соответствующий раздел. Впрочем, сейчас попробую ваши параметры.</p></td><td>2024-09-12T12:41:14.542Z</td></tr><tr><td>Ori</td><td><p>Сорян, я не заметил что это раздел запрета.</p>
<p>Https используйте, он у вас через 80 порт курлится. Какая у вас стратегия? Попробуйте md5sig добавить. Возможно badseq фильтровать начали.</p></td><td>2024-09-12T12:41:19.108Z</td></tr><tr><td>_rv</td><td><pre><code class="lang-auto">--wf-tcp=80,443 --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig
--wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=11  --dpi-desync-fooling=md5sig
</code></pre>
<p>дефолтная рекомендация, насколько я понимаю</p></td><td>2024-09-12T12:45:05.764Z</td></tr><tr><td>Ori</td><td><p>Попробуйте <code>-dpi-desync=fake,disorder --dpi-desync-fooling=badseq</code> или <code>-dpi-desync=fake,disorder --dpi-desync-fooling=badsum</code> для начала. И сделайте нормально curl, прописав адрес с https в начале. Отключите quic и kyber, если не отключали.</p></td><td>2024-09-12T12:46:35.257Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="Ori" data-post="302" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Https используйте</p>
</blockquote>
</aside>
<p>оплошался, да</p>
<pre><code class="lang-auto">* Host rr2---sn-gvnuxaxjvh-vhnl.googlevideo.com:443 was resolved.
* IPv6: (none)
* IPv4: 79.133.76.13
*   Trying 79.133.76.13:443...
* Connected to rr2---sn-gvnuxaxjvh-vhnl.googlevideo.com (79.133.76.13) port 443
* schannel: disabled automatic use of client certificate
* ALPN: curl offers http/1.1
* Recv failure: Connection was reset
* schannel: failed to receive handshake, SSL/TLS connection failed
* Closing connection
* schannel: shutting down SSL/TLS connection with rr2---sn-gvnuxaxjvh-vhnl.googlevideo.com port 443
* Send failure: Connection was reset
* schannel: failed to send close msg: Failed sending data to the peer (bytes written: -1)
</code></pre></td><td>2024-09-12T12:46:56.381Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group quote-modified" data-username="Ori" data-post="304" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p><code>badseq</code>, <code>badsum</code></p>
</blockquote>
</aside>
<p>к сожалению, без изменений</p></td><td>2024-09-12T12:52:34.369Z</td></tr><tr><td>Ori</td><td><p>У вас какой-то непонятный курл. Вы можете последнюю версию скачать и с ней повторить? Посмотрите <a href="https://ntc.party/t/%D1%80%D0%B5%D0%B7%D0%BA%D0%BE-%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C-%D1%8E%D1%82%D1%83%D0%B1-%D0%B8-%D0%B7%D0%B0%D0%B2%D0%B8%D1%81-%D0%BF%D1%80%D0%B8%D1%8D%D1%82%D0%BE%D0%BC/9988">соседнюю тему</a> про gdpi, может это тоже ваш случай.</p></td><td>2024-09-12T12:53:12.387Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Они включили stateless и на TCP.<br>
<a href="https://ntc.party/t/%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BE-%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D1%82%D1%81%D0%BF%D1%83/4625/161">Тут писал про udp</a>, но с сегодняшнего дня и на tcp stateless режим. Можно хоть 20 фейков отправить на TCP все равно дропает соединение. Обычный сплит или дисордер работает прекрасно.</p></td><td>2024-09-12T13:00:16.183Z</td></tr><tr><td>_rv</td><td><blockquote>
<p>Можно хоть 20 фейков отправить на TCP все равно дропает соединение. Обычный сплит или дисордер работает прекрасно.</p>
</blockquote>
<p>Спасибо!</p></td><td>2024-09-12T13:04:59.424Z</td></tr><tr><td>Davinchee</td><td><aside class="quote no-group" data-username="_rv" data-post="309" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/_rv/48/6179_2.png" class="avatar"> _rv:</div>
<blockquote>
<p>Спасибо!</p>
</blockquote>
</aside>
<p>Приветствую ! Только разбираюсь с zapret, нататил на кинетик и радовался какое-то время. Ситуация аналогичная, Ростелеком, Омск. Вам удалось пофиксить сегодняшний отвал ?<br>
Спасибо</p></td><td>2024-09-12T13:42:16.509Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="_rv" data-post="297" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/_rv/48/6179_2.png" class="avatar"> _rv:</div>
<blockquote>
<p>Я читал, что для гуглвидео блокчек запускать нет смысла</p>
</blockquote>
</aside>
<p>Ну для самого гуглвидео - да, понятно, а если для конкретного ggc <a href="http://rr9---sn-n8v7snl7.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-n8v7snl7.googlevideo.com</a> ?<br>
Мне выдал вот такое<br>
<code>ipv4 rr9---sn-n8v7snl7.googlevideo.com curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2</code></p>
<blockquote>
<p>Обычный сплит или дисордер работает прекрасно.</p>
</blockquote>
<p>Т.е вполне рабочий способ через blockcheck</p></td><td>2024-09-12T13:52:18.706Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Попробуйте тоже конфиг без фейков</p>
<pre><code class="lang-auto">--dpi-desync=disorder2
--dpi-desync=split2
</code></pre>
<p>Ну или подберите свой через blockcheck. Когда спросит</p>
<blockquote>
<p>specify domain(s) to test. multiple domains are space separated.<br>
domain(s) (default: <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a>) :</p>
</blockquote>
<p>Вставьте там свой ggc вида rr*…googlevideo.com</p></td><td>2024-09-12T14:11:52.261Z</td></tr><tr><td>_rv</td><td><p>Свой конфиг я оставлял выше. Если у вас такой же, убрать фейк для хттп(с) или вместо него добавить сплит, для юдп вместо fake - split. Можно поэкспериментировать со split2 как вам написали выше.</p></td><td>2024-09-12T14:38:41.933Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="TesterTi" data-post="311" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Т.е вполне рабочий способ через blockcheck</p>
</blockquote>
</aside>
<p>Мне казалось, что там нюанс с тем, что на ютуб не блокировка, а замедление, но если работает, значит я неверно понял. Буду знать, в случае новых проблем сразу начну с блокчека.</p></td><td>2024-09-12T14:41:00.509Z</td></tr><tr><td>Ori</td><td><p>Так на udp сплит не работает же, вроде?<br>
<code>Для UDP действуют только режимы десинхронизации fake,hopbyhop,destopt,ipfrag1,ipfrag2,udplen,tamper.</code> из <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.txt" rel="noopener nofollow ugc">readme</a>.<br>
Ну или я опять не так понял <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"></p></td><td>2024-09-12T14:49:34.653Z</td></tr><tr><td>Davinchee</td><td><aside class="quote no-group" data-username="TesterTi" data-post="312" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Попробуйте тоже конфиг без фейков</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="_rv" data-post="313" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/_rv/48/6179_2.png" class="avatar"> _rv:</div>
<blockquote>
<p>Свой конфиг я оставлял выше. Если у вас такой же, убрать фейк для хттп(с) или вместо него добавить сплит, для юдп вместо fake - split. Можно поэкспериментировать со split2 как вам написали выше.</p>
</blockquote>
</aside>
<p>Спасибо ! Зашелестело.</p></td><td>2024-09-12T15:11:35.572Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Все правильно вы поняли, на udp есть только эти режимы. При чем ipfrag1,ipfrag2 еще и требуют доп настроек или nftables.</p></td><td>2024-09-12T15:18:55.010Z</td></tr><tr><td>Axolder</td><td><p>Господа, подскажите пожалуйста что поменять? Просто fake убрать? Или вместо него split2?<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4”</p>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake,disorder2 --dpi-desync-repeats=6 --dpi-desync-ttl=0  --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum”</p></td><td>2024-09-12T16:11:08.884Z</td></tr><tr><td>dark_spirit</td><td><p>Спасибочки! Без fake заработало.</p></td><td>2024-09-12T16:17:04.326Z</td></tr><tr><td>Axolder</td><td><p>Так оставили?<br>
NFQWS_OPT_DESYNC=“–dpi-desync=disorder2</p></td><td>2024-09-12T16:18:30.179Z</td></tr><tr><td>Davinchee</td><td><p>Да, убрать fake и добавить split. У меня с таким конфигом заработало<br>
NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4”</p>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=disorder2 —dpi-desync=split --dpi-desync-repeats=6 --dpi-desync-ttl=0  --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum”</p></td><td>2024-09-12T16:18:52.183Z</td></tr><tr><td>dark_spirit</td><td><p>Не, я в своем конфиге fake убрал. Мой так выглядит (подсмотрел на гите в обсуждении):<br>
<code>NFQWS_OPT_DESYNC="--dpi-desync=split2 --dpi-desync-autottl=1:1-10 --dpi-desync-fooling=md5sig"</code><br>
Работает на телефоне, пк и самсунг-тв</p></td><td>2024-09-12T16:19:45.354Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="Ori" data-post="315" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Ну или я опять не так понял <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"></p>
</blockquote>
</aside>
<p>нет, вы верно прочитали, это я ридми не читал вообще.</p>
<blockquote>
<p>Для UDP действуют только режимы десинхронизации fake,hopbyhop,destopt,ipfrag1,ipfrag2,udplen,tamper.</p>
</blockquote>
<p>при этом</p>
<blockquote>
<p>Режимы десинхронизации hopbyhop, destopt и ipfrag1 (не путать с fooling !) относятся только к ipv6<br>
Режим tamper … На текущий момент работает только с DHT.</p>
</blockquote>
<p>fake, как сказали выше, не работает при statless dpi, что объясняет тот факт, что у меня никогда при включенном запрете http3 и не работал, весь трафик ютуба был h1 h2. Получается для экспериментов, остается ipfrag2 и udplen.</p>
<p>С ipfrag2 тоже нюансы</p>
<blockquote>
<p>кое-где бывает, что режут и фрагментированный udp.<br>
Роутеры на базе linux могут самопроизвольно собирать или перефрагментировать пакеты.</p>
</blockquote>
<p>Может быть, сработает -dpi-desync-fooling, тоже нужны эксперименты. Но пока что у меня работает сплит, а то, что QUIC не работает - с этим можно жить.</p></td><td>2024-09-12T16:21:41.477Z</td></tr><tr><td>Axolder</td><td><p>Спасибо а это какой провайдер?</p></td><td>2024-09-12T16:55:47.755Z</td></tr><tr><td>easyone11</td><td><p>спс<br>
мгтс мск, заработало<br>
PS<br>
на компе и телефоне  пашет, на телеке нет</p></td><td>2024-09-12T17:30:47.884Z</td></tr><tr><td>Axolder</td><td><p>тоже вот на приставке отвалилось, если просто fake убрать</p></td><td>2024-09-12T17:42:32.792Z</td></tr><tr><td>Axolder</td><td><p>split вместо fake добавить? NFQWS_OPT_DESYNC="–dpi-desync=split,disorder2</p></td><td>2024-09-12T17:44:17.001Z</td></tr><tr><td>kotbaly</td><td><p>Подскажите ваши настройки?</p></td><td>2024-09-12T18:11:41.274Z</td></tr><tr><td>BBS</td><td><p>МГТС, МСК<br>
Под linux: NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync=split2 --dpi-desync-ttl=3 --dpi-desync-split-pos=1”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split --dpi-desync-fooling=md5sig”<br>
На этой машине работает проксик microsocks, через него вроде всё работает.<br>
Под windows с теми же настройками нормально работает youtube, но rutracker и другие сайты не открываются.<br>
win 7 64, браузер chrome, quick отключен.<br>
Что я упустил?</p></td><td>2024-09-12T18:47:39.280Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А blockcheck что вам советует для rutracker на win 7?</p></td><td>2024-09-12T18:50:22.369Z</td></tr><tr><td>BBS</td><td><pre><code class="lang-auto">* SUMMARY
ipv4 rutracker.org curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig
ipv4 rutracker.org curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1
</code></pre>
<p>NFQWS не предлагает ( Неужели дело в проксике?</p></td><td>2024-09-12T19:32:40.902Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Честно говоря, не знаю. Это же виндовый blockcheck<br>
У вас такой конфиг работает для ютуба и рутрекера одновременно?<br>
<code>--dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1</code></p></td><td>2024-09-12T19:54:27.617Z</td></tr><tr><td>Anon1</td><td><p>Начали блокировать стандартный payload фейка. Достаточно поменять payload на какой-нибудь другой, например, так:<br>
<code>--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_sberbank_ru.bin</code></p></td><td>2024-09-12T20:11:52.768Z</td></tr><tr><td>BBS</td><td><p>Для рутрекера - да. Для ютуба - нет.</p></td><td>2024-09-12T20:23:18.090Z</td></tr><tr><td>dark_spirit</td><td><p>Ростелеком</p></td><td>2024-09-12T20:29:45.544Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Получается, для ютуба</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync=split2 --dpi-desync-ttl=3 --dpi-desync-split-pos=1”
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split --dpi-desync-fooling=md5sig”
</code></pre>
<p>а для рутрекера</p>
<pre><code class="lang-auto">winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1
winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig
</code></pre></td><td>2024-09-12T20:30:07.734Z</td></tr><tr><td>9IzzrxYZ</td><td><p>Спасибо тебе, Anon1!<br>
Заработало, РТК Мос. обл.</p></td><td>2024-09-12T20:36:52.652Z</td></tr><tr><td>Axolder</td><td><p>Fake убрал, но с таким конфигом у меня не заовдится ютюб<br>
NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4”</p>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=disorder2 —dpi-desync=split --dpi-desync-repeats=6 --dpi-desync-ttl=0 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum”</p></td><td>2024-09-12T20:42:58.240Z</td></tr><tr><td>BBS</td><td><p>Спасибо, мудрый человек. Итоговый конфиг:<br>
<code>NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_sberbank_ru.bin"</code><br>
Работает и для винды, и для linux, и ютуб, и рутрекер, и даже этот форум.</p>
<details>
<summary>
Спойлер</summary>
<p>Но вк видео и рутуб всё равно тормозит, даже VPN не помогает. <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
</details></td><td>2024-09-12T20:47:45.810Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="BBS" data-post="339" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/e47774/48.png" class="avatar"> BBS:</div>
<blockquote>
<p>Но вк видео и рутуб всё равно тормозит, даже VPN не помогает.</p>
</blockquote>
</aside>
<p>А без запрета они у вас не грузятся что ли? ОО</p></td><td>2024-09-12T20:53:51.367Z</td></tr><tr><td>Axolder</td><td><p>все варианты из ветки перепробовал… странно</p></td><td>2024-09-12T21:00:51.852Z</td></tr><tr><td>BBS</td><td><aside class="quote no-group" data-username="TesterTi" data-post="340" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>А без запрета они у вас не грузятся что ли? ОО</p>
</blockquote>
</aside>
<p>Грузятся, но видео тормозит. Я думал роскомпозор постарался…</p></td><td>2024-09-12T21:00:55.853Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А если их в список исключений запихнуть?  --hostlist-exclude=“exclude.txt”</p></td><td>2024-09-12T21:03:19.911Z</td></tr><tr><td>BBS</td><td><p>Они тормозят независимо от провайдера, методов обхода и страны. Особенно видосы 10-летней давности. Сорри за оффтоп.</p></td><td>2024-09-12T21:07:13.185Z</td></tr><tr><td>Axolder</td><td><p>Что-то не получается, и fake убрал и autottl пробовал. Мтсу не помог.</p></td><td>2024-09-12T21:53:45.687Z</td></tr><tr><td>BBS</td><td><p>Перестал работать для ютуба. Теперь работает такой:<br>
<code>NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-fooling=badsum --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_sberbank_ru.bin"</code></p></td><td>2024-09-13T04:37:41.225Z</td></tr><tr><td>mrplap</td><td><p>Странно. Вечером помогло для ютуба. Сейчас утром не работает с ютубом. Остальное как работало, так и работает.</p></td><td>2024-09-13T04:43:02.808Z</td></tr><tr><td>bolvan</td><td><p>на  моих провайдерах стандартный фейк не портит <a href="http://googlevideo.com">googlevideo.com</a><br>
но в целом раз они начали охоту, придется делать рандомизированый фейк<br>
по шаблону фокса<br>
из гудбая тоже секут фейк ?</p></td><td>2024-09-13T04:59:26.162Z</td></tr><tr><td>newb1e</td><td><p>С гудбая и начали. Запрет у меня еще работает со стандартным пейлоадом, а гудбай уже нет. Но это только гуглвидео касается, остальное продолжает работать как раньше.</p></td><td>2024-09-13T06:13:20.080Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>На одном прове продолжает работать:<br>
<code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</code><br>
только ролики стартуют через пару секунд.</p>
<p>На втором прове пришлось поменять на:<br>
<code>--dpi-desync=disorder --dpi-desync-fooling=md5sig</code></p>
<p>Вот если ба <code>winws</code> умел применять разные стратегии для разных наборов доменов…</p></td><td>2024-09-13T06:20:24.476Z</td></tr><tr><td>bolvan</td><td><p>надо поменять фейк пейлоад как выше рассказали<br>
скоро сделаю рандомизацию дефолтного пейлоада<br>
разные стратегии будут еще не скоро</p></td><td>2024-09-13T06:48:41.774Z</td></tr><tr><td>Sivirus(Snake)</td><td><p>То есть на ТСПУ РКН заблочил (научился находить) определённый fake?</p></td><td>2024-09-13T07:10:10.762Z</td></tr><tr><td>electrifying</td><td><p>А как скоро ждать апдейт?</p></td><td>2024-09-13T07:12:42.800Z</td></tr><tr><td>bolvan</td><td><p>как пишут - похоже на то<br>
мера не особо эффективная<br>
легко исправляется<br>
правда, в гудбае вроде нет кустомизации пейлоада<br>
так что без исправления кода никак<br>
либо найти в коде проги этот запрос и исправить в хекс эдиторе</p>
<p>но главная новость не в этом<br>
недавно вышли статьи, где говорится, что выделяют 60 лярдов на тспу<br>
значит текущие мощности не позволяют люто фильтровать все методы дурения<br>
потому делают затычки как эта</p></td><td>2024-09-13T07:32:46.122Z</td></tr><tr><td>bolvan</td><td><p>рандомизацию - в выходные сделаю скорее всего<br>
а разные стратегии там надо выделить несколько дней, чтобы не отвлекаться<br>
пока не могу<br>
осенью видимо в октябре</p></td><td>2024-09-13T07:39:32.645Z</td></tr><tr><td>Ned</td><td><p>У меня изначально был vk, когда ночью все начало отваливаться у меня работало, но с утра и vk отвалился.<br>
Работает без fake, только фрагментация.<br>
Возможно еще и ttl смотрят.</p></td><td>2024-09-13T07:43:15.828Z</td></tr><tr><td>bolvan</td><td><p>с нестандартным фейком тоже не пашет ?</p></td><td>2024-09-13T07:49:29.944Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><p>если в openssl создать tls1.0 clienthello (openssl s_client -connect <a href="http://domain.ru:443" rel="noopener nofollow ugc">domain.ru:443</a> -msg -tls1), вывод получается всего на 75 байт, можно поправить первые байты (16 03 01 <strong>02 00</strong> (до размера 528 как в примерах), далее добить нулями - такой payload для всех доменов кроме googlevideo работает</p></td><td>2024-09-13T07:49:52.035Z</td></tr><tr><td>easyone11</td><td><p>Мне интересно какой % людей используют метод дурения трафика для обхода блокировок, судя по своему окружению это примерно никто (за исключением людей работающих в айти сфере), что ркн считает это проблемой такого маштаба что на это тратит силы и средства.<br>
Если конечно vpn не используют такие же методы и в целом идёт борьба против vpn (вот как раз vpn юзают на право и не лево)</p></td><td>2024-09-13T07:50:42.838Z</td></tr><tr><td>Elevator</td><td><p>Пейлоад <a href="http://vk.com" rel="noopener nofollow ugc">vk.com</a> на tcp не работает. Стоит убрать fake как трафик сразу проходит<br>
Пейлоад <a href="http://iana.org" rel="noopener nofollow ugc">iana.org</a> тоже не проходит</p>
<p>Похоже РКН просто скопировали пейлоады байт в байт и добавили в фильтр</p>
<p>Пейлоады на udp проходят нормально</p></td><td>2024-09-13T07:51:48.925Z</td></tr><tr><td>bolvan</td><td><p>еще попробовать стоит скрытый фейк с seqovl с паттерном в виде фейкового клиентхелло и сплит позицией под размер паттерна</p></td><td>2024-09-13T07:52:27.151Z</td></tr><tr><td>bolvan</td><td><p>провы некоторые начали дурить<br>
один похвастался на гитхабе<br>
я написл ему все что думаю об этом<br>
тут же смылся, удалив комент<br>
идиоты. ради сиюминутного бонуса портят всю малину<br>
нихрена особо не достигнув</p></td><td>2024-09-13T07:55:28.719Z</td></tr><tr><td>bolvan</td><td><p>а если свой пейлоад записать в шарке от фокса без кибера ?<br>
на неблоченый домен.<br>
важно понять они тупо внесли стандартные пейлоады из запрета<br>
или универсальный детект фейка сделали<br>
у кого-то работал фейк с гос услугами<br>
и убедитесь, что фейк не доходит до сервера<br>
ограничитель достаточен</p></td><td>2024-09-13T07:58:02.772Z</td></tr><tr><td>Axolder</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> не подскажите, что можно сделать на кинетике? Провайдер МТС, удаление fake не помогает.</p>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4”</p>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=disorder2 --dpi-desync-repeats=6 --dpi-desync-ttl=0  --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum”</p></td><td>2024-09-13T08:01:21.665Z</td></tr><tr><td>Paco_Taco</td><td><p>Мне помогло следующее:</p>
<ul>
<li>убрал fake</li>
<li>изменил ttl на 112</li>
<li>перезапустил службу командой  /opt/zapret/init.d/sysv/zapret restart</li>
</ul>
<p>Ютуб руботает и на телеках, и на компах, и на приставках</p></td><td>2024-09-13T08:03:42.381Z</td></tr><tr><td>easyone11</td><td><p>через блокчек попробовать найти другие стратегии и их перебирать не пробовали?</p></td><td>2024-09-13T08:03:55.650Z</td></tr><tr><td>bolvan</td><td><p>для начала этот бред перестать копипастить<br>
дальше экспериментировать<br>
у меня нет готовых рецептов и доступа к прову</p></td><td>2024-09-13T08:04:07.288Z</td></tr><tr><td>bolvan</td><td><p>это значит что ттл вообще не нужен<br>
если нет фейков - не нужны и ограничители</p></td><td>2024-09-13T08:05:25.666Z</td></tr><tr><td>Axolder</td><td><p>да я весь день экспериментирую, всё, что людям помогает, тут отказывается работать.</p></td><td>2024-09-13T08:06:42.542Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><p>нет способа делать блокчек на два домена (т.е. в автомате найти вариант при котором оба будут работать)?</p></td><td>2024-09-13T08:08:42.861Z</td></tr><tr><td>Elevator</td><td><p>Записал свой пейлоад для https. С ним работает. Похоже они просто внесли дефолтные пейлоады</p></td><td>2024-09-13T08:09:47.345Z</td></tr><tr><td>easyone11</td><td><p>ну судя по опциям нет))<br>
делать поочерёдно и сопоставлять видимо только, сопоставить в автоматическом режиме поможет chatgpt какой нибудь</p></td><td>2024-09-13T08:10:06.987Z</td></tr><tr><td>Paco_Taco</td><td><p>попробовал без смены ттл тоже работает. обязательно надо перезапускать NFQWS иначе не работает.</p></td><td>2024-09-13T08:12:10.617Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="easyone11" data-post="360" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>что ркн считает это проблемой такого маштаба что на это тратит силы и средства.</p>
</blockquote>
</aside>
<p>Что, если они отслеживают способы, какие используют люди, и постепенно начинают бороться с ними (а отслеживать могут по техническим ресурсам, например, что именно там люди обсуждают). И потом, может для них это совсем не сложно, просто очередную строку добавить в свои фильтры.</p></td><td>2024-09-13T08:20:40.066Z</td></tr><tr><td>disappointed</td><td><p>Какой домен? Не популярный? Я попробовал с <a href="http://gosuslugi.ru" rel="noopener nofollow ugc">gosuslugi.ru</a> - не прокатило.</p></td><td>2024-09-13T08:24:58.948Z</td></tr><tr><td>easyone11</td><td><p>безусловно отслеживают как и из форумов\сайтов так и через внутр анализ, закрыть все дыры одной строчкой? ну хзхз + тесты + согласования + риски как будут работать другие сайты и тд и тп<br>
не так всё просто, но это так, размышления обывателя, может я и не прав</p></td><td>2024-09-13T08:25:03.729Z</td></tr><tr><td>Elevator</td><td><p>habr. com<br>
Firefox, без kyber</p></td><td>2024-09-13T08:28:22.520Z</td></tr><tr><td>disappointed</td><td><p>Я с хрома делал без кайбера, экспорт шарком. Не работает даже если домен малопосещяемый, щас попробую фокс.</p></td><td>2024-09-13T08:32:46.282Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="Anon1" data-post="333" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/e47774/48.png" class="avatar"> Anon1:</div>
<blockquote>
<p>tls_clienthello_sberbank_ru.bin</p>
</blockquote>
</aside>
<p>Где взять “tls_clienthello_sberbank_ru.bin”?</p></td><td>2024-09-13T08:34:32.816Z</td></tr><tr><td>newb1e</td><td><p>Похоже обманул я Вас. Патч goodbyedpi.exe tlsclienthello <a href="http://vk.com" rel="noopener nofollow ugc">vk.com</a> или <a href="http://gosuslugi.ru" rel="noopener nofollow ugc">gosuslugi.ru</a> мне не помог.</p></td><td>2024-09-13T08:35:22.884Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="Elevator" data-post="372" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/ee59a6/48.png" class="avatar"> Elevator:</div>
<blockquote>
<p>свой пейлоад для https</p>
</blockquote>
</aside>
<p>а можно ссылку на руководство как создавать свои пейлоады через фаирфокс?</p></td><td>2024-09-13T08:36:13.742Z</td></tr><tr><td>Elevator</td><td><p>Я понял в чем дело. Добавьте --dpi-desync-repeats<br>
Одной отправки фейка не достаточно!</p>
<p>Возможно заработает даже с дефолтным пейлоадом. Щас проверю - нет, не работает!!</p>
<p>Так что общая стратегия такая - свой пейлоад + многократная отправка</p></td><td>2024-09-13T08:38:35.587Z</td></tr><tr><td>bolvan</td><td><p>можно 2 отдельно протестить<br>
экспертной функции обьединения стратегий нет. на человека с понималкой расчитано</p></td><td>2024-09-13T08:40:56.814Z</td></tr><tr><td>bolvan</td><td><p>вроде бы рдпшный дпи жует фейк только если сни идет первым экстенжином. нужен фокс</p></td><td>2024-09-13T08:43:16.143Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="MAMBA" data-post="380" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>Где взять “tls_clienthello_sberbank_ru.bin”?</p>
</blockquote>
</aside>
<p>zapret\files\fake</p></td><td>2024-09-13T08:46:39.906Z</td></tr><tr><td>JIPCOROD</td><td><p>спасибо, будем ждать. Как я понимаю в этом случаи каждому пользователю нужно будет вставить собственный домен, при том можно и не существующий?<br>
Ещё было бы очень не плохо иметь возможность одновременной работы в разных режимах: На список ютуба -7 и на остальное стандартный -9. Ведь не выйдет просто запустить 2 программы одновременно?</p></td><td>2024-09-13T08:50:31.512Z</td></tr><tr><td>disappointed</td><td><p>Сделал фоксом, SNI идёт первым, добавил репиты 1…2…16. Не работает.</p></td><td>2024-09-13T08:51:59.970Z</td></tr><tr><td>bolvan</td><td><p>если разделить по ипсетам с АСками - выйдет<br>
но это не очень удобно и не просто</p></td><td>2024-09-13T08:53:51.001Z</td></tr><tr><td>disappointed</td><td><p>А без повторов с 1 фейком работает? Точно нет ошибки относительно того, что с кастомным доменом заработало а не по другой причине которая наложилась?</p></td><td>2024-09-13T08:56:54.432Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>На rr****.googlevideo.com не проходит стандартный фейк точно, не стандартные вчера ходили, сегодня еще не смотрел. Если оно видело фейк, то сразу блочило соединение, при этом ходил фейк 0х00000000 и после можно было split просто сделать и все заводилось.</p>
<p>Еще работает вариант syndata (дефолт 0х00000000), потом фейк (iana) и split2. Срабатывает и гуглвидео и все остальное.</p>
<p>По поводу ТВ у кого они не заводятся, нужна стратегия такая, чтобы и <a href="http://play.google.com">play.google.com</a> и *.googlevideo.com заводились одновременно. Тогда все работает.</p>
<p>На некоторых гуглвидео этого фильтра нет, но вот тут точно он есть (<a href="https://rr3---sn-n8v7kn7k.googlevideo.com/">https://rr3---sn-n8v7kn7k.googlevideo.com/</a>).</p>
<p>UPD: да, нестандартные пейлоады тоже прикрыли. Надо проверять кастомный</p></td><td>2024-09-13T08:57:31.073Z</td></tr><tr><td>Elevator</td><td><p>Нет не работает. Специально оставил только fake<br>
Проверял на googlevideo домене</p>
<p>Тоже самое кстати с quic. Фейк проходит только с повторениями. Но хватает дефолтного фейка</p></td><td>2024-09-13T08:58:46.426Z</td></tr><tr><td>Ori</td><td><p>На моем провайдере (спб, скайнет) пока вообще всё работает с <code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=badseq</code>. А вот питерские ggc ростелекома <code>rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code> с такими настройками уже не курлятся. Решилось заменой fake на rst.</p></td><td>2024-09-13T09:28:56.980Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><aside class="quote no-group" data-username="wigeance" data-post="391" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>UPD: да, нестандартные пейлоады тоже прикрыли. Надо проверять кастомный</p>
</blockquote>
</aside>
<p>кастомный (tls1.2 или 1.3) к разным доменам из firefox - для googlevideo не прокатывает</p></td><td>2024-09-13T09:52:06.680Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>У меня блокчек запрета вообще не находит сейчас рабочей стратегии для этого домена. Приходится заворачивать в впн. РТ МСК. Ай-пи “белый”. Временно это (тесят они что-ли опять) или на совсем теперь это уже другой вопрос. Не исключаю, что перебанят и по аи-пи все скоро. Этим уродам это сделать проще, и им похрен, что отвалится еще что-нибудь. Главное кремлин ру что-бы для них работал. <img src="https://ntc.party/images/emoji/twitter/angry.png?v=12" title=":angry:" class="emoji" alt=":angry:" loading="lazy" width="20" height="20"></p></td><td>2024-09-13T10:15:00.378Z</td></tr><tr><td>Ned</td><td><p>ttl не причем, с любым любой фейк в пролете<br>
работает стратегия без фейков, disorder2 и больше ничего не нужно<br>
на гудбай работает тоже, если без фейков (-e 2 --reverse-frag --blacklist youtube.txt)<br>
но не факт, что повсеместно</p></td><td>2024-09-13T11:14:35.096Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Поддерживаю. Сегодня ночью работал через “disorder2”</p></td><td>2024-09-13T11:36:19.438Z</td></tr><tr><td>disappointed</td><td><p>Необходио отметить, что детект fake работает только при обращении к ip CDN ютуба, это говорит о том, что есть сформированнный список ip адресов для которых изменены правила. Тогда неясно, что мешает им дропнуть коннекты на 443 порт на этот список. Возможно то, что на части адресов размещены ещё какие-то сервисы гугла. Таким образом можно попробовать понять какие, и попробовать подкинуть фейковый payload с соседним доменом гугла. Проверьте кому не лень.</p></td><td>2024-09-13T11:49:56.344Z</td></tr><tr><td>easyone11</td><td><p>вчера вечером у меня в целом перестали открываться сайты под запретом используя fake, точно только для ютуба применяться стали?</p></td><td>2024-09-13T11:57:29.305Z</td></tr><tr><td>m-nikitin(M Nikitin)</td><td><p>Fake больше не работает, еще сегодня с утра работала замена tls clienthello.<br>
Сейчас ни кастомный не срабатывает, ни из списка</p></td><td>2024-09-13T12:21:26.902Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Пользуюсь winws (windows 10). Ночью запустил blockcheck с доменом <a href="http://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</a> - выдало, что fake вообще не нужен. Работает сейчас с такими параметрами - <code>--dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2</code><br>
Остальные заблокированные сайты тоже нормально себя чувствуют.<br>
Провайдер - Prometey Home, Питер.</p></td><td>2024-09-13T12:31:06.195Z</td></tr><tr><td>m-nikitin(M Nikitin)</td><td><p>Да, disorder2 работает,<br>
но у меня с fake работали телевизоры с QUIC</p></td><td>2024-09-13T12:34:42.494Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>На первом прове добавил <code>--dpi-desync-fake-tls=0x00000000</code>, задержки у роликов при старте исчезли.</p></td><td>2024-09-13T12:40:49.602Z</td></tr><tr><td>disappointed</td><td><p>Перед тем как писать предыдущий пост проверял, с fake,disorder2 работали обычные блокнутые домены, ютубовские нет. Сейчас займусь более глубоким изуением.</p></td><td>2024-09-13T13:01:02.913Z</td></tr><tr><td>easyone11</td><td><p>по крайней мере так было вчера вечером (мгтс мск)<br>
сейчас на работе, проверить не могу</p>
<details>
<summary>
такой конфиг был</summary>
<p>–dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-ttl=3 --dpi-desync-fooling=md5sig</p>
</details></td><td>2024-09-13T13:02:20.975Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Вот мои параметры обхода ютуб летает + заблокированные сайты <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"><br>
–dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=0x00000000 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig</p>
<p>Как по мне немного задержка загрузки страницы ютуба есть в остальном все отлично</p></td><td>2024-09-13T13:14:20.244Z</td></tr><tr><td>disappointed</td><td><p>Догадка подтвердилась. С tls payload <a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a> fake не мешает. Файл приложил.<br>
<a class="attachment" href="zapret-обсуждение-726/bKvECo7Y8JjQNyidL2JCTAqpjT7.bin">tls_clienthello_google_com.bin</a> (517 байтов)</p></td><td>2024-09-13T13:19:43.455Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="easyone11" data-post="382" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>а можно ссылку на руководство как создавать свои пейлоады через фаирфокс?</p>
</blockquote>
</aside>
<p>а можно ссылку на руководство как создавать свои пейлоады через фаирфокс?</p></td><td>2024-09-13T13:21:52.786Z</td></tr><tr><td>Ori</td><td><p>Потестил, вот такие варианты у меня рабочие. Мой тспу, похоже, пока фейки не блочит яхз. Проверял через курл к ростелекомовскому гуглвидео. Вместо fooling можно ttl указать, тоже работает. Обычный фейк и дефолтные пейлоады заблочены.</p>
<pre><code class="lang-auto">winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2

winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=rst,disorder2 --dpi-desync-fooling=md5sig
winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=rst,disorder2 --dpi-desync-fooling=badseq

winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fake-tls=0x00000000  --dpi-desync-fooling=md5sig
winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fake-tls=0x00000000  --dpi-desync-fooling=badseq


winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2 --dpi-desync-split-seqovl=1

winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=rst,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig
winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=rst,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=badseq

winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fake-tls=0x00000000 --dpi-desync-fooling=md5sig
winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fake-tls=0x00000000 --dpi-desync-fooling=badseq
</code></pre></td><td>2024-09-13T13:26:30.993Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Оно почти с любым кастомным пейлоадом не мешает. Там просто руками забанили популярные пейлоады (те что в репозитории запрета лежат).</p></td><td>2024-09-13T13:26:52.067Z</td></tr><tr><td>disappointed</td><td><p>Wireshark, захватить трафик при открытии сайта нужного домена, найти строку с Client Hello с нужным SNI=домену, Внизу выделить секцию данных в пакете TLS v… record layer, справа в хексе выделится кусок данных, начало должно быть с 16 03 и до конца.  Дальше правой кнопкой - Экспортировать данные пакета. Это и будет payload для фейка.</p></td><td>2024-09-13T13:27:26.176Z</td></tr><tr><td>disappointed</td><td><p>Я пробовал со своим доменом который мало кому известен - блочат. Также не работает хабр, госуслуги, которых не было в репозиториях. Больше не проверял. И кстати. dpi-desync-repeats оказался не нужен.</p></td><td>2024-09-13T13:28:35.603Z</td></tr><tr><td>Ned</td><td><p>не понял с google fake работает?<br>
я тоже создал пару нештатных - сразу блок включается<br>
там, что у них whitelist что ли</p></td><td>2024-09-13T14:09:08.722Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="disappointed" data-post="407" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>Догадка подтвердилась. С tls payload <a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a> fake не мешает. Файл приложил.</p>
</blockquote>
</aside>
<p>Проверил у себя, тоже самое. Пейлоад от мейлру не прошел, а от гуглдрайва прошел. Забавно.</p></td><td>2024-09-13T14:09:30.539Z</td></tr><tr><td>easyone11</td><td><p>спс, получилось</p></td><td>2024-09-13T14:19:10.347Z</td></tr><tr><td>newb1e</td><td><p>А не подскажете, почему все готовые пейлоады в папке запрета в случае tls_clienthello равны 517 байт из которых примерно 200 последних забиты нулями, а если самому снимать, то пакеты получаются разной длины, с данными до самого конца пакета и обычно длиннее, около 650 байт?</p></td><td>2024-09-13T14:52:51.630Z</td></tr><tr><td>bolvan</td><td><p>стандарт фокса</p></td><td>2024-09-13T15:12:14.905Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="newb1e" data-post="416" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>А не подскажете, почему все готовые пейлоады в папке запрета в случае tls_clienthello равны 517 байт из которых примерно 200 последних забиты нулями</p>
</blockquote>
</aside>
<p>Запрос Curl-ом тоже 517 байт, может зависит от браузера?</p></td><td>2024-09-13T15:13:13.266Z</td></tr><tr><td>Goodzone(Goodzone)</td><td><p>Привет всем. Есть телек с ОС VIDAA. Не могу никак подобрать стратегию, чтобы на нем работал youtube. Как и у всех со вчерашнего дня ютуб перестал работать на всех устройствах. На данный момент использую такую стратегию</p>
<p>–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_gosuslugi_ru.bin --dpi-desync-ttl=6 --dpi-desync-fooling=md5sig,badsum --dpi-desync=disorder</p>
<p>При такой стратегии работает ютуб и все остальное, но только на смартах и ПК, а вот на ТВ при запуске приложения “черный экран”. При этом если, например, поставить --dpi-desync=disorder2 вместо --dpi-desync=disorder, то на ТВ инет вообще пропадает.</p>
<p>Проблема в том, что роутер стоит не у меня и оперативно проверять работоспособность я не могу. Может кто-то уже возился с VIDAA и знает, в чем проблема?</p></td><td>2024-09-13T15:15:35.180Z</td></tr><tr><td>newb1e</td><td><p>Да. Наверное Curl-ом эти 517 байт и делались, а не лисой.</p></td><td>2024-09-13T15:25:00.147Z</td></tr><tr><td>newb1e</td><td><p>Не понимаю, что именно является стандартом - готовые 517 байт или те ~650, которые я вижу в шарке при запросе фаерфоксом v130.0?</p></td><td>2024-09-13T15:32:57.241Z</td></tr><tr><td>disappointed</td><td><p>517 с нулями в конце это curl. Более жирный с ECH это ФФ.</p></td><td>2024-09-13T15:37:58.101Z</td></tr><tr><td>spv82</td><td><p>Тут наглядно <a href="https://tls13.xargs.org/#client-hello/annotated" class="inline-onebox" rel="noopener nofollow ugc">The Illustrated TLS 1.3 Connection: Every Byte Explained</a></p></td><td>2024-09-13T15:41:46.393Z</td></tr><tr><td>newb1e</td><td><p>Спасибо )</p></td><td>2024-09-13T15:50:05.549Z</td></tr><tr><td>electrifying</td><td><p>Скажите пожалуйста если использовать фейк который маскируется под tls clienthello другого сайта то ключ --dpi-desync= должен быть как,например, fake,split2 или просто как split2 без fake? так как будет использоваться ключ --dpi-desync-fake-tls=путь до пейлоада с нужным сайтом?</p></td><td>2024-09-13T15:55:12.347Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><blockquote>
<p>disorder2 и split2 не предполагают отсылку фейк пакетов, поэтому опции ttl и fooling неактуальны</p>
</blockquote>
<p>Насколько понимаю, disorder2 и split2 фейки сами по себе не отправляют, т.е. нужно указывать fake,split2</p></td><td>2024-09-13T16:08:11.093Z</td></tr><tr><td>newb1e</td><td><p>Объясните пожалуйста, в чем смысл <code>--dpi-desync-ttl=0</code>. Это работает, но не понимаю как, нам ведь надо чтобы фейк пакет дошел до DPI, т.е .по идее значение должно быть положительным числом.</p></td><td>2024-09-13T16:13:44.928Z</td></tr><tr><td>bolvan</td><td><p>это значит не применять ограничитель по ттл<br>
работает другой ограничитель fooling<br>
или в стратегии нет методов  отсылкой фейков</p></td><td>2024-09-13T16:21:35.498Z</td></tr><tr><td>bolvan</td><td><p>без fake кастомный пейлоад ничего небудет делать<br>
от относится только к фейку</p></td><td>2024-09-13T16:23:10.965Z</td></tr><tr><td>bolvan</td><td><p>видимо подрос размер. раньше фф выдавал 517</p></td><td>2024-09-13T16:24:32.485Z</td></tr><tr><td>ewgen198409(ewgen1984)</td><td><p>омск. дом.ру. Вроде отрабатывае эта стратегия. Но потребовалось дополнительно ставить dns-proxy2.<br>
DESYNC_MARK=0x40000000<br>
DESYNC_MARK_POSTNAT=0x20000000<br>
NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-ttl=4”<br>
NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split2 --dpi-desync-ttl=4”<br>
NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2 --dpi-desync-ttl=4”<br>
#NFQWS_OPT_DESYNC_HTTP6=<br>
#NFQWS_OPT_DESYNC_HTTPS6=<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2 --dpi-desync-repeats=6”<br>
#NFQWS_OPT_DESYNC_QUIC6=</p></td><td>2024-09-13T16:28:23.972Z</td></tr><tr><td>newb1e</td><td><p>А если этот параметр не указывать, то ограничитель по TTL применяться не будет или будет применено какое-то дефолтное значение?</p></td><td>2024-09-13T16:36:28.014Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="429" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>без fake кастомный пейлоад ничего небудет делать<br>
от относится только к фейку</p>
</blockquote>
</aside>
<p>То есть если сделаю флаг --dpi-desync=fake,split2 и --dpi-desync-fake-tls с кастомным пейлоадем он будет работать</p>
<p>а если --dpi-desync=split2 и --dpi-desync-fake-tls то уже нет. Все правильно?</p></td><td>2024-09-13T16:59:45.701Z</td></tr><tr><td>ech0brav0</td><td><p>Да, именно так</p></td><td>2024-09-13T17:22:47.892Z</td></tr><tr><td>Ned</td><td><p>В split2 нет фейка как и в disorder2. Точнее tls helo есть в fake</p></td><td>2024-09-13T17:23:09.517Z</td></tr><tr><td>Ned</td><td><p>Конец недели…</p></td><td>2024-09-13T17:36:03.372Z</td></tr><tr><td>bolvan</td><td><p>верно</p></td><td>2024-09-13T17:43:19.812Z</td></tr><tr><td>bolvan</td><td><p>не будет<br>
он делает лишь то, что ему сказали<br>
даже если это поломает конект<br>
никаких шаблонов</p></td><td>2024-09-13T17:44:41.595Z</td></tr><tr><td>bolvan</td><td><p>split не работает с удп<br>
куик не дурится</p></td><td>2024-09-13T17:47:22.436Z</td></tr><tr><td>newb1e</td><td><p>ясно, спасибо</p></td><td>2024-09-13T17:56:09.748Z</td></tr><tr><td>Goodzone(Goodzone)</td><td><p>Тест</p></td><td>2024-09-13T18:34:42.299Z</td></tr><tr><td>Goodzone(Goodzone)</td><td><p>Никто не сталкивался с проблемой на ТВ с ОС vidaa?</p></td><td>2024-09-13T18:45:43.462Z</td></tr><tr><td>yatolkosprosit</td><td><p>Хочу попробовать наконец-то zapret на Linux, но совершенно запутался в документации. Я для начала хочу просто попробовать запустить программу указав путь до файла в коммандной строке. Подскажите с какими параметрами нужно ее запустить на данный момент конкретно для Ютуба.<br>
И какие оптимальные правила для nftables использовать? Здесь тоже запутался.</p></td><td>2024-09-13T20:02:17.413Z</td></tr><tr><td>Ned</td><td><p>китайцы вообще для оптимизации, если сами что-то рожают, отклоняются от стандартов, поэтому можете ожидать, что угодно<br>
видел их оборудование, которое с частью оборудования по 100-1000BASE линк толком не могли поднять<br>
HDMI порты без питания<br>
вероятно и с ip у них может упрощено до минимума, чтобы работало только в идеальных условиях<br>
мой совет на будущее, берите просто хороший ТВ, а смарт к нему докупайте в виде Андроид (кому и яблоко) ТВ приставки, только опять же не лютый китай, а нормальные, я для себя выделил Mi Box (да, Китай, но качественный), родные от Google и т.п.<br>
либо (я так понял ОС linux) ищите способ зайти как-то в его консоль (как это по нашему) и поставить запрет прям на телек )</p></td><td>2024-09-13T20:22:08.598Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Ned" data-post="445" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/848f3c/48.png" class="avatar"> Ned:</div>
<blockquote>
<p>берите просто хороший ТВ</p>
</blockquote>
</aside>
<p>Ну а смысл у некоторых людей и на lg и на самсунгах обходы не работают</p></td><td>2024-09-13T20:25:51.030Z</td></tr><tr><td>Ned</td><td><p>я имею ввиду просто хороший ТВ (матрица, звук, но без смарт)… хотя не уверен, есть ли сейчас такие<br>
но даже если у вас со смарт, никто не запрещает добавить ТВ box и пользоваться им, вместо встроенного<br>
хотя, даже у родной гугл приставки я нашел косяк (видимо разные бригады работают) ipv4 протокол приоритетней чем ipv6</p></td><td>2024-09-13T20:29:27.167Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Подскажите, пожалуйста, можно ли подобрать через blockcheck стратегию обхода для конкретного GGC (типа rr…googlevideo.com)? И если да - верно ли написана инcтрукция <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/">https://ntc.party/t/подбор-рабочего-конфига-для-ggc-ютуба-через-blockcheck/</a> ?</p></td><td>2024-09-13T21:07:34.466Z</td></tr><tr><td>newb1e</td><td><p>у меня сейчас ютуб работает с такими параметрами <code>--dpi-desync=disorder2 --dpi-desync-split-pos=1 --dpi-desync-any-protocol</code>. Если убрать <code>--dpi-desync-any-protocol</code>, то сайт зависает при открытии. Если это не quic, то на какой протокол срабатывает этот параметр?</p></td><td>2024-09-13T21:29:29.726Z</td></tr><tr><td>hoztasun</td><td><p>Помогите понять картину. Сегодня при разных стратегиях zapret наблюдаю следующее:</p>
<p>Грузится где-то каждое пятое видео, может реже.</p>
<p>Если для видео предлагается хотя бы один GCS вида rrN—sn-5goXXX, то видео проигрывается. Например:<br>
<a href="http://rr1---sn-5goeenes.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-5goeenes.googlevideo.com</a> 74.125.108.230<br>
<a href="http://rr1---sn-5go7ynlk.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-5go7ynlk.googlevideo.com</a> 173.194.6.6<br>
<a href="http://rr1---sn-5go7ynl6.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-5go7ynl6.googlevideo.com</a> 74.125.111.38<br>
<a href="http://rr2---sn-5go7ynlk.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-5go7ynlk.googlevideo.com</a> 173.194.6.7<br>
<a href="http://rr3---sn-5goeenes.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-5goeenes.googlevideo.com</a> 74.125.108.232<br>
<a href="http://rr3---sn-5go7ynld.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-5go7ynld.googlevideo.com</a> 74.125.111.72<br>
<a href="http://rr4---sn-5go7ynl6.googlevideo.com" rel="noopener nofollow ugc">rr4---sn-5go7ynl6.googlevideo.com</a> 74.125.111.41</p>
<p>Если оба предложенных GCS имеют вид rrN—n8v7XXXX, то видео не проигрывается. Запросы висят несколько секунд и дропаются по таймауту. Например:<br>
<a href="http://rr15---sn-n8v7knel.googlevideo.com" rel="noopener nofollow ugc">rr15---sn-n8v7knel.googlevideo.com</a> 173.194.180.97<br>
<a href="http://rr12---sn-n8v7znzl.googlevideo.com" rel="noopener nofollow ugc">rr12---sn-n8v7znzl.googlevideo.com</a> 74.125.153.156<br>
<a href="http://rr12---sn-n8v7kne7.googlevideo.com" rel="noopener nofollow ugc">rr12---sn-n8v7kne7.googlevideo.com</a> 173.194.177.222<br>
<a href="http://rr1---sn-n8v7knee.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-n8v7knee.googlevideo.com</a> 173.194.178.19<br>
<a href="http://rr10---sn-n8v7znly.googlevideo.com" rel="noopener nofollow ugc">rr10---sn-n8v7znly.googlevideo.com</a> 173.194.178.220<br>
<a href="http://rr9---sn-n8v7zns7.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-n8v7zns7.googlevideo.com</a> 173.194.179.27<br>
<a href="http://rr9---sn-n8v7knes.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-n8v7knes.googlevideo.com</a> 173.194.180.155<br>
<a href="http://rr6---sn-n8v7znly.googlevideo.com" rel="noopener nofollow ugc">rr6---sn-n8v7znly.googlevideo.com</a> 173.194.178.216</p>
<p>Причем, если пинговать адреса из первой группы, с которыми все ок, то для них всех из России пинги ~20мс, из Голландии ~25мс.</p>
<p>Если пинговать проблемные адреса, то из России пинги &lt;3мс, а из Голландии &gt;40мс.</p>
<p>ip у всех вроде американские.</p>
<p>Вчера все работало нормально.</p></td><td>2024-09-13T23:04:18.114Z</td></tr><tr><td>Ori</td><td><p>А почему вам вообще адреса из Швеции подсовывает? Вы какой-нибудь ВПН или цензортрекер используете?<br>
Попробуйте через командную строку <code>curl -sv -o NUL https://rr</code> и сюда пару адресов из первой группы и пару из второй.</p>
<p>Нет, не американские. В первой группе у вас Швеция, во второй - Москва.<br>
<a href="https://www.nslookup.io/domains/rr1---sn-5goeenes.googlevideo.com/dns-records/" rel="noopener nofollow ugc">https://www.nslookup.io/domains/rr1—sn-5goeenes.googlevideo.com/dns-records/</a></p>
<p>Попробуйте стратегии из вот <a href="https://ntc.party/t/%D0%B5%D1%81%D0%BB%D0%B8-%D1%83-%D0%B2%D0%B0%D1%81-%D1%81%D0%B5%D0%B3%D0%BE%D0%B4%D0%BD%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB%D0%B8-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C%D1%81%D1%8F-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D0%BD%D0%B0-youtube-%D0%B2%D0%B0%D0%BC-%D1%81%D1%8E%D0%B4%D0%B0/10007/530">этого</a> поста.</p></td><td>2024-09-13T23:11:07.534Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>На адресах ggc стоящих в рф и стыках google в РФ они включили тот самый фильтр что режет фейки. До адресов вне РФ у них руки не дошли.<br>
Поэтому адреса в РФ пробиваются одной стратегией, адреса вне РФ другой.</p></td><td>2024-09-13T23:22:57.191Z</td></tr><tr><td>Ori</td><td><p>У меня вообще адреса из обоих списков без обхода достаются <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"></p></td><td>2024-09-13T23:28:53.952Z</td></tr><tr><td>hoztasun</td><td><p>Хорошие:</p>
<details>
<summary>
rr1---sn-5goeenes</summary>
<pre><code class="lang-auto">curl -sv -o NUL https://rr1---sn-5goeenes.googlevideo.com
* Host rr1---sn-5goeenes.googlevideo.com:443 was resolved.
* IPv6: 2a00:1450:400f::6
* IPv4: 74.125.108.230
*   Trying 74.125.108.230:443...
* Connected to rr1---sn-5goeenes.googlevideo.com (74.125.108.230) port 443
* GnuTLS ciphers: NORMAL:-ARCFOUR-128:-CTYPE-ALL:+CTYPE-X509:-VERS-SSL3.0
* found 171 certificates in /etc/ssl/certs/ca-certificates.crt
* found 515 certificates in /etc/ssl/certs
* SSL connection using TLS1.3 / ECDHE_RSA_AES_256_GCM_SHA384
*   server certificate verification OK
*   server certificate status verification SKIPPED
*   common name: *.c.docs.google.com (matched)
*   server certificate expiration date OK
*   server certificate activation date OK
*   certificate public key: EC/ECDSA
*   certificate version: #3
*   subject: CN=*.c.docs.google.com
*   start date: Tue, 27 Aug 2024 14:31:13 GMT
*   expire date: Tue, 05 Nov 2024 14:31:12 GMT
*   issuer: C=US,O=Google Trust Services,CN=WR2
* ALPN: server did not agree on a protocol. Uses default.
* using HTTP/1.x
&gt; GET / HTTP/1.1
&gt; Host: rr1---sn-5goeenes.googlevideo.com
&gt; User-Agent: curl/8.8.0
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/1.1 404 Not Found
&lt; Date: Fri, 13 Sep 2024 23:25:14 GMT
&lt; Content-Type: text/html; charset=UTF-8
&lt; Server: gvs 1.0
&lt; Content-Length: 1561
&lt; X-XSS-Protection: 0
&lt; X-Frame-Options: SAMEORIGIN
&lt;
{ [1561 bytes data]
* Connection #0 to host rr1---sn-5goeenes.googlevideo.com left intact
</code></pre>
</details>
<details>
<summary>
rr1---sn-5go7ynlk</summary>
<pre><code class="lang-auto">curl -sv -o NUL https://rr1---sn-5go7ynlk.googlevideo.com
* Host rr1---sn-5go7ynlk.googlevideo.com:443 was resolved.
* IPv6: 2a00:1450:400f:8::6
* IPv4: 173.194.6.6
*   Trying 173.194.6.6:443...
* Connected to rr1---sn-5go7ynlk.googlevideo.com (173.194.6.6) port 443
* GnuTLS ciphers: NORMAL:-ARCFOUR-128:-CTYPE-ALL:+CTYPE-X509:-VERS-SSL3.0
* found 171 certificates in /etc/ssl/certs/ca-certificates.crt
* found 515 certificates in /etc/ssl/certs
* SSL connection using TLS1.3 / ECDHE_RSA_AES_256_GCM_SHA384
*   server certificate verification OK
*   server certificate status verification SKIPPED
*   common name: *.c.docs.google.com (matched)
*   server certificate expiration date OK
*   server certificate activation date OK
*   certificate public key: EC/ECDSA
*   certificate version: #3
*   subject: CN=*.c.docs.google.com
*   start date: Tue, 27 Aug 2024 14:31:13 GMT
*   expire date: Tue, 05 Nov 2024 14:31:12 GMT
*   issuer: C=US,O=Google Trust Services,CN=WR2
* ALPN: server did not agree on a protocol. Uses default.
* using HTTP/1.x
&gt; GET / HTTP/1.1
&gt; Host: rr1---sn-5go7ynlk.googlevideo.com
&gt; User-Agent: curl/8.8.0
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/1.1 404 Not Found
&lt; Date: Fri, 13 Sep 2024 23:25:19 GMT
&lt; Content-Type: text/html; charset=UTF-8
&lt; Server: gvs 1.0
&lt; Content-Length: 1561
&lt; X-XSS-Protection: 0
&lt; X-Frame-Options: SAMEORIGIN
&lt;
{ [1561 bytes data]
* Connection #0 to host rr1---sn-5go7ynlk.googlevideo.com left intact
</code></pre>
</details>
<p>Плохие:</p>
<details>
<summary>
http://rr15---sn-n8v7knel</summary>
<pre><code class="lang-auto">curl -sv -o NUL https://rr15---sn-n8v7knel.googlevideo.com
* Host rr15---sn-n8v7knel.googlevideo.com:443 was resolved.
* IPv6: 2a00:1450:4011:4f::21
* IPv4: 173.194.180.97
*   Trying 173.194.180.97:443...
* Connected to rr15---sn-n8v7knel.googlevideo.com (173.194.180.97) port 443
* GnuTLS ciphers: NORMAL:-ARCFOUR-128:-CTYPE-ALL:+CTYPE-X509:-VERS-SSL3.0
* found 171 certificates in /etc/ssl/certs/ca-certificates.crt
* found 515 certificates in /etc/ssl/certs
</code></pre>
</details>
<details>
<summary>
http://rr12---sn-n8v7znzl</summary>
<pre><code class="lang-auto">curl -sv -o NUL https://rr12---sn-n8v7znzl.googlevideo.com
* Host rr12---sn-n8v7znzl.googlevideo.com:443 was resolved.
* IPv6: 2a00:1450:4011:38::1c
* IPv4: 74.125.153.156
*   Trying 74.125.153.156:443...
* Connected to rr12---sn-n8v7znzl.googlevideo.com (74.125.153.156) port 443
* GnuTLS ciphers: NORMAL:-ARCFOUR-128:-CTYPE-ALL:+CTYPE-X509:-VERS-SSL3.0
* found 171 certificates in /etc/ssl/certs/ca-certificates.crt
* found 515 certificates in /etc/ssl/certs
</code></pre>
</details>
<aside class="quote no-group" data-username="Ori" data-post="451" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Вы какой-нибудь ВПН или цензортрекер используете?</p>
</blockquote>
</aside>
<p>У меня настроена раздельная маршрутизация, и youtube идет не через vpn.</p></td><td>2024-09-13T23:39:04.498Z</td></tr><tr><td>Ori</td><td><p>Ну это не объясняет почему вам выдаются серваки из Швеции и из Москвы одновременно. Я такое наблюдал, когда <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> пустил через прокси, а <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> напрямую.</p>
<p>Попробуйте стратегию <code>--dpi-desync=disorder2</code> или <code>--dpi-desync=split2 --dpi-desync-split-seqovl=1</code> без всего остального. Там начали фейки блочить недавно, так что у большинства работает только без них.</p></td><td>2024-09-13T23:43:42.162Z</td></tr><tr><td>hoztasun</td><td><p>Попробовал эти две стратегии и все стратегии из вашего поста выше.<br>
Картина везде одинаковая.<br>
Редкие видео грузятся, когда из двух предложенных адресов GCS один “шведский”, а второй “московский”.</p>
<p>Почему он предлагает их одновременно, не знаю.</p>
<p>До вчерашнего дня все работало с параметрами<br>
<code>--dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig</code></p></td><td>2024-09-14T00:02:48.290Z</td></tr><tr><td>Ori</td><td><p>А если rst вместо fake в вашу прошлую стратегию запихнуть. Ещё можно фейковый пейлоад свой попробовать. Я пейлоад от гугл диска использую и он вроде проходит. Вот <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/411">тут</a> написано как.</p>
<p>Если не помогает - проверить нерабочий сервер через blockcheck.</p>
<p>Если всё еще не помогает - заблочить нерабочие сервера через ublock/adblock вот по такой схеме:</p>
<pre><code class="lang-auto">||rr*---sn-n8v7*.googlevideo.com^
</code></pre>
<p>Возможно, станет лучше.</p></td><td>2024-09-14T00:04:05.119Z</td></tr><tr><td>hoztasun</td><td><p>C rst картина аналогичная.</p>
<p>Про пейлоады вроде выше bol-van писал, что это нерабочая тема.<br>
Пробовал с госуслугами и кастомным <a href="http://google.com" rel="noopener nofollow ugc">google.com</a> с аналогичным результатом, а точнее его отсутствием.</p>
<p>blockcheck предлагает просто disorder2.</p>
<p>Про блокировку через ublock тред читал, но как я понимаю, это поможет только, если в видео хотя бы один из двух предлагаемых GCS адресов рабочий. Второй будет отваливаться быстрее по ublockу, и видео будет грузиться с рабочего. Когда почти в каждом видео оба адреса нерабочие, то это не поможет. Но может я неправильно это понимаю.</p>
<p>К тому же у вас, как я понял, дело решилось добавлением двух блоков из 8 адресов в правила ublock. Я пинговал неработающие адреса и соседние по нумерации, и там счет быстро перевалил за 100.</p>
<p>Может завтра сутра свежим взглядом увижу, чего не замечаю.</p></td><td>2024-09-14T00:21:24.831Z</td></tr><tr><td>Ori</td><td><p>У меня вариант с кастомным пэйлоадом пока работает, хз.</p>
<p>Пустите сам <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> через впн, вам должно больше иностранных серверов начать подкидывать. Трафик идет с <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, так что на ВПНе не скажется.</p>
<p>Ну или можно извратиться и смотреть через внешний плеер, если прокси сделать. В mpv, например, прописываете в conf файл:</p>
<pre><code class="lang-auto">script-opts=ytdl_hook-ytdl_path=D:\Soft\YT-DLP\yt-dlp.exe
ytdl-raw-options=proxy=[socks5h://127.0.0.1:8888]
ytdl-format='bestvideo+bestaudio/best'
rtsp-transport=tcp
hwdec=auto
</code></pre>
<p>Он будет получать ссылки через прокси, а тянуть напрямую.</p>
<p>В mpc-hc тоже можно сделать. Про другие плееры не знаю, не пробовал.</p>
<p>Как это с раздельной маршрутизацией реализуется хз.</p>
<p>На этом мои предложения всё.</p></td><td>2024-09-14T00:29:00.691Z</td></tr><tr><td>Axolder</td><td><p>2 день не могу победить МТС - вроде бы пишут что эта рабочая-<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=/opt/zapret/files/fake/dtls_clienthello_w3_org.bin”<br>
Но и она не помогла. Вроде бы уже все перебрал, до 12 работало все идеально. Меняя параметры то рутрекер работает, то нет, но ютюб все 2 дня одинаково не работает (либо вообще сайт не открывается, либо открывается со скрипом но видео не грузит).</p></td><td>2024-09-14T00:37:28.804Z</td></tr><tr><td>Ori</td><td><p>Жесть ты нагородил. Это до ненужного усложненная стратегия. Попробуй вот из <a href="https://ntc.party/t/%D0%B5%D1%81%D0%BB%D0%B8-%D1%83-%D0%B2%D0%B0%D1%81-%D1%81%D0%B5%D0%B3%D0%BE%D0%B4%D0%BD%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB%D0%B8-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C%D1%81%D1%8F-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D0%BD%D0%B0-youtube-%D0%B2%D0%B0%D0%BC-%D1%81%D1%8E%D0%B4%D0%B0/10007/530">этого</a> поста.</p>
<p>А вообще, просто ищите несколько заблоченных сайтов, прогоняете их через блокчек и пытаетесь совместить найденные стратегии. Касаемо ютуба, под него лучше отдельную стратегию без фейков, тупо disorder2, например. Потому что там нынче блочатся фейки.</p></td><td>2024-09-14T00:44:18.781Z</td></tr><tr><td>newb1e</td><td><p>Почему до ненужного? У меня как раз такая сейчас работает, только со стандартным пейлоадом. Для многих ресурсов мне хватает <code>--dpi-desync=disorder2 --dpi-desync-split-pos=1 --dpi-desync-any-protocol</code>, но некоторые эта стратегия ломает. А с вышеуказанной работает почти все, в т.ч. и инста. Совет с блокчеком правильный, вот только знать бы еще как совместить несколько результатов в одном чтобы работало все. )</p></td><td>2024-09-14T00:56:26.546Z</td></tr><tr><td>Axolder</td><td><p>Попробовал все 6 из поста сейчас - рутрекер открывается, а ютюб нет, либо со скрипом загружает превьюхи, а самое видео нет.<br>
Какие я только не пробовал за 2 дня, просто все тут не перечислю, по ютюбу результат нулевой. А вот рутрекер то отваливался то работал при переборе стратегий.<br>
Пока перебирал так этот сайт отвалился, так как он в списке есть. Пока вернул старую</p></td><td>2024-09-14T00:58:41.286Z</td></tr><tr><td>Ori</td><td><p>Инста по айпи заблочена на большей части территории. Она открывается если тебе dns другой айпи подсовывает. От gdpi это не зависит. Я уже об этом <a href="https://ntc.party/t/%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BE-%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D1%82%D1%81%D0%BF%D1%83/4625/172">писал</a>.<br>
Стратегия реально слишком сложная. <code> --dpi-desync=fake,disorder2  --dpi-desync-fooling=badseq</code> должно хватать. Если badseq блочится, то md5sig. Если фейк блочится, то rst. Или кастомный пейлоад. Или <code> --dpi-desync-fake-tls=0x00000000</code><br>
Для <code>googlevideo.com</code> отдельный инстанс с <code> --dpi-desync=disorder2</code> без всего.</p></td><td>2024-09-14T01:02:06.605Z</td></tr><tr><td>newb1e</td><td><p>Мне днс выдает 157.240.205.174, причем в браузере открывается, а curl-ом не цепляется, возможно блокировка по user-agent.</p></td><td>2024-09-14T01:09:39.223Z</td></tr><tr><td>Ori</td><td><p>157.240.225.174 доступен, а другой их айпи 31.13.72.174 - нет. О том и речь. Это рулетка, какой тебе айпи подсунет dns. И этот айпи тоже <a href="https://check-host.net/check-ping?host=157.240.205.174" rel="noopener nofollow ugc">заблочен</a>.<br>
Он даже не пингуется.<br>
В браузере чтобы проверять блокировки надо обновлять страницу через ctrl+F5, иначе она просто из кэша может загрузиться.</p>
<p>Через курл проверка вот так делается: <code>curl -sv -o NUL https://www.instagram.com --resolve www.instagram.com:443:157.240.225.174</code></p></td><td>2024-09-14T01:11:24.329Z</td></tr><tr><td>Axolder</td><td><p>Ну вот это тоже прямо сейчас перебрал, рестартил, затем пытался зайти - сюда и на рутрекер без проблем, ютюб то грузит превью, то нет, но видео совсем нет.</p></td><td>2024-09-14T01:18:31.204Z</td></tr><tr><td>Ori</td><td><p>Вы хостлист используете же? Не надо весь трафик пускать через zapret. Сам <code>youtube.com</code> и <code>ytimg.com</code> сейчас вроде не блочат. Это может помочь с превьюхами.</p>
<p>А для видосов надо пробовать тупо disorder2 для <code>googlevideo.com</code>. Там блочат фейки. Поэтому видосы и не пашут. Это только для этого домена.</p>
<p>Если у тебя нет хостлиста, то можно сделать автоматический <code>--hostlist-auto="hostlist.txt"</code> который будет сам наполняться доменами, которые не открываются.</p></td><td>2024-09-14T01:23:33.220Z</td></tr><tr><td>newb1e</td><td><p>В СПб этот адрес не заблокирован, видимо поэтому у меня он открывается.<br>
С вашей командой результат такой проверки:</p>
<ul>
<li>Recv failure: Connection was reset</li>
<li>schannel: failed to receive handshake, SSL/TLS connection failed<br>
А в браузере нормально открывается, но видео по прямой ссылке могут со 2-3 раза открываться, наверное из-за попадания на заблокированные диапазоны ip.</li>
</ul></td><td>2024-09-14T01:32:01.529Z</td></tr><tr><td>Ori</td><td><p>Ну это вам RST пакет присылают в подарок от РКН, он разрывает соединение. Попробуйте с тем айпи, который вы сами давали: <code>curl -sv -o NUL https://www.instagram.com --resolve www.instagram.com:443:157.240.205.174</code><br>
И заодно <code>ping 157.240.205.174</code></p></td><td>2024-09-14T01:33:04.159Z</td></tr><tr><td>Axolder</td><td><p>Да хостлист. <code>youtube.com</code> и <code>ytimg.com</code> нет в хостлисте. До видео у меня редко доходит, которое не грузится при любой стратегии. Пробовал без хостлиста - с ютюбом тоже самое.</p></td><td>2024-09-14T01:37:13.160Z</td></tr><tr><td>yatolkosprosit</td><td><p><strong>bolvan</strong><br>
вот вы говорите, не нужно слепо копипастить, тут разбираться нужно. А как тут разобраться, если ничего не понятно? Я пытался использовать nfqws, а с меня в ответ требуют задать значение --qnum. Я обращаюсь к документации и нахожу там следующее --qnum=N номер очереди N. Сразу возникают вопросы какой номер? какой очереди? какими эти номера вообще бывают и как выбрать себе подходящий? Ответов нет. В итоге я ищу готовое решение и копипастю его. --qnum=200 А что это такое и почему именно 200 я хз до сих пор.</p></td><td>2024-09-14T01:39:00.899Z</td></tr><tr><td>Ori</td><td><p>Пробовали без хостлиста просто <code>--dpi-desync=disorder2</code> без ничего? Либо <code>--dpi-desync=split2 --dpi-desync-split-seqovl=1</code> без ничего. Именно видео сами затестить.</p></td><td>2024-09-14T01:39:07.912Z</td></tr><tr><td>yatolkosprosit</td><td><p>Я не совсем вник в вопрос, но если у вас не работает Ютуб, попробуйте только опции для nfqws --dpi-desync=disorder2 --dpi-desync-split-pos=1 --hostlist=somefile.txt</p>
<p>СКОПИПАСТИЛ это из Интернета. У меня работает. Я, правда запускаю все это вручную из командной строки и еще указываю --qnum=200 (не знаю что это )</p></td><td>2024-09-14T01:47:59.398Z</td></tr><tr><td>newb1e</td><td><p>connect to 157.240.205.174 port 443 from 0.0.0.0 port 44008 failed: Timed out<br>
Не пингуется. Что интересно - в лисе открывается, а в хроме нет, хотя doh у них одинаковый прописан.</p></td><td>2024-09-14T01:51:33.393Z</td></tr><tr><td>Axolder</td><td><p>Есть небольшие сдвиги. Отключил hostlist (брал его от гудбайдпи вчера) поставил none. При --dpi-desync=disorder2 теперь при заходе на ютюб пишет нет подключения к интернету (до видео не добраться). При --dpi-desync=split2 --dpi-desync-split-seqovl=1 начал быстро открываться ютюб и сами ролики. Убрал none, включил hostlist, работает. Но это только для ютюба, теперь некоторые другие сайты отвалились, некоторые трекеры и инстаграм. Да и ютюб похоже только в браузере открывается, на андроид приставке не грузит.</p></td><td>2024-09-14T01:55:54.367Z</td></tr><tr><td>Ori</td><td><p>Я тестил через курл и мне клаудфлеровский doh 2 разных айпи по очереди подсовывал <code>curl -sv -o NUL --doh-url https://one.one.one.one/dns-query https://www.instagram.com</code>. Я хз как это работает <img src="https://ntc.party/images/emoji/twitter/smiling_face_with_tear.png?v=12" title=":smiling_face_with_tear:" class="emoji" alt=":smiling_face_with_tear:" loading="lazy" width="20" height="20"></p></td><td>2024-09-14T01:58:21.963Z</td></tr><tr><td>Axolder</td><td><p>я бы с радостью попробовал, но я в конфиге кинетика настраиваю, и куда --qnum=200 вписать я не знаю<br>
Попробовал вашу стратегию, видео снова поломались и не грузятся.</p></td><td>2024-09-14T02:00:32.281Z</td></tr><tr><td>Ori</td><td><p>Сделайте 2 хостлиста. В первом <code>googlevideo.com</code> и <code>ytimg.com</code>. Второй всё остальное.<br>
Потом просто запустите отдельно 2 копии запрета. Первую для ютуба, а вторую как у вас раньше было.</p>
<p>Ещё можно попробовать добавить что-нибудь в стратегию, которая работает для ютуба, например:</p>
<pre><code class="lang-auto">--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=6
--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig
--dpi-desync=rst,split2 --dpi-desync-split-seqovl=1
--dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls=0x00000000
</code></pre>
<p>Может быть, все-таки заведется и будет работать и там, и там… но вряд ли.</p></td><td>2024-09-14T02:01:33.756Z</td></tr><tr><td>newb1e</td><td><p>1.1.1.1</p>
<details>
<summary>
Спойлер</summary>
<p>curl -sv -o NUL --doh-url <a href="https://one.one.one.one/dns-query" rel="noopener nofollow ugc">https://one.one.one.one/dns-query</a> <a href="https://www.instagram.com" rel="noopener nofollow ugc">https://www.instagram.com</a></p>
<ul>
<li>DoH: Too small type A for <a href="http://www.instagram.com" rel="noopener nofollow ugc">www.instagram.com</a></li>
<li>DoH: Too small type AAAA for <a href="http://www.instagram.com" rel="noopener nofollow ugc">www.instagram.com</a></li>
<li>Closing connection</li>
</ul>
</details>
<p>OpenDNS</p>
<details>
<summary>
Спойлер</summary>
<p>curl -sv -o NUL --doh-url <a href="https://doh.opendns.com/dns-query" rel="noopener nofollow ugc">https://doh.opendns.com/dns-query</a> <a href="https://www.instagram.com" rel="noopener nofollow ugc">https://www.instagram.com</a></p>
<ul>
<li>Host <a href="http://www.instagram.com:443" rel="noopener nofollow ugc">www.instagram.com:443</a> was resolved.</li>
<li>IPv6: 2a03:2880:f213:e4:face:b00c:0:4420</li>
<li>IPv4: 157.240.205.174</li>
<li>Trying 157.240.205.174:443…</li>
<li>Trying [2a03:2880:f213:e4:face:b00c:0:4420]:443…</li>
<li>connect to 2a03:2880:f213:e4:face:b00c:0:4420 port 443 from :: port 52498 failed: Network unreachable</li>
<li>connect to 157.240.205.174 port 443 from 0.0.0.0 port 52497 failed: Timed out</li>
<li>Failed to connect to <a href="http://www.instagram.com" rel="noopener nofollow ugc">www.instagram.com</a> port 443 after 22656 ms: Couldn’t connect to server</li>
<li>Closing connection</li>
</ul>
</details></td><td>2024-09-14T02:06:21.276Z</td></tr><tr><td>Axolder</td><td><p>К сожалению на приставке (андроид) не идет ютюб ни стандартный ни другой клиент. Возможно нужно NFQWS_OPT_DESYNC_QUIC поправить? Там тоже длинная стратегия, но до 12 сентября работала.</p></td><td>2024-09-14T02:09:29.203Z</td></tr><tr><td>Ori</td><td><p>Через quic грузится только сам интерфейс ютуба. Сейчас он вроде доступен без обхода. А видеопоток с quic не связан, насколько я понял.<br>
Попробуйте значение в <code>--dpi-desync-split-seqovl=</code> поменять, может что-то изменится. Ещё можно <code>--dpi-desync-split-pos=</code> присобачить.</p>
<p><a class="mention" href="/u/newb1e">@newb1e</a></p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">C:\Users\1&gt;curl -sv -o NUL --doh-url https://one.one.one.one/dns-query https://www.instagram.com
* Host www.instagram.com:443 was resolved.
* IPv6: 2a03:2880:f20a:e5:face:b00c:0:4420
* IPv4: 31.13.72.174
*   Trying [2a03:2880:f20a:e5:face:b00c:0:4420]:443...
* connect to 2a03:2880:f20a:e5:face:b00c:0:4420 port 443 from :: port 10384 failed: Network unreachable
*   Trying 31.13.72.174:443...
^C
C:\Users\1&gt;curl -sv -o NUL --doh-url https://doh.opendns.com/dns-query https://www.instagram.com
* Host www.instagram.com:443 was resolved.
* IPv6: 2a03:2880:f213:e4:face:b00c:0:4420
* IPv4: 157.240.205.174
*   Trying [2a03:2880:f213:e4:face:b00c:0:4420]:443...
* connect to 2a03:2880:f213:e4:face:b00c:0:4420 port 443 from :: port 10389 failed: Network unreachable
*   Trying 157.240.205.174:443...
^C
C:\Users\1&gt;
</code></pre>
</details>
<p>Вот так можно альтернативные айпишники попробовать поискать. В сабнет указываем какой-нибудь забугорный адрес. Или вообще рандомный.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">C:\Users\1&gt;curl "https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=124.233.190.94"
{"Status":0,"TC":false,"RD":true,"RA":true,"AD":false,"CD":false,"Question":[{"name":"www.instagram.com.","type":1}],"Answer":[{"name":"www.instagram.com.","type":5,"TTL":607,"data":"z-p42-instagram.c10r.instagram.com."},{"name":"z-p42-instagram.c10r.instagram.com.","type":1,"TTL":60,"data":"163.70.158.174"}],"edns_client_subnet":"124.233.190.94/16","Comment":"Response from 2a03:2880:f1fd:c:face:b00c:0:35."}
C:\Users\1&gt;curl -sv -o NUL https://www.instagram.com --resolve www.instagram.com:443:163.70.158.174
* Added www.instagram.com:443:163.70.158.174 to DNS cache
* Hostname www.instagram.com was found in DNS cache
*   Trying 163.70.158.174:443...
* Connected to www.instagram.com () port 443
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [312 bytes data]
*  CAfile: C:\Users\1\AppData\Local\Microsoft\WinGet\Packages\cURL.cURL_Microsoft.Winget.Source_8wekyb3d8bbwe\curl-8.10.0_1-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [122 bytes data]
* TLSv1.3 (IN), TLS handshake, Unknown (8):
{ [15 bytes data]
* TLSv1.3 (IN), TLS handshake, Certificate (11):
{ [2989 bytes data]
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
{ [264 bytes data]
* TLSv1.3 (IN), TLS handshake, Finished (20):
{ [36 bytes data]
* TLSv1.3 (OUT), TLS handshake, Finished (20):
} [36 bytes data]
* SSL connection using TLSv1.3 / TLS_CHACHA20_POLY1305_SHA256 / [blank] / UNDEF
* ALPN: server accepted h2
* Server certificate:
*  subject: C=US; ST=California; L=Menlo Park; O=Meta Platforms, Inc.; CN=*.www.instagram.com
*  start date: Jun 23 00:00:00 2024 GMT
*  expire date: Sep 21 23:59:59 2024 GMT
*  subjectAltName: host "www.instagram.com" matched cert's "www.instagram.com"
*  issuer: C=US; O=DigiCert Inc; OU=www.digicert.com; CN=DigiCert SHA2 High Assurance Server CA
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha1WithRSAEncryption
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://www.instagram.com/
* [HTTP/2] [1] [:method: GET]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: www.instagram.com]
* [HTTP/2] [1] [:path: /]
* [HTTP/2] [1] [user-agent: curl/8.10.0]
* [HTTP/2] [1] [accept: */*]
&gt; GET / HTTP/2
&gt; Host: www.instagram.com
&gt; User-Agent: curl/8.10.0
&gt; Accept: */*
&gt;
* Request completely sent off
</code></pre>
</details></td><td>2024-09-14T02:12:21.097Z</td></tr><tr><td>Axolder</td><td><aside class="quote no-group" data-username="Ori" data-post="479" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<pre><code class="lang-auto">--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=6
--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig
--dpi-desync=rst,split2 --dpi-desync-split-seqovl=1
--dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls=0x00000000
</code></pre>
</blockquote>
</aside>
<p>при использовании 1-2 варианта все так же (на пк работает на приставке андроид нет)<br>
при использовании 3-4 варианта ломаются и не грузятся снова видео на ПК (превью есть), вечная загрузка. На андроид приставке нет подключения к сети.</p></td><td>2024-09-14T02:30:45.977Z</td></tr><tr><td>Ori</td><td><p>А если <code>--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=badseq</code>?<br>
Или <code>--dpi-desync=split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fooling=md5sig</code></p>
<p>Возможно это реально из-за quic или из-за ipv6, хз… Без понятия насчет андроид приставок и как там настроить.</p></td><td>2024-09-14T02:32:10.265Z</td></tr><tr><td>newb1e</td><td><details>
<summary>
Спойлер</summary>
<p>curl “<a href="https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=124.233.190.94" rel="noopener nofollow ugc">https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=124.233.190.94</a>”<br>
curl: (60) schannel: SEC_E_UNTRUSTED_ROOT (0x80090325) - Цепочка сертификатов выпущена центром сертификации, не имеющим доверия.<br>
More details here: <a href="https://curl.se/docs/sslcerts.html" class="inline-onebox" rel="noopener nofollow ugc">curl - SSL CA Certificates</a></p>
</details>
<p>Спасибо, но мне инста вообще-то не нужна, так, к слову пришлась.</p></td><td>2024-09-14T02:32:39.916Z</td></tr><tr><td>Ori</td><td><p>Любопытно, я такого у себя не видел. Разных курлов слишком много <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"><br>
Возможно это вот так правильно делается <code>curl -H "Content-Type: application/dns-message" "https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=64.233.190.94"</code><br>
Ну или добавить --insecure.</p>
<p>Ну да пофиг)</p></td><td>2024-09-14T02:36:38.390Z</td></tr><tr><td>Axolder</td><td><p>Попробовал и то и то, на ПК так же, а на приставке мертво. На телефоне андроид нормально, а вот на приставке глухо на всех клиентах. IPV6 вроде как нет.<br>
Автор статьи писал ранее " Предложенный в комментариях вариант убрать режим <code>fake</code> - да это поможет на компьютере и телефоне, но не будет тогда работать телевизорах (по крайней мере тех, которые работают на устаревшем https с tls 1.2), так как только стратегия <code>fake</code> позволяет пробить блокировку с tls 1.2."</p></td><td>2024-09-14T02:44:55.617Z</td></tr><tr><td>yatolkosprosit</td><td><p><strong>bolvan</strong><br>
Я для nfqws скопипастил из интернета команду вида</p>
<pre><code class="lang-auto">iptables -I OUTPUT -o &lt;network_interface&gt; -p tcp --dport 443 -m connbytes --connbytes-dir=original --connbytes-mode=packets --connbytes 1:6 -m mark ! --mark 0x40000000/0x40000000 -j NFQUEUE --queue-num 200 --queue-bypass
</code></pre>
<p>И как я понял, там применены различные ухищрения и финифлюшки, чтобы не гнать весь трафик, а только то, что необходимо. Но сейчас повсеместно используется nftables. Вы сами говорили, что nftables в некоторых аспектах значительно превосходит iptables. И вот для nftables правила выглядят подозрительно простыми</p>
<pre><code class="lang-auto">nft add rule inet ztest post tcp dport "{80,443}" ct original packets 1-12 queue num 200 bypass
nft add rule inet ztest post udp dport 443 ct original packets 1-4 queue num 200 bypass
</code></pre>
<p>А мне хочется не абы какие правила, а САМЫЕ ЛУЧШИЕ! <img src="https://ntc.party/images/emoji/twitter/sunglasses.png?v=12" title=":sunglasses:" class="emoji" alt=":sunglasses:" loading="lazy" width="20" height="20"> Возможно как-то улучшить правила для nftables или же они уже безупречны?</p></td><td>2024-09-14T02:49:26.699Z</td></tr><tr><td>Ori</td><td><p>Печально. Могу разве что предложить вам попробовать сделать свой фейковый пейлоад вот по этой <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/411">инструкции</a>. Я себе сделал пейлоад от сайта гуглдиска, пока не заблочили, коннект до гуглвидео с ним проходит. Это, наверное, единственный вариант фейка который имеет шансы на работоспособность.</p></td><td>2024-09-14T02:49:29.015Z</td></tr><tr><td>Axolder</td><td><p>Большое спасибо за помощь и ответы, вы мне очень помогли, половину получилось решить, осталось восстановить только на андроид приставке. Буду дальше думать, премного благодарен.</p></td><td>2024-09-14T02:56:12.506Z</td></tr><tr><td>newb1e</td><td><p>fooling или ttl нужны для fake и rst, соответственно можно попробовать что-то вроде <code>--dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig,badsum</code></p></td><td>2024-09-14T03:03:17.678Z</td></tr><tr><td>newb1e</td><td><p>Так работает )</p>
<details>
<summary>
Спойлер</summary>
<p>curl -H “Content-Type: application/dns-message” “<a href="https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=64.233.190.94" rel="noopener nofollow ugc">https://dns.google/resolve?name=www.instagram.com&amp;type=A&amp;edns_client_subnet=64.233.190.94</a>” --insecure</p>

</details></td><td>2024-09-14T03:04:29.892Z</td></tr><tr><td>Axolder</td><td><aside class="quote no-group" data-username="newb1e" data-post="491" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>fooling или ttl нужны для fake и rst, соответственно можно попробовать что-то вроде <code>--dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig,badsum</code></p>
</blockquote>
</aside>
<p>Это все прописано, сейчас как раз сделал, на пк и телефоне все хорошо, а на андроид приставке нет, надо делать фейковый пейлоад и пробовать.</p></td><td>2024-09-14T03:06:19.371Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="newb1e" data-post="491" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>fooling или ttl нужны для fake и rst, соответственно можно попробовать что-то вроде <code>--dpi-desync=fake</code></p>
</blockquote>
</aside>
<p>так не работает вроде fake с Ютубом со вчерашнего дня. Соответственно и ttl не нужен</p></td><td>2024-09-14T03:08:01.978Z</td></tr><tr><td>newb1e</td><td><p>fake перед split2 точно прописан?</p></td><td>2024-09-14T03:10:08.208Z</td></tr><tr><td>Ori</td><td><p>Вот вам пейлоад от google earth, например. Попробуйте его подцепить через <code>--dpi-desync-fake-tls=</code> и вписать опцию fake в <code>--dpi-desync=</code> И проверьте будет ли работать ютуб.<br>
~тут что то было, а теперь нет~</p></td><td>2024-09-14T03:11:25.555Z</td></tr><tr><td>newb1e</td><td><p>fake не для ютуба нужен, а для других доменов</p></td><td>2024-09-14T03:11:47.012Z</td></tr><tr><td>Axolder</td><td><p>NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_earth_google_com_01.bin”<br>
Вот сделал такую, теперь и на ПК работает и на приставке и на телефоне. Возможно что то лишнее добавил в стратегию?</p></td><td>2024-09-14T03:29:48.720Z</td></tr><tr><td>newb1e</td><td><aside class="quote no-group quote-modified" data-username="Axolder" data-post="498" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/axolder/48/10471_2.png" class="avatar"> Axolder:</div>
<blockquote>
<p>–dpi-desync-ttl=0</p>
</blockquote>
</aside>
<p>Это не нужно. Ну и списки можно добавить, чтобы запрет все пакеты не колбасил.</p></td><td>2024-09-14T03:31:23.726Z</td></tr><tr><td>Ori</td><td><p>Поздравляю <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"><br>
По стратегии, я всё еще считаю её до ненадобности сложной, но, как говорится, работает - не трогай.<br>
И вам надо самому освоить метод создания пейлоадов, потому что их банят и нужны будут новые. Главное используйте для пейлоада домены смежные с гуглвидео: гугл докс, гугл диск, гугл переводчик и т.д.</p></td><td>2024-09-14T03:32:04.621Z</td></tr><tr><td>Axolder</td><td><p>Он у меня сейчас по hostlist работает.</p></td><td>2024-09-14T03:43:32.224Z</td></tr><tr><td>newb1e</td><td><aside class="quote no-group" data-username="Ori" data-post="500" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Главное используйте для пейлоада домены смежные с гуглвидео: гугл докс, гугл диск, гугл переводчик и т.д.</p>
</blockquote>
</aside>
<p>Почему только их? Фейки же не только при запросе к ютубовским доменам отсылаются.</p></td><td>2024-09-14T03:44:33.881Z</td></tr><tr><td>Axolder</td><td><p>Огромная благодарность за отзывчивость и помощь. Теперь можно будет дальше смотреть котиков и песиков на ютюбе:) Пэйлоады можно делать по той инструкции что вы выше кидали? И с каких сайтов лучше делать, только смежные с гугл докс, гугл диск, гугл переводчик и т.д? Я просто сейчас использовал ваш, чтобы проверить и сказать каков результат.</p></td><td>2024-09-14T03:46:46.468Z</td></tr><tr><td>Axolder</td><td><p>Тоже благодарю за содействие. У меня кстати и инстаграм заработал.</p></td><td>2024-09-14T03:48:02.708Z</td></tr><tr><td>newb1e</td><td><p>Рад был помочь. )</p></td><td>2024-09-14T03:49:27.415Z</td></tr><tr><td>Kolobok</td><td><p>Тебя же зовут “я только спросить”, милок, неужто в очереди никогда не стоял и не знаешь, что это за напасть такая? Ну вот представь, пришёл ты в банк за пенсией, а там две тысячи людей. Кто-то из них <code>new</code>, хотят клиентами стать, кто-то <code>established</code> - у них с уже существующими кредитами вопросы, кто-то <code>related</code> - наследство получить пришли, а кто-то вообще <code>invalid</code> послевоенный, выплату свою законную хочет.<br>
И у каждого своя цель, своя история, и денег у всех по-разному. Если всем одинаковый талончик раздать и в порядке живой очереди обслуживать - времени уйдёт уйма! А помещение-то не резиновое, перегрузится - начнётся переполнение, и клиентов, кто не успел, дропать начнут, мол, приходите завтра.<br>
Негоже это. Вот для того и есть базовые правила фильтрации. Новых клиентов сначала на проверку отправить надо, вдруг они враги народа, да ещё и в неположенные порты ломятся. К текущим клиентам и их родственникам можно попроще отнестись - по ним-то уже вся информация в базе. А вот инвалидов, знаешь, и дропать можно, как говорится, пусть делают что хотят.</p>
<p>Но если тебе “только спросить”, зачем тебе в одной очереди с остальными стоять? На всех таких никакого QoS не напасёшься! Для этого очереди и разделяют, чтобы в разных окошках по разным вопросам консультировали, операции проводили, и на всякие запросы отвечали. А чтобы не путаться, каждой очереди номерок свой присваивают.</p>
<p>А уж какие номера давать - это от тебя зависит. Хочешь - два, а хочешь - двести. Можешь и несколько очередей для одного приложения завести, балансировка нагрузки называется. Ты не ленись, почитай, как подсистема nfnetlink_queue работает. Она ж ещё с 2.6 ядра существует. Глянь <a href="https://netfilter.org/projects/libnetfilter_queue/doxygen/html/" rel="noopener nofollow ugc">документацию</a>, если что непонятно - в <a href="https://git.netfilter.org/libnetfilter_queue/tree/" rel="noopener nofollow ugc">код</a> загляни, там всё с комментариями, не запутаешься.</p></td><td>2024-09-14T03:55:15.883Z</td></tr><tr><td>Ori</td><td><p>Вот <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/398">тут</a> написано почему.</p></td><td>2024-09-14T03:56:50.015Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="Kolobok" data-post="506" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kolobok/48/8347_2.png" class="avatar"> Kolobok:</div>
<blockquote>
<p>в <a href="https://git.netfilter.org/libnetfilter_queue/tree/" rel="noopener nofollow ugc">код</a> загляни,</p>
</blockquote>
</aside>
<p>Я тебе программист что ли?</p>
<aside class="quote no-group" data-username="Kolobok" data-post="506" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kolobok/48/8347_2.png" class="avatar"> Kolobok:</div>
<blockquote>
<p>Глянь <a href="https://netfilter.org/projects/libnetfilter_queue/doxygen/html/" rel="noopener nofollow ugc">документацию</a></p>
</blockquote>
</aside>
<p>Так я глянул --qnum=N номер очереди N  ПАРАМ ПАРАМ ПАМ ВСЕ!</p>
<p>Я давно пришел к выводу, что умение объяснять даже очень простые вещи  - это особый, вероятно врожденный талант. Не каждому дано. Есть те, которые не могут ничего, кроме как пробурчать себе под нос что-нибудь неразборчивое. Другие так увлекаются малозначительными второстепенными деталями, что в итоге не могут сказать главного. Третьи толкут воду в ступе и переливают из пустого в порожнее. Слов много, а толку мало. Вы вот, например, что сказать-то хотели? Столько много букв израсходавали а смысл?</p></td><td>2024-09-14T04:18:35.909Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="508" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Не каждому дано</p>
</blockquote>
</aside>
<p>так может вам тогда к ним не обращаться?</p>
<aside class="quote no-group" data-username="Ori" data-post="507" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Вот</p>
</blockquote>
</aside>
<p>Вчера потестил с пейлодом от гугла, в целом работало, но через час перестали открываться часть сайтов, в том числа и пати, вернулся на дисордер.</p>
<details>
<summary>
config</summary>
<p>–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_google_com_moy.bin --dpi-desync-ttl=6 --dpi-desync-fooling=md5sig,badsum</p>
</details>
<p>Скинь плс конфиг свой для пейлоада еще потестю ради интереса.</p></td><td>2024-09-14T04:50:06.603Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="easyone11" data-post="509" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>так может вам тогда к ним не обращаться?</p>
</blockquote>
</aside>
<p>Я к болвану обращался. Колобок сам ко мне подкатил.</p></td><td>2024-09-14T04:52:36.049Z</td></tr><tr><td>ech0brav0</td><td><p>Попустись, дружище. Тебе на блюдечке принесли полный ответ на твой вопрос, а ты всё продолжаешь гнуть палку “я ничаво нипанимаю”. Не понял один раз — читай. Не понял второй — читай снова. И так до того, пока не станет “понятно”. Документация у zapret хорошая, если и встречается что-то незнакомое, то это сразу гуглится</p></td><td>2024-09-14T05:32:35.156Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="510" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Я к болвану обращался.</p>
</blockquote>
</aside>
<p>Так он в инструкции на гитхабе сразу написал, что способ не для простых обывателей и надо разбираться, а после как запрет завирусился пошли инструкции альтернативные для разных устройств, даже альтернативные решения где почти все сделано за вас. Но проблема в том, что вы как и человек выше просто откуда-то копипастите готовый конфиг а потом бегаете по форуму и обвиняете автора, что у вас ничего не работает, хотя можно было бы хоть чуть-чуть прочитать доку, прогнать блокчек и найти себе стратегию под своего провайдера</p></td><td>2024-09-14T05:40:22.347Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>У меня была проблема на ТВ с ОС <strong>TIzen</strong>. Её тут описывали на форуме в другой ветке: при использовании split2 либо disorder2 на домен <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> перестаёт открывать приложение ютуба на тв, даже просто сам сайт в браузере не открывается. По итогу я нашёл такое решение проблемы:</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC_HTTPS="--dpi-desync=fake,split2 --dpi-desync-fooling=badsum --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_google_com.bin"
</code></pre>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_google_com.bin"
</code></pre>
<p><strong>tls_clienthello_google_com.bin</strong> взял в этой теме, спасибо <a class="mention" href="/u/disappointed">@disappointed</a></p>
<p>Надо ли было добавлять его в NFQWS_OPT_DESYNC_QUIC не знаю, но сделал это на всякий случай. С таким конфигом работает и на ТВ, и на пк в браузере, и на смартфоне в приложении.</p>
<p>Ещё прикреплю свой<br>
<a class="attachment" href="zapret-обсуждение-726/tAfKtasaB2kcZQma0zAcZZs6hBK.txt">zapret-hosts-user.txt</a> (190 байтов)</p></td><td>2024-09-14T05:40:35.700Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Ori" data-post="500" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>потому что их банят и нужны будут новые.</p>
</blockquote>
</aside>
<p>Так будет же рандомизация фейков скоро</p></td><td>2024-09-14T05:40:46.780Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="electrifying" data-post="513" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Так он в инструкции на гитхабе сразу написал, что способ не для простых обывателей и надо разбираться</p>
</blockquote>
</aside>
<p>А я так сразу и написал, что в его инструкции невозможно разобраться.</p>
<aside class="quote no-group" data-username="electrifying" data-post="513" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Но проблема в том, что вы как и человек выше просто откуда-то копипастите готовый конфиг а потом бегаете по форуму и обвиняете автора, что у вас ничего не работает</p>
</blockquote>
</aside>
<p>Я не обвинял автора, что у меня ничего не работает. Я скопипастил, и у меня работает.</p></td><td>2024-09-14T05:52:15.653Z</td></tr><tr><td>Verity-Freedom</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="472" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>тут разбираться нужно</p>
</blockquote>
</aside>
<p>Моя святая вера в том что любая программа должна или работать из коробки по запуску, или иметь ГУИ. У запрета ни того ни другого. Он для красноглазиков.</p></td><td>2024-09-14T06:19:01.098Z</td></tr><tr><td>yatolkosprosit</td><td><p>Многие красноглазики не только писать не умеют, но и читать. Я где-то требовал ГУИ и работу из коробки? Я всего лишь тонко намекнул, что руководство пользователя могло бы быть написано чуть лучше.</p></td><td>2024-09-14T06:23:53.205Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Verity-Freedom" data-post="517" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/verity-freedom/48/7920_2.png" class="avatar"> Verity-Freedom:</div>
<blockquote>
<p>в том что любая программа должна</p>
</blockquote>
</aside>
<p>Не должна, как автор захотел так и будет</p>
<aside class="quote no-group" data-username="Verity-Freedom" data-post="517" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/verity-freedom/48/7920_2.png" class="avatar"> Verity-Freedom:</div>
<blockquote>
<p>или работать из коробки по запуску</p>
</blockquote>
</aside>
<p>ну так покупайте однокнопочное впн решение, там все из коробки работает и гуи есть. Но вы же за это платить не хотите, надо что бы было бесплатно из коробки с гуи</p></td><td>2024-09-14T06:27:38.537Z</td></tr><tr><td>Verity-Freedom</td><td><p><a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start_windows.txt" rel="noopener nofollow ugc">zapret/docs/quick_start_windows.txt at master · bol-van/zapret (github.com)</a></p>
<p>Всё остальное стоит забыть как страшный сон. Readme в формате Войны и мира писать не принято. Вот то что здесь по ссылке должно быть в релизах. Но Запрет именно потому хорош что умная прога. У автора интеллект выше чем суммарный у всех операторов ТСПУ - этих муравьёв раздавят просто)</p></td><td>2024-09-14T06:28:22.186Z</td></tr><tr><td>Verity-Freedom</td><td><aside class="quote no-group" data-username="electrifying" data-post="519" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>однокнопочное впн решение</p>
</blockquote>
</aside>
<p>Я впн покупал для того чтобы на пэйпале зарегать казахскую карту с казахским же ip - Запрет казахские ip давать я подозреваю не умеет, не для того нужен. А в повседневном режиме я гораздо более простыми вещами пользуюсь.</p></td><td>2024-09-14T06:29:28.600Z</td></tr><tr><td>easyone11</td><td><p>zapret создавался для шарющих людей в 1ую очередь, автор готов помогать и делает это (судя по его активности) для средне\мало шарющих, но желающих разобраться, остальные ему не интересны) и это его право.<br>
ps<br>
это я к тому что переделки инструкции не будет с его стороны, если только кто то  из вне это не сделает.</p></td><td>2024-09-14T06:29:47.084Z</td></tr><tr><td>Verity-Freedom</td><td><aside class="quote no-group" data-username="electrifying" data-post="519" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>как автор захотел так и будет</p>
</blockquote>
</aside>
<p>Ну да нельзя лезть в чужой дом со своим уставом.</p></td><td>2024-09-14T06:34:10.688Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="Verity-Freedom" data-post="520" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/verity-freedom/48/7920_2.png" class="avatar"> Verity-Freedom:</div>
<blockquote>
<p>zapret/docs/quick_start_windows.txt at master · bol-van/zapret (<a href="http://github.com" rel="noopener nofollow ugc">github.com</a>)</p>
</blockquote>
</aside>
<p>Вот зачем мне zapret на Windows? Там GoodbyeDPI работает.</p>
<aside class="quote no-group" data-username="easyone11" data-post="522" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>это я к тому что переделки инструкции не будет с его стороны, если только кто то из вне это не сделает.</p>
</blockquote>
</aside>
<p>Я тоже не верю, что автор сможет это переделать в что-то принципиально разборчивое. Значит будем дальше копипастить.</p></td><td>2024-09-14T06:38:15.567Z</td></tr><tr><td>Verity-Freedom</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="524" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>мне zapret на Windows</p>
</blockquote>
</aside>
<p>Должна быть такая же штука но для Линукса.</p>
<p>Основной readme это Талмуд и даже сам автор говорит что это именно Талмуд.</p></td><td>2024-09-14T06:39:28.522Z</td></tr><tr><td>Verity-Freedom</td><td><p>Вот для Линукса.<br>
<a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt" rel="noopener nofollow ugc">zapret/docs/quick_start.txt at master · bol-van/zapret (github.com)</a></p></td><td>2024-09-14T06:40:04.624Z</td></tr><tr><td>Verity-Freedom</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="524" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>GoodbyeDPI работает</p>
</blockquote>
</aside>
<p>Он падал недавно и не у всех сейчас работает.</p></td><td>2024-09-14T06:40:50.197Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="Verity-Freedom" data-post="526" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/verity-freedom/48/7920_2.png" class="avatar"> Verity-Freedom:</div>
<blockquote>
<p>Вот для Линукса.<br>
<a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt" rel="noopener nofollow ugc">zapret/docs/quick_start.txt at master · bol-van/zapret (github.com)</a></p>
</blockquote>
</aside>
<p>Ну это моветон. Запуск скриптов, которые делают все волшебство автоматически, противоречит здешней догме, что надо самому во все вникать и разбираться.</p>
<aside class="quote no-group" data-username="Verity-Freedom" data-post="527" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/verity-freedom/48/7920_2.png" class="avatar"> Verity-Freedom:</div>
<blockquote>
<p>Он падал недавно и не у всех сейчас работает.</p>
</blockquote>
</aside>
<p>Они все на одних принципах и техниках основаны. Упадет один, упадет и другой.</p></td><td>2024-09-14T06:44:24.222Z</td></tr><tr><td>yatolkosprosit</td><td><p><strong>bolvan</strong><br>
<a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/488">посмотрите мой вопрос</a> а то он уже затерялся.</p></td><td>2024-09-14T06:55:35.547Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><blockquote>
<p>Суть режима в автоматическом определении TTL, чтобы он почти наверняка прошел DPI и немного не дошел до  сервера. Берутся базовые значения TTL 64,128,255, смотрится входящий пакет  (да, требуется направить первый входящий пакет на nfqws !). Вычисляется длина пути, отнимается delta (1 по умолчанию). Если TTL вне диапазона (min,max - 3,20 по умолчанию),  то берутся значения min,max, чтобы вписаться в диапазон. Если при этом полученный TTL больше длины пути,  то автоматизм не сработал и берутся фиксированные значения TTL</p>
</blockquote>
<p>Можно подробнее про механизм работы autottl? Как долго хранится рабочее значение, по каким событиям пересчитывается? Интересно в привязке к MultiWAN конфигурации.</p></td><td>2024-09-14T09:30:38.484Z</td></tr><tr><td>SagePtr(Sage Pointer)</td><td><blockquote>
<p>Вот зачем мне zapret на Windows? Там GoodbyeDPI работает.</p>
</blockquote>
<p>Под виндой у неё тоже есть преимущества по сравнению с GoodbyeDPI:</p>
<ol>
<li>Дружит нормально с Kyber и QUIC, не надо ничего отключать в браузерах</li>
<li>Автоматический список доменов, который сам пополняется в реальном времени, при обнаружении нового заблоченного не надо его руками вносить в текстовик и перезапускать программу</li>
</ol></td><td>2024-09-14T10:25:30.546Z</td></tr><tr><td>hoztasun</td><td><p>Как и предполагал, сутра на свежую голову быстро нашел проблему.<br>
Редактировался один файл с настройками nfqws, а запускался другой. Facepalm.</p>
<p>Зато теперь знаю, что на моем прове где-то 5% шведских GCS, а не только российские.</p>
<p>Естественно, заработали все предложенные стратегии без fake, включая голый disorder2, который изначально предлагал blockcheck.</p>
<p>Но пришлось добавить fake и кастомный пейлоад от <a href="http://google.com" rel="noopener nofollow ugc">google.com</a>, чтобы завелся yt на android tv.</p>
<p>Итого, рабочая страта для всех моих устройств сейчас:<br>
<code>--dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=tls_clienthello_google_com.bin --hostlist=youtube.txt</code></p>
<p>Спасибо за помощь</p></td><td>2024-09-14T11:05:11.108Z</td></tr><tr><td>electrifying</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/48280abc358aac17438d8469c8f2b14ee023bef2.png" data-download-href="https://ntc.party/uploads/default/48280abc358aac17438d8469c8f2b14ee023bef2" title="image"><img src="zapret-обсуждение-726/48280abc358aac17438d8469c8f2b14ee023bef2_2_690x47.png" alt="image" data-base62-sha1="aikanbhpu6zJoqdbVFnnL7Jr0vo" width="690" height="47" srcset="zapret-обсуждение-726/48280abc358aac17438d8469c8f2b14ee023bef2_2_690x47.png, zapret-обсуждение-726/48280abc358aac17438d8469c8f2b14ee023bef2_2_1035x70.png 1.5x, zapret-обсуждение-726/48280abc358aac17438d8469c8f2b14ee023bef2_2_1380x94.png 2x" data-dominant-color="11151B"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1867×128 7.31 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
А есть ли отличия от того, который вчера публиковал <a href="https://ntc.party/u/disappointed">disappointed</a></p></td><td>2024-09-14T14:34:54.042Z</td></tr><tr><td>disappointed</td><td><p>На гитхабе файл с ECH экстеншном фаерфокса. У меня в посте - без него.</p></td><td>2024-09-14T14:54:47.581Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="disappointed" data-post="534" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>На гитхабе файл с ECH экстеншном фаерфокса.</p>
</blockquote>
</aside>
<p>А это сильно как-то влияет на качество дурения dpi?</p></td><td>2024-09-14T15:04:46.454Z</td></tr><tr><td>disappointed</td><td><p>Скорее всего никак не влияет. Они на SNI смотрят.</p></td><td>2024-09-14T15:09:57.980Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="488" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>А мне хочется не абы какие правила, а САМЫЕ ЛУЧШИЕ! <img src="https://ntc.party/images/emoji/twitter/sunglasses.png?v=12" title=":sunglasses:" class="emoji" alt=":sunglasses:" loading="lazy" width="20" height="20"> Возможно как-то улучшить правила для nftables или же они уже безупречны?</p>
</blockquote>
</aside>
<p>А в чем вы измеряете “лучшесть” ? В килограмах или в сантиметрах ?<br>
Правила пишутся под конкретную задачу.<br>
docs/nftables.txt и docs/iptables.txt  содержат лишь шпаргалку для тестов<br>
в реальности там может быть масса других нюансов<br>
Разные режимы могут требовать дополнительных правил<br>
ipfrag, autohostlist</p></td><td>2024-09-14T15:17:28.254Z</td></tr><tr><td>bolvan</td><td><p>На  счет ютуба.<br>
Как выяснилось, на моем провайдере старый фейк работает по ipv4, но не работает по ipv6.<br>
На другом провайдере не работает по ipv4.<br>
Причем на некоторых GGC серверах (видимо тех, что нытьем и катанием собирал РКН от провайдеров) не работает, а на некоторых работает.<br>
Запостил в git files/fake/tls_clienthello_www_google_com.bin<br>
Его можно применять для обмана всех сайтов, включая и youtube</p></td><td>2024-09-14T15:21:24.760Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="538" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Его можно применять для обмана всех сайтов, включая и youtube</p>
</blockquote>
</aside>
<p>А рандомизацию фейков решили не делать?</p></td><td>2024-09-14T15:28:37.427Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="539" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>А рандомизацию фейков решили не делать?</p>
</blockquote>
</aside>
<p>Сделаю для профилактики. Но как выясняется, это не поможет в данном случае.<br>
Тут надо мультистратегию делать. Пока еще можно без нее. ГуглоСНИ работает.<br>
Но дальше могут начаться такие приколы, что уже никак<br>
Если по той же схеме заблочат еще какой-то ресурс, уже будет не совместить без вывертов с ipset-ами</p></td><td>2024-09-14T15:29:32.687Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="540" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но дальше могут начаться такие приколы, что уже никак</p>
</blockquote>
</aside>
<p>Какие ваши прогнозы по дурению дпи сколько еще сможет это все держаться, стоит ли уже сейчас озадачиваться покупкой впс?</p></td><td>2024-09-14T15:48:31.665Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="541" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Какие ваши прогнозы по дурению дпи сколько еще сможет это все держаться, стоит ли уже сейчас озадачиваться покупкой впс?</p>
</blockquote>
</aside>
<p>В новости о выделении 60 лярдов значатся сроки 25-30 годы<br>
Сейчас у них , похоже, не хватает мощностей, чтобы везде круто все заблочить<br>
Но знать что делать надо уже сейчас.<br>
Уметь хотя бы себе xray поднять. Знать чем оплачивать VPS. Иметь какой-то запас биткоинов. Не все будут принимать рублевые карты.<br>
Не лишним будет настроить себе пожарный вариант на VPS. dnstt, например.<br>
dnstt можно сделать ipv6-only, даже если провайдер не предоставляет ipv6 клиентам, но сам к нему подключен, и VPS тоже.<br>
Так можно выжить в случае блокировки IP vps</p></td><td>2024-09-14T15:55:27.467Z</td></tr><tr><td>yatolkosprosit</td><td><p><strong>bolvan</strong><br>
Я ознакомился с вашим мнением на Гитхабе, касательно предложения одного из пользователей отредактировать документацию. Обсуждение этого вопроса меня немного удивило и местами позабавило. Я даже написал ответ, потом передумал и стер.</p>
<p>Ну хорошо, я могу понять и принять вашу позицию. Вы не хотите, чтобы священные тайные знания достались профанам, чайникам и всяким Васянам-скуфидонам. Я понял и даже не осуждаю. Но речь не про упрощенчество, не про то, чтобы любая домохозяйка могла запустить программу нажатием одной кнопки. Но нужно как-то, упорядочить информацию. Где-то описать функциональность более подробно, где-то убрать лишнее, структурировать. Сейчас все изложено как-то путанно и бессистемно.</p>
<p>Я вообще-то ничего с вас не требую. Это так… информация к сведению. Вы высказали свое мнение, я посчитал, что в таком случае имею моральное право высказать свое.</p></td><td>2024-09-14T19:12:10.934Z</td></tr><tr><td>bolvan</td><td><p>Поэтому я  и не отказался от помощи того товарища.<br>
Но на счет безсистемности я не соглашусь.<br>
Система есть. Только она техно-центрирована, а не юзеро-центрирована.<br>
Она пляшет от того, КАК ЭТО РАБОТАЕТ, а не КАК ПРОСТО СДЕЛАТЬ<br>
for educational purposes так сказать</p></td><td>2024-09-14T19:35:22.248Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="TesterTi" data-post="448" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Подскажите, пожалуйста, можно ли подобрать через blockcheck стратегию обхода для конкретного GGC (типа rr…<a href="http://googlevideo.com">googlevideo.com</a>)? И если да - верно ли написана инcтрукция <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/">https://ntc.party/t/подбор-рабочего-конфига-для-ggc-ютуба-через-blockcheck/ </a></p>
</blockquote>
</aside>
<p>В принципе можно, если там идет блокировка.<br>
Но как выяснилось , для пробития фейком нужен фейк от доменов гугла<br>
blockcheck это пробовать не будет. слишком частно.<br>
А без фейков для tls 1.2 могут предложить не очень хорошие стратегии</p></td><td>2024-09-14T20:11:49.798Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ясно, спасибо. А дефолтный фейк это теперь /opt/zapret/files/fake/tls_clienthello_www_google_com.bin ? Или он не менялся?</p></td><td>2024-09-14T20:20:52.917Z</td></tr><tr><td>bolvan</td><td><p>Менялся, но дефолтный не сработает. Там whitelist на группу IP адресов некоторых GGC.<br>
См в теме whats new</p></td><td>2024-09-14T20:27:27.332Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Что-то не найду здесь про whitelist <a href="https://ntc.party/t/zapret-whats-new/61/148" class="inline-onebox">Zapret: what's new - #148 by bolvan</a>. Или это на гитхабе?</p></td><td>2024-09-14T20:33:26.475Z</td></tr><tr><td>bolvan</td><td><aside class="quote quote-modified" data-post="148" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/148">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Провы по глупости стали дурить DPI, чтобы создать сиюминутное конкурентное преимущество. 
В ответ в РКН включили особый режим против дурения на некоторых ggc. 
Перестали работать фейки. Но им пришлось оставить разрешенными SNI от гуглодоменов. 
Поэтому дописываем в стратегию --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin , и пока этого достаточно для дурения и блокировок, и ютуба. 
Тем не менее чисто профилактически в nfqws заменен дефольный ClientHello на версию…
  </blockquote>
</aside>
</td><td>2024-09-14T20:42:23.995Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="easyone11" data-post="509" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>Скинь плс конфиг свой для пейлоада еще потестю ради интереса</p>
</blockquote>
</aside>
<p>У меня просто fake, disorder2 + badseq, ничего особенного. Ну и пейлоад от гуглдиска + хостлист свой. Вчера ещё все работало, сегодня на первый взгляд тоже, но пока особо не тестил.</p></td><td>2024-09-14T20:51:46.492Z</td></tr><tr><td>easyone11</td><td><p>угу, я пересел с wssize на fake с пейлоадом, всё робит хорошо</p></td><td>2024-09-14T21:00:47.280Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>С дополнением от ValdikSS <a href="https://ntc.party/t/%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/8055/196" class="inline-onebox">Замедление/блокировка YouTube в России - #196 by ValdikSS</a> стал понятен и ваш пост, спасибо!</p></td><td>2024-09-14T21:19:33.710Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Что-то обновленный blockcheck на win у меня стал находить значительно меньше рабочих стратегий. При том, что найденное предыдущей версией и не найденное этой продолжает работать.</p></td><td>2024-09-15T07:47:52.711Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><p>с wssize 1:6 (похоже при любых стратегиях) начинаются проблемы с формами логина или ввода данных, напр. проблема залогиниться на госуслуги. при использовании wssize только переход на hostlist или есть другие варианты?</p></td><td>2024-09-15T08:04:38.766Z</td></tr><tr><td>Ori</td><td><p>wssize игнорит хостлист и вообще его лучше не использовать, если есть возможность.</p></td><td>2024-09-15T08:13:46.316Z</td></tr><tr><td>bolvan</td><td><p>В блокчеке ничего особо не менялось.<br>
Но был заменен фейк в nfqws и сделана его рандомизация.<br>
Те стратегии, что работали раньше, и не нашлись сейчас, содержат фейк ?</p></td><td>2024-09-15T08:24:25.871Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><aside class="quote no-group" data-username="bolvan" data-post="556" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но был заменен фейк в nfqws и сделана его рандомизация.</p>
</blockquote>
</aside>
<p>заменен на tls_clienthello_www_google_com.bin? а рандомизация в чем заключается?</p></td><td>2024-09-15T08:28:49.336Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="bolvan" data-post="556" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Те стратегии, что работали раньше, и не нашлись сейчас, содержат фейк ?</p>
</blockquote>
</aside>
<p>И так, и сяк. Причем, разные запуски чека выдают отличающиеся результаты.<br>
Например, чек не нашел ни одной стратегии для xvideos, но запускаю службу с <code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=badseq/md5sig</code>, и сайт прекрасно открывается.</p>
<p>Для googlevideo вообще только одну нашел <code>--dpi-desync=disorder2 --dpi-desync-split-pos=1</code>, хотя работают и другие, например, <code>--dpi-desync=disorder --dpi-desync-fooling=badseq/md5sig</code>.</p></td><td>2024-09-15T08:38:59.885Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="558" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>И так, и сяк. Причем, разные запуски чека выдают отличающиеся результаты.<br>
Например, чек не нашел ни одной стратегии для xvideos, но запускаю службу с <code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=badseq/md5sig</code>, и сайт прекрасно открывается.</p>
</blockquote>
</aside>
<p>Блокчек проверяет TLS 1.2, что является более тяжелым случаем<br>
Броузер использует TLS 1.3. Видимо в этом разница состоит</p>
<p>Разные чеки разный результат - это балансировка. Надо использовать множественные попытки в блокчеке</p></td><td>2024-09-15T08:45:23.506Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonymous157" data-post="557" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/51bf81/48.png" class="avatar"> anonymous157:</div>
<blockquote>
<p>заменен на tls_clienthello_www_google_com.bin? а рандомизация в чем заключаетс</p>
</blockquote>
</aside>
<p>Читаем соседнюю тему whatsnew<br>
менять на <a href="http://google.com">google.com</a> не буду в коде, поскольку это частная затычка под конкретную проблему</p></td><td>2024-09-15T08:45:49.053Z</td></tr><tr><td>bolvan</td><td><p>На моих провайдерах принципиально результаты блокчек не поменялись после замены фейка в коде<br>
Виндовый и на роутере тоже не отличаются, кроме TTL</p></td><td>2024-09-15T08:48:46.088Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Я обычно чекаю и tls1.2, и tls1.3 на нескольких разных заблокированных доменах, потом собираю успешные стратегии в кучу и конструирую одну, которая подойдет для всех. Сегодня обратил внимание, что блокчек стал выдавать менее постоянные результаты на моем прове, разница между запусками сильно заметная, чего раньше не было.</p></td><td>2024-09-15T09:00:50.913Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Я не очень-то понимаю как создать вот этот . Файл tls_earth_google_com_01.bin</p></td><td>2024-09-15T09:05:31.819Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Acindaz" data-post="558" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>ни одной стратегии для xvideos, но запускаю службу</p>
</blockquote>
</aside>
<p>А как xvideos может открываться, он же даже не пингуется? В браузере там просто редиректит на другой домен. Через <a href="https://check-host.net" rel="noopener nofollow ugc">check-host.net</a> он ниоткуда не пингуется тоже.</p></td><td>2024-09-15T09:06:39.991Z</td></tr><tr><td>bolvan</td><td><p>Пинговаться никто не обязан. icmp могут фильтровать.<br>
важен конект на 443, и он есть</p></td><td>2024-09-15T09:09:20.149Z</td></tr><tr><td>Ori</td><td><p>Я как-то даже не думал о таком. Мне казалось, раз пинга нет - то заблочено. Буду знать.<br>
С другой стороны, теперь я не понимаю в чем смысл фильтровать icmp.</p>
<p><a class="mention" href="/u/ivanixa333">@ivanixa333</a><br>
Вот так, через wireshark:</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/5be53331f41ba0fdb48ef758028d5470ecb09b8b.png" data-download-href="https://ntc.party/uploads/default/5be53331f41ba0fdb48ef758028d5470ecb09b8b" title="Снимок экрана (6387)"><img src="zapret-обсуждение-726/5be53331f41ba0fdb48ef758028d5470ecb09b8b_2_690x438.png" alt="Снимок экрана (6387)" data-base62-sha1="d6WvwH4iAai9u1pjN5HPobAkF8T" width="690" height="438" srcset="zapret-обсуждение-726/5be53331f41ba0fdb48ef758028d5470ecb09b8b_2_690x438.png, zapret-обсуждение-726/5be53331f41ba0fdb48ef758028d5470ecb09b8b_2_1035x657.png 1.5x, zapret-обсуждение-726/5be53331f41ba0fdb48ef758028d5470ecb09b8b_2_1380x876.png 2x" data-dominant-color="CFCFD5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана (6387)</span><span class="informations">1524×969 90.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-09-15T09:15:06.767Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="566" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>теперь я не понимаю в чем смысл фильтровать icmp.</p>
</blockquote>
</aside>
<p>Анти ддос.<br>
Система не должна быть источником амплификации атаки.<br>
Любые ответы сверх меры вредны.</p></td><td>2024-09-15T09:21:55.573Z</td></tr><tr><td>Ori</td><td><p>А почему все сервера поголовно тогда у себя icmp не блокируют, раз это потенциальный вектор атаки. Я просто впервые такое вижу вообще.</p></td><td>2024-09-15T09:25:52.101Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="Ori" data-post="566" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>я не понимаю в чем смысл фильтровать icmp</p>
</blockquote>
</aside>
<p>Потому что tunnel over icmp существует. Ркн скоро и этот протокол будет фильтровать если станет мейнстримом</p></td><td>2024-09-15T09:31:03.616Z</td></tr><tr><td>bolvan</td><td><p>Пинги блокировали кое-где еще в 90-е годы. Этому вопросу 100 лет.<br>
Где-то лимитируют ответы. типа не более 10 в секунду.<br>
Погуглите вопрос, если интересно, это не касается темы</p></td><td>2024-09-15T09:38:26.885Z</td></tr><tr><td>Ori</td><td><p>Окей, спасибо за разъяснение.</p>
<p>Вопрос по теме у меня тоже есть. В блокчеке днс-запрос каждый раз делается заново, или только 1 раз в самом начале тестов и потом только этот айпи используется?</p></td><td>2024-09-15T09:40:20.153Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
не поясните про механизм работы autottl? вычисляется для каждого соединения или сохраняется на какое-то время? интересно в привязке к MultiWAN конфигурации</p></td><td>2024-09-15T09:42:24.053Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonymous157" data-post="572" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/51bf81/48.png" class="avatar"> anonymous157:</div>
<blockquote>
<p>не поясните про механизм работы autottl? вычисляется для каждого соединения или сохраняется на какое-то время? интересно в привязке к MultiWAN конфигурации</p>
</blockquote>
</aside>
<p>В readme описано. Ищите по строке “autottl”, пока не наткнетесь на описание</p></td><td>2024-09-15T11:15:33.369Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><aside class="quote no-group" data-username="bolvan" data-post="573" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В readme описано. Ищите по строке “autottl”, пока не наткнетесь на описание</p>
</blockquote>
</aside>
<p>Понимаю, что 90% вопросов заслуживают ответа “проверьте включена ли вилка в розетку”… но</p>
<blockquote>
<p>–dpi-desync-autottl=[[:[-]]] ; режим auto ttl для ipv4 и ipv6. по умолчанию: 1:3-20. delta=0 отключает функцию.<br>
–dpi-desync-autottl6=[[:[-]]] ; переопределение предыдущего параметра для ipv6</p>
<p>autottl. Суть режима в автоматическом определении TTL, чтобы он почти наверняка прошел DPI и немного не дошел до  сервера. Берутся базовые значения TTL 64,128,255, смотрится входящий пакет  (да, требуется направить первый входящий пакет на nfqws !). Вычисляется длина пути, отнимается delta (1 по умолчанию). Если TTL вне диапазона (min,max - 3,20 по умолчанию),  то берутся значения min,max, чтобы вписаться в диапазон. Если при этом полученный TTL больше длины пути,  то автоматизм не сработал и берутся фиксированные значения TTL для атаки.<br>
Техника позволяет решить вопрос, когда вся сеть перегорожена шлагбаумами (DPI, ТСПУ) везде где только можно,  включая магистралов. Но потенциально может давать сбои.<br>
Например, при асимметрии входящего и исходящего канала до конкретного сервера.<br>
На каких-то провайдерах эта техника будет работать неплохо, на других доставит больше проблем, чем пользы.  Где-то может потребоваться тюнинг параметров. Лучше использовать с дополнительным ограничителем.</p>
<p>При использовании autottl следует протестировать как можно больше разных доменов. Эта техника может на одних провайдерах работать стабильно, на других потребуется выяснить при каких параметрах она стабильна, на третьих полный хаос, и проще отказаться.</p>
</blockquote>
<p>Понятного ответа на вопрос: “вычисляется для каждого соединения или сохраняется на какое-то время?” из readme не следует, если притягивать за уши фразу:</p>
<blockquote>
<p>(да, требуется направить первый входящий пакет на nfqws !)</p>
</blockquote>
<p>Остается вопрос - первый входящий от кого? От заблокированного сервера? От клиента?</p></td><td>2024-09-15T11:32:50.647Z</td></tr><tr><td>bolvan</td><td><p>Входящий из инета , то есть ответ сервера на SYN - SYN,ACK.<br>
Да, вычисляется для соединения после прихода первого пакета от сервера.<br>
Сохраняется в памяти nfqws в рамках системы conntrack.<br>
conntrack позволяет nfqws по любому пакету найти контекст соединения и использовать stateful информацию<br>
Сама логика подсказывает, что TTL не вычислить по пакетом от клиента, потому что неизвестно расстояние в хопах до сервера. О расстоянии можно судить только по ответам сервера.</p></td><td>2024-09-15T11:39:24.622Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="571" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Вопрос по теме у меня тоже есть. В блокчеке днс-запрос каждый раз делается заново, или только 1 раз в самом начале тестов и потом только этот айпи используется?</p>
</blockquote>
</aside>
<p>С некоторой версии уже довольно давно используется кэширование DNS<br>
Повторно запросы не отправляются. При каждом запросе выбирается случайный ответ по этому домену и версии IP из кэша. Тем самым имитируется выборка случайного ответа из DNS.</p></td><td>2024-09-15T12:19:32.085Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="547" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Менялся, но дефолтный не сработает.</p>
</blockquote>
</aside>
<p>А почему? Если сейчас вы добавили рандомизацию или у ркн вайтлист и он даже со стандартным рандомом не пройдет в ютубе?</p></td><td>2024-09-15T12:24:51.735Z</td></tr><tr><td>bolvan</td><td><p>Вайтлист. Рандомизация добавлена, чтобы не было искушения заблокировать фиксированный пейлоад.<br>
На всякий случай и для других стран.</p><aside class="quote quote-modified" data-post="196" data-topic="8055">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/8055/196">Замедление/блокировка YouTube в России</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    (Полагаю, позавчера) начали блокировать любой TLS-трафик (ClientHello, TLS-данные) в сторону IP-адресов GGC (независимо от домена), поэтому GoodbyeDPI/zapret в режиме отправки TLS ClientHello с фейковым доменом перестали работать. 
Другие протоколы (в т.ч. неидентифицируемые) продолжают работать, позволяют обойти блокировку TLS. 
Видимо, по началу блокировали только определённые запросы/домены, а затем заблокировали весь TLS 



UPD 2024-09-14T23:32:00Z (UTC): где-то заблокировано полностью, где…
  </blockquote>
</aside>
</td><td>2024-09-15T12:38:29.500Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Блочат кстати любой пейлоад который начинается на байты 0x16 0x03, но если будет потом в этом пакете SNI: <a href="http://google.com">google.com</a>, то блок не срабатывает. Пейлоады начинающиеся не на 0x16 0x03 работают и блок пробивают (даже 0x00000000 работает)<br>
А вот 0x1603000000000000000 и тд (до нужного размера пакета) будет заблочен</p></td><td>2024-09-15T13:15:40.347Z</td></tr><tr><td>anonymous157(anonymous157)</td><td><p>но такой пейлоад не универсальный…</p></td><td>2024-09-15T13:31:33.336Z</td></tr><tr><td>Ned</td><td><p>может просто игнорируют и срабатывает следующая стратегия?<br>
без 16 03 и еще 2-3 байт это вообще не clienthello</p></td><td>2024-09-15T13:45:26.779Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Именно блок если пакет начинается на 16 03, дальше может быть все что угодно, абсолютно рандомные данные или просто 0, все равно блок</p></td><td>2024-09-15T13:56:30.608Z</td></tr><tr><td>Ned</td><td><aside class="quote no-group" data-username="wigeance" data-post="579" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>даже 0x00000000 работает</p>
</blockquote>
</aside>
<p>я имею ввиду вот это игнорируется, есть еще стратегия после fake?<br>
мне просто проверять лень, себе подобрал и теперь до следующей поломки )</p></td><td>2024-09-15T13:57:22.752Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>6 нулевых фейков нужно чтобы пробить, один нулевой не пробивает</p></td><td>2024-09-15T14:33:26.422Z</td></tr><tr><td>Ned</td><td><p>Что есть по вашему пробитие? Может вас просто проигнорировали?</p></td><td>2024-09-15T15:09:07.055Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Вот это (пробитие блока на ТСПУ имеется ввиду) (–dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-tls=0x00000000 … +fooling)</p>
<pre><code class="lang-auto">root@OpenWrt:~# curl -v https://rr3---sn-n8v7kn7k.googlevideo.com/
&gt; GET / HTTP/1.1
&gt; Host: rr3---sn-n8v7kn7k.googlevideo.com
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 404 Not Found
&lt; Date: Sun, 15 Sep 2024 15:15:01 GMT
&lt; Content-Type: text/html; charset=UTF-8
&lt; Server: gvs 1.0
&lt; Content-Length: 1561
&lt; X-XSS-Protection: 0
&lt; X-Frame-Options: SAMEORIGIN
&lt; 
&lt;!DOCTYPE html&gt;
&lt;html lang=en&gt;
  &lt;meta charset=utf-8&gt;
  &lt;meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width"&gt;
  &lt;title&gt;Error 404 (Not Found)!!1&lt;/title&gt;
  &lt;style&gt;
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  &lt;/style&gt;
  &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;
  &lt;p&gt;&lt;b&gt;404.&lt;/b&gt; &lt;ins&gt;That’s an error.&lt;/ins&gt;
  &lt;p&gt;The requested URL &lt;code&gt;/&lt;/code&gt; was not found on this server.  &lt;ins&gt;That’s all we know.&lt;/ins&gt;
</code></pre></td><td>2024-09-15T15:16:14.719Z</td></tr><tr><td>Ned</td><td><p>А без повторов?<br>
А лучше даже в варешарке посмотреть есть ли там ретрансмишены или ещё чего. Чем автохостлист набивается по документации</p></td><td>2024-09-15T15:29:25.770Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Здравствуйте как совместить в единую стратегию<br>
–wf-l3=ipv6 --wf-tcp=443 --dpi-desync=split2<br>
–wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-autottl=2 --dpi-desync-ttl=2 --dpi-desync-fooling=md5sig</p></td><td>2024-09-15T15:40:55.494Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Я не использую листы, без 6 повторов зависает соединение после отправки clienthello</p></td><td>2024-09-15T15:44:53.996Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="PirateSkull" data-post="588" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/pirateskull/48/9236_2.png" class="avatar"> PirateSkull:</div>
<blockquote>
<p>–wf-l3=ipv6 --wf-tcp=443 --dpi-desync=split2<br>
–wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-autottl=2 --dpi-desync-ttl=2 --dpi-desync-fooling=md5sig</p>
</blockquote>
</aside>
<p>во 2-м варианте нет ограничителя по l3 (ipv4/ipv6), в первом есть.<br>
это специализация ? то есть нужно, чтобы для tcp 443 по ipv6 был split2 ?<br>
disorder2 и split2 - вещи взаимоисключающие. на ipv6 fake,disorder2 не работает ?</p></td><td>2024-09-15T16:03:37.227Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Кажется я понял о чем вы. только как совместить split2 fake и disorder2</p></td><td>2024-09-15T16:07:17.821Z</td></tr><tr><td>Ned</td><td><p>Вы не отправляете clienthello, вы отправляете мусор. Clienthello должно начинаться с 16. Поэтому у вас и зависает. А пробиваетесь вы с повторами потому, что этот ресурс не блокируют, а тормозят.<br>
<a class="mention" href="/u/bolvan">@bolvan</a> рассудите</p></td><td>2024-09-15T16:09:33.913Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>По вашему curl не отправляет clienthello?<br>
я вам говорю про то, что отправка одного нулевого фейка и следом clienthello не пробивает блокировку<br>
а отправка 6 нулевых фейков и следом clienthello пробивает</p></td><td>2024-09-15T16:19:48.919Z</td></tr><tr><td>Ned</td><td><p>мы же говорим о пробитии, значит то, что отправляет curl не важно, только фейк, а фейк у вас с мусором, а не с clienthello</p></td><td>2024-09-15T16:21:29.849Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>так вся суть пробивки тспу в данном случае в том, чтобы у нас clienthello ушел, а serverhello пришел<br>
Как раз таки отправка 6 нулевых фейков позволяет дергать с ip ggc любой sni</p></td><td>2024-09-15T16:23:31.093Z</td></tr><tr><td>Ned</td><td><p>ну тогда вы нашли универсальное решение, задосить проход</p></td><td>2024-09-15T16:25:00.175Z</td></tr><tr><td>bolvan</td><td><p>Никак, они не совместимы.<br>
Если это действительно нужно, придется разносить по инстансам.<br>
Множественные инстансы с разными непересекающимися windivert фильтрами допустимы.<br>
Это аналог специализаций для http/https/http6/https6 в конфиге для linux</p></td><td>2024-09-15T16:30:31.355Z</td></tr><tr><td>bolvan</td><td><p>Действительно, у меня блокчек на одном из провов дает положительные результаты на мусор фейках там, где clienthello фейки не срабатывают.<br>
Видимо мы имеем дело с множественными DPI, у каждого из которых разные алгоритмы работы.<br>
ТСПУ - это РДП РУ, еще есть скат, хрен знает что там еще на пути стоит<br>
Вот всех их и надо пробить, и вариации бывают очень разные и причудливые</p></td><td>2024-09-15T16:34:00.103Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Понятно. А где можно узнать про совместимость  --dpi-desync может я сам попробую подобрать.</p></td><td>2024-09-15T16:34:10.525Z</td></tr><tr><td>bolvan</td><td><p>В доке, где же еще. Там описано что они все делают.<br>
split2 делит запрос на 2 сегмента и отправляет в прямом порядке<br>
disorder2 делит запрос на 2 сегмента и отправляет в обратном порядке<br>
как можно отправить и в прямом, и в обратном одновременно ?</p></td><td>2024-09-15T16:35:36.003Z</td></tr><tr><td>MlwsH(Константин )</td><td><p>Всех приветствую. Ютуб перестал работать, zapret раньше не пробовал никогда, помогите пожалуйста разобраться с ним, ничего не понимаю, винда 10.</p></td><td>2024-09-15T16:35:59.135Z</td></tr><tr><td>bolvan</td><td><p>Начать стоит с winws<br>
–wf-tcp=443 --dpi-desync=split2<br>
если нет, то<br>
–wf-tcp=443 --dpi-desync=disorder2</p>
<p>ютубу этого может хватить на компе в броузере</p></td><td>2024-09-15T16:38:46.998Z</td></tr><tr><td>MlwsH(Константин )</td><td><p>Спасибо, попробую🙏</p></td><td>2024-09-15T16:39:55.552Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>У меня ютуб работает на split2 а остальная запрещенка на disorder2</p></td><td>2024-09-15T16:43:20.645Z</td></tr><tr><td>bolvan</td><td><p>Пока разносить стратегии по хостам нельзя, но это задача на ближайшее время, тк сильно назрело<br>
Сейчас можно сделать ярлычки и запускать их по необходимости. Только не забывать прибивать другой вариант. Можно написать батник с taskkill /f /im winws.exe</p></td><td>2024-09-15T16:45:00.420Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Ок спасибо вам за замечательную прогу. И что объяснили как это работает</p></td><td>2024-09-15T16:47:22.195Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>А если мы про openwrt говорим, то можно же по идее повесить tpws чисто для сплита с листом *.googlevideo.com, а nfqws для всего остального с fake,split2 и list-exclude *.googlevideo.com?</p>
<p>И еще вопрос syndata сильно садит скорость, даже если стратегия просто --dpi-desync=syndata, сразу видно падение скорости (даже на спидтесте, но и сайты заметно медленнее грузит). Это всегда так или я что-то упускаю?</p></td><td>2024-09-15T16:48:54.941Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="PirateSkull" data-post="588" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/pirateskull/48/9236_2.png" class="avatar"> PirateSkull:</div>
<blockquote>
<p>–wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-autottl=2 --dpi-desync-ttl=2 --dpi-desync-fooling=md5sig</p>
</blockquote>
</aside>
<p>я так думаю у вас проблема неработы этой стратегии на ютубе в дефолтном фейке</p>
<p>стоит так попробовать<br>
<code>–wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-autottl=2 --dpi-desync-ttl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=&lt;PATH_TO&gt;\tls_clienthello_www_google_com.bin</code></p>
<p>файл tls_clienthello_www_google_com.bin есть в последнем win bundle в blockcheck/zapret/files/fake</p></td><td>2024-09-15T16:49:34.171Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="wigeance" data-post="607" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>А если мы про openwrt говорим, то можно же по идее повесить tpws чисто для сплита с листом *.googlevideo.com, а nfqws для всего остального с fake,split2 и list-exclude *.googlevideo.com?</p>
</blockquote>
</aside>
<p>В принципе можно, но придется или писать кастом скрипт , или руками это запускать</p>
<aside class="quote no-group" data-username="wigeance" data-post="607" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>И еще вопрос syndata сильно садит скорость, даже если стратегия просто --dpi-desync=syndata, сразу видно падение скорости (даже на спидтесте, но и сайты заметно медленнее грузит). Это всегда так или я что-то упускаю?</p>
</blockquote>
</aside>
<p>не должно. syndata не ограничивается hostlist, но скорость садить не должна<br>
это просто посылка липы в SYN пакете, которая игнорится серваком</p></td><td>2024-09-15T16:54:34.881Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Возможно глупый вопрос, но всё же.<br>
А я правильно понял, что <code>--dpi-desync-split-seqovl-pattern</code> это аналог  <code>--dpi-desync-fake-tls</code>, но в случае использования <code>--dpi-desync-split-seqovl</code>, а не <code>fake</code> ?</p></td><td>2024-09-15T21:41:10.019Z</td></tr><tr><td>Kolobok</td><td><aside class="quote no-group" data-username="wigeance" data-post="607" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>А если мы про openwrt говорим, то можно же по идее повесить tpws чисто для сплита с листом *.googlevideo.com, а nfqws для всего остального с fake,split2 и list-exclude *.googlevideo.com?</p>
</blockquote>
</aside>
<p><code>nfqws</code> поддерживает опцию <code>--hostlist</code>, так что можно просто второй экземпляр запустить, внучок.</p></td><td>2024-09-16T04:10:31.405Z</td></tr><tr><td>bolvan</td><td><p>Почти. Только целый файл - это целый файл определенного размера. Он и передается.<br>
А паттерн - это повторяющийся шаблон, который размазывается на размер, определяемый другими параметрами</p></td><td>2024-09-16T05:45:12.865Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Kolobok" data-post="611" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kolobok/48/8347_2.png" class="avatar"> Kolobok:</div>
<blockquote>
<p><code>nfqws</code> поддерживает опцию <code>--hostlist</code>, так что можно просто второй экземпляр запустить, внучок.</p>
</blockquote>
</aside>
<p>Не все так просто, дедушка</p></td><td>2024-09-16T05:45:38.599Z</td></tr><tr><td>hoztasun</td><td><aside class="quote no-group" data-username="wigeance" data-post="607" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>А если мы про openwrt говорим, то можно же по идее повесить tpws чисто для сплита с листом *.googlevideo.com, а nfqws для всего остального с fake,split2 и list-exclude *.googlevideo.com?</p>
</blockquote>
</aside>
<p>Думаю, можно запустить два (и более) инстанса nfqws с разными стратегиями и hostlist на разных nft очередях и в nftables прописать последовательное применение этих очередей.</p>
<p>Но это, конечно, не то же самое, как если бы один инстанс nfqws сам разруливал какую стратегию ему применять в зависимости от host. Для этого надо видимо какой-то развесистый json конфиг прикручивать.</p></td><td>2024-09-16T08:49:41.369Z</td></tr><tr><td>bolvan</td><td><p>Нельзя повесить 2 очереди. NFQUEUE - final target<br>
А если бы и можно было, то это хреновый оверхед.<br>
Я щас делаю мультистратегию. Будет типа такого.</p>
<p>–hostlist a --dpi-desync=split2 --new --hostlist b --dpi-desync=disorder2 …<br>
будет еще фильтр по портам и версиям ip<br>
так что можно будет все запихнуть в 1 инстанс, даже автолисты</p>
<p>плохо только, что народ начнет злоупотреблять этим<br>
там, где стратегии можно было бы обьединить, они начнут писать крокодилов</p></td><td>2024-09-16T09:08:23.013Z</td></tr><tr><td>hoztasun</td><td><aside class="quote no-group" data-username="bolvan" data-post="615" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Нельзя повесить 2 очереди. NFQUEUE - final target</p>
</blockquote>
</aside>
<p>Да, видимо только через разные ipset’ы.</p>
<aside class="quote no-group" data-username="bolvan" data-post="615" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>–hostlist a --dpi-desync=split2 --new --hostlist b --dpi-desync=disorder2 …</p>
</blockquote>
</aside>
<p>Элегантно. А дефолтную стратегию при этом можно будет задать? Для хостов не из a, b, …?</p></td><td>2024-09-16T09:33:15.093Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hoztasun" data-post="616" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/b9e5f3/48.png" class="avatar"> hoztasun:</div>
<blockquote>
<p>Элегантно. А дефолтную стратегию при этом можно будет задать? Для хостов не из a, b, …?</p>
</blockquote>
</aside>
<p>Поиск идет до первого match.<br>
Если не написать никаких фильтров, то match всегда true.<br>
Это и есть дефолтная стратегия</p></td><td>2024-09-16T09:48:34.401Z</td></tr><tr><td>hoztasun</td><td><p>Понял. Не воспринял сразу, что разделителем стратегий является --new.<br>
Думал, что --hostlist</p></td><td>2024-09-16T10:19:39.419Z</td></tr><tr><td>rulonboev(Rulonboev)</td><td><p>Подскажите, а можно ли для каждого сайта делать свои настройки обхода?<br>
А то blockcheck нашел для одного сайта 1 вариант настроек, я для другого сайта другой… и получается так что: или один сайт работает или другой.<br>
Обьединение настроек не дает эффекта для одного из сайтов, все равно не работает. А по раздельности если прописывать варианты настроек, то работают то один то другой в зависимости какие настройки были прописаны.</p></td><td>2024-09-16T10:54:46.772Z</td></tr><tr><td>hoztasun</td><td><p>Вот <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/615">выше</a> про это и написано. У <a class="mention" href="/u/bolvan">@bolvan</a> в планах реализовать мультистратегию, чтобы можно было к разным наборам хостов применять свою стратегию.</p>
<p>Прямо сейчас из коробки нельзя, как я понимаю. Надо либо использовать одновременно nfqws и tpws для разных хостов, либо колдовать с несколькими инстансами nfqws и ipset’ами.</p></td><td>2024-09-16T11:00:24.903Z</td></tr><tr><td>rulonboev(Rulonboev)</td><td><aside class="quote no-group" data-username="bolvan" data-post="615" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Я щас делаю мультистратегию. Будет типа такого.</p>
<p>–hostlist a --dpi-desync=split2 --new --hostlist b --dpi-desync=disorder2 …</p>
</blockquote>
</aside>
<p>окей… ждемс! <img src="https://ntc.party/images/emoji/twitter/ok_hand.png?v=12" title=":ok_hand:" class="emoji" alt=":ok_hand:" loading="lazy" width="20" height="20"></p></td><td>2024-09-16T11:12:05.146Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Хм, спасибо. То есть в целом такая конструкция адекватна?<br>
<code>"C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin</code></p></td><td>2024-09-16T18:02:33.879Z</td></tr><tr><td>bolvan</td><td><p>Неадекватна</p>
<blockquote>
<p>seqovl добавляет в начало первой отсылаемой части оригинального пакета (1 часть для split и 2 часть для disorder) seqovl байт со смещенным в минус sequence number на величину seqovl.</p>
</blockquote>
<p>Из файла будет использован лишь 1 байт</p>
<p>Скрытый фейк обычно так делается<br>
–dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern= tls_clienthello_www_google_com.bin</p>
<p>652 - размер полезных данных из файла. в данном случае там все данные полезны, потому =размеру файла</p></td><td>2024-09-16T18:16:06.401Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>О, спасибо больше за разъяснение. А что вообще можно почитать в качестве технической базы по сетям в контексте блокировок и их обхода? Необязательно на русском.</p></td><td>2024-09-16T18:30:25.499Z</td></tr><tr><td>Xunlei</td><td><aside class="quote" data-post="1" data-topic="8235">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/vlatsv/48/5461_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BA%D0%B0%D0%BA-%D1%8D%D1%82%D0%BE-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8-%D0%B8-%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8-how-does-it-work-books-and-articles/8235">Как это работает? Книги и Статьи / How does it work? Books and Articles</a> 
  </div>
  <blockquote>
    Всем привет! Прошу накидать список книг и ссылки на статьи. Чтобы можно было понять как это это работает? И самому вносить вклад в исследование данной проблемы. 
Hello folks, I’m asking for a list of books and links to articles. To be able to understand how it works? And to contribute to the research of this problem myself 
Я начну: 
Введение для чайников:
  </blockquote>
</aside>
</td><td>2024-09-16T18:42:39.571Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>О, спасибо <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> Поизучаю.</p></td><td>2024-09-16T18:51:13.555Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Нашел два живучих конфига под ютуб</p>
<details>
<summary>
Спойлер</summary>
<p>–dpi-desync=rst,split2<br>
–dpi-desync=rst,disorder2</p>
</details></td><td>2024-09-17T01:07:14.808Z</td></tr><tr><td>Kolobok</td><td><p>А в чём загвоздка-то? Если в ядре <code>NF_DUP</code> включён, так клонируй исходящий пакет, каждому свою метку присвой и по разным очередям рассылай. А в этом случае, коли один хостлист короткий, можно и без клонирования обойтись: если пакет новый да домен американского видеосервиса содержит - сразу пихай сюды, а если нет - туды отправляй, там разберутся. Всяко веселей, чем прокси со своими причудами и опциями. Или, может, я какую-то другую проблему упускаю?</p></td><td>2024-09-17T09:50:11.614Z</td></tr><tr><td>bolvan</td><td><p>Не нужен этот изврат, скоро будут мульти-профили</p></td><td>2024-09-17T11:40:48.255Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Свежеустановленный Zapret на OpenWRT на роутере, попытки посмотреть Youtube без успеха.<br>
(на ноуте и смартфоне)<br>
Хотя на телефоне ByeDPI пробивает легко при split в позиции 2.</p>
<p>Zapret status = running. При вводе iptables -L не показывает ни одного правила (может так и должно быть? не знаю…)</p>
<p>В zapret пробовал параметры<br>
–dpi-desync=split --dpi-desync-split-pos=2<br>
–dpi-desync=split2 --dpi-desync-split-pos=2<br>
–dpi-desync=split2 --dpi-desync-split-pos=10<br>
–dpi-desync=split2 --dpi-desync-split-tls=sni<br>
из них последние два варианта рекомендованы после blockcheck.<br>
stop_fw не влияет</p>
<p>Что еще можно посмотреть, где искать причину?</p></td><td>2024-09-17T11:56:18.929Z</td></tr><tr><td>iqubik(Iqubik)</td><td><p>Я пока остановился на этом:<br>
NFQWS_OPT_DESYNC=“–dpi-desync=disorder2 --dpi-desync-fooling=badsum”<br>
билайн, одна строка</p></td><td>2024-09-17T12:41:16.062Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="brynza" data-post="630" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>При вводе iptables -L не показывает ни одного правила (может так и должно быть? не знаю…)</p>
</blockquote>
</aside>
<p><code>iptables -nvL POSTROUTING -t mangle</code></p>
<p>Еще у nfqws есть <code>--debug=@/path/to/logfile</code></p></td><td>2024-09-17T12:51:20.660Z</td></tr><tr><td>brynza(Brynza)</td><td><aside class="quote no-group" data-username="spv82" data-post="632" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>iptables -nvL POSTROUTING -t mangle</p>
</blockquote>
</aside>
<pre><code class="lang-auto">Chain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination
    0     0 NFQUEUE    tcp  --  *      br-lan  0.0.0.0/0            0.0.0.0/0            multiport dports 80,443 connbytes 1:6 connbytes mode packets connbytes direction original mark match ! 0x40000000/0x40000000 ! match-set nozapret dst NFQUEUE num 200 bypass
    0     0 NFQUEUE    tcp  --  *      br-lan  0.0.0.0/0            0.0.0.0/0            multiport dports 443 connbytes 1:6 connbytes mode packets connbytes direction original mark match ! 0x40000000/0x40000000 ! match-set nozapret dst NFQUEUE num 200 bypass
    0     0 NFQUEUE    tcp  --  *      br-lan  0.0.0.0/0            0.0.0.0/0            multiport dports 80 mark match ! 0x40000000/0x40000000 ! match-set nozapret dst NFQUEUE num 200 bypass
</code></pre>
<p>да, так показывает<br>
всё ли здесь правильно?</p></td><td>2024-09-17T13:12:17.054Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="brynza" data-post="630" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>ри вводе iptables -L не показывает ни одного правила (может так и должно быть? не знаю…)</p>
</blockquote>
</aside>
<p>На новом openwrt используются nftables. Если были выбраны iptables - это плохо.</p>
<aside class="quote no-group" data-username="brynza" data-post="630" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>–dpi-desync=split --dpi-desync-split-pos=2</p>
</blockquote>
</aside>
<p>Без ограничителей split 100% ломает соединение, поскольку отсылкает фейки.<br>
split2 фейков не отсылает и не нуждается в ограничителях</p>
<p>Надо смотреть дебаг log nfqws</p></td><td>2024-09-17T13:34:49.527Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Спасибо вам, маэстро, что помогаете! Всем спасибо.</p>
<aside class="quote no-group" data-username="bolvan" data-post="634" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если были выбраны iptables - это плохо.</p>
</blockquote>
</aside>
<p>сейчас с логом разберемся, пока ничего не трогаю, и поменяю на nftables.</p>
<aside class="quote no-group" data-username="bolvan" data-post="634" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Надо смотреть дебаг log nfqws</p>
</blockquote>
</aside>
<p>вот так?<br>
/opt/zapret/binaries/mips32r1-lsb/nfqws “–qnum=1 --debug=syslog --dpi-desync=split2 --dpi-desync-split-pos=2”</p>
<p>данная команда выдала в терминал</p>
<p>opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘1’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
Running as UID=*******  GID=********</p>
<p>…и остановилась, не закрылась. Ничего не происходит. Прервал по Ctrl+C.</p></td><td>2024-09-17T13:40:23.425Z</td></tr><tr><td>cypherpunks(cypherpunks:writecodes)</td><td><p>Так нормально. Запустилась и работает, тестируйте.<br>
Хотите иметь фоном - устанавливайте по полной форме, в README описано.</p></td><td>2024-09-17T15:16:34.116Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="brynza" data-post="635" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>и остановилась, не закрылась. Ничего не происходит. Прервал по Ctrl+C.</p>
</blockquote>
</aside>
<p>сислог читается по logread в openwrt<br>
можно так : logread | grep nfqws<br>
если надо на консоль, то надо было --debug без параметров указывать</p></td><td>2024-09-17T18:16:58.583Z</td></tr><tr><td>ech0brav0</td><td><p>Скрипт для тех, кто хочет сделать свой собственный fake пакет с TLS ClientHello с определённым доменом.<br>
Вариант использования: <code>./capture_tls_client_hello.sh example.com</code><br>
<a class="attachment" href="zapret-обсуждение-726/hnpaO7DMY0oB9QzG7e60FzDHV7l.sh">capture_tls_clienthello.sh</a> (1.1 KB)</p></td><td>2024-09-17T19:20:36.980Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Круто, спасибо!</p></td><td>2024-09-17T19:55:32.212Z</td></tr><tr><td>easyone11</td><td><p>а под openwrt такое не получится?</p></td><td>2024-09-17T19:59:56.980Z</td></tr><tr><td>ech0brav0</td><td><p>Попробуйте накатить curl, tshark, jq самостоятельно и удалите строчки с apt install. В пакетах на openwrt не разбираюсь, не знаю есть ли tshark (jq вроде как должен быть)</p></td><td>2024-09-17T20:30:51.342Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="ech0brav0" data-post="638" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/bc8723/48.png" class="avatar"> ech0brav0:</div>
<blockquote>
<p>fake пакет с TLS ClientHello с определённым доменом.</p>
</blockquote>
</aside>
<p><code>(nc -l -p 4343 &gt; hello.bin) &amp; curl https://www.google.com --connect-to ::127.0.0.1:4343 -m 1</code></p></td><td>2024-09-17T20:31:21.705Z</td></tr><tr><td>ArtoriusN(Artur)</td><td><p>Подскажи пожалуйста, четвертый день мучаюсь с подбором стабильного конфига в итоге после очередного изменения и перезапуска:<br>
service zapret stop<br>
service zapret start</p>
<p>проверка по <strong>curl --connect-to ::speedtest.selectel.ru <a href="https://manifest.googlevideo.com/100MB" rel="noopener nofollow ugc">https://manifest.googlevideo.com/100MB</a> -k -o/dev/null</strong> перестала показывать скорость и ютюб перестал быстро открывать видео.<br>
С tpws вроде работает, но тоже нестабильно.</p>
<p>Снес скрипт полностью, установил заново с выбором nfqws, не помогло.<br>
Вот лог, если правильно снял, не разобрался как запускать /opt/zapret/binaries/aarch64/nfqws --debug=@/tmp<br>
пишет - cannot create /tmp</p>
<p>root@OpenWrt:/# logread | grep nfqws<br>
Tue Sep 17 19:42:28 2024 daemon.notice procd: /etc/rc.d/S21zapret: Starting daemon 2: /opt/zapret/nfq/nfqws --qnum=200 --user=daemon --dpi-desync-fwmark=0x40000000 --dpi-desync=rst,disorder2 --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=badsum --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt<br>
Tue Sep 17 19:42:28 2024 daemon.notice procd: /etc/rc.d/S21zapret: Starting daemon 10: /opt/zapret/nfq/nfqws --qnum=210 --user=daemon --dpi-desync-fwmark=0x40000000 --dpi-desync=fake --dpi-desync-repeats=6 --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt<br>
Tue Sep 17 19:42:28 2024 daemon.notice procd: /etc/rc.d/S21zapret: Adding nftables ipv4 rule for nfqws postrouting (qnum 200) : tcp dport {443} ct original packets 1-6 mark and 0x40000000 == 0<br>
Tue Sep 17 19:42:28 2024 daemon.notice procd: /etc/rc.d/S21zapret: Adding nftables ipv4 rule for nfqws prerouting (qnum 200) : tcp sport {443} ct reply packets 1<br>
Tue Sep 17 19:42:28 2024 daemon.notice procd: /etc/rc.d/S21zapret: Adding nftables ipv4 rule for nfqws postrouting (qnum 210) :  udp dport {443} ct original packets 1-6 mark and 0x40000000 == 0</p>
<p>zapret-hosts-user.txt заполнен по инструкции “Обход замедления youtube в России”<br>
Провайдер домру Казань</p>
<p>до этого работало не стабильно, то 50,000-170,000 kbps скорость, то падает до 4000 kbps. Протокол в основном http/1.1 во вкладке сеть в хроме, или по h3 пытается загрузить.</p></td><td>2024-09-17T20:55:25.733Z</td></tr><tr><td>ech0brav0</td><td><p><a class="attachment" href="zapret-обсуждение-726/2WgBvIygg1S2wxygUMjwbbhsd5E.sh">nc_tls_clienthello.sh</a> (712 Bytes)</p></td><td>2024-09-17T21:00:59.820Z</td></tr><tr><td>yatolkosprosit</td><td><p>Чем больше я пытаюсь разобраться в логике работы программы, тем меньше я понимаю. Например, блокчек выдал такой результат для nfqws</p>
<pre><code class="lang-auto">nfqws --dpi-desync=fake,split2 --dpi-desync-ttl=3
</code></pre>
<ol>
<li>
<p>fake и split2 можно применять вместе, но НУЖНО ЛИ? или лучше/достаточно выбрать что-то одно?</p>
</li>
<li>
<p>почему с опциями nfqws --dpi-desync=fake,split2  программа запускается, но если fake и split2 поменять местами: nfqws --dpi-desync=split2,fake, программа выдает ошибку invalid desync combo : split2+fake</p>
</li>
<li>
<p>Блокчек выдал значение --dpi-desync-ttl=3, но в руководстве при этом написано следующее:</p>
</li>
</ol>
<p>Опции nfqws для атаки десинхронизации DPI :</p>
<p>DESYNC_MARK=0x40000000<br>
DESYNC_MARK_POSTNAT=0x20000000<br>
NFQWS_OPT_DESYNC="–dpi-desync=fake <em><strong>–dpi-desync-ttl=0</strong></em></p>
<p>Что вообще значит ttl=0 ? (и -dpi-desync-ttl=5 для ip v6)</p></td><td>2024-09-18T01:35:21.563Z</td></tr><tr><td>WhiteAls(ъыь)</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="645" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<ul>
<li>fake и split2 можно применять вместе, но НУЖНО ЛИ? или лучше/достаточно выбрать что-то одно?</li>
</ul>
</blockquote>
</aside>
<p>split2 режет пакеты, но не отправляет фейки. split режет пакеты и отправляет фейки. но эти фейки - просто пустые пакеты. поэтому fake нужен для отправки конкретных фейков (можно указать пакет при помощи <code>--dpi-desync-fake-tls</code>), чтобы обойти проверку по sni в случае ютуба, например. так что эти режимы можно применять как вместе, так и отдельно - всё зависит от требуемой стратегии.</p><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L389-L397">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L389-L397" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L389-L397" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L389-L397</a></h4>



    <pre class="onebox"><code class="lang-txt">
      <ol class="start lines" start="389" style="counter-reset: li-counter 388 ;">
          <li>Режим split очень похож на disorder, только нет изменения порядка следования сегментов :</li>
          <li>1. поддельная 1-я часть пакета, поле данных заполнено нулями</li>
          <li>2. 1-я часть пакета</li>
          <li>3. поддельная 1-я часть пакета, поле данных заполнено нулями. отсылка 2-й раз.</li>
          <li>4. 2-я часть пакета</li>
          <li>Режим split2 отключает отправку поддельных частей.</li>
          <li>Он может быть использован как более быстрая альтернатива --wsize.</li>
          <li></li>
          <li>disorder2 и split2 не предполагают отсылку фейк пакетов, поэтому опции ttl и fooling неактуальны.</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="yatolkosprosit" data-post="645" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>почему с опциями nfqws --dpi-desync=fake,split2 программа запускается, но если fake и split2 поменять местами: nfqws --dpi-desync=split2,fake, программа выдает ошибку invalid desync combo : split2+fake</p>
</blockquote>
</aside>
<p>читаем про комбинирование, там указанj какой метод на какой позиции можно применять</p><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L476-L482">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L476-L482" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L476-L482" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L476-L482</a></h4>



    <pre class="onebox"><code class="lang-txt">
      <ol class="start lines" start="476" style="counter-reset: li-counter 475 ;">
          <li>КОМБИНИРОВАНИЕ МЕТОДОВ ДЕСИНХРОНИЗАЦИИ</li>
          <li>В параметре dpi-desync можно указать до 3 режимов через запятую.</li>
          <li>0 фаза предполагает работу на этапе установления соединения. Может быть synack или syndata.</li>
          <li>На 0 фазу не действует фильтр по hostlist.</li>
          <li>Последующие режимы отрабатывают на пакетах с данными.</li>
          <li>Режим 1-й фазы может быть fake,rst,rstack. Режим 2-й фазы может быть disorder,disorder2,split,split2,ipfrag2.</li>
          <li>Может быть полезно, когда у провайдера стоит не один DPI.</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="yatolkosprosit" data-post="645" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Что вообще значит ttl=0 ?</p>
</blockquote>
</aside>
<p>я тоже не совсем понимаю зачем указывать нулевой ttl, ведь по умолчанию zapret не модифицирует ttl, по идее <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"><br>
но в целом, касательно опции <code>--dpi-desync-ttl</code>, она применяется для того, чтобы фейковые пакеты не ушли дальше dpi. её значение надо подбирать исходя из того как устроена маршрутизация у твоего конкретного провайдера. также эту опцию можно комбинировать с <code>--dpi-desync-fooling</code>. или наоборот, использовать fooling без ttl (как раз вариант с ttl=0).<br>
для ipv6 опция, кстати, другая <code>--dpi-desync-ttl6</code></p><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L340-L349">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L340-L349" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L340-L349" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/cab95fcf4ed121302d62f4e53b118eb5cb013350/docs/readme.txt#L340-L349</a></h4>



    <pre class="onebox"><code class="lang-txt">
      <ol class="start lines" start="340" style="counter-reset: li-counter 339 ;">
          <li>* TTL казалось бы - лучший вариант, но он требует индивидуальной настройки под каждого провайдера.</li>
          <li>  Если DPI находится дальше локальных сайтов провайдера, то вы можете отрезать себе доступ к ним.</li>
          <li>  Ситуация усугубляется наличием ТСПУ на магистралах, что вынуждает делать TTL достаточно высоким, увеличивая</li>
          <li>  риск пробоя фейка до сервера.</li>
          <li>  Необходим ip exclude list, заполняемый вручную. Вместе с ttl можно применять md5sig. Это ничего не испортит,</li>
          <li>  зато дает неплохой шанс работы сайтов, до которых "плохой" пакет дойдет по TTL.</li>
          <li>  Если не удается найти автоматическое решение, воспользуйтесь файлом zapret-hosts-user-exclude.txt.</li>
          <li>  Некоторые стоковые прошивки роутеров фиксируют исходящий TTL, без отключения этой опции через них работать не будет.</li>
          <li>  КАКИМ СТОИТ ВЫБИРАТЬ TTL : найдите минимальное значение, при котором обход еще работает.</li>
          <li>  Это и будет номер хопа вашего DPI.</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-09-18T02:32:47.924Z</td></tr><tr><td>trin4ik(Trin4ik)</td><td><p><img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji only-emoji" alt=":grinning:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji only-emoji" alt=":+1:" loading="lazy" width="20" height="20"><br>
Спасибо вам за всё, в том числе за эти разъяснения и “фейковый фейк” для обхода SNI и за обновление с мультипрофилями.</p></td><td>2024-09-18T03:05:03.015Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="WhiteAls" data-post="646" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/whiteals/48/8548_2.png" class="avatar"> WhiteAls:</div>
<blockquote>
<p>читаем про комбинирование, там указанj какой метод на какой позиции можно применять</p>
</blockquote>
</aside>
<p>Это совсем не очевидно. Ведь написано:</p>
<blockquote>
<p>Параметры манипуляции могут сочетаться в любых комбинациях.</p>
</blockquote>
<p>Я под любыми комбинациями понимаю и любой порядок тоже. Про эти фазы не расписано что они из себя представляют. Поэтому непонятно если split2 разрезает пакет на части, но не отправляет фейки, а fake отправляет фейки, то почему fake + split2 не равно split, который и разрезает пакеты и отправляет фейки? Логика работы мне не ясна. Вот это я и имел в виду, когда говорил, что мануал написан путанно.</p></td><td>2024-09-18T03:17:17.047Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="WhiteAls" data-post="646" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/whiteals/48/8548_2.png" class="avatar"> WhiteAls:</div>
<blockquote>
<p>split режет пакеты и отправляет фейки. но эти фейки - просто пустые пакеты. поэтому fake нужен для отправки конкретных фейков</p>
</blockquote>
</aside>
<p>Ааа, вот оно что! split - это разрезанный пакет и неконкретные фейки, а fake+split2 - это порезанный пакет и КОНКРЕТНЫЕ фейки! Яснее не стало.</p></td><td>2024-09-18T03:25:11.344Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> winws падает в такой конфигурации при попытке открыть сайт из последнего профиля:</p>
<p><code>.\winws_multi --wf-udp=443 --wf-tcp=443 --filter-udp=443 --hostlist=hosts_all.txt --hostlist=hosts_yt.txt --dpi-desync=fake --new --filter-tcp=443 --hostlist=hosts_yt.txt --dpi-desync=disorder2 --new --filter-tcp=443 --hostlist=hosts_all.txt --dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sni</code></p>
<p>Если в последнем профиле использовать <code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</code>, то работает.</p>
<p>Предыдущая версия без мультипрофилей с <code>--dpi-desync=disorder2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sni</code> работает без падений.</p></td><td>2024-09-18T03:48:34.663Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ArtoriusN" data-post="643" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/artoriusn/48/6166_2.png" class="avatar"> ArtoriusN:</div>
<blockquote>
<p>/opt/zapret/binaries/aarch64/nfqws --debug=@/tmp</p>
</blockquote>
</aside>
<p>И каким образом он начнет писать лог прямо в директорию, а не в файл ?<br>
Конечно, каннот</p></td><td>2024-09-18T04:24:49.278Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="WhiteAls" data-post="646" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/whiteals/48/8548_2.png" class="avatar"> WhiteAls:</div>
<blockquote>
<p>я тоже не совсем понимаю зачем указывать нулевой ttl, ведь по умолчанию zapret не модифицирует ttl, по идее <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
</blockquote>
</aside>
<p>Только ради того, чтобы в любой момент подредактировать 1 циферку и не вспоминать как зовется опция.<br>
Так же как и fooling=none</p></td><td>2024-09-18T04:26:50.373Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="649" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Ааа, вот оно что! split - это разрезанный пакет и неконкретные фейки, а fake+split2 - это порезанный пакет и КОНКРЕТНЫЕ фейки! Яснее не стало.</p>
</blockquote>
</aside>
<p>метод нулевой фазы - это то, что делается на этапе установления соединения, еще до запросов и известного hostname<br>
метод первой фазы - это то, что делается до отправки значимой части запроса. такой, как tls clienthello или http request или wireguard handshake initiation и тд<br>
метод второй фазы - это то, что делается непосредственно со значимой частью запроса. как издеваться над ней</p>
<p>fake :      fake TLS, real TLS<br>
fake, split2 : fake TLS, кусок 1 real TLS, кусок 2 real TLS<br>
fake, split : fake TLS, нули в размере 1 куска real TLS, кусок 1 real TLS, нули в размере 2 куска real TLS, 2 кусок real TLS<br>
split2 : кусок 1 real TLS, кусок 2 real TLS<br>
split : нули в размере 1 куска real TLS, кусок 1 real TLS, нули в размере 2 куска real TLS, 2 кусок real TLS</p>
<p>сейчас бы я называл split = split4. но так исторически сложилось, а ломать уже настроенные конфиги не хочется</p></td><td>2024-09-18T04:31:36.981Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Итак, в продолжение вчерашней темы с zapret на роутере с OpenWRT ради Youtube:</p>
<ul>
<li>–debug ничего не показал, ошибок в логе нет</li>
<li>проверки blockcheck выдают более-менее одинаковые результаты, всегда похожие на <em>–dpi-desync=fake --dpi-desync-ttl=3</em> и <em>–dpi-desync=split2 --dpi-desync-split-pos=5</em></li>
<li>при активном zapret с настройкой <em>–dpi-desync=fake,split2 --dpi-desync-split-pos=2 --dpi-desync-ttl=3</em> проверка blockcheck всегда утверждает, что домены Ютуба доступны и не нуждаются в bypass</li>
<li><strong>но Ютуб не работает</strong> (проверяю на компе и смартфоне)</li>
<li>при этом стандартный <em>goodbyedpi.exe -9 --blacklist</em> на компе и ByDPI на смартфоне с <em>split 2</em> справляются легко</li>
</ul>
<p>О чем это говорит?</p></td><td>2024-09-18T04:54:13.649Z</td></tr><tr><td>ech0brav0</td><td><p>Это говорит о том, что Ютуб у нас никто не блокировал, а только замедлял. Поэтому blockcheck успешно находит стратегии</p></td><td>2024-09-18T05:04:00.859Z</td></tr><tr><td>ech0brav0</td><td><p>Попробуйте оставить только --dpi-desync=split2 --dpi-desync-split-pos=1</p></td><td>2024-09-18T05:05:52.419Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="brynza" data-post="654" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>О чем это говорит?</p>
</blockquote>
</aside>
<p>попробуй так <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/20" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck - #20 by TesterTi</a></p></td><td>2024-09-18T05:21:20.663Z</td></tr><tr><td>brynza(Brynza)</td><td><aside class="quote no-group" data-username="ech0brav0" data-post="656" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/bc8723/48.png" class="avatar"> ech0brav0:</div>
<blockquote>
<p>только --dpi-desync=split2 --dpi-desync-split-pos=1</p>
</blockquote>
</aside>
<p>Компьютер и телефон подключены по WiFI к роутеру с zapret. Пробую вашу строку параметров.</p>
<p>На компе результат никакой (((</p>
<p>На смартфоне медленно открылась главная страница Ютуба (которая с поиском и без рекомендаций). Затем поиск даже выдал какие-то результаты, потом через время появились превью видео, но произвольно выбранное видео не открылось. Вернулся к результатам поиска, а вот обновить страничку уже не вышло - висит с серыми блоками вместо превью…(((<br>
И всё это очень медленно…</p>
<p>Чего-то явно не хватает в параметрах, только вот чего?</p></td><td>2024-09-18T05:29:20.038Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Ок, спасибо, попробую!</p></td><td>2024-09-18T05:32:18.316Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="650" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>winws падает в такой конфигурации при попытке открыть сайт из последнего профиля:</p>
</blockquote>
</aside>
<p>Спасибо. fixed</p></td><td>2024-09-18T05:33:43.668Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="brynza" data-post="654" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/ec9cab/48.png" class="avatar"> brynza:</div>
<blockquote>
<p>–debug ничего не показал, ошибок в логе нет</p>
</blockquote>
</aside>
<p>Это значит ничего и не происходит. Он ничего не обрабатывает.</p>
<blockquote>
<p>/opt/zapret/binaries/mips32r1-lsb/nfqws “–qnum=1 --debug=syslog --dpi-desync=split2 --dpi-desync-split-pos=2”</p>
</blockquote>
<p>С чего взят номер очереди 1 ?</p>
<p>/etc/init.d/zapret stop<br>
/etc/init.d/zapret start_fw</p>
<p>и номер очереди должен быть 200, если не заданы уточняющие параметры для HTTP,HTTPS<br>
если уж запускаете в консоли, то можно и без syslog. с syslog он ничего в консоль не выведет.<br>
или в файл --debug=@/tmp/log.txt</p>
<p>выяснить точнее что запускается скриптами zapret можно через<br>
/etc/init.d/zapret start_daemons<br>
/etc/init.d/zapret stop_daemons</p>
<p>Фильтра по хостлисту или ipset нет  ?</p></td><td>2024-09-18T05:36:09.885Z</td></tr><tr><td>Kolobok</td><td><p>Мультипрофили - это вещь хорошая, я вот твою программку попробовала, скомпилировала с коммита <code>85de6f</code>. За пару минут стратегии для одного провайдера настроила, трёхфазный <code>nfqws</code> как часики швейцарские заработал. И крёстный ход на Ютюбе посмотреть можно, и как молодёжь кувыркается - тоже.<br>
Работает прямо из коробки, без всяких мудрёных шелл-скриптов, благо были запасные очереди с флагом <code>bypass</code> для, так сказать, горячей замены. Молодец!</p>
<p>Но всё же, очередь - она и в Африке очередь. Даже если многопоточно обрабатывать, вход и выход-то у неё последовательные. Значит, малейшая задержка может сразу на всё повлиять, особенно если настройки слишком мудрёные придётся применять. Один пользователь программку не нагрузит, а вот если это шлюз?<br>
Поэтому лучше очереди делить - хотя бы по адресам распределять, или <code>numgen</code> приспособить. А в идеале по хостам, чтобы у каждого фильтра был свой pid. А там уж хоть <code>nice</code> им ставь, хоть через <code>cgroups</code> политики настраивай, чтобы лайвстримы в реальном времени без задержек шли, а форумы, как этот, уж как получится.<br>
Это я к тому говорю, что на будущее стоит об этом подумать, особенно если стратегии сложнее станут. И для масштабирования, где возможность есть, и для алгоритмов, чтобы сеть не сломалась, когда одна TCP сессия по разным процессам разлетится.</p></td><td>2024-09-18T05:36:55.166Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Kolobok" data-post="662" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kolobok/48/8347_2.png" class="avatar"> Kolobok:</div>
<blockquote>
<p>Но всё же, очередь - она и в Африке очередь. Даже если многопоточно обрабатывать, вход и выход-то у неё последовательные. Значит, малейшая задержка может сразу на всё повлиять, особенно если настройки слишком мудрёные придётся применять. Один пользователь программку не нагрузит, а вот если это шлюз?<br>
Поэтому лучше очереди делить - хотя бы по адресам распределять, или <code>numgen</code> приспособить. А в идеале по хостам, чтобы у каждого фильтра был свой pid.</p>
</blockquote>
</aside>
<p>Если в linux *tables настроены правильно с ограничителем по connbytes, то вряд ли оно сильно нагрузит. Оно будет обрабатывать по 10-20 пакетов на каждое соединение, что вообще ни о чем по нагрузке на CPU.<br>
Но если у вас получится сделать так, чтобы на каждое tcp соединение (connmark) пакеты будут приходить одному инстансу nfqws, то это тоже вариант.</p>
<p>Можно не использовать хостлист фильтры, а только ipset.<br>
Загонять в ipset целые ASки проблемных ресурсов с прыгающими IP.<br>
ASN google, ASN meta corp и тд<br>
Остальное загонять через ресолв листа.<br>
Тогда nfqws вообще не будет трогать ничего остального, и оно не сможет сломаться.</p></td><td>2024-09-18T05:47:21.866Z</td></tr><tr><td>trin4ik(Trin4ik)</td><td><p>Апните репу, пересоберите проект, добавьте к правилам с fake следующий параметр</p><aside class="quote quote-modified" data-post="148" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/148">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Провы по глупости стали дурить DPI, чтобы создать сиюминутное конкурентное преимущество. 
В ответ в РКН включили особый режим против дурения на некоторых ggc. 
Перестали работать фейки. Но им пришлось оставить разрешенными SNI от гуглодоменов. 
Поэтому дописываем в стратегию --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin , и пока этого достаточно для дурения и блокировок, и ютуба. 
Тем не менее чисто профилактически в nfqws заменен дефольный ClientHello на версию…
  </blockquote>
</aside>

<pre><code class="lang-auto"> --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin
</code></pre>
<p>и в теории это всё, что требуется, что обойти текущие блокировки (в смысле текущие проблемы с fake, т.к. как я понял в данный момент fake не работает только с GGC, остальные сайты с ним прекрасно открываются)</p></td><td>2024-09-18T07:11:06.598Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Ох, спасибо вам, уважаемые. И особенно респект автору за скрипт и техподдержку!</p>
<p>Номер очереди ставил и 200. Результат такой же. (увидел на гитхабе чьи-то дампы с –qnum=1 и –qnum=200 и делал как попугай <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="bolvan" data-post="661" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Фильтра по хостлисту или ipset нет ?</p>
</blockquote>
</aside>
<p>нет</p>
<aside class="quote no-group" data-username="bolvan" data-post="661" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Это значит ничего и не происходит. Он ничего не обрабатывает.</p>
</blockquote>
</aside>
<p>Вот у меня тоже такие подозрения…</p>
<p>С --debug я не никогда не видел больше чем это после запуска/перезапуска, и при посещении сайтов там строки не добавляются:<br>
initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘200’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
set_socket_buffers fd=6 rcvbuf=2048 sndbuf=32768<br>
fd=6 SO_RCVBUF=4096<br>
fd=6 SO_SNDBUF=65536<br>
Running as UID=1 GID=1<br>
set_socket_buffers fd=4 rcvbuf=65536 sndbuf=32768<br>
fd=4 SO_RCVBUF=131072<br>
fd=4 SO_SNDBUF=65536</p>
<p>Доктор, скажите - есть ли шансы?</p></td><td>2024-09-18T07:40:52.614Z</td></tr><tr><td>bolvan</td><td><p>Такое вряд ли может быть, если не сделано что-то совсем не то<br>
Надо выбрать в сетапе нфтаблес, пройтесь по всему заново<br>
Остановить демоны<br>
/etc/init.d/zapret stop_daemons<br>
Запустить в консоли nfqws --qnum 200 --debug (без =syslog)<br>
Дергать сайты<br>
Еще посмотреть<br>
nft list table inet zapret<br>
Если были установлены iptables, то снести все правила<br>
iptables -F<br>
iptables -F -t mangle<br>
iptables -F -t nat<br>
ip6tables -F<br>
ip6tables -F -t mangle<br>
ipt6ables -F -t nat<br>
И вообще лучше переделать весь роутер заново, раз такие безумные попытки были с iptables<br>
firstboot</p></td><td>2024-09-18T08:19:28.832Z</td></tr><tr><td>Kolobok</td><td><aside class="quote no-group" data-username="bolvan" data-post="663" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если в linux *tables настроены правильно с ограничителем по connbytes, то вряд ли оно сильно нагрузит. Оно будет обрабатывать по 10-20 пакетов на каждое соединение, что вообще ни о чем по нагрузке на CPU.</p>
</blockquote>
</aside>
<p>Это само собой разумеется, даже <code>ct original packets &lt; 7</code> вполне хватает, но порою столько короткоживущих соединений открывается - хоть вешайся.</p>
<aside class="quote no-group" data-username="bolvan" data-post="663" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но если у вас получится сделать так, чтобы на каждое tcp соединение (connmark) пакеты будут приходить одному инстансу nfqws, то это тоже вариант.</p>
</blockquote>
</aside>
<p>Свой остаточный фильтр я так организовала: беру хеш от L3 адресов и портов (для IPv4 это 12 байт всего), выбираю из него три бита (ибо обработчиков у меня восемь) и ставлю меткой, а потом уже по метке выбираю очередь (<code>ct mark vmap { 0 : 666, 1 : 667, 2 : 668, 3 : 669, 4 : 670, 5 : 671, 6 : 672, 7 : 673} queue flags bypass</code>). Но ума в этом, конечно, немного - простая слепая балансировка, никакого QoS.<br>
В простейшем случае думаю, что можно третий бит сделать управляющим: пускать 5-8 очереди на соединения по известным признакам (те же сеты ip, еле ворочающиеся при большом количестве в одной группе, или даже SNI распознавать), а 1-4 - по остаточному принципу. Либо процессов побольше запустить - параллелизьм в этом деле никогда не навредит. Вот бы и с QUIC новомодным всё так просто было, как с TCP…</p>
<aside class="quote no-group" data-username="bolvan" data-post="663" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Можно не использовать хостлист фильтры, а только ipset.</p>
</blockquote>
</aside>
<p>Боюсь я, что такая мера слишком темпоральненькая и от обновлений зависимая. Время нынче такое, час от часу не легче, глядишь - вся <code>0/0</code> проблемной окажется…</p>
<aside class="quote no-group" data-username="bolvan" data-post="663" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Тогда nfqws вообще не будет трогать ничего остального, и оно не сможет сломаться.</p>
</blockquote>
</aside>
<p>А мне вот кажется, это от лукавого всё. Пущай и трогает, и ломает. Мы же ничего не нарушаем, TCP спецификацию чтим и соблюдаем. Сами сломались - сами пускай и чинятся, нечего им конкурентное преимущество давать только за то, что их слуги сатаны блокировать не хотят. То бишь, говоря терминологией мультипрофилей - последний, fallback профиль, должен работать без <code>--hostlist</code> вовсе. Но это, разумеется, каждый должен сам за себя решить.</p></td><td>2024-09-18T08:37:32.187Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="trin4ik" data-post="664" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/trin4ik/48/6756_2.png" class="avatar"> trin4ik:</div>
<blockquote>
<p><code>--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</code></p>
</blockquote>
</aside>
<p>Пожалуйста подскажите как суммировать в конфиге данный метод вместе с "disorder2 ". Заранее спасибо!</p></td><td>2024-09-18T13:21:22.027Z</td></tr><tr><td>Ori</td><td><p><code>--dpi-desync=fake,disorder2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</code></p></td><td>2024-09-18T13:24:32.185Z</td></tr><tr><td>Guac</td><td><p>Привет!<br>
Подскажите пожалуйста, пытаюсь найти аналог byedpi для корректной работы дискорд. с bdpi приложение запускается, но дальнейшее подключение к vc (звонку) остаётся не возможным. (не подлючается, либо на стадии “connecting” or “connecting to RTC”. Без bdpi приложение соответственно вообще не работает. Сюда собственно пришёл по референсу (см. скриншот).</p>
<p>По сути дела, вопрос прост, есть ли возможность решить вышеописаную проблему с zapret?<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/6ac774cd5cb994f8c828f868048503b1ac7e1101.png" data-download-href="https://ntc.party/uploads/default/6ac774cd5cb994f8c828f868048503b1ac7e1101" title="image"><img src="zapret-обсуждение-726/6ac774cd5cb994f8c828f868048503b1ac7e1101.png" alt="image" data-base62-sha1="feBWAjsu3SnFuwqsnD5tNGp7YGd" width="690" height="173" data-dominant-color="F7F6F7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">833×210 4.98 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-09-18T14:53:10.798Z</td></tr><tr><td>Guac</td><td><aside class="quote no-group" data-username="Guac" data-post="670" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/b5e925/48.png" class="avatar"> Guac:</div>
<blockquote>
<p>м</p>
</blockquote>
</aside>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/698b3ab26be1ab517f7a478db538e0811b412536.png" data-download-href="https://ntc.party/uploads/default/698b3ab26be1ab517f7a478db538e0811b412536" title="image"><img src="zapret-обсуждение-726/698b3ab26be1ab517f7a478db538e0811b412536_2_624x500.png" alt="image" data-base62-sha1="f3GqLHzBxbtgpo70qhD472Clh30" width="624" height="500" srcset="zapret-обсуждение-726/698b3ab26be1ab517f7a478db538e0811b412536_2_624x500.png, zapret-обсуждение-726/698b3ab26be1ab517f7a478db538e0811b412536.png 1.5x, zapret-обсуждение-726/698b3ab26be1ab517f7a478db538e0811b412536.png 2x" data-dominant-color="FAF9FA"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">837×670 29.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-09-18T14:58:46.172Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Вы уже пробовали preset_russia.cmd, в вашем случае не решает?</p></td><td>2024-09-18T14:59:16.381Z</td></tr><tr><td>_rv</td><td><p>Только что буквально в процессе воспроизведения ютуба сломалась стратегия disorder2, которая нормально работала даже после того, как сломали дефолтный fake. К счастью, preset_russia.cmd из свежего zapret-winws заработал без проблем.</p></td><td>2024-09-18T17:18:27.453Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>То же самое. Пришлось переключить профиль для YT на split2.</p></td><td>2024-09-18T17:19:50.116Z</td></tr><tr><td>WhiteAls(ъыь)</td><td><p>у меня наоборот, ещё прошлой ночью перестал работать режим fake,split2 (как с рандомным фейком, так и гугловским). помогло переключение на disorder2 и пока работает (речь про tcp, на udp я забил). но с этим режимом не грузятся видео с твиттера, интересно почему</p></td><td>2024-09-18T18:39:45.310Z</td></tr><tr><td>Ori</td><td><p>Тоже отвалился disorder2 до ростелекомовских ggc (спб).<br>
Работает --dpi-desync=split2 --dpi-desync-split-seqovl=1.</p></td><td>2024-09-18T18:44:29.332Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Новосибирск, новотелеком, мин 10 назад тоже начал блочиться <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> --dpi-desync=disorder2</p></td><td>2024-09-18T18:53:55.599Z</td></tr><tr><td>anon60595749</td><td><p>Да, похоже сборку TLS из сегментов порезанных по границе второго байта не осилили. На этом все и держится. Пока.</p></td><td>2024-09-18T18:54:11.600Z</td></tr><tr><td>hpdevfox(hpdevfox)</td><td><p>просто disorder2 на split2 меняем и едем</p></td><td>2024-09-18T18:58:56.416Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Сейчас работает с:<br>
<a class="attachment" href="zapret-обсуждение-726/ciiDoigyzBkQy09gU8wuYZvE8JZ.txt">list-youtube.txt</a> (384 байта)<br>
NFQWS_OPT_DESYNC=“–hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new --dpi-desync=disorder2”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”</p></td><td>2024-09-18T22:18:47.819Z</td></tr><tr><td>Ned</td><td><aside class="quote no-group" data-username="MAMBA" data-post="680" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”</p>
</blockquote>
</aside>
<p>это бессмысленно</p></td><td>2024-09-18T22:57:57.553Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="Ori" data-post="676" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>seqovl</p>
</blockquote>
</aside>
<p>а seqovl только у меня с hostlist не работает?<br>
вчера убирал заблоченые домены из листа и на них всё равно заходилось если стратегия --dpi-desync=split2 --dpi-desync-split-seqovl=1</p>
<p>(/opt/zapret/ipset/./clear_lists.sh + /opt/zapret/ipset/./get_config.sh делал)</p></td><td>2024-09-19T04:10:03.495Z</td></tr><tr><td>bolvan</td><td><p>с хостлистом имеют проблемы только wssize, syndata и synack, остальные - нет</p></td><td>2024-09-19T05:42:41.497Z</td></tr><tr><td>easyone11</td><td><p>да вот я тоже так понимал по ридмишки, странная фигня ну да ладно<br>
ps<br>
делал /etc/init.d/zapret restart после изменений в конфиге, может правильней как то по другому</p></td><td>2024-09-19T05:59:09.821Z</td></tr><tr><td>bolvan</td><td><p>Всегда можно --debug сделать и посмотреть что делается по отношению к “сайту под вопросом”</p></td><td>2024-09-19T06:06:38.096Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="Ned" data-post="681" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/848f3c/48.png" class="avatar"> Ned:</div>
<blockquote>
<p>это бессмысленно</p>
</blockquote>
</aside>
<p>Прошу разъяснить почему. Спасибо.</p></td><td>2024-09-19T07:11:53.431Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Из readme:</p>
<blockquote>
<p>Для UDP действуют только режимы десинхронизации fake,hopbyhop,destopt,ipfrag1,ipfrag2,udplen,tamper.</p>
</blockquote></td><td>2024-09-19T07:18:46.640Z</td></tr><tr><td>bolvan</td><td><p>Разбивка UDP на пакеты теоретически возможна по пейлоаду, вот только это сломает почти каждое приложение. Проги, работающие с UDP, ожидают доставку датаграмм в том виде, в каком они отправлялись. С тем же размером. Автоматической состыковки в единый поток на уровне ОС нет, а в приложении даже если такая состыковка есть, то она построена на своей логике. Логика состыковки QUIC основана на содержимом пакетов, а не просто “в ряд” один за одним. Ведь там могут быть и потери, и disorder. Состыковать в правильном порядке просто по факту получения пакетов невозможно. Приложение вынуждено придумывать свои схемы управления потоком, и единственная информация, которая поможет это сделать, закодирована в самом пейлоаде. И если мы это порежем, мы сломаем протокол.<br>
Можно резать на уровне IP. --dpi-desync=ipfrag2. Но это работает далеко не на всех ресурсах, поскольку фрагменты часто режутся системами защиты от атак.</p></td><td>2024-09-19T07:49:37.529Z</td></tr><tr><td>gav-gav</td><td><aside class="quote no-group quote-modified" data-username="MAMBA" data-post="680" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>–dpi-desync=split2 --dpi-desync-split-seqovl=1 --new --dpi-desync=disorder2</p>
</blockquote>
</aside>
<p>Вчера работало, сегодня уже нет. Апстрим весткол.</p></td><td>2024-09-19T11:59:43.877Z</td></tr><tr><td>StudentIrgups(Student)</td><td><p>Подскажите, чтобы включить вывод логов в syslog, нужно в опции ‘NFQWS_OPT_DESYNC="–debug’ добавить? Что-то readme читаю, не могу понять, логи не выводятся…</p></td><td>2024-09-19T12:03:53.759Z</td></tr><tr><td>bolvan</td><td><p>–debug=syslog</p></td><td>2024-09-19T12:11:55.659Z</td></tr><tr><td>Sivirus(Snake)</td><td><aside class="quote no-group" data-username="MAMBA" data-post="680" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new --dpi-desync=disorder2”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”</p>
</blockquote>
</aside>
<p>мгтс мск на android tv заработало ток в таком виде + hostlist</p></td><td>2024-09-19T12:24:31.929Z</td></tr><tr><td>StudentIrgups(Student)</td><td><p>Тоже работает эта стратегия.</p></td><td>2024-09-19T12:35:37.249Z</td></tr><tr><td>StudentIrgups(Student)</td><td><p>Спасибо! Работает.</p></td><td>2024-09-19T12:36:16.789Z</td></tr><tr><td>Ned</td><td><p>Завирусилось )</p></td><td>2024-09-19T12:42:14.697Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Sivirus" data-post="692" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sivirus/48/8199_2.png" class="avatar"> Sivirus:</div>
<blockquote>
<p>мгтс мск на android tv заработало ток в таком виде + hostlist</p>
</blockquote>
</aside>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=split2”</p>
<p>только вот это бред</p></td><td>2024-09-19T13:08:34.324Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Спасибо. Понял ошибку. Закомментирую</p></td><td>2024-09-19T13:14:03.259Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Прошу подсказать почему это не рабочая конструкция. вторая часть не работает и бесполезна…</p>
<p>–dpi-desync=split2 --dpi-desync-split-seqovl=1 --new --dpi-desync=disorder2</p></td><td>2024-09-19T14:21:34.714Z</td></tr><tr><td>newb1e</td><td><p>Потому что если в первой части нет фильтров (по протоколу, ip, хостлисту и т.д.), то под нее подпадает все и вторая часть ни на что не влияет.</p></td><td>2024-09-19T14:27:23.624Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Здесь все правильно?<br>
NFQWS_OPT_DESYNC=“–hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new --dpi-desync=disorder2”</p></td><td>2024-09-19T14:30:32.773Z</td></tr><tr><td>newb1e</td><td><p>да</p></td><td>2024-09-19T14:32:36.549Z</td></tr><tr><td>slava28(Вячеслав)</td><td><p>здравствуйте,скажите list-youtube.txt в какую папку класть?</p></td><td>2024-09-19T15:16:08.202Z</td></tr><tr><td>newb1e</td><td><p>В Windows он уже лежит там, где надо - в папке zapret-winws.</p></td><td>2024-09-19T15:22:25.582Z</td></tr><tr><td>Ori</td><td><p><a href="https://ntc.party/t/%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB%D0%B8-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%81%D1%8F-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D1%81-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%BC-7/10349/146">Репостну</a> тут. Не удалось достать до ростелекомовских серверов (<code>rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code>) по udp с дефолтным fake или с комплектными пейлоадами - таймаутится. Тестил так:<br>
<code>curl -sv -o NUL --http3-only -X POST https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code></p>
<p>Решил вопрос кастомным пейлоадом от гугла и --dpi-desync-repeats=2. Без повторов не проходит и без своего пэйлоада - тоже не проходит. Такие дела.</p></td><td>2024-09-19T15:23:24.703Z</td></tr><tr><td>bolvan</td><td><p>У меня этот адрес никаким пейлоадом не пробивается с любым кол-вом попыток.<br>
Остальные пробиваются, этот - нет.<br>
Пробивается даже запрос на свой VPSник с initial 'rr2—sn-gvnuxaxjvh-o8ge.googlevideo.com`<br>
Двумя фейками.<br>
Но на оригинальном адресе ответа нет.<br>
Если на оригинальный адрес слать другие initial, то ответ сервера есть с ошибкой сертификата.</p>
<p>Делаю вероятный вывод, что на группе адресов некоторых GGC включен stateless режим</p></td><td>2024-09-19T16:21:26.250Z</td></tr><tr><td>Ori</td><td><p>Ну у меня вроде работает, хз. Или я не туда смотрю и потому не вижу ошибки.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">curl -sv -o NUL --http3-only -X POST https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com
* Host rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com:443 was resolved.
* IPv6: (none)
* IPv4: 178.66.83.173
*   Trying 178.66.83.173:443...
*  CAfile: C:\Users\1\AppData\Local\Microsoft\WinGet\Packages\cURL.cURL_Microsoft.Winget.Source_8wekyb3d8bbwe\curl-8.10.0_1-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* Server certificate:
*  subject: CN=*.googlevideo.com
*  start date: Aug 27 14:31:18 2024 GMT
*  expire date: Nov  5 14:31:17 2024 GMT
*  subjectAltName: host "rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com" matched cert's "*.googlevideo.com"
*  issuer: C=US; O=Google Trust Services; CN=WR2
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (256/128 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com () port 443
* using HTTP/3
* [HTTP/3] [0] OPENED stream for https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com/
* [HTTP/3] [0] [:method: POST]
* [HTTP/3] [0] [:scheme: https]
* [HTTP/3] [0] [:authority: rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com]
* [HTTP/3] [0] [:path: /]
* [HTTP/3] [0] [user-agent: curl/8.10.0]
* [HTTP/3] [0] [accept: */*]
&gt; POST / HTTP/3
&gt; Host: rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com
&gt; User-Agent: curl/8.10.0
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/3 404
&lt; date: Thu, 19 Sep 2024 16:23:08 GMT
&lt; content-type: text/html; charset=UTF-8
&lt; server: gvs 1.0
* HTTP/3 stream 0 reset by server
* Connection #0 to host rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com left intact
</code></pre>
</details></td><td>2024-09-19T16:24:46.384Z</td></tr><tr><td>bolvan</td><td><p>На разных провах по-разному видимо</p></td><td>2024-09-19T16:35:04.815Z</td></tr><tr><td>Ori</td><td><p>У человека с ТТК из темы что я репостнул выше тоже <a href="https://ntc.party/t/%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB%D0%B8-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%81%D1%8F-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D1%81-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%BC-7/10349/154">quic завелся</a> на его адресах. Его сервера мне тоже не удавалось достать.</p></td><td>2024-09-19T16:36:15.222Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Если при install_easy не спрашивает LAN и WAN - это ведь ненормально?<br>
Почему такое может быть?</p>
<p>Может это быть когда второй роутер (в который ставится zapret), своим портом lan1 подключен к lan-порту первого (основного/ведущего) роутера?</p></td><td>2024-09-19T17:01:49.508Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p><a href="https://ntc.party/t/%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BE-%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D1%82%D1%81%D0%BF%D1%83/4625/161">Вот тут</a> я еще писал про стейтлесс на некоторых провайдерах на некоторые айпишники ggc</p></td><td>2024-09-19T17:26:32.033Z</td></tr><tr><td>Ori</td><td><p>У меня соединение с сервером из этого поста прошло с моим новым пэйлоадом <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">C:\Users\1&gt;curl -v --http3-only https://rr3---sn-n8v7kn7k.googlevideo.com
Note: Using embedded CA bundle, for proxies (228633 bytes)
* Host rr3---sn-n8v7kn7k.googlevideo.com:443 was resolved.
* IPv6: (none)
* IPv4: 173.194.177.21
*   Trying 173.194.177.21:443...
*  CAfile: C:\Users\1\AppData\Local\Microsoft\WinGet\Packages\cURL.cURL_Microsoft.Winget.Source_8wekyb3d8bbwe\curl-8.10.0_1-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* Server certificate:
*  subject: CN=*.googlevideo.com
*  start date: Aug 27 14:31:18 2024 GMT
*  expire date: Nov  5 14:31:17 2024 GMT
*  subjectAltName: host "rr3---sn-n8v7kn7k.googlevideo.com" matched cert's "*.googlevideo.com"
*  issuer: C=US; O=Google Trust Services; CN=WR2
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (256/128 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to rr3---sn-n8v7kn7k.googlevideo.com () port 443
* using HTTP/3
* [HTTP/3] [0] OPENED stream for https://rr3---sn-n8v7kn7k.googlevideo.com/
* [HTTP/3] [0] [:method: GET]
* [HTTP/3] [0] [:scheme: https]
* [HTTP/3] [0] [:authority: rr3---sn-n8v7kn7k.googlevideo.com]
* [HTTP/3] [0] [:path: /]
* [HTTP/3] [0] [user-agent: curl/8.10.0]
* [HTTP/3] [0] [accept: */*]
&gt; GET / HTTP/3
&gt; Host: rr3---sn-n8v7kn7k.googlevideo.com
&gt; User-Agent: curl/8.10.0
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/3 404
&lt; date: Thu, 19 Sep 2024 17:47:50 GMT
&lt; content-type: text/html; charset=UTF-8
&lt; server: gvs 1.0
* HTTP/3 stream 0 reset by server
* Connection #0 to host rr3---sn-n8v7kn7k.googlevideo.com left intact
curl: (95) HTTP/3 stream 0 reset by server
</code></pre>
</details></td><td>2024-09-19T17:49:32.734Z</td></tr><tr><td>bolvan</td><td><p>Если openwrt, то он и не должен спрашивать. автоматом определяется.<br>
В linux спрашивает wan, если nfqws и lan, если tpws.</p></td><td>2024-09-19T18:01:32.089Z</td></tr><tr><td>anonymous162(anonymous162)</td><td><p>Есть ли наглядный способ проверки стратегии QUIC для googlevideo по аналогии с curl+speedtest?</p></td><td>2024-09-19T18:59:31.243Z</td></tr><tr><td>avolk</td><td><p>Тоже так заработал</p></td><td>2024-09-19T19:02:41.255Z</td></tr><tr><td>avolk</td><td><p>Подскажите, для LG Webos есть какое-то решение?</p></td><td>2024-09-19T19:04:40.902Z</td></tr><tr><td>Ned</td><td><blockquote>
<p>через cf и google это имя вообще не ресолвится</p>
</blockquote>
<p>упс, скопировалось криво, все нормально</p></td><td>2024-09-19T19:05:17.042Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group quote-modified" data-username="MAMBA" data-post="700" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --dpi-desync-split-seqovl=1"</p>
</blockquote>
</aside>
<p>На данной настройке часть видео очень долго кэшируется, часть нет. Куда копать?</p></td><td>2024-09-19T19:10:06.796Z</td></tr><tr><td>Ori</td><td><p>Ну сам факт соединения можно проверить добавив --http3-only в курле, как я писал выше. А вот со скоростью хз как.</p>
<pre><code class="lang-auto">curl -sv -o NUL --http3-only -X POST https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com
</code></pre>
<p>-X POST хз нужен или нет. Просто запросы на ютубе по нему идут, так что я добавил.</p>
<p><a class="mention" href="/u/mamba">@MAMBA</a> А раньше было нормально? Смотрите что у вас в консоли в браузере.</p></td><td>2024-09-19T19:14:33.496Z</td></tr><tr><td>Ned</td><td><p>попробуйте google fake + disorder2 + свой ttl или fooling</p></td><td>2024-09-19T19:20:28.993Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="Ned" data-post="719" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/848f3c/48.png" class="avatar"> Ned:</div>
<blockquote>
<p>disorder2</p>
</blockquote>
</aside>
<p>disorder2 со вчерашнего вечера не работает.</p></td><td>2024-09-19T19:26:03.937Z</td></tr><tr><td>Ned</td><td><p>когда alone да, но с google fake у меня нормально<br>
и у вас там quic был со сплитом, кроме комментария еще установите MODE_QUIC=0<br>
нужно в чистоте держать любой конфиг</p></td><td>2024-09-19T19:27:13.745Z</td></tr><tr><td>Ori</td><td><p>Можно попробовать split2 + dpi-desync-split-seqovl-pattern=пэйлоад от гугла + dpi-desync-split-seqovl=размер пэйлоада гугла в байтах</p></td><td>2024-09-19T19:28:25.752Z</td></tr><tr><td>slava28(Вячеслав)</td><td><p>скажите на роутер какой конфиг заработает?</p></td><td>2024-09-19T19:45:31.979Z</td></tr><tr><td>hpdevfox(hpdevfox)</td><td><p>запусти blockcheck и узнай</p></td><td>2024-09-19T19:46:04.598Z</td></tr><tr><td>satter</td><td><p>Прошу сильно не пинать и подсказать - поставил zapret на keenetic, хочу попробовать мультистратегию. Куда ее прописывать - в строчку в config NFQWS_OPT_DESYNC=“–dpi-desync=fake --new --dpi-desync=split2” и тд или как-то по другому?</p></td><td>2024-09-19T20:22:02.984Z</td></tr><tr><td>mihrutkin</td><td><p>Господа, работает 5 минут и отваливается.<br>
Попробуйте у себя<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 <code> --wssize 1:6 --dpi-desync-autottl=1:1-10 --dpi-desync-fooling=md5sig</code> --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”`</p></td><td>2024-09-19T20:53:06.456Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>wssize вроде вообще лучше не использовать (если есть такая возможность).<br>
У меня сейчас такой вариант работает - может и у вас приживётся (сам пользуюсь winws, так что адаптировал команду под ваше).</p>
<p><code>NFQWS_OPT_DESYNC="--dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"</code></p></td><td>2024-09-19T21:00:27.709Z</td></tr><tr><td>mihrutkin</td><td><p>Спасибо огромное, пошел тестить</p></td><td>2024-09-19T21:01:13.615Z</td></tr><tr><td>mihrutkin</td><td><p>И ваше зависает минут через 5-8. Что ему вдруг надо через 5 минут то</p></td><td>2024-09-19T21:20:09.903Z</td></tr><tr><td>Planzar(Planzar)</td><td><p>Ребята, благодаря Zapret открыл доступ к ресурсам, забаненным при помощи DPI (Ютуб, Инста, Флибуста, nnmclub и т.п.), конфиг --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=6 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=files/fake/quic_initial_google_com.bin --wssize 1:6 --wf-l3=ipv4 --wf-tcp=1-65535 --wf-udp=1-65535, спасибо неравнодушным людям за конфиг. Запускаю на винде через winws.<br>
Но вот беда, перестают грузиться картинки в Телеге, пока не отключишь winws. Ни у кого нет мыслей, как побороть проблему?</p></td><td>2024-09-19T21:44:45.570Z</td></tr><tr><td>Ori</td><td><p>Зачем на все порты повесили winws? Сделайте так --wf-tcp=443,80 --wf-udp=443<br>
–dpi-desync-ttl=6 попробуйте убрать, md5sig и badseq должно хватать в теории.<br>
wssize по возможности отключите. Он тормозит инет.<br>
Зачем вы в fake-tls засунули фейк для quic? Там должно быть tls_clienthello_www_google_com<br>
Для quic есть --dpi-desync-fake-quic</p>
<p><code>--wf-l3=ipv4 --wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=files/fake/tls_clienthello_www_google_com.bin --dpi-desync-fake-quic=files/fake/quic_initial_google_com.bin</code></p></td><td>2024-09-19T21:49:58.806Z</td></tr><tr><td>Planzar(Planzar)</td><td><p>Согласен, с портами лишку дал. Но вот что касается Вашего набора флагов, с ним ни Ютуб, ни Инста и т.п. не завелись, с тем же, что выше сбросил, работают и перечисленные ресурсы, и этот форум, но беда с загрузкой картинок и видео в Телеграме (сами сообщения без картинок в Телеге грузятся).</p></td><td>2024-09-19T22:24:10.382Z</td></tr><tr><td>Ori</td><td><p>Ютуб у вас скорее всего из-за wssize работает. Он эффективный, но лучше его не использовать. Попробуйте его обратно добавить.</p></td><td>2024-09-19T22:27:07.766Z</td></tr><tr><td>Ori</td><td><p>Можете так попробовать, если у вас плюс-минус как на других провайдерах:<br>
<code>--wf-l3=ipv4 --wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=files/fake/tls_clienthello_www_google_com.bin --dpi-desync-fake-quic=files/fake/quic_initial_google_com.bin</code></p></td><td>2024-09-19T22:40:00.044Z</td></tr><tr><td>Planzar(Planzar)</td><td><p>Спасибо! Теперь и картинки с видео в Телеге грузиться стали. А проблема с Телегой была в --dpi-desync=fake,disorder2 (вместо split2) или в отсутствии --dpi-desync-split-seqovl=1?</p></td><td>2024-09-19T23:02:59.237Z</td></tr><tr><td>Ori</td><td><p>Без понятия. Я бы предположил что в wssize проблема была. Возможно, телега с ним не очень работала.</p></td><td>2024-09-19T23:07:28.945Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Попробовал blockcheck на трекеры rutracker’a (bt*.t-ru.org) - ни одной рабочей стратегии. По итогу плюнул, настроил через proxifier. Я правильно понял, что zapret в данном случае не помощник?</p></td><td>2024-09-19T23:52:09.724Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="arinoki" data-post="737" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>Попробовал blockcheck на трекеры rutracker’a (bt*.t-ru.org) - ни одной рабочей стратегии.</p>
</blockquote>
</aside>
<p>Эти трекеры раньше были заблокированы по ip. Сейчас они вроде бы не заблокированы, но они размещаются где-то в инфраструктуре Cloudflare и из-за этого возникают переодически проблемы с доступом. В общем, я дкмаю, что bt*.t-ru.org - неверный выбор. Лучше попробовать сам Rutracker.</p>
<p>Вы хотите чтобы трекеры нормально работали? Если их снова заблокировали по ip, то ни zapret, ни GDPI не помогут. Если с ними проблемы из-за Cloudflare, то эти программы тоже здесь не при делах.</p></td><td>2024-09-19T23:58:24.392Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Да, я ознакомился, что тут ещё с cloudflare дело.<br>
И да, сам-то форум (<a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a>) у меня отлично работает, дело именно в аннонсерах.<br>
В-общем, похоже да, тут только с прокси. Спасибо за ответ.</p></td><td>2024-09-20T00:03:37.133Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="Planzar" data-post="730" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/planzar/48/10756_2.png" class="avatar"> Planzar:</div>
<blockquote>
<p>quic_initial_google_com.bin</p>
</blockquote>
</aside>
<p>А как такой создать</p></td><td>2024-09-20T04:49:16.773Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="740" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>А как такой создать</p>
</blockquote>
</aside>
<aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/265120fbce025a5e7b9cea62e9123fb7f48caff0/files/fake/quic_initial_google_com.bin">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/265120fbce025a5e7b9cea62e9123fb7f48caff0/files/fake/quic_initial_google_com.bin" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/265120fbce025a5e7b9cea62e9123fb7f48caff0/files/fake/quic_initial_google_com.bin" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/265120fbce025a5e7b9cea62e9123fb7f48caff0/files/fake/quic_initial_google_com.bin</a></h4>


  This file is binary. <a href="https://github.com/bol-van/zapret/blob/265120fbce025a5e7b9cea62e9123fb7f48caff0/files/fake/quic_initial_google_com.bin" target="_blank" rel="noopener nofollow ugc">show original</a>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-09-20T04:53:24.310Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Да. OpenWRT.<br>
Ребята, у кого тоже два роутера по Lan-Lan соединены - может какие-то нюансы надо учесть? Может какие-то интерфейсы дописать? Что-то никак zapret у меня не начнет обрабатывать пакеты и лог при debug не наполняется статистикой трафика… Роутер с OpenWRT и zapret стоит вторым.</p></td><td>2024-09-20T06:02:12.411Z</td></tr><tr><td>meeeeeh</td><td><p>Оффтопик, но для контекста: у рутрекера вечная проблема с доступностью анонсеров именно через Cloudflare, на их форуме есть отдельная нитка на этот счёт.</p>
<p>Это не специфично для пользователей в РФ, оно везде так работает, иногда отваливаясь в ошибки 1010\1012 по версии CF. Потом их рандомно отпускает.</p>
<p>При этом там есть второй набор непубличных анонсеров, которыми пользуются несколько релизных групп - они тоже спрятаны за Cloudflare, однако работают корректно.</p></td><td>2024-09-20T06:13:55.545Z</td></tr><tr><td>bolvan</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/bol-van/zapret/discussions/262">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/bol-van/zapret/discussions/262" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/553d3e7c8dcad6503a6c9f6a3522da51c9365d41_2_690x345.png" class="thumbnail" data-dominant-color="E8E8E8" width="690" height="345"></div>

<h3><a href="https://github.com/bol-van/zapret/discussions/262" target="_blank" rel="noopener">NFQUEUE doesn't work for routed traffic inside logical bridge (br-lan) on...</a></h3>

  <p>…or, more precisely, connbytes doesn't match the traffic routed inside the bridge. For some reason, nftables ip/ip6 family (not bridge family!) rules does not work when I'm trying to use connbytes ...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-09-20T06:15:54.876Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Корректно?<br>
NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-split-seqovl-pattern=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” --dpi-desync-split-seqovl=“307021”–-hostlist=/opt/zapret_lists/list-youtube.txt --new --dpi-desync=disorder2”</p></td><td>2024-09-20T07:37:41.861Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="MAMBA" data-post="746" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>–dpi-desync-split-seqovl=“307021"</p>
</blockquote>
</aside>
<p>нет, конечно. Откуда такой большой размер ?</p></td><td>2024-09-20T07:46:30.891Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="Ori" data-post="722" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Можно попробовать split2 + dpi-desync-split-seqovl-pattern=пэйлоад от гугла + dpi-desync-split-seqovl=размер пэйлоада гугла в байтах</p>
</blockquote>
</aside>
<p>Так посоветоавали</p></td><td>2024-09-20T07:52:29.267Z</td></tr><tr><td>newb1e</td><td><p>Есть предложение добавить регулировку длины таймаута в блокчеке. Мне кажется 2000 мсек это много, хватило бы и 500, что увеличило бы скорость проверки в 4 раза.</p></td><td>2024-09-20T08:27:11.223Z</td></tr><tr><td>bolvan</td><td><p>Уже есть<br>
CURL_MAX_TIME=1 ./blockcheck.sh<br>
время указывается в секундах<br>
но на некоторых запросах, особенно quic, 1 секунды может быть мало</p></td><td>2024-09-20T08:38:12.943Z</td></tr><tr><td>newb1e</td><td><p>Сорри, у меня win-bundle.</p></td><td>2024-09-20T08:47:34.281Z</td></tr><tr><td>bolvan</td><td><p>Тогда стоит запускать из cygwin prompt as admin.<br>
Там среда, похожая на unix<br>
blockcheck команда сразу готова без путей, задан alias</p>
<p>CURL_MAX_TIME=1 blockcheck<br>
или если нужен лог<br>
CURL_MAX_TIME=1 blockcheck | tee blockcheck.log</p></td><td>2024-09-20T08:55:48.245Z</td></tr><tr><td>newb1e</td><td><p>Спасибо, попробую.</p></td><td>2024-09-20T08:57:54.289Z</td></tr><tr><td>brynza(Brynza)</td><td><p>Спасибо вам, маэстро!<br>
Вот бы еще понять, как это установить теперь… Как-то непросто.</p>
<p><strong>вариант 1</strong><br>
root@OpenWrt:~# opkg install kmod-br-netfilter<br>
Unknown package ‘kmod-br-netfilter’.<br>
UPD: снаала надо делать opkg update а потом усанавливать</p>
<p><strong>вариант 2</strong><br>
на гитхабе OpenWRT такой файл не нашел.</p>
<p><strong>вариант 3</strong><br>
Нашел в репозитории <a href="https://dl.openwrt.ai/23.05/targets/x86/64/5.15.118/" class="inline-onebox" rel="noopener nofollow ugc">OpenWrt Downloads</a><br>
Скачал, устанавливаю вручную, получаю ошибку<br>
UPD: не угадал с архитектурой</p></td><td>2024-09-20T09:14:03.717Z</td></tr><tr><td>bolvan</td><td><p>opkg update вначале<br>
листы пакетов качаются в /tmp и теряются при ребуте<br>
если все равно нет, значит установлена snapshot или неофициальная версия. надо избавляться от</p></td><td>2024-09-20T09:15:01.601Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Можно просто дописать в <code>blockcheck\zapret\blog.sh</code></p>
<pre><code class="lang-auto">CURL_MAX_TIME=1 "$EXEDIR/blockcheck.sh" | tee "$EXEDIR/../blockcheck.log"
</code></pre>
<p>И запускать <code>blockcheck.cmd</code> как и раньше.</p></td><td>2024-09-20T09:17:28.478Z</td></tr><tr><td>newb1e</td><td><p>Спасибо, так удобнее.</p></td><td>2024-09-20T09:27:47.528Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="MAMBA" data-post="746" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/49beb7/48.png" class="avatar"> MAMBA:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-split-seqovl-pattern=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” --dpi-desync-split-seqovl=“307021”–-hostlist=/opt/zapret_lists/list-youtube.txt --new --dpi-desync=disorder2”</p>
</blockquote>
</aside>
<p>Откуда вы такую огромную цифру вытащили? Я советовал использовать размер пэйлоада в байтах (652 на картинке):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/66db808a137d4dae0d56a8db0b375b2e364200da.png" data-download-href="https://ntc.party/uploads/default/66db808a137d4dae0d56a8db0b375b2e364200da" title="31"><img src="zapret-обсуждение-726/66db808a137d4dae0d56a8db0b375b2e364200da.png" alt="31" data-base62-sha1="eFUYWXHeAEh22AVgn4bX6TgvphM" width="371" height="500" data-dominant-color="EAEBEB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">31</span><span class="informations">378×509 11.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-09-20T09:43:42.207Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><p><strong>Всем шалом!</strong> <img src="https://ntc.party/images/emoji/twitter/sunglasses.png?v=12" title=":sunglasses:" class="emoji" alt=":sunglasses:" loading="lazy" width="20" height="20"></p>
<p><strong>С 19 сентября перестал работать ютуб с прежним конфигом</strong></p>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-repeats=4 --dpi-desync-fooling=badsum --dpi-desync-cutoff=5”</p>
<p><strong>Как сейчас можно пофиксить? Все что предлагали выше не помогло.</strong></p></td><td>2024-09-20T10:34:33.600Z</td></tr><tr><td>wigeance(Wigeance)</td><td><aside class="quote no-group quote-modified" data-username="roskompozor" data-post="759" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/roskompozor/48/8789_2.png" class="avatar"> roskompozor:</div>
<blockquote>
<p>–dpi-desync-repeats=4 --dpi-desync-fooling=badsum</p>
</blockquote>
</aside>
<p>Эти параметры вообще лишние</p>
<aside class="quote no-group quote-modified" data-username="roskompozor" data-post="759" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/roskompozor/48/8789_2.png" class="avatar"> roskompozor:</div>
<blockquote>
<p>–dpi-desync-cutoff=5</p>
</blockquote>
</aside>
<p>А тут нужно указать n, d или s и потом уже значение (например --dpi-desync-cutoff=d5)</p></td><td>2024-09-20T10:58:56.709Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><aside class="quote no-group" data-username="roskompozor" data-post="759" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/roskompozor/48/8789_2.png" class="avatar"> roskompozor:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-repeats=4 --dpi-desync-fooling=badsum --dpi-desync-cutoff=5”</p>
</blockquote>
</aside>
<p><strong>спасибо. <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"></strong></p>
<p>А есть рабочие конфиги после изменений конторы от 19 сентября?</p></td><td>2024-09-20T11:08:35.228Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="arinoki" data-post="737" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>Попробовал blockcheck на трекеры rutracker’a (bt*.t-ru.org) - ни одной рабочей стратегии. По итогу плюнул, настроил через proxifier. Я правильно понял, что zapret в данном случае не помощник?</p>
</blockquote>
</aside>
<p>Если у вас utorrent , то там с dht проблема <a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-bittorrent-dht/1335/73" class="inline-onebox">Блокировка BitTorrent DHT - #73 by Frrienwrvale</a><br>
А анонсеры рутрекера по идее доступны <a href="https://rutracker.org/forum/viewtopic.php?t=5134313" class="inline-onebox" rel="noopener nofollow ugc">Обход блокировки bt*. трекеров (основные инструкции) :: RuTracker.org</a><br>
Ну или в hosts можно прописать рабочие ip <a href="https://dnschecker.org/#A/bt.t-ru.org" class="inline-onebox" rel="noopener nofollow ugc">DNS Checker - DNS Check Propagation Tool</a></p>
<details>
<summary>
Спойлер</summary>
<p>172.67.185.253 <a href="http://bt.t-ru.org" rel="noopener nofollow ugc">bt.t-ru.org</a> <a href="http://bt2.t-ru.org" rel="noopener nofollow ugc">bt2.t-ru.org</a> <a href="http://bt3.t-ru.org" rel="noopener nofollow ugc">bt3.t-ru.org</a> <a href="http://bt4.t-ru.org" rel="noopener nofollow ugc">bt4.t-ru.org</a></p>
</details></td><td>2024-09-20T11:35:57.614Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="roskompozor" data-post="761" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/roskompozor/48/8789_2.png" class="avatar"> roskompozor:</div>
<blockquote>
<p>А есть рабочие конфиги после изменений конторы от 19 сентября?</p>
</blockquote>
</aside>
<p>Вы самую последнюю сборку zapret используете? preset_russia.cmd пробовали на ней?</p></td><td>2024-09-20T11:41:08.682Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="763" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Вы самую последнюю сборку zapret используете</p>
</blockquote>
</aside>
<p>конечно, последняя версия. нет не пробовал</p></td><td>2024-09-20T11:49:17.280Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У меня qbittorrent.<br>
В принципе вариант с hosts тоже учту, но proxifier надёжнее на случай если айпишник смениться. Так не надо за этим следить <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-09-20T11:54:07.118Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="152" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/152">Zapret: what's new</a></div>
<blockquote>
<p>Методы нулевой фазы (–mss) могут работать по хостлисту в одном единственном случае :<br>
если используется режим socks и удаленный ресолвинг хостов через прокси.</p>
</blockquote>
</aside>
<p>Можно устанавливать удаленное подключение после первых данных от клиента. В режиме transparent он их почти сразу высылает, в режиме socks можно отправить ответ об успешном соединении (тогда, конечно, теряется возможность сообщить об ошибке, если подключение не удалось).</p></td><td>2024-09-20T14:58:17.987Z</td></tr><tr><td>bolvan</td><td><p>Это похоже на sniff в x-ray. Задержка соединения в надежде на получение какой-то инфы, по которой можно принимать решения.<br>
Теоретически возможно, но в tpws это не реализовано. Да и метод --mss не настолько ценен, чтобы ради него заморачиваться. Ломает многое, скорость режет зверско. Он сделан для точечного пробития, когда ничего больше не помогает.<br>
–wssize в nfqws достигает тех же целей с гораздо меньшими проблемами.</p></td><td>2024-09-20T15:15:17.005Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="bolvan" data-post="705" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Делаю вероятный вывод, что на группе адресов некоторых GGC включен stateless режим</p>
</blockquote>
</aside>
<p>Возвращаясь к теме вероятного stateless. Я тут ещё потестировал на трех особо проблемных серверах.</p>
<pre><code class="lang-auto">curl -sv -o NUL --http3-only -X POST https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com
curl -sv -o NUL --http3-only -X POST https://rr6---sn-ug5onuxaxjvh-n8v6.googlevideo.com
curl -sv -o NUL --http3-only -X POST https://rr3---sn-ug5onuxaxjvh-p3ul.googlevideo.com
</code></pre>
<p>В итоге, с двойной отправкой, у меня проходят вот такие пейлоады, состоящие, в основном, из мусора:<br>
<a class="attachment" href="zapret-обсуждение-726/vuyeKDepy9MIgyBqRIM8sGhwJIM.bin">quic_test_00.bin</a> (144 байта)<br>
<a class="attachment" href="zapret-обсуждение-726/mNFZ94NBT0ZmaoowEtoJJVanii0.bin">quic_test_FF.bin</a> (144 байта)</p>
<p>Можно сделать определенные выводы по поводу того, что именно проверяется в пейлоаде, а что можно зарандомить:</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/17048d9158345ac4e88c6c786edf3b4db4952b6a.png" data-download-href="https://ntc.party/uploads/default/17048d9158345ac4e88c6c786edf3b4db4952b6a" title="ff"><img src="zapret-обсуждение-726/17048d9158345ac4e88c6c786edf3b4db4952b6a.png" alt="ff" data-base62-sha1="3hCJFoCZXBahrgzt7bWexm1OJQu" width="690" height="431" data-dominant-color="EEE0E1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">ff</span><span class="informations">976×610 22.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-09-20T15:33:56.619Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Там где потенциальный stateless у меня еще как-то через раз на в6 ipfrag1 срабатывает. Причем как-то очень странно, если делать curl -v --http3-only ,то первая попытка уйдет по таймауту, а вторая или третья пройдет</p></td><td>2024-09-20T16:39:59.639Z</td></tr><tr><td>slava28(Вячеслав)</td><td><p>Здравствуйте,я так понял это все для винды конфиги,а есть ли для роутера keenetic рабочий вариант zapret или не существует?</p></td><td>2024-09-20T17:17:40.728Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="768" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p><code>rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code></p>
</blockquote>
</aside>
<p>Действительно, эти пробиваются initial-ом с 2 раза.<br>
А остальным надо 11 раз initial кормить, чтобы пробить.<br>
Если же остальным кормить дефолт short header, то с 2 раза пробивается или даже с 1<br>
Причем на ipv4 и ipv6 поведение разное но моем прове</p></td><td>2024-09-20T17:27:09.759Z</td></tr><tr><td>bolvan</td><td><p>Кто-то прикручивает, но это неофициально. Автор этим не занимается. У них  и спрашивайте.</p></td><td>2024-09-20T17:28:28.873Z</td></tr><tr><td>WhiteAls(ъыь)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/Anonym-tsk/nfqws-keenetic">
  <header class="source">

      <a href="https://github.com/Anonym-tsk/nfqws-keenetic" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/f4aed6d3d28760102ef81d18155a97695c9b0b6a_2_690x344.png" class="thumbnail" data-dominant-color="EAEBE7">

  <h3><a href="https://github.com/Anonym-tsk/nfqws-keenetic" target="_blank" rel="noopener nofollow ugc">GitHub - Anonym-tsk/nfqws-keenetic</a></h3>

    <p><span class="github-repo-description">Contribute to Anonym-tsk/nfqws-keenetic development by creating an account on GitHub.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-09-20T17:38:17.402Z</td></tr><tr><td>newb1e</td><td><p>Подскажите пожалуйста, чего-то я не догоняю. Есть вот такая рабочая стратегия:</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,autohostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --hostlist=“%~dp0#youtube-list.txt” --hostlist-auto=“%~dp0autohostlist.txt”<br>
start “zapret: quic,autohostlist” /min “%~dp0winws.exe” /min --wf-udp=443 --dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --hostlist=“%~dp0#youtube-list.txt” --hostlist-auto=“%~dp0autohostlist.txt”</p>
</details>
<p>С ней работает yuotube нормально и почти все сайты, большинство неработающих начинает работать, если заменить “split2” на “disorder2”. Есть еще один ресурс, которому нужно “–dpi-desync=fake,disorder2 --dpi-desync-ttl=5”. Пробую написать мультистратегию, чтобы работало все сразу. Получается вот так:</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,quic,hostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --filter-tcp=443 --hostlist=“%~dp0#minimum-impact-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-ttl=5 --dpi-desync-cutoff=d4 --new --filter-udp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake --dpi-desync-ttl=0 --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --new --filter-tcp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --filter-tcp=80 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-cutoff=d4 --new --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-cutoff=d4</p>
</details>
<p>Так работает все, кроме ютуба, даже главная страница не грузится. Не могу понять где ошибка.</p></td><td>2024-09-20T17:58:35.066Z</td></tr><tr><td>easyone11</td><td><blockquote>
<p>ВАЖНО : множественные стратегии создавались только для случаев, когда невозможно обьединить имеющиеся стратегии для разных ресурсов. Копирование стратегий из blockcheck для разных сайтов во множество профилей без понимания как они работают приведет к нагромождению параметров, которые все равно не покроют все возможные заблокированные ресурсы. Вы только увязните в этой каше.</p>
</blockquote>
<p>смотря на спойлер ньюбая вспомнил эти слова)</p></td><td>2024-09-20T18:04:58.683Z</td></tr><tr><td>newb1e</td><td><p>Моя не из блокчека изначально, а из мануала найденного на просторах сети. И оттуда почти нечего выкидывать, разве что “cutoff=d4” и “badsum”, но это ничего не меняет. Если выкинуть что-то еще, то она работать перестанет.</p></td><td>2024-09-20T18:08:53.180Z</td></tr><tr><td>Ori</td><td><p>Выкиньте из вашей первой стратегии --dpi-desync-ttl=0 который ничего не делает, попробуйте заменить badsum на badseq, добавьте --dpi-desync-split-seqovl=1 к варианту со split2 (попробуйте убрать --dpi-desync-split-pos=1, либо заменить 1 на 2). cutoff тоже попробуйте выкинуть. В теории у вас и ютуб и “еще один ресурс, которому нужно” могут завестись и без мультистратегий.</p></td><td>2024-09-20T18:14:23.237Z</td></tr><tr><td>newb1e</td><td><p>Так работает все, кроме того самого одного ресурса, ему нужно рубить фейки по TTL, по-другому никак.</p></td><td>2024-09-20T18:32:31.486Z</td></tr><tr><td>bolvan</td><td><p>На первый взгляд прическа выглядит так :</p>
<pre><code class="lang-auto">start “zapret: http,https,quic,hostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 ^
--filter-udp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --dpi-desync-repeats=2 --new ^
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --new ^
--filter-tcp=443 --hostlist=“%~dp0#minimum-impact-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new ^
--filter-tcp=80 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --new ^
--hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum
</code></pre>
<p>Тут добавляется файл quic_initial_www_google_com.bin<br>
Сегодня выяснили, что особые GGC не пробиваются стандартным фейком<br>
Но, разумеется, это не пиллюля. Не факт, что стратегии работают.<br>
Надо смотреть дебаг куда в какой профиль что лезет и броузер F12 на предмет затыков<br>
И все тщательно проверить курлом с разными протоколами.</p></td><td>2024-09-20T18:40:33.560Z</td></tr><tr><td>Ori</td><td><p>Попробуйте в своей изначальной стратегии заменить md5sig,badsum на badseq банально. Самое простое объяснение по которой что-то конкретное не открывается - это что оно не на линукс-сервере стоит. Тот же порнхаб с md5sig не открывается.</p>
<p>Ну, конечно, дело хозяйское. Я прост советую…</p></td><td>2024-09-20T18:42:10.843Z</td></tr><tr><td>bolvan</td><td><p>badsum работает на любых серваках, кроме очень немногих. cloudflare, например, почему-то не проверяет сумму. видимо ddos оборудование ее фиксит в процессе исследования. или какой-то оффлоад. но md5sig срабатывает.<br>
но badsum может стать и проблемой, если пропускается через домашний роутер.<br>
если там не openwrt или чипсет медиатек и подключение через кабель, вероятно порежет фейк</p></td><td>2024-09-20T18:44:38.467Z</td></tr><tr><td>Ori</td><td><p>У меня badsum с 443 портом вообще не работает. Я полагал что из-за роутера моего как раз. Но при этом с 80 работает прекрасно. Хз почему так. Роутер кинетик гига, стоковая прошивка.</p></td><td>2024-09-20T18:46:42.109Z</td></tr><tr><td>bolvan</td><td><p>на некоторых провайдерах почему-то не работает. может DPI сечет бадсум и игнорирует<br>
вообще пакеты с бадсум доходят до моего VPS</p></td><td>2024-09-20T18:51:46.907Z</td></tr><tr><td>MrIbif(Mr Ibif)</td><td><p>Можно в личку настройки для мобильного Би чтобы ютуб тянул, заранее признателен?</p></td><td>2024-09-20T18:54:45.755Z</td></tr><tr><td>newb1e</td><td><p>Попробовал, не помогло. Ресурс, если что - <a href="http://pimpletv.ru" rel="noopener nofollow ugc">pimpletv.ru</a></p></td><td>2024-09-20T18:59:58.584Z</td></tr><tr><td>newb1e</td><td><p>Спасибо, но не помогло, ютуб также зависает на открытии главной страницы. Надо debug включать и разбираться. Дело не в пейлоаде quic, старый конфиг без него работает, но если из него убрать “–dpi-desync-any-protocol”, то ютуб отваливается.</p></td><td>2024-09-20T19:03:48.054Z</td></tr><tr><td>Ori</td><td><p>Фиг знает, у меня ваш сайт открылся достаточно легко, может у меня блокировки слабее. Вот с таким пробовал, слегка переделанная ваша изначальная стратегия для tcp.<br>
<code>winws --wf-tcp=80,443 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig,badsum --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls="tls_clienthello_www_google_com.bin"</code></p></td><td>2024-09-20T19:38:04.754Z</td></tr><tr><td>newb1e</td><td><p>Я менял еще <code>md5sig,badsum</code> на <code>badseq</code>, может в этом дело было. Сейчас все работает с таким конфигом:</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,autohostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2 --dpi-desync-fooling=md5sig,badsum --dpi-desync-any-protocol --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --hostlist=“%~dp0#youtube-list.txt” --hostlist-auto=“%~dp0autohostlist.txt”<br>
start “zapret: quic,autohostlist” /min “%~dp0winws.exe” /min --wf-udp=443 --dpi-desync=fake --dpi-desync-fooling=md5sig,badsum --hostlist=“%~dp0#youtube-list.txt” --hostlist-auto=“%~dp0autohostlist.txt”</p>
</details>
<p>Спасибо за помощь.<br>
Мультистратегию пока можно отложить. Включил дебаг для нее, но по-моему он работает не так как положено, там везде <code>hostname=' '</code> и <code>desync profile 0 matches</code>.</p></td><td>2024-09-20T20:00:48.288Z</td></tr><tr><td>yatolkosprosit</td><td><p>Я Developers Tools на вкладке “Сеть” немного понаблюдал за тем что происходит во время просмотра Ютуба.  Для адресов вида <a href="https://xn--rr------8fg2iqab9bcc2e" rel="noopener nofollow ugc">https://rr---что-то-там</a>. <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> заметил такую особенность. Часто у них статус 204 или 403. Наверное это не связона с блокировками. Но также встречаю случаи, когда какой-то адрес сначала заблокирован, а потом он же имеет статус 200. Например:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/5ba7e53e3f9442472daec8806bd5bd36137301c3.png" data-download-href="https://ntc.party/uploads/default/5ba7e53e3f9442472daec8806bd5bd36137301c3" title="Screenshot_20240921_033214"><img src="zapret-обсуждение-726/5ba7e53e3f9442472daec8806bd5bd36137301c3_2_690x67.png" alt="Screenshot_20240921_033214" data-base62-sha1="d4PabgfpsmRMYI00JYHVYOzzfd9" width="690" height="67" srcset="zapret-обсуждение-726/5ba7e53e3f9442472daec8806bd5bd36137301c3_2_690x67.png, zapret-обсуждение-726/5ba7e53e3f9442472daec8806bd5bd36137301c3_2_1035x100.png 1.5x, zapret-обсуждение-726/5ba7e53e3f9442472daec8806bd5bd36137301c3_2_1380x134.png 2x" data-dominant-color="323135"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot_20240921_033214</span><span class="informations">1437×141 39.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/73fa491b31b9b27b944feca1268e01119917475d.png" data-download-href="https://ntc.party/uploads/default/73fa491b31b9b27b944feca1268e01119917475d" title="Screenshot_20240921_033917"><img src="zapret-обсуждение-726/73fa491b31b9b27b944feca1268e01119917475d_2_690x54.png" alt="Screenshot_20240921_033917" data-base62-sha1="gxZ8TtGSi1qg3ZeqX2uauxrqPGB" width="690" height="54" srcset="zapret-обсуждение-726/73fa491b31b9b27b944feca1268e01119917475d_2_690x54.png, zapret-обсуждение-726/73fa491b31b9b27b944feca1268e01119917475d_2_1035x81.png 1.5x, zapret-обсуждение-726/73fa491b31b9b27b944feca1268e01119917475d_2_1380x108.png 2x" data-dominant-color="312F34"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot_20240921_033917</span><span class="informations">1406×111 25 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>В одном случае имеем NS_BINDING_ABORTED, в другом - Blocked, а затем у них же статус 200. Не уверен, но по-моему когда эти адреса заблокированы, у меня приостанавливается воспроизведение видео, а через некоторое время продолжается. Что это могло бы значить?</p></td><td>2024-09-21T00:56:22.404Z</td></tr><tr><td>Gefest(Алексей)</td><td><p>Здравствуйте. Zapret запущен на роутере, стратегии сейчас такие:<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</p>
<p>NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake --dpi-desync-repeats=6”</p>
<p>Ютуб работает через вай-фай на телефонах, на компе в опере и в edge, но не работает в firefox и в chrome. Пробовал в них включать/отключать QUIC, разницы нет. С чем это может быть связано?</p></td><td>2024-09-21T01:08:33.113Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><p>Уважаемые, посоветуйте какой сейчас есть рабочий конфиг для обхода ютуба?</p>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</p>
<p>С таким конфигом не работает. Какие есть варианты еще?</p></td><td>2024-09-21T01:16:35.768Z</td></tr><tr><td>larin</td><td><aside class="quote no-group" data-username="roskompozor" data-post="791" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/roskompozor/48/8789_2.png" class="avatar"> roskompozor:</div>
<blockquote>
<p>Уважаемые, посоветуйте какой сейчас есть рабочий конфиг для обхода ютуба?</p>
</blockquote>
</aside>
<p>У меня заработал с<br>
NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=badsum”<br>
Не знаю насколько тут все корректно, но все сайты открываются. Использую автохостлист.</p></td><td>2024-09-21T04:09:47.967Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="newb1e" data-post="788" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>–dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2 --dpi-desync-fooling=md5sig,badsum --dpi-desync-any-protocol --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --hostlist=“%~dp0#youtube-list.txt” --hostlist-auto=“%~dp0autohostlist.txt”</p>
</blockquote>
</aside>
<p>desync-any-protocol без ограничителей включает мощное изнасилование вашего соединения<br>
каждый исходящий пакет будет извращен<br>
это то, что задумывалось ?</p>
<blockquote>
<p>Включил дебаг для нее, но по-моему он работает не так как положено, там везде <code>hostname=' '</code> и <code>desync profile 0 matches</code>.</p>
</blockquote>
<p>Дебаг лог и параметры в студию, а так же содержимое хост листов</p></td><td>2024-09-21T06:40:48.354Z</td></tr><tr><td>bolvan</td><td><p>blocked не из-за блокировок<br>
в первых строчках ясно сказано “blocked by ublock origin”. блокировщик рекламы<br>
что такое blocked во втором случае - неизвестно. но очень сомнительно, что это какая-то магическая определилка блокировки провайдером. у мозиллы сообщения часто путают.<br>
NS_BINDING_ABORTED многие воспринимают как ошибка DNS. на самом деле это какой-то разрыв соединения вроде бы. а может и не только</p></td><td>2024-09-21T06:43:32.481Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><p>Ворк! Спасибо</p></td><td>2024-09-21T07:04:13.990Z</td></tr><tr><td>newb1e</td><td><p>Насилие как я понимаю ограничено хостами из листов? Если так, то пусть. Если этот параметр убрать, ютуб перестает работать у меня. <code>cutoff=d4</code> ограничивает насилие первыми 4 пакетами данных?</p>
<p>Параметры были такие:</p>
<details>
<summary>
cfg</summary>
<p>start “zapret: http,https,quic,hostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake --dpi-desync-fake-quic=“%~dp0quic_initial_google_com.bin” --dpi-desync-repeats=2 --new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --new --filter-tcp=443 --hostlist=“%~dp0#minimum-impact-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig --new --filter-tcp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync-any-protocol --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --filter-tcp=80 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync-any-protocol --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --new --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --dpi-desync-any-protocol --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum</p>
</details>
<p><a href="https://transfiles.ru/6np9c" rel="noopener nofollow ugc">листы и дебаг тут</a> один из них великоват, чтобы его сюда вставлять. Дебаг я снимал открыв страницу ютуба и подождав пока она попытается открыться. Возможно он неполный, т.к. копировал его из консоли, не знаю как под cygwin включить перенаправление в файл. Добавлять <code>desync-any-protocol</code> в мультистратегию пробовал, не помогло, страница ютуба открывается но видео все равно не грузятся.</p></td><td>2024-09-21T07:23:32.133Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="newb1e" data-post="796" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>Насилие как я понимаю ограничено хостами из листов? Если так, то пусть. Если этот параметр убрать, ютуб перестает работать у меня. <code>cutoff=d4</code> ограничивает насилие первыми 4 пакетами данных?</p>
</blockquote>
</aside>
<p>да, но для этих хостов будет каждый исходящий пакет мучаться<br>
d4 - 4 тут означает номер пакета данных, на котором обрезается. 3 пакета будет изнасиловано.</p>
<p>я неоднократно встречал это нечто с cutoff=d4, назвал его крокодилом<br>
все это бездумно копируют, но мне так и непонятно что он дает<br>
если брать TLS сессию, то в исходящих пакетах идет с пейлоадом идет</p>
<ol>
<li>ClientHello</li>
<li>Client key exchange, Change cipher spec, Encrypted handshake message</li>
<li>Application data</li>
</ol>
<p>Без any protocol 1 и так насилуется<br>
2 содержит параметры diffie-hellman и прочую ересь для настройки шифрования. идет и так с каждым TLS соединением вне зависимости от домена и блокировки<br>
в 3+ уже идут зашифрованные данные и ничего больше</p>
<p>что дает разрезание 2 и 3 и отсылка фейков TLS ClientHello уже после прохода реального TLS ClientHello ?</p>
<p>Мне приходил на ум только 1 вариант. Что некоторые TLS ClientHello не распознаются nfqws как таковые. Такое уже было со старыми теликами самсунг, но эта проблема давно пофиксена.<br>
Зачем d4 так и не понятно.</p>
<p>Если снять any protocol, в --debug он реагирует на TLS ClientHello ?</p></td><td>2024-09-21T07:36:58.380Z</td></tr><tr><td>newb1e</td><td><p>Я это тоже скопировал. По-моему смысл в том, чтобы ограничить насилие первыми пакетами, а почему именно 3 не в курсе. Надо будет попробовать уменьшить.</p></td><td>2024-09-21T07:43:02.501Z</td></tr><tr><td>bolvan</td><td><p>Без any protocol насилие ограничивается только пакетами с известным содержимым</p></td><td>2024-09-21T07:43:46.396Z</td></tr><tr><td>larin</td><td><p>Можете подсказать, что тут можно исправить, чтобы было по-человечески?</p>
<aside class="quote no-group" data-username="larin" data-post="792" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/c0e974/48.png" class="avatar"> larin:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=0 --dpi-desync-ttl6=0 --dpi-desync-fooling=badsum”</p>
</blockquote>
</aside>
<p>Я так понимаю, что --dpi-desync-ttl6=0 можно убрать, если не используется ipv6<br>
–dpi-desync-fooling=badsum тоже можно оставить, пока работает? Вижу, что у людей используется md5sig, но как понимаю, это не особо принципиально пока оно работает. У меня zapret установлен на роутере keenetic.<br>
Хотелось бы не иметь в конфигах ничего лишнего.</p>
<p>Подскажите, если я при установке указал использование автохостлиста, то читается только zapret-host-auto? К остальным файлам хостлистов программа не обращается? Не нашел в конфиге указание на файлы с хостлистами</p></td><td>2024-09-21T07:51:53.086Z</td></tr><tr><td>YanusBeda(Yanus Beda)</td><td><p><a href="https://habr.com/ru/articles/834826/" rel="noopener nofollow ugc">Установка на Кинетик</a> - реально рабочий вариант. Проверено на своем роутере GIGA KN-1010 и GIGA3</p></td><td>2024-09-21T08:02:15.200Z</td></tr><tr><td>newb1e</td><td><p>Убрал any-protocol, запустил с таким конфигом:</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,quic,hostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --debug=1 --filter-udp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake --dpi-desync-fake-quic=“%~dp0quic_initial_google_com.bin” --dpi-desync-repeats=2 --new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --new --filter-tcp=443 --hostlist=“%~dp0#minimum-impact-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig --new --filter-tcp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --filter-tcp=80 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum --new --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig,badsum</p>
</details>
<p>Остановил windivert, запустил новое приватное окно фокса, открыл <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> и через 4,5 минуты получил <a href="https://transfiles.ru/l3rbg" rel="noopener nofollow ugc">это</a> Дебаг там неполный, только конец, начало консоль обрезала.<br>
Судя по строке с <code>fonts.googleapis.com</code> разделение по профилям работает. Но ютубу это не помогает. И раньше на goodbyedpi он у меня открывался только с опцией <code>allow-no-sni</code>, это тамошний аналог <code>any-protocol</code>. А все остальное нормально открывается.</p></td><td>2024-09-21T08:04:04.408Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="larin" data-post="800" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/c0e974/48.png" class="avatar"> larin:</div>
<blockquote>
<p>Я так понимаю, что --dpi-desync-ttl6=0 можно убрать, если не используется ipv6<br>
–dpi-desync-fooling=badsum тоже можно оставить, пока работает? Вижу, что у людей используется md5sig, но как понимаю, это не особо принципиально пока оно работает.</p>
</blockquote>
</aside>
<p>ttl6 - это специализация ttl для ipv6. можно убрать<br>
удивительно, но cloudflare принимает пакеты с badsum, поэтому на нем этого ограничителя мало. md5sig позволяет запустить cloudflare. badsum - не linux серваки.<br>
но как показывает практика, badsum не работает на всех провайдерах. DPI секут суммы кое-где</p>
<aside class="quote no-group" data-username="larin" data-post="800" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/c0e974/48.png" class="avatar"> larin:</div>
<blockquote>
<p>Подскажите, если я при установке указал использование автохостлиста, то читается только zapret-host-auto? К остальным файлам хостлистов программа не обращается? Не нашел в конфиге указание на файлы с хостлистами</p>
</blockquote>
</aside>
<p>Нет. autohostlist - это дополнение к hostlist. файлы для обычного хостлист тоже берутся<br>
exclude работает как недопущение работы с автолистом</p></td><td>2024-09-21T08:09:12.768Z</td></tr><tr><td>bolvan</td><td><pre><code class="lang-auto">packet: id=60 reinject unmodified
packet: id=61 len=42 outbound IPv6=0 IPChecksum=1 TCPChecksum=0 UDPChecksum=1 IfIdx=12.0
IP4: 192.168.219.103 =&gt; 142.250.186.163 proto=tcp ttl=128 sport=14216 dport=80 flags=A seq=3930759458 ack_seq=274232449
TCP: 50 4F : PO
using cached desync profile 0
packet: id=62 reinject unmodified
packet: id=63 len=509 outbound IPv6=0 IPChecksum=1 TCPChecksum=0 UDPChecksum=1 IfIdx=12.0
IP4: 192.168.219.103 =&gt; 142.250.186.163 proto=tcp ttl=128 sport=14216 dport=80 flags=AP seq=3930759460 ack_seq=274232449
TCP: 53 54 20 2F 77 72 32 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 6F 2E 70 6B 69 2E 67 6F ... : ST /wr2 HTTP/1.1..Host: o.pki.go ...
</code></pre>
<p>Видимо запущено 2 копии winws с пересекающимся фильтром или гудбай DPI или еще что-то подобное<br>
На вход winws идет уже резаный трафик, потому и не детектируется<br>
Обманываем обманывалку</p>
<p>Если это и есть причина создания крокодилаа с катоффом, то это горе от ума</p></td><td>2024-09-21T08:14:33.820Z</td></tr><tr><td>larin</td><td><aside class="quote no-group" data-username="bolvan" data-post="803" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>md5sig позволяет запустить cloudflare</p>
</blockquote>
</aside>
<p>Я так понимаю, мне нужно написать –dpi-desync-fooling=badsum –dpi-desync-fooling=md5sig? 2 аргумента через запятую он не поймет?<br>
У меня сейчас все работает идеально, просто по возможности хотелось бы избавиться от того, что не нужно<br>
Не будет проблем если я все хосты буду прописывать в host-auto, а host оставлю пустым?</p></td><td>2024-09-21T08:15:54.247Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="larin" data-post="805" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/c0e974/48.png" class="avatar"> larin:</div>
<blockquote>
<p>Я так понимаю, мне нужно написать –dpi-desync-fooling=badsum –dpi-desync-fooling=md5sig? 2 аргумента через запятую он не поймет?</p>
</blockquote>
</aside>
<p>Через запятую поймет. В вашем написании badsum замещается md5sig и не случается</p></td><td>2024-09-21T08:16:22.394Z</td></tr><tr><td>newb1e</td><td><p>Нет, один winws в процессах, гудбай не запущен.<br>
По-моему дело в фаерфоксе. Я на всякий случай перезагрузился, запустил ютуб в хроме - работает, в фоксе нет, перезапустил его в безопасном режиме чтобы исключить влияние расширений - все равно не работает…</p></td><td>2024-09-21T08:30:45.050Z</td></tr><tr><td>bolvan</td><td><p>Дамп то не может врать.<br>
Надо снять все обманывалки, запустить шарк и убедиться в нем, что пакеты резаные<br>
фокс их точно резать не будет</p>
<p>может какая-то служба когда-то ставилась и была забыта</p></td><td>2024-09-21T08:31:54.544Z</td></tr><tr><td>newb1e</td><td><p><a href="https://transfiles.ru/qrx7u" rel="noopener nofollow ugc">Сдампил</a> попытки открыть ютуб в фоксе и в хроме. Службы гудбая и запрета устанавливались раньше, но уже несколько дней удалены. На всякий случай удалил еще и расширение Browsec из хрома, но ничего не изменилось. В хроме и эдже ютуб открывается с этим конфигом, в фоксе нет.</p></td><td>2024-09-21T09:01:44.193Z</td></tr><tr><td>bolvan</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/e15e537b782a341ca238838ef0721a3eba9ff7e4.jpeg" data-download-href="https://ntc.party/uploads/default/e15e537b782a341ca238838ef0721a3eba9ff7e4" title="zzzzzzz"><img src="zapret-обсуждение-726/e15e537b782a341ca238838ef0721a3eba9ff7e4_2_690x111.jpeg" alt="zzzzzzz" data-base62-sha1="w9HwsH8GHKmYhZwudJ2ZwkvPPnK" width="690" height="111" srcset="zapret-обсуждение-726/e15e537b782a341ca238838ef0721a3eba9ff7e4_2_690x111.jpeg, zapret-обсуждение-726/e15e537b782a341ca238838ef0721a3eba9ff7e4_2_1035x166.jpeg 1.5x, zapret-обсуждение-726/e15e537b782a341ca238838ef0721a3eba9ff7e4.jpeg 2x" data-dominant-color="EBDFE1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">zzzzzzz</span><span class="informations">1266×204 67.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Я не знаю что режет, но броузер это делать не может. По крайней мере в оригинальном варианте, если исключить гипотетическую переделку васяна на обман DPI</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/12199c3d0c3fdb4a533c4d43b94cb16b67238e94.jpeg" data-download-href="https://ntc.party/uploads/default/12199c3d0c3fdb4a533c4d43b94cb16b67238e94" title="zzzzzzz"><img src="zapret-обсуждение-726/12199c3d0c3fdb4a533c4d43b94cb16b67238e94_2_690x226.jpeg" alt="zzzzzzz" data-base62-sha1="2A7sMKUADYhHyHPQwfZ841rola4" width="690" height="226" srcset="zapret-обсуждение-726/12199c3d0c3fdb4a533c4d43b94cb16b67238e94_2_690x226.jpeg, zapret-обсуждение-726/12199c3d0c3fdb4a533c4d43b94cb16b67238e94_2_1035x339.jpeg 1.5x, zapret-обсуждение-726/12199c3d0c3fdb4a533c4d43b94cb16b67238e94.jpeg 2x" data-dominant-color="EAEFF5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">zzzzzzz</span><span class="informations">1262×415 88.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Тут меняется window size на входящем пакете. Неизбирательно для всех доменов.<br>
Это аналог параметра --wsize (не --wssize) zapret или goodbyedpi без --native-frag.<br>
Если на компе ничего нет, могу предположить, что это действия провайдера по ускорению youtube для своих клиентов, которые перестали работать в связи с противодействием РКН, а так же сломали zapret/GDPI.<br>
Если на рутере тоже ничего не стоит, можно попробовать на чистой системе.<br>
Загрузиться в Linux live USB flash и дампануть оттуда шарк.<br>
Если и там будет тоже самое, значит точно провайдер</p>
<p>Если действительно окажется провайдер, можно попробовать полечить контр-мерой --wsize 1500.<br>
wsize - это тоже метод нулевой фазы десинхронизации, не совместимый с хостлистами.<br>
использовать в профиле без фильтра на хостлист</p></td><td>2024-09-21T09:20:17.599Z</td></tr><tr><td>electrifying</td><td><p>Есть у кого smartube на тв боксе отъехал с кастомным пейлоадом от гугла?</p></td><td>2024-09-21T09:35:21.657Z</td></tr><tr><td>newb1e</td><td><p>А это не запрет режет пакеты? Я же дамп снимал, когда он был включен.<br>
На роутере ничего нет, попробовал на другом компе с win10  - та же картина. Попозже скачаю линукс, попробую на нем запустить.</p></td><td>2024-09-21T10:20:02.739Z</td></tr><tr><td>bolvan</td><td><p>Надо было выключить все как я просил.<br>
Но даже этой информации мне достаточно, чтобы исключить с большой вероятностью средства обхода на компе.<br>
wireshark берет инфу непосредственно с сетевого адаптера еще до модификации zapret/GDPI. Там светится то, что пришло из сети. Я пробовал смотреть с winws --wssize 2, и увидел там 65535.<br>
Потому скорее всего это провайдер.<br>
И народ стал придумывать этих катоффдилов , потому что провайдеры ставили wssize, и zapret в этой ситуации не работал. Не понимая как это лучше обыграть, они нашли что нашли хоть как-то работающее, и потом это понеслось по просторам сети. Крокодила стали применять с надобностью и без надобности. Испорченный телефон без обьяснения причин сделал свое дело.<br>
Но если причина именно в таком надругательстве со стороны провайдера, то проблема решается гораздо эффективнее не методом лома по-крокодильи, а установкой своего контр --wsize. Он позволит поправить вред от провайдера - заместит значение window size своим, которое не будет вынуждать винду резать исходящий трафик на короткие пакеты.<br>
Да, режет именно сама винда, а не какая-то прога.<br>
Но применять --wsize без выяснения надо это делать или нет сродни глотанию всех подряд таблеток в аптеке - авось что-то вылечит.</p></td><td>2024-09-21T12:26:26.292Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p><em>start “zapret: http,https,quic,<strong>hostlist</strong>”</em></p>
<p>А почему после quic идет hostlist или autohoslist - что это дает практически и в каких случаях нужно применять?</p></td><td>2024-09-21T12:46:14.718Z</td></tr><tr><td>bolvan</td><td><p>Это просто заголовок окна. Какой хотите, такой и втыкайте</p></td><td>2024-09-21T12:58:05.417Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Понятно. Просто заголовок.</p>
<p>Вы можете посоветовать какие-то книги/статьи/материалы в интернете, которые помогут разобраться в синтаксисе Запрета достаточно глубоко, чтобы можно было самостоятельно разрабатывать стратегии дурения провайдера?</p>
<p>Та инструкция, что есть, лично мне непонятна, как ни пытался разобраться. Может я слишком глуп, не знаю. Очень сложно понять, если ты не программист или сетевой инженер. Нужно учить “матчасть”. А где, по каким книгам и материалам? Посоветуйте.<br>
Хочется на практике понимать, как работает та или иная строчка или цифра кода.</p></td><td>2024-09-21T13:13:36.979Z</td></tr><tr><td>bolvan</td><td><p>Даже не знаю.<br>
У меня это профильное образование по вычислительной технике + много опыта и собственное изучение по мере надобности.<br>
Но я бы начал вообще с понимания как работают сети. Какие в них есть уровни (OSI model), как передаются пакетики (L2,L3). Как строятся протоколы более высокого уровня - L4-L7.<br>
И практические эксперименты с просмотром в wireshark<br>
У нас в инсте был отдельный курс по сетям. Там примерно это и рассказывали.</p></td><td>2024-09-21T13:28:29.929Z</td></tr><tr><td>newb1e</td><td><p>Прошу прощения, хотел показать разницу дурения между хромом и фоксом.<a href="https://transfiles.ru/w46qy" rel="noopener nofollow ugc">Сделал чистый дамп</a>, без обхода. Похоже и правда провайдер заботится о пользователях, потому что ютуб работает и без обхода блокировок, но только не в фоксе. Странно, что приложения по-разному реагируют на манипуляции на уровне TCP.</p></td><td>2024-09-21T13:30:23.052Z</td></tr><tr><td>yatolkosprosit</td><td><p>С режимом --dpi-desync=fake теперь обязательно нужно использовать опцию<br>
–dpi-desync-fake-tls=tls_clienthello_www_google_com.bin</p>
<p>и еще для Ютуба<br>
–dpi-desync-fake-quic=quic_initial_www_google_com.bin</p>
<p>и еще ttl=3</p>
<p>Прав я или нет?</p>
<p>У меня для Рутрекера блокчек выдал такое:</p>
<pre><code class="lang-auto">nfqws --dpi-desync=fake,split2 --dpi-desync-ttl=3
</code></pre>
<p>а для <a href="http://xn--rr------8fg2iqab9bcc2e.googlevideo.com" rel="noopener nofollow ugc">rr---что-то-там.googlevideo.com</a> следующее:</p>
<pre><code class="lang-auto">nfqws --dpi-desync=fake --dpi-desync-ttl=3
</code></pre>
<p>Вот теперь думаю какого крокодила из всего этого мне слепить.</p></td><td>2024-09-21T13:31:53.848Z</td></tr><tr><td>bolvan</td><td><p>фокс по умолчанию работает без kyber. броузеры на базе движка chromium - с кибером.<br>
в дампе видны мощные потери пакетов и ретрансмиссии на хосте <a href="http://www.youtube.com">www.youtube.com</a><br>
DPI распознает , что это youtube.<br>
Возможно, они собирают лишь 2 сегмента, а 3 уже не умеют. С кибером и wsize=2 будет 3 сегмента.<br>
Можно попрбовать в фоксе включить кибер в about:config<br>
Поиск по ключу kyber. Там везде enable, потом рестарт броузера</p>
<p>Но есть еще одна проблема. Они без разбора всегда ставят wsize=2, не только на ютубе.<br>
Сам по себе сплит неспособен в большинстве случае пробить остальные блокировки.<br>
И заодно ломает zapret/gdpi. Нужны контр-меры с wsize, чтобы восстановить работу winws.</p>
<p>Какой провайдер у вас ? Чисто для статистики</p></td><td>2024-09-21T13:36:27.991Z</td></tr><tr><td>bolvan</td><td><p>ttl с фейком в QUIC противопоказан<br>
в последних версиях такой крокодил налеплен в binaries/win64/zapret-winws/preset_russia.cmd</p></td><td>2024-09-21T13:39:15.822Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Может настройка kyber отличается? Или doh/ech ? Какие-то расширения?</p></td><td>2024-09-21T13:40:05.999Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я раньше и в последние два дня много часов потратил на Блокчек - прогонял запрещенные сайты. Результат всегда одинаковый - утилита выдает нечто с <em>ttl=(цифра)</em> в конце. Даже я понимаю, ни разу не спец, что это хорошо для пробивки конкретного сайта и ПЛОХО для универсальной стратегии: нужны не частные решения как с ttl и циферкой в конце, а более общие (универсальные) решения, способные ПРОБИВАТЬ <strong>большинство</strong> заблокированных НЕ по IP сайтов.<br>
То есть пользы от Блокчека мало, если смотреть только на * SUMMARY (РЕЗУЛЬТАТ).<br>
Нужно зайти после прогона в полный лог (blockcheck.log) и смотреть на все надписи <em>AVAILABLE (ДОСТУПНО).</em> Конкретный пример таких универсальных решений без ttl:</p>
<blockquote>
<ul>
<li>checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fooling=badseq<br>
!!! AVAILABLE !!!</li>
<li>checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig<br>
!!! AVAILABLE !!!</li>
</ul>
</blockquote></td><td>2024-09-21T13:48:25.971Z</td></tr><tr><td>newb1e</td><td><p>Включил kyber в фоксе - не помогло. Добавил <code>--wsize=2</code> в конфиг - тоже не помогло.</p></td><td>2024-09-21T14:00:34.503Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zanoni" data-post="823" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>То есть пользы от Блокчека мало, если смотреть только на * SUMMARY (РЕЗУЛЬТАТ).<br>
Нужно зайти после прогона в полный лог (blockcheck.log) и смотреть на все надписи <em>AVAILABLE (ДОСТУПНО).</em></p>
</blockquote>
</aside>
<p>Поздравляю ! До вас дошел смысл фраз в quick_start и приписки в конце блокчека, от которых многие плюются.<br>
Цель в том, чтобы донести до сервера оригинал сообщения, отправляемого клиентом и одновременно задурить мозги DPI, чтобы он не мог воспроизвести оригинал сообщения в таком виде, который позволил бы ему принять решение о блокировке (начало readme, от которого тоже плюются).<br>
Фейки - один из механизмов для реализации этой цели. Нужно, чтобы фейки дошли до DPI и были им приняты для анализа, но не дошли или были проигнорированы сервером.<br>
И все эти методы имеют плюсы и минусы. О них подробно рассказано в readme. Чем они хороши и плохи. А еще если грамотно их сочетать, плюсы одного могут покрыть минусы другого.</p></td><td>2024-09-21T14:03:23.480Z</td></tr><tr><td>bolvan</td><td><p>Наоборот ! надо избавляться от window size от провайдера !<br>
–wsize=1500 во все профили с tcp без хостлиста или с автолистом<br>
Если таковых нет, удовлетворяющих фильтру tcp, надо создать.<br>
Не знаю , может пров и не шлет wsize на не-443 портах. Надо бы проверить.<br>
И тогда лучше wsize не применять к другим портам</p></td><td>2024-09-21T14:04:24.242Z</td></tr><tr><td>Ori</td><td><p>del</p></td><td>2024-09-21T14:05:58.840Z</td></tr><tr><td>newb1e</td><td><p>Добавил профиль с фильтром tcp=443 и wsize=1500 без хостлистов, т.к. таковых не было. Не понимаю правда как это поможет с ютубом, если он должен обрабатываться по другому профилю. Не помогло.</p></td><td>2024-09-21T14:46:32.724Z</td></tr><tr><td>bolvan</td><td><p>Надо смотреть лог исчезла ли разбивка на входе и стал ли обрабатываться траф</p></td><td>2024-09-21T14:47:23.786Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="newb1e" data-post="828" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>если он должен обрабатываться по другому профилю.</p>
</blockquote>
</aside>
<p>до получения имени хоста профиль с хостлистом не задействуется</p></td><td>2024-09-21T14:48:11.120Z</td></tr><tr><td>newb1e</td><td><p>Нет, все равно встречаются пакеты с размером окна 2. Не знаю, как посмотреть, обрабатывается ли трафик, но ютуб не открывается.</p></td><td>2024-09-21T15:12:18.780Z</td></tr><tr><td>bolvan</td><td><p>В шарке это не будет видно. Там будет по-прежнему 2.<br>
В дебаг логе не должны больше быть пакеты размера 2 с содержимым HEX 16 03<br>
Должны быть надписи типа packet contains tls client hello</p></td><td>2024-09-21T15:37:01.241Z</td></tr><tr><td>newb1e</td><td><p>Пакетов длиной 2 нет, youtube как-будто обрабатывается:</p>
<details>
<summary>
Спойлер</summary>
<p>packet contains full TLS ClientHello<br>
hostname: <a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a><br>
we have hostname now. searching desync profile again.<br>
desync profile search for hostname=‘<a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a>’ ipv6=0 tcp_port=443 udp_port=0</p>
<ul>
<li>Hostlist check for profile 3<br>
Checking include hostlist<br>
Hostlist check for <a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a> : negative<br>
Hostlist check for <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> : negative<br>
Hostlist check for com : negative</li>
<li>Hostlist check for profile 4<br>
Checking include hostlist<br>
Hostlist check for <a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a> : negative<br>
Hostlist check for <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> : positive<br>
desync profile 4 matches<br>
desync profile changed by revealed hostname !<br>
dpi desync src=192.168.219.103:9108 dst=142.250.185.238:443<br>
split pos 1<br>
sending fake request : 16 03 01 02 87 01 00 02 83 03 03 5F 15 63 CB 06 EA 1C DD 40 76 F5 8C 44 50 6E 01 F3 A3 83 AC C2 … : …_.c…<span class="mention">@v</span>…DPn… …<br>
sending 1st tcp segment 0-0 len=1 seqovl=0 : 16 : .<br>
sending 2nd tcp segment 1-1411 len=1411 : 03 01 09 93 01 00 09 8F 03 03 57 1E 77 2A F4 AE 3C 4A 02 11 91 A9 49 58 59 96 C0 CA 32 9A AF 2B … : …W.w*…&lt;J…IXY…2…+ …</li>
</ul>
</details></td><td>2024-09-21T15:53:18.616Z</td></tr><tr><td>bolvan</td><td><p>Во. Что и требовалось. Дурку провайдера преодолели.<br>
Дальше дело за поиском рабочей стратегии</p>
<p>Кстати, стратегию можно искать блокчеком на каком-нибудь домене GGC, который не загружается через curl без обхода блокировок. При этом параллельно надо запустить winws --wf-tcp=443 --wsize 1500.</p>
<p>например такие домены<br>
<a href="http://rr4---sn-n8v7znsk.googlevideo.com" class="onebox" target="_blank" rel="noopener">rr4---sn-n8v7znsk.googlevideo.com</a><br>
<a href="http://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com" class="onebox" target="_blank" rel="noopener">rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</a></p></td><td>2024-09-21T15:59:50.947Z</td></tr><tr><td>newb1e</td><td><p>Понятно, спасибо за помощь. Буду пробовать.</p></td><td>2024-09-21T16:12:10.035Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>С помощью блокчека я выявил вышеописанные «универсальные дурилки», которые пробивают большинство заблокированных сайтов моего провайдера. Но их все равно много — десятки вариаций. Как их дальше сократить до нескольких самых пробивных, самых быстрых и эффективных? Блокчек тут уже не помощник.</p></td><td>2024-09-21T16:14:43.551Z</td></tr><tr><td>bolvan</td><td><p>Если взять множество вариаций с TTL, то надо брать TTL максимальный из минимально рабочих.<br>
К TTL добавить дополнительный ограничитель.  Это можно быть любой из рабочих - datanoack, md5sig, badsum, badseq.<br>
datanoack - вообще самая ультимативная штука, но не работает через домашний роутер. Работает только с него. Если работает, то никаких TTL и фулингов вообще не надо.</p>
<p>Следует избегать wssize, syndata, ipfrag,<br>
Стараться уложиться в fake,split2,split.<br>
disorder применять только, если не работают вариант split2 или split.</p>
<p>Обращать внимание на особенности стратегий с http и https. Например, на наших ТСПУ badseq часто вызывает зависание на http, но работает надежно на https.</p>
<p>При необходимости делить  стратегии по ipv4/ipv6 http/https.</p>
<p>Если с TLS 1.2 все плохо, смириться с использованием лишь TLS 1.3 стратегий. Если нет критических девайсов типа телика, которые не умеют TLS 1.3</p>
<p>Для QUIC не использовать TTL с фейк.</p>
<p>Пробовать особенные пейлоады с фейк. Это прежде всего ClientHello с <a href="http://www.google.com">www.google.com</a>  для youtube доменов по TLS, quic initial с <a href="http://www.google.com">www.google.com</a> с 2-кратным повторением - для QUIC.</p>
<p>И таких правил может быть много. В зависимости от множества факторов , провайдера и общей ситуации вокруг.<br>
Ни автор, ни кто-либо еще не может дать готовый рецепт для любых случаев. Это все дышит, и везде ситуация может быть уникальна. А завтра - поменяться</p></td><td>2024-09-21T16:26:23.645Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Спасибо за обстоятельный ответ!</p>
<p>Ещё возникли вопросы.<br>
Некоторые товарищи советуют забить болт на tcp 80 (http) и прописать только стратегии с портом 443 (https). Это хорошая идея или всё же стратегию и для 80 лучше прописывать?</p>
<p>Второй вопрос: у меня datanoack, md5sig, badsum, badseq — часто проходит с домашним роутером, если верить блокчеку. Например такой вариант: --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-fooling=datanoack</p>
<p>Получается, мне его можно использовать, несмотря на роутер? И всегда ли из четырех вариантов лучше выбирать datanoack?</p>
<p>В блокчеке есть такое предостережение: <em>“ВНИМАНИЕ! Хотя одурачивание datanoack работало, оно может сломать NAT и работать только с внешними IP. Кроме того, для корректной работы может потребоваться nftables”.</em></p></td><td>2024-09-21T16:45:40.004Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="bolvan" data-post="837" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Пробовать особенные пейлоады с фейк. Это прежде всего ClientHello с <a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a> для youtube доменов по TLS, quic initial с <a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a> с 2-кратным повторением - для QUIC.</p>
</blockquote>
</aside>
<p>Все. У меня голова уже крУгом. <img src="https://ntc.party/images/emoji/twitter/hot_face.png?v=12" title=":hot_face:" class="emoji" alt=":hot_face:" loading="lazy" width="20" height="20"> Я думал, что <code>tls_clienthello_www_google_com.bin</code> НУЖНО использовать для доступа КО ВСЕМ сайтам, если используется fake, а <code>quic_initial_www_google_com.bin</code> - только для Ютуба.<br>
Как сделать двухкратное повторение для QUIC? Я только нашел опцию<code> --dpi-desync-repeats=&lt;N&gt;</code>. В ваших пресетах, кстати, значение =11. Где вообще используется QUIC? Разве не с Ютубом? и почему с ним нельзя использовать ttl?  И куда лепить --qnum=200 при использвании мультистратегии?</p></td><td>2024-09-21T18:41:46.699Z</td></tr><tr><td>yatolkosprosit</td><td><p>Вот у меня:<br>
<code>nfqws --dpi-desync=fake,split2 --dpi-desync-ttl=3</code> для Рутрекера<br>
и<br>
<code>nfqws --dpi-desync=split2 --dpi-desync-split-pos=1 для</code> <a href="http://rr4---sn-n8v7znsk.googlevideo.com" rel="noopener nofollow ugc">rr4---sn-n8v7znsk.googlevideo.com</a></p>
<p>Роутера нет. Есть командная строка в Linux и nftables. Как из всего этого слепить крокодила? <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p>
<p>Мои крокодилы просто ради шутки:<br>
<code>nfqws --qnum=200 --filter-tcp=443 --hostlist=/youtube.txt --dpi-desync=split2 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=clienthello_www_google_com.bin --new --filter-udp=443 --hostlist=/youtube.txt --dpi-desync=split2 --dpi-desync-split-pos=1 --dpi-desync-fake-quic=initial_www_google_com.bin" --dpi-desync-repeats=2 --new --filter-tcp=443 --dpi-desync=fake --hostlist=/some_file.txt --dpi-desync-fooling=datanoack</code></p>
<p>2-й - все то же самое, но в конце вместо <code>--dpi-desync-fooling=datanoack</code> указать <code>--dpi-desync-ttl=3</code></p>
<p>Дополнение.<br>
Похоже не работают они. Крокодил не ловится, не растет кокос.</p></td><td>2024-09-21T18:43:25.382Z</td></tr><tr><td>Anon1</td><td><p>Есть вопрос по дополнительным правилам <code>nftables</code> для обхода блокировок WireGuard. У меня сейчас установлен <code>nfqws</code> через <code>install_easy.sh</code> на Debian (systemd). Так-то не проблема дописать правила на нужные порты UDP когда уже всё запущено (с направлением пакетов на очередь инстанса <code>nfqws</code> для QUIC), и это работает. Но как и куда эти правила лучше всего дописать, чтобы работало после ребута? Я так подозреваю, что в принципе можно дописать в <code>/etc/nftables.conf</code>. Или есть более элегантный способ?<br>
UPD: заметил <code>QUIC_PORTS</code> в конфиге, в целом неплохой компромиссный вариант. <a class="mention" href="/u/bolvan">@bolvan</a>, а зачем для QUIC перехватываются пакеты с 1 по 6, там же по идее 1 достаточно? Или это необходимо для логики <code>--hostlist-auto</code>?</p>
<p>Также хотелось бы отдельно настроить <code>--wssize</code> для конкретного IP. Я так понимаю это надо будет поднимать ещё один инстанс <code>nfqws</code> для этого? Опять же вопрос как это лучше организовать в рамках уже установленного сервиса.</p>
<p>И ещё, в какой-то момент я буду переносить это на OpenWRT. Насколько сильно будет отличаться настройка вышеописанного для этой системы?</p></td><td>2024-09-21T18:56:05.066Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Вроде починил ютуб сайты этим методом тоже работают<br>
–dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls=0x00000000 --dpi-desync-fooling=md5sig</p></td><td>2024-09-21T21:29:23.560Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zanoni" data-post="838" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Некоторые товарищи советуют забить болт на tcp 80 (http) и прописать только стратегии с портом 443 (https). Это хорошая идея или всё же стратегию и для 80 лучше прописывать?</p>
</blockquote>
</aside>
<p>Если сайт новый для броузера, он может залезть на оба варианта http и https одновременно.<br>
Если не увидит STS хедеров, то может показать http версию. И там будет заглушка.<br>
По возможности надо дурить. Но нерабочая стратегия хуже, чем ее полное отсутствие.</p>
<aside class="quote no-group" data-username="Zanoni" data-post="838" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Получается, мне его можно использовать, несмотря на роутер? И всегда ли из четырех вариантов лучше выбирать datanoack?</p>
</blockquote>
</aside>
<p>Если он работает, то это лучший вариант. Все остальное - выбросить.</p>
<aside class="quote no-group" data-username="Zanoni" data-post="838" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>В блокчеке есть такое предостережение: <em>“ВНИМАНИЕ! Хотя одурачивание datanoack работало, оно может сломать NAT и работать только с внешними IP. Кроме того, для корректной работы может потребоваться nftables”.</em></p>
</blockquote>
</aside>
<p>верно. linux nat на домашних роутерах обычно не проходит.<br>
может проходить, если на роутере включено аппаратное ускорение. на стоках это вероятный случай.<br>
тогда пакеты данных идут мимо linux, а тупая логика свитча настолько тупа, что не проверяет этот неправильный случай.<br>
но только для кабеля. для wifi может не работать. И тогда получается работает с кабеля, с wifi - нет.<br>
conntrack такие пакеты всегда помечает INVALID и не делает NAT на них.<br>
провайдерский NAT так же обычно пропускает, но может и не пропускать в каких-то случаях.</p></td><td>2024-09-22T05:20:04.474Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="yatolkosprosit" data-post="840" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>nfqws --qnum=200 --filter-tcp=443<br>
–hostlist=/youtube.txt --dpi-desync=split2 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=clienthello_www_google_com.bin<br>
–new --filter-udp=443 --hostlist=/youtube.txt --dpi-desync=split2 --dpi-desync-split-pos=1 --dpi-desync-fake-quic=initial_www_google_com.bin" --dpi-desync-repeats=2<br>
–new --filter-tcp=443 --dpi-desync=fake --hostlist=/some_file.txt --dpi-desync-fooling=datanoack</p>
</blockquote>
</aside>
<p>профиль 1  : ничего не нужно для split2 из написанных параметров. они игнорятся<br>
профиль 2  : split2 для udp не работает. пустой профиль<br>
профиль 3 : может сработать, но обычно к нему еще split2 нужен. datanoack требует проверки.</p>
<p>поиск рабочей стратегии ложится на юзера, автор ничего подсказать не может.<br>
если совсем печально, см binaries/win64/zapret-winws/preset_russia.cmd. на авось</p></td><td>2024-09-22T05:25:29.561Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Anon1" data-post="841" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/e47774/48.png" class="avatar"> Anon1:</div>
<blockquote>
<p>UPD: заметил <code>QUIC_PORTS</code> в конфиге, в целом неплохой компромиссный вариант. <a class="mention" href="/u/bolvan">@bolvan</a>, а зачем для QUIC перехватываются пакеты с 1 по 6, там же по идее 1 достаточно? Или это необходимо для логики <code>--hostlist-auto</code>?</p>
</blockquote>
</aside>
<p>Да, именно для нее. Правда, она не всегда срабатывает на QUIC. Потому что некоторые библиотеки не повторяют CRYPTO, а шлют PING при отсутствии ответа.</p>
<blockquote>
<p>Но как и куда эти правила лучше всего дописать, чтобы работало после ребута?</p>
</blockquote>
<p>QUIC_PORTS можно использовать, хотя это и не лучшее решение.<br>
если стратегии QUIC и WG отличаются, можно использовать профили с фильтром по --filter-udp. Только надо понимать, что скрипты zapret будут добавлять листы в конце строчки NFQWS_OPT_DESYNC_QUIC. Профили надо писать с учетом этого понимания. Есть еще SUFFIX. Он будет дописан после листов.<br>
WG вообще никогда ни по каким листам не пройдет.<br>
Плохая идея мешать QUIC в скриптах запрет и правила без скриптов запрет. Лучше тогда идти путем custom script в init.d/sysv/custom</p>
<blockquote>
<p>Также хотелось бы отдельно настроить --wssize для конкретного IP. Я так понимаю это надо будет поднимать ещё один инстанс nfqws для этого? Опять же вопрос как это лучше организовать в рамках уже установленного сервиса.</p>
</blockquote>
<p>Тут уже по любому светит custom script в рамках скриптов zapret, либо отсебятина отдельно.<br>
Если это dest ip, проблем с фильтром нет.<br>
Если source ip, то в postnat схеме прямая фильтрация невозможна. Надо маркировать битом на входе и фильтровать по этому биту на выходе.</p>
<blockquote>
<p>И ещё, в какой-то момент я буду переносить это на OpenWRT. Насколько сильно будет отличаться настройка вышеописанного для этой системы?</p>
</blockquote>
<p>Если остебятина - будет довольно сильно отличаться в плане правильной прикрутки к системе. Чтобы без конфликтов и гонок, а не тяп-ляп через rc.local.<br>
Если custom script, то они немного отличаются в openwrt. По части запуска демонов. Правила FW можно копировать 1:1</p></td><td>2024-09-22T05:30:45.457Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="839" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Все. У меня голова уже крУгом. <img src="https://ntc.party/images/emoji/twitter/hot_face.png?v=12" title=":hot_face:" class="emoji" alt=":hot_face:" loading="lazy" width="20" height="20"> Я думал, что <code>tls_clienthello_www_google_com.bin</code> НУЖНО использовать для доступа КО ВСЕМ сайтам, если используется fake, а <code>quic_initial_www_google_com.bin</code> - только для Ютуба.</p>
</blockquote>
</aside>
<p>tls - это tls, а quic - это quic<br>
Зачем использовать пейлоад одного для другого ? Это очень разные протоколы. tls работает по tcp, quic - по udp.<br>
Мой недавний тест на своем провайдере и чьи-то наблюдения отсюда говорят, что для googlevideo, а возможно и других youtube доменов, для tls надо использовать tls_client_www_google_com, для quic - quic_initial_www_google_com.<br>
В остальных случаях оставить по умолчанию</p>
<p>вот такой у меня конфиг. Не таблетка, не панацея !</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=split2 --new --dpi-desync=fake,split --dpi-desync-fooling=datanoack"
NFQWS_OPT_DESYNC_HTTP6="--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack"
NFQWS_OPT_DESYNC_HTTPS6="--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack"
NFQWS_OPT_DESYNC_QUIC="--hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new --dpi-desync=fake --dpi-desync-repeats=2"
MODE_FILTER=autohostlist

cat /opt/zapret_lists/list-youtube.txt 
googlevideo.com
youtubei.googleapis.com
i.ytimg.com
</code></pre></td><td>2024-09-22T05:46:07.136Z</td></tr><tr><td>rem</td><td><p>Проверил. Отлично работает.<br>
Спс.</p></td><td>2024-09-22T06:33:29.522Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="bolvan" data-post="846" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Мой недавний тест на своем провайдере и чьи-то наблюдения отсюда говорят, что для googlevideo, а возможно и других youtube доменов, для tls надо использовать tls_client_www_google_com, для quic - quic_initial_www_google_com.</p>
</blockquote>
</aside>
<p>Почему в вашем конфиге для NFQWS_OPT_DESYNC= нет tls_client_www_google_com, а для NFQWS_OPT_DESYNC_HTTP6 и NFQWS_OPT_DESYNC_HTTPS6 есть? И почему к HTTP вообще применяется TLS?</p></td><td>2024-09-22T08:34:27.951Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="848" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Почему в вашем конфиге для NFQWS_OPT_DESYNC= нет tls_client_www_google_com,</p>
</blockquote>
</aside>
<p>Потому что на моем провайдере и так работает по ipv4, но не работает по ipv6.</p>
<aside class="quote no-group" data-username="yatolkosprosit" data-post="848" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>И почему к HTTP вообще применяется TLS?</p>
</blockquote>
</aside>
<p>Оно не применяется. Сделано, чтобы сократить количество инстансов из-за разных параметров</p>
<p><code>NFQWS_OPT_DESYNC="--hostlist=/opt/zapret-misc/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack"</code></p>
<p>Так тоже все работает. Без спец инстансов. Так даже лучше</p></td><td>2024-09-22T09:10:37.335Z</td></tr><tr><td>ZugDuk</td><td><p>Хочу уточнить по настройкам роутера (в моем случае это ноутбук с дебиан, установленный между интернетом и домашним роутером).</p>
<pre><code class="lang-auto">echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j NFQUEUE --queue-num 0
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 443 -j NFQUEUE --queue-num 0

/opt/zapret/nfqws --qnum=0 --user=zapret --debug --hostlist=/opt/zapret/list-youtube.txt --dpi-desync=дальше_что_то_там

googlevideo.com
youtubei.googleapis.com
i.ytimg.com
</code></pre>
<p>Второй день уже пытаюсь запустить ютуб но не работает ничего. (Точнее работает все прекрасно, кроме собственно видео, которое просто не стартует.)</p>
<p>До этого жил с byedpi, но 3 дня назад оный перестал помогать.</p></td><td>2024-09-22T09:23:54.908Z</td></tr><tr><td>bolvan</td><td><p>nfqws обычно вешается на POSTROUTING<br>
а найти за вас стратегию - никто не найдет</p></td><td>2024-09-22T09:27:22.718Z</td></tr><tr><td>ZugDuk</td><td><p>Еще вопрос, это нормально что такие надписи в консоли?:<br>
Hostlist check for <a href="http://rr7---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr7---sn-axq7sn7z.googlevideo.com</a> : negative<br>
Hostlist check for <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> : positive</p>
<p>Почему адрес кэша гугла negative ?</p></td><td>2024-09-22T09:40:08.619Z</td></tr><tr><td>yatolkosprosit</td><td><p>У меня zapret пока работает. Я скопипастил пример у ValdikSS и правила для nftables у вас. Но это ПОКА работает. И GDPI и byedpi периодически отваливаются у людей и им приходится искать новые пути. Поэтому я просто стараюсь понять локику работы zapret. Чтобы не быть похожим на мартышку, которая случайно лупит по клавишам печатной машинке в попытке написать “Войну и мир”.</p></td><td>2024-09-22T09:47:12.296Z</td></tr><tr><td>ZugDuk</td><td><p>Скинь свои правила для nftables. Ну и строчку для nfqws тоже</p></td><td>2024-09-22T09:52:57.413Z</td></tr><tr><td>rngvalerka</td><td><p>Это не GDPI и byeDPI отваливаются, а правила меняются, запрет точно так же перестает работать и точно так же приходится искать новые пути.<br>
Чтобы не мудохаться с nftables оставь как есть что там тебе скрипт установки сделал. Вместо этого поставь squid (благо это делается в несколько строчек) и с клиентов тыкайся в прокси сервер.</p></td><td>2024-09-22T10:02:30.102Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="ZugDuk" data-post="852" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>Hostlist check for <a href="http://rr7---sn-axq7sn7z.googlevideo.com">rr7—sn-axq7sn7z.googlevideo.com</a> : negative<br>
Hostlist check for <a href="http://googlevideo.com">googlevideo.com</a> : positive</p>
<p>Почему адрес кэша гугла negative ?</p>
</blockquote>
</aside>
<p>Потому что в листе нет домена 3 уровня, но есть 2-го.<br>
Поиск идет с максимального уровня до минимального</p></td><td>2024-09-22T10:08:40.353Z</td></tr><tr><td>bolvan</td><td><p>Здесь только понимание как оно работает решает. Иначе только методом тыка с обычно хреновым результатом</p></td><td>2024-09-22T10:10:55.384Z</td></tr><tr><td>ZugDuk</td><td><p>Я думал о том, чтобы сделать прокси сервер, потому что это делает пакеты как бы исходящими от компьютера с nqws. В комментариях прочитал, что это полезно для опции --dpi-desync-fooling=datanoack.</p>
<p>Но вот на правила бы посмотрел, потому что скрипт установки я не запускал - просто скачал бинарник и положил в папку /opt/zapret.</p></td><td>2024-09-22T10:11:31.080Z</td></tr><tr><td>bolvan</td><td><p>Прокси это только для неумех совсем.<br>
Нет особой разницы настроить для проходящего или исходящего трафика.<br>
Правила чуть могут отличаться , и все. И сам роутер надо уметь настроить.<br>
прокси - это нежелательное явление. не все проги его понимают, надо везде прописывать<br>
zapret создавался для работы на шлюзе</p></td><td>2024-09-22T10:12:52.889Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="bolvan" data-post="856" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Потому что в листе нет домена 3 уровня, но есть 2-го.<br>
Поиск идет с максимального уровня до минимального</p>
</blockquote>
</aside>
<p>Как это пофиксить?</p></td><td>2024-09-22T10:13:24.970Z</td></tr><tr><td>bolvan</td><td><p>Это не надо фиксить. Это нормальное поведение.</p>
<p><a href="http://i.like.beer.com">i.like.beer.com</a> будет проверяться по</p>
<pre><code class="lang-auto">i.like.beer.com
like.beer.com
beer.com
com
</code></pre>
<p>при первом же совпадении вердикт чека по листу положительный<br>
это сделано для автоматического учета поддоменов в листах</p>
<p>всякие фишки типа *.beer.com или *<a href="http://eer.com">eer.com</a> не работают</p></td><td>2024-09-22T10:14:56.629Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="bolvan" data-post="859" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>прокси - это нежелательное явление. не все проги его понимают, надо везде прописывать</p>
</blockquote>
</aside>
<p>согласен. В будущем разберемся с этой datanoack если потребуется</p></td><td>2024-09-22T10:15:20.144Z</td></tr><tr><td>rngvalerka</td><td><p>Зачем гонять весь трафик через запрет, если по сути нужен только ютуб. С таким же успехом можно весь трафик в впн заворачивать. И для работы на шлюзе не подходит т.к. шлюз должен быть уровня “настроил и забыл”, а тут через день нужно лезть что-то править.</p></td><td>2024-09-22T10:17:27.988Z</td></tr><tr><td>bolvan</td><td><p>Не совсем. Через nfqws прогоняется лишь мизерная доля трафика при правильной настройке tables.</p>
<p>Через день надо править обычно если стратегия неустойчива.<br>
Надо собирать все, что работало каждый день, и искать общий знаменатель.<br>
Или гонять блокчек с несколькими попытками. Но это только поможет, если балансировка идет оперативно. Если все меняется с интервалом день - придется собирать варианты и понимать что происходит, искать общий рабочий вариант.</p>
<p>Я крайне редко на своих провайдерах менял стратегии. За годы ну может раза 3.<br>
Неустойчивость с большим интервалом тоже была. То простой сплит работает, то лишь более сложный крокодил. Скорее всего это связано с включением или выключением из пути отдельных DPI, которых стоит несколько. В итоге оставлялся крокодил, который работал долго.</p>
<p>Если нужен только ютуб - нет проблем. Выбираем режим ipset, загоняем туда все подсети гугла.<br>
Или вешаем ipset hook script, запрашивающий эту информацию по whois и сохраняющий копию на случай ошибки запроса. Тогда nfqws даже не притронется к остальному</p></td><td>2024-09-22T10:23:36.959Z</td></tr><tr><td>ZugDuk</td><td><p>В прошлой жизни (с byedpi), когда встал вопрос, что же заворачивать в прокси (redsocks), а что пропускать, первая пришедшая мысль была - выцеплять информацию об ip адресах из dns ответов. Объяснил это чату гпт, и тот написал на питоне парсер вывода tcpdump.<br>
<a class="attachment" href="zapret-обсуждение-726/xuCJ0bq7s4fRc4j8qzae0rNzrK5.py">dns_monitor.py</a> (3,0 КБ)<br>
Он извлекал адреса ютуба,  добавлял их в ipset и сохранял в файл, который при перезагрузке тоже добавлялся в ipset.<br>
Но оказалось, что список строится, но зачастую лиса и хром клиента успевают так быстро получить ответ от днс и начать устанавливать соединение, что ipset не успевал сработать и приходилось два раза открывать страничку в браузере.<br>
По этому я попросил чатгпт написать днс сервер, который сначала точно добавит ip адрес в ipset и только потом отправит dns ответ клиенту.<br>
<a class="attachment" href="zapret-обсуждение-726/95pRrKvGmvPmcjRx8C8SCGjYS7z.py">dns_server.py</a> (5,3 КБ)<br>
Это оказалось гораздо лучше, но как все в целом работает мне не нравилось - иногда почему то не прогружались все привьюшки видео. По этому оказалось лучше прописать socks5 прокси в настройки лисы и так ходить через byedpi на все сайты.</p></td><td>2024-09-22T11:10:18.009Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ZugDuk" data-post="865" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p><a class="attachment" href="zapret-обсуждение-726/xuCJ0bq7s4fRc4j8qzae0rNzrK5.py">dns_monitor.py</a> (3,0 КБ)</p>
</blockquote>
</aside>
<p>Это метод топора. Есть куда более элегантное решение с dnsmasq.<br>
При ресолвинге он добавляет в ipset.<br>
Давным давно на хабре это описывали.</p>
<p>byedpi, кстати, теперь умеет transparent mode. redsocks ему не нужен</p></td><td>2024-09-22T11:16:20.243Z</td></tr><tr><td>Anon1</td><td><aside class="quote no-group" data-username="bolvan" data-post="845" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если это dest ip, проблем с фильтром нет.</p>
</blockquote>
</aside>
<p>Вот по dest ip и нужно, теоретически это могло бы быть и отдельным профилем, но фильтра по IP там нет. Да и наверное это слишком частный случай, чтобы добавлять фильтр по IP для профилей, хотя было бы неплохо.</p></td><td>2024-09-22T11:33:56.482Z</td></tr><tr><td>bolvan</td><td><p>Переносить функционал ipset в nfqws теоретически имело бы только смысл на винде.<br>
На остальных это в ядре есть в виде таблиц или сетов различных.<br>
Все делается через custom script</p></td><td>2024-09-22T11:41:23.900Z</td></tr><tr><td>rngvalerka</td><td><p>Поэтому я и взял старый ноут и на нем экспериментирую. Работает - хорошо, не работает и хрен с ним, в один клик свичнул прокси в браузере и ни в одном глазу. Экспериментировать на роутере, который просто работает и от которого я ни логина, ни пароля уже не помню, никакого желания нет.<br>
Потихоньку соберу своего крокодила тогда и можно будет переселить или на роутер или, скорее всего, на отдельный все же одноплатник.</p></td><td>2024-09-22T12:40:51.575Z</td></tr><tr><td>moopha</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Спасибо за грандиозную работу!<br>
У вас, как у автора zapret’а, хотел уточнить пару моментов, если позволите:</p>
<p>Используется padavan со включёнными модулями xt_NFQUEUE и nfnetlink_queue, nfqws заводится с успехом, но решил перенастроить S51nfqws под себя. Ваш пакет через install_* не ставил, воткнул бинарники, настроил соответствующие пути и всё, кроме ютуб, работает.</p>
<p>Хочу завести по вашей <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/849">ссылке</a>, но встал вопрос: как значение NFQWS_OPT_DESYNC передаётся для собственного запускаемого бинарника из шелл файла? Параллельно с NFQWS_ARGS или подменяется его значение?</p>
<p>Вопрос в следующем контексте, чтобы передавать для запуска разные параметры, оформил функцией</p>
<pre><code class="lang-auto">_startup_args() {
  local args="--filter-tcp=443"

  # All
  args="$args $NFQWS_ARGS $NFQWS_EXTRA_ARGS"

  # Fake
  if [ "$NFQWS_ARGS_FAKE" != "" ]; then
    args="$args --new --filter-tcp=443 $NFQWS_ARGS_FAKE"
  fi
   
  # QUIC
  if [ "$QUIC_ENABLED" -eq "1" ]; then
    args="$args --new --filter-udp=443 $NFQWS_ARGS_QUIC"
#    args="$args $NFQWS_ARGS_FAKE_QUIC"
  fi

  # DESYNC
  if [ "$NFQWS_OPT_DESYNC" != "" ]; then
    args="$args --filter-tcp=443 $NFQWS_OPT_DESYNC"

    if [ -z "$IPV6_ENABLED" ] || [ "$IPV6_ENABLED" -eq "1" ]; then
      args="$args NFQWS_OPT_DESYNC_HTTPS6"
    fi 
  fi
  echo "$args"
}

</code></pre>
<p>А уже в сам бинарник запускается через</p>
<pre><code class="lang-auto">$NFQWS_BIN --daemon $LOGGING --pidfile=$PIDFILE $(_startup_args)
</code></pre>
<p>Как корректнее дополнить основной блок обхода DPI (чтобы работали inst, twi, прочие сайта) отдельным блоком только под ютуб?</p>
<p>Извините за сумбурное изложение вопроса</p></td><td>2024-09-22T13:29:18.898Z</td></tr><tr><td>ZugDuk</td><td><p>Хм. Что то меня тогда отпугнуло от dnsmasq - наверное просто не понял как он работает, потому что чукча не читатель, а писатель (с помощью чата гпт). Сейчас попробовал - действительно добавляет в ipset (по логам из dnsmasq это видно). Правда протестировать полноценно не могу, потому что собственно ютуб не работает.</p></td><td>2024-09-22T14:17:41.043Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="rngvalerka" data-post="869" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rngvalerka/48/8880_2.png" class="avatar"> rngvalerka:</div>
<blockquote>
<p>Поэтому я и взял старый ноут и на нем экспериментирую.</p>
</blockquote>
</aside>
<p>Это правильная стратегия, потому что старый ноут есть у многих, и ноуты стандартны (IBM совместимы), а роутеры всякие разные - как в них openwrt полезет, х.з…</p></td><td>2024-09-22T14:22:00.501Z</td></tr><tr><td>bolvan</td><td><p>Эти скрипты я не писал, так что про них ничего сказать не могу.<br>
Мои скрипты заполняют базовые параметры сами.<br>
Потом добавляют $NFQWS_OPT_DESYNC. За ним идет блок хостлистов. В конце идет “–new $NFQWS_OPT_DESYNC_SUFFIX”, если суффикс определен. В суффикс пишуются в основном только несовместимые с хостлистами стратегии.<br>
Вот пример процесса на моей системе<br>
<code>/home/opt/zapret/nfq/nfqws --qnum=200 --user=daemon --dpi-desync-fwmark=0x40000000 --hostlist=/opt/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --hostlist=/home/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/home/opt/zapret/ipset/zapret-hosts-user-exclude.txt --hostlist-auto=/home/opt/zapret/ipset/zapret-hosts-auto.txt --hostlist-auto-fail-threshold=3 --hostlist-auto-fail-time=60 --hostlist-auto-retrans-threshold=3 --hostlist-auto-debug=/home/opt/zapret/ipset/zapret-hosts-auto-debug.log</code></p></td><td>2024-09-22T15:41:10.112Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><p>Подскажите, в zapret есть функция HEX как в goodbyedpi? Если да, то какой должен быть конфиг?</p></td><td>2024-09-22T15:49:46.467Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="ZugDuk" data-post="854" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zugduk/48/9214_2.png" class="avatar"> ZugDuk:</div>
<blockquote>
<p>Скинь свои правила для nftables. Ну и строчку для nfqws тоже</p>
</blockquote>
</aside>
<p><code>nfqws --qnum=200 --dpi-desync=split2 --dpi-desync-split-pos=1 --hostlist=/youtubet.txt</code></p>
<pre><code class="lang-auto">nft create table inet ztest
nft add chain inet ztest post "{type filter hook postrouting priority mangle;}"
nft add rule inet ztest post tcp dport "{80,443}" ct original packets 1-12 queue num 200 bypass
nft add rule inet ztest post udp dport 443 ct original packets 1-4 queue num 200 bypass
</code></pre>
<p>В целом работает удовлетворительно. Иногда бывают некоторые затыки, в первую очередь в прямых эфирах.</p></td><td>2024-09-22T16:09:14.956Z</td></tr><tr><td>moopha</td><td><p>Спасибо, попробовал конфигурацию (тупо перезатёр $args вашим кодом), ютуб стал запускать очень медленно (пчелайн), в роликах  даже страница не прогружается</p></td><td>2024-09-22T16:47:27.458Z</td></tr><tr><td>bolvan</td><td><p>Я четко означил, что это не копипаста. Копипаста не работает</p></td><td>2024-09-22T17:35:22.590Z</td></tr><tr><td>bolvan</td><td><p>Если речь о --fake-from-hex, то фейки в nfqws загружаются отдельно из файлов для каждого известного типа протокола и для неизвестных протоколов. Можно и в HEX, но HEX константам должно предшествовать 0x. См  опции командной строки.<br>
Фейк для TLS по умолчанию радномизируется на предмет SNI, session id и random полей TLS ClientHello. Если указаны внешние данные - они шлются как есть.</p></td><td>2024-09-22T17:37:26.108Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Хм, а чем так плохо использовать zapret для вообще всех хостов? Замедления интернета у себя не заметил.<br>
И ещё интересно насколько часта ситуация, что реально не объединить несколько стратегий в одну - и из-за этого приходится такие длинные конструкции писать.</p></td><td>2024-09-22T17:42:56.522Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="arinoki" data-post="879" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>И ещё интересно насколько часта ситуация, что реально не объединить несколько стратегий в одну - и из-за этого приходится такие длинные конструкции писать.</p>
</blockquote>
</aside>
<p>Такая необходимость у меня реально возникла только для youtube.<br>
Раньше жили без мультистратегий, и все было норм.</p></td><td>2024-09-22T17:50:13.573Z</td></tr><tr><td>sheriffy4(Алексей)</td><td><p>Добрый день.<br>
роутер с openwrt. установлен zapret.<br>
долго пытался подобрать различные варианты чтобы работало приложение smarttube на android tv (на пк ютуб работает отлично). Блокировал 443 порт udp - не помогло. в итоге запустил эмулятор андроида и там установил smarttube. естественно так же не работало. но когда еще параллельно запустил на этом же пк zapret-winws с базовой настройкой, увидел что в приложении smarttube начали появляться хотя бы окошки с видео, но не воспроизводились. в итоге решил из конфига win версии потихоньку выкидывал рандомно ключи и в один прекрасный момент smarttube заработал. когда отключил zapret на роутере естественно smarttube перестал работать. вопрос в том, как теперь правильно объединить конфиги в один на роутере чтобы smarttube на android tv и ютуб на компе работали?</p>
<p>конфиг на win версии</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,quic” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --new --filter-tcp=443 --dpi-desync=fake --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</p>
</details>
<p>конфиг на роутере</p>
<details>
<summary>
Спойлер</summary>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=split --dpi-desync-fooling=badseq”<br>
#NFQWS_OPT_DESYNC_HTTP=“–dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum”<br>
#NFQWS_OPT_DESYNC_HTTPS=“–wssize=1:6 --dpi-desync=split --dpi-desync-ttl=0 --dpi-desync-fooling=badsum”<br>
#NFQWS_OPT_DESYNC_HTTP6=“–dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none”<br>
#NFQWS_OPT_DESYNC_HTTPS6=“–wssize=1:6 --dpi-desync=split --dpi-desync-ttl=5 --dpi-desync-fooling=none”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-ttl=0  --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_google_com.bin”<br>
#NFQWS_OPT_DESYNC_QUIC6=“–dpi-desync=hopbyhop”</p>
</details></td><td>2024-09-22T18:38:59.995Z</td></tr><tr><td>Platon</td><td><p>+1, тоже только с таким конфигом на ПК работает и то, половина GGC возвращают 403, а на тв (WebOS) как будто сами видео грузятся, а остальной фронт - нет<br>
upd: android и iOS тоже работают<br>
upd2: завелось с <a href="https://github.com/bol-van/zapret/issues/409#issuecomment-2365329405" rel="noopener nofollow ugc">этим</a> конфигом везде</p></td><td>2024-09-22T18:47:39.385Z</td></tr><tr><td>bolvan</td><td><blockquote>
<p>start “zapret: http,https,quic” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --new --filter-tcp=443 --dpi-desync=fake --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</p>
</blockquote>
<p>Зачем делать пустой профиль с udp ? Надо убрать перехват udp из windivert фильтра.<br>
Тоже самое касается и 80 tcp.<br>
Тогда фильтр tcp вообще не нужен будет</p>
<blockquote>
<p>start “zapret: http,https,quic” /min “%~dp0winws.exe” --wf-tcp=443  --dpi-desync=fake --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</p>
</blockquote>
<p>В роутер пишется тоже самое, но без windivert.  wf-tcp не сработает и не нужен<br>
Да, еще пути поправить, конечно</p></td><td>2024-09-22T18:51:06.447Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Подскажите, пожалуйста, правильно ли понимаю, что в блокчеке:</p>
<ol>
<li>при проверке http и tls используется фейк=0x00000000?</li>
<li>при проверке quic фейк вообще не используется?</li>
</ol>
<p>И можно ли сделать, чтоб использовался tls_clienthello_translate_google_com.bin в 1-ом случае  и quic_ietf_google_com_2.bin во 2-ом?</p></td><td>2024-09-22T20:56:06.851Z</td></tr><tr><td>bolvan</td><td><p>Наличие фейка зависит не от опции --dpi-desync-fake-tls, а от --dpi-desync=fake.<br>
там есть фейк по умолчанию для каждого известного протокола. для tls делается некоторая рандомизация фейка по умолчанию.</p>
<p>что касается специализированных не общих пейлоадов, то я не буду скакать за веяниями текущего момента и вносить частные случаи в блокчек как “простое решение” из коробки<br>
кому надо - допишите параметр в код скрипта. это делается достаточно просто</p>
<p>сделал переменные PKTWS_EXTRA, TPWS_EXTRA<br>
чтобы эти параметры добавлялись всегда к параметрам запуска соотв демонов<br>
и туда уже вносите что угодно<br>
см тему whats new</p></td><td>2024-09-23T05:04:09.126Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Большое вам спасибо!</p>
<aside class="quote no-group" data-username="bolvan" data-post="153" data-topic="61" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/153">Zapret: what's new</a></div>
<blockquote>
<p>В blockcheck внесена поддержка переменных<br>
TPWS_EXTRA - для tpws<br>
PKTWS_EXTRA - для nfqws/dvtws/winws<br>
эти переменные добавляются к параметрам тестовых запусков соотв демонов</p>
<p>основное применение - включение разных внешних пейлоадов</p>
<p><code>PKTWS_EXTRA="--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin" ./blockcheck.sh</code></p>
<p>чтобы не уродовать код скрипта ради сиюминутных частных веяний и хотелок</p>
</blockquote>
</aside>
<p>Можно еще уточнить плс, <code>PKTWS_EXTRA="--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin" ./blockcheck.sh</code> нужно самому добавить в начало скрипта blockcheck.sh, так? Или в blog.sh?</p></td><td>2024-09-23T09:49:22.469Z</td></tr><tr><td>ZugDuk</td><td><p>Спасибо! Правила к себе скопипастил - кажется они редиректят нормально, но ютуб стабилен давно и одинаково - просто стоит колом.</p></td><td>2024-09-23T11:12:14.108Z</td></tr><tr><td>easyone11</td><td><p>Нет смысла в скрипт blockcheck`а добавить опцию “/etc/init.d/zapret stop” и “start” после его окончания?<br>
Ведь это требуется для его более корректной работы, а про это узнаешь не из ридмишки а от тебя либо других людей на форуме.<br>
зы<br>
наверняка умные люди и так это будут понимать, но вот не очень умных как я не мало )</p></td><td>2024-09-23T17:51:09.715Z</td></tr><tr><td>ZugDuk</td><td><aside class="quote no-group" data-username="bolvan" data-post="851" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>nfqws обычно вешается на POSTROUTING<br>
а найти за вас стратегию - никто не найдет</p>
</blockquote>
</aside>
<p>Такие правила верные?</p>
<pre><code class="lang-auto">#!/bin/bash
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT

iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X

#Forwarding
echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE

# Проверяем наличие таблицы
if nft list tables | grep -q "ztest"; then
    # Если таблица существует, удаляем ее
    echo "Таблица ztest существует. Удаляю..."
fi
# Создаем новую таблицу
nft create table inet ztest
nft add chain inet ztest post "{type filter hook postrouting priority mangle;}"
nft add rule inet ztest post tcp dport "{80,443}" ct original packets 1-12 queue num 200 bypass
</code></pre>
<p>Запускаю затем уже /opt/zapret/nfqws --qnum=200 --user=zapret --debug --dpi-desync=всякое</p></td><td>2024-09-23T18:36:40.260Z</td></tr><tr><td>sashalomaetdpi</td><td><p>Берем коммит до добавления мультистратегий, все работает:</p>
<details>
<summary>
nfqws --qnum=200 --user=nobody --hostlist=/opt/etc/zapret/xvideos.txt --dpi-desync=fake --dpi-desync-ttl=4 --debug</summary>
<p>Loading hostlist /opt/etc/zapret/xvideos.txt<br>
loading plain text list<br>
Loaded 1 hosts from /opt/etc/zapret/xvideos.txt<br>
initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘200’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=4 rcvbuf=2048 sndbuf=32768<br>
fd=4 SO_RCVBUF=4096<br>
fd=4 SO_SNDBUF=65536<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp<br>
Running as UID=65534 GID=65534<br>
set_socket_buffers fd=3 rcvbuf=65536 sndbuf=32768<br>
fd=3 SO_RCVBUF=131072<br>
fd=3 SO_SNDBUF=65536<br>
packet: id=1 len=693 mark=00000000<br>
IP4: 192.168.1.2 =&gt; 185.88.181.4 proto=tcp ttl=64 sport=32116 dport=443 flags=AP seq=1118562450 ack_seq=3026306098<br>
TCP: 16 03 01 02 88 01 00 02 84 03 03 7D 3A D9 41 53 A3 A4 F2 3A 20 B8 4F EC CD 01 84 E3 E2 C0 39 1D … : …}:.AS…: .O…9. …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://www.xvideos.com" rel="noopener nofollow ugc">www.xvideos.com</a><br>
Checking include hostlist<br>
Hostlist check for <a href="http://www.xvideos.com" rel="noopener nofollow ugc">www.xvideos.com</a> : negative<br>
Hostlist check for <a href="http://xvideos.com" rel="noopener nofollow ugc">xvideos.com</a> : positive<br>
dpi desync src=192.168.1.2:32116 dst=185.88.181.4:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 83 01 00 02 7F 03 03 83 FD E4 78 0F 92 91 4B BC 5C C9 83 9F AC 19 16 63 3B 3A A3 4F … : ……x…K..…c;:.O …<br>
reinjecting original packet. len=693 len_payload=653<br>
packet: id=1 drop<br>
packet: id=2 len=706 mark=00000000</p>
</details>
<p>Берем последний коммит, и ничего не работает:</p>
<details>
<summary>
nfqws --qnum=200 --user=nobody --hostlist=/opt/etc/zapret/xvideos.txt --dpi-desync=fake --dpi-desync-ttl=4 --debug</summary>
<p>adding low-priority default empty desync profile<br>
we have 1 user defined desync profile(s) and default low priority profile 0<br>
Loading hostlist /opt/etc/zapret/xvideos.txt<br>
loading plain text list<br>
Loaded 1 hosts from /opt/etc/zapret/xvideos.txt<br>
initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘200’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=4 rcvbuf=2048 sndbuf=32768<br>
fd=4 SO_RCVBUF=4096<br>
fd=4 SO_SNDBUF=65536<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp<br>
Running as UID=65534 GID=65534<br>
set_socket_buffers fd=3 rcvbuf=65536 sndbuf=32768<br>
fd=3 SO_RCVBUF=131072<br>
fd=3 SO_SNDBUF=65536<br>
packet: id=1 len=693 mark=00000000<br>
IP4: 192.168.1.2 =&gt; 185.88.181.8 proto=tcp ttl=64 sport=32698 dport=443 flags=AP seq=390301676 ack_seq=2079868259<br>
TCP: 16 03 01 02 88 01 00 02 84 03 03 2B AA 3A 94 C2 07 53 CE 53 D3 27 44 90 B0 33 CA 0A BF 1F 31 97 … : …+.:…S.S.‘D…3…1. …<br>
desync profile search for hostname=’’ ipv6=0 tcp_port=443 udp_port=0<br>
desync profile 0 matches<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://www.xvideos.com" rel="noopener nofollow ugc">www.xvideos.com</a><br>
packet: id=1 pass unmodified<br>
packet: id=2 len=693 mark=00000000</p>
</details>
<p>Почему search for hostname=‘’ не показывает домен из файла, который он должен искать? Вроде же старые правила не должны были измениться при добавлении функции мультистратегий. В xvideos.txt находится только <a href="http://xvideos.com" rel="noopener nofollow ugc">xvideos.com</a>.</p></td><td>2024-09-24T05:16:59.137Z</td></tr><tr><td>anonymous168(anonymous168)</td><td><p>На GPON MTS какое-то странное поведение с большинством стратегий, например:</p>
<ul>
<li>checking nfqws --dpi-desync=fake,split --dpi-desync-ttl=3 --dpi-desync-split-pos=1<br>
[attempt 1] curl: (35) Recv failure: Connection reset by peer<br>
[attempt 2] AVAILABLE<br>
[attempt 3] curl: (28) Connection timed out after 2002 milliseconds<br>
[attempt 4] AVAILABLE<br>
[attempt 5] curl: (35) Recv failure: Connection reset by peer</li>
</ul>
<p>Чередуется timed out и connection reset.<br>
Второй ТСПУ или какой-то фильтр на пути в зависимости от балансировки?</p></td><td>2024-09-24T09:03:18.103Z</td></tr><tr><td>newb1e</td><td><p>А ютуб работает в хроме без обхода блокировок? У меня наблюдалось похожее поведение блокчека из-за манипуляций провайдера с размером TCP окна. Вылечилось добавлением в конфиг параметра <code>--wsize=1500</code>.</p></td><td>2024-09-24T10:54:58.901Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Сегодня для YT у меня отвалился <code>--dpi-desycn=split2</code>, который работал после отвала <code>disorder2</code>.<br>
Блокчек показал гораздо меньше рабочих стратегий. Пока завелось на:<br>
<code>--dpi-desync=split --dpi-desync-fooling=badseq</code></p></td><td>2024-09-24T11:39:21.391Z</td></tr><tr><td>Chivapches(Эщкерембус)</td><td><p>Здравствуйте, подобрал рабочие параметры на windows в cmd файле с ними ютуб работает:<br>
<code>winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2 --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin</code>, Но мне нужно поставить их в роутер,</p>
<pre><code class="lang-auto"># CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run "nfq/nfqws --help" for option list
DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000
NFQWS_OPT_DESYNC="--dpi-desync=split2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
#NFQWS_OPT_DESYNC_HTTP=
#NFQWS_OPT_DESYNC_HTTPS=
#NFQWS_OPT_DESYNC_HTTP6=
#NFQWS_OPT_DESYNC_HTTPS6=
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=split2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
#NFQWS_OPT_DESYNC_QUIC6=
</code></pre>
<p>С этими параметрами не работает, как их адаптировать под роутер? --wf-l3=ipv4 --wf-tcp=443 - нужно ли писать?</p></td><td>2024-09-24T11:47:50.906Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>У split2 нет фейков, следовательно -fake-tls ничего не делает.<br>
Для quic нет стратегии split2, а -fake-tls он для tls, а не для quic.<br>
Т.е. по идее у вас можно попробовать как-то так:</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="--dpi-desync=split2"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=$"
</code></pre>
<p>$ подобрать от 2 до 11.</p></td><td>2024-09-24T12:11:23.997Z</td></tr><tr><td>anonymous168(anonymous168)</td><td><aside class="quote no-group" data-username="newb1e" data-post="892" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/e19adc/48.png" class="avatar"> newb1e:</div>
<blockquote>
<p>Вылечилось добавлением в конфиг параметра <code>--wsize=1500</code>.</p>
</blockquote>
</aside>
<p>Попробовал, без изменений.<br>
Как будто бы стратегии с badseq или md5sig работают стабильнее.</p></td><td>2024-09-24T14:06:57.182Z</td></tr><tr><td>newb1e</td><td><p>Его надо в самый конец добавлять. У меня вот так сейчас:</p>
<details>
<summary>
Спойлер</summary>
<p>start “zapret: http,https,quic,hostlist” /min “%~dp0winws.exe” --wf-tcp=80,443 --wf-udp=443 --filter-udp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync-repeats=2 --dpi-desync=fake --dpi-desync-fake-quic=“%~dp0quic_ietf_google_com_2.bin” --new --filter-udp=443 --dpi-desync=fake --new --filter-tcp=443 --hostlist=“%~dp0#minimum-impact-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-ttl=5 --dpi-desync-fooling=md5sig --new --filter-tcp=443 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync-repeats=2 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --new --filter-tcp=80 --hostlist=“%~dp0#youtube-list.txt” --dpi-desync-repeats=2 --dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig --new --hostlist=“%~dp0#russia-list.txt” --hostlist=“%~dp0#russia-additional-list.txt” --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-fooling=md5sig --new --filter-tcp=443 --wsize=1500 --new --filter-tcp=80 --wsize=1500</p>
</details></td><td>2024-09-24T14:19:25.184Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>На обычный http (80 порт) я забил, и в общем у меня конструкция как-то значительно проще получилась, и без мульти-стратегий (в exclude пока чисто одинокий домен гос-услуг).</p>
<p><code>"C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443 --dpi-desync=split2 --dpi-desync-fooling=badseq --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin --hostlist-exclude=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\exclude.txt --wsize=1500</code></p></td><td>2024-09-24T16:55:27.631Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Можно и без полных путей, лишь бы все файлы в той же папке лежали. И если не путаю, то со split2 фейк не используется, а с udp не работает, т.е. можно и еще подсократить:<br>
<code>winws.exe --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern=tls_clienthello_www_google_com.bin --hostlist-exclude=exclude.txt --wsize=1500</code><br>
Ну либо добавить перед split2 фейк, если он нужен:<br>
<code>winws.exe --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern=tls_clienthello_www_google_com.bin --hostlist-exclude=exclude.txt --wsize=1500</code></p></td><td>2024-09-24T17:35:17.543Z</td></tr><tr><td>Chivapches(Эщкерембус)</td><td><p>Перепробовал все --dpi-desync-repeats c 2 по 11, но не работает<br>
А почему -fake-tls не нужен? Я делал по гайду <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/39" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck - #39 by shiko</a></p></td><td>2024-09-24T17:49:48.567Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group quote-modified" data-username="TesterTi" data-post="899" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>–dpi-desync-split-seqovl=652<br>
–dpi-desync-split-seqovl-pattern=</p>
</blockquote>
</aside>
<p>Дак вот это и есть же fake-часть <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> Просто чуть иначе прописана у меня, чем это обычно тут делают.<br>
А насчёт полных путей - без разницы по сути, у меня работает как служба и это никак не мешает. Ну и да, насчёт udp вы правы, это точно лишнее тут.</p></td><td>2024-09-24T17:52:00.983Z</td></tr><tr><td>newb1e</td><td><p>И работает? В ридми сказано, что <code>dpi-desync-split-seqovl</code> обязательно должен быть меньше, чем <code>dpi-desync-split-pos</code>.</p></td><td>2024-09-24T17:55:12.558Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="Acindaz" data-post="895" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>У split2 нет фейков, следовательно -fake-tls ничего не делает.</p>
</blockquote>
</aside>
<p>Тогда что это из вывода blockcheck’a? Зачем он это проверяет?</p>
<pre><code class="lang-auto">- checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badsum
!!!!! AVAILABLE !!!!!
- checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq
!!!!! AVAILABLE !!!!!
- checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack
!!!!! AVAILABLE !!!!!
- checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig
!!!!! AVAILABLE !!!!!
</code></pre></td><td>2024-09-24T17:56:19.731Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Ну да, отлично работает. И ютуб без тормозов, и всё остальное открывается.<br>
Собственно поправил меня насчёт <code>dpi-desync-split-seqovl</code> как раз <a class="mention" href="/u/bolvan">@bolvan</a></p>
<aside class="quote no-group" data-username="bolvan" data-post="623" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Скрытый фейк обычно так делается<br>
–dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern= tls_clienthello_www_google_com.bin</p>
</blockquote>
</aside></td><td>2024-09-24T18:00:31.167Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Acindaz абсолютно правильно написал, в инструкции неточность, прошу прощения, пойду исправлять</p></td><td>2024-09-24T18:01:07.373Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="arinoki" data-post="903" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p><code>winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq</code></p>
</blockquote>
</aside>
<p>Обратите внимание, что перед split2 стоит fake</p></td><td>2024-09-24T18:02:12.469Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А, ну да. Для меня просто как-то само-собой разумеющееся было, что будет использован и fake <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> Не так понял, похоже.</p></td><td>2024-09-24T18:03:44.858Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ну тут столько разных параметров, причем у запрета свои, у gdpi свои и т.д, что немудрено запутаться)</p></td><td>2024-09-24T18:07:07.777Z</td></tr><tr><td>newb1e</td><td><p>ясно, спасибо</p></td><td>2024-09-24T18:09:52.310Z</td></tr><tr><td>Chivapches(Эщкерембус)</td><td><pre><code class="lang-auto">* SUMMARY
ipv4 rr3---sn-oxuctoxu-jnte.googlevideo.com curl_test_http : working without bypass
ipv4 rr3---sn-oxuctoxu-jnte.googlevideo.com curl_test_https_tls12 : tpws --split-pos=1
ipv4 rr3---sn-oxuctoxu-jnte.googlevideo.com curl_test_https_tls12 : nfqws --dpi-desync=split2
ipv4 rr3---sn-oxuctoxu-jnte.googlevideo.com curl_test_https_tls13 : tpws --split-pos=1
ipv4 rr3---sn-oxuctoxu-jnte.googlevideo.com curl_test_https_tls13 : nfqws --dpi-desync=split2
</code></pre>
<p>Как подобрать параметры для QUIC? И можно ли его вообще отключить?</p></td><td>2024-09-24T19:59:06.249Z</td></tr><tr><td>Chivapches(Эщкерембус)</td><td><p>Сейчас проверил работу без “–dpi-desync-fake-tls=tls_clienthello_www_google_com.bin” - ничего не работает<br>
<code>winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2</code></p>
<p>Но если вернуть обратно, то ютуб начинает работать <img src="https://ntc.party/images/emoji/twitter/face_with_raised_eyebrow.png?v=12" title=":face_with_raised_eyebrow:" class="emoji" alt=":face_with_raised_eyebrow:" loading="lazy" width="20" height="20"><br>
<code>winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2 --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin</code></p></td><td>2024-09-24T20:06:48.498Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Хм, интересно… Чего-то видимо в ридми <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.txt" class="inline-onebox" rel="noopener nofollow ugc">zapret/docs/readme.txt at master · bol-van/zapret · GitHub</a> забыли указать)</p>
<blockquote>
<p>Режим split очень похож на disorder, только нет изменения порядка следования сегментов :</p>
<ol>
<li>поддельная 1-я часть пакета, поле данных заполнено нулями</li>
<li>1-я часть пакета</li>
<li>поддельная 1-я часть пакета, поле данных заполнено нулями. отсылка 2-й раз.</li>
<li>2-я часть пакета</li>
</ol>
</blockquote>
<blockquote>
<p>Режим split2 отключает отправку поддельных частей.<br>
Он может быть использован как более быстрая альтернатива --wsize.<br>
disorder2 и split2 не предполагают отсылку фейк пакетов, поэтому опции ttl и fooling неактуальны</p>
</blockquote></td><td>2024-09-24T20:25:41.958Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Возможно что, когда работает, то работает по quic. Проверьте по F12 - Network. Если там у videoplayback протокол h3, то это оно.<br>
Для quic можно также указать фейк:<br>
<code>--dpi-desync-fake-quic=&lt;путь...&gt;/quic_initial_www_google_com.bin</code></p></td><td>2024-09-25T03:28:03.982Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>У меня РКН как будто по несколько раз в день меняет настройки, приходится по несколько раз в день переписывать правила.<br>
У всех так?</p>
<p>Вот лог за последнии несколько дней:</p>
<details>
<summary>
Summary</summary>
<ul>
<li>
<p>SUMMARY 15:00 25.09.2024<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http : working without bypass<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : winws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 ntc.party curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2</p>
</li>
<li>
<p>SUMMARY 25.09.2024 3:30<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http : working without bypass<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : winws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 ntc.party curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2</p>
</li>
<li>
<p>SUMMARY 24.09.2024 20:00<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 youtu.be curl_test_http : working without bypass<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=11<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : winws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http3 : winws not working<br>
ipv4 ntc.party curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2 --dpi-desync-split-pos=1<br>
ipv4 ntc.party curl_test_http3 : winws not working</p>
</li>
<li>
<p>SUMMARY 24.09.2024 16:00<br>
ipv4 ntc.party curl_test_http : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : nfqws --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : nfqws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=3</p>
</li>
<li>
<p>SUMMARY 23.09.2024<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4</p>
</li>
<li>
<p>SUMMARY  22.09.2024<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=11<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=10<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_http3 : winws not working<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2</p>
</li>
</ul>
</details></td><td>2024-09-25T08:55:22.929Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Да фиг его знает, может, они там у себя тоже параметр с рандомным значением прикрутили, типо как fake-gen в gdpi. Не думаю, что сидят и меняют что-то вручную)</p>
<aside class="quote no-group quote-modified" data-username="Keksimus" data-post="914" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com">rr5—sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com">rr5—sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com">rr5—sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass</p>
</blockquote>
</aside>
<p>Ну для таких вот адресов у вас стабильно <code>working without bypass</code> во все дни.<br>
А для таких</p>
<blockquote>
<p>ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4</p>
</blockquote>
<p>работает split.<br>
На вашем месте я б попробовал так: адреса вида <a href="http://rrX---sn-ov8vuxaxjvh-v8ce.googlevideo.com">rrX---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a><br>
оставить как есть, без обхода, адреса вида <a href="http://rrX---sn-axq7sn7s.googlevideo.com">rrX---sn-axq7sn7s.googlevideo.com</a> добавить в хостлист с правилом <code>winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq --dpi-desync-autottl=1:3-20</code> (если такой обход работает, конечно)<br>
Остальные адреса ютуба (<a href="http://youtube.com">youtube.com</a>, <a href="http://ggpht.com">ggpht.com</a>, <a href="http://ytimg.com">ytimg.com</a>, <a href="http://play.google.com">play.google.com</a> ), чтобы не париться с правилами, пустить через прокси, любой, можно даже не скоростной , главное, чтоб он был настраиваемым.</p></td><td>2024-09-25T09:15:25.820Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="915" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Не думаю, что сидят и меняют что-то вручную</p>
</blockquote>
</aside>
<p>Это понятно что не ручками это делают <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"><br>
Если прописать --dpi-desync-autottl без параметров то по умолчанию ttl будет подбираться  от 3 до 20? Или оно так вобще незаработает?</p></td><td>2024-09-25T09:23:55.472Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Похоже на то:</p>
<blockquote>
<p>–dpi-desync-autottl=[[:[-]]] ; режим auto ttl для ipv4 и ipv6. по умолчанию: 1:3-20. delta=0 отключает функцию.</p>
<ul>
<li>autottl. Суть режима в автоматическом определении TTL, чтобы он почти наверняка прошел DPI и немного не дошел до<br>
сервера. Берутся базовые значения TTL 64,128,255, смотрится входящий пакет<br>
(да, требуется направить первый входящий пакет на nfqws !).<br>
Вычисляется длина пути, отнимается delta (1 по умолчанию). Если TTL вне диапазона (min,max - 3,20 по умолчанию),<br>
то берутся значения min,max, чтобы вписаться в диапазон. Если при этом полученный TTL больше длины пути,<br>
то автоматизм не сработал и берутся фиксированные значения TTL для атаки.<br>
Техника позволяет решить вопрос, когда вся сеть перегорожена шлагбаумами (DPI, ТСПУ) везде где только можно,<br>
включая магистралов. Но потенциально может давать сбои.<br>
Например, при асимметрии входящего и исходящего канала до конкретного сервера.<br>
На каких-то провайдерах эта техника будет работать неплохо, на других доставит больше проблем, чем пользы.<br>
Где-то может потребоваться тюнинг параметров. Лучше использовать с дополнительным ограничителем.</li>
</ul>
</blockquote></td><td>2024-09-25T09:30:03.331Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>И еще вопрос, если --dpi-desync-ttl=4 то ящик с тспу стоит где-то внутри провайдера, а если ttl=9 то где-то на магистрали, я правильно понимаю?</p></td><td>2024-09-25T09:32:25.526Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>По логике - да. Но то, что у вас так скачет ttl, вообще ломает всю логику… Хотя, нет, вроде ttl=4, может, такой и добавить. либо вообще без ttl ?</p></td><td>2024-09-25T09:35:54.068Z</td></tr><tr><td>uwu(uwu)</td><td><p>у меня на билайне ttl=2 убрал задержку у магистральных серверов.<br>
(местные и без ttl работали)<br>
но, возможно, в данном случае магистральные сервера билайновские, то есть тоже внутри сети провайдера, но по 2ip определяются анонимными гугловскими из мск</p></td><td>2024-09-25T09:39:53.508Z</td></tr><tr><td>yatolkosprosit</td><td><blockquote>
<p>PKTWS_EXTRA=“–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” ./blockcheck.sh</p>
</blockquote>
<p>Кто-нибудь уже догадался как это использовать и для чего?</p></td><td>2024-09-25T10:55:11.896Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ну по идее перед запуском блокчека нужно добавить в blockcheck\zapret\blog.sh<br>
<code>PKTWS_EXTRA="–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_google_com.bin" ./blockcheck.sh</code><br>
Или в начало blockcheck\zapret\blockcheck.sh<br>
<code>PKTWS_EXTRA="–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_google_com.bin"</code><br>
bolvan пока не ответил, как правильней</p></td><td>2024-09-25T12:21:07.502Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="TesterTi" data-post="922" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>bolvan пока не ответил, как правильней</p>
</blockquote>
</aside>
<p>А я думаю что надо в системе задавать переменные окружения.</p></td><td>2024-09-25T13:22:57.035Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Возможно. Потому что если добавить в blockcheck\zapret\blockcheck.sh<br>
<code>PKTWS_EXTRA="--dpi-desync-fake-tls="$ZAPRET_BASE/files/fake/tls_clienthello_www_google_com.bin""</code><br>
То будет ошибка</p>
<blockquote>
<ul>
<li>checking winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2 --dpi-desync-spli<br>
t-pos=5 --dpi-desync-fake-tls=/cygdrive/d/My Documents/Программы/Интернет/anon/A<br>
ntiDPI/Zapret/zapret4/blockcheck/zapret/files/fake/tls_clienthello_www_google_co<br>
m.bin<br>
could not read /cygdrive/d/My</li>
</ul>
</blockquote></td><td>2024-09-25T13:28:10.200Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Ошибка из-за того, что путь с пробелом не обернут в кавычки.</p></td><td>2024-09-25T13:47:45.689Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="924" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p><code>PKTWS_EXTRA="--dpi-desync-fake-tls="$ZAPRET_BASE/files/fake/tls_clienthello_www_google_com.bin""</code></p>
</blockquote>
</aside>
<p>А как его обернуть? Что здесь добавить?</p></td><td>2024-09-25T13:49:10.742Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><pre><code class="lang-auto">PKTWS_EXTRA="--dpi-desync-fake-tls=\"$ZAPRET_BASE/files/fake/tls_clienthello_www_google_com.bin\""
</code></pre></td><td>2024-09-25T14:13:56.247Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>К сожалению, не помогло( В логе теперь пишет<br>
<code>--dpi-desync-fake-tls="/cygdrive/d/My Documents/Программы/Интернет/anon/AntiDPI/Zapret/zapret4/blockcheck/zapret/files/fake/tls_clienthello_www_google_com.bin"</code><br>
Но в консоли все равно</p>
<pre><code class="lang-auto">--dpi-desync-fake-tls="/cygdrive/d/My Documents/Программы/Интернет/anon/AntiDPI/
Zapret/zapret4/blockcheck/zapret/files/fake/tls_clienthello_www_google_com.bin"
could not read "/cygdrive/d/My
</code></pre>
<p>Файл tls_clienthello_www_google_com.bin по этому пути есть, если что</p></td><td>2024-09-25T14:22:18.873Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Тогда лучше указывать в <code>blog.sh</code><br>
Там действительно какой-то затуп с кавычками. Даже добился оборачивания, он все равно рвет путь по пробелу.</p></td><td>2024-09-25T14:57:00.628Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="921" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>PKTWS_EXTRA=“–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” ./blockcheck.sh</p>
</blockquote>
</aside>
<p>А так блокчек запускается без этого параметра. Как же его передать-то?</p></td><td>2024-09-25T15:10:31.878Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Проще просто перенести в папку, в пути до которой не будет пробелов вовсе.</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/340788b01b93900800907d655da473c35f108163.png" data-download-href="https://ntc.party/uploads/default/340788b01b93900800907d655da473c35f108163" title="bash_KpWmlHSal0"><img src="zapret-обсуждение-726/340788b01b93900800907d655da473c35f108163.png" alt="bash_KpWmlHSal0" data-base62-sha1="7qgY86fGRitDhlo0FTeDRYfEIrV" width="690" height="360" data-dominant-color="19191A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">bash_KpWmlHSal0</span><span class="informations">979×512 34.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/575d1e4983f223b7c75ed9ac32db703f74df5f69.png" data-download-href="https://ntc.party/uploads/default/575d1e4983f223b7c75ed9ac32db703f74df5f69" title="sublime_text_mGA95bjZCt"><img src="zapret-обсуждение-726/575d1e4983f223b7c75ed9ac32db703f74df5f69.png" alt="sublime_text_mGA95bjZCt" data-base62-sha1="csR2MVyfH0yMyPc0gNkB80FjE9z" width="690" height="491" data-dominant-color="373435"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">sublime_text_mGA95bjZCt</span><span class="informations">798×569 54.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-09-25T15:16:37.502Z</td></tr><tr><td>rewhat</td><td><p>Как перезапустить zapret (nfqws) чтоб config применился после изменений? Пробовал sudo systemctl restart zapret.service, но чет не помогает.</p>
<p>upd: походу sudo /opt/zapret/init.d/sysv zapret restart работает</p>
<p>upd2: или нет? Ввожу zapret stop, но этот сайт продолжает открываться, а некоторые другие выдают ошибку https, то есть он как будто продолжает работать.</p></td><td>2024-09-25T15:18:23.365Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="928" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p><code>d/My Documents/Программы/Интернет/</code></p>
</blockquote>
</aside>
<p>Например, "D:\Soft\Internet" и далее <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-09-25T15:19:01.314Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Это слишком просто))</p></td><td>2024-09-25T15:28:25.232Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Вот строка из <code>blog.sh</code> у меня, параметр учитывается, путь с пробелами, ошибок нет:</p>
<pre><code class="lang-auto">PKTWS_EXTRA="–dpi-desync-fake-tls=$EXEDIR/files/fake/tls_clienthello_www_google_com.bin" CURL_MAX_TIME=1 "$EXEDIR/blockcheck.sh" | tee "$EXEDIR/../blockcheck.log"
</code></pre></td><td>2024-09-25T15:32:14.689Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Acindaz" data-post="935" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p><code>PKTWS_EXTRA="–dpi-desync-fake-tls=$EXEDIR/files/fake/tls_clienthello_www_google_com.bin" CURL_MAX_TIME=1 "$EXEDIR/blockcheck.sh" | tee "$EXEDIR/../blockcheck.log"</code></p>
</blockquote>
</aside>
<p>О, так ошибок нет, спасибо!</p></td><td>2024-09-25T16:00:40.170Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Неа, рано обрадовались, так тоже ошибка. Просто в опции<br>
<code>–dpi-desync-fake-tls=</code>, а должно быть<br>
<code> --dpi-desync-fake-tls=</code>.<br>
И из-за этого блокчек ее просто не учитывал.</p></td><td>2024-09-25T16:52:16.177Z</td></tr><tr><td>Ori</td><td><p>Вариант для винды. Кидаете пейлоад рядом с blockcheck.cmd, запускаете командную строку от админа. Переходите в папку с блокчеком через <code>cd /d адрес</code>. Ставите переменную и запускаете:</p>
<pre><code class="lang-auto">set "PKTWS_EXTRA=--dpi-desync-fake-quic=quic_initial_google_com.bin"
blockcheck
</code></pre>
<p>Всяко лучше чем в файлах лезть менять.</p>
<hr>
<p>Кстати, мне кажется ошибку 95 для quic можно не расценивать как ошибку. У меня quic работает без проблем, а курл все равно ошибку 95 для гуглвидео выдает.</p></td><td>2024-09-25T17:49:35.827Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Это не решает проблемы с пробелом в пути</p></td><td>2024-09-25T18:01:18.080Z</td></tr><tr><td>rewhat</td><td><p>Есть альтернативный вариант? Вроде видосы грузит, но то быстро, то медленно.</p>
<p>NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</p>
<p>upd, вот вроде нормальный вариант, если кому надо:</p>
<p>–dpi-desync=split2 --dpi-desync-split-seqovl=4 --dpi-desync-split-pos=5 --wssize 1:6</p></td><td>2024-09-25T18:02:02.988Z</td></tr><tr><td>rngvalerka</td><td><p>В винде пути через обратный слеш пишутся, а не через прямой.</p></td><td>2024-09-25T18:05:45.950Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>upd Нет, все нормально. Спасибо! Нужно в сам blockcheck.cmd добавить после<br>
<code>cd /d "%~dp0"</code></p>
<pre><code class="lang-auto">set "PKTWS_EXTRA=--dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --dpi-desync-fake-quic=quic_initial_google_com.bin"
</code></pre>
<p>И оба файла в ту же папку. И все-таки это костыль) Должно работать и с пробелом, у bolvan работает для других файлов с фейками в том же скрипте. Как - не понимаю…</p></td><td>2024-09-25T18:13:28.716Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Тут параметр передается для скрипта на bash, запускаемый на cygwin</p></td><td>2024-09-25T18:14:07.389Z</td></tr><tr><td>rngvalerka</td><td><p>–dpi-desync-fake-tls=“\cygdrive\d\My Documents\Программы\Интернет\anon\AntiDPI<br>
Zapret\zapret4\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin”<br>
И корень там может не так обозначаться, и пробел может требовать экрана и еще чего-нибудь. Обмажутся своими виндами…</p></td><td>2024-09-25T18:16:09.346Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>У вас все хорошо?)</p></td><td>2024-09-25T18:17:37.805Z</td></tr><tr><td>rngvalerka</td><td><p>У меня более-менее хорошо, спасибо что интересуетесь. А у вас парсер строки о пробел ломается.</p></td><td>2024-09-25T18:33:28.891Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Пожалуйста) Это не мой парсер и ломается у всех, у кого пробел в пути. При этом в другом месте скрипта точно такой же путь работает. У меня чисто спортивный интерес, не более. Вы знаете решение?</p></td><td>2024-09-25T18:37:51.279Z</td></tr><tr><td>rngvalerka</td><td><p>“/cygdrive/d/My\ Documents/Программы/Интернет/anon/AntiDPI/<br>
Zapret/zapret4/blockcheck/zapret/files/fake/tls_clienthello_www_google_com.bin” это второй вариант, мне проверить негде</p></td><td>2024-09-25T18:47:11.672Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Так не получится, в скрипте сначала задается текущий каталог</p>
<pre><code class="lang-auto">EXEDIR="$(dirname "$0")"
EXEDIR="$(cd "$EXEDIR"; pwd)"
</code></pre>
<p>А потом уже доп. переменная,</p>
<pre><code class="lang-auto">PKTWS_EXTRA="--dpi-desync-fake-tls=\"$ZAPRET_BASE/files/fake/tls_clienthello_www_google_com.bin\""
</code></pre>
<p>Экранирование кавычек не помогает. В другом месте скрипта точно такой же путь</p>
<pre><code class="lang-auto">pktws_curl_test_update $1 $3 $s --dpi-desync-split-seqovl=336 --dpi-desync-split-seqovl-pattern="$ZAPRET_BASE/files/fake/tls_clienthello_iana_org.bin"
</code></pre>
<p>И это работает)</p></td><td>2024-09-25T18:54:38.016Z</td></tr><tr><td>rngvalerka</td><td><p>Да не кавычек экранирование, а пробела. Парсер натыкается на пробел и считает его за конец параметра. А переменная просто подставляет часть пути с уже правильным пробелом.<br>
Через echo можно посмотреть что $ZAPRET_BASE возвращает.</p></td><td>2024-09-25T19:01:48.916Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ну в чем проблема понятно, а ее решение? В командной строке windows просто короткий путь без пробелов взять и все, а как на баше?</p></td><td>2024-09-25T19:12:23.008Z</td></tr><tr><td>Ori</td><td><p>Действительно есть проблема с пробелом. Не похоже что его как-то заэкранировать можно. Как минимум, обычные способы не работают.<br>
Даже если запихнуть путь с пробелом в другую переменную и оттуда вызвать - все равно ломается.</p></td><td>2024-09-25T19:13:29.437Z</td></tr><tr><td>rngvalerka</td><td><p>Ну так не бывает же. Что возвращает echo $ZAPRET_BASE?<br>
Если через нее работает, то должно работать и через копипасту.</p></td><td>2024-09-25T19:21:21.995Z</td></tr><tr><td>RandomNamelessUser(Random Nameless User)</td><td><p>Возможно ли как-то задать разные параметры для ютуба и для всего остального? А-то с настройками, с которыми нормально грузятся видео, отваливаются части других сайтов.</p>
<p>Например, на nhentai не грузятся никакие превьюхи, но при этом нормально открывается и сам сайт, и полноразмерные изображения.</p></td><td>2024-09-26T04:22:17.601Z</td></tr><tr><td>easyone11</td><td><aside class="quote quote-modified" data-post="149" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/149">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    МНОЖЕСТВЕННЫЕ СТРАТЕГИИ 
nfqws способен по-разному реагировать на различные запросы и применять разные стратегии дурения. Это реализовано посредством поддержки множества профилей дурения. Профили разделяются в командной строке параметром --new. Первый профиль создается автоматически. 
Для него не нужно --new. Каждый профиль имеет фильтр. По умолчанию он пуст, то есть профиль удовлетворяет любым условиям. Фильтр может содержать жесткие параметры : версия ip протокола или порты tcp/udp. Они всегда…
  </blockquote>
</aside>
</td><td>2024-09-26T05:15:32.922Z</td></tr><tr><td>sashalomaetdpi</td><td><p>У кого-нибудь они работают? Ну, кто-нибудь сидит на них? Я пробовал на кинетике, опенврт, дебиане - нигде не работают листы, nfqws просто не ищет ничего в этих листах.</p></td><td>2024-09-26T05:25:58.050Z</td></tr><tr><td>easyone11</td><td><p>судя по отзывам работают</p></td><td>2024-09-26T06:11:16.013Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Работают на арче и на венде.</p></td><td>2024-09-26T07:16:35.786Z</td></tr><tr><td>anonymous169(anonymous169)</td><td><p>hostlist должен содержать именно хосты, не ip?<br>
при использовании нескольких стратегий, в одной из которых --dpi-desync-any-protocol=1 как ограничить ее определенными ip адресами? в идеале, с возможностью применения wssize</p></td><td>2024-09-26T07:30:31.429Z</td></tr><tr><td>The4ce</td><td><p>Как можно настроить nfqws, чтобы он не весь траффик до провайдера обрабатывал, а только от одного или нескольких сегментов сети (например wi-fi и гостевой wi-fi), а от других сегментов сети нет (например еще одна wi-fi сеть)?</p>
<p>–На tpws таким образом и устроено. В конфиге пишешь br0 и br1, и все как надо. При этом br2 пропускает “чистый траффик”–</p>
<p>Тут какая-то магия с Iptables требуется, да? Простите за необразованность, но никак не могу эту гору в своей жизни одолеть. Подскажите хотя бы, если не готовое решение, то в какую сторону копать. Спасибо.</p></td><td>2024-09-26T08:54:38.282Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote no-group" data-username="TesterTi" data-post="947" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>У меня чисто спортивный интерес, не более.</p>
</blockquote>
</aside>
<p>Так чем дело кончилось? В скрипте, который работает, нет пробелов в пути или строка обозначена не двойными кавычками, а апострофом?<br>
<strong>‘/path to/file’</strong></p>
<p>Надо тоже как-то научиться отпускать. Вот сейчас наберу в грудь воздуха и забью.</p></td><td>2024-09-26T09:46:33.766Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="rngvalerka" data-post="961" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rngvalerka/48/8880_2.png" class="avatar"> rngvalerka:</div>
<blockquote>
<p>Так чем дело кончилось?</p>
</blockquote>
</aside>
<p>Вот примерно так)</p>
<aside class="quote no-group" data-username="rngvalerka" data-post="961" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rngvalerka/48/8880_2.png" class="avatar"> rngvalerka:</div>
<blockquote>
<p>Вот сейчас наберу в грудь воздуха и забью.</p>
</blockquote>
</aside></td><td>2024-09-26T10:33:51.544Z</td></tr><tr><td>electrifying</td><td><p>В доке не нашел, скажите мультистратегии работают через команду --new я правильно понимаю, то есть вот у меня сейчас есть стратегия --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</p>
<p>И допустим я хочу ее применять только к сайту youtube то есть получается я должен прописать что-то типо</p>
<p>–hostlist=/opt/zapret/youtube.txt  --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</p>
<p>а дальше я добавляю параметр --new и пойдет еще одна стратегия только которая будет применятся к другим доменам,например, из списка zapret-hosts-user если я его так же укажу через параметр --hostlist?</p></td><td>2024-09-26T14:29:43.963Z</td></tr><tr><td>rngvalerka</td><td><p>да, по крайней мере у меня так работает</p></td><td>2024-09-26T14:50:00.231Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Приветствую. Подскажите по линуксу установил zapret все работает.</p>
<ol>
<li>Как остановить службу zapret она при запуске стартует. Интересует как ее остановить, потом запустить не используйя install_easy.sh<br>
2)Как быстро менять конфиг не запуская install_easy.sh</li>
</ol></td><td>2024-09-26T19:44:29.642Z</td></tr><tr><td>Nojil</td><td><p>зависит от системы инициализации или системного менеджера дистрибутива<br>
поменять конфиг в опт запрет и перезапуск службы</p></td><td>2024-09-26T20:11:44.019Z</td></tr><tr><td>rewhat</td><td><p>sudo /opt/zapret/init.d/sysv/zapret</p>
<p>{start|stop|restart|start-fw|stop-fw|restart-fw|start-daemons|stop-daemons|restart-daemons|reload-ifsets|list-ifsets|list-table}</p></td><td>2024-09-26T20:15:43.011Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Где этот конфиг опт запрет лежит. Можно простым языком. в какой папке? какими командами службу остановить?<br>
пс все вижу сверху ответили</p></td><td>2024-09-26T20:16:19.211Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>А быстро редактировать конфиг он в какой папке лежит?</p></td><td>2024-09-26T20:20:42.450Z</td></tr><tr><td>rewhat</td><td><p>/opt/zapret/config</p></td><td>2024-09-26T20:21:20.936Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p><a class="mention" href="/u/rewhat">@rewhat</a> <a class="mention" href="/u/nojil">@Nojil</a> спасибо</p></td><td>2024-09-26T20:24:06.265Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="rewhat" data-post="932" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>Как перезапустить zapret (nfqws) чтоб config применился после изменений? Пробовал sudo systemctl restart zapret.service, но чет не помогает.</p>
</blockquote>
</aside>
<p><code>/opt/init.d/zapret restart</code></p></td><td>2024-09-27T08:51:11.982Z</td></tr><tr><td>rewhat</td><td><p>в моем случае /opt/zapret/init.d/sysv/zapret restart. Директории /opt/init.d у меня нет.</p></td><td>2024-09-27T09:04:14.991Z</td></tr><tr><td>electrifying</td><td><p>Сделал вот такую мульти стратегию</p>
<blockquote>
<p>–hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --hostlist=/opt/zapret/ipset/zapret-hosts-usersss.txt --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1</p>
</blockquote>
<p>Никак не хочет работать, где ошибся? Если использовать просто</p>
<blockquote>
<p>–dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</p>
</blockquote>
<p>то все нормально отрабатывает. И если в стратегии ошибок нет, возможно, ли что она не работает из-за того что у меня уже был установлен запрет я его командой git pull --rebase --autostash обновил,возможно, запрет нужно переустановить?</p>
<p>Хотя даже если я просто указываю</p>
<blockquote>
<p>–hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</p>
</blockquote>
<p>То почему-то он игнорирует лист youtube.txt и просто берет все из zapret-hosts-user</p></td><td>2024-09-27T09:52:28.420Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>вопрос наверное банальный но сам не понимаю<br>
если в “визарде” был выбран tpws<br>
вижу в конфиге <code>MODE=tpws</code><br>
а вот стратегия дурения под каким параметром?<br>
раскоментировано <code>NFQWS_OPT_DESYNC="</code>  но этоже не для tpws ? или как стратегия в любом “моде” здесь меняется?</p>
<p>а ещё<code> TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"</code>  но это как я понял дефолтный некий параметр а не стратегия, а если “стратегия” то не узнаю того что “подобралось”</p></td><td>2024-09-27T10:18:01.378Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote no-group quote-modified" data-username="electrifying" data-post="974" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Хотя даже если я просто указываю</p>
<blockquote>
<p>–hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</p>
</blockquote>
<p>То почему-то он игнорирует лист youtube.txt и просто берет все из zapret-hosts-user</p>
</blockquote>
</aside>
<p>у меня сделано в другой очередности: сначала <strong>что</strong> нужно сделать (фейк, сплит, дисордер), потом уточняющие параметры, а потом с <strong>кем</strong> это нужно делать (хостлист с доменами), потом нью и новая секция по той же схеме, но для других доменов.</p>
<blockquote>
<p>–dpi-desync=fake,split2 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-fooling=badseq –hostlist=/opt/zapret/ipset/youtube.txt<br>
примерно так</p>
</blockquote></td><td>2024-09-27T11:06:07.618Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="rngvalerka" data-post="976" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rngvalerka/48/8880_2.png" class="avatar"> rngvalerka:</div>
<blockquote>
<p>потом нью и новая секция по той же схеме, но для других доменов.</p>
</blockquote>
</aside>
<p>Не работает, хостлист игнорируется и все остальные домены добавленные в zapret-hosts-user тянутся оттуда, хотя указан только хостлист с доменами ютуба то есть остальные заблокированные сайты открываться не должны</p></td><td>2024-09-27T11:18:17.293Z</td></tr><tr><td>rngvalerka</td><td><p>Тогда хз, видимо конфликт с дефолтной логикой, я в эти ребусы решил не играть и задизейблил сервис. Запускаю руками программу со своим набором флагов.</p></td><td>2024-09-27T11:25:26.791Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="electrifying" data-post="974" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>–hostlist</p>
</blockquote>
</aside>
<p>1 -?</p></td><td>2024-09-27T12:05:22.195Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А вы на чем запускаете? Linux, FreeBSD?..</p>
<details>
<summary>
В скрипте блокчека под cygwin такой код:</summary>
<pre><code class="lang-auto">	case "$UNAME" in
		Linux)
			PKTWS="$NFQWS"
			PKTWSD=nfqws
			linux_fwtype
			[ "$FWTYPE" = iptables -o "$FWTYPE" = nftables ] || {
				echo firewall type $FWTYPE not supported in $UNAME
				exitp 5
			}
			;;
		FreeBSD)
			PKTWS="$DVTWS"
			PKTWSD=dvtws
			FWTYPE=ipfw
			[ -f /etc/platform ] &amp;&amp; read SUBSYS &lt;/etc/platform
			;;
		OpenBSD)
			PKTWS="$DVTWS"
			PKTWSD=dvtws
			FWTYPE=opf
			;;
		Darwin)
			PKTWS="$DVTWS"
			PKTWSD=dvtws
			FWTYPE=mpf
			;;
		CYGWIN*)
			UNAME=CYGWIN
			PKTWS="$WINWS"
			PKTWSD=winws
			FWTYPE=windivert
			;;
		*)
</code></pre>
</details></td><td>2024-09-27T12:30:53.625Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote" data-post="979" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/979">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    1 -?
  </blockquote>
</aside>

<p>Это форумный движок услужливо два дефиса на тире заменяет в начале строки, а я просто скопипастил в середину.</p></td><td>2024-09-27T12:47:27.835Z</td></tr><tr><td>electrifying</td><td><p>Переустановил запрет все так же, даже если не указывать мультистратегию а просто указать какой-то определенный хотлист, он все равно тянет остальные домены из zapret-hosts-user. Это типо так и должно работать или это баг?</p></td><td>2024-09-27T13:11:10.900Z</td></tr><tr><td>easyone11</td><td><p>а MODE_FILTER что стоит?</p></td><td>2024-09-27T13:18:16.090Z</td></tr><tr><td>electrifying</td><td><p>Хостлисты и стоят</p></td><td>2024-09-27T13:26:19.753Z</td></tr><tr><td>easyone11</td><td><p>может ему путь не нравится?<br>
а дебаг запускал?</p></td><td>2024-09-27T13:30:53.513Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="easyone11" data-post="985" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>может ему путь не нравится?</p>
</blockquote>
</aside>
<p>Не, с путем все ок если удалить все домены из zapret-hosts-user и оставить hostlist с определенными то обращение пойдет к ним, остальные сайты не откроются. Вопрос в том, автор сделал это намерено или просто баг, если баг тогда весь смысл от мультистратегии теряется ведь команда --hostlist просто будет заигнорена так как он все домены возьмет из zapret-hosts-user</p></td><td>2024-09-27T13:49:49.234Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>под линухом. на убунте</p>
<p>только что это меняет? вижу<code> PKTWSD=nfqws</code> в скрипте</p>
<p>т.е. ответ на мой вопрос стратегия всегда в<code> NFQWS_OPT_DESYNC=</code>    в независимости от режима?</p></td><td>2024-09-27T14:24:19.909Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Сначала утром не работал googlevideo по h3 с дурилкой фейком, пока не указал этот фейк <code>quic_initial_www_google_com.bin</code>, к вечеру перестало с ним работать, а без него наоборот восстановилось. Какой-то рандом каждый день. <img src="https://ntc.party/images/emoji/twitter/smiling_face_with_tear.png?v=12" title=":smiling_face_with_tear:" class="emoji" alt=":smiling_face_with_tear:" loading="lazy" width="20" height="20"></p></td><td>2024-09-27T14:34:45.343Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Не знаю. Нужно курить мануал <a href="https://github.com/bol-van/zapret/tree/master/docs" class="inline-onebox">zapret/docs at master · bol-van/zapret · GitHub</a> или ждать ответа знающих…</p></td><td>2024-09-27T14:36:00.269Z</td></tr><tr><td>moopha</td><td><p>Никто не прикладывал подорожник к мобильным версиям YouTube, на iOS, в частности? Картинки и заставки роликов вроде отображает, но сами видео нет</p></td><td>2024-09-27T17:04:09.274Z</td></tr><tr><td>newb1e</td><td><p>Так должно было работать в старых версиях, это написано в <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.txt" rel="noopener nofollow ugc">ридми</a>, строки 1088-1127. В свежей сборке под винду работает как предполагается - подтягиваются только те листы, что указаны в конфиге. Странно, что под linux не так.</p></td><td>2024-09-27T22:50:50.315Z</td></tr><tr><td>yatolkosprosit</td><td><p>Ну так я правильно сделал, когда в консоли сначала ввел команду<br>
<code>PKTWS_EXTRA="--dpi-desync-fake-tls=/путь/до/файла/tls_clienthello_www_google_com.bin" </code><br>
а затем просто запустил blockcheck.sh ???</p></td><td>2024-09-28T10:13:37.548Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Подтверждаю. Указанные домены в --hostlis игнорятся</p></td><td>2024-09-28T10:48:59.661Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Из этой же консоли? По идее - да. Но некоторые пишут, что саму консоль от админа нужно запускать. И еще скрипту не нравятся пути с пробелами</p></td><td>2024-09-28T11:11:05.979Z</td></tr><tr><td>yatolkosprosit</td><td><aside class="quote no-group" data-username="TesterTi" data-post="994" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Из этой же консоли?</p>
</blockquote>
</aside>
<p>Из Linux я запускаю. Linux  уменя.</p>
<aside class="quote no-group" data-username="TesterTi" data-post="994" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>По идее - да. Но некоторые пишут, что саму консоль от админа нужно запускать.</p>
</blockquote>
</aside>
<p>Так и сделал.</p>
<aside class="quote no-group" data-username="TesterTi" data-post="994" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>И еще скрипту не нравятся пути с пробелами</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="TesterTi" data-post="994" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>И еще скрипту не нравятся пути с пробелами</p>
</blockquote>
</aside>
<p>В примере у bolvan значение переменной закавычено. Этого должно быть достаточно, чтобы пробелы игнорировались.</p>
<p>У меня сегодня перестали работать способы обхода Ютуба, которые работали пару дней назад. Пробую новые настройки. Но не увидел, чтобы скрипт работал с tls_clienthello_www_google_com.bin<br>
Вдобавок, он мне странные значения для ttl выдает. Например, ttl=2 или даже ttl=1.</p></td><td>2024-09-28T11:25:14.612Z</td></tr><tr><td>bolvan</td><td><p>не надо конфликтовать с логикой скриптов запуска, если вы ими пользуетесь<br>
скриптам глубоко пофиг что вы указали в параметрах --hostlist<br>
если стоит MODE_FILTER=hostlist, он добавит к конец NFQWS_OPT_DESYNC указания на листы из ipset<br>
он не будет изучать что вы там написали, он просто добавит<br>
потому либо убирайте MODE_FILTER, либо пишите как надо<br>
а надо начале указывать специализации, затем через --new последнюю  стратегию. в нее НЕ надо писать ваши хостлисты<br>
используйте листы из ipset. или откажитесь от MODE_FILTER<br>
посмотрите хотя бы в ps с какими опциями запускается процесс<br>
скрипты это всего лишь запускалка</p></td><td>2024-09-28T12:25:54.882Z</td></tr><tr><td>bolvan</td><td><p>с пробелами в путях в PKTWS_EXTRA не разбирался<br>
делал по быстрому. времени не было<br>
будет возможность - изучу вопрос</p></td><td>2024-09-28T12:35:08.960Z</td></tr><tr><td>anonymous169(anonymous169)</td><td><p>Не подскажите, как проще всего штатными средствами выделить одну из NFQWS стратегий на конкретный удаленный IP адрес (нужен обход на ВПН для удаленного доступа, чтобы всегда работал, даже в моменты поиска и тестов других стратегий)?</p></td><td>2024-09-28T12:49:18.646Z</td></tr><tr><td>spv82</td><td><p>Запустить nfqws с нужными опциями и отличным queue-num и добавить правило iptables под него?</p></td><td>2024-09-28T15:34:27.964Z</td></tr><tr><td>Esto</td><td><p>у меня курл не имеет опции хттп3. я сделал курл с хттп3 в домашней папке. можно сделать чтобы блокчек использовал этот курл в котором эта опция есть?</p></td><td>2024-09-28T21:53:06.159Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Подскажите как подружить переменные скрипта установки NFQWS_OPT_DESYNC с длинными путями в openwrt. Если попробывать напечатать</p>
<pre><code class="lang-auto">/opt/zapret/nfq/nfqws --qnum=201 --user=daemon --dpi-desync-fwmark=0x40000000 --dpi-desync=fake,disorder2 --dpi-desync-fooling=badsum,md5sig,badseq --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt --hostlist-auto=/opt/zapret/ipset/zapret-hosts-auto.txt --hostlist-auto-fail-threshold=3 --hostlist-auto-fail-time=60 --hostlist-auto-retrans-threshold=3  --new --dpi-desync=fake,disorder2 --dpi-desync-fooling=badsum,md5sig,badseq --hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt

</code></pre>
<p>то тупо не влазеет в консоль. Пробывал юзать символ переноса на новую строку</p>
<blockquote>
<p>\</p>
</blockquote>
<p>он помогает, но только в консоли. Скрипт установки обрезает все после него и соответственно демон стартует не так как задумано или не стартует вообще. Пробывал прописывать с этим символом параметры, заключенные в кавычки как в одной строке переменной NFQWS_OPT_DESYNC так и переносить все после обратного слеша (начиная с --new) на другую строку, ничего не помогает. Редактор юзается стандартный vi. Может нужны другие разделители вместо двойных кавычек одинартные (') или обратная одинарная (`)?</p>
<p>P.S.<br>
<a class="mention" href="/u/bolvan">@bolvan</a><br>
Удалось завести, остановив службу и руками исправив переменную в файле /opt/zapret/config</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="--dpi-desync-fwmark=0x40000000 --dpi-desync=fake,disorder2 --dpi-desync-fooling=badsum,md5sig,badseq --hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin \
--new --dpi-desync-fwmark=0x40000000 --dpi-desync=fake,disorder2 --dpi-desync-fooling=badsum,md5sig,badseq --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt --hostlist-auto=/opt/zapret/ipset/zapret-hosts-auto.txt --hostlist-auto-fail-threshold=3 --hostlist-auto-fail-time=60 --hostlist-auto-retrans-threshold=3 --hostlist=/opt/zapret/ipset/zapret-hosts-user.txt --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt"
</code></pre>
<p>Такой формат zapret понимает отлично. При установке юзал опцию хостлиста, и автохост прописал руками. Не уверен, что будет добавлять, но у меня в приорете youtube, ибо с гугловским фейком подглючивают другие сайты, тут хз, может это dpi не нравится.<br>
Соответственно просьба, если можно (это не срочно) как-то подправить код установочного скрипта, чтобы он учитывал ограничение на длину строки параметров, принимаемую консолью и сам разбивал что-ли длинные строки на несколько более коротких.</p></td><td>2024-09-28T23:32:34.158Z</td></tr><tr><td>robin_blood</td><td><aside class="quote" data-post="104" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/robin_blood/48/8798_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/104">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    А как организовать процесс? По умолчанию юзается виндовский
  </blockquote>
</aside>

<p>в этой теме почитай, там дальше пару вариантов есть</p></td><td>2024-09-29T00:22:05.161Z</td></tr><tr><td>bolvan</td><td><p>только отдельным инстансом<br>
фильтр по ип если и будет, то только в winws<br>
в остальных это делается через таблес и фаервол<br>
по прикрутке к скриптам запуска - custom script<br>
либо отдельно руками</p></td><td>2024-09-30T08:11:44.461Z</td></tr><tr><td>bolvan</td><td><p>CURL=/path/to/curl ./blockcheck.sh<br>
предварительно сделать элевацию до рута<br>
встроенная теряет переменные</p></td><td>2024-09-30T08:14:30.814Z</td></tr><tr><td>bolvan</td><td><p>вручную не надо указыаать листы из ipset<br>
их добавит MODE_FILTER=hostlist<br>
к последней стратегии<br>
автолист я тем более не рекомендую руками добавлять<br>
скрипты для него меняют правила таблес</p>
<p>насчет длинных строк разбирайтесь с вашим редактором<br>
установите nano. он удобнее vi<br>
в консоли нет ограничений, это проблема либо вашего ссш клиента, либо редактора, либо вы не умеете им пользоваться<br>
может быть неверно установлен тип терминала. переменная TERM<br>
или нет для него файла в /usr/share/terminfo</p></td><td>2024-09-30T08:17:48.214Z</td></tr><tr><td>pr1v4teer</td><td><p>А можно ли в ./blockcheck.sh настроить следующее:</p>
<ol>
<li>При проверках не использовать twps (так как я всё равно буду использовать только nfqws; для кого-то может быть наоборот, нужно отключить nfqws);</li>
<li>Выключить проверку определенных стратегий (например, я не хочу использовать ttl, или wssize);</li>
<li>Выводить в stdout только успешные стратегии.</li>
</ol>
<p>А то на полную проверку с заведомо ненужными параметрами уходит уйма времени, а потом просматривать всю портянку с редкими AVAILABLE - тоже такое себе.</p></td><td>2024-09-30T15:43:44.102Z</td></tr><tr><td>easyone11</td><td><p>и остановку службы запрета я бы еще добавил на время теста</p></td><td>2024-09-30T17:52:43.220Z</td></tr><tr><td>ShiroiBara(Shiroi Bara)</td><td><p>Как мне удалось выяснить это проблема дефолтного интерпретатора командной строки ash. Поставил до кучи bash. С ним ограничений на длину строки без символов переноса не возникло. ssh клиент здесь совсем не причем, проверял из двух разных систем. Так же воспользовался вашим советом и перезапустил easy_install с опцией автохоста, убрав все те кривые вставки, что до этого были. nano накатил тоже. Работает нормально. Плохо только одно - clouflare часто выдает забаненые ip для разных nsfw сайтов (причем часто два разных сайта висят на одном адресе, что 4 что и 6 протокола), и тогда запрет не помогает, приходится заворачивать в впн. Стал сталкиваться с этим последнее время, в начале грешил на стратегию кривую, но посмотрев что nslookup выдает, и проверив с блокчеком, понял, что попал на лотерею, когда выданный адрес попадает в группу забанненых провом.</p></td><td>2024-10-01T04:08:25.248Z</td></tr><tr><td>bolvan</td><td><p>на счет tpws есть переменная SKIP_TPWS=1<br>
в целом блокчек нужен для исследования dpi, а не генерации таблеток. это меняться не будет<br>
макс что есть - это quick режим до первого попадания<br>
выбор отдельных стратегий сложно сделать технически. в какой форме их задавать непонятно</p></td><td>2024-10-01T06:54:54.034Z</td></tr><tr><td>boltor</td><td><aside class="quote no-group quote-modified" data-username="pr1v4teer" data-post="1006" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/p/ce7236/48.png" class="avatar"> pr1v4teer:</div>
<blockquote>
<ol start="3">
<li>Выводить в stdout только успешные стратегии.</li>
</ol>
<p>потом просматривать всю портянку с редкими AVAILABLE - тоже такое себе.</p>
</blockquote>
</aside>
<p><code>/opt/zapret/blockcheck.sh | tee /tmp/blockcheck.log</code><br>
<code>grep -B 1 '!!!!!' /tmp/blockcheck.log | less</code><br>
Первая команда запускает блокчек и сохраняет весь вывод в файл, вторая хватает из файла только строчки с <code>!!!!!</code>, с которых начинается уведомление о рабочей стратегии, и строчку над ней, т.е. саму рабочую стратегию, и опционально выводит в удобный формат для листания стрелочками или кнопками PageUp/PageDown (выход из него кнопка Q).<br>
Файлы можете называть как хотите, например именем домена, который тестируете, чтоб собирать историю поиска и удобно организовывать результаты.</p></td><td>2024-10-01T08:31:37.773Z</td></tr><tr><td>pr1v4teer</td><td><p>Да это-то понятно, что можно отгрепать результат из временного файла, просто хотелось узнать, есть ли нативный способ подавления вывода неудачных попыток. Кстати, -B 1 не подойдет в случаях, когда для успешной стратегии выводятся дополнительные комментарии (например, при использовании опции md5sig).</p>
<p>Можно, конечно, самостоятельно поправить скрипт под свои нужды, но не хочется лезть кривыми руками в чужой код.</p></td><td>2024-10-01T10:40:49.639Z</td></tr><tr><td>boltor</td><td><p>Все комментарии показываются <em>после</em> строк с <code>!!!!!</code>, а опция -B берёт строки <em>до</em> совпадающей, так что работает надёжно. Всё ещё не вижу нужды нативно как-то подавлять вывод.</p></td><td>2024-10-01T10:53:06.131Z</td></tr><tr><td>pr1v4teer</td><td><p>Хм. И правда. А мне почему-то казалось, что строка с комментарием выводится перед AVAILABLE. Звиняйте, my bad. Тогда да, способ рабочий. Хотя и не будет видно, для какого протокола способ сработал <img src="https://ntc.party/images/emoji/twitter/woozy_face.png?v=12" title=":woozy_face:" class="emoji" alt=":woozy_face:" loading="lazy" width="20" height="20"></p></td><td>2024-10-01T11:44:01.887Z</td></tr><tr><td>zzr</td><td><p>оказывывается есть запрет для винды! тока блокчек пока работает (а ето ~1.5часа) нету инета вобще (not cool) так же х пойми куда там чё вписывает на линуксе в етом плане интуинитивну проще</p></td><td>2024-10-01T12:02:12.293Z</td></tr><tr><td>meadow_seed</td><td><aside class="quote no-group" data-username="zzr" data-post="1014" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zzr/48/14949_2.png" class="avatar"> zzr:</div>
<blockquote>
<p>нету инета вобще</p>
</blockquote>
</aside>
<p>попробуй использовать byedpi в качестве прокси для браузера</p></td><td>2024-10-01T14:30:08.763Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет! Такой вопрос, можно ли заскриптовать в OpenWrt например в полночь заменить или изменить файл config. Также например проверить обновление запрета, если есть, то обновится и т.д.<br>
Проблематика в том, что я поставил другу zapret, позавчера у него на днях перестал работать Ютуб, пришлось приезжать, оказалось нужно было лишь убрать одну цифру и все!<br>
Идея в том, чтобы я например на гитхабе выложил исправленный рабочий конфиг, а в 0:00 роутер сам его подтянул по моей ссылке из гитхаба, также чтобы обновлялся zapret. <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-04T13:27:03.360Z</td></tr><tr><td>bolvan</td><td><p>это лучше делать через удаленное администрирование<br>
если нет внешника - прокинуть впн куда-то, где он есть<br>
или  реверсный ссш</p>
<p>все равно придется исследовать каждый раз с того провайдера</p>
<p>автообновления не рекомендую<br>
иногда бывают несовместимые изменения</p></td><td>2024-10-04T13:53:09.277Z</td></tr><tr><td>ryozi</td><td><aside class="quote no-group" data-username="bolvan" data-post="1009" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>на счет tpws есть переменная SKIP_TPWS=1</p>
</blockquote>
</aside>
<p>Пробовал запускать варианты:<br>
SKIP_TPWS=1 ./blockcheck.sh | tee /tmp/blockcheck.txt<br>
SKIP_TPWS=1 PKTWS_EXTRA=“–dpi-desync-fake-tls=/home/pi/zapret/files/fake/tls_clienthello_www_google_com.bin” ./blockcheck.sh | tee /tmp/blockcheck.txt</p>
<p>И почему-то все равно идет проверка TWPS, запускаю вроде правильно, но не получается пропускать проверку TWPS.</p>
<p><a class="mention" href="/u/pr1v4teer">@pr1v4teer</a> пробовали запускать? Получилось пропускать проверку TWPS?</p></td><td>2024-10-04T16:18:28.652Z</td></tr><tr><td>bolvan</td><td><p>запускать из рутового шелла<br>
встроенная элевация теряет переменные</p></td><td>2024-10-04T16:56:25.603Z</td></tr><tr><td>yatolkosprosit</td><td><p>Не совсем понятно. Если я выполняю команду <code>su -</code> я получаю рутовый шелл или нет?</p></td><td>2024-10-04T17:45:41.619Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="ryozi" data-post="1018" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ryozi/48/9911_2.png" class="avatar"> ryozi:</div>
<blockquote>
<p>SKIP_TPWS=1 PKTWS_EXTRA=“–dpi-desync-fake-tls=/home/pi/zapret/files/fake/tls_clienthello_www_google_com.bin” ./blockcheck.sh | tee /tmp/blockcheck.txt</p>
</blockquote>
</aside>
<p>Скопировал это в свой рутовый шелл. Работает без TPWS</p></td><td>2024-10-04T18:18:29.268Z</td></tr><tr><td>roskompozor(roskompozor)</td><td><p>Всем шалом! На ПК ютуб работает нормально, а по Wifi, через смартфоны не работает.<br>
Почему так?</p>
<p>С MODE_QUIC=0 тоже не работает через смартфон</p>
<p>Конфиг ниже</p>
<pre><code class="lang-auto">WS_USER=nobody
FWTYPE=iptables

SET_MAXELEM=522288

IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"

IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"

AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
AUTOHOSTLIST_DEBUGLOG=0

MDIG_THREADS=30

GZIP_LISTS=1

MODE=nfqws

MODE_HTTP=1

MODE_HTTP_KEEPALIVE=0

MODE_HTTPS=1

MODE_QUIC=1

MODE_FILTER=none

DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000

NFQWS_OPT_DESYNC="--dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"

NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-ttl=0 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_google_com.bin"

TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"

FLOWOFFLOAD=donttouch

IFACE_LAN=br0
IFACE_WAN=ppp0

INIT_APPLY_FW=1

DISABLE_IPV6=0
</code></pre></td><td>2024-10-04T23:52:45.708Z</td></tr><tr><td>Dhogzhenya</td><td><p>Здраствуйте. Сейчас обнаружил, что ютуб видео ролики то работают, то не работают.  Помогает либо включение впн, либо включение одного и того же ролика от 5 до 10 раз. От чего именно это зависит я не знаю. Прошу помощи так как не знаю как решить эту проблему</p>
<p>Config</p>
<p>FWTYPE=iptables</p>
<p>SET_MAXELEM=522288<br>
IPSET_OPT=“hashsize 262144 maxelem $SET_MAXELEM”</p>
<p>IP2NET_OPT4=“–prefix-length=22-30 --v4-threshold=3/4”<br>
IP2NET_OPT6=“–prefix-length=56-64 --v6-threshold=5”<br>
AUTOHOSTLIST_RETRANS_THRESHOLD=3<br>
AUTOHOSTLIST_FAIL_THRESHOLD=3<br>
AUTOHOSTLIST_FAIL_TIME=60<br>
AUTOHOSTLIST_DEBUGLOG=0</p>
<p>MDIG_THREADS=30</p>
<p>GZIP_LISTS=1</p>
<p>MODE=tpws<br>
MODE_HTTP=1<br>
MODE_HTTP_KEEPALIVE=0<br>
MODE_HTTPS=1<br>
MODE_QUIC=0<br>
MODE_FILTER=none</p>
<p>DESYNC_MARK=0x40000000<br>
DESYNC_MARK_POSTNAT=0x20000000<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake --dpi-desync-fooling=md5sig --dpi-desync-fake-http=0x00000000”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake --dpi-desync-repeats=6”</p>
<p>TPWS_OPT=“–split-tls=sni --oob --mss=88”</p>
<p>FLOWOFFLOAD=donttouch</p>
<p>INIT_APPLY_FW=1</p>
<p>DISABLE_IPV6=1</p></td><td>2024-10-05T00:39:54.666Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote quote-modified" data-post="1" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Если ютуб не разблокируют ни 1_russia_blacklist_YOUTUBE.cmd / 1_russia_blacklist_YOUTUBE_ALT.cmd из GoodbyeDPI <a href="https://github.com/ValdikSS/GoodbyeDPI/releases/" class="inline-onebox" rel="noopener nofollow ugc">Releases · ValdikSS/GoodbyeDPI · GitHub</a>, ни preset_russia.cmd из zapret <a href="https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip</a> 
можно попробовать подобрать через blockcheck: 

Запустить от имени администратора service_remove.cmd  из папки goodbyedpi,
Скачать и распаковать архив <a href="https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip</a>

<details class="disabled"><summary>Примечание для…</summary></details>
  </blockquote>
</aside>
</td><td>2024-10-05T05:24:58.108Z</td></tr><tr><td>Dhogzhenya</td><td><p>Я это уже пытался делать. Blockcheck не смог найти ни одну рабочую стратегию для поддоменов гуглвидео. Но он мне выдал на tls 1.3, что installed curl version does not support http3 QUIC. tests disabled</p></td><td>2024-10-05T16:58:09.388Z</td></tr><tr><td>boltor</td><td><p>Я не раз видел, что у некоторых в конфигах используется одновременно <code>--dpi-desync-ttl</code> и <code>--dpi-desync-autottl</code>, но мне кажется, они друг другу противоречат. Есть ли смысл их использовать одновременно? Как они сочетаются? Если не сочетаются, то что в приоритете? В талмуде не заметил инфу об этом.</p></td><td>2024-10-06T17:01:52.916Z</td></tr><tr><td>bolvan</td><td><p>Есть там инфа.</p>
<blockquote>
<ul>
<li>autottl. Суть режима в автоматическом определении TTL, чтобы он почти наверняка прошел DPI и немного не дошел до сервера. Берутся базовые значения TTL 64,128,255, смотрится входящий пакет (да, требуется направить первый входящий пакет на nfqws !).<br>
Вычисляется длина пути, отнимается delta (1 по умолчанию). Если TTL вне диапазона (min,max - 3,20 по умолчанию), то берутся значения min,max, чтобы вписаться в диапазон. Если при этом полученный TTL больше длины пути, то автоматизм не сработал и берутся фиксированные значения TTL для атаки.<br>
Техника позволяет решить вопрос, когда вся сеть перегорожена шлагбаумами (DPI, ТСПУ) везде где только можно, включая магистралов. Но потенциально может давать сбои.<br>
Например, при асимметрии входящего и исходящего канала до конкретного сервера.<br>
На каких-то провайдерах эта техника будет работать неплохо, на других доставит больше проблем, чем пользы.<br>
Где-то может потребоваться тюнинг параметров. Лучше использовать с дополнительным ограничителем.</li>
</ul>
</blockquote>
<p>Фиксированное значение - это --dpi-desync-ttl. Если не указывать или поставить 0 - пакет будет уходить с оригинальным TTL. В этом случае требуется fooling, иначе это 100% поломка tcp.<br>
Или можно поставить ttl=1. Тогда атака фейками будет в большинстве случаев пропущена, тк фейки не дойдут до DPI, но и соединение не будет гарантированно ломаться, оставляя ситуацию как есть, без обхода. Хотя бывают и провы, где DPI стоят на 1 хопе. В этом случае может обойтись только часть DPI фейком, а дальше на магистралах - нет, и результат будет все равно нет.<br>
Если кроме фейков есть еще и компонента фрагментации (split/disorder), то она будет штатно применена в версии “2” - (split2/disorder2), тк обрамляющие фейки используют тот же ttl, что и --dpi-desync=fake</p></td><td>2024-10-06T17:11:38.821Z</td></tr><tr><td>boltor</td><td><p>Вы описали для чего нужен --dpi-desync-ttl и как он сочетается с другими параметрами. Это есть в талмуде. И как работает --dpi-desync-autottl тоже там есть, а как <em>оба</em> параметра сочетаются друг с другом одновременно? Они же оба меняют TTL на какое-то своё значение, так? Нельзя ведь одни и те же пакеты отправлять с разным TTL.<br>
Единственное, что я <em>вроде</em> понял из талмуда и ответов здесь и на гитхабе, это что --dpi-desync-ttl сразу отправляет пакеты с заданным TTL, а --dpi-desync-autottl отправляет без изменения TTL, а уже по ответу сервера определяет число хопов, и уже после этого задаёт TTL, как описано в талмуде. Поэтому я здесь вижу сочетаемость только при сценарии, когда первый пакет отправляется с заданным --dpi-desync-ttl, а после ответа сервера пакеты начинают отправляться с --dpi-desync-autottl.<br>
Я в правильную сторону думаю?</p></td><td>2024-10-06T17:28:13.885Z</td></tr><tr><td>bolvan</td><td><p>Сначала работает autottl. Если он не может - работает ttl. Он как fallback</p></td><td>2024-10-06T17:30:18.378Z</td></tr><tr><td>boltor</td><td><p>Вооот, спасибо, что прояснили.</p>
<p>Я под</p>
<blockquote>
<p>автоматизм не сработал и берутся <strong>фиксированные</strong> значения TTL для атаки.</p>
</blockquote>
<p>понял вот это:</p>
<blockquote>
<p>Берутся базовые значения TTL 64,128,255,</p>
</blockquote>
<p>А имелось в виду --dpi-desync-ttl?</p></td><td>2024-10-06T17:44:51.777Z</td></tr><tr><td>bolvan</td><td><p>нет<br>
64,128,255 это стандарты для разных ос, с которыми они отправляют пакеты<br>
никсы 64, мелкомягкие - 128<br>
255 тоже встречается</p>
<p>идет оценка какой был начальный ттл на сервере. от этого базиса считается длина пути</p></td><td>2024-10-06T18:17:17.935Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><p>а есть вариант, чтобы еще инстаграм работал через запрет?</p></td><td>2024-10-07T10:27:22.139Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Тут 2 варианта:</p>
<ul>
<li>либо у вас ip забанены провайдером. Проверить можно скриптом <a href="https://ntc.party/uploads/short-url/2j9bMVO4QpVlz53mqzL8AGAmoFP.bat">https://ntc.party/uploads/short-url/2j9bMVO4QpVlz53mqzL8AGAmoFP.bat</a><br>
Тогда пробуйте doh <a href="https://ntc.party/t/%D0%BD%D0%B5-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82-instagram-%D0%B8-twitter-%D0%B7%D0%B0%D0%B1%D0%B0%D0%BD%D0%B5%D0%BD%D1%8B-%D0%BF%D0%BE-ip-%D1%87%D1%82%D0%BE-%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C/10815/2" class="inline-onebox">Не грузит Instagram и twitter. Забанены по IP? Что делать? - #2 by TesterTi</a></li>
<li>либо стратегия не разблокирует сайт - подберите блокчеком (в п5 укажите свой сайт вместо ggc) <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/">https://ntc.party/t/подбор-рабочего-конфига-для-ggc-ютуба-через-blockcheck/</a></li>
</ul></td><td>2024-10-07T11:23:06.116Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="1033" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Тогда пробуйте doh <a href="https://ntc.party/t/%D0%BD%D0%B5-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82-instagram-%D0%B8-twitter-%D0%B7%D0%B0%D0%B1%D0%B0%D0%BD%D0%B5%D0%BD%D1%8B-%D0%BF%D0%BE-ip-%D1%87%D1%82%D0%BE-%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C/10815/2">Не грузит Instagram и twitter. Забанены по IP? Что делать? - #2 by TesterTi</a></p>
</blockquote>
</aside>
<p>Это на браузере, а на уровне роутера через запрет возможно?</p></td><td>2024-10-07T12:59:36.174Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Да, если в роутере можно прописать рабочий doh.</p></td><td>2024-10-07T13:10:15.931Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><p>А на openwrt как это сделать можете подсказать пожалуйста</p></td><td>2024-10-07T13:11:32.673Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Не знаю, не приходилось настраивать. В таких случаях всегда гуглю, вот первые пару ссылок</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://konnov.name/nastrojka-dns-over-https-doh-i-dnssec-v-openwrt-na-marshrutizator/">
  <header class="source">
      <img src="zapret-обсуждение-726/8fbd1de6d5462ac56a68f3b49c524fc43bf561fc.png" class="site-icon" data-dominant-color="99C9FD" width="32" height="32">

      <a href="https://konnov.name/nastrojka-dns-over-https-doh-i-dnssec-v-openwrt-na-marshrutizator/" target="_blank" rel="noopener" title="12:26PM - 28 November 2020">Киевское направление – 28 Nov 20</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/281;"><img src="zapret-обсуждение-726/f93a83fe4739258be95a5bfb2d607ed787278877_2_690x282.png" class="thumbnail" data-dominant-color="F8F5F4" width="690" height="282"></div>

<h3><a href="https://konnov.name/nastrojka-dns-over-https-doh-i-dnssec-v-openwrt-na-marshrutizator/" target="_blank" rel="noopener">Настройка DNS over HTTPS (DoH) и DNSSEC в OpenWrt на маршрутизаторе Strong...</a></h3>

  <p>Устанавливаем OpenWrt на маршрутизатор Strong 1200. Если вы не знаете как установить OpenWrt или не понимаете для чего это нужно делать, данная статья вам будет абсолютно не интересна.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://itjeweller.wordpress.com/2024/02/12/%D0%BF%D1%80%D0%BE%D0%B4%D0%B2%D0%B8%D0%BD%D1%83%D1%82%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-openwrt-%D1%87-2/">
  <header class="source">
      <img src="zapret-обсуждение-726/2486d02f9c48e1f283ea552adfaf31a2d9a794bd.png" class="site-icon" data-dominant-color="7188EF" width="48" height="48">

      <a href="https://itjeweller.wordpress.com/2024/02/12/%D0%BF%D1%80%D0%BE%D0%B4%D0%B2%D0%B8%D0%BD%D1%83%D1%82%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-openwrt-%D1%87-2/" target="_blank" rel="noopener" title="06:28PM - 12 February 2024">Ювелирная мастерская – 12 Feb 24</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:440/69;"><img src="zapret-обсуждение-726/6b4413966f7fd278581f3ef5ca622eae02daa694.png" class="thumbnail" data-dominant-color="EBEBEC" width="440" height="69"></div>

<h3><a href="https://itjeweller.wordpress.com/2024/02/12/%D0%BF%D1%80%D0%BE%D0%B4%D0%B2%D0%B8%D0%BD%D1%83%D1%82%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-openwrt-%D1%87-2/" target="_blank" rel="noopener">Продвинутая настройка OpenWRT&nbsp;ч.2</a></h3>

  <p>Итак, мы прошили роутер, произвели базовую настройку и далее продолжили наши извращения. Эта статья получается четвертой в серии. Текста много, функционала мало…В этой части мы выполним следу…</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gnorth.ru/posts/2020/05/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-dns-over-tls-%D0%B8-dnssec-%D0%BD%D0%B0-openwrt/">
  <header class="source">

      <a href="https://gnorth.ru/posts/2020/05/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-dns-over-tls-%D0%B8-dnssec-%D0%BD%D0%B0-openwrt/" target="_blank" rel="noopener" title="10:54PM - 22 May 2020">GriefNorth's Notes – 22 May 20</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://gnorth.ru/posts/2020/05/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-dns-over-tls-%D0%B8-dnssec-%D0%BD%D0%B0-openwrt/" target="_blank" rel="noopener">Настройка DNS over TLS и DNSSEC на Openwrt</a></h3>

  <p>Так как уже установили dnsmasq-full перейдем непосредственно к настройке всего остального
Установка stubby Логинемся по ssh к OpenWRT и выполняем
opkg update opkg install stubby Далее включаем ручной режим в /etc/config/stubby
config stubby 'global'...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-07T13:13:48.727Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет!<br>
Кто-нибудь пробовал настроить тик ток и нетфликс?<br>
Все другие соц сети удалось пробить, а эти чет не даются <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"><br>
Может есть какие другие методы.</p></td><td>2024-10-07T19:47:48.940Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Tiktok никто не блокировал, он сам заблокировал российских пользователей частично (информация легко гуглится).<br>
Netflix - аналогично (вообще список сайтов, которые блокируют доступ с российских айпишников можно глянуть, например, тут - <a href="https://github.com/dartraiden/no-russia-hosts/blob/master/hosts.txt" class="inline-onebox" rel="noopener nofollow ugc">no-russia-hosts/hosts.txt at master · dartraiden/no-russia-hosts · GitHub</a> )<br>
Так что в данном случае zapret никак не поможет - только vpn.</p></td><td>2024-10-07T20:18:18.447Z</td></tr><tr><td>trin4ik(Trin4ik)</td><td><p>+1<br>
под подобные задачи на том же openwrt поднял v2ray+reality и там тоже есть возможность оборачивать только определённые домены. обернул нетфликс, jetbrains и подобные, кто сами блокируют ру зону. прекрасно работает</p></td><td>2024-10-08T05:33:15.361Z</td></tr><tr><td>ech0brav0</td><td><p>Кстати, можешь скачать гео базу для xray</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/kutovoys/ru_gov_zapret">
  <header class="source">

      <a href="https://github.com/kutovoys/ru_gov_zapret" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/e35b1e26d8858b75a866f544aaba28bc959c3815_2_690x344.png" class="thumbnail" data-dominant-color="E7ECED">

  <h3><a href="https://github.com/kutovoys/ru_gov_zapret" target="_blank" rel="noopener nofollow ugc">GitHub - kutovoys/ru_gov_zapret: Блокировка доступа к запрещенным в РФ сервисам...</a></h3>

    <p><span class="github-repo-description">Блокировка доступа к запрещенным в РФ сервисам сайтам</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
И указать zapret.dat:zapret-zapad для роутинга через прокси. Вполне удобнее будет, чем по отдельности что-то вписывать</p></td><td>2024-10-08T05:59:37.510Z</td></tr><tr><td>trin4ik(Trin4ik)</td><td><p>да, можно и так, но мне проще “контролировать” куда пускать, куда нет, т.к. на моём инете сидят ещё и соседи, соответственно, куча детей разного возраста итп. поэтому мне “проще” добавлять домены к нужным сервисам. юзаю вот этот ресурс как основу. когда надо какой-то сервис добавить, беру из этого списка, т.к. там он вполне себе полный</p>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/v2fly/domain-list-community">
  <header class="source">

      <a href="https://github.com/v2fly/domain-list-community" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/fcd7c23d9cccdd90d54ad200be37ddd826e22505_2_690x344.png" class="thumbnail" data-dominant-color="EFEFF3">

  <h3><a href="https://github.com/v2fly/domain-list-community" target="_blank" rel="noopener nofollow ugc">GitHub - v2fly/domain-list-community: Community managed domain list. Generate...</a></h3>

    <p><span class="github-repo-description">Community managed domain list. Generate geosite.dat for V2Ray.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-08T06:03:44.535Z</td></tr><tr><td>KDS</td><td><p>Народ, я возможно дико туплю, но как сделать правило на UDP-все порты? А не только 443. Дискорд заблочили, хочу попробовать войс завести</p></td><td>2024-10-08T08:44:08.085Z</td></tr><tr><td>zirf0(Andrey Y)</td><td><p>NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2 --dpi-desync-ttl=4 --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</p>
<p>–dpi-desync-ttl=4 не обязательно, похоже<br>
–dpi-desync-split-seqovl=1 - у меня критично, но без подделки SNI (последний параметр) у меня провайдер видит кривизну, сбрасывает соединение и лочит IP адрес, то есть роутер приходится перезапускать.</p></td><td>2024-10-08T09:32:01.342Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Ну на nfqws нужно отправлять в iptables/nftables нужные порты<br>
И да, работать будет</p></td><td>2024-10-08T10:17:06.090Z</td></tr><tr><td>KDS</td><td><p>Винда у меня )</p></td><td>2024-10-08T10:18:22.693Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>filter-udp=1-65535, но лучше посмотрите отдельно нужные порты, чтобы весь трафик не гнать</p></td><td>2024-10-08T10:22:22.968Z</td></tr><tr><td>KDS</td><td><p>Да гуглил про WebRTC в дискорде - использует любой доступный порт. Нигде указания не нашел, какие именно у них порты. Поробовал так - ничего не работает, к сожалению ( Во всяком случае в режиме fake который для квика у меня норм работает</p></td><td>2024-10-08T10:29:46.299Z</td></tr><tr><td>lxpcfc</td><td><p>udp/50000-65535 для войса и tcp/443 для подключения, если верить реддиту</p></td><td>2024-10-08T10:51:13.464Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>А зачем указывать fake-tls, если не используется стратегия fake?</p></td><td>2024-10-08T12:11:17.127Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="zirf0" data-post="1044" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zirf0/48/9371_2.png" class="avatar"> zirf0:</div>
<blockquote>
<p>NFQWS_OPT_DESYNC_HTTPS=“–dpi-desync=split2 --dpi-desync-ttl=4 --dpi-desync-split-seqovl=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</p>
</blockquote>
</aside>
<p>fake-tls в этом конфиге не работает</p></td><td>2024-10-08T12:44:28.654Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="wigeance" data-post="1047" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>filter-udp=1-65535, но лучше посмотрите отдельно нужные порты, чтобы весь трафик не гнать</p>
</blockquote>
</aside>
<p>это не сработает<br>
filter относится к профилям<br>
этап захвата контролируется на винде через --wf</p></td><td>2024-10-08T12:46:17.699Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> я не совсем понял, как через zapret пропускать udp трафик? Судя по тестам blockchek блокировка discord по quic обходится простым nfqws --dpi-desync=fake<br>
Т.е. в теории блокировку войса этим тоже можно обойти.</p></td><td>2024-10-08T13:59:35.003Z</td></tr><tr><td>bolvan</td><td><p>если используется система запуска, то простейший вариант - изменить QUIC_PORTS</p></td><td>2024-10-08T15:51:29.469Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Увы, войс не заработал, значит нужен какой-то другой метод. Мне пока не понятно, как они вообще его блокируют.</p></td><td>2024-10-08T16:17:54.225Z</td></tr><tr><td>iassasin</td><td><p>По поводу блокировки войса. Немного инфы, как это работает в браузерном клиенте дискорда:</p>
<ol>
<li>При заходе в войс чат идет коммуникация, видимо, с сигнальным сервером по адресу *.discord.media. Например, russia12345.discord.media</li>
<li>Коммуникация идет по websocket-протоколу, где одним из пакетов прилетает айпишник (не домен) stun-сервера, через который дискорд хочет направить наш голос. Выглядит это сообщение по вебсокету как-то так:<br>
<img src="zapret-обсуждение-726/0f0c67b1ef25c646bf06cf95f547d96e6b9bc25b.png" alt="image" data-base62-sha1="297JRGxoZLn1xKap1dBbgnudbp9" width="343" height="306"></li>
<li>Летят пакеты на STUN сервер по указанному айпи. И вот тут для примера разница между трафиком, прошедшим через vpn и без него:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/7ba4008997b215a4176a09f504bd02e853b057da.png" data-download-href="https://ntc.party/uploads/default/7ba4008997b215a4176a09f504bd02e853b057da" title="image"><img src="zapret-обсуждение-726/7ba4008997b215a4176a09f504bd02e853b057da_2_690x100.png" alt="image" data-base62-sha1="hDM6j6b76s43SZwN0KECALrX8rU" width="690" height="100" srcset="zapret-обсуждение-726/7ba4008997b215a4176a09f504bd02e853b057da_2_690x100.png, zapret-обсуждение-726/7ba4008997b215a4176a09f504bd02e853b057da_2_1035x150.png 1.5x, zapret-обсуждение-726/7ba4008997b215a4176a09f504bd02e853b057da_2_1380x200.png 2x" data-dominant-color="CEE1F0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1893×277 85.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></li>
</ol>
<p>Судя по всему, блочатся именно STUN запросы, т.к. на одном из адресе STUN сервера есть http-сервер заглушка на 80 порту, и он отвечает одинаково что через vpn, что без.</p></td><td>2024-10-08T18:00:15.413Z</td></tr><tr><td>easyone11</td><td><p>QUIC_PORTS=50000-65535<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake,tamper --dpi-desync-any-protocol”<br>
MODE_QUIC=1</p></td><td>2024-10-08T18:23:05.414Z</td></tr><tr><td>Bronner(Roman)</td><td><p>Войс заработал с <code>--dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol</code> и еще накинуть фильтр по UDP 50000-65535</p></td><td>2024-10-08T18:24:31.813Z</td></tr><tr><td>0x7f</td><td><blockquote>
<p>накинуть фильтр по UDP 50000-65535<br>
можно строчку в конфиге как это должно выглядеть?</p>
</blockquote></td><td>2024-10-08T18:47:32.775Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Пасибо, работает <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"><br>
<a class="mention" href="/u/0x7f">@0x7f</a> у меня так</p>
<pre><code class="lang-auto">"winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --hostlist-exclude=exclude.txt
</code></pre>
<p>первое это про дискорд как раз и указание в целом с какими портами и прочим работать, второе после new - все остальные https сайты.</p></td><td>2024-10-08T19:09:05.390Z</td></tr><tr><td>Bronner(Roman)</td><td><aside class="quote no-group quote-modified" data-username="0x7f" data-post="1059" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/0x7f/48/14192_2.png" class="avatar"> 0x7f:</div>
<blockquote>
<blockquote>
<p>можно строчку в конфиге как это должно выглядеть?</p>
</blockquote>
</blockquote>
</aside>
<p>Под winws полагаю?<br>
<code>--wf-udp=443,50000-65535</code> и в пресет <code>--filter-udp=50000-65535</code> про все параметры в readme.txt почитать можно</p></td><td>2024-10-08T19:11:41.400Z</td></tr><tr><td>Witch3er988(Александр)</td><td><p>Есть гайд для тех кто понимает чуть меньше чем айтишник как и где что сделать, чтобы обойти блок войса и дс чтоб загружался и работал штатно?</p></td><td>2024-10-08T19:53:21.502Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Спасибо, себе поставил, все завелось<br>
И вопрос, а разве это не будет относиться ко всему udp трафику? я спрашиваю в плане того, что не похерит ли это качество соединения, например, в онлайн-играх, использующих udp(если такие есть)?</p></td><td>2024-10-08T20:33:12.194Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>По идее не будет.  И вообще это не vpn же, чтоб увеличивать задержки. Но на всякий можно вписать во вторую часть <code>--filter-udp=443 --filter-tcp=443</code> чтоб остальные порты не трогало.</p></td><td>2024-10-08T20:45:11.995Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Спасибо за ответ, с --filter-tcp=443 дискорд вообще не запускается(с --filter-udp=443 все нормально), но теперь другая проблема. При ручном запуске через консоль все работает хорошо, но если пытаться через автозапуск (создать службу или задачу), отваливается голосовой чат, причем остальное нормально работает</p></td><td>2024-10-08T22:07:10.332Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А можно глянуть что у вас указано в службе? Найти можно через редактор реестра (regedit) тут <code>Computer\HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\ваше-название-службы\</code> и ключ <code>ImagePath</code></p></td><td>2024-10-08T22:15:13.554Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Её вообще нет как оказалось, в дискорд пускало потому что я забыл отключить гудбай, но теперь другой вопрос, почему не создается ни служба, ни задача (все запускаю по инструкции и от админа)</p></td><td>2024-10-08T22:25:18.666Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А чёрт его знает. Я готовые скрипты не использовал и службу вручную устанавливал =)<br>
Ну раз службы нет - то как выглядит команда в консоли полностью?</p></td><td>2024-10-08T22:29:08.684Z</td></tr><tr><td>Thelum(Vlad)</td><td><pre><code class="lang-auto">"winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=443 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --hostlist=list-discord.txt
</code></pre></td><td>2024-10-08T22:35:02.038Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Thelum" data-post="1069" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/thelum/48/10247_2.png" class="avatar"> Thelum:</div>
<blockquote>
<p><code>--new </code></p>
</blockquote>
</aside>
<p>После --new наверно фильтра не хватает?</p>
<pre><code class="lang-auto"> --new --filter-tcp=443
</code></pre></td><td>2024-10-08T22:38:40.778Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Так вручную если запускать через консоль, то все хорошо работает, проблема в том что не создаются ни службы, ни задачи (все параметры те же)</p></td><td>2024-10-08T22:40:16.664Z</td></tr><tr><td>arinoki(Arinoki)</td><td><pre><code class="lang-auto">sc create "winws" binPath= "с:\полный-путь-до-exe\winws.exe --wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=443 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --hostlist=list-discord.txt" start= "auto"
sc start winws
</code></pre>
<p>Путь желательно чтобы был без пробелов и без кириллицы. Если мало ли не будет работать - то и до bin-файла и до txt файла полные пути (у меня лично полные прописаны, но не факт, то это нужно).</p></td><td>2024-10-08T22:48:06.095Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Спасибо, в службах появилась, но все равно работать не хочет, только через ручной запуск<br>
Интересно, что в службах она есть, но статус “Остановлена” и вручную из контекстного меню не запускается. Видимо у меня какие-то проблемы с виндой, буду фиксить. В любом случае, спасибо вам большое за помощь</p></td><td>2024-10-08T23:08:30.639Z</td></tr><tr><td>nyahnem(Nyahnem)</td><td><p>Подскажите пожалуйста как победить ошибку в командной строке? Не запускается совсем</p>
<pre><code class="lang-auto">Could not open list-youtube.txt
Include hostlists load failed
could not read tls_clienthello_www_google_com.bin
</code></pre></td><td>2024-10-08T23:25:01.166Z</td></tr><tr><td>Sto3IV(Sto3IV)</td><td><p><code>"winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=443 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --hostlist=list-discord.txt</code><br>
Не помогло. В сам файл list-discord.txt адреса серверов дискорда прописаны.</p>
<p>Можно для глупеньких пошагово как заставить войс работать?<br>
Чаты и гиффки с помощью GoodByeDPI уже заработали.</p></td><td>2024-10-09T01:48:17.740Z</td></tr><tr><td>Cheeck</td><td><p>У вас этих файлов нет. Качайте последнюю версию проги.</p></td><td>2024-10-09T02:10:49.259Z</td></tr><tr><td>Cheeck</td><td><p>Укажите полный путь ко всем файлам, иначе служба не запустится.</p></td><td>2024-10-09T02:13:25.625Z</td></tr><tr><td>Cheeck</td><td><p>Параллельно с GoodByeDPI запускаете? А они точно не конфликтуют?</p></td><td>2024-10-09T02:16:27.247Z</td></tr><tr><td>nyahnem(Nyahnem)</td><td><p>Они есть в папке<br>
<img src="zapret-обсуждение-726/fde3290c5f07b9643faaf134f327ce68ec8e6655.png" alt="image" data-base62-sha1="AdZuj14pOfzDoGvfAwgsqm2wg4Z" width="369" height="296"></p></td><td>2024-10-09T02:38:04.331Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Окей, а команда какая?</p></td><td>2024-10-09T02:51:28.271Z</td></tr><tr><td>nyahnem(Nyahnem)</td><td><pre><code class="lang-auto">--wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=D:\zapret-win-bundle-master\zapret-winws\tls_clienthello_www_google_com.bin --hostlist=D:\zapret-win-bundle-master\zapret-winws\list-youtube.txt"
</code></pre>
<p>вот с путем к файлу, но что с ним что без него одно и то же, может я криво вписываю?</p></td><td>2024-10-09T02:58:24.196Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/0f7e93225a28590cd8048ecea406439c8393c3e1.png" data-download-href="https://ntc.party/uploads/default/0f7e93225a28590cd8048ecea406439c8393c3e1" title="image"><img src="zapret-обсуждение-726/0f7e93225a28590cd8048ecea406439c8393c3e1.png" alt="image" data-base62-sha1="2d4lwBKO08PjHo5raiYPjdL8Xnj" width="690" height="436" data-dominant-color="202020"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">753×476 28.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Ну вот вам для примера. Может поймёте что у вас не так =) txt у меня другой - я туда чисто гос. услуги прописал, ибо они почему-то с zapret’ом не грузятся. А ютубовский список мне не нужен.</p></td><td>2024-10-09T03:08:36.258Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Спасибо за ответ.</p>
<pre><code class="lang-auto">MODE_QUIC=1
QUIC_PORTS=443,444,50000-65535
NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol"
</code></pre>
<p>У меня сейчас такой конфиг. Но войс так и не работает, пытается подключиться, но не может.</p></td><td>2024-10-09T03:24:45.651Z</td></tr><tr><td>Sto3IV(Sto3IV)</td><td><p>И без него тоже были попытки. Но не помогло.</p></td><td>2024-10-09T03:32:12.161Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="MrCapone" data-post="1083" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mrcapone/48/1917_2.png" class="avatar"> MrCapone:</div>
<blockquote>
<p>У меня сейчас такой конфиг. Но войс так и не работает, пытается подключиться, но не может.</p>
</blockquote>
</aside>
<p>не входится в диск или не работает войс?</p></td><td>2024-10-09T03:36:11.834Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Только войс не работает.</p></td><td>2024-10-09T03:37:11.121Z</td></tr><tr><td>easyone11</td><td><p>пробовал и через прилу и через браузер?<br>
если и там и там проблема, можно попробовать блокчеком <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> прогнать и попробовать попроще стратегию для NFQWS_OPT_DESYNC<br>
например --dpi-desync=fake,disorder --dpi-desync-ttl=1 --dpi-desync-fake-http=0x00000000</p></td><td>2024-10-09T03:48:53.060Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Пробовал и приложение и веб. И так и там сам дискорд пашет, но при попытке зайти на любой войс канал зависает на “проверка маршрутов”.<br>
NFQWS_OPT_DESYNC разве связан с войсом?</p></td><td>2024-10-09T03:59:21.798Z</td></tr><tr><td>easyone11</td><td><p>я думал что нет и возможно действтильено нет, но у меня с одной стратегией не работает в браузере войс, но работает в приле, а с другой работает и там и там, может чисто мой глюк хз<br>
ну как минимум это не сложно тебе проверить, что еще предложить хз<br>
<a href="https://github.com/bol-van/zapret/discussions/456" class="inline-onebox" rel="noopener nofollow ugc">Discord UDP · bol-van/zapret · Discussion #456 · GitHub</a> тут еще что то можно почитать</p></td><td>2024-10-09T04:01:43.511Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>а фильтр идёт по хостлисту?</p></td><td>2024-10-09T04:07:14.586Z</td></tr><tr><td>easyone11</td><td><p>autohostlist юзаю</p></td><td>2024-10-09T04:07:41.932Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><aside class="quote no-group" data-username="easyone11" data-post="1091" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>autohostlist</p>
</blockquote>
</aside>
<p>И это оказалось ответом на вопрос, с ним заработало.</p></td><td>2024-10-09T04:11:42.169Z</td></tr><tr><td>easyone11</td><td><p>получается у тебя не было в списке для дурения нужного адреса?<br>
а посмотри opt\zapret\ipset\zapret-hosts-auto.txt<br>
что туда добавилось<br>
ps<br>
у меня там нет новых хостов<br>
а для ауто я прописывал</p>
<details>
<summary>
Спойлер</summary>
<p><a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a><br>
<a href="http://discord-attachments-uploads-prd.storage.googleapis.com" rel="noopener nofollow ugc">discord-attachments-uploads-prd.storage.googleapis.com</a><br>
dis.gd<br>
<a href="http://discord.co" rel="noopener nofollow ugc">discord.co</a><br>
discord.design<br>
discord.dev<br>
discord.gg<br>
discord.gift<br>
discord.gifts<br>
discord.media<br>
discord.new<br>
discord.store<br>
discord.tools<br>
<a href="http://discordapp.com" rel="noopener nofollow ugc">discordapp.com</a><br>
<a href="http://discordapp.net" rel="noopener nofollow ugc">discordapp.net</a><br>
<a href="http://discordmerch.com" rel="noopener nofollow ugc">discordmerch.com</a><br>
<a href="http://discordpartygames.com" rel="noopener nofollow ugc">discordpartygames.com</a><br>
<a href="http://discord-activities.com" rel="noopener nofollow ugc">discord-activities.com</a><br>
<a href="http://discordactivities.com" rel="noopener nofollow ugc">discordactivities.com</a><br>
<a href="http://discordsays.com" rel="noopener nofollow ugc">discordsays.com</a></p>
</details></td><td>2024-10-09T04:13:05.978Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>На удивление там пусто. Я хз что помогло на самом деле. Я ещё дописывал <a href="http://discord-attachments-uploads-prd.storage.googleapis.com" rel="noopener nofollow ugc">discord-attachments-uploads-prd.storage.googleapis.com</a> и сделал заново изи инстал, не меняя никакие параметры.</p></td><td>2024-10-09T04:15:54.993Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="MrCapone" data-post="1092" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mrcapone/48/1917_2.png" class="avatar"> MrCapone:</div>
<blockquote>
<p>И это оказалось ответом на вопрос, с ним заработало.</p>
</blockquote>
</aside>
<p>ну значит это не ответ на вопрос</p></td><td>2024-10-09T04:16:37.039Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Во всяком случае у меня сейчас такие параметры:</p>
<pre><code class="lang-auto">QUIC_PORTS=443,444,50000-65535
MODE=nfqws
MODE_QUIC=1
MODE_FILTER=autohostlist
NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol" 
</code></pre>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">root@OpenWrt:/opt/zapret# cat /opt/zapret/ipset/zapret-hosts-user.txt
googlevideo.com
gvt1.com
video.google.com
youtube-nocookie.com
youtube-ui.l.google.com
youtubeeducation.com
googleapis.com
youtubekids.com
yt3.ggpht.com
ytimg.com
youtu.be
yt.be
youtube.com
dis.gd
discord.co
discord.com
discord.design
discord.dev
discord.gg
discord.gift
discord.gifts
discord.media
discord.new
discord.store
discord.tools
discordapp.com
discordapp.net
discordmerch.com
discordpartygames.com
discord-activities.com
discordactivities.com
discordsays.com
discordstatus.com
airhorn.solutions
airhornbot.com
bigbeans.solutions
watchanimeattheoffice.com
discordapp.io
discordcdn.com
discord-attachments-uploads-prd.storage.googleapis.com
</code></pre>
</details>
<p><strong>UPD</strong></p>
<p>У друга так же ничего не работало. Он так же через изи инсталл сменил на автохостлист. Так что либо это изи инсталл всё исправил, либо автохостлист.</p></td><td>2024-10-09T04:28:03.695Z</td></tr><tr><td>bolvan</td><td><p>засовывание дурилки в куик это чреватый проблемами костыль<br>
вам хочется проще,но время простых конфигов уходит<br>
пишите скрипты custom или отдельный запуск<br>
иначе вы попортите mode_filter<br>
и изнасилуете торенты</p>
<p>костыль для дискорда с куик не будет работать с любым mode_filter, кроме none, если кто не догнал</p></td><td>2024-10-09T04:59:39.337Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Не заметил проблем с торрентами со своим конфигом. Но может в будущем появятся.</p><aside class="quote quote-modified" data-post="1082" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1082">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    <a class="lightbox" href="zapret-обсуждение-726/0f7e93225a28590cd8048ecea406439c8393c3e1.png" data-download-href="https://ntc.party/uploads/default/0f7e93225a28590cd8048ecea406439c8393c3e1" title="image">[image]</a> 
Ну вот вам для примера. Может поймёте что у вас не так =) txt у меня другой - я туда чисто гос. услуги прописал, ибо они почему-то с zapret’ом не грузятся. А ютубовский список мне не нужен.
  </blockquote>
</aside>
</td><td>2024-10-09T05:03:48.359Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="nyahnem" data-post="1081" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/nyahnem/48/10253_2.png" class="avatar"> nyahnem:</div>
<blockquote>
<p><code>--wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=50000-65535</code></p>
</blockquote>
</aside>
<p>этот крайне нерационально тащить из ядра весь удп, чтобы фильтровать порты в user mode</p></td><td>2024-10-09T05:05:01.926Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>В данный момент всё работает с</p>
<pre><code class="lang-auto">MODE_FILTER=autohostlist
</code></pre>
<p>С торрентами пока что проблем не наблюдал, продолжаю тестировать.</p></td><td>2024-10-09T05:05:14.861Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А чем это плохо-то?</p></td><td>2024-10-09T05:07:20.794Z</td></tr><tr><td>bolvan</td><td><p>это затычка и неправильный режим работы<br>
работает только из-за any protocol<br>
будет гадить фейками на весь удп с верхних портов и что-то обязательно попортит<br>
а потом будете ловить трэш, который не сможете ни обьяснить, ни исправить</p></td><td>2024-10-09T05:10:13.372Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Ну попортит и попортит, для меня это не является критичным. Буду следить за темой, в ожидании возможно лучшего решения.</p></td><td>2024-10-09T05:13:56.648Z</td></tr><tr><td>bolvan</td><td><p>беда в том, что трэш распространяется, а потом куча иссуес и вопросов</p></td><td>2024-10-09T05:15:01.403Z</td></tr><tr><td>bolvan</td><td><p>собираюсь делать ipset фильтр для профилей<br>
для винды и линухов без поддержки ипсет в ядре<br>
назрело<br>
загнать туда диапазоны дискорда и порты проставить, и будет адекватный фильтр<br>
но если есть ипсеты в ядре или нфтаблес или бсд - это и сейчас уже можно<br>
более того, это правильно фильтровать в ядре.</p></td><td>2024-10-09T05:17:17.699Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Чем больше блокировок, тем больше такого будет, ничего не поделать. Для меня не является чем-то новым, когда подобные обходы блокировок что-то ломают. Постоянно ищу способы лучше, откатываюсь к старым конфигам, работоспособностью чего-то приходится жертвовать.</p></td><td>2024-10-09T05:17:26.891Z</td></tr><tr><td>bolvan</td><td><p>это так, но одно дело, когда меняются внешние условия, а другое - гадание на костылях заведомо ущербных<br>
когда есть решение более правильное, хоть и более сложное</p></td><td>2024-10-09T05:19:29.912Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>Я пока не смог понять что за более сложное решение. Писать самостоятельно скрипт запуска?</p></td><td>2024-10-09T05:35:20.020Z</td></tr><tr><td>userosos(Userosos)</td><td><aside class="quote no-group" data-username="MrCapone" data-post="1096" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mrcapone/48/1917_2.png" class="avatar"> MrCapone:</div>
<blockquote>
<p>Во всяком случае у меня сейчас такие параметры:</p>
<pre><code class="lang-auto">QUIC_PORTS=443,444,50000-65535
MODE=nfqws
MODE_QUIC=1
MODE_FILTER=autohostlist
NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol" 
</code></pre>
<p>Спойлер</p>
<pre><code class="lang-auto">root@OpenWrt:/opt/zapret# cat /opt/zapret/ipset/zapret-hosts-user.txt
googlevideo.com
gvt1.com
video.google.com
youtube-nocookie.com
youtube-ui.l.google.com
youtubeeducation.com
googleapis.com
youtubekids.com
yt3.ggpht.com
ytimg.com
youtu.be
yt.be
youtube.com
dis.gd
discord.co
discord.com
discord.design
discord.dev
discord.gg
discord.gift
discord.gifts
discord.media
discord.new
discord.store
discord.tools
discordapp.com
discordapp.net
discordmerch.com
discordpartygames.com
discord-activities.com
discordactivities.com
discordsays.com
discordstatus.com
airhorn.solutions
airhornbot.com
bigbeans.solutions
watchanimeattheoffice.com
discordapp.io
discordcdn.com
discord-attachments-uploads-prd.storage.googleapis.com
</code></pre>
<p><strong>UPD</strong></p>
<p>У друга так же ничего не работало. Он так же через изи инсталл сменил на автохостлист. Так что либо это изи инсталл всё исправил, либо автохостлист.</p>
</blockquote>
</aside>
<p>А теперь бы увидеть содержимое файла zapret-hosts-auto.txt Или с подобным названием?</p></td><td>2024-10-09T06:18:31.321Z</td></tr><tr><td>bolvan</td><td><p>кастом скрипт в системе запуска запрета<br>
или отдельный инстанс и отдельные таблес вне системы запуска<br>
ипсет тоже самому вести<br>
в опенврт фиксированый сет можно прямо в /etc/config/firewall накидать</p>
<p>не стоит себя приучать к костылям<br>
это выйдет боком по мере развития точечных спец блоков<br>
а проводить каждый высер ркн в конфиг я не стану<br>
только общие недостатки функционала буду дописывать. как сейчас нужен ипсет в самой проге для некоторых систем</p></td><td>2024-10-09T06:43:59.466Z</td></tr><tr><td>userosos(Userosos)</td><td><p>Вот бы заготовочку с пояснениями для тупеньких. Особенно интересно в openwrt.</p></td><td>2024-10-09T06:48:41.646Z</td></tr><tr><td>bolvan</td><td><p>в ближайшее время не до этого<br>
придется ставить этот дискорд и все самому исследовать и проверять. а за это время народ уже накидал суть блокировки<br>
и способ обхода в сути своей, а не куда ткнуть<br>
стун блочат, его и надо дурить фейками на диапазоне ип и портов</p></td><td>2024-10-09T06:52:46.764Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><aside class="quote no-group" data-username="userosos" data-post="1109" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/userosos/48/5455_2.png" class="avatar"> userosos:</div>
<blockquote>
<p>zapret-hosts-auto.txt</p>
</blockquote>
</aside>
<p>zapret-hosts-auto.txt у меня пустой</p></td><td>2024-10-09T06:54:33.343Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>так я не знаю диапазона ip того же дискорда</p></td><td>2024-10-09T06:55:14.038Z</td></tr><tr><td>userosos(Userosos)</td><td><p>Тогда судя по всему не это помогает.</p></td><td>2024-10-09T06:55:36.268Z</td></tr><tr><td>MrCapone(Dmitry Lukianov)</td><td><p>скорее всего именно это и помогает, как я понял, из-за этого обрабатывается весь udp трафик в диапазоне портов</p></td><td>2024-10-09T06:56:24.675Z</td></tr><tr><td>bolvan</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/bol-van/zapret/discussions/456#discussioncomment-10886817">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/bol-van/zapret/discussions/456#discussioncomment-10886817" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/5a5fe5af0e9441d6dbfcf0eaf77a62c0cea2103b_2_690x345.png" class="thumbnail" data-dominant-color="F3F5F5" width="690" height="345"></div>

<h3><a href="https://github.com/bol-van/zapret/discussions/456#discussioncomment-10886817" target="_blank" rel="noopener">Discord UDP · bol-van/zapret · Discussion #456</a></h3>

  <p>Новая проблема. Discord заблокировали. В нем используется UDP пакеты, я так понимаю с UDP есть некие нюансы. Кто уже пробовал?</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-09T07:02:43.252Z</td></tr><tr><td>dartraiden(Alexander Gavrilov)</td><td><p>Как, всё-таки правильно указывать: <code>--dpi-desync-any-protocol</code> или <code>--dpi-desync-any-protocol=1</code>?</p>
<p>В ридми второй вариант, но у пользователей вижу частенько первый в конфиге.</p></td><td>2024-10-09T07:10:04.034Z</td></tr><tr><td>bolvan</td><td><p>–dpi-desync-any-protocol достаточно</p></td><td>2024-10-09T07:14:37.727Z</td></tr><tr><td>sharn1(sharn1)</td><td><p><s>Призываю, всех кто на костылях, хотя бы “дурить” только 3478 (STUN) порт, а не 50000-65535.</s><br>
Не работает, работало только из-за зависшего правила в iptables.</p></td><td>2024-10-09T08:42:34.926Z</td></tr><tr><td>dima</td><td><p>А если unsupported MODE=nfqws под mac m1 то никак не запустить обход дискорда?</p></td><td>2024-10-09T09:02:21.589Z</td></tr><tr><td>bolvan</td><td><p>невозможно, в ядре нет divert</p></td><td>2024-10-09T09:19:44.707Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Возможно не очень корректный вопрос, но откуда все скачивают архив со всеми файлами и конфигами для винды?<br>
<a href="https://github.com/ImMALWARE/zapret-windows-build" class="inline-onebox" rel="noopener nofollow ugc">GitHub - ImMALWARE/zapret-windows-build: Сборка https://github.com/bol-van/zapret</a> ?<br>
есть еще <a href="https://github.com/Flowseal/zapret-discord-youtube" rel="noopener nofollow ugc">https://github.com/Flowseal/zapret-discord-youtube</a><br>
но там только ютуб и дискорд файлы.</p></td><td>2024-10-09T09:32:22.432Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/bol-van/zapret-win-bundle">
  <header class="source">

      <a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/f34226ef2f14c0cecb3506756c24316198e1b277_2_690x344.png" class="thumbnail" data-dominant-color="EEF4EE">

  <h3><a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener nofollow ugc">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a></h3>

    <p><span class="github-repo-description">zapret and blockcheck binary bundle for windows</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-09T09:55:44.706Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p><a class="mention" href="/u/arinoki">@arinoki</a></p>
<p>Спасибо. не сразу увидел download zip</p></td><td>2024-10-09T10:53:42.604Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А если в service_create.cmd прописать так?</p>
<pre><code class="lang-auto">set ARGS=--wf-l3=ipv4 --wf-tcp=443 --wf-udp=1-65535 --filter-udp=443 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-repeats=6 --dpi-desync-any-protocol --new --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=%~dps0tls_clienthello_www_google_com.bin --hostlist=%~dps0list-discord.txt
call :srvinst winws1
goto :eof

:srvinst
net stop %1
sc delete %1
sc create %1 binPath= "%~dps0winws.exe %ARGS%" DisplayName= "zapret DPI bypass : %1" start= auto
sc description %1 "zapret DPI bypass software"
sc start %1
</code></pre></td><td>2024-10-09T11:44:36.839Z</td></tr><tr><td>Thelum(Vlad)</td><td><p>Служба установилась и работает, но в дискорд не пускает (я уже по-другому сделал, так что не актуально), но спасибо за помощь</p></td><td>2024-10-09T12:21:02.358Z</td></tr><tr><td>ech0brav0</td><td><p>Всем привет. Подскажите, пожалуйста, как отформатировать команду для запуска winws под entware keenetic:</p>
<pre><code class="lang-auto">start "zapret: discord" /min "%~dp0winws.exe" --wf-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin"
</code></pre></td><td>2024-10-09T15:42:49.782Z</td></tr><tr><td>RandomNamelessUser(Random Nameless User)</td><td><p>После вчерашнего/сегодняшнего обновления файрфокса внезапно перестали нормально грузиться видео на ютубе. Задержка перед запуском может аж почти до минуты доходить, и при перемотке часто не успевает прогружать, подвисая на несколько секунд.</p>
<p>В хроме всё как грузилось, так и грузится нормально. В обоих браузерах DoH настроен на Клаудлэер, в обоих QUIC включён, в обоих Kyber отключён. Сброс кэша ДНС и вообще всего кэша файрфокса ничего не меняет. Отключение QUIC в файрфоксе ничего не меняет. Дополнительно проверил в опере, и там тоже всё нормально. Стратегия обхода, очевидно, работает как прежде, раз для хрома и оперы вообще ничего не изменилось.</p>
<p>Кто-нибудь в курсе, что там в текущей версии файрфокса (131.0.2) изменили, что может на работу запрета так влиять?</p></td><td>2024-10-10T08:36:48.135Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><p>Сегодня опять перестало грузить… РСТ</p></td><td>2024-10-10T08:43:40.179Z</td></tr><tr><td>partyhard</td><td><p>Подтверждаю, такая же проблема. В консоли браузера видно, что сначала стучится на локальный ggc, потом на московский, оттуда уже работает. В хроме грузит сразу (но не упел посмотреть с какого сервера, дело было в ночи и сейчас я не у проблемной машины).<br>
На первый взгляд есть разница в стратегиях: для QUIC у меня выставлен принудительный ttl, для tcp/443 - авто ttl. В обоих браузерах QUIC включен если что.<br>
Возможно, что у хрома и огнелиса разные приоритеты работы с QUIC?</p></td><td>2024-10-10T08:55:51.702Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>На моем основном прове стабильный YT, похоже, пропал.</p>
<p>Доступны только 2 провайдерских сервака <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> по tls и то блокчек находит гораздо меньше рабочих стратегий для них. Еще обычно YT пытался подключаться к московским и калифорнийским. Последние вчера прекрасно работали по quic. Теперь все. Не соединяется больше никак, и блокчек не находит ничего.</p>
<p>Просмотр выглядит так. Запускаешь ролик и ждешь до 5-50 секунд. Во вкладке network в это время браузер безуспешно пытается подключиться сначала к провайдерским, затем к остальным сервакам <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>. После этой задержки, наконец, получается к провайдерским. Если ролик несмотренный ранее, то загрузит лишь 19 секунд и встанет колом. Обновление страницы позволит смотреть дальше. Со смотренными раньше роликами может как позволить смотреть его весь, а может показать только следующие 19 секунд до обновления страницы.</p>
<p>P.S.: ощущение, будто во время озвученной задержки местный сервак кэширует запрошенное видео с калифорнийского и затем только позволяет смотреть.</p></td><td>2024-10-10T09:06:18.019Z</td></tr><tr><td>RandomNamelessUser(Random Nameless User)</td><td><p>У файрфокса откуда-то появились какие-то нереальные пинги до всех GGC, что использовались во всех видео, на которых сейчас проверял.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/edea304a145bea63c4e322da23dba05dc09326a1.jpeg" data-download-href="https://ntc.party/uploads/default/edea304a145bea63c4e322da23dba05dc09326a1" title="screenshot-01"><img src="zapret-обсуждение-726/edea304a145bea63c4e322da23dba05dc09326a1_2_690x322.jpeg" alt="screenshot-01" data-base62-sha1="xWGUfKsKsmHtSbXi0pd7MmgyV0d" width="690" height="322" srcset="zapret-обсуждение-726/edea304a145bea63c4e322da23dba05dc09326a1_2_690x322.jpeg, zapret-обсуждение-726/edea304a145bea63c4e322da23dba05dc09326a1_2_1035x483.jpeg 1.5x, zapret-обсуждение-726/edea304a145bea63c4e322da23dba05dc09326a1_2_1380x644.jpeg 2x" data-dominant-color="DDD1CF"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">screenshot-01</span><span class="informations">1920×898 220 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>При этом в хроме и опере с теми же самыми GGC проблемы и близко нет.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f12994c6dfd2179876da73e13b79843000de707f.jpeg" data-download-href="https://ntc.party/uploads/default/f12994c6dfd2179876da73e13b79843000de707f" title="screenshot-02"><img src="zapret-обсуждение-726/f12994c6dfd2179876da73e13b79843000de707f_2_690x460.jpeg" alt="screenshot-02" data-base62-sha1="ypq9LOUx0AKv9hJp3FVQxz3p0Sz" width="690" height="460" srcset="zapret-обсуждение-726/f12994c6dfd2179876da73e13b79843000de707f_2_690x460.jpeg, zapret-обсуждение-726/f12994c6dfd2179876da73e13b79843000de707f_2_1035x690.jpeg 1.5x, zapret-обсуждение-726/f12994c6dfd2179876da73e13b79843000de707f_2_1380x920.jpeg 2x" data-dominant-color="E6E0E0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">screenshot-02</span><span class="informations">1919×1280 318 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-10T09:07:26.784Z</td></tr><tr><td>partyhard</td><td><p>На ваших скриншотах задержки одинаковые до rr2-* (&gt;5 секунд) и до rr12-* (десятки мс).<br>
PS: ну и свой ip я бы, как старый параноик, замазал <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-10T09:12:31.353Z</td></tr><tr><td>RandomNamelessUser(Random Nameless User)</td><td><p>Неудачно попал в какой-то разовый подлаг, и даже не посмотрел.<br>
Вот так в остальные моменты (видео то же самое):<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b.png" data-download-href="https://ntc.party/uploads/default/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b" title="screenshot-03"><img src="zapret-обсуждение-726/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b_2_690x258.png" alt="screenshot-03" data-base62-sha1="huM1acrZCVwTEuKbJ6SbujqX8QH" width="690" height="258" srcset="zapret-обсуждение-726/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b_2_690x258.png, zapret-обсуждение-726/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b_2_1035x387.png 1.5x, zapret-обсуждение-726/7a9f84ce17f3ed67756cd0046e2ebb0a8046974b_2_1380x516.png 2x" data-dominant-color="F1E9EB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">screenshot-03</span><span class="informations">1920×720 115 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-10T09:20:22.171Z</td></tr><tr><td>spv82</td><td><p>На гитхабе пишут, что помогает увеличить кол-во повторов <code>--dpi-desync-repeats=20</code></p></td><td>2024-10-10T09:22:26.947Z</td></tr><tr><td>partyhard</td><td><p>Да, действительно одинаково.<br>
В файрфоксе последнее обновление - это security fix, непонятно как он мог повлиять.</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.mozilla.org/en-US/security/advisories/mfsa2024-51/">
  <header class="source">
      <img src="zapret-обсуждение-726/c51817497988880f5a25d1b53a6fe4e4c1dd2794.png" class="site-icon" data-dominant-color="404040" width="196" height="196">

      <a href="https://www.mozilla.org/en-US/security/advisories/mfsa2024-51/" target="_blank" rel="noopener nofollow ugc">Mozilla</a>
  </header>

  <article class="onebox-body">
    <img width="256" height="256" src="zapret-обсуждение-726/dc921025a15ce98bc5da8e95ff6105f157a3ca53.jpeg" class="thumbnail onebox-avatar" data-dominant-color="CFCFCF">

<h3><a href="https://www.mozilla.org/en-US/security/advisories/mfsa2024-51/" target="_blank" rel="noopener nofollow ugc">Security Vulnerability fixed in Firefox 131.0.2, Firefox ESR 128.3.1, Firefox...</a></h3>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-10T09:24:03.260Z</td></tr><tr><td>disappointed</td><td><p>9-10 хватает, действительно похоже увеличили окно поиска и сделали его каким-то типа случайным до этого значения, потому что без повторов получается какой-то процент когда блочится коннект.</p></td><td>2024-10-10T10:51:25.531Z</td></tr><tr><td>myzmike</td><td><p>Всем здравствуйте. Надеюсь, автор читает этот топик, потому зарегистрировался здесь. Регистрацию на GitHub победить не сумел, капча просто выбесила.<br>
Столкнулся со странным глюком, когда настраивал zapret на старом роутере с OpenWRT 14.07 с iptables +fw3. Если запускать nfqws в консоли с параметром --debug, то все работает. Если запускать без этого параметра, то обход не работает, в логах пусто. Если демонизировать процесс, то не работает ни так, ни эдак. Что это может быть?</p></td><td>2024-10-10T14:25:31.090Z</td></tr><tr><td>electrifying</td><td><p>писали что и  7 хватает вполне</p></td><td>2024-10-10T14:46:05.111Z</td></tr><tr><td>disappointed</td><td><p>Может от локации зависит, есть нестабильность до 8, начиная с 9 всё ок.</p></td><td>2024-10-10T14:57:35.214Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="disappointed" data-post="1141" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>есть нестабильность до 8, начиная с 9 всё ок.</p>
</blockquote>
</aside>
<p>А в чем минус или проблема поставить побольше это значение, если все равно при правильном ttl эти пакеты до сервера назначения не дойдут. А нагрузка на dpi как-то не должна пользователей волновать. Может даже лучше будет если перенагруженная будет часть проверок пропускать.</p></td><td>2024-10-10T15:07:58.143Z</td></tr><tr><td>electrifying</td><td><p>на пк или мобилке/тв?</p></td><td>2024-10-10T15:08:13.675Z</td></tr><tr><td>disappointed</td><td><p>пк</p></td><td>2024-10-10T15:20:06.604Z</td></tr><tr><td>Dimadin27(Dimadin27)</td><td><p>Кстати, про регистрацию на Github, тоже мучился  с капчей, пока не указал забугорный e-mail, в моем случае гугловский <a href="http://Gmail.com" rel="noopener nofollow ugc">Gmail.com</a>.</p></td><td>2024-10-10T15:22:15.709Z</td></tr><tr><td>vegetable</td><td><p>Здраствуйте, помогите пожалуйста сделать стратегию с хостлистом ютуба<br>
–wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake,split --dpi-desync-ttl=2 --wssize 1:6 --dpi-desync-fake-tls=“D:\GoodCheck_v1.3.0\Payloads\tls_earth_google_com.bin” --dpi-desync-split-pos=1</p>
<p>При добавление --hostlist=“%~dp0list-youtube.txt” перестают воспроизводится видео, без нее ютуб работает без косяков</p></td><td>2024-10-10T15:29:36.529Z</td></tr><tr><td>myzmike</td><td><aside class="quote no-group" data-username="Dimadin27" data-post="1145" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/dimadin27/48/10558_2.png" class="avatar"> Dimadin27:</div>
<blockquote>
<p>Кстати, про регистрацию на Github, тоже мучился с капчей, пока не указал забугорный e-mail, в моем случае гугловский <a href="http://Gmail.com" rel="noopener nofollow ugc">Gmail.com</a>.</p>
</blockquote>
</aside>
<p>Кстати, помогло с gmail, спасибо за наводку. Уже открыл issue на гитхабе</p></td><td>2024-10-10T16:11:01.671Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="bolvan" data-post="150" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/150">Zapret: what's new</a></div>
<blockquote>
<p><strong>НЕСОВМЕСТИМОЕ ИЗМЕНЕНИЕ.</strong><br>
<strong>В новой концепции профилей методы нулевой фазы десинхронизации несовместимы с хост-листами и больше не применяются !</strong><br>
Ранее они применялись , игнорируя хостлист.<br>
Если у вас были стратегии с syndata или wssize и включен режим hostlist, то syndata и wssize не будут применены. Остальные методы 1 и 2 фазы будут применены как обычно.<br>
Если включен режим autohostlist, то syndata и wssize будут применяться, поскольку профиль с autohostlist приоритетен.</p>
</blockquote>
</aside>
<p>С хостлистами эта фича работать не будет, подбирайте другую стратегию блокчеком. То, что выдаст блокчек может быть отмечено как рабочая стратегия, но не будет стабильно запускаться видео. В этом случае стоит поэкспериментировать с dpi-desync-repeats</p></td><td>2024-10-10T16:24:45.209Z</td></tr><tr><td>vegetable</td><td><p>Понял, спасибо</p></td><td>2024-10-10T16:31:52.918Z</td></tr><tr><td>Ori</td><td><p>Мой окончательный вариант, с которым у меня работает ютуб (по квику и без), войс в дискорде, обычный http и https.</p>
<pre><code class="lang-auto">start "Zapret - Multi" /min "winws.exe" --wf-tcp=80,443 --wf-udp=443,50000-65535 ^
--filter-udp=443 --hostlist="googlevideo.txt" --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic="quic_ietf_google_com.bin" --new ^
--filter-tcp=443 --hostlist="googlevideo.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new ^
--filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n1 --new ^
--filter-tcp=80 --hostlist-auto="my_hostlist.txt" --hostlist-exclude="my_hostlist_exclude.txt" --dpi-desync=split --dpi-desync-fooling=badsum --new ^
--filter-udp=443 --hostlist-auto="my_hostlist.txt" --hostlist-exclude="my_hostlist_exclude.txt" --dpi-desync=fake --dpi-desync-repeats=11 --new ^
--filter-tcp=443 --hostlist-auto="my_hostlist.txt" --hostlist-exclude="my_hostlist_exclude.txt" --dpi-desync=fake,split2 --dpi-desync-fooling=badseq
</code></pre>
<p>Не уверен только правильно ли я настроил cutoff или как-то оптимальнее его нужно выставить? Ну или точнее я вообще не очень понимаю как его использовать. Конкретно есть 2 вопроса:</p>
<ul>
<li>чем меньше значение для cutoff, тем лучше? Чтобы не загаживать соединение.</li>
<li>для уменьшения количества мусора лучше n или d? Работает и то, и другое для дискорда.</li>
</ul></td><td>2024-10-10T17:42:20.902Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><p><a href="http://mail.proton.me" rel="noopener nofollow ugc">mail.proton.me</a> работает?</p></td><td>2024-10-10T17:47:42.158Z</td></tr><tr><td>Ori</td><td><p>Работает. С перенаправлением через etc/hosts. Он вроде по айпи заблочен, не помню уже, давно добавлял.</p>
<pre><code class="lang-auto">3.66.189.153 mail.proton.me
3.73.85.131 mail.proton.me
</code></pre></td><td>2024-10-10T17:53:23.977Z</td></tr><tr><td>anonymous175(anonymous175)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> правильно понимаю, что можно без предварительной остановки процесса установить обновленную версию через install_easy.sh на openwrt? при сохранении старого конфига опрос по настройкам сохраняется в default? после окончания работы скрипта перезапускается новый бинарник со старым конфигом?</p></td><td>2024-10-10T18:01:48.149Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Что-то этот конфиг у меня даже не открывается в Запрете…</p></td><td>2024-10-10T18:08:18.452Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><p>У вас должны быть <strong>ВСЕ</strong> txt файлы которые указаны в конфиге.</p>
<ul>
<li>my_hostlist.txt</li>
<li>googlevideo.txt</li>
</ul></td><td>2024-10-10T18:11:55.298Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Интересно,что в firefoxe у меня была постоянно ошибка NS_BINDING_ABORTED с<br>
<code>--dpi-desync-repeats=3</code> и больше . Хотя в хромиуме работает независмо от этого значения. С <code>--dpi-desync-repeats=2</code> firefox начинает нормально загружать.</p></td><td>2024-10-10T18:13:00.772Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><p>Дополню другие айпишники</p>
<pre data-code-wrap="yaml"><code class="lang-yaml">104.244.42.13 twitter.com www.twitter.com
157.240.245.174 instagram.com www.instagram.com
185.70.42.45 proton.me
185.70.42.36 account.proton.me
185.70.42.20 account-api.proton.me
3.73.85.131 mail.proton.me
3.66.189.153 mail.proton.me
</code></pre></td><td>2024-10-10T18:14:55.599Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Есть эти файлы - не открывается.<br>
Два дня сижу перебираю франкенштейнов с форума - не работает, к сожалению.<br>
Надо признать, что врага в лице РКН недооценили. Все известные мультистратегии не работают как следует.</p></td><td>2024-10-10T18:20:08.139Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="1150" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<ul>
<li>чем меньше значение для cutoff, тем лучше? Чтобы не загаживать соединение.</li>
<li>для уменьшения количества мусора лучше n или d? Работает и то, и другое для дискорда.</li>
</ul>
</blockquote>
</aside>
<p>Да, чем меньше, тем лучше. Если DPI хватает фейков перед первым пакетом, чтобы его отвадить, то вариант n2 или d2 лучше всего.<br>
n и d в случае udp практически равнозначны. d - учет только пакетов с data payload, n - любых пакетов.  d откидывает на tcp всякие ACK без пейлоада. на udp без пейлоада пакетов обычно не бывает</p></td><td>2024-10-10T18:27:57.576Z</td></tr><tr><td>bolvan</td><td><p>Да, инсталятор сам остановит службу.<br>
config.default не трогается. config сохраняется при обновлении</p></td><td>2024-10-10T18:29:43.150Z</td></tr><tr><td>yatolkosprosit</td><td><p>Подскажите, переменную</p>
<pre><code class="lang-auto"> PKTWS_EXTRA="--dpi-desync-fake-tls=/путь/до/файла/tls_
 clienthello_www_google_com.bin
</code></pre>
<p>нужно использовать только для тестирования стратегий обхода для Ютуба? Для других сайтов нет смысла ее использовать?</p></td><td>2024-10-10T18:32:30.677Z</td></tr><tr><td>easyone11</td><td><p>delete pls</p></td><td>2024-10-10T19:00:15.180Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Попробуй перед именем каждого используемого файла указать %~dp0<br>
То есть вместо --hostlist=“googlevideo.txt” → --hostlist=“%~dp0googlevideo.txt”.</p>
<p>Там три списка:</p>
<p>googlevideo.txt<br>
my_hostlist.txt<br>
my_hostlist_exclude.txt</p>
<p>И гугловский фейк, который у тебя может иметь иное название: “quic_ietf_google_com.bin”. Может понадобиться еще уточнить использовать корневую папку и для winw.exe.</p>
<p>upd. У меня на Ростелекоме ютьюб с этими параметрами работает. Только  подзагрузка эта на несколько секунд вначале раздражает.</p></td><td>2024-10-10T19:11:14.138Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><blockquote>
<p>cd /d “%~dp0”<br>
start “Zapret - Multi” /min “winws.exe” --wf-tcp=443,80 --wf-udp=443,50000-65535 ^<br>
–filter-udp=443 --hostlist=“list-youtube.txt” --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic=“quic_ietf_google_com_2.bin” --new ^<br>
–filter-udp=443 --hostlist=“my_hostlist.txt” --dpi-desync=fake --dpi-desync-repeats=11 --new ^<br>
–filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --new ^<br>
–filter-tcp=443 --hostlist=“list-youtube.txt” --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --new ^<br>
–filter-tcp=80 --hostlist=“my_hostlist.txt” --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --new ^<br>
–filter-tcp=443 --hostlist-auto=“my_hostlist.txt” --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack</p>
</blockquote>
<p>У меня такой конфиг - все работает, кроме Ютуба. 3 дня назад Ютуб работал без проблем.</p></td><td>2024-10-10T19:16:25.937Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Попробуй --dpi-desync-autottl=1 добавить и поиграть со значениями</p>
<p>upd. Я вот не пойму только зачем там --hostlist-auto=“my_hostlist.txt” и --hostlist-exclude=“my_hostlist_exclude.txt” одновременно? Разве hostlist-auto не предполагает что обрабатываться будут только содержащиеся там заблокированные домены?</p></td><td>2024-10-10T19:19:09.310Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="SweetPotato" data-post="1165" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sweetpotato/48/10697_2.png" class="avatar"> SweetPotato:</div>
<blockquote>
<p>Разве hostlist-auto не предполагает что обрабатываться будут только содержащиеся там заблокированные домены?</p>
</blockquote>
</aside>
<p>Насколько я понял после пояснения знающих людей - НЕТ</p>
<p>из документации</p>
<pre><code class="lang-auto">--hostlist-auto=&lt;filename&gt;                     ; обнаруживать автоматически блокировки и заполнять автоматический hostlist
Фильтр может содержать жесткие параметры : версия ip протокола или порты tcp/udp.
Если какой-то профиль удовлетворяет жесткому фильтру и содержит авто-хостлист, он !!!выбирается сразу.!!!
Если профиль удовлетворяет жесткому фильтру, для него задан хостлист, и у нас еще нет имени хоста, 
идет переход к следующему профилю. В противном случае идет проверка по хостлистам этого профиля.
</code></pre>
<p>таким образом при указании авто-хостлист НЕ проверяются хосты из него, а наоборот они просто добавляются туда при фиксации факта блокировки.</p></td><td>2024-10-10T20:46:44.436Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Тогда наверное было бы интереснее делать вместо exclude обычный hostlist, чтобы он сам заполнялся и он же использовался следом…</p></td><td>2024-10-10T20:50:36.458Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="SweetPotato" data-post="1167" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sweetpotato/48/10697_2.png" class="avatar"> SweetPotato:</div>
<blockquote>
<p>вместо exclude обычный hostlist,</p>
</blockquote>
</aside>
<p>хосты из exclude просто не будут применять к текущему профилю, соотвественно и не попадут в автохостлист.<br>
Но там еще есть нюансы с 0 этапом , когда флаги Wssize и syndata используются. Более знающие люди могут подробнее пояснить.</p></td><td>2024-10-10T21:01:36.186Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="SweetPotato" data-post="1165" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sweetpotato/48/10697_2.png" class="avatar"> SweetPotato:</div>
<blockquote>
<p>вот не пойму только зачем там --hostlist-auto=“my_hostlist.txt” и --hostlist-exclude=“my_hostlist_exclude.txt” одновременно?</p>
</blockquote>
</aside>
<p>Exclude - исключения. Я посещаю несколько сайтов, где морда заблочена, а поддомены с картинками и т.п. - нет.<br>
Использую auto, чтобы само добавлялось. Благодаря этому я даже не заметил что дискорд заблочили, пока в войс не зашел, т.к. всё продолжало стабильно работать.</p></td><td>2024-10-10T21:21:45.436Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Так он использует auto список или только добавляет туда?<br>
Спасибо</p></td><td>2024-10-10T21:25:21.509Z</td></tr><tr><td>Ori</td><td><p>Добавляет и использует</p></td><td>2024-10-10T21:26:08.473Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Добавляет и использует если мы указываем автохостлист в одном профиле?<br>
или как раз в разных?<br>
Можно пример который у вас был где автодобавились хосты и потом тут же стали использоваться. Как в том случае с автопочинкой сайта дискорда (ну без войса конечно).</p></td><td>2024-10-10T21:39:14.569Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Включил куик и тлс кибер - и Ютуб заработал, правда, качество не выше 480.</p>
<p>В целом все стратегии работают так себе. РКН будет подкручивать торможение. А пока все методы обхода - ужасные костыли, которые нужно каждый день фиксить. Это мучение. И люди рано или поздно от этого откажутся.<br>
Нужны какие-то принципиально новые варианты дурения. Без них дело труба.</p></td><td>2024-10-10T21:39:39.579Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Ori прав. Зашёл в Твиттер и медиа не прогружались. Тут же в hostlist добавилась пара доменов и медиа заработали даже без перезапуска.</p></td><td>2024-10-10T21:42:54.515Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p><a class="attachment" href="zapret-обсуждение-726/lcWOpjHCvGlvswpFP2Go6VmrTEB.rar">ZAPRET.rar</a> (1,1 МБ)</p>
<p>Попробуй такой вариант (модифицированный Ори).</p></td><td>2024-10-10T21:46:24.868Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>а можно пример этого конфига полностью, в котором вот так добавилось.<br>
Я не сомневаюсь что <a class="mention" href="/u/ori">@Ori</a>  прав. Я не могу понять логику.<br>
Если профиль с автохостлистом работает для всех хостов, то как он же читает из этого файла?<br>
Если в одном профиле один и тот же файл указан как автохостлист  а в другом как хостлист - тогда понятно</p></td><td>2024-10-10T21:50:46.422Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Благодарю! Вроде чуть пошустрее пошло. Кое-как на качестве 720р.</p></td><td>2024-10-10T21:57:16.235Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Да чисто его конфиг он выше кидал.</p>
<aside class="quote quote-modified" data-post="1150" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1150">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Мой окончательный вариант, с которым у меня работает ютуб (по квику и без), войс в дискорде, обычный http и https. 
start "Zapret - Multi" /min "winws.exe" --wf-tcp=80,443 --wf-udp=443,50000-65535 ^
--filter-udp=443 --hostlist="googlevideo.txt" --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic="quic_ietf_google_com.bin" --new ^
--filter-tcp=443 --hostlist="googlevideo.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new ^
--filter-udp=50000-65535 --dpi-desync=fake --dpi-desyn…
  </blockquote>
</aside>
</td><td>2024-10-10T21:57:56.597Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Вот что мне по этому поводу писал автор Запрета:</p>
<blockquote>
<p>fake на QUIC не может сломать никаких запросов, потому лист там в принципе вообще не нужен.<br>
А если нужен, и именно этот “my_hostlist.txt", то писать его как hostlist-auto, а не hostlist.<br>
Либо везде его писать как hostlist, а не hostlist-auto. Одно из двух<br>
auto профиль должен быть последним по каждому непересекающемуся фильтру по протоколу и порту. Потому что при встрече auto сканирование дальше не идет</p>
</blockquote></td><td>2024-10-10T21:59:16.852Z</td></tr><tr><td>kkkdf134</td><td><p>Кто-то есть на макоси? Пофиксил кто-нибудь?<br>
У меня дефолтный запрет с гитхаба который прекрасно работал до 10 числа, и как я понял на маке только tpws. Пытался что-то поправить – ничего не вышло. Помогите пожалуйста с этим.</p></td><td>2024-10-10T21:59:25.912Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>tcp-443 строку Ютьюба смени вот на это, если работать не будет значение ttl прибавляй и глянь что будет:</p>
<blockquote>
<p>–filter-tcp=443 --hostlist=“%~dp0youtube.txt” --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=1 --new ^</p>
</blockquote></td><td>2024-10-10T22:14:08.888Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>действительно работает и хосты добавляются в myhostlist.<br>
В общем до конца я логику работы не понимаю, даже после объяснения и чтения доков.<br>
Но работает и это плюс.<br>
Всем кто отвечал спасибо.<br>
Кстати в выводе запрета как раз всё пишется когда добавляются домены в файл</p>
<pre><code class="lang-auto">Loaded 42 hosts from blacklist.txt
windivert initialized. capture is started.
Autohostlist 'blacklist.txt' from profile 4 was modified. Reloading include hostlists for this profile.
Loading hostlist blacklist.txt
loading plain text list
Loaded 43 hosts from \blacklist.txt
</code></pre></td><td>2024-10-10T22:19:19.148Z</td></tr><tr><td>Dhogzhenya</td><td><p>Решил найти стратегию для ютуба ради интереса сегодня. Конкретно <a href="http://r16---sn-n8v7kn7d.googlevideo.com" rel="noopener nofollow ugc">r16---sn-n8v7kn7d.googlevideo.com</a> . Блокчек выдал, что</p>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://rr16---sn-n8v7kn7d.googlevideo.com" rel="noopener nofollow ugc">rr16---sn-n8v7kn7d.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr16---sn-n8v7kn7d.googlevideo.com" rel="noopener nofollow ugc">rr16---sn-n8v7kn7d.googlevideo.com</a> curl_test_https_tls12 : tpws not working<br>
ipv4 <a href="http://rr16---sn-n8v7kn7d.googlevideo.com" rel="noopener nofollow ugc">rr16---sn-n8v7kn7d.googlevideo.com</a> curl_test_https_tls12 : nfqws not working</li>
</ul>
<p>При всем этом по ip не домен заблокирован</p>
<ul>
<li>port block tests ipv4 <a href="http://rr16---sn-n8v7kn7d.googlevideo.com:443" rel="noopener nofollow ugc">rr16---sn-n8v7kn7d.googlevideo.com:443</a><br>
nc -z -w 2 173.194.176.226 443<br>
173.194.176.226 connects</li>
</ul>
<p>Не знаю, почему, но он не нашел ни одной рабочей стратегии. Это в Москве на Билайне. И только с вечера 11 Октября . Вопрос. Насколько сложно будет РКНу убить автономные способы обхода цензуры?</p></td><td>2024-10-11T02:14:25.419Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>У меня эта история со вчера. Не подключается ни к каким другим ggc кроме двух провайдеровских. Думал, по ip блок, а тоже нет (rr7—sn-n8v7kn7y_googlevideo_com):</p>
<pre><code class="lang-auto">nc -vzu -w 2 173.194.177.153 443
Connection to 173.194.177.153 443 port [udp/https] succeeded!
</code></pre>
<p>У меня еще у прова блочится fake-quic <code>quic_initial_www_google_com.bin</code>. Проверял на другом сайте, доступном с обходом по quic. Без fake-quic или с файлом от vk открывается, с файлом от google нет.</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> можете подсказать алгоритм поиска стратегий для quic за рамками того, что проверяет blockcheck для quic?</p></td><td>2024-10-11T02:57:21.707Z</td></tr><tr><td>Dhogzhenya</td><td><p>Можете подсказать, что за файл от вк?</p></td><td>2024-10-11T03:02:15.331Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/master/files/fake/quic_initial_vk_com.bin">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/master/files/fake/quic_initial_vk_com.bin" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/master/files/fake/quic_initial_vk_com.bin" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/master/files/fake/quic_initial_vk_com.bin</a></h4>


  This file is binary. <a href="https://github.com/bol-van/zapret/blob/master/files/fake/quic_initial_vk_com.bin" target="_blank" rel="noopener nofollow ugc">show original</a>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-11T03:03:08.932Z</td></tr><tr><td>Dhogzhenya</td><td><p>Я также никак не могу понять. Как мне получить версию curl, которая поддерживыла бы tls 1.3. Я линуху уже несколько раз обновлял. Linux mint</p></td><td>2024-10-11T03:05:25.444Z</td></tr><tr><td>Dhogzhenya</td><td><p>Благодарю</p></td><td>2024-10-11T03:07:08.149Z</td></tr><tr><td>username1(name1)</td><td><p>Тоже Запрет не запускается с этим конфигом. Все txt-файлы присутствуют. Попробую обновить сам Запрет, мб просто версия старая.<br>
Edit: А нет, у меня нет my_hostlist_exclude.txt, какие сайты вы в него записали? Я просто не знаю, что туда писать.</p></td><td>2024-10-11T03:16:11.116Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Ниче не пиши. Можешь вообще убрать его из конфига, это чисто Ори для своих личных целей сделал.</p></td><td>2024-10-11T06:53:24.872Z</td></tr><tr><td>wayvvy(wayvvy)</td><td><p>Подскажите профану, все ли я правильно делаю или нет?<br>
Zapret скачал, в list-youtube добавил штук 20 связанных с YT адресов (типа googlevideo, ytimg и тд).<br>
preset_russia не работает, а preset_russia 2 работает, но плохо.<br>
То прекрасно сразу грузит пару часов, то потом на пару часов начинает видео воспроизводить только спустя 1-5 минут ожидания.</p>
<p>В preset_russia 2 ниче не менял, только добавил одну команду которую увидел от админа в другой теме (добавленная строчка тут самая последняя в списке), итого выглядит так:</p>
<p>start “zapret: http,https,quic” /min “%~dp0winws.exe” ^<br>
–wf-l3=ipv4,ipv6 --wf-tcp=443 --wf-udp=443,50000-65535 ^<br>
–filter-udp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
–filter-tcp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --dpi-desync-ttl=4 --new ^<br>
–filter-udp=443 --hostlist=“%~dp0list-discord.txt” --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=6 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
–filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
–filter-tcp=443 --hostlist=“%~dp0list-discord.txt” --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --dpi-desync-ttl=4<br>
–filter-tcp=443 --hostlist=“%~dp0russia-youtubeGV.txt” --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=3</p>
<p>что можно сделать еще чтоб заработало более стабильно, а не раз на раз. У меня ТТК, если имеет значение</p></td><td>2024-10-11T08:04:20.948Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Тоже раз на раз бывает, правда щас удалось стабилизировать до нескольких секунд, а не минуты ожидания. Есть у меня подозрение, что помимо googlevideo есть у ютьюба и другие домены для видео, к которым он в моменты затупа как раз и обращается перебирая один за другим пока не выйдет на googlevideo и у нас они не добавлены в лист.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b.jpeg" data-download-href="https://ntc.party/uploads/default/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b" title="photo_2024-10-11_11-22-44"><img src="zapret-обсуждение-726/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b_2_690x54.jpeg" alt="photo_2024-10-11_11-22-44" data-base62-sha1="An0dUSuu1Ha21Ixpu2tohXykNdh" width="690" height="54" srcset="zapret-обсуждение-726/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b_2_690x54.jpeg, zapret-обсуждение-726/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b.jpeg 1.5x, zapret-обсуждение-726/fee7f2c4fdb6b019011a559e8fb4d0cf41d1865b.jpeg 2x" data-dominant-color="604B4A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">photo_2024-10-11_11-22-44</span><span class="informations">956×75 62.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Интересно это вот не оно случаем? Много поддоменов googlevideo вылезают c ошибкой 403. Может это и нормальное поведение, я просто не шарю.</p></td><td>2024-10-11T08:11:23.575Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Только несколько часов назад добавил <code>--hostlist-auto</code> и пока файлик заполнился этими доменами. Так что не похоже, что что-то необычное есть помимо rr*-хостов.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">rr5---sn-q4fl6ndz.googlevideo.com
play.google.com
rr3---sn-q4fl6nlz.googlevideo.com
yt3.ggpht.com
accounts.youtube.com
rr2---sn-q4fl6nlz.googlevideo.com
www.youtube.com
rr2---sn-5hnednsz.googlevideo.com
rr4---sn-q4fzen7y.googlevideo.com
rr4---sn-q4flrnsk.googlevideo.com
rr2---sn-ntq7yner.googlevideo.com
i.ytimg.com
rr1---sn-axq7sn7l.googlevideo.com
rr5---sn-4g5ednde.googlevideo.com
rr1---sn-2gvhxuxt-axqe.googlevideo.com
rr4---sn-q4fl6nss.googlevideo.com
rr3---sn-5hne6nz6.googlevideo.com
rr7---sn-axq7sn76.googlevideo.com
rr2---sn-2gvhxuxt-axqe.googlevideo.com
rr12---sn-axq7sn76.googlevideo.com
rr5---sn-q4fl6nd7.googlevideo.com
manifest.googlevideo.com
ntc.party
</code></pre>
</details></td><td>2024-10-11T08:28:31.137Z</td></tr><tr><td>doomer2007</td><td><p>Здравствуйте, колдуны, волшебники и маги. Суть моей беды такая. Есть роутер Xiaomi ax3200, на нем стоит сейчас openwrt 23.05, там есть самый последний Zapret. Ютуб, рутрекер и этот форум работают. Всё бы хорошо, но решил я купить новый роутер.<br>
Купил bana-pi r3, собрал, всё поставил, там тоже теперь стоит openwrt 23.05, но конфиг Zapreta на нём не работает. Включаю его, даю интернет от провайдера, а ни ютубу, ни форума нет. Выключаю, всавляю старый роутер - всё работает. Подскажите, на что нужно смотреть, чтобы разобраться. Что такого особенного делает или не делает новый роутер.</p></td><td>2024-10-11T08:55:09.692Z</td></tr><tr><td>easyone11</td><td><p>–debug</p></td><td>2024-10-11T08:57:34.782Z</td></tr><tr><td>username1(name1)</td><td><p>Запустился. Войс в Дискорде работает, но с YT всё те же траблы: видео начинают грузиться с задержкой, потом вроде бы грузятся нормально, но затем buffer health просто помирает секунд через 15-20. Несколько перезагрузок страницы обычно спасают.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/cb136630daa75cf7b5dfd175ded18284959d40c9.jpeg" data-download-href="https://ntc.party/uploads/default/cb136630daa75cf7b5dfd175ded18284959d40c9" title="1"><img src="zapret-обсуждение-726/cb136630daa75cf7b5dfd175ded18284959d40c9_2_690x376.jpeg" alt="1" data-base62-sha1="sYuujWrqc1W261vyUwmh1Olif5n" width="690" height="376" srcset="zapret-обсуждение-726/cb136630daa75cf7b5dfd175ded18284959d40c9_2_690x376.jpeg, zapret-обсуждение-726/cb136630daa75cf7b5dfd175ded18284959d40c9.jpeg 1.5x, zapret-обсуждение-726/cb136630daa75cf7b5dfd175ded18284959d40c9.jpeg 2x" data-dominant-color="F1EEEE"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">1</span><span class="informations">894×488 175 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-11T09:49:05.738Z</td></tr><tr><td>Morgott</td><td><p>Так а нельзя написать прогу, чтобы при заходе на сайт, если не грузится страница и она есть в списке, чтобы для неё перебирался вариант обхода и в случае обнаружения, применялся. ну и на будущие любые блокировки?<br>
Например заходим на <a href="http://xn--80abybgtwk5h.net" rel="noopener nofollow ugc">любойсайт.net</a> → не заходит → служба определяет, что она заблокирована → добавляет её в список заблокированных сайтов → перебирает для неё методы обхода → находит лучший -&gt;записывает этот метод конкретно для этого сайта. При следующем посещении этого сайта, пробует ранее записанные настройки обхода, если не работают, перебирает новые и применяет. К примеру, раз в 10 посещений, пробует зайти на сайт без методов обхода, вдруг сайт убрали из блокировок. И если грузится без методов обхода, убирает его с настройками из списков.<br>
Тем самым, будет полная автоматика на все будущие блокировки любых сайтов.</p></td><td>2024-10-11T11:50:19.447Z</td></tr><tr><td>easyone11</td><td><p>можно</p></td><td>2024-10-11T12:08:29.069Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Моя стратегия<br>
–dpi-desync=fake,split2 --dpi-desync-ttl=8 --dpi-desync-repeats=10 --dpi-desync-fake-tls=0x00000000 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=badsum</p></td><td>2024-10-11T12:25:48.978Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>К этому в итоге и придём. Там просто возни на целую команду, а тут люди чисто на энтузиазме ради прикола мутят пока что. Думаю краудфандинг бы быстро бустанул эту тему <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"></p></td><td>2024-10-11T12:34:41.529Z</td></tr><tr><td>Dhogzhenya</td><td><p>Очень оптимистическая позиция. Что автономные методы обхода вообще будут работать</p></td><td>2024-10-11T12:55:17.190Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Технически возможно, как говорят спецы. Нет программиста, который бы взялся за написание такой программы.<br>
Много раз и много месяцев уже разные люди эту идею здесь и на других площадках писали по подбору стратегий. Автоматическому подбору.<br>
Потому что вручную каждый день крутить что-то, фиксить - это мучение. Нужны принципиально иные методы обхода, а все ручные и простые решения больше стабильно НЕ работают!<br>
Надо найти такого программиста и скинуться всем сообществом на гонорар. Пусть напишет новую утилиту.<br>
Есть уже в другой ветке программа с графическим интерфейсом. Хорошо бы в такой визуальной оболочке реализовать парсинг заблокированных сайтов и автоматический подбор стратегий. Не открывается сайт - автоматом или после клика идет процесс типа Блокчека, затем автоматом подбор самых удачных решений. Вот что-то подобное назрело.<br>
Или вообще какие-то другие методы.</p></td><td>2024-10-11T12:56:08.366Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Не думаете что сайты на автомате будут долго открывается ли это все можно ускорить перебор стратегий</p></td><td>2024-10-11T13:02:17.048Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>А вручную каждый день фиксить - что, лучше? Тут люди часами сидят каждый день и перебирают то, в чем на самом деле плохо разбираются. Все делается не по науке, а методом тыка. Если бы автоматизировать какую-то часть “тыка” - было бы просто проще и меньше времени уходило на рукоблудие.</p></td><td>2024-10-11T13:05:32.545Z</td></tr><tr><td>Morgott</td><td><p>ну вот вариант, который на коленке можно с помощью gpt чата без навыков программирования реализовать. чекать тектовый документ от --hostlist-auto на появления в нём сайта. при появлении - вырезать его от туда и прописывать в blockchek искать в логах !!! AVAILABLE !!! или что там пишется при успешном обходе, копировать от туда метод обхода. добавить новую строчку параметров с обходом и новый тестовый список, куда вписать проверяемый сайт. привязать переменную этих характеристик обхода к названию файла со списком. на будущем чекать, если у другого сайта совпадает метод обхода, то по этой переменной вписывать в этот же список и новый сайт. как то так. или вместо переменных просто вписывать сами настройки обхода и по ним фильтровать будущие обходы, внося в эти списки новые сайты с такими же настройками.<br>
остаётся вопросы, какое ограничение на количество таких комбинаций одновременно работающих и как задетектить невозможность открытия сайта если он уже в списке и метод на нём не работает.</p></td><td>2024-10-11T13:10:09.427Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Так я согласен с вами один раз 3 часа выискивал рабочию стратегию, методом перебора, надеюсь ваша идея реальна, тоже заинтересовался</p></td><td>2024-10-11T13:12:22.388Z</td></tr><tr><td>kmopkmop</td><td><p>Youtube вроде поднялся, но теперь отвалился pixiv. Подскажите, как исправить. Алсо, почему-то ни в одном списке запретных сайтов нет <a href="http://streamable.com" rel="noopener nofollow ugc">streamable.com</a></p></td><td>2024-10-11T13:15:05.903Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Добавь это если используется split2 у меня так сработало тоже другие сайты ломались<br>
–dpi-desync-split-seqovl=1</p></td><td>2024-10-11T13:17:42.396Z</td></tr><tr><td>kmopkmop</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f100ad869431d61bc4279dc56b3a24529443b7c7.png" data-download-href="https://ntc.party/uploads/default/f100ad869431d61bc4279dc56b3a24529443b7c7" title="Clipboard_10-11-2024_02"><img src="zapret-обсуждение-726/f100ad869431d61bc4279dc56b3a24529443b7c7_2_690x172.png" alt="Clipboard_10-11-2024_02" data-base62-sha1="yo0woZXptJTlS0rbdGiIxzfGWur" width="690" height="172" srcset="zapret-обсуждение-726/f100ad869431d61bc4279dc56b3a24529443b7c7_2_690x172.png, zapret-обсуждение-726/f100ad869431d61bc4279dc56b3a24529443b7c7_2_1035x258.png 1.5x, zapret-обсуждение-726/f100ad869431d61bc4279dc56b3a24529443b7c7_2_1380x344.png 2x" data-dominant-color="282D41"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Clipboard_10-11-2024_02</span><span class="informations">1920×480 55.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Оно там по умолчанию было прописано, не помогает.</p></td><td>2024-10-11T13:22:07.810Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>Если вылезает просто ошибкой типо ssl пробовали менять ttl например на 8</p></td><td>2024-10-11T13:26:08.896Z</td></tr><tr><td>kmopkmop</td><td><p>Пробовал несколько других ttl, никак. Пока запустил GDPI для остальных сайтов, кроме ютуба, вроде работает.</p></td><td>2024-10-11T13:30:20.512Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>md5sig у меня работал без ttl но иногда не открывался ntc.party, на badsum выставлял ttl8 и все работало</p></td><td>2024-10-11T13:38:57.142Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Не знаю насчёт каждый день, в моём случае это в среднем раз в месяц. Иногда чаще.</p></td><td>2024-10-11T15:24:12.010Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У меня такая команда (пути офк у вас будут другие). Pixiv работает, ютуб тоже (без задержки в минуту как тут у некоторых), дискорд тоже с войсом. Наверняка что-то неоптимально, но мне норм.  (это из реестра винды, zapret у меня стоит как служба).<br>
<code>"C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443,50000-65535 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --hostlist-auto=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-fake-tls=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin</code></p>
<p><a class="mention" href="/u/djvadim100">@djvadim100</a> Про md5sig даже blockcheck говорит, что он работает в-основном с linux-серверами, так что по-возможности его не стоит использовать, ибо не универсальное решение.</p></td><td>2024-10-11T15:28:32.752Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="wayvvy" data-post="1191" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/9d8465/48.png" class="avatar"> wayvvy:</div>
<blockquote>
<p>–filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^</p>
</blockquote>
</aside>
<p>Вот это уже глаза все намозолило<br>
Это источник флуда в сети</p></td><td>2024-10-11T15:49:40.731Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Ниче не менял, к вечеру подзагрузки по несколько секунд пропали вообще. Видео открывается молниеносно, по ощущениям даже лучше, чем до всех приколов РКН’а. Я вообще кажется никогда такого бодрого ютьюба не видел на своём Ростелекоме. Есть версия что РКН разжал свой анус под выходные, как раз вечер пятницы :D.</p></td><td>2024-10-11T15:50:50.565Z</td></tr><tr><td>wayvvy(wayvvy)</td><td><p>? Не понял, что вы сказали…Я уже вторые сутки расстроен, что ничего не понятно, на этом форуме тысячи комментариев, пытаешься их читать и ничего не понимаешь, так как не айтишник. И тебя футболят, пинают, никто ничего никогда не подскажет, не поможет. В итоге такие технически неподкованные люди, как я, вынуждены оставаться в блокировках.<br>
Я вижу закрепленное сообщение, скачал я программу, плохо очень работает. И никто не подскажет уже второй день, банально не ответят хотя бы на вопрос - правильно я все делаю, или что-то еще нужно предпринять.<br>
Если так всех трясет с однотипных вопросов, почему бы не сделать в закрепе какой-то FAQ или хоть что-то. Никакой солидарности нет, все только о себе думают. Видимо каждый должен стать сам себе айтишником, юристом, врачом и еще черт знает кем</p></td><td>2024-10-11T16:01:02.458Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Никакого праздника!</p>
<p>В соседней теме есть и инструкция:</p>
<p><a href="https://ntc.party/t/%D0%B5%D1%81%D0%BB%D0%B8-%D0%BE%D0%BF%D1%8F%D1%82%D1%8C-%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C%D1%81%D1%8F-youtube-%D0%B8%D0%BB%D0%B8-%D0%B5%D0%B3%D0%BE-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE/10529/1216">https://ntc.party/t/%D0%B5%D1%81%D0%BB%D0%B8-%D0%BE%D0%BF%D1%8F%D1%82%D1%8C-%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D1%82%D0%B0%D0%BB-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C%D1%81%D1%8F-youtube-%D0%B8%D0%BB%D0%B8-%D0%B5%D0%B3%D0%BE-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE/10529/1216</a></p>
<p>И в конфиге том исправлена та штука, на которую тебе bolvan указал. Его замечание, между прочим, и есть попытка тебе подсказать. Кто же знал, что ты совсем нешаристый, тут винить некого.<br>
Там уже всё готово, проще некуда, работает почти у всех из коробки весьма неплохо.</p></td><td>2024-10-11T16:14:51.856Z</td></tr><tr><td>easyone11</td><td><p>del</p></td><td>2024-10-11T16:15:45.493Z</td></tr><tr><td>Gandalfpipe(Gandalfpipe)</td><td><p>Автор программы где только можно написал, что это все не для “начинающих”. Если вы хотите этим пользоваться, то разбирайтесь, тем более каких-то крайне глубоких знаний установка и настройка не требует. Если вы хотите, чтобы все работало из коробки, то подключите себе впн</p></td><td>2024-10-11T16:16:32.489Z</td></tr><tr><td>easyone11</td><td><p>подробно тут <a href="https://github.com/bol-van/zapret/discussions/359" class="inline-onebox" rel="noopener nofollow ugc">Улучшение разделов документации · bol-van/zapret · Discussion #359 · GitHub</a></p></td><td>2024-10-11T16:20:31.897Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="wayvvy" data-post="1217" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/9d8465/48.png" class="avatar"> wayvvy:</div>
<blockquote>
<p>Никакой солидарности нет, все только о себе думают. Видимо каждый должен стать сам себе айтишником, юристом, врачом и еще черт знает кем</p>
</blockquote>
</aside>
<p>На вопросы здесь отвечают несколько десятков энтузиастов в свое свободное время. А задающих вопросы последние дни было на порядок больше. Все вопросы просто нерельно даже прочесть, не то что ответить на них. Если только совсем не спать и не есть, не гулять и не работать)) Зато те, кто солидарны,  в это время смогут спокойно смотреть ютуб и не думать “только о себе”)</p></td><td>2024-10-11T17:04:05.797Z</td></tr><tr><td>bolvan</td><td><p>–desync-any-protocol применяет дурение к каждому пакету, вне зависимости от его содержимого<br>
если указано слать fake, то он будет отослан на каждый пакет<br>
нужен ограничитель connbytes в linux ip/nf tables, а на винде его нет. там нужен --dpi-desync-cutoff</p>
<p>иначе у вас пойдет торент раздаваться или войс с видео уходить, и половина трафика будет трэшем от winws<br>
а если еще repeats=11, то на каждый реальный пакет будет 11 трэшей</p>
<p>вы задались целью убить интернет ? Или провайдера ? Или у вас скорость соединения слишком большая, что ее надо подкорректировать вниз ? Или может проц крутой, что его нечем занять ?</p>
<p>На счет врачей : половину за врачей мне пришлось додумывать самому. Факт</p></td><td>2024-10-11T17:10:03.444Z</td></tr><tr><td>oniksofers(Oniksofers)</td><td><p>Расстройство понять можно, но поймите и вы, блокировки рассчитаны на людей, которым будет впадлу разбираться и они с “радостью”, рано или поздно, пойдут кушать рутуб и прочие вкусности. Сейчас еще конечно есть вариант купить ВПН, но рано или поздно и эти сервисы начнут убивать.</p>
<p>Так что либо вы начинаете образовываться и разбираться уже сейчас, либо в какой-то момент останетесь в чебурнете.</p></td><td>2024-10-11T17:10:31.856Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="wayvvy" data-post="1217" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/w/9d8465/48.png" class="avatar"> wayvvy:</div>
<blockquote>
<p>В итоге такие технически неподкованные люди</p>
</blockquote>
</aside>
<p>могут найти себе впн, установить тор браузер, стать технически подкованными. Что касается “что делать” - вам уже указали на инструкции, но от себя скажу так - качаете у болвана с гитхаба репозиторий винбандл, там есть блокчек - прогоняете блокчеком любой поддомен гуглвидео, который у вас не работает. Через полчаса (за это время можно прочитать мануал запрета чтоб составить хотя бы отдаленную картину работы программы) у вас будут несколько стратегий, с которыми можно будет уже нормально экспериментировать. Это я вам указал на путь “стать технически подкованными”.</p></td><td>2024-10-11T17:12:53.344Z</td></tr><tr><td>helpme911(helpme911)</td><td><p>Де-факто распространила эту историю с 15к портов без cutoff одна ТГ-сеточка, ЦА которой - околоайтишники и продвинутые юзеры - т.е. люди, которые умеют работать с большим объёмом информации, но технических знаний нет или почти нет. Я сам такой же, категория <span class="hashtag-raw">#2</span> в списке от bol-van <a href="https://github.com/bol-van/zapret/discussions/359#discussioncomment-10566853" class="inline-onebox" rel="noopener nofollow ugc">Улучшение разделов документации · bol-van/zapret · Discussion #359 · GitHub</a></p>
<p>Они её и понесли дальше. Лично - научиться понимать глубже и дальше хочется, но самообразование это вещь о двух концах: то время, то открытия настигают позже чем хотелось бы :))</p>
<p>ИМХО: <a class="mention" href="/u/zanoni">@Zanoni</a> GUI обёртка с автоперебором не нужна. Советую в этом случае использовать инструменты с раздельным туннелем под VPN в таргетных случаях, когда нипалучаеца.</p>
<p>ИМХО: <a class="mention" href="/u/wayvvy">@wayvvy</a> почитайте ссылку на комментарий из моего поста, если не дошли до него в обсуждении по ссылке выше. Будьте солнышком, просвещайтесь, пока не поздно.</p></td><td>2024-10-11T17:14:43.654Z</td></tr><tr><td>anonymous175(anonymous175)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> если используется -dpi-desync-any-protocol (для некоторых tcp vpn) под openwrt есть смысл в desync-cutoff (например, d10) или conntrack по умолчанию с этим разберется?</p></td><td>2024-10-11T17:30:17.121Z</td></tr><tr><td>pioli</td><td><p>А есть версия winws.exe для win7 x32 ?</p></td><td>2024-10-11T17:38:26.231Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><blockquote>
<p>Версию для 32-битных x86 windows собрать можно, но такие системы уже уходят в прошлое, поэтому если надо - собирайте сами.<br>
32-битный windivert можно взять с сайта разработчика. Требуется версия 2.2.2.</p>
</blockquote>
<p>Из справки <a href="https://github.com/bol-van/zapret/blob/master/docs/windows.txt" class="inline-onebox">zapret/docs/windows.txt at master · bol-van/zapret · GitHub</a></p></td><td>2024-10-11T17:49:23.890Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Чтобы понимать “глубже” - нужен толковый мануал или какой-то учебник. Много раз здесь и на Рутрекере просил знающих людей дать какой-то список книг для такого самообразование - в ответ обычно что-то невразумительное. Не хотят делиться, при этом сами “шарят” и тут другим подсказывают.<br>
Люди в массе сейчас эгоисты, увы.</p></td><td>2024-10-11T17:53:07.319Z</td></tr><tr><td>zzr</td><td><p>окей, а чем вам гудбай то не понравился что вы на запрет сразу накинулись? вот здесь <a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880">тема</a> можиште подобрать понтходящую конкретн для вашего случая стратегию обхода дпи<br>
если же всё таки нужен именно запрет (например нужна понтдержка udp) то вот тут <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.txt" rel="noopener nofollow ugc">наиподробнейшая иснрукция</a> там же есть сокращённый <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt" rel="noopener nofollow ugc">вариант</a></p>
<p><a class="mention" href="/u/zanoni">@Zanoni</a>  если вот <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.txt" rel="noopener nofollow ugc">ету</a> простыню осилите то сможите понимать “глубже”</p></td><td>2024-10-11T17:57:45.306Z</td></tr><tr><td>kbnchk136</td><td><aside class="quote no-group" data-username="Morgott" data-post="1205" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/morgott/48/10721_2.png" class="avatar"> Morgott:</div>
<blockquote>
<p>ну вот вариант, который на коленке можно с помощью gpt</p>
</blockquote>
</aside>
<p>И что мешает? Наверное не все так просто, да?<br>
Предлагается держать запущенными 10 тыс экземпляров twps/nfqws с разным параметрами? Кто будет роутить в них и как? Сейчас домены разбирает сам twps/nfqws. Скажем так, идея “сыровата” пока.</p></td><td>2024-10-11T18:02:48.878Z</td></tr><tr><td>helpme911(helpme911)</td><td><p>Толковый учебник “с нуля” и “с половинки” - Компьютерные сети, 5-е изд., за авт. Танэнбаума и Уезерола. Потом можно почитать readme от утилиты, как советует камрад <strong>zzr</strong></p>
<p>Время простых решений (коим ГУИ с кнопкой “Нажми чтобы всё работало” является), как вы написали, прошло - придумывать всё равно нужно.</p>
<p>GUI не нужен на подобрать стратегию и пофиксить, он только будет мешать, вот о чём я говорю.</p></td><td>2024-10-11T18:45:29.839Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="anonymous175" data-post="1227" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/91b2a8/48.png" class="avatar"> anonymous175:</div>
<blockquote>
<p><a class="mention" href="/u/bolvan">@bolvan</a> если используется -dpi-desync-any-protocol (для некоторых tcp vpn) под openwrt есть смысл в desync-cutoff (например, d10) или conntrack по умолчанию с этим разберется?</p>
</blockquote>
</aside>
<p>Если используются скрипты запуска от zapret, то там вставляется connbytes, cutoff не нужен.<br>
Но если что-то свое отдельно или в custom-е и без connbytes, тогда будет та же самая проблема с флудом</p></td><td>2024-10-11T19:12:44.024Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://habr.com/ru/articles/307252/">
  <header class="source">
      <img src="zapret-обсуждение-726/e8fc7b34a1237fbc93fd62548efc1a4df1f7fa72.png" class="site-icon" data-dominant-color="97BFD2" width="16" height="16">

      <a href="https://habr.com/ru/articles/307252/" target="_blank" rel="noopener nofollow ugc">Хабр</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="zapret-обсуждение-726/dc38a195e68e43acbc7a3bd647c3099309ffa83c.png" class="thumbnail" data-dominant-color="4A6474" width="690" height="362"></div>

<h3><a href="https://habr.com/ru/articles/307252/" target="_blank" rel="noopener nofollow ugc">Основы компьютерных сетей. Тема №1. Основные сетевые термины и сетевые модели</a></h3>

  <p>Всем привет. На днях возникла идея написать статьи про основы компьютерных сетей, разобрать работу самых важных протоколов и как строятся сети простым языком. Заинтересовавшихся приглашаю под кат....</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://linkmeup.ru/blog/1188/">
  <header class="source">
      <img src="zapret-обсуждение-726/71a970e52633ddcb1993422246ee518535bea25d.png" class="site-icon" data-dominant-color="606062" width="148" height="148">

      <a href="https://linkmeup.ru/blog/1188/" target="_blank" rel="noopener nofollow ugc">linkmeup</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:500/362;"><img src="https://ntc.party/uploads/default/original/2X/d/d8c501c854827a966cc83fbf158fec0477675179.webp" class="thumbnail" data-dominant-color="EEEEEE" width="500" height="362"></div>

<h3><a href="https://linkmeup.ru/blog/1188/" target="_blank" rel="noopener nofollow ugc">Сети для самых маленьких. Часть нулевая. Планирование - linkmeup</a></h3>

  <p>Это первая статья из серии «Сети для самых маленьких». Мы с Максимом aka Gluck долго думали с чего начать: маршрутизация, VLAN’ы, настройка оборудования. В итоге решили начать с вещи фундаментальной и, можно сказать, самой важной: планирование....</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p><a href="https://censorbib.nymity.ch/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://censorbib.nymity.ch/</a></p></td><td>2024-10-11T20:11:00.860Z</td></tr><tr><td>tehkos(TConst)</td><td><p>А откуда у вк квик?<br>
Я захожу у меня все через http/2, черз курл тоже нет:</p>
<pre><code class="lang-auto">$ curl -I https://vk.com --http3-only  
curl: (7) error:8000006F:system library::Connection refused
</code></pre></td><td>2024-10-11T23:39:42.427Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Выбирай под систему, скорее всего curl-linux-x86_64-8.10.1.tar.xz</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/stunnel/static-curl/releases">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/stunnel/static-curl/releases" target="_blank" rel="noopener nofollow ugc">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/6d4dd7c0cbdcbc6cd5badff697b079a05ca63535_2_690x345.png" class="thumbnail" data-dominant-color="F2F7F3" width="690" height="345"></div>

<h3><a href="https://github.com/stunnel/static-curl/releases" target="_blank" rel="noopener nofollow ugc">Releases · stunnel/static-curl</a></h3>

  <p>static builds cURL with HTTP3. Contribute to stunnel/static-curl development by creating an account on GitHub.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-11T23:48:15.979Z</td></tr><tr><td>doomer2007</td><td><blockquote>
<p>NFQWS_OPT_DESYNC=“-debug=@/opt/zapret/log.txt</p>
</blockquote>
<p>debug указывать лучше только для этой строки или для HTTP6, HTTPS6 и QUIC? Как я понимаю, они идут как отдельные стратегии. Значит и логи я могу создать отдельные для каждой. В этом есть смысл?</p></td><td>2024-10-12T03:58:18.394Z</td></tr><tr><td>larin</td><td><p>Привет!<br>
Есть конфиг:<br>
NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=0 --dpi-desync-fooling=badsum,md5sig --dpi-desync-repeats=20 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”<br>
NFQWS_OPT_DESYNC_QUIC=“–dpi-desync=fake,split2 --dpi-desync-repeats=20 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_google_com.bin”<br>
Вроде все работает нормально, но видео на ютубе примерно раз в минут 30 останавливается на несколько секунд, затем опять идет достаточно долго без прерываний. Стоит перебрать --dpi-desync-ttl= или есть косяки в конфиге?</p></td><td>2024-10-12T05:24:38.135Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="doomer2007" data-post="1238" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>debug указывать лучше только для этой строки или для HTTP6, HTTPS6 и QUIC? Как я понимаю, они идут как отдельные стратегии. Значит и логи я могу создать отдельные для каждой. В этом есть смысл?</p>
</blockquote>
</aside>
<p>Нет, дебаг - глобальный параметр. Он относится к nfqws instance.<br>
Если используется несколько инстансов, то при указании 1 лог файла будет каша.<br>
Лучше тогда использовать syslog. Там будет PID добавлен</p></td><td>2024-10-12T06:43:41.268Z</td></tr><tr><td>doomer2007</td><td><p>Спасибо, я уже сам это понял. Лог, что на banana pi почти ничего не пишет в отличие он того, что на ax3200. Я уже понимаю, что у него свои особенности с которыми прийдётся разбираться. Начиная с того, что у него wan это не совсем и wan. Он lan0/wan. И будто там работает что-то на L2, а не L3 уровне. Буду разбираться дальше.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/735de75f65369308afec04f0229502112bb0ffee.jpeg" data-download-href="https://ntc.party/uploads/default/735de75f65369308afec04f0229502112bb0ffee" title="bpi-r3_network_interface"><img src="zapret-обсуждение-726/735de75f65369308afec04f0229502112bb0ffee_2_690x391.jpeg" alt="bpi-r3_network_interface" data-base62-sha1="gsA61733Eqyp7u7kE5qF4Efqg8u" width="690" height="391" srcset="zapret-обсуждение-726/735de75f65369308afec04f0229502112bb0ffee_2_690x391.jpeg, zapret-обсуждение-726/735de75f65369308afec04f0229502112bb0ffee_2_1035x586.jpeg 1.5x, zapret-обсуждение-726/735de75f65369308afec04f0229502112bb0ffee.jpeg 2x" data-dominant-color="7C6F69"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">bpi-r3_network_interface</span><span class="informations">1277×725 162 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-12T06:52:07.837Z</td></tr><tr><td>bolvan</td><td><p>В таких устройствах часто идет свитч в комплекте.<br>
1 адаптер для wan, 2 адаптер для LAN, но он подключен к свитчу, который управляется отдельно.<br>
Надо изучать конкретное устройство, чтобы разобраться в его конфигурации.<br>
Управление свитчом на старых устройствах идет через пропириетарный swconfig в openwrt и драйвер тоже для него идет с openwrt. На традиционных linux без переноса этой хрени не поднять.<br>
Современное ядро и современные драйвера switch имеют стандартизированную DSA архитектуру, которая полноценно проведена в UCI конфиг в последних openwrt</p></td><td>2024-10-12T08:42:49.806Z</td></tr><tr><td>doomer2007</td><td><p>Потихоньку читаю документацию, хочу отметить, что это делать очень полезно, особенно после покупки. Про свич вы совершенно правы, указан MT7531.</p></td><td>2024-10-12T09:37:53.468Z</td></tr><tr><td>StudentIrgups(Student)</td><td><p>Добрый день!<br>
Не могу разобраться, как работать с переменными PKTWS_EXTRA на openwrt. Делал так:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/cf26af53fdddffca30ce3af5edb0d7b810df64d3.png" data-download-href="https://ntc.party/uploads/default/cf26af53fdddffca30ce3af5edb0d7b810df64d3" title="image"><img src="zapret-обсуждение-726/cf26af53fdddffca30ce3af5edb0d7b810df64d3.png" alt="image" data-base62-sha1="tyxIxk0kYxB62o5DMpKAfJpFatZ" width="690" height="20" data-dominant-color="232323"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1345×39 2.91 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
И так:<br>
<img src="zapret-обсуждение-726/eebc384d3d8a0990b0859411e536d289c7d0f3d1.png" alt="image" data-base62-sha1="y3WTDeGx2mUBwAPMLdfsZUA2y7D" width="544" height="274"></p>
<p>Всё равно по обозначенной стратегии не работает.</p></td><td>2024-10-12T12:10:42.723Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><p>Не подскажите почему именно в Firefox подобных браузерах (floorp, waterfox, librewolf, mercury, etc.) такая ошибка на ютубе?</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/687590dd763f2f896845ea0d3004723e78064a39.png" data-download-href="https://ntc.party/uploads/default/687590dd763f2f896845ea0d3004723e78064a39" title="image"><img src="zapret-обсуждение-726/687590dd763f2f896845ea0d3004723e78064a39_2_690x164.png" alt="image" data-base62-sha1="eU5xwiJ0QB6WpQW0VWScw9bTaSB" width="690" height="164" srcset="zapret-обсуждение-726/687590dd763f2f896845ea0d3004723e78064a39_2_690x164.png, zapret-обсуждение-726/687590dd763f2f896845ea0d3004723e78064a39_2_1035x246.png 1.5x, zapret-обсуждение-726/687590dd763f2f896845ea0d3004723e78064a39.png 2x" data-dominant-color="2C2C2C"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1117×266 7.62 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a.png" data-download-href="https://ntc.party/uploads/default/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a" title="image"><img src="zapret-обсуждение-726/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a_2_690x420.png" alt="image" data-base62-sha1="zwDgfzH8PQXGYTKhPle43njkm5s" width="690" height="420" srcset="zapret-обсуждение-726/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a_2_690x420.png, zapret-обсуждение-726/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a_2_1035x630.png 1.5x, zapret-обсуждение-726/f8fc708c93aeaee7cd54bdc3a5eb2434a049501a_2_1380x840.png 2x" data-dominant-color="2A2C30"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1712×1044 157 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-12T15:01:26.878Z</td></tr><tr><td>uwu(uwu)</td><td><p>заметил, что при использовании wssize 1:6 (которая возобновила работу ютуба после последнего обновления блокировок) уменьшилась в 10 раз скорость скачивания на любых ресурсах. При том, что команда ограничена через hostlist<br>
я пробовал подбрать --wssize-cutoff= c минимальными значениями =2, но это не дает эффекта.</p>
<p>текущий конфиг</p>
<pre><code class="lang-auto">--wf-tcp=443 --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=2 --wssize 1:6 --wssize-cutoff=s2 --hostlist=блабла
</code></pre>
<p>в какую сторону смотреть, чтобы вернуть скорость?</p></td><td>2024-10-12T15:01:50.299Z</td></tr><tr><td>jdo1313(Jdo1313)</td><td><p>–wssize не работает в профилях с хостлистами<br>
лучше попробуйте --dpi-desync-repeats=7 вкорячить</p></td><td>2024-10-12T15:06:10.964Z</td></tr><tr><td>bolvan</td><td><p>Так не выйдет. В экстру нужно вносить только второстепенные параметры. Такие, как пейлоады для фейков, количество повторов. Основу для стратегий он перебирает сам.</p></td><td>2024-10-12T15:10:45.306Z</td></tr><tr><td>bolvan</td><td><p>Если прямо таки нужен wssize, пишите кастом с ipset-ом на подсети гугла. За основу можно взять custom.d.examples/50-discord. Подсети можно выудить через whois по ASN. Можно это загнать в файл, не обязательно в переменную.<br>
Но обычно эта ситуация рулится через фейки. Если РДП.РУ dpi , на котором построено ТСПУ, удовлетворяется фейком, он не смотрит ответ сервера. Правда, если это не единственный DPI на пути, может быть все что угодно</p></td><td>2024-10-12T15:12:53.840Z</td></tr><tr><td>LilVlone</td><td><p>Господа, не знаю уже что делать, перепробовал все возможные варианты по обходу за последние 2 недели - ничего не помогает кроме VPN<br>
С начала блокировки ютуба пользовался GDPI обходить удавалось без проблем<br>
2-3 недели назад они начали внедрять новый способ блокировки и с того времени ни одна конфигурация Zapret, GDPI, а так же сборки производные от них не работают.<br>
Производил чистку DNS при каждом обновлении конфига.<br>
Путем проб и ошибок (посмотрел какие сервера вызываются при запуски видео) выяснил что видео у меня грузятся со следующих серверов:<br>
<a href="http://rr1---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr1—sn-8ph2xajvh-3ggl.googlevideo.com</a><br>
<a href="http://rr1---sn-8ph2xajvh-3ggs.googlevideo.com/" rel="noopener nofollow ugc">rr1—sn-8ph2xajvh-3ggs.googlevideo.com</a><br>
<a href="http://rr2---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr2—sn-8ph2xajvh-3ggl.googlevideo.com</a><br>
<a href="http://rr4---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr4—sn-8ph2xajvh-3ggl.googlevideo.com</a><br>
<a href="http://rr6---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr6—sn-8ph2xajvh-3ggl.googlevideo.com</a><br>
<a href="http://rr8---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr8—sn-8ph2xajvh-3ggl.googlevideo.com</a><br>
<a href="http://rr3---sn-8ph2xajvh-3ggl.googlevideo.com/" rel="noopener nofollow ugc">rr3—sn-8ph2xajvh-3ggl.googlevideo.com </a><br>
Видно что это скорее всего один и тот же сервер и именно он не даёт пользоваться ютубом нормально<br>
Так же добавлю что ни с другими сайтами будь то <a href="http://x.com/" rel="noopener nofollow ugc">x.com </a> <a href="http://instagram.com/" rel="noopener nofollow ugc">instagram.com </a> ntc.party <a href="http://bbc.com/" rel="noopener nofollow ugc">bbc.com </a> проблем при использовании GDPI или Zapret нет, а при проверке Goodcheck у меня работают следующие сервера:<br>
<a href="http://rr1---sn-q4fl6n6y.googlevideo.com/" rel="noopener nofollow ugc">rr1—sn-q4fl6n6y.googlevideo.com</a><br>
<a href="http://rr4---sn-q4flrnsl.googlevideo.com/" rel="noopener nofollow ugc">rr4—sn-q4flrnsl.googlevideo.com</a><br>
<a href="http://rr2---sn-q4fl6ndl.googlevideo.com/" rel="noopener nofollow ugc">rr2—sn-q4fl6ndl.googlevideo.com</a><br>
<a href="http://rr2---sn-hgn7ynek.googlevideo.com/" rel="noopener nofollow ugc">rr2—sn-hgn7ynek.googlevideo.com</a><br>
Прошу знающих подсказать, может как то можно заставить ютуб перестать грузить с нерабочего сервера.</p></td><td>2024-10-12T15:20:11.346Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> подскажите, что еще можно попробовать для исследования quic помимо того, что тестирует blockcheck? Сейчас подключается только к двум провайдерским ggc по tcp. Ко всем остальным “не местным” ggc подключение не удается, 3 дня назад они прекрасно работали по h3. netcat подтверждает, что tcp/udp 443 у них доступен, т.е. блокировки по ip нет. blockcheck стратегий не находит.</p></td><td>2024-10-12T16:01:09.409Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote" data-post="457" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/457">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    А если rst вместо fake в вашу прошлую стратегию запихнуть. Ещё можно фейковый пейлоад свой попробовать. Я пейлоад от гугл диска использую и он вроде проходит. Вот <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/411">тут</a> написано как. 
Если не помогает - проверить нерабочий сервер через blockcheck. 
Если всё еще не помогает - заблочить нерабочие сервера через ublock/adblock вот по такой схеме: 
||rr*---sn-n8v7*.googlevideo.com^

Возможно, станет лучше.
  </blockquote>
</aside>
</td><td>2024-10-12T16:14:09.019Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="jdo1313" data-post="1247" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/jdo1313/48/4883_2.png" class="avatar"> jdo1313:</div>
<blockquote>
<p>–wssize не работает в профилях с хостлистами<br>
лучше попробуйте --dpi-desync-repeats=7 вкорячить</p>
</blockquote>
</aside>
<p>так работает, но достаточно нестабильно, видео может то работать, то не работать после F5</p>
<p>при этом вот отсюда более менее работает следующее: (все остальное не влияет на работу ют)</p>
<details>
<summary>
Спойлер</summary>
<p><a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/11624" class="inline-onebox">Сборка YTDisBystro на основе Zapret: Тестирование и обсуждение</a></p>
</details>
<pre><code class="lang-auto">--filter-tcp=443 --hostlist="%~dp0russia-youtubeGV.txt" --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl=2
</code></pre>
<p>в запрете  фейки мне не удалось завести, может я что-то не так делаю хз, но при этом в gdpi вот это просто летает:</p>
<pre><code class="lang-auto">-e 1 -q --native-frag --wrong-chksum --fake-from-hex 1603030135010001310303424143facf5c983ac8ff20b819cfd634cbf5143c0005b2b8b142a6cd335012c220008969b6b387683dedb4114d466ca90be3212b2bde0c4f56261a9801 --fake-gen 10 --set-ttl 5
</code></pre>
<p>пробовал подкидывать хекс в запрет, не работает видео(</p>
<aside class="quote no-group" data-username="bolvan" data-post="1249" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если прямо таки нужен wssize, пишите кастом с ipset-ом на подсети гугла. За основу можно взять custom.d.examples/50-discord. Подсети можно выудить через whois по ASN. Можно это загнать в файл, не обязательно в переменную.<br>
Но обычно эта ситуация рулится через фейки. Если РДП.РУ dpi , на котором построено ТСПУ, удовлетворяется фейком, он не смотрит ответ сервера. Правда, если это не единственный DPI на пути, может быть все что угодно</p>
</blockquote>
</aside>
<p>ох блин, мне хватило сидения целой недели подряд, чтобы себе твиттер починить… как наберусь сил, попробую взяться за работу, потому что конфиг с seqovl вцелом самый стабильный в отличии от gdpi, пока остаюсь на нем</p></td><td>2024-10-12T16:41:55.715Z</td></tr><tr><td>zaebalitgwasgb(Zaebalitgwasgb)</td><td><p>Подскажите, что может быть. Это все на роутере, прошивка Wrt. До сего дня все работало более менее. Тормозили шортсы, и я запустил GoodCheck, подобрал конфиг, и все заработало в плане ютуба, но!<br>
Теперь не стартует Warzone - долго висит подключение, потом ошибка. Если в списке процессов ротутера остановить 2 процесса zapret - мгновенно варзон подключается и все ок.<br>
Как это возможно? У меня хотлист, в нем только ютуб, этот сайт и nnm. Всего около 30 записей, и он вообще не менялся. А еще вчера ночью все работало (кроме ютуб шортс).<br>
А, забыл. Возвращал конфиг, обновлял запрет - ничего не помогает. Только остановка процессов запрета на роутере.</p></td><td>2024-10-12T16:47:58.780Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>–wf-tcp=80,443 --wf-udp=443,50000-65535 ^ --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl=2<br>
Огромное спасибо работает а дискорд пробивает нет ?</p></td><td>2024-10-12T18:10:39.852Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А если так, раз у вас более-менее стабильно работает с seqovl?<br>
<code>--dpi-desync-split-seqovl=517--dpi-desync-split-seqovl-pattern=tls_clienthello_www_google_com.bin</code><br>
это по сути аналог fake и --dpi-desync-fake-tls.<br>
517 - это размер в байтах этого bin-файла (если у вас он почему-то имеет другой размер - поменяйте, вроде раньше был 652). ну и путь до этого файла свой укажите. в случае использования как службы - путь полный надо писать.</p></td><td>2024-10-12T18:16:44.227Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Полагаю в идеале вам надо показать как у вас настроен zapret дабы можно было хоть какие-то предположения высказывать.</p></td><td>2024-10-12T18:19:17.746Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Я говорю у тебя вот этот конфиг пробивает дискорд или нет звонки работают ?</p>
<p>–wf-tcp=80,443 --wf-udp=443,50000-65535 ^ --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl=2</p></td><td>2024-10-12T18:23:46.416Z</td></tr><tr><td>bolvan</td><td><p>Для udp вообще мало вариантов. ipfrag2 на гугле не работает.<br>
Остается крутить фейком по repeats и по пейлоаду и смотреть шарк.<br>
Пейлоад можно подсовывать разный. В том числе и quic_initial от <a href="http://www.google.com">www.google.com</a>.<br>
Других атак на QUIC пока не придумано.<br>
stateless режим пробить таким невозможно, но он очень затратен по вычислительным ресурсам</p></td><td>2024-10-12T18:44:29.176Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Uefi1" data-post="1258" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uefi1/48/10536_2.png" class="avatar"> Uefi1:</div>
<blockquote>
<p>Я говорю у тебя вот этот конфиг пробивает дискорд или нет звонки работают ?</p>
<p>–wf-tcp=80,443 --wf-udp=443,50000-65535 ^ --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl=2</p>
</blockquote>
</aside>
<p>Здесь для udp нет ничего рабочего, перехват udp идет напрасно</p></td><td>2024-10-12T18:45:25.063Z</td></tr><tr><td>uwu(uwu)</td><td><p>вот так заработало. если подкидывать файл, то он не работает. получилось с хексом</p>
<pre><code class="lang-auto">start "zapret: http,https,quic" /min "%~dp0winws.exe" ^
--wf-tcp=443 ^
--filter-tcp=443 --hostlist="C:\zapret-win-bundle-master\zapret-winws\youtube.txt" --dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fake-tls=0x1603030135010001310303424143facf5c983ac8ff20b819cfd634cbf5143c0005b2b8b142a6cd335012c220008969b6b387683dedb4114d466ca90be3212b2bde0c4f56261a9801 --dpi-desync-ttl=5 --new ^
--filter-tcp=443 --hostlist="C:\zapret\zapret-win-bundle-master\zapret-winws\ntc.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-ttl=2
</code></pre>
<p>все, я устал с этим сидеть. устаешь блин больше чем на работе</p></td><td>2024-10-12T18:46:22.965Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>А как подкинуть удп правильно здесь</p></td><td>2024-10-12T19:12:08.915Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У меня немного иначе. И звонки работают. Полный конфиг.</p>
<details>
<summary>
Спойлер</summary>
<p><code>"C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443,50000-65535 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --hostlist-auto=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-fake-tls=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin</code></p>
</details>
<p><a class="mention" href="/u/uwu">@uwu</a> ну хотя бы так заработало, хорошо =)  хотя и с файлом должно было.</p></td><td>2024-10-12T19:13:05.815Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="arinoki" data-post="1263" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>И звонки работают.</p>
</blockquote>
</aside>
<p>я отключил просто конфиг с дискордом, потому что я им  не пользуюсь. тестировал его просто ради интереса.<br>
там же просто достаточно добавить `–wf-udp=50000-65535 и вот то, что у тебя выше. у меня так же работало в нем и войс в том числе.<br>
просто к примеру тот же твиттер на фейке гугла не работает) он только через seqovl у меня</p></td><td>2024-10-12T19:15:46.023Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="uwu" data-post="1264" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>50000-65535</p>
</blockquote>
</aside>
<p>Как выяснилось в другой теме, для войса дискорда хватает портов 50000-50050. Чтобы под раздачу не попадало вообще всё в пределах верхних 15 тысяч udp-портов.</p></td><td>2024-10-12T19:23:55.594Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="arinoki" data-post="1263" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>У меня немного иначе. И звонки работают. Полный конфиг.</p>
</blockquote>
</aside>
<p>repeats=10 взято просто так или экспериментально ? То есть 9 не работает ?<br>
какой рабочий минимум ? Мне надо для custom script 50-discord, а ставить себе прогу не хочу <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-12T19:27:34.710Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="uwu" data-post="1264" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>просто к примеру тот же твиттер на фейке гугла не работает) он только через seqovl у меня</p>
</blockquote>
</aside>
<p>Ну, у кого как. Провайдеры-то разные <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> Мне моего конфига хватает для всех заблокированных, что-то отдельное под какие-то хосты не пришлось делать.</p>
<aside class="quote no-group" data-username="Ori" data-post="1265" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Как выяснилось в другой теме, для войса дискорда хватает портов 50000-50050.</p>
</blockquote>
</aside>
<p>О, спасибо. Чуть подправил конфиг <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="bolvan" data-post="1266" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>repeats=10 взято просто так или экспериментально ? То есть 9 не работает ?</p>
</blockquote>
</aside>
<p>На самом деле просто так. Но как я понял с учётом cutoff - это не особо критично.</p></td><td>2024-10-12T19:27:42.245Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>А у меня вот это в ярлык не влазит</p></td><td>2024-10-12T19:46:07.705Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="arinoki" data-post="1267" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>На самом деле просто так. Но как я понял с учётом cutoff - это не особо критично.</p>
</blockquote>
</aside>
<p>насколько я помню, то к голосовому чату подключается вообще без repeats.</p></td><td>2024-10-12T19:48:44.362Z</td></tr><tr><td>Chep</td><td><p>У меня на мегафоне работает вообще без репитов, включая войсы и стримы, строчка выглядит так</p>
<details>
<summary>
Спойлер</summary>
<p>–wf-l3=ipv4  --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d4 --dpi-desync-any-protocol  --hostlist-auto=“%~dpS0asd.txt”</p>
</details>
<p>*тсп адреса дискорда идут дальше вместе с ютубом, без них соответственно не работает</p></td><td>2024-10-12T19:49:02.292Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Как вот это в ярлык влезть у меня не влазит ? --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443,50000-65535 --filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --hostlist-auto=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-fake-tls=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin<br>
Максимум 188 символов в ярлык влазит</p></td><td>2024-10-12T19:49:49.455Z</td></tr><tr><td>doomer2007</td><td><p>Всё ещё пытаюсь разобраться, что хочет от меня banan pi r3, и я пока в тупике. Моих знаний сейчас не достаточно для осознания причины проблемы. Лог моего старого роутера отрабатывает нормально, в banana же просто прекащает что либо делать.</p>
<pre><code class="lang-auto">adding low-priority default empty desync profile
we have 2 user defined desync profile(s) and default low priority profile 0
Loading hostlist /opt/zapret/list-youtube.txt
loading plain text list
Loaded 11 hosts from /opt/zapret/list-youtube.txt
Loading hostlist /opt/zapret/ipset/zapret-hosts-auto.txt
loading plain text list
Loaded 0 hosts from /opt/zapret/ipset/zapret-hosts-auto.txt
Loading hostlist /opt/zapret/ipset/zapret-hosts-user.txt
loading plain text list
Loaded 1 hosts from /opt/zapret/ipset/zapret-hosts-user.txt
Loading hostlist /opt/zapret/ipset/zapret-hosts-user-exclude.txt
loading plain text list
Loaded 6 hosts from /opt/zapret/ipset/zapret-hosts-user-exclude.txt
initializing conntrack with timeouts tcp=60:300:60 udp=60
opening library handle
unbinding existing nf_queue handler for AF_INET (if any)
binding nfnetlink_queue as nf_queue handler for AF_INET
binding this socket to queue '200'
setting copy_packet mode
initializing raw sockets bind-fix4=0 bind-fix6=0
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768
fd=5 SO_RCVBUF=4096
fd=5 SO_SNDBUF=65536
set_socket_buffers fd=6 rcvbuf=2048 sndbuf=32768
fd=6 SO_RCVBUF=4096
fd=6 SO_SNDBUF=65536
</code></pre>
<p>Я даже не пытаюсь в связи с этим настроить как-то особенно сеть, поэтому там стоит почти дефолт, не знаю есть ли смысл его сюда тащить.</p>
<pre><code class="lang-auto">config device
	option name 'br-lan'
	option type 'bridge'
	list ports 'lan1'
	list ports 'lan2'
	list ports 'lan3'
	list ports 'lan4'
	list ports 'sfp2'

config interface 'lan'
	option device 'br-lan'
	option proto 'static'
	option ipaddr '192.168.1.1'
	option netmask '255.255.255.0'
	option ip6assign '60'

config device
	option name 'br-wan'
	option type 'bridge'
	list ports 'eth1'
	list ports 'wan'

config device
	option name 'eth1'
	option macaddr 'f6:7f:79:ab:d9:bf'

config device
	option name 'wan'
	option macaddr 'f6:7f:79:ab:d9:bf'

config interface 'wan'
    option device 'br-wan'
	option proto 'pppoe'
	option username 'blablabla'
	option password 'blablabla'
	option ipv6 'auto'
	option peerdns '0'

</code></pre>
<p>Если у кого есть опыт, напрвьте куда смотреть. Какой ещё дебаг сделать и тд.</p></td><td>2024-10-12T20:04:57.665Z</td></tr><tr><td>bolvan</td><td><p>Ярлык ? Зачем ? Батник же есть. Его хоть на десктоп можно положить, а там сколько хочешь пиши</p></td><td>2024-10-12T20:05:14.664Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Батники нельзя антивирус их моментально сжирает на работе нужно параметры забить именно в ярлык</p></td><td>2024-10-12T20:05:44.707Z</td></tr><tr><td>bolvan</td><td><p>Такой антивирус самое время спустить в унитаз. Или поставить его на место</p></td><td>2024-10-12T20:07:22.624Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А у меня и не в ярлыке, а в параметрах службы. Там такого ограничения по символами нет.<br>
Вариант с bat-файлом, предложенный <a class="mention" href="/u/bolvan">@bolvan</a> , тоже имеет смысл.</p>
<aside class="quote no-group" data-username="uwu" data-post="1269" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>насколько я помню, то к голосовому чату подключается вообще без repeats.</p>
</blockquote>
</aside>
<p>Хм, может и так. Просто в изначальном скрипте, предложенном одним из форумчан в день блокировки дискорда было так. Ну и раз работает - я особо не стал разбираться.</p></td><td>2024-10-12T20:07:41.485Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Антивирус на рабочем пк проверят исключения или удаление антивируса знаешь чё будет минимум премии лишат а ещё на СВО погонят</p></td><td>2024-10-12T20:08:14.437Z</td></tr><tr><td>doomer2007</td><td><p>А за ютуб, или что у вас там с работы не погонят?</p></td><td>2024-10-12T20:09:12.366Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Нет</p></td><td>2024-10-12T20:09:22.691Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Ну если обход блокировок нужен для выполнения рабочих задач - то странно, что ваш it-отдел не может нормально настроить вам антивирус. А вот если не нужен - это уже другой вопрос.</p></td><td>2024-10-12T20:10:10.428Z</td></tr><tr><td>doomer2007</td><td><p>Молодцы ребята, чётко у вас там всё.</p></td><td>2024-10-12T20:11:25.623Z</td></tr><tr><td>nonameininternet</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Подскажи пожалуйста, если пинг до сервера не проходит, а трейсроут умирает где-то на 5 хопе, запрет меня не спасет? (недавно отвалился твитер с инстой)</p></td><td>2024-10-12T20:11:36.663Z</td></tr><tr><td>bolvan</td><td><p>Запуск через что идет ? Если скрипты zapret, то надо бы посмотреть<br>
nft list table inet zapret<br>
какие там интерфейсы задетектились</p></td><td>2024-10-12T20:11:49.088Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Вы выяснять будете почему так или поможете более краткие параметры найти для ютуба и голос дискорда ?</p></td><td>2024-10-12T20:12:09.868Z</td></tr><tr><td>bolvan</td><td><p>На инсте точно есть частичная IP блокировка.<br>
Пинги ни о чем не говорят, надо тестить есть ли конект на порт<br>
Или трейсить с --tcp и портом назначения 443<br>
Если не конектит, значит блок по IP или IP:port с гарантией</p></td><td>2024-10-12T20:13:43.987Z</td></tr><tr><td>nonameininternet</td><td><p>Уже каких только трейсов и дигов не пускал в ход, нихрена не понимаю. Допустим бан по айпи и порту есть, получается единственный выход это тащить подключение в тоннель куданить в свободные интернеты? Может подскажешь команды, которые помогут поставить диагноз точно, если не сложно?</p></td><td>2024-10-12T20:18:27.362Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Дак это не проблема zapret’a по факту, а проблема вашего антивируса. Её и решайте, мы-то тут причём?</p></td><td>2024-10-12T20:19:15.376Z</td></tr><tr><td>uwu(uwu)</td><td><p>у ori есть отличная прога по поиску альтернативных айпи для домена.</p>
<details>
<summary>
Спойлер</summary>
<p><a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/116" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck - #116 by Ori</a></p>
</details></td><td>2024-10-12T20:19:46.942Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Хм, у меня твиттер работает как есть, хватает просто zapret’a. А по поводу инстаграма можете ещё добавить в hosts.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">31.13.72.53 scontent-arn2-1.cdninstagram.com scontent.cdninstagram.com static.cdninstagram.com 
157.240.225.174 instagram.com www.instagram.com i.instagram.com
</code></pre>
</details>
<p>И да, если Windows 11 (или Linux) - то нативными средствами желательно включить в системе dns-over-https (не суть важно какой провайдер будет - cloudflare или гугловский). Если Win10 и ниже - то отдельно для этого можно юзать программу YogaDNS, например.</p></td><td>2024-10-12T20:23:52.021Z</td></tr><tr><td>Katrovsky(Kirill K.)</td><td><p><a href="https://github.com/bitbeans/SimpleDnsCrypt" rel="noopener nofollow ugc">SimpleDNSCrypt</a> имеет GUI, устанавливается как служба, делает то же самое. Просто как альтернатива.</p></td><td>2024-10-12T20:28:57.760Z</td></tr><tr><td>errorvol(Errorvol)</td><td><p>как через запрет зайти на telegra.ph и в тг? добавление доменов не помогает, юзаю вот это<br>
с этим работает ютуб и дс войс, ntc.party (добавил в txt), остальное все не ворк, что добавляю<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/81ce5c5a963a73a768f049dc3957a17dfac6bc12.png" data-download-href="https://ntc.party/uploads/default/81ce5c5a963a73a768f049dc3957a17dfac6bc12" title="image"><img src="zapret-обсуждение-726/81ce5c5a963a73a768f049dc3957a17dfac6bc12.png" alt="image" data-base62-sha1="iwjIC1YLcUCHIOSzk7EQj0hORoK" width="690" height="287" data-dominant-color="2B2B2B"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1266×527 39.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-12T20:30:37.474Z</td></tr><tr><td>donotmesswithme</td><td><p>В первую очередь хочу поблагодарить этот ресурс и болвана и наконец выйти из ридонли.<br>
Итак, коллеги, сегодня (ну или пару дней как) случилось следующее:</p>
<ol>
<li>Уже упомянутое выше - некоторые <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> вообще не коннектятся</li>
<li>из --dpi-desync-fooling= работает только badseq и datanoack. Смешивание их в конфиге с поломанными md5sig  и badsum дает ложные результаты с плохоработающими видео.<br>
Другие параметры в старых конфигах можно не трогать.</li>
</ol></td><td>2024-10-12T20:34:56.648Z</td></tr><tr><td>doomer2007</td><td><p>Запускаю и перезапускаю, как демон /etc/init.d/zapret. В конфиге прописан nfqws с дебагом.<br>
Проверил выводы таблиц с двух роутеров. Разница только в том, что на ax3200 указаны policy memory.<br>
Сам вывод с banana:</p>
<pre><code class="lang-auto">table inet zapret {
	set zapret {
		type ipv4_addr
		size 522288
		flags interval
		auto-merge
	}

	set ipban {
		type ipv4_addr
		size 522288
		flags interval
		auto-merge
	}

	set nozapret {
		type ipv4_addr
		size 65536
		flags interval
		auto-merge
		elements = { 10.0.0.0/8, 169.254.0.0/16,
			     172.16.0.0/12, 192.168.0.0/16 }
	}

	set zapret6 {
		type ipv6_addr
		size 522288
		flags interval
		auto-merge
	}

	set ipban6 {
		type ipv6_addr
		size 522288
		flags interval
		auto-merge
	}

	set nozapret6 {
		type ipv6_addr
		size 65536
		flags interval
		auto-merge
		elements = { fc00::/7,
			     fe80::/10 }
	}

	set lanif {
		type ifname
		elements = { "br-lan" }
	}

	set wanif {
		type ifname
		elements = { "pppoe-wan" }
	}

	set wanif6 {
		type ifname
		elements = { "pppoe-wan" }
	}

	map link_local {
		type ifname : ipv6_addr
	}

	chain dnat_output {
		type nat hook output priority -101; policy accept;
	}

	chain dnat_pre {
		type nat hook prerouting priority dstnat - 1; policy accept;
	}

	chain forward {
		type filter hook forward priority filter - 1; policy accept;
	}

	chain input {
		type filter hook input priority filter - 1; policy accept;
		iif != "lo" jump localnet_protect
	}

	chain flow_offload {
		tcp dport { 80, 443 } ct original packets 1-9 ip daddr != @nozapret return comment "direct flow offloading exemption"
		tcp dport { 80, 443 } ct original packets 1-9 ip6 daddr != @nozapret6 return comment "direct flow offloading exemption"
		udp dport 443 ct original packets 1-9 ip daddr != @nozapret return comment "direct flow offloading exemption"
		udp dport 443 ct original packets 1-9 ip6 daddr != @nozapret6 return comment "direct flow offloading exemption"
	}

	chain localnet_protect {
		ip daddr 127.0.0.127 return comment "route_localnet allow access to tpws"
		ip daddr 127.0.0.0/8 drop comment "route_localnet remote access protection"
	}

	chain postrouting {
		type filter hook postrouting priority srcnat - 1; policy accept;
	}

	chain postnat {
		type filter hook postrouting priority srcnat + 1; policy accept;
		oifname @wanif6 udp dport 443 ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip6 daddr != @nozapret6 meta mark set meta mark | 0x20000000 queue flags bypass to 210
		oifname @wanif udp dport 443 ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip daddr != @nozapret meta mark set meta mark | 0x20000000 queue flags bypass to 210
		oifname @wanif6 tcp dport { 80, 443 } ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip6 daddr != @nozapret6 meta mark set meta mark | 0x20000000 queue flags bypass to 202
		oifname @wanif tcp dport { 80, 443 } ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip daddr != @nozapret meta mark set meta mark | 0x20000000 queue flags bypass to 200
	}

	chain prerouting {
		type filter hook prerouting priority dstnat + 1; policy accept;
	}

	chain prenat {
		type filter hook prerouting priority dstnat - 1; policy accept;
		iifname @wanif6 tcp sport { 80, 443 } ct reply packets 1-9 ip6 saddr != @nozapret6 queue flags bypass to 202
		iifname @wanif tcp sport { 80, 443 } ct reply packets 1-9 ip saddr != @nozapret queue flags bypass to 200
	}

	chain predefrag {
		type filter hook output priority -401; policy accept;
		meta mark &amp; 0x40000000 != 0x00000000 jump predefrag_nfqws comment "nfqws generated : avoid drop by INVALID conntrack state"
	}

	chain predefrag_nfqws {
		meta mark &amp; 0x20000000 != 0x00000000 notrack comment "postnat traffic"
		ip frag-off != 0 notrack comment "ipfrag"
		exthdr frag exists notrack comment "ipfrag"
		tcp flags ! syn,rst,ack notrack comment "datanoack"
	}
}

</code></pre></td><td>2024-10-12T20:38:10.356Z</td></tr><tr><td>bolvan</td><td><p><code>nc -w 1 -z lenta.ru 80 &amp;&amp; echo ok</code></p>
<p>что тут поменять, надеюсь, сообразите</p></td><td>2024-10-12T20:38:20.494Z</td></tr><tr><td>Dhogzhenya</td><td><p>Благодарю</p></td><td>2024-10-12T20:40:37.137Z</td></tr><tr><td>bolvan</td><td><p>C nft все окей.<br>
tcpdump -ni pppoe-wan tcp port 443<br>
что-то видит ?<br>
Не включен ли оффлоад в настройках openwrt ?</p></td><td>2024-10-12T20:40:44.333Z</td></tr><tr><td>Dhogzhenya</td><td><p>Я сейчас использовал blockcheck для находа путей обхода на мобильном интернете. Я заметил, что он вел себя как-то странно. Я через tee на линухе записываю все рабочии и не рабочии стратегии. Tee у меня выходит обычно на 800kb. Сейчас вышел на 1.2 mb после того, как я его остановил. Он мне стал тестировать одни и теже стратегии по кругу. Раньше он так себя не вел. Это нормально для этого скрипта?</p></td><td>2024-10-12T20:52:44.826Z</td></tr><tr><td>doomer2007</td><td><p>Про оффлоад в настройках файрвола я читал в вашей документации. Он на роутерах отключён.<br>
Этот дефолт одинаков на роутерах.</p>
<pre><code class="lang-auto">config defaults
	option input 'REJECT'
	option output 'ACCEPT'
	option forward 'REJECT'
	option synflood_protect '1'

</code></pre>
<p>В конфигах zapreta - donttouch соответственно.<br>
В сетях есть:</p>
<pre><code class="lang-auto">config globals 'globals'
	option packet_steering '1'
</code></pre>
<p>Но оно вроде ничего ломать не должно.<br>
tcpdump видит очень много. Вот кусок из вывода в файл, если имеет смысл это показывать.</p>
<pre><code class="lang-auto">20:49:53.532639 IP 130.255.77.28.443 &gt; 100.99.27.201.36920: Flags [R.], seq 3125269685, ack 2472623754, win 504, length 0
20:49:53.560691 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 2835654070, ack 1277666064, win 497, length 0
20:49:53.560933 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 1349, ack 1, win 497, length 0
20:49:53.565770 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60318: Flags [R.], seq 2192435449, ack 4205432458, win 497, length 0
20:49:53.636607 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60304: Flags [R.], seq 2396295275, ack 1613975141, win 497, length 0
20:49:53.661746 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 1349, ack 1, win 497, length 0
20:49:53.718544 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60314: Flags [R.], seq 1144800140, ack 2845183840, win 497, length 0
20:49:53.813734 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60318: Flags [R.], seq 4294965876, ack 1, win 497, length 0
20:49:53.831565 IP 100.99.27.201.37444 &gt; 54.184.218.174.443: Flags [P.], seq 4212553746:4212553782, ack 1839689652, win 659, options [nop,nop,TS val 2500622472 ecr 869741235], length 36
20:49:53.963489 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:54.133535 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60304: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:54.213389 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60314: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:54.309220 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60318: Flags [R.], seq 4294965876, ack 1, win 497, length 0
20:49:54.405389 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:55.181082 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60304: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:55.245122 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60314: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:55.309101 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60318: Flags [R.], seq 4294965876, ack 1, win 497, length 0
20:49:55.364867 IP 100.99.27.201.36922 &gt; 130.255.77.28.443: Flags [S], seq 2973377651, win 64240, options [mss 1452,sackOK,TS val 3678880973 ecr 0,nop,wscale 7], length 0
20:49:55.410947 IP 130.255.77.28.443 &gt; 100.99.27.201.36922: Flags [S.], seq 2652996358, ack 2973377652, win 65160, options [mss 1460,sackOK,TS val 1727647058 ecr 3678880973,nop,wscale 7], length 0
20:49:55.411469 IP 100.99.27.201.36922 &gt; 130.255.77.28.443: Flags [.], ack 1, win 502, options [nop,nop,TS val 3678881020 ecr 1727647058], length 0
20:49:55.412263 IP 100.99.27.201.36922 &gt; 130.255.77.28.443: Flags [P.], seq 1:652, ack 1, win 502, options [nop,nop,TS val 3678881021 ecr 1727647058], length 651
20:49:55.412625 IP 130.255.77.28.443 &gt; 100.99.27.201.36922: Flags [R], seq 2652996359, win 65534, length 0
20:49:55.413018 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332 &gt; 2a02:e00:ffec:4b8::1.443: Flags [S], seq 1028364055, win 64440, options [mss 1432,sackOK,TS val 1152413498 ecr 0,nop,wscale 7], length 0
20:49:55.439067 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60324: Flags [R.], seq 0, ack 1, win 497, length 0
20:49:55.457412 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [S.], seq 1216747283, ack 1028364056, win 64260, options [mss 1440,sackOK,TS val 2426738566 ecr 1152413498,nop,wscale 7], length 0
20:49:55.457822 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332 &gt; 2a02:e00:ffec:4b8::1.443: Flags [.], ack 1, win 504, options [nop,nop,TS val 1152413543 ecr 2426738566], length 0
20:49:55.458531 IP 130.255.77.28.443 &gt; 100.99.27.201.36922: Flags [R.], seq 1, ack 652, win 504, length 0
20:49:55.458627 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332 &gt; 2a02:e00:ffec:4b8::1.443: Flags [P.], seq 1:652, ack 1, win 504, options [nop,nop,TS val 1152413544 ecr 2426738566], length 651
20:49:55.459090 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [R], seq 1216747284, win 65534, length 0
20:49:55.459886 IP 100.99.27.201.36938 &gt; 130.255.77.28.443: Flags [S], seq 622080808, win 64240, options [mss 1452,sackOK,TS val 3678881068 ecr 0,nop,wscale 7], length 0
20:49:55.502837 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [R.], seq 1, ack 652, win 497, length 0
20:49:55.506734 IP 130.255.77.28.443 &gt; 100.99.27.201.36938: Flags [S.], seq 1994060184, ack 622080809, win 65160, options [mss 1460,sackOK,TS val 1727647154 ecr 3678881068,nop,wscale 7], length 0
20:49:55.507114 IP 100.99.27.201.36938 &gt; 130.255.77.28.443: Flags [.], ack 1, win 502, options [nop,nop,TS val 3678881116 ecr 1727647154], length 0
20:49:55.507912 IP 100.99.27.201.36938 &gt; 130.255.77.28.443: Flags [P.], seq 1:652, ack 1, win 502, options [nop,nop,TS val 3678881116 ecr 1727647154], length 651
20:49:55.508374 IP 130.255.77.28.443 &gt; 100.99.27.201.36938: Flags [R], seq 1994060185, win 65534, length 0
20:49:55.509194 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342 &gt; 2a02:e00:ffec:4b8::1.443: Flags [S], seq 375342558, win 64440, options [mss 1432,sackOK,TS val 1152413595 ecr 0,nop,wscale 7], length 0
20:49:55.553663 IP 130.255.77.28.443 &gt; 100.99.27.201.36938: Flags [R.], seq 1, ack 652, win 504, length 0
20:49:55.555718 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342: Flags [S.], seq 389964884, ack 375342559, win 64260, options [mss 1440,sackOK,TS val 2426738662 ecr 1152413595,nop,wscale 7], length 0
20:49:55.556123 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342 &gt; 2a02:e00:ffec:4b8::1.443: Flags [.], ack 1, win 504, options [nop,nop,TS val 1152413642 ecr 2426738662], length 0
20:49:55.556914 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342 &gt; 2a02:e00:ffec:4b8::1.443: Flags [P.], seq 1:652, ack 1, win 504, options [nop,nop,TS val 1152413642 ecr 2426738662], length 651
20:49:55.557316 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342: Flags [R], seq 389964885, win 65534, length 0
20:49:55.557707 IP 100.99.27.201.36942 &gt; 130.255.77.28.443: Flags [S], seq 3600322155, win 64240, options [mss 1452,sackOK,TS val 3678881166 ecr 0,nop,wscale 7], length 0
20:49:55.585368 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [R.], seq 1, ack 652, win 497, length 0
20:49:55.585428 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [R.], seq 1421, ack 652, win 497, length 0
20:49:55.603162 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342: Flags [R.], seq 1, ack 652, win 497, length 0
20:49:55.604081 IP 130.255.77.28.443 &gt; 100.99.27.201.36942: Flags [S.], seq 3613765891, ack 3600322156, win 65160, options [mss 1460,sackOK,TS val 1727647251 ecr 3678881166,nop,wscale 7], length 0
20:49:55.604275 IP 100.99.27.201.36942 &gt; 130.255.77.28.443: Flags [.], ack 1, win 502, options [nop,nop,TS val 3678881213 ecr 1727647251], length 0
20:49:55.605019 IP 100.99.27.201.36942 &gt; 130.255.77.28.443: Flags [P.], seq 1:652, ack 1, win 502, options [nop,nop,TS val 3678881214 ecr 1727647251], length 651
20:49:55.605441 IP 130.255.77.28.443 &gt; 100.99.27.201.36942: Flags [R], seq 3613765892, win 65534, length 0
20:49:55.605791 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354 &gt; 2a02:e00:ffec:4b8::1.443: Flags [S], seq 3627909435, win 64440, options [mss 1432,sackOK,TS val 1152413691 ecr 0,nop,wscale 7], length 0
20:49:55.651190 IP 130.255.77.28.443 &gt; 100.99.27.201.36942: Flags [R.], seq 1, ack 652, win 504, length 0
20:49:55.651526 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354: Flags [S.], seq 4028766226, ack 3627909436, win 64260, options [mss 1440,sackOK,TS val 2426738759 ecr 1152413691,nop,wscale 7], length 0
20:49:55.651676 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354 &gt; 2a02:e00:ffec:4b8::1.443: Flags [.], ack 1, win 504, options [nop,nop,TS val 1152413737 ecr 2426738759], length 0
20:49:55.652304 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354 &gt; 2a02:e00:ffec:4b8::1.443: Flags [P.], seq 1:652, ack 1, win 504, options [nop,nop,TS val 1152413738 ecr 2426738759], length 651
20:49:55.652665 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354: Flags [R], seq 4028766227, win 65534, length 0
20:49:55.653005 IP 100.99.27.201.36946 &gt; 130.255.77.28.443: Flags [S], seq 1209227776, win 64240, options [mss 1452,sackOK,TS val 3678881262 ecr 0,nop,wscale 7], length 0
20:49:55.679457 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342: Flags [R.], seq 1, ack 652, win 497, length 0
20:49:55.679815 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60342: Flags [R.], seq 1350, ack 652, win 497, length 0
20:49:55.683834 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60332: Flags [R.], seq 1421, ack 652, win 497, length 0
20:49:55.697853 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60354: Flags [R.], seq 1, ack 652, win 497, length 0
20:49:55.698851 IP 130.255.77.28.443 &gt; 100.99.27.201.36946: Flags [S.], seq 2626466442, ack 1209227777, win 65160, options [mss 1460,sackOK,TS val 1727647346 ecr 3678881262,nop,wscale 7], length 0
20:49:55.699011 IP 100.99.27.201.36946 &gt; 130.255.77.28.443: Flags [.], ack 1, win 502, options [nop,nop,TS val 3678881308 ecr 1727647346], length 0
20:49:55.699788 IP 100.99.27.201.36946 &gt; 130.255.77.28.443: Flags [P.], seq 1:652, ack 1, win 502, options [nop,nop,TS val 3678881308 ecr 1727647346], length 651
20:49:55.700170 IP 130.255.77.28.443 &gt; 100.99.27.201.36946: Flags [R], seq 2626466443, win 65534, length 0
20:49:55.700521 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60360 &gt; 2a02:e00:ffec:4b8::1.443: Flags [S], seq 1061373125, win 64440, options [mss 1432,sackOK,TS val 1152413786 ecr 0,nop,wscale 7], length 0
20:49:55.745496 IP 130.255.77.28.443 &gt; 100.99.27.201.36946: Flags [R.], seq 1, ack 652, win 504, length 0
20:49:55.746754 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60360: Flags [S.], seq 1937262551, ack 1061373126, win 64260, options [mss 1440,sackOK,TS val 2426738853 ecr 1152413786,nop,wscale 7], length 0
20:49:55.747316 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60360 &gt; 2a02:e00:ffec:4b8::1.443: Flags [.], ack 1, win 504, options [nop,nop,TS val 1152413833 ecr 2426738853], length 0
20:49:55.748112 IP6 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60360 &gt; 2a02:e00:ffec:4b8::1.443: Flags [P.], seq 1:652, ack 1, win 504, options [nop,nop,TS val 1152413834 ecr 2426738853], length 651
20:49:55.748433 IP6 2a02:e00:ffec:4b8::1.443 &gt; 2a02:2698:7c2a:1ab5:c267:2abc:d377:bb00.60360: Flags [R], seq 1937262552, win 65534, length 0

</code></pre>
<p>В общем всё очень похоже на двух роутерах, но работает один. Banana мощнее, скорость вывода tcpdump намного более высокая. Есть какая-то особенность в этой банане, что мне пока не понять.</p></td><td>2024-10-12T21:06:43.614Z</td></tr><tr><td>_rv</td><td><details>
<summary>
Спойлер</summary>
<p>сохрани в текстовый файл и каждый раз копипасть и вручную запускай из cmd</p>
</details></td><td>2024-10-12T21:21:48.158Z</td></tr><tr><td>nonameininternet</td><td><p>nc -w 1 -z <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> 80 &amp;&amp; echo ok<br>
nc -w 1 -z <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> 443 &amp;&amp; echo ok<br>
Если я все правльно понял.<br>
Увы, но ответа ок я не увидел :с</p></td><td>2024-10-12T21:26:12.608Z</td></tr><tr><td>bolvan</td><td><p>Если есть лог, выложите. Посмотрим. Может быть  там несколько доменов было ?</p></td><td>2024-10-13T06:16:30.730Z</td></tr><tr><td>bolvan</td><td><p>Это означает, что конекта нет.<br>
Если, конечно, нет сугубо технических проблем типа отсутствия nc или версии от бизибокса. На openwrt по умолчанию от бизибокса. Но тогда он бы ругнулся</p></td><td>2024-10-13T06:17:39.723Z</td></tr><tr><td>bolvan</td><td><p>Остается только проверить хит на правила через counter</p>
<pre><code class="lang-auto">nft flush chain inet zapret postnat
nft add rule inet zapret postnat "oifname @wanif6 udp dport 443 ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip6 daddr != @nozapret6 meta mark set meta mark | 0x20000000 counter queue flags bypass to 210"
nft add rule inet zapret postnat "oifname @wanif udp dport 443 ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip daddr != @nozapret meta mark set meta mark | 0x20000000 counter queue flags bypass to 210"
nft add rule inet zapret postnat "oifname @wanif6 tcp dport { 80, 443 } ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip6 daddr != @nozapret6 meta mark set meta mark | 0x20000000 counter queue flags bypass to 202"
nft add rule inet zapret postnat "oifname @wanif tcp dport { 80, 443 } ct original packets 1-9 meta mark &amp; 0x40000000 == 0x00000000 ip daddr != @nozapret meta mark set meta mark | 0x20000000 counter queue flags bypass to 200"
</code></pre>
<p>Проверка counter</p>
<pre><code class="lang-auto">nft list chain inet zapret postnat
</code></pre>
<p>И посмотреть висят ли процессы на нужных очередях</p>
<p>ps | grep nfqws</p></td><td>2024-10-13T06:33:05.105Z</td></tr><tr><td>nonameininternet</td><td><p>Запускал с мака, да и проверил на другом домене, там ок был. Сгонял к другу, у которого мой провайдер, у него тож самое. Похоже пора городить матрешку с сайнбоксом поверх запрета</p></td><td>2024-10-13T06:34:27.747Z</td></tr><tr><td>bolvan</td><td><p>У zapret есть система ipban для автоматизации загона IP в сеты. Можно писать ип, подсети, домены, делать хуки со скриптами, которые подтянут по whois целый ASN. Дальше руками заворот на что-то</p></td><td>2024-10-13T06:35:43.543Z</td></tr><tr><td>abc555</td><td><p>Всем привет !<br>
Подскажите, на одном из провайдеров прерываются стримы на ютуб. Работает 40 сек, а потом что то пошло не так. Всё остальное работает норм. Подскажите какой параметр за это отвечает. Методом тыка что то не получилось решить этот вопрос</p></td><td>2024-10-13T09:10:30.032Z</td></tr><tr><td>errorvol(Errorvol)</td><td><p>Ребят, как обойти блок телеги? Заблочили пару дней назад на юге РФ, добавление доменов в txt не спасает. Мб чет не то делаю, но с этим конфигом работает и ютуб, и дискорд, телегу починить не могу.</p>
<p>С впном телега только работает, либо прокси в самой тг, но хочется без этого)</p>
<p>set ARGS=–wf-l3=ipv4,ipv6 --wf-tcp=443 --wf-udp=443,50000-65535 --filter-udp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new --filter-tcp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin” --dpi-desync-ttl=4 --new --filter-udp=443 --hostlist=“%~dp0list-discord.txt” --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=6 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new --filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new --filter-tcp=443 --hostlist=“%~dp0list-discord.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=“%~dp0tls_clienthello_www_google_com.bin”</p>
<p>call :srvinst zapret<br>
rem set ARGS=–wf-l3=ipv4,ipv6 --wf-udp=443 --dpi-desync=fake<br>
rem call :srvinst zapret2<br>
goto :eof</p>
<p>:srvinst<br>
net stop %1<br>
sc delete %1<br>
sc create %1 binPath= “"%~dp0winws.exe" %ARGS%” DisplayName= “zapret DPI bypass : %1” start= auto<br>
sc description %1 “zapret DPI bypass software”<br>
sc start %1</p></td><td>2024-10-13T09:34:49.182Z</td></tr><tr><td>bolvan</td><td><p>Надо посмотреть в шарк трафик от телеги.<br>
Я подозреваю, что там IP block. Безответные SYN. Тогда zapret не поможет.<br>
Протокол телеги недетектируемый. Сигнатур для DPI у него нет.<br>
Потому только по IP или как-то статистически можно его зарубить</p></td><td>2024-10-13T10:09:28.782Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1308" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Безответные SYN. Тогда zapret не поможет.</p>
</blockquote>
</aside>
<p>А если для <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> на все адреса 104.244.42.* идут безответные SYN это значит, что в принципе всё, блок именно по IP адресам? тут ни DoH ничего уже  не поможет же?<br>
просто где-то рекомендуют “если блок по IP то используйте DOH” но это как может помочь? или блок по IP путают с блоком по DNS. Ну теоретически Doh может конечно выдать другие IP типа для другого региона. Но это частный случай.</p></td><td>2024-10-13T10:49:10.161Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="SanSerg" data-post="1309" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sanserg/48/9882_2.png" class="avatar"> SanSerg:</div>
<blockquote>
<p>тут ни DoH ничего уже не поможет же?</p>
</blockquote>
</aside>
<p>узнать другие ip адреса и добавить их в hosts?</p></td><td>2024-10-13T10:53:32.463Z</td></tr><tr><td>bolvan</td><td><p>DoH может помочь только, если заблокирована только часть IP из возможного диапазона.<br>
И этот конкретный DoH выдает обычно незаблокированные.<br>
Но это вилами по воде писано. Авось поможет. Вдруг начнет, вдруг перестанет.<br>
Если это работает нестабильно, остается только в хостс добавлять точно работающие.</p>
<p>А у телеги есть вполне фиксированный ASN, который легко зарубить весь.<br>
И если Пашок не будет активно сопротивляться, то на этом все. Только VPN.<br>
Пашок сами знаете сейчас где. Только если враги родины ему прикажут воевать с RU цензурой.</p>
<p>Полное отключение телеги у нас вряд ли будет в ближайшее время. На нее уже многое завязано. Вплоть до обмена военной инфой в СВО. И это плохо, тк Пашок сейчас все сольет скорее всего.</p></td><td>2024-10-13T11:07:51.684Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="easyone11" data-post="1310" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>узнать другие ip адреса и добавить их в hosts?</p>
</blockquote>
</aside>
<p>Это хороший вариант, но только где их узнать? и есть ли они для <a href="http://x.com" rel="noopener nofollow ugc">x.com</a>. Все публичные DNS и в том числе с DOH выдают эти 4 IP.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1311" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>А у телеги есть вполне фиксированный ASN, который легко зарубить весь.</p>
</blockquote>
</aside>
<p>это да <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"> ну надеюсь на это не пойдут с телегой. Иначе снова мтпрокси или впн :(.</p></td><td>2024-10-13T11:18:20.372Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="SanSerg" data-post="1312" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sanserg/48/9882_2.png" class="avatar"> SanSerg:</div>
<blockquote>
<p>Это хороший вариант, но только где их узнать? и есть ли они для <a href="http://x.com">x.com</a>. Все публичные DNS и в том числе с DOH выдают эти 4 IP.</p>
</blockquote>
</aside>
<p>Определить блокировку по ip можно таким скриптом <a href="https://ntc.party/uploads/short-url/2j9bMVO4QpVlz53mqzL8AGAmoFP.bat">https://ntc.party/uploads/short-url/2j9bMVO4QpVlz53mqzL8AGAmoFP.bat</a> (у меня лично оказалось, что блокировки по ip нет, просто конфиг нерабочий был) А найти рабочие ip скриптом от Ori <a href="https://ntc.party/uploads/short-url/w0qAOCJ3XjjPZR6fJlNaRVmQZwj.cmd">https://ntc.party/uploads/short-url/w0qAOCJ3XjjPZR6fJlNaRVmQZwj.cmd</a> (это если doh не помог) . Он находит просто кучу ip обычно. А можно и не скриптом, а на сайте <a href="https://dnschecker.org/#A/" class="inline-onebox">DNS Checker - DNS Check Propagation Tool</a> там можно для разных стран выбирать</p></td><td>2024-10-13T11:24:57.748Z</td></tr><tr><td>doomer2007</td><td><p>Ребята из ркн уже один раз ударили по бойцам блокировкой дискорда. Поэтому и телеграм не так уж и крепко стоит на нашей земле. Видно они заботятся, чтобы не дай бог фронт был прорван, чтобы вдруг не начали активнее говорить о мире на условиях РФ.</p></td><td>2024-10-13T11:33:38.821Z</td></tr><tr><td>Dur(Dur)</td><td><p>Не по теме, <a href="http://nexusmods.com" rel="noopener nofollow ugc">nexusmods.com</a> заблокирован? Ещё недавно работало, в списках нет. Заходит только через vpn.</p></td><td>2024-10-13T11:40:48.820Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>У меня работает</p></td><td>2024-10-13T11:41:17.717Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="SanSerg" data-post="1312" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sanserg/48/9882_2.png" class="avatar"> SanSerg:</div>
<blockquote>
<p>но только где их узнать?</p>
</blockquote>
</aside>
<p>попробуй это <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/116" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck - #116 by Ori</a></p></td><td>2024-10-13T11:41:46.591Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Действительно работает и сайт и скрипт и нашлось два НЕзабоченных IP  с которыми twitter заработал.<br>
Единственно не знаю два IP для одного домена имеет ли смысл в hosts прописывать??? будет ли он рандомно один из них выбирать?<br>
Ну и второй риторической вопрос какого лешего билайн блочит твитер по ИП? если уже есть тспу и они вообще больше ничего блочить сами не должны как бы.</p>
<p>Спасибо за ссылки ну и авторам скриптов!!!</p></td><td>2024-10-13T11:47:10.757Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote quote-modified" data-post="908" data-topic="10173">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/908">Окологудбайдипиайный флуд</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    Не знаю даже. В таких случаях обычно так делаю 
157.240.225.174 instagram.com
#157.240.0.174 instagram.com

Если один отвалится, удалю и раскоменчу второй 

У меня пров блочит по ip почему-то исключительно инсту, X не трогает
  </blockquote>
</aside>
<p>
Лучше здесь продолжить, чтоб не зафлудить тему окончательно)</p></td><td>2024-10-13T11:57:05.899Z</td></tr><tr><td>bolvan</td><td><p>Здесь выложены pcap-ы discord.<br>
И они говорят, что порты проскакивают и 50041, и 50045.<br>
<a href="https://github.com/RTC-Measurement-Project/RTC-Measurement-Project/tree/main/test_cases" class="inline-onebox">RTC-Measurement-Project/test_cases at main · RTC-Measurement-Project/RTC-Measurement-Project · GitHub</a><br>
Потому пока в 50-discord кастоме сделал рэнж 50000-50099</p>
<p>Кто-то на гитхабе протестил. У него скакали порты до 50020 на войсе, на демке экрана - 50025</p></td><td>2024-10-13T13:12:49.147Z</td></tr><tr><td>HedigehoG(Roman)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1320" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>50-discord</p>
</blockquote>
</aside>
<p>А вместо DISCORD_SUBNETS или в добавок можно лист или список доменов прикрутить? А то через dnsmasq ip-sets добавил discord.media и войсы тоже пошли</p></td><td>2024-10-13T16:01:10.850Z</td></tr><tr><td>bolvan</td><td><p>Список доменов - нет. В протоколе войса домены отсутствуют как таковые.<br>
Там  проприетарный STUN, RTCP.<br>
Разве что использовать трюк с dnsmasq и заполнением им ipset.<br>
А с ip можно как угодно работать. Кастом он и есть кастом, что код пишет юзер как хочет.</p>
<p>Веб сайты обычным образом блокированы. Там что угодно можно, включая хостлист.</p></td><td>2024-10-13T16:18:09.515Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><p>Может быть я что-то не догоняю, но… может быть всё же сборщики которые бессовестно тырят чужие программы хотя бы будут писать конфиги как сам автор программы?</p>
<p>Люди не понимают как что-то менять в программе, а когда те пытаются что-то вставить из других конфигов - программа их просто шлёт.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/6d250ecfda54983963da94678c66b53f3ed47b0c.png" data-download-href="https://ntc.party/uploads/default/6d250ecfda54983963da94678c66b53f3ed47b0c" title="image"><img src="zapret-обсуждение-726/6d250ecfda54983963da94678c66b53f3ed47b0c_2_690x359.png" alt="image" data-base62-sha1="fzxriNTGzTYJN968Z1MicGMoJXe" width="690" height="359" srcset="zapret-обсуждение-726/6d250ecfda54983963da94678c66b53f3ed47b0c_2_690x359.png, zapret-обсуждение-726/6d250ecfda54983963da94678c66b53f3ed47b0c.png 1.5x, zapret-обсуждение-726/6d250ecfda54983963da94678c66b53f3ed47b0c.png 2x" data-dominant-color="F5F8FB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">973×507 28.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-13T18:11:25.764Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Попробуй --wf-tcp=80,443 --wf-udp=443,50000-50050 --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10 пока лучший конфиг что я встретил пробивает голос дискорда тг и телеграф и вроде ничего лишнего единственное что на ДОМРУ не пробивает ютуб по какой то причине на остальных пробивает</p></td><td>2024-10-13T19:36:45.432Z</td></tr><tr><td>Katrovsky(Kirill K.)</td><td><p>А автор программы конфиги пишет? Неожиданно. В любом случае, даже если у него есть такое хобби - вменять это другим как обязанность будет странно. Даже неэтично, что ли.</p></td><td>2024-10-13T20:45:32.819Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>не пробивает ютуб видимо потому, что не указан правильный fake - <code>--dpi-desync-fake-tls=C:\Users\sora\Downloads\Soft\git\zapret-win-bundle\blockcheck\zapret\files\fake\tls_clienthello_www_google_com.bin</code><br>
(у вас, очевидно, путь другой будет)</p></td><td>2024-10-13T20:49:10.389Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><aside class="quote no-group" data-username="arinoki" data-post="1326" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>bin</p>
</blockquote>
</aside>
<p>На РТ без этого бинарника пробивает кста</p></td><td>2024-10-13T20:55:11.101Z</td></tr><tr><td>litev</td><td><p>Насколько хорошо zapret чувствует себя в виртуалке?<br>
Имеется ввиду proxmox и запущенные в нем openwrt/opnsense/pfsense.<br>
Если нормально, насколько запарнее настраивать в pf/opnsense, в сравнении с openwrt?</p>
<p>Или я вообще не туда копаю и надо какое-то иное решение, при условии что роутером будет мини-пк на intel.</p></td><td>2024-10-13T21:23:01.508Z</td></tr><tr><td>doomer2007</td><td><p>С виртуальным натом не будет работать. Если ввести поиск по ключевым словам в этом топике, то уже вроде немало сказано на этот счёт.<br>
Почитайте readme.txt на гитхабе автора. Вот цитата оттуда.</p>
<blockquote>
<p>ВИРТУАЛЬНЫЕ МАШИНЫ<br>
Изнутри VM от virtualbox и vmware в режиме NAT не работают многие техники пакетной магии nfqws.<br>
Принудительно заменяется ttl, не проходят фейк пакеты. Необходимо настроить сеть в режиме bridge.</p>
</blockquote>
<p>Openwrt - это linux, pfsense - bsd. Всякие штуки автора работают сейчас в основном с линуксовым nftables, pfsense должен конфликтовать. Не уверен, что это всё вообще возможно как-то объеденить вместе. А если и возможно, то очень не просто, а раз вы сами спрашиваете, значит у вас это не выйдет.</p></td><td>2024-10-13T22:10:30.889Z</td></tr><tr><td>Ned</td><td><p>самочувствие запрета в виртуалке замечательное<br>
только зачем вам все вот это openwrt/opnsense/pfsense<br>
минимальный debian и все</p></td><td>2024-10-14T00:03:22.925Z</td></tr><tr><td>Dhogzhenya</td><td><p><a class="attachment" href="zapret-обсуждение-726/ejihdU1GSs574CNbtEZEmDVzkhV.txt">mobilentcparty.txt</a> (1.1 MB)</p></td><td>2024-10-14T02:32:16.758Z</td></tr><tr><td>lxpcfc</td><td><p>Крутится без проблем на убунте 24.04. Рядом 3proxy для виндовых машин и 3x-ui в докере для мобильных впн.</p></td><td>2024-10-14T03:27:42.492Z</td></tr><tr><td>errorvol(Errorvol)</td><td><p>можешь скинуть все содержание файла плиз</p></td><td>2024-10-14T05:21:02.021Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="litev" data-post="1328" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/5f9b8f/48.png" class="avatar"> litev:</div>
<blockquote>
<p>Если нормально, насколько запарнее настраивать в pf/opnsense, в сравнении с openwrt?</p>
</blockquote>
</aside>
<p>pfsense плох тем, что там используется PF, а у PF сломан divert<br>
поэтому приходится поднимать параллельно ipfw, который может иногда конфликтовать с PF<br>
а так же теряется гибкость на каком этапе идет перехват</p>
<p>разработку linux спонсируют корпорации. у BSD это раз в 10 скуднее. потому много багов остается непатченными годами, а новые фишки слабо развиваются<br>
BSD проиграл гонку линуху</p>
<p>даже если отбросить PF, то у BSD нет connbytes фильтра, и это заставляет отсылать на dvtws весь исходящий трафик на определенные порты, а не только первые несколько пакетов. что негативно влияет на перформанс.</p>
<p>так что если у вас есть выбор - он, очевидно, за linux</p></td><td>2024-10-14T05:54:41.915Z</td></tr><tr><td>litev</td><td><p>В openwrt под proxmox нормально будет себя чувствовать?</p></td><td>2024-10-14T06:01:05.650Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Может кто-то проверить на своем прове эти домены? При включенном zapret’е с обходом quic запустить:</p>
<pre><code class="lang-auto">curl --http3-only -ISs --max-time 1 https://rr1---sn-n8v7znse.googlevideo.com https://rr1---sn-n8v7znsk.googlevideo.com https://rr11---sn-n8v7znsy.googlevideo.com https://rr13---sn-n8v7zns6.googlevideo.com https://rr2---sn-n8v7zns7.googlevideo.com https://rr2---sn-n8v7znss.googlevideo.com https://rr6---sn-n8v7zns6.googlevideo.com https://rr8---sn-n8v7znsl.googlevideo.com https://rr9---sn-n8v7znz7.googlevideo.com
</code></pre></td><td>2024-10-14T06:12:42.508Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Katrovsky" data-post="1325" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/katrovsky/48/10986_2.png" class="avatar"> Katrovsky:</div>
<blockquote>
<p>А автор программы конфиги пишет?</p>
</blockquote>
</aside>
<p>Автор пишет код и какие-то базовые общие вещи. Подбирать стратегии под провайдера - тут не набегаешься. Сами пусть подбирают или “помощь зала”. Иначе ни времени, ни сил не останется ни на что</p></td><td>2024-10-14T06:18:50.702Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1336" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>curl --http3-only -ISs --max-time 1 <a href="https://rr1---sn-n8v7znse.googlevideo.com">https://rr1---sn-n8v7znse.googlevideo.com</a></p>
</blockquote>
</aside>
<p>Там, где обходится, на все запросы<br>
curl: (95) HTTP/3 stream 0 was closed cleanly, but before getting all response header fields, treated as error</p>
<p>Тоже самое с VPS вне RU</p></td><td>2024-10-14T06:21:09.312Z</td></tr><tr><td>bolvan</td><td><p>zapret - это обычная прога. она так же как и другие проги работает в виртуалке с полной виртуализацией. ничего особенного.<br>
Особенность только в способе подключения виртуалки к сети.<br>
Если это встроенный NAT гипервизора, который делается не средствами ОС, то вероятны проблемы. Эти проприетарные NATы сделаны хреново, они ломают нестандартные случаи</p></td><td>2024-10-14T06:23:01.056Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Спасибо. Если я понимаю правильно, похоже на этих ggc попросту отключен доступ по quic где-то на уровне самих серверов или их прова. В этом случае бесполезно вообще пытаться исследовать для них обход.</p></td><td>2024-10-14T06:27:43.091Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1336" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p><code>https://rr9---sn-n8v7znz7.googlevideo.com</code></p>
</blockquote>
</aside>
<pre><code class="lang-auto">&lt; HTTP/3 404 
HTTP/3 404 
&lt; date: Mon, 14 Oct 2024 06:50:11 GMT
date: Mon, 14 Oct 2024 06:50:11 GMT
&lt; content-type: text/html; charset=UTF-8
content-type: text/html; charset=UTF-8
&lt; server: gvs 1.0
server: gvs 1.0
* HTTP/3 stream 0 was closed cleanly, but before getting all response header fields, treated as error
</code></pre>
<p>Он выдает ответ, но видимо как-то режет его.<br>
Если запрашивать реальный контент, он может приходить</p></td><td>2024-10-14T06:51:26.316Z</td></tr><tr><td>bolvan</td><td><p>Здесь нет зацикливания<br>
Задано полное тестирование с 10 попытками ipv4 и ipv6<br>
Лог прерван на начале ipv6</p></td><td>2024-10-14T07:09:31.276Z</td></tr><tr><td>SweetPotato(PewPew)</td><td><p>Ну вот утро понедельника и на Ростелекоме у меня опять появилась подзагрузка в несколько секунд перед видео. Выходные подошли к концу - РКН снова смыкает свой вредный анус.</p></td><td>2024-10-14T07:36:26.649Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Мм, ну вот, он хотя бы отдает 404, а у меня только таймауты. Другие пользователи здесь постили адреса зарубежных ggc, с ними проверял, соединяется. Проблема в том, что у меня YT по h3 лезет только к вот таким московским ggc, которые пока не могу пробить, в итоге на новых роликах затык на 19 секунде, решаемый обновлением страницы. Не смертельно, конечно, но все равно. Продолжаем исследовать…</p></td><td>2024-10-14T07:45:31.620Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><p>РСТ СПБ, не работает ютуб под никаким конфигом zapret. Репитов много ставил ни в какую</p></td><td>2024-10-14T08:13:33.401Z</td></tr><tr><td>easyone11</td><td><p>у меня есть провайдер который не фильтрует трубу, там на все эти адреса<br>
curl: (28) Connection timed out after 1007 milliseconds</p></td><td>2024-10-14T08:28:34.283Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Это еще больше запутывает ситуацию…</p></td><td>2024-10-14T08:33:05.952Z</td></tr><tr><td>donotmesswithme</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> подскажите, пожалуйста - как правильно записывать несколько хостлистов в exclude?<br>
–hostlist-exclude=/opt/zapret/zapret_lists/youtube1.txt --hostlist-exclude=/opt/zapret/zapret_lists/youtube2.txt так?</p>
<p>И второй вопрос, уже ко всем - у меня YouTube на моем провайдеры выдает 2 кэширующих сервера <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> (два набора по 24 домена (3 вида х 8 штук)), но сейчас еще выпадают случайные европейские, которые относятся уже к Google напрямую. К ним вообще никак не получается достучаться. Как до них дотянуться?<br>
Все идут по http 1.1 и отдают 403</p></td><td>2024-10-14T08:33:52.185Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="donotmesswithme" data-post="1348" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>выпадают случайные европейские</p>
</blockquote>
</aside>
<p>Киньте домены потыкать.</p></td><td>2024-10-14T08:53:03.492Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="donotmesswithme" data-post="1348" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>как правильно записывать несколько хостлистов в exclude?<br>
–hostlist-exclude=/opt/zapret/zapret_lists/youtube1.txt --hostlist-exclude=/opt/zapret/zapret_lists/youtube2.txt так?</p>
</blockquote>
</aside>
<p>Да, они таким образом обьединятся.<br>
Но вопрос зачем эксклудить youtube ?<br>
Это реализация “все, кроме” ?<br>
Тогда логичней сделать сначала профиль с youtube, а потом без фильтра - остальное.<br>
Сначала проверять на ДА, потом на НЕТ - избыточно, поскольку эти условия взаимоисключающие.</p></td><td>2024-10-14T08:54:53.794Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>А да без проблем:<br>
Если ДОМРУ:</p>
<blockquote>
<p>start “zapret” “winws.exe” ^<br>
–wf-tcp=80,443 --wf-udp=443,50000-50050 --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin</p>
</blockquote>
<p>Если РТ или другие можно выкинуть бинарник:</p>
<blockquote>
<p>start “zapret” “winws.exe” ^<br>
–wf-tcp=80,443 --wf-udp=443,50000-50050 --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-any-protocol --new --filter-tcp=443 --filter-udp=443 --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-repeats=10</p>
</blockquote></td><td>2024-10-14T08:57:33.657Z</td></tr><tr><td>donotmesswithme</td><td><p>Например эти<br>
<a href="http://rr3---sn-q4flrne6.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr3---sn-q4flrne6.googlevideo.com</a><br>
<a href="http://rr5---sn-5hne6nzy.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr5---sn-5hne6nzy.googlevideo.com</a><br>
<a href="http://rr5---sn-aigl6nzk.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr5---sn-aigl6nzk.googlevideo.com</a><br>
<a href="http://rr1---sn-4g5edndk.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr1---sn-4g5edndk.googlevideo.com</a><br>
<a href="http://rr3---sn-q4flrnsk.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr3---sn-q4flrnsk.googlevideo.com</a></p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> чиню весь интернет при помощи вашего “микроскопа”<br>
Идея следующая:<br>
Если *.googlevodeo.com (европейский) - применять один вид дурения. Мне ютуб выдает случайные результаты<br>
Если любой из 24 доменов кеширующего сервера №1 в России - другой вид<br>
Если любой из 24 доменов кеширующего сервера №2 в России - третий вид<br>
Пробиться до всяких аватарок и кешей ютуба - четвертый вид<br>
И кое-что от ютуба лежит в user hostlist, чтоб консоль была белой. Там же поднимается работа “обычных сайтов”<br>
Ну и дискорд, но его мы опустим.<br>
В googlevideo.txt лежит само <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, в YouTube1,2 - перечни доменов кеширующих серверов, в list-youtube.txt - список доменов ютуба, который был актуален месяц назад.</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="--hostlist=/opt/zapret/zapret_lists/googlevideo.txt --dpi-desync=fake,split --dpi-desync-split-seqovl=1 --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-fooling=badseq,badsum,md5sig,datanoack --hostspell=hOst --domcase --hostnospace --hostlist-exclude=/opt/zapret/zapret_lists/youtube1.txt --hostlist-exclude=/opt/zapret/zapret_lists/youtube2.txt --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --hostlist=/opt/zapret/zapret_lists/youtube1.txt --dpi-desync=fake,split --dpi-desync-fooling=badsum --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --hostlist=/opt/zapret/zapret_lists/youtube2.txt --dpi-desync=fake,split2 --dpi-desync-ttl=8 --dpi-desync-split-seqovl=1 --dpi-desync-repeats=10 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --hostlist=/opt/zapret/zapret_lists/list-discord.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --hostlist=/opt/zapret/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,disorder2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
</code></pre>
<p>На первую стратегию внимания не обращайте (googlevideo.txt), просто пытаюсь вводить аргументы и наблюдаю за консолью.</p>
<p>Много текста, мало мыслей. Так и не ответил на ваш вопрос. Да, это реализация “все, кроме”<br>
В “кроме” у меня дискорд, googlevideo<br>
Дальше googlevideo, “кроме” двух основных оживленных рф кэширующих серверов. Они разделены на два потому, что на одном работает только --dpi-desync-fooling=md5sig, а на втором только --dpi-desync-fooling=badsum. Ну и один поднимается только при --dpi-desync=fake,split, а второй при --dpi-desync=fake,split2</p></td><td>2024-10-14T08:58:30.464Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="donotmesswithme" data-post="1352" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>Например эти</p>
</blockquote>
</aside>
<p>Ага, Европа и США. У меня прекрасно с обходом по quic к ним цепляется. Вот такие бы мне YT отдавал вместо московских.</p></td><td>2024-10-14T09:43:59.778Z</td></tr><tr><td>donotmesswithme</td><td><p>У меня крутится на киннетике, там нет quic работающего из коробки. С удовольствием бы поставил в разрыв между провайдером и киннтетиком Raspberry Pi, но у меня в тот же кинетик втыкается оптика напрямую.</p></td><td>2024-10-14T09:46:16.695Z</td></tr><tr><td>bolvan</td><td><p>Для начала причешем для восприятия</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/googlevideo.txt --dpi-desync=fake,split --dpi-desync-split-seqovl=1 --dpi-desync-cutoff=d2 --dpi-desync-repeats=10 --dpi-desync-fooling=badseq,badsum,md5sig,datanoack --hostspell=hOst --domcase --hostnospace --hostlist-exclude=/opt/zapret/zapret_lists/youtube1.txt --hostlist-exclude=/opt/zapret/zapret_lists/youtube2.txt --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/youtube1.txt --dpi-desync=fake,split --dpi-desync-fooling=badsum --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/youtube2.txt --dpi-desync=fake,split2 --dpi-desync-ttl=8 --dpi-desync-split-seqovl=1 --dpi-desync-repeats=10 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/list-discord.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--dpi-desync=fake,disorder2 --dpi-desync-ttl=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
</code></pre>
<p>В доке я сразу написал, что стратегии надо обьединять по возможности. Если полагаться только на профили - получится каша, в которой легко запутаться</p>
<p>cutoff здесь лишний, поскольку отсутствует --desync-any-protocol<br>
–dpi-desync-fooling=badseq,badsum,md5sig,datanoack<br>
это перебор, который скорее всего на чем-нибудь застрянет и не сработает. badseq может сломать http на некоторых DPI.<br>
–hostcase,–domcase и прочие относятся к http и давно не работают на ТСПУ. работает только --methodeol</p>
<p>Необходимость в exclude вызвана пересекающимися множествами хостов в листах. Если их сделать непересекающимися, необходимость отпадет</p>
<p>-dpi-desync=fake,split2 и -dpi-desync=fake,split<br>
имеют общий знаменатель -dpi-desync=fake,split<br>
к нему и надо вести<br>
ttl крутится к максимальному, добавляется fooling md5sig для случаев, когда сервера ближе<br>
если работает datanoack, от ттл можно и вовсе отказаться и выбросить все остальные ограничители</p>
<p>seqovl - это случай отдельный. для DPI это похоже на отсылку фейка, только засунутого в пакет с нефейком. скрытый фейк</p></td><td>2024-10-14T09:51:24.597Z</td></tr><tr><td>donotmesswithme</td><td><p>Спасибо вам, кое что прояснили. Особенно то, что не обязательно писать в одну строчку, так и правда удобнее.</p>
<p>У меня основная проблема в том, что определенные домены работают только через определенный –dpi-desync-fooling= последние пару дней и приходится каждый вариант перебирать, будто на пути в интернет вместо одного черного ящика теперь их несколько, на каждом из маршрутов.<br>
А для badseq и badsum нужен ограничитель по ttl?</p></td><td>2024-10-14T10:05:50.273Z</td></tr><tr><td>Dhogzhenya</td><td><p>Понятно. Спасибо</p></td><td>2024-10-14T10:37:24.392Z</td></tr><tr><td>disappointed</td><td><p>Можно ещё момент спросить, вот при таком раскладе как в примере, в каком порядке происходит поиск домена, если к примеру он присутствует в хостлисте первой стратегии, но также есть и в какой-то ещё далее.</p></td><td>2024-10-14T10:43:23.332Z</td></tr><tr><td>Gegik(Gegik)</td><td><p>Коллеги, подскажите как перенести такие настройки на openwrt?</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --wf-udp=443,50000-65535 ^
--filter-udp=443 --hostlist="%~dp0russia-youtubeQ.txt" --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtubeGV.txt" --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtube.txt" --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-ttl=3 --new ^
--filter-tcp=80 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-ttl=5 --new ^
--filter-udp=443 --hostlist="%~dp0russia-discord.txt" --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n1 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=443 --hostlist="%~dp0russia-discord.txt" --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-ttl=4 --new ^
--dpi-desync=fake,split2 --hostlist-auto="%~dp0autohostlist.txt" --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-autottl=2
</code></pre></td><td>2024-10-14T10:52:38.846Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="donotmesswithme" data-post="1356" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>Спасибо вам, кое что прояснили. Особенно то, что не обязательно писать в одну строчку, так и правда удобнее.</p>
</blockquote>
</aside>
<p>Так удобнее, так примет шелл, но инсталлятор install_easy с таким не работает. Будут накладки.<br>
Это больше для просмотра и анализа. Ищем по new и делаем новую строчку после</p></td><td>2024-10-14T10:52:58.294Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="disappointed" data-post="1358" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>Можно ещё момент спросить, вот при таком раскладе как в примере, в каком порядке происходит поиск домена, если к примеру он присутствует в хостлисте первой стратегии, но также есть и в какой-то ещё далее.</p>
</blockquote>
</aside>
<p>Там идет чек профилей от начала в конец.<br>
Если написано несколько раз - будет чек несколько раз, пока не удовлетворятся все условия.<br>
Если удовлетворилось, дальше не идем.<br>
Если ничего не подошло, включается пустой профиль 0. Он подходит всегда, но стоит в конце.</p></td><td>2024-10-14T10:54:06.112Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="donotmesswithme" data-post="1356" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>на пути в интернет вместо одного черного ящика теперь их несколько, на каждом из маршрутов.</p>
</blockquote>
</aside>
<p>Так и есть. Там столько путей и столько желающих что-то ограничить, что получается вот такое.</p>
<aside class="quote no-group" data-username="donotmesswithme" data-post="1356" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b38774/48.png" class="avatar"> donotmesswithme:</div>
<blockquote>
<p>А для badseq и badsum нужен ограничитель по ttl?</p>
</blockquote>
</aside>
<p>Для badseq - нет. Если increment выводит seq  из tcp окна. Сервак такое отбросит.<br>
Дефолтный инкремент -66000 вроде, так что TLS/HTTP уедут точно, учитывая их запрос-ответный характер.<br>
badsum - по идее не должно быть еще что-то нужно. Серваки должны проверять l4 checksum.<br>
Но есть странное исключение. cloudflare это принимает. Так что лучше написать badsum,md5sig</p></td><td>2024-10-14T10:58:32.543Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1362" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Так что лучше написать badsum,md5sig</p>
</blockquote>
</aside>
<p>А если у меня работает вообще без <code>--dpi-desync-fooling</code>-методов, то в принципе оно и не надо, да?<br>
<code>--dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-seqovl-pattern=tls_clienthello_www_google_com.bin</code></p></td><td>2024-10-14T11:08:41.455Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="1360" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>но инсталлятор install_easy с таким не работает. Будут накладки.</p>
</blockquote>
</aside>
<p>при обновлении через инстал изи он забирает настройки старого config и пихает в новый? (если мы указываем сохранить данные), думал он просто его не трогает и затирает, если не указываем сохранить настройки.</p></td><td>2024-10-14T11:11:20.313Z</td></tr><tr><td>disappointed</td><td><p>Что имеется ввиду под всеми условиями? К примеру есть один и тот же домен сразу в паре файлов хостлистов. В первой по счёту от начала стратегии делается только split, а во второй fake,split2, что произойдёт? Какой из двух вариантов будет выбран?</p>
<p><strong>PS Нашёл в доке! Вопрос снят.</strong></p></td><td>2024-10-14T11:12:56.396Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Привет а можно ли настройки вбить в какой то файл а запрету указывать этот файл при запуске просто хочу уйти от .bat и .cmd например вот “winws.exe” -config.cfg</p></td><td>2024-10-14T11:17:35.551Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="Uefi1" data-post="1366" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uefi1/48/10536_2.png" class="avatar"> Uefi1:</div>
<blockquote>
<p>“winws.exe” -config.cfg</p>
</blockquote>
</aside>
<p>а это вы где писать собрались? в консоли? тогда какая разница конфиг-файл или всё в bat-файле?</p></td><td>2024-10-14T11:24:30.982Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="arinoki" data-post="1363" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>А если у меня работает вообще без <code>--dpi-desync-fooling</code>-методов, то в принципе оно и не надо, да?<br>
<code>--dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-seqovl-pattern=tls_clienthello_www_google_com.bin</code></p>
</blockquote>
</aside>
<p>ограничители нужны только для отдельных фейков. Их создает fake,split,disorder.<br>
Для остальных они не нужны, поскольку фейков нет.<br>
Если фейки есть, то без ограничителей tcp сломается с гарантией</p></td><td>2024-10-14T12:05:03.260Z</td></tr><tr><td>bolvan</td><td><p>Да, инсталятор сохранит конфиг.<br>
Но заменить переменную корректно он в нем не сможет, если она на несколько строчек размыта.<br>
Там тупой греп и сед</p></td><td>2024-10-14T12:07:12.088Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Подскажите, пожалуйста, планируется ли возможность замены фейка внутри split или disorder на свой? Что-то вроде --dpi-desync-fake-split=? Как я понимаю сейчас там 0х0000000(64 байта) и поменять нельзя.</p>
<p>Или возможность отправлять несколько фейков  с разным пейлоадом для сложных манипуляций с реконструкцией фейковой TCP сессии (как задел на будущее, возможно уже недалекое учитывая скорость изменения фильтров на тспу). Т.е. например отправляем фейк clienthello, а следом фейк с tls continuation data и потом уже оригинал. Что-то вроде --dpi-desync-fake-tls= --dpi-desync-fake-tls2= и тд</p>
<p>Upd: еще вопрос по methodeol, его можно на nfqws реализовать? Или эксклюзивно для tpws?</p></td><td>2024-10-14T12:31:38.124Z</td></tr><tr><td>bolvan</td><td><p>Напридумывать можно многое, но не факт, что это будет востребовано.<br>
У меня в этом есть сомнения. А тратить время на кодинг сомнительных вещей не охота.<br>
Будет проблема - будет и решение.</p>
<p>methodeol меняет длину пакета. На уровне отдельных пакетов попытка сделать такое сломает sequence для следующих пакетов</p>
<p>Можно комбинировать tpws и nfqws при желании</p></td><td>2024-10-14T12:35:35.454Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> подскажите команду, как сделать свой <code>quic_initial_*.bin</code>.<br>
Проверяю сайт, который пробивается фейком по quic без указания файла, но не пробивается, если указать один из тех, что в репозитории лежат.</p></td><td>2024-10-14T13:14:19.478Z</td></tr><tr><td>bolvan</td><td><p>зайти куда-нибудь , где есть quic, и снять пакет в шарке<br>
можно curl --http3-only. ему вообще пофигу есть ли там что-то или нет на другом конце. initial он отправит</p></td><td>2024-10-14T14:21:15.606Z</td></tr><tr><td>disappointed</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Ещё один вопрос про множественные стратегии: опция --ctrack-timeouts, она задаётся глобально один раз в любом месте аргументов? Или её можно/нужно указывать внутри каждого профиля, и после каждого --new можно указать отличающиеся значения. Этот момент упущен в доке, как себя ведут глобальные опции…</p></td><td>2024-10-14T15:24:53.355Z</td></tr><tr><td>yatolkosprosit</td><td><p>В последние дни начались заметные задержки начала воспроизведения видео на Ютубе. В других случаях воспроизведение может начинаться сразу, но потом видео надолго зависает. Обычно считается, это из-за того, что браузер пробует загружать видео с GGC сервера, установленного у провайдера и который заблокирован. Но как я понимаю, гугловские кэш-сервера попадает только востребованный контент, а я наблюдаю задержку начала воспроизведения видео из американского ютуба на английском языке с канала с мылым числом подписчиков и с четырмя просмотрами. Точно также со стримами. Очевидно, что таких видео нет в кэш-сервере. Тогда что это может быть? Раньше такой проблемы не было.</p></td><td>2024-10-14T15:36:43.417Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="disappointed" data-post="1375" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>опция --ctrack-timeouts, она задаётся глобально один раз в любом месте аргументов?</p>
</blockquote>
</aside>
<p>Глобально. Коннтрак работает с пакетами, а не с профилями, а источник пакетов - один.<br>
Это не параметр дурения</p></td><td>2024-10-14T15:40:55.045Z</td></tr><tr><td>GKV</td><td><p>Здравствуйте! Перешёл на Zapret с GoodbyeDPI и не могу подружить его с Adguard, хотя GBD работал без проблем. Подскажите, пожалуйста, какие настройки надо менять?</p></td><td>2024-10-14T16:13:45.799Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="GKV" data-post="1378" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/gkv/48/11141_2.png" class="avatar"> GKV:</div>
<blockquote>
<p>не могу подружить его с Adguard</p>
</blockquote>
</aside>
<p>Вы обход DPI в adguard выключить не забыли?</p></td><td>2024-10-14T16:14:26.216Z</td></tr><tr><td>GKV</td><td><p>Да, выключен</p></td><td>2024-10-14T16:14:50.656Z</td></tr><tr><td>Ori</td><td><p>Ну тогда хз. А вам сильно прям adguard нужен? Нельзя просто в браузере поставить ublock/adblock или что-нибудь типа того? Ну это как вариант костыльного решения, если прям по-другому никак не получится.</p></td><td>2024-10-14T16:16:05.550Z</td></tr><tr><td>GKV</td><td><p>Ох, ну, честно говоря, хотелось бы продолжить пользоваться Adguard, по этому и обращаюсь за помощью</p></td><td>2024-10-14T16:25:01.078Z</td></tr><tr><td>jestxfot(YoutubeNotWork)</td><td><aside class="quote no-group" data-username="GKV" data-post="1382" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/gkv/48/11141_2.png" class="avatar"> GKV:</div>
<blockquote>
<p>Adguard</p>
</blockquote>
</aside>
<p>Оффтоп, но не понимаю чем вам адгурд угодил. Вы можете включить днс адгуард в браузере, результат будет примерно такой же.</p></td><td>2024-10-14T16:56:28.806Z</td></tr><tr><td>GKV</td><td><p>Просто удобная вырезалка всей рекламы из системы, в том числе на телефонах/планшетах и тд. Удобная интеграция с их же впн, особенно на андройд устройствах. Сейчас, говорят, можно бан от гугла словить за просмотр ютуба через впн, по этому пришлось для ютуба выбирать Zapret</p></td><td>2024-10-14T17:28:33.750Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="GKV" data-post="1384" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/gkv/48/11141_2.png" class="avatar"> GKV:</div>
<blockquote>
<p>Сейчас, говорят, можно бан от гугла словить за просмотр ютуба через впн</p>
</blockquote>
</aside>
<p>Не читайте советские газеты …</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://habr.com/ru/news/848094/#comment_27375412">
  <header class="source">
      <img src="zapret-обсуждение-726/e8fc7b34a1237fbc93fd62548efc1a4df1f7fa72.png" class="site-icon" data-dominant-color="97BFD2" width="16" height="16">

      <a href="https://habr.com/ru/news/848094/#comment_27375412" target="_blank" rel="noopener nofollow ugc">Хабр</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="zapret-обсуждение-726/106f21feb94d8ef97fb5d0e566b59f2a986ccf44_2_498x500.jpeg" class="thumbnail" data-dominant-color="EDEEEE" width="498" height="500"></div>

<h3><a href="https://habr.com/ru/news/848094/#comment_27375412" target="_blank" rel="noopener nofollow ugc">YouTube начал вносить в теневой бан аккаунты за использование публичных VPN и...</a></h3>

  <p>YouTube начал массово вносить в теневой бан аккаунты пользователей, кто смотрит на платформе видеоролики со включённым VPN (публичные бесплатные\платные сервисы), чтобы обойти замедление сервиса в РФ....</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://habr.com/ru/news/848094/#comment_27375474">
  <header class="source">
      <img src="zapret-обсуждение-726/e8fc7b34a1237fbc93fd62548efc1a4df1f7fa72.png" class="site-icon" data-dominant-color="97BFD2" width="16" height="16">

      <a href="https://habr.com/ru/news/848094/#comment_27375474" target="_blank" rel="noopener nofollow ugc">Хабр</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="zapret-обсуждение-726/106f21feb94d8ef97fb5d0e566b59f2a986ccf44_2_498x500.jpeg" class="thumbnail" data-dominant-color="EDEEEE" width="498" height="500"></div>

<h3><a href="https://habr.com/ru/news/848094/#comment_27375474" target="_blank" rel="noopener nofollow ugc">YouTube начал вносить в теневой бан аккаунты за использование публичных VPN и...</a></h3>

  <p>YouTube начал массово вносить в теневой бан аккаунты пользователей, кто смотрит на платформе видеоролики со включённым VPN (публичные бесплатные\платные сервисы), чтобы обойти замедление сервиса в РФ....</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-14T17:35:22.217Z</td></tr><tr><td>GKV</td><td><p>а, вот это интересно, спасибо!</p></td><td>2024-10-14T17:46:38.688Z</td></tr><tr><td>easyone11</td><td><p>adblock можно поставить, у меня работает без доп настроек с запретом</p></td><td>2024-10-14T17:55:32.646Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>А можно в Запрете организовать блоки профилей? То есть составил я мультистратегию из 6 профилей - если этот блок не срабатывает, то включается второй из нескольких профилей. Таким образом, можно было бы сделать несколько блоков профилей, которые бы перебирались.</p></td><td>2024-10-14T18:03:48.628Z</td></tr><tr><td>bolvan</td><td><p>Это вряд ли будет. zapret расчитан на дурение произвольных случаев.<br>
И не всегда можно надежно определить критерий успеха.<br>
Можно утонуть в этих случаях. Все станет совсем путано и сложно</p></td><td>2024-10-14T18:17:10.850Z</td></tr><tr><td>anonymous179(anonymous179)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a></p>
<blockquote>
<p>Если используются скрипты zapret, то в опции NFQWS сначала пишите специальные стратегии для особых доменов. После них пишите --new и дальше то, что было там раньше.<br>
Все свои “фишки” типа стандартных листов / автолиста скрипты zapret добавляют в конец - к последнему профилю десинхронизации.</p>
<p>Если профиль удовлетворяет жесткому фильтру, для него задан хостлист, и у нас еще нет имени хоста, идет переход к следующему профилю. В противном случае идет проверка по хостлистам этого профиля. Если имя хоста удовлетворяет листам, выбирается этот профиль. Иначе идет переход к следующему.</p>
</blockquote>
<p><code>NFQWS_OPT_DESYNC="--hostlist=list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-repeats=8 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-ttl=3 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=google.bin --new --dpi-desync=fake,disorder2 --dpi-desync-ttl=3 --dpi-desync-split-pos=1 --dpi-desync-any-protocol=1"</code></p>
<p>при таком конфиге, что бы не было внутри list-youtube.txt (хоть только один <a href="http://123.com" rel="noopener nofollow ugc">123.com</a>) - не скачиваются приложения из <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a>, скачивает только если файл (с хостами) пустой или отсутствует…</p>
<p>предполагаю, что почему-то на этапе соединения с маркетом соединение попадает в первую стратегию с хостлистом и там и остается, но почему? в остальном все работает корректно как и ожидается…</p></td><td>2024-10-14T18:28:11.668Z</td></tr><tr><td>jdo1313(Jdo1313)</td><td><p>Да, такая же петрушка<br>
<a class="attachment" href="zapret-обсуждение-726/e0LPFlMKpEKfNVjEy87QSEpkVlx.log">blockcheck.log</a> (678,1 КБ)<br>
Ну в принципе такие видео лечатся обновлением страницы</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/3ad09538f0711318b770aca80640435c81cc3126.png" data-download-href="https://ntc.party/uploads/default/3ad09538f0711318b770aca80640435c81cc3126" title="Снимок экрана 2024-10-14 192029"><img src="zapret-обсуждение-726/3ad09538f0711318b770aca80640435c81cc3126_2_690x278.png" alt="Снимок экрана 2024-10-14 192029" data-base62-sha1="8oizXRjAW73TPtO5VPdVmUS77IW" width="690" height="278" srcset="zapret-обсуждение-726/3ad09538f0711318b770aca80640435c81cc3126_2_690x278.png, zapret-обсуждение-726/3ad09538f0711318b770aca80640435c81cc3126_2_1035x417.png 1.5x, zapret-обсуждение-726/3ad09538f0711318b770aca80640435c81cc3126_2_1380x556.png 2x" data-dominant-color="BCBCBD"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-10-14 192029</span><span class="informations">1833×740 208 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-10-14T18:55:22.030Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Ютуб только что снова поломался</p></td><td>2024-10-14T19:18:56.201Z</td></tr><tr><td>bolvan</td><td><p>Зачем предполагать, если есть --debug</p></td><td>2024-10-14T19:40:07.360Z</td></tr><tr><td>Uefi1(Uefi1)</td><td><p>Я говорю ютуб только что поломали опять есть настройки ?</p></td><td>2024-10-14T20:01:05.865Z</td></tr><tr><td>bronyuraj</td><td><p>Почему-то nfqws путает везде SNI записи, несмотря на параметры с хостами.</p>
<p>Конфиг следующий:</p>
<pre><code class="lang-auto"># this file is included from init scripts
# change values here

# can help in case /tmp has not enough space
#TMPDIR=/opt/zapret/tmp

# redefine user for zapret daemons. required on Keenetic
#WS_USER=nobody

# override firewall type : iptables,nftables,ipfw
FWTYPE=nftables

# options for ipsets
# maximum number of elements in sets. also used for nft sets
SET_MAXELEM=522288
# too low hashsize can cause memory allocation errors on low RAM systems , even if RAM is enough
# too large hashsize will waste lots of RAM
IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"
# dynamically generate additional ip. $1 = ipset/nfset/table name
#IPSET_HOOK="/etc/zapret.ipset.hook"

# options for ip2net. "-4" or "-6" auto added by ipset create script
IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"
# options for auto hostlist
AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
# 1 = debug autohostlist positives to ipset/zapret-hosts-auto-debug.log
AUTOHOSTLIST_DEBUGLOG=0

# number of parallel threads for domain list resolves
MDIG_THREADS=30

# ipset/*.sh can compress large lists
GZIP_LISTS=1
# command to reload ip/host lists after update
# comment or leave empty for auto backend selection : ipset or ipfw if present
# on BSD systems with PF no auto reloading happens. you must provide your own command
# set to "-" to disable reload
#LISTS_RELOAD="pfctl -f /etc/pf.conf"

# override ports
#HTTP_PORTS=80-81,85
#HTTPS_PORTS=443,500-501
#QUIC_PORTS=443,444

# CHOOSE OPERATION MODE
# MODE : nfqws,tpws,tpws-socks,filter,custom
# nfqws : nfqws for dpi desync
# tpws : tpws transparent mode
# tpws-socks : tpws socks mode
# filter : no daemon, just create ipset or download hostlist
# custom : custom mode. should modify custom init script and add your own code
MODE=custom
# apply fooling to http
MODE_HTTP=1
# for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet
MODE_HTTP_KEEPALIVE=1
# apply fooling to https
MODE_HTTPS=1
# apply fooling to quic
MODE_QUIC=0
# none,ipset,hostlist,autohostlist
MODE_FILTER=autohostlist

# CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run "nfq/nfqws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (syndata,wssize)
DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000
NFQWS_OPT_DESYNC="--dpi-desync=syndata,disorder2 --dpi-desync-fooling=badseq --dpi-desync-fake-syndata=/opt/zapret/files/fake/tls_clienthello_sberbank_ru.bin --dpi-desync-split-pos=1"
#NFQWS_OPT_DESYNC="--dpi-desync=syndata,disorder2 --dpi-desync-fooling=badseq --dpi-desync-fake-syndata=/opt/zapret/files/fake/tls_clienthello_iana_org.bin --dpi-desync-split-pos=1"
#NFQWS_OPT_DESYNC_SUFFIX=
#NFQWS_OPT_DESYNC_HTTP=
#NFQWS_OPT_DESYNC_HTTP_SUFFIX=
#NFQWS_OPT_DESYNC_HTTPS=
#NFQWS_OPT_DESYNC_HTTPS_SUFFIX=
#NFQWS_OPT_DESYNC_HTTP6=
#NFQWS_OPT_DESYNC_HTTP6_SUFFIX=
#NFQWS_OPT_DESYNC_HTTPS6=
#NFQWS_OPT_DESYNC_HTTPS6_SUFFIX=
#NFQWS_OPT_DESYNC_QUIC=
#NFQWS_OPT_DESYNC_QUIC=
#NFQWS_OPT_DESYNC_QUIC_SUFFIX=
#NFQWS_OPT_DESYNC_QUIC6=
#NFQWS_OPT_DESYNC_QUIC6_SUFFIX=

# CHOOSE TPWS DAEMON OPTIONS. run "tpws/tpws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (mss)
TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"
#TPWS_OPT_SUFFIX="--mss 88"

# openwrt only : donttouch,none,software,hardware
FLOWOFFLOAD=donttouch

# openwrt: specify networks to be treated as LAN. default is "lan"
#OPENWRT_LAN="lan lan2 lan3"
# openwrt: specify networks to be treated as WAN. default wans are interfaces with default route
#OPENWRT_WAN4="wan vpn"
#OPENWRT_WAN6="wan6 vpn6"

# for routers based on desktop linux and macos. has no effect in openwrt.
# CHOOSE LAN and optinally WAN/WAN6 NETWORK INTERFACES
# or leave them commented if its not router
# it's possible to specify multiple interfaces like this : IFACE_LAN="eth0 eth1 eth2"
# if IFACE_WAN6 is not defined it take the value of IFACE_WAN
#IFACE_LAN=eth0
#IFACE_WAN=eth1
#IFACE_WAN6="ipsec0 wireguard0 he_net"

# should start/stop command of init scripts apply firewall rules ?
# not applicable to openwrt with firewall3+iptables
INIT_APPLY_FW=1
# firewall apply hooks
#INIT_FW_PRE_UP_HOOK="/etc/firewall.zapret.hook.pre_up"
#INIT_FW_POST_UP_HOOK="/etc/firewall.zapret.hook.post_up"
#INIT_FW_PRE_DOWN_HOOK="/etc/firewall.zapret.hook.pre_down"
#INIT_FW_POST_DOWN_HOOK="/etc/firewall.zapret.hook.post_down"

# do not work with ipv4
#DISABLE_IPV4=1
# do not work with ipv6
DISABLE_IPV6=1

# select which init script will be used to get ip or host list
# possible values : get_user.sh get_antizapret.sh get_combined.sh get_reestr.sh get_hostlist.sh
# comment if not required
#GETLIST=
</code></pre>
<p>Содержимое init.d custom</p>
<pre><code class="lang-auto">➜  zapret git:(master) ✗ ls init.d/openwrt/custom.d/ -la
drwxr-xr-x    2 root     root          4096 Oct 13 19:26 .
drwxr-xr-x    4 root     root          4096 Oct 13 00:09 ..
-rw-r--r--    1 root     root             0 Oct 13 00:09 .keep
-rw-r--r--    1 root     root           437 Oct 13 01:08 10-inherit-nfqws
-rw-r--r--    1 root     root         13099 Oct 13 19:26 50-discord
</code></pre>
<p>Скрипты без изменений.</p>
<p>Все TLS handshake теперь выглядят так на любой хост, даже если его нет в хостлисте, но спасает введение в список zapret-hosts-user-exclude.txt.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ed0abecb1d84c26c94e66624107bbf22452f95ac.png" data-download-href="https://ntc.party/uploads/default/ed0abecb1d84c26c94e66624107bbf22452f95ac" title="image"><img src="zapret-обсуждение-726/ed0abecb1d84c26c94e66624107bbf22452f95ac.png" alt="image" data-base62-sha1="xOYbifxQo3dhoEnrLL6q25zrW6o" width="690" height="448" data-dominant-color="ADAFBB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1161×755 59.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Я что-то упускаю?</p>
<p>Из-за неправильных SNI часть вебов просто не хочет работать.</p></td><td>2024-10-14T22:47:27.997Z</td></tr><tr><td>bronyuraj</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/3bc71b145418146190882dd1a44d6caa6d30889d.png" data-download-href="https://ntc.party/uploads/default/3bc71b145418146190882dd1a44d6caa6d30889d" title="image"><img src="zapret-обсуждение-726/3bc71b145418146190882dd1a44d6caa6d30889d_2_690x189.png" alt="image" data-base62-sha1="8wOKGe2bPCbk974Cfh635gQXAN7" width="690" height="189" srcset="zapret-обсуждение-726/3bc71b145418146190882dd1a44d6caa6d30889d_2_690x189.png, zapret-обсуждение-726/3bc71b145418146190882dd1a44d6caa6d30889d_2_1035x283.png 1.5x, zapret-обсуждение-726/3bc71b145418146190882dd1a44d6caa6d30889d_2_1380x378.png 2x" data-dominant-color="4E525C"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2246×618 110 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Запустил руками в режиме дебаг и другим TLS handshake.bin, теперь проблемы нет, я запутался…</p></td><td>2024-10-14T23:41:26.908Z</td></tr><tr><td>doomer2007</td><td><p>Здравствуй, спасибо, что помогаете, и простите что отнял у вас время. Запрет я наконец смог завести, решил проблему самым очевидным способом, перепрошил свой банан.<br>
В этот банан напаяно три вида памяти (nor, nand, emmc) для разных нужн, каждую можно довольно легко прошить, но так же он поддерживает прямой запуск с sd карты. Я собрал новый образ, вставил карту, поставил запрет и он заработал, стало очевидно, что дело именно в прошивке.<br>
Прошлый образ я собирал через сайт, указав дополнительные модули для кастомной установки. Я делал это не впервый раз. В основном там были те штуки, что просит сам запрет (kmod-nft-queue kmod-nfnetlink-queue coreutils-sort и тд), и некоторые вещи для работы с usb, модули для люси, где должны выводиться метрики температуры и загрузки цп. Хоть я обычно ей и не пользуюсь, тут я явно накидал всякого и погуще, раз новая машинка позваляла. Собственно в другом роутере было все тоже самое, но без этих модулей с метриками и модулей usb. Нужно было сразу догадаться проверить, а не отнимать время у себя и вас.<br>
В этот раз я указывал только самое необхомое, как делаю обычно. В итоге прошился и всё теперь работает.<br>
Но понять до конца, что конкретно могло конфликтовать я не смог. Я воспользовался до полной переустановки вашим советов:</p>
<blockquote>
<p>И посмотреть висят ли процессы на нужных очередях<br>
ps | grep nfqws</p>
</blockquote>
<p>И тогда я и заметил, что в какой-то момен nfqws просто переставал работать. Из трёх процессов сначала оставался висеть один, потом пропадал и он. Всё это происходило в течении одной минуты.</p>
<pre><code class="lang-auto"> 8221 daemon   17888 S    /opt/zapret/nfq/nfqws --qnum=200 --user=daemon --dpi-desync-fwmark=0x40000000 -debug=@/opt/zapret/log_nfqws.txt --hostlist=/opt/zapret/list-youtube.txt --dpi-desync=split2 --new --dpi-desync=fake,split --dpi-desync-fooling=datanoack
 8222 daemon   17884 S    /opt/zapret/nfq/nfqws --qnum=202 --user=daemon --dpi-desync-fwmark=0x40000000 --hostlist=/opt/zapret/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack
 8223 daemon   17884 S    /opt/zapret/nfq/nfqws --qnum=210 --user=daemon --dpi-desync-fwmark=0x40000000 --hostlist=/opt/zapret/list-youtube.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new --dpi-desync=fake --dpi-desync-repeats=2
 8295 root      1656 S    grep --color=yes nfqws
 8296 root      1320 S    tee ps_nfqws_bpi-r3.txt
</code></pre>
<p>Найти, пробежавшись по логам, какого-то конфликта и ошибок, явно указывающий на пробемы, я не смог. Всё, что давал лог запрета, я кидал ранее.</p></td><td>2024-10-15T01:43:30.109Z</td></tr><tr><td>lxpcfc</td><td><p>Настроек универсальных может не быть. Во-первых, ваш вопрос скорее сюда:</p><aside class="quote quote-modified" data-post="1" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Примечание: На время проверки нужно отключить  фаерволл / брандмауэр / антивирус. 
Если до этого стоял goodbyedpi, то запустить от имени администратора service_remove.cmd 

Скачать и распаковать архив <a href="https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip</a>

<details><summary>Примечание для системы x32 либо windows 7:</summary>На x32 zapret не работает, а на windows 7 нужно скопировать файлы WinDivert.dll и WinDivert64.sys из папки x86_64\ с goodbyedpi и заменить в zapret-е в 2 местах: blockcheck\zapret\n…</details>
  </blockquote>
</aside>
<p>
Во-вторых, проверьте для начала рабочие стратегии с отключёнными обходчиками с помощью Goodcheck:</p><aside class="quote quote-modified" data-post="1" data-topic="10880">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar">
    <a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880">GoodCheck - блокчек-скрипт для GoodbyeDPI, Zapret, ByeDPI</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    Новый билд: 
<a class="attachment" href="zapret-обсуждение-726/ntisRLkRucCSo2KaP0YNq5dixxr.zip">GoodCheck_v1.3.02.zip</a> (6,5 МБ) 
Тестовый билд с автоматической проверкой doh: 
<a class="attachment" href="zapret-обсуждение-726/a0CYAngSAAoJZnIvlZ4dQpr3soK.zip">GoodCheck_v1.3.06.zip</a> (6,5 МБ) 
Новый билд с отдельным чеклистом для Ютуба (проверяются только домены, нужные для его работы) 
<a class="attachment" href="zapret-обсуждение-726/hshievjMZuvnEKV35Zf7IrjkUiv.zip">GoodCheck_v1.3.07.zip</a> (6,5 МБ) 

Скрипт, похожий по функционалу на блокчек Zapret’a. Изначально делался для GDPI. Потом разросся в более универсальный и стал совместим с gdpi, zapret и byedpi. 
Как этим пользоваться? 

Кладёте всё в отдельную папку. Открываете config.cmd блокнотом…
  </blockquote>
</aside>
</td><td>2024-10-15T06:01:21.893Z</td></tr><tr><td>bolvan</td><td><p>Используется syndata. syndata не работает с хостлистами.<br>
Поскольку используется autohostlist, этот профиль является приоритетным, и на него падает syndata.<br>
Применение идет с игнором хостлиста.<br>
disorder применяется по хостлисту.<br>
То есть для всех в хостлисте - syndata,disorder.  Для остальных - syndata</p></td><td>2024-10-15T06:02:32.853Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="doomer2007" data-post="1397" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>И тогда я и заметил, что в какой-то момен nfqws просто переставал работать. Из трёх процессов сначала оставался висеть один, потом пропадал и он. Всё это происходило в течении одной минут</p>
</blockquote>
</aside>
<p>В dmesg ничего не было ?<br>
Может какая-то ошибка диска, рид еррор или что-то еще ?<br>
Про OOM не спрашиваю. На банане там гигабайт(ы)</p></td><td>2024-10-15T06:08:53.177Z</td></tr><tr><td>alkoro(alkoro)</td><td><p>Полагаю, нужно написать в этой теме. Использовал сборку YTDisBystro на Windows Server 2008 R2.</p>
<p>При запуске winws.exe выдаётся сообщение <em>не найдена wlanapi.dll</em>. На данном сервере нет поддержки WLAN, да и не нужна она там. Понятно, что можно скопировать dll от windows 7(x64) или извлечь из дистрибутива, но всё же. Проблема то копеечная, возможно ли совсем не использовать эту библиотеку?<br>
DLL от windows 7 можно положить прямо в папку с программой, тогда всё запускается и работает. Спасибо.</p></td><td>2024-10-15T06:35:28.677Z</td></tr><tr><td>bolvan</td><td><p>Легко установить поддержку WLAN через установку/удаление компонентов. servermanager<br>
wlanapi используется для функции --ssid-filter</p></td><td>2024-10-15T06:44:45.744Z</td></tr><tr><td>alkoro(alkoro)</td><td><p>Спасибо, нашёл в Server Manager - Features- Add Features. Да, действительно, Wireless LAN Service не была установлена, видимо, по умолчанию, сейчас пошёл в другой сервер посмотреть - то же самое.</p></td><td>2024-10-15T06:51:47.843Z</td></tr><tr><td>bolvan</td><td><p>Именно так. По умолчанию не ставится.<br>
А так на серверных версиях есть практически все, но только надо доустанавливать.<br>
Начиная, с desktop experience.<br>
Я уже давно ушел с клиентских версий и использую как десктоп серверные.<br>
Работает практически все. За крайне редким исключением. И игры гоняются даже, хотя бывает надо пошаманить с AMD driver</p></td><td>2024-10-15T06:53:13.109Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> , что-то с утра задумался по поводу tls1.2/tls1.3. Насколько я понял на большинстве сайтов уже используется 1.3, так что стратегию видимо оптимально под него подбирать (я не говорю про quic - это отдельная тема).<br>
Но как грамотно сделать fallback для 1.2? Отдельно ручками заносить в отдельный hostlist домены с 1.2 с соответствующими правилами или есть более элегантное решение?</p></td><td>2024-10-15T07:38:12.626Z</td></tr><tr><td>bolvan</td><td><p>Я уже писал неоднократно, что TLS 1.2 - это гиря 50 кг, а TLS 1.3 - 20 кг.<br>
качок, поднявший 50, поднимет и 20.  20 только когда лучше, чем ничего</p></td><td>2024-10-15T08:02:40.196Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Да, эти ваши слова я помню.<br>
Просто дело в контексте rr*-.googlevideo.com-хостов. В случае с tls 1.2 blockcheck выдаёт буквально пару рабочих вариантов, в случае с 1.3 - достаточно много. И, очевидно, что ютуб поддерживает 1.3. Проблема в том, что пересечений по работающим стратегиям между 1.2 и 1.3 нет.<br>
Поэтому я и подумал что надо как-то отдельно правила для 1.2 и 1.3 сделать.</p></td><td>2024-10-15T08:21:05.477Z</td></tr><tr><td>bronyuraj</td><td><p>А я вот когда переключил, как на втором месседже, что произошло? А wireshark SNI стали корректными и заработали сайты, которые раньше не работали без исключения. Просто именно такая комбинация обходит почти все блокировки.</p></td><td>2024-10-15T08:32:33.945Z</td></tr><tr><td>nicolasDmit</td><td><p>Вопрос. Никто не совмещал zapret с проектом kvas или подобным? Хочется, чтобы рядом была поднята маршрутизация, которая будет определенный список доменов заворачивать в VPN соединение.</p></td><td>2024-10-15T08:40:13.405Z</td></tr><tr><td>doomer2007</td><td><p>Пробегая глазами, не заметил. Скопировать весь лог, для более тщательной проверки уже не подумал, потому что уже стало ясно, что проблема решаема. Про диск тоже не исключаю, я разметил систему по другому.<br>
Установка проходила там у меня таким образом, но это не единственный способ. Грузишься с сд карты и шьёшь в нанд, грузишься с нанда и шьёшь еммс. Прошить еммс с сд нельзья, они сидят на одном интерфейсе  SoC. Потом грузишься с еммс, и можешь расширить раздел, потому что тебе почти ничего не доступно из 8 гб. И этот раздел довольно странно описан на странице опенврт.<br>
Когда я шился второй раз, я просто прошился в нанд. С нанда отформатировал и сделал разметку еммс и ничего туда не шил. Фстабом примонтировал 4 гб для /opt и ещё половину оставил, пока не решив куда.<br>
Шиться отдельно на еммс довольно странно. Это скорее стратегия для полноценных линуксов, и в доке на сайте самого банана там шьют его на убунту. Нужно было сразу чуть больше думать головой, а не слепо следовать инструкциям, но нужно сказать, на сайте опенврт, там тоже есть указание еще и шить на еммс и зачем-то криво после расширять разделы.</p></td><td>2024-10-15T08:50:49.813Z</td></tr><tr><td>srvsub</td><td><p>А что значит “совмещал”? Объединить в один проект? zapret и kvas в keenetic дружно живут и дополняют друг друга без каких-либо конфликтов. В kvas поднят ss, настроена выборочная маршрутизация (chatgpt и т.п.), а все остальное идет через zapret. Все ставилось по стандартным инструкциям, ничего дополнительного не настраивалось.</p></td><td>2024-10-15T08:56:34.428Z</td></tr><tr><td>doomer2007</td><td><p>А что вообще со стандартными курлами, почему во всех репах линуксов и стандартных бинарниках, они не поддерживают http3? Нужно собирать самому или искать бинарник на гите с поддержкой.</p></td><td>2024-10-15T09:14:46.261Z</td></tr><tr><td>spv82</td><td><p>OpenSSL? В дебиане недавно добавили поддержку http3 после миграции на GnuTLS. Хотя дебиан консервативен.</p></td><td>2024-10-15T09:24:12.708Z</td></tr><tr><td>doomer2007</td><td><p>Думаю вы правы, бегло пробежался глазами, что пишут. Опенссалом не довольны. Когда был другой роутер, читал инструкцию библиотеки вульфссл, как скомпилировать курл с ней, для поддержки. В дебиане завезли поддержку, опять же выбросив опенссл.</p></td><td>2024-10-15T09:34:54.884Z</td></tr><tr><td>doomer2007</td><td><p>Тут тогда вопрос, зачем другие, включая опенврт, тянут опенссл для этого.</p></td><td>2024-10-15T09:38:40.937Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="arinoki" data-post="1408" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>В случае с tls 1.2 blockcheck выдаёт буквально пару рабочих вариантов, в случае с 1.3 - достаточно много. И, очевидно, что ютуб поддерживает 1.3. Проблема в том, что пересечений по работающим стратегиям между 1.2 и 1.3 нет.<br>
Поэтому я и подумал что надо как-то отдельно правила для 1.2 и 1.3 сделать.</p>
</blockquote>
</aside>
<p>Блокчек перестает тестировать некоторые варианты, которые уже заведомо бессмысленны.<br>
Например, если сработал split2 , то нет смысла тестить fake, split2  fake,split .<br>
Если сработал disorder2, не нужен тест на disorder<br>
Если сработал TTL=3, то нет смысла гнать TTL=4,5,6</p>
<p>TLS1.3 отличается с точки зрения DPI только тем, что в ServerHello нет сертификата, по которому можно понять домен. И это облегчает жизнь обманщикам , потому что появлиять на ответ сервера гораздо сложнее, чем изуродовать запрос клиента.</p></td><td>2024-10-15T09:39:01.559Z</td></tr><tr><td>nicolasDmit</td><td><p>Да, я имел ввиду, что рядом поставить kvas + zapret.</p></td><td>2024-10-15T09:39:34.527Z</td></tr><tr><td>bolvan</td><td><p>Шарк не всегда показывает в кратком виде то, что там есть на самом деле<br>
Надо делать follow tcp stream и смотреть отдельные пакеты.<br>
В частности те, что tcp.flags.syn==1</p></td><td>2024-10-15T09:51:46.667Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Если бы разбирались - то не задавали бы подобных вопросов, а самостоятельно прогнали blockcheck и нашли новые параметры.</p></td><td>2024-10-15T10:51:32.229Z</td></tr><tr><td>donotmesswithme</td><td><p>Если кому-то интересно развитие ситуации - например на этот сервер <a href="http://rr2---sn-4g5lznl6.googlevideo.com" rel="noopener nofollow ugc">rr2---sn-4g5lznl6.googlevideo.com</a> помог достучаться tls clienthello от <a href="http://drive.google.com" rel="noopener nofollow ugc">drive.google.com</a> снятый при помощи Wireshark. Я не на столько специалист, чтоб провести анализ и сравнить его с коробочным tls_clienthello_www_google_com.bin, но по личным ощущениям ютуб стал стабильнее достукиваться до серверов.</p></td><td>2024-10-15T12:19:35.074Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Поделитесь файлом?</p></td><td>2024-10-15T12:57:09.782Z</td></tr><tr><td>abc555</td><td><p>Подскажите, как на запрете включить обратную фрагментацию со значением 2, по типу как на гудбае ? Какой параметр, покажите на примере как это сделать, если конечно в нём есть такая функция</p></td><td>2024-10-15T13:18:45.707Z</td></tr><tr><td>bolvan</td><td><p>tpws --split-pos=2 --disorder<br>
nfqws --dpi-desync=disorder2</p></td><td>2024-10-15T13:40:14.495Z</td></tr><tr><td>spv82</td><td><p>curl + netcat : <a href="https://gist.github.com/spvkgn/82b396ff3f9ba0c19d1536a1e5c4777c" class="inline-onebox" rel="noopener nofollow ugc">Capture TLS Client Hello · GitHub</a></p>
<p><a class="attachment" href="zapret-обсуждение-726/bJKqsVlLmX9Prd2vhxXlAHlHX7E.zip">tls_clienthello_drive_google_com.zip</a> (594 байта)</p></td><td>2024-10-15T14:04:47.063Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Благодарю. А если под quic подправить скрипт, корректно снимется?</p></td><td>2024-10-15T14:56:53.221Z</td></tr><tr><td>abc555</td><td><p>Не работает или я что то делаю не так. На роуторе в запрете просто ставлю<br>
на nfqws<br>
NFQWS_OPT_DESYNC_HTTPS_SUFFIX=“–dpi-desync=disorder2”<br>
запускаю вайбер на пк, не работает, включаю на компе гудбай с обратной фрагментацией 2, больше ничего не добавлял, вайбер на пк работает<br>
пробовал разные варианты на роуторе и ничего не получилось<br>
остальные наверно почти все сайты работают и работают хорошо на пк, включая даже этот без гудбая</p></td><td>2024-10-15T15:04:33.826Z</td></tr><tr><td>bolvan</td><td><p>Почему SUFFIX ? Он нужен только для тех десинхронизаций нулевой фазы, которые отсекаются по hostlist из-за незнания имени хоста на тот момент</p></td><td>2024-10-15T15:06:16.596Z</td></tr><tr><td>abc555</td><td><p>Я ставил во все варианты и не как.<br>
Так же ставлю к примеру NFQWS_OPT_DESYNC=“–dpi-desync=fake,split2 --dpi-desync-fooling=md5sig,badsum и в конце добавляю --new” и у меня открывается всё, если убрать --new, то только список zapret-hosts-user.txt работает, добавил  --new и всё открывается ))<br>
Важно только вот этот параметр --dpi-desync-fooling=md5sig,badsum, если к примеру поставить --dpi-desync-fooling=md5sig, то некоторые сайты не открываются которые работают без обхода, почему так происходит я понятия не имею, но меня вполне это устраивает. С параметром md5sig,badsum работает всё как надо, косяков не заметил<br>
На роуторе памяти нет и добавлять почти трёх мегабитный список некуда<br>
Запрет если втулил на роутер с флеш 8 мгб, так же стоит адблок и dns doh и всё это нужно было чтоб в него залезло. Прошивку собрал добавив пакеты в образ unzip kmod-nfnetlink-queue kmod-nft-queue gzip curl, это экономит место и должна она весить не больше чем 6.87, тогда запрет становится, места правда не остаётся совсем. Думаю сохранить с гитхаба вашу сборку, на случай если вы её обновите и некуда будет её воткнуть в будущем.<br>
Забыл добавить, свободного места должно оставаться после прошивки со всеми пакетами не меньше чем 540 килобайт на openwrt<br>
У меня реально закипел мозг, чтоб выщитать, так как нужны и другие функции, удалять чтоб освободить место doh или эдблок не вариант.<br>
bolvan Вы не отключайте --new, нормальная тема, для тех у кого нет места для списка и все все сайты работают без ошибок. У меня когда я коряво настроил, не загружается один список в адблок, не запускается сетевая игра и не работает один сайт от игры. Благодаря моей игре, я роутер настроил с самого начала и до сих пор она меня выручает, если бы ни она, то я бы и не заметил.<br>
QUIC  я заблокировал в роуторе udp 443 на вход, выход и перенаправление, так же и в raw_prerouting и raw_output, специально включил QUIC в браузере и он не работает, тем самым отключил его на всех устройствах не зависимо включён он или нет.<br>
На одном из хитрых провайдеров на ящике перестал работать ютуб и на айфоне тоже, хотя на компе с 7 летает, почему я так и не понял, хотя в роуторе ttl сделал одинаковый для всех устройств и причина точно не в ttl почему не работает на ящике, операционка там веб ос и работает так же как айфон, сначала спрашивает у хозяина, ну типа можно я посмотрю ютуб, а он,ну ладно давай смотри, шляпа конечно, не знаю как это отключить на ящике. то есть без ведома майка, на нём нифига работать не будет, такая наглость, я в шоке с этих нано технологий</p></td><td>2024-10-15T15:15:06.102Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>О, спасибо большое. На Windows тоже сработало (внезапно разобрался как прикрутить bash через busybox <img src="https://ntc.party/images/emoji/twitter/grin.png?v=12" title=":grin:" class="emoji" alt=":grin:" loading="lazy" width="20" height="20"> )</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/6f4181287fc710f01187134d00d9e811dbcb4b3d.png" data-download-href="https://ntc.party/uploads/default/6f4181287fc710f01187134d00d9e811dbcb4b3d" title="image"><img src="zapret-обсуждение-726/6f4181287fc710f01187134d00d9e811dbcb4b3d.png" alt="image" data-base62-sha1="fSdlcHViO0rfKMdNO9cojLHQ313" width="690" height="63" data-dominant-color="262626"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1112×102 4.59 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-10-15T15:26:42.725Z</td></tr><tr><td>abc555</td><td><p>И ещё один вопрос, как обновлять запрет на роуторе ? Я неделю его только как поставил, ещё только осваиваю. Это надо делать полный сброс роутера и заново устанавливать ? Так как места не осталось, я просто не уверен что заново запустить команду<br>
wget -O “/tmp/zapret-master.zip” <a href="https://github.com/bol-van/zapret/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/archive/refs/heads/master.zip</a><br>
оно может и обновится, я не пробовал, но перепишет ли файлы или лучше на чистую с нуля заливать ?</p></td><td>2024-10-15T15:33:16.762Z</td></tr><tr><td>C0u1dnt(C0u1dnt)</td><td><p>Рабочий конфиг на РСТ есть у кого? Вообще все варианты перепробовал которые есть…</p></td><td>2024-10-15T17:31:43.960Z</td></tr><tr><td>bolvan</td><td><p>Можно крутить-вертеть параметрами без понимания, и авось что-то сработает.<br>
Но это не значит, что оно работает правильно.<br>
Сейчас сработало, но сработает ли в другом случае ? Будет ли ожидаемый результат ? Не факт</p></td><td>2024-10-15T17:34:18.073Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>скрипт реально работает и в busyboх и просто ручным запуском nc и curl. Только файлы получаются немного разные в зависимости от версии curl.<br>
<a class="mention" href="/u/spv82">@spv82</a> спасибо за ссылку.</p></td><td>2024-10-15T17:35:34.285Z</td></tr><tr><td>bolvan</td><td><p>/tmp в RAM, там должно хватить места, если роутер не с 32 мб.<br>
метод молотка обычно не нужен</p></td><td>2024-10-15T17:35:47.985Z</td></tr><tr><td>doomer2007</td><td><p>У меня есть арчер с6 с 8мб. В 7 мб влезла 23.05 с вайргардом и всеми зависимосятими для запрета, но без люси. С самим запретом осталось около 300 кб. Так что даже на таком, всё самое новое может работать.</p></td><td>2024-10-15T18:09:27.770Z</td></tr><tr><td>bolvan</td><td><p>Зависимости можно через билдер засунуть в скваш, чтобы больше места осталось</p></td><td>2024-10-15T18:20:37.452Z</td></tr><tr><td>doomer2007</td><td><p>Это всё так. По хорошему, можно было ещё очень много сделать, но я делал не для чего. Просто было спортивно интересно. Постоянным роутером до моего злосчастного банана, был уже ax3200. он же AX6S со 120 мб нанд. Я просто был удивлен, что 23 версия всё ещё работает на 8мб, хотя вроде уже давно грозились меньше 16 не рассматривать.</p></td><td>2024-10-15T18:49:25.280Z</td></tr><tr><td>lsblk</td><td><p>Всем привет!<br>
Подскажите, в конфиге <code>NFQWS_OPT_DESYNC</code> от <code>NFQWS_OPT_DESYNC_HTTPS</code> чем отличается?<br>
Не могу понять, почему<br>
<code>NFQWS_OPT_DESYNC_HTTPS="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-autottl=2"</code> работает,<br>
а<code> NFQWS_OPT_DESYNC="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-autottl=2"</code> - нет, при прочих равных.<br>
Сначала как я понял, что второе - это HTTP, но потом гляжу, а все вроде задают через <code>NFQWS_OPT_DESYNC</code>, а<br>
<code>NFQWS_OPT_DESYNC_HTTPS</code> не юзают вообще.</p>
<p>Подбираю параметры для ютуба (pipepipe) на ведре. На пк в брвузере ютуб работает через http3, банально<br>
<code>NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin"</code>, но ведро не хочет так.</p></td><td>2024-10-15T23:16:43.652Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>а blockcheck’ом воспользовались вообще?</p></td><td>2024-10-16T00:01:21.789Z</td></tr><tr><td>Fr0stmatic</td><td><p>Прошу помочь с портированием конфига из сборки <a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/11624">YTDisBystro</a> с Windows на Linux. В частности, хотел бы использовать его на роутере с OpenWrt.<br>
Сам извозился с его разнесением по протоколам с портами, но добился лишь частичного результата с полурабочим russia-blacklist и Discord без звонков (в отличие от виндовой сборки, где и с auto-ttl все листы и стратегии работают)</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --wf-udp=443,50000-50020 ^
--filter-udp=443 --hostlist="%~dp0russia-youtubeQ.txt" --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtubeGV.txt" --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtube.txt" --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-autottl --new ^
--filter-tcp=80 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new ^
--filter-tcp=443 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --dpi-desync-autottl --new ^
--filter-udp=443 --hostlist="%~dp0russia-discord.txt" --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=443 --hostlist="%~dp0russia-discord.txt" --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new ^
--dpi-desync=fake,split2 --hostlist-auto="%~dp0autohostlist.txt" --hostlist-exclude="%~dp0netrogat.txt" --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre></td><td>2024-10-16T01:50:44.173Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Пофиксил свою небольшую проблему с yt-dlp и hostlist-auto - не успевали домены добавляться до таймаута yt-dlp.<br>
Достаточно оказалось добавить <code>--hostlist-auto-fail-threshold=1 --hostlist-auto-fail-time=3</code><br>
Правда вот воспроизведение в PotPlayer’e это пока не починило.</p></td><td>2024-10-16T02:07:59.870Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Интересно все-таки, любой ненулевой quic-fake у меня теперь ломает обход:</p>
<pre><code class="lang-auto">&gt; winws --wf-udp=443 --hostlist=h_ot.txt --dpi-desync=fake
&gt; curl3 --http3-only -ISs --max-time 1 https://meduza.io
HTTP/3 200

&gt; winws --wf-udp=443 --hostlist=h_ot.txt --dpi-desync=fake --dpi-desync-fake-quic=zero_256.bin
&gt; curl3 --http3-only -ISs --max-time 1 https://meduza.io
HTTP/3 200

&gt; winws --wf-udp=443 --hostlist=h_ot.txt --dpi-desync=fake --dpi-desync-fake-quic=quic_initial_vk_com.bin
&gt; curl3 --http3-only -ISs --max-time 1 https://meduza.io
curl: (28) Connection timed out after 1012 milliseconds
</code></pre></td><td>2024-10-16T03:57:41.479Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>quic у меня в принципе в браузере отключен, и конкретно с медузой ситуация вообще любопытная - открывается вообще без обхода.<br>
А вот с quic_initial_vk_com.bin</p>
<pre><code class="lang-auto"> curl --http3-only -ISs --max-time 2 https://google.com
HTTP/3 301
location: https://www.google.com/
content-type: text/html; charset=UTF-8
content-security-policy-report-only: object-src 'none';base-uri 'self';script-src 'nonce-xVM6YrAr9LzvobXdaE1S7Q' 'strict-dynamic' 'report-sample' 'unsafe-eval' 'unsafe-inline' https: http:;report-uri https://csp.withgoogle.com/csp/gws/other-hp
date: Wed, 16 Oct 2024 04:23:23 GMT
expires: Fri, 15 Nov 2024 04:23:23 GMT
cache-control: public, max-age=2592000
server: gws
content-length: 220
x-xss-protection: 0
x-frame-options: SAMEORIGIN
alt-svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
</code></pre></td><td>2024-10-16T04:24:32.174Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="arinoki" data-post="1443" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>Правда вот воспроизведение в PotPlayer’e это пока не починило.</p>
</blockquote>
</aside>
<p>пофиксил, добавив <code>--dpi-desync-repeats=10</code></p></td><td>2024-10-16T05:15:56.757Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>У меня большая половина доменов в хостлисте обходится дурилкой по quic, поэтому считаю нецелесообразным вообще отключать его в браузере.</p>
<p>301 - это просто редирект на www.</p></td><td>2024-10-16T05:45:36.487Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="lsblk" data-post="1440" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/ba9def/48.png" class="avatar"> lsblk:</div>
<blockquote>
<p>Подскажите, в конфиге <code>NFQWS_OPT_DESYNC</code> от <code>NFQWS_OPT_DESYNC_HTTPS</code> чем отличается?<br>
Не могу понять, почему<br>
<code>NFQWS_OPT_DESYNC_HTTPS="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-autottl=2"</code> работает,<br>
а<code> NFQWS_OPT_DESYNC="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-autottl=2"</code> - нет, при прочих равных.</p>
</blockquote>
</aside>
<p>HTTPS - это специализация под 443 порт. Переопредяется общая стратегия и в случае отличия параметров вызывается отдельный инстанс на порт 443.<br>
Если не задать OPT_DESYNC или OPT_DESYNC_HTTP и MODE_HTTP=1, то http будет запускаться с пустыми параметрами дурения. То есть лишь разбрасывание ресурсов без эффекта.<br>
У вас должно быть стратегия вызывает проблемы с http. На ТСПУ частенько badseq ломает http</p></td><td>2024-10-16T05:47:22.493Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1444" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Интересно все-таки, любой ненулевой quic-fake у меня теперь ломает обход:</p>
</blockquote>
</aside>
<p>Это всегда так было. По умолчанию фейк - 0x40 00 00 00 …<br>
Симуляция short header.<br>
На моих провайдерах Initial-ы не работали для пробития изначально.<br>
Но могут работать на googlevideo</p></td><td>2024-10-16T05:54:08.205Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="arinoki" data-post="1443" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>Достаточно оказалось добавить <code>--hostlist-auto-fail-threshold=1 --hostlist-auto-fail-time=3</code></p>
</blockquote>
</aside>
<p>Хреновые  параметры. Будут на любой чих реагировать. Любое подвисание сервера и все</p></td><td>2024-10-16T05:55:54.447Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>А какие параметры лучше - threshold=3 и time=30 хотя бы? Так будет лучше?</p></td><td>2024-10-16T06:10:27.749Z</td></tr><tr><td>doomer2007</td><td><p>Ночью отключалось электричество, это не норма, там где я живу. С утра заметил, что не работает ютуб. Перезагрузил запрет и все заработало. Последняя запись в логе была, что он не может открыть текстовый файл с доменами ютуба. Есть мысли, почему это технически произошло?</p></td><td>2024-10-16T08:43:06.051Z</td></tr><tr><td>hpdevfox(hpdevfox)</td><td><p>Зависает роутер на openWRT (23.05.4) из-за запрета, судя по логике из-за скрипта, роутер зависает при запуске если подключен интернет и не убить запрет (после подключения к инету можно запустить install_easy.sh, запрет заработает и все будет хорошо). Также роутер падает в 2 часа ночи. Видимо какой то скрипт обновления его ложит (?)</p></td><td>2024-10-16T12:30:16.080Z</td></tr><tr><td>abc555</td><td><p>Маловероятно что из за запрета у вас виснет роутер. У меня версия 23.05.5, использую nftables. Если вы внимательно почитаете о wrt, то там написано, что эти новые версии не очень дружат с iptables и возможны косяки. Так же причина может быть в чём угодно, от не правильной настройки самого роутера и до бесконечности</p></td><td>2024-10-16T12:50:14.260Z</td></tr><tr><td>bolvan</td><td><p>Перед тем, как менять параметры автолиста, надо изучить его дебаг лог и понять что происходит.<br>
Действительно ли изменение параметров может что-то дать.</p></td><td>2024-10-16T12:54:07.322Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Изучил. Запрещенный домен у меня добавляется теперь в диапазоне 30 секунд:</p>
<pre><code class="lang-auto">16.10.2024 17:28:05 : vak-sms.com : profile 4 : tcp retrans threshold reached
16.10.2024 17:28:05 : vak-sms.com : profile 4 : fail counter 1/3
16.10.2024 17:28:08 : vak-sms.com : profile 4 : tcp retrans threshold reached
16.10.2024 17:28:08 : vak-sms.com : profile 4 : fail counter 2/3
16.10.2024 17:28:27 : vak-sms.com : profile 4 : tcp retrans threshold reached
16.10.2024 17:28:27 : vak-sms.com : profile 4 : fail counter 3/3
16.10.2024 17:28:27 : vak-sms.com : profile 4 : adding to E:\Downloads\zapret-win-bundle-master (6)\zapret-win-bundle-master\zapret-winws\my_hostlist.txt
</code></pre>
<p>Не так долго, как по умолчанию, но и не быстро на случай подвисания сервера.</p></td><td>2024-10-16T12:59:13.077Z</td></tr><tr><td>abc555</td><td><p>Подскажите, как правильно подобрать стратегию для роутера. Методом тыка это я умею, но хотелось бы научится делать по уму. Где почитать инструкцию и что для этого надо.<br>
На роуторе openwrt, на компе винда</p></td><td>2024-10-16T12:59:43.371Z</td></tr><tr><td>hpdevfox(hpdevfox)</td><td><p>проблема с запретом, позавчера обновил его до новой версии что-бы был дискорд без костыля в виде QUIC, после чего он стал зависать. До этого месяц исправно работал без намека на проблемы. (nftables режим)</p>
<p>прост если снесу удаляю запрет, он перестает виснуть.</p></td><td>2024-10-16T13:39:48.952Z</td></tr><tr><td>easyone11</td><td><p>попробуй чистую установку или --debug может что то покажет</p>
<ul>
<li>сегодня апдейт вышел, может его еще</li>
</ul></td><td>2024-10-16T14:29:35.535Z</td></tr><tr><td>easyone11</td><td><p>Продолжая обсуждение из темы <a href="https://ntc.party/t/zapret-whats-new/61/160">Zapret: what's new</a>:</p>
<aside class="quote no-group" data-username="bolvan" data-post="160" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/160">Zapret: what's new</a></div>
<blockquote>
<p>autohostlist debug log теперь содержит ip:port клиента и название L7 протокола. В postnat режиме вы не увидите ip клиента, а увидите endpoint самого роутера, с которого идет внешний конект.</p>
</blockquote>
</aside>
<p>Блин, ждал этой фишки, а толку нет, нат убирать какой то геморрой ради такого функционала.</p></td><td>2024-10-16T14:43:34.331Z</td></tr><tr><td>abc555</td><td><p>Соберите новую сборку <a href="https://firmware-selector.openwrt.org/" rel="noopener nofollow ugc">https://firmware-selector.openwrt.org/</a><br>
добавьте туда пакеты<br>
unzip kmod-nfnetlink-queue kmod-nft-queue gzip<br>
и какие ещё там вам нужны лично для вас<br>
можно добавить русик<br>
luci-i18n-base-ru luci-i18n-firewall-ru luci-i18n-opkg-ru<br>
сохраните настройки роутера и прошейте без сохранения, затем зальёте сохранку после прошивки и на чистую установите запрет.<br>
если вы себе не устанавливаете https-dns-proxy, то тогда зайдите через люси в DHCP и DNS - перенаправление и добавьте туда в Перенаправление запросов DNS эту строку<br>
/use-application-dns.net/<br>
хотя я бы рассмотрел на вашем месте возможность установить эти два пакета<br>
luci-app-https-dns-proxy luci-i18n-https-dns-proxy-ru<br>
тогда и добавлять строку не надо, сама добавится<br>
так же рассмотрите эти 2 пакета<br>
zram-swap kmod-lib-lz4<br>
это из оперативки создаст дополнительных 27 мгб или зависит от памяти ram<br>
на главной странице люси появится этот раздел - Свободно подкачки (swap)<br>
это типа файла подкачки как на копме и не важно сколько у вас памяти, она будет всё равно использоваться, исключая нехватку памяти.<br>
В идеале работает роутер когда все нужные пакеты установлены в образе, это экономит память и лучше работает, это я заметил фактически сразу как перебшел на wrt<br>
Если у вас pppoe не забудьте поставить mtu 1480 и не спрашивайте почему, много тех кто не согласен с моим мнением, пытаются оспаривать, но это личное их дело, пусть ставят что хотят, а потом пишут что за фигня, вчера работала, сегодня нет.<br>
Программный flow offloading в файрволе у меня включён и нормально всё работает, ну у меня во всяком случаи, хоть и рекомендация его не включать, но у меня всё работает нормально, тут на любителя<br>
Пакеты типа QOS не устанавливайте, я проводил тесты, режут скорость, увеличивают нагрузку и  пинг, толку от них нету<br>
Вместо этого, можно рассмотреть установку таких пакетов kmod-tcp-bbr kmod-sched-cake<br>
включается через sysctl этой командой<br>
echo “net.ipv4.tcp_congestion_control=bbr<br>
net.core.default_qdisc=cake” &gt; /etc/sysctl.conf<br>
сетевой стёк начинает работать ровно, нет скачков резких при включении торрента, когда он наглухо вырубает всем скорость, работает более плавно, но опять же на любителя.<br>
Учитывайте что пакетик icmp может вам выключить нэт, такой пакет их неоткуда, поэтому рассмотрите возможность заблокировать весь icmp протокол, это создаст неудобство в плане проверить пинг, но зато такой вот пакетик не сможет вам навредить ) Все функции связанные с icmp нужно будет отключить. Это как все говорят вредный совет и со мной никто не согласен, но моё мнение немного отличается от всех несогласных )</p></td><td>2024-10-16T15:03:26.941Z</td></tr><tr><td>bolvan</td><td><p>В POSTNAT режиме nfqws не получает адрес клиента.<br>
Он нужен, чтобы беспрепятственно задействовать дурение, ломающее NAT. Как можно ближе к выплевыванию на сетевой адаптер в инет.<br>
Без этого некоторые атаки перестанут работать на проходящий трафик</p></td><td>2024-10-16T15:08:07.442Z</td></tr><tr><td>easyone11</td><td><p>После обновления в zapret-hosts-auto-debug.log<br>
стали появляться</p>
<details>
<summary>
Спойлер</summary>
<p>16.10.2024 19:44:01 : <a href="http://rr12---sn-n8v7zns7.googlevideo.com">rr12---sn-n8v7zns7.googlevideo.com</a> : profile 1 : client 192.168.1.8:57501 : proto quic : fail counter 1/3<br>
16.10.2024 19:44:02 : <a href="http://rr12---sn-n8v7zns7.googlevideo.com">rr12---sn-n8v7zns7.googlevideo.com</a> : profile 1 : client 192.168.1.8:54385 : proto quic : tcp retrans threshold reached<br>
16.10.2024 19:44:02 : <a href="http://rr12---sn-n8v7zns7.googlevideo.com">rr12---sn-n8v7zns7.googlevideo.com</a> : profile 1 : client 192.168.1.8:54385 : proto quic : fail counter 2/3<br>
16.10.2024 19:44:05 : <a href="http://rr3---sn-n8v7znsk.googlevideo.com">rr3---sn-n8v7znsk.googlevideo.com</a> : profile 1 : client 192.168.1.8:60367 : proto quic : tcp retrans threshold reached<br>
16.10.2024 19:44:05 : <a href="http://rr3---sn-n8v7znsk.googlevideo.com">rr3---sn-n8v7znsk.googlevideo.com</a> : profile 1 : client 192.168.1.8:60367 : proto quic : fail counter 1/3<br>
16.10.2024 19:44:06 : <a href="http://rr10---sn-n8v7kne6.googlevideo.com">rr10---sn-n8v7kne6.googlevideo.com</a> : profile 1 : client 192.168.1.8:56273 : proto quic : tcp retrans threshold reached<br>
16.10.2024 19:44:06 : <a href="http://rr10---sn-n8v7kne6.googlevideo.com">rr10---sn-n8v7kne6.googlevideo.com</a> : profile 1 : client 192.168.1.8:56273 : proto quic : fail counter 1/3</p>
</details>
<p>видимо стратегия для квика не может дурить и потом наверно переключается на tls (проверить сложно, если смотреть с компа то квик подключение не учавствует, а все эти логи  я получаю с десткого ютуба с телефона), но просто в предыдущей версии такое не писалось<br>
в --hostlist=/opt/zapret/ipset/zapret-hosts-youtube.txt есть <a href="http://googlevideo.com">googlevideo.com</a>, а zapret-hosts-auto.txt теперь будет засираться всякими r10—sn-n8v7kne6<br>
либо подбирать стратегию под квик<br>
<a class="attachment" href="zapret-обсуждение-726/TVxt07O9Gb8XAFYfAj3Svr3Vq2.txt">log3.txt</a> (357,3 КБ)<br>
в логе <a href="http://rr7---sn-n8v7znsl.googlevideo.com">rr7---sn-n8v7znsl.googlevideo.com</a><br>
ps<br>
не понятно почему в прошлой версии не спамило квиком в логе</p></td><td>2024-10-16T15:56:00.498Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Есть возможность проверить стратегию, не останавляивая zapret? Желательно под линукс. Было бы удобно фоном раз в день автоматом прогнать несколько доменов.</p></td><td>2024-10-16T17:04:13.531Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote no-group" data-username="tehkos" data-post="1464" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/f4b2a3/48.png" class="avatar"> tehkos:</div>
<blockquote>
<p>под линукс</p>
</blockquote>
</aside>
<p>qemu kvm libvirt опционально virt-manager</p></td><td>2024-10-16T17:19:44.120Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="abc555" data-post="1432" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>И ещё один вопрос, как обновлять запрет на роуторе ? Я неделю его только как поставил, ещё только осваиваю. Это надо делать полный сброс роутера и заново устанавливать ? Так как места не осталось, я просто не уверен что заново запустить команду<br>
wget -O “/tmp/zapret-master.zip” <a href="https://github.com/bol-van/zapret/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/archive/refs/heads/master.zip </a><br>
оно может и обновится, я не пробовал, но перепишет ли файлы или лучше на чистую с нуля заливать ?</p>
</blockquote>
</aside>
<p>Я вчера как раз разбирался как в OpenWrt устроена установка/обновление/удаление IPK.<br>
В итоге сделал так: <a href="https://github.com/remittor/zapret-openwrt/discussions/1#discussioncomment-10962210" class="inline-onebox" rel="noopener nofollow ugc">Alpha version (test) · remittor/zapret-openwrt · Discussion #1 · GitHub</a></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/8db07bfcebb121d1c5593c614ac0c99e2a392987.png" data-download-href="https://ntc.party/uploads/default/8db07bfcebb121d1c5593c614ac0c99e2a392987" title="изображение"><img src="zapret-обсуждение-726/8db07bfcebb121d1c5593c614ac0c99e2a392987_2_260x250.png" alt="изображение" data-base62-sha1="kdrrewulgx8rR9DG10UtemK7Wjt" width="260" height="250" srcset="zapret-обсуждение-726/8db07bfcebb121d1c5593c614ac0c99e2a392987_2_260x250.png, zapret-обсуждение-726/8db07bfcebb121d1c5593c614ac0c99e2a392987_2_390x375.png 1.5x, zapret-обсуждение-726/8db07bfcebb121d1c5593c614ac0c99e2a392987_2_520x500.png 2x" data-dominant-color="C3D5DE"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">808×769 43.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-16T17:27:08.204Z</td></tr><tr><td>bolvan</td><td><p>Нет, надо останавливать</p></td><td>2024-10-16T18:00:20.661Z</td></tr><tr><td>bolvan</td><td><p>В прошлой версии оно писалось , но без указания протокола.<br>
Это вырезка из лога или таков он и есть ? После threshold reached должна быть инфа о fail counter.<br>
Если не нужно, можно <a href="http://googlevideo.com">googlevideo.com</a> унести в exclude.<br>
Если оно пытается считать попытки retrans, значит в листе его еще нет</p></td><td>2024-10-16T18:07:41.484Z</td></tr><tr><td>easyone11</td><td><p>я лог файл выложил<br>
какие то сервера добавляются, какие то нет<br>
fail counter бывает 1 бывает 2, и пропадает ну и бывает 3 и добавление<br>
а листе он есть, в логе видно<br>
Hostlist check for <a href="http://rr7---sn-n8v7znsl.googlevideo.com">rr7---sn-n8v7znsl.googlevideo.com</a> : negative<br>
Hostlist check for <a href="http://googlevideo.com">googlevideo.com</a> : positive</p>
<p>если в прошлой версии писалось, тогда не понятно почему я не видел такого спама в логе<br>
PS<br>
ну ладно, в целом то всё работает, а лог всё равно отключу тк по ip не увидеть какое конкретно устройство спамит</p></td><td>2024-10-16T18:13:53.775Z</td></tr><tr><td>bolvan</td><td><p>Должно быть он есть в другом листе.<br>
Вот в этом<br>
/opt/zapret/ipset/zapret-hosts-youtube.txt<br>
И лог я вижу от инстанса для tcp<br>
Под quic отводится отдельный инстанс для udp, и должно быть там используются стандартные листы из ipset, в которых нет googlevideo<br>
И если googlevideo не нужен там, то надо заносить в ipset/exclude</p></td><td>2024-10-16T18:16:54.981Z</td></tr><tr><td>easyone11</td><td><p>мм<br>
понял, спасибо<br>
ps<br>
адуплил почему спам пошёл, я пару дней назад перестроил стратегии и ютуб пустил по отдельному листу не трогая квик, видимо в эти дни лог не смотрел или не включал</p></td><td>2024-10-16T18:23:29.263Z</td></tr><tr><td>CrazyPencill(Crazy Pencill)</td><td><p>Возможно, обсуждалось, но поиском не нашёл. Имеется статический айпишник и комп на винде с работающим Zapret. Возможно ли поднять прокси сервер на этом компе так, чтобы трафик, идущий через прокси, обрабатывался запретом? Для просмотра ютуба в домашней сети на телевизоре и эпл девайсах. А, если получится, и вне домашней сети.</p></td><td>2024-10-16T20:50:46.662Z</td></tr><tr><td>MIHAHIM</td><td><p>Подскажите куда прописать<br>
157.240.245.174 <a href="http://instagram.com" rel="noopener nofollow ugc">instagram.com</a> <a href="http://www.instagram.com" rel="noopener nofollow ugc">www.instagram.com</a><br>
на уровне роутера? не хочет инста грузится с айфона, но с пк работает, там проще, через файл hosts. А как быть с роутером?</p></td><td>2024-10-16T22:47:11.928Z</td></tr><tr><td>easyone11</td><td><aside class="onebox githubissue" data-onebox-src="https://github.com/bol-van/zapret/issues/436">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/issues/436" target="_blank" rel="noopener">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/issues/436" target="_blank" rel="noopener">Как завернуть nfqws на socks proxy</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-09-28" data-time="17:34:01" data-timezone="UTC">05:34PM - 28 Sep 24 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/Sergey-nqwfs" target="_blank" rel="noopener">
          <img alt="Sergey-nqwfs" src="zapret-обсуждение-726/06c30443a43a7c558193b5fc57f3aef8d9485756.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="DEE4EC">
          Sergey-nqwfs
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Есть сервер в сети с адресом 192.168.1.254, на нем zapret в режиме nfqws. Как сд<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">елать чтобы клиент с адресом 192.168.1.3 из этой же сети подключался к серверу с zapret через socks5? Через redsocks proxy можно как-то перенаправить трафик на zapret в режиме nfqws?</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-17T03:48:08.124Z</td></tr><tr><td>easyone11</td><td><p>/etc/hosts<br>
потом сделать /etc/init.d/dnsmasq restart</p></td><td>2024-10-17T03:50:10.489Z</td></tr><tr><td>easyone11</td><td><p>не знаю после обновления запрета или нет, при блокчеке теперь пишет<br>
installed curl version does not support TLS 1.3 . tests disabled.<br>
installed curl version does not support http3 QUIC. tests disabled.</p>
<details>
<summary>
при этом стоит 8.7.1</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/dfea7b9554f0107f07698cd9fa832f919b3e702c.png" data-download-href="https://ntc.party/uploads/default/dfea7b9554f0107f07698cd9fa832f919b3e702c" title="53b3e07136543cda923823d74bef26ee"><img src="zapret-обсуждение-726/dfea7b9554f0107f07698cd9fa832f919b3e702c.png" alt="53b3e07136543cda923823d74bef26ee" data-base62-sha1="vWQQSt3gkIxPDbAgQJHS9k7KxEU" width="690" height="288" data-dominant-color="F9F9F9"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">53b3e07136543cda923823d74bef26ee</span><span class="informations">969×405 16.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
curl --version<br>
curl 8.7.1 (aarch64-openwrt-linux-gnu) libcurl/8.7.1 mbedTLS/2.28.8 nghttp2/1.57.0<br>
Release-Date: 2024-03-27<br>
Protocols: file ftp ftps http https ipfs ipns mqtt<br>
Features: alt-svc HSTS HTTP2 HTTPS-proxy IPv6 Largefile SSL threadsafe UnixSockets</p>
</details></td><td>2024-10-17T04:22:23.921Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А теперь сравните с моим curl (у вас в списке поддерживаемых фич, кстати, нет HTTP3)</p>
<details>
<summary>
Спойлер</summary>
<p>curl --version<br>
curl 8.10.1 (x86_64-w64-mingw32) libcurl/8.10.1 LibreSSL/4.0.0 zlib/1.3.1 brotli/1.1.0 zstd/1.5.6 WinIDN libpsl/0.21.5 libssh2/1.11.1 nghttp2/1.63.0 ngtcp2/1.8.0 nghttp3/1.6.0<br>
Release-Date: 2024-09-18<br>
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp ws wss<br>
Features: alt-svc AsynchDNS brotli CAcert HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM PSL SPNEGO SSL SSPI threadsafe UnixSockets zstd</p>
</details></td><td>2024-10-17T06:12:02.080Z</td></tr><tr><td>bolvan</td><td><p>Дело не в версии curl, а в crypto библиотеке.<br>
На openwrt mbed tls не поддерживает ни tls 1.3, ни quic. А если бы и поддерживалось, то по умолчанию бы точно не собиралось с этими опциями. Там важно место. Его мало<br>
Раньше у них был вольф. Он хотя бы tls 1.3 поддерживал</p></td><td>2024-10-17T06:33:27.343Z</td></tr><tr><td>bolvan</td><td><p>Прокси сервер с точки зрения ОС - это обычная программа, работающая на этой ОС.<br>
Такая, как броузер, например.<br>
Если для броузера обход работает (без расширений и прочего встроенного удовольствия типа doh), то и для прокси сервера будет работать.<br>
Поэтому можно установить любой прокси, которых множество.<br>
3proxy пользовал когда-то давно на винде</p></td><td>2024-10-17T06:48:32.018Z</td></tr><tr><td>MIHAHIM</td><td><p>Прописал в hosts, но /etc/init.d/dnsmasq restart выдает ошибку: “udhcpc: no lease, failing”</p></td><td>2024-10-17T07:26:24.798Z</td></tr><tr><td>spv82</td><td><p>В OpenWrt хранится в конфиге <code>/etc/config/dhcp</code></p>
<pre><code class="lang-auto">config dnsmasq
...
	list address '/bt.t-ru.org/172.67.185.253'
</code></pre>
<p><a href="https://openwrt.org/docs/guide-user/base-system/dhcp_configuration#a_and_aaaa_rr" class="onebox" target="_blank" rel="noopener nofollow ugc">https://openwrt.org/docs/guide-user/base-system/dhcp_configuration#a_and_aaaa_rr</a></p>
<p>Или просто через вэб-интерфейс добавить.</p></td><td>2024-10-17T07:38:00.138Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Ори сделал “выжималку для пейлоадов” (<a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880/843" class="inline-onebox">GoodCheck - блокчек-скрипт для GoodbyeDPI, Zapret, ByeDPI - #843 by Ori</a>). Хотелось спросить. Есть ли в этом какая-то практическая польза для Запрета по дурению провайдеров? Есть ли смысл создавать свои пейлоады?</p></td><td>2024-10-17T07:38:35.662Z</td></tr><tr><td>MIHAHIM</td><td><p>Вот эти строки:</p>
<pre><code class="lang-auto">31.13.72.53 scontent-arn2-1.cdninstagram.com scontent.cdninstagram.com static.cdninstagram.com 
157.240.225.174 instagram.com www.instagram.com i.instagram.com
</code></pre>
<p>Будут в таком формате , верно?</p>
<pre><code class="lang-auto">list address '/scontent-arn2-1.cdninstagram.com/31.13.72.53'
list address '/scontent.cdninstagram.com /31.13.72.53'
list address '/static.cdninstagram.com /31.13.72.53'
list address '/instagram.com/157.240.225.174'
list address '/www.instagram.com/157.240.225.174'
list address '/i.instagram.com/157.240.225.174'
</code></pre></td><td>2024-10-17T07:46:32.966Z</td></tr><tr><td>spv82</td><td><p>list address ‘/cdninstagram.com/31.13.72.53’<br>
list address ‘/instagram.com/157.240.225.174’</p>
<p>Субдомены тут нет смысла указывать</p></td><td>2024-10-17T07:49:09.674Z</td></tr><tr><td>MIHAHIM</td><td><p>Указал, теперь при попытке зайти на любой профиль в инсте “произошла ошибка”. До этого страницы открывались но не грузилось ни одно фото. Перезапускать роутер не нужно было?</p></td><td>2024-10-17T07:52:28.381Z</td></tr><tr><td>bolvan</td><td><p>На тех провайдерах, что мне доступны, необходимости не замечал.<br>
Но может быть все, что угодно</p></td><td>2024-10-17T07:53:41.419Z</td></tr><tr><td>bolvan</td><td><p>После изменения dhcp нужно рестартнуть dnsmasq<br>
Молоток не обязателен</p></td><td>2024-10-17T07:55:04.979Z</td></tr><tr><td>MIHAHIM</td><td><p>Перезапустил, ничего не поменялось, после прописывания в <code>/etc/config/dhcp</code><br>
list address ‘/cdninstagram.com/31.13.72.53’<br>
list address ‘/instagram.com/157.240.225.174’<br>
Стало хуже, " Произошла ошибка Возникла проблема. Не удалось загрузить страницу." на любом профиле инсты. Есть какие то еще варианты?</p></td><td>2024-10-17T08:06:41.446Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У вас тут во 2 и 3 строчках вероятно лишние пробелы. Хз влияет это или нет, но тем не менее.</p></td><td>2024-10-17T08:35:29.440Z</td></tr><tr><td>MIHAHIM</td><td><p>Я поставил ваш конфиг без субдоменов, пробелов там нет, попробовал все 5 строчек без пробелов - тож самое</p></td><td>2024-10-17T08:37:47.006Z</td></tr><tr><td>abc555</td><td><p>я что то не понял, у вас запрет стоит в люси ? прикольно, каким образом вы его туда поставили, что для этого нужно</p></td><td>2024-10-17T09:26:12.951Z</td></tr><tr><td>abc555</td><td><p>я не пробовал, не знаю будет работать или нет, но для QUIC нужны ещё и эти пакеты<br>
libnghttp3 libngtcp2<br>
и весят они не мало, особенно если нет места<br>
но без них QUIC работать не будет, curl естественно обязательно надо ставить в любом случаи.<br>
а так как места у меня мало, пакеты эти я себе не ставил, просто заблокировал в роуторе порт udp 443 и в запрете QUIC отключил<br>
это для nftables, для iptables я не знаю, там другие пакеты</p></td><td>2024-10-17T09:35:06.773Z</td></tr><tr><td>MIHAHIM</td><td><p>Ну да, на уровне роутера, на всех устройствах сразу работает, openwrt накатил 23.05 и поставил запрет по инструкции с офф. гитхаба запрета</p></td><td>2024-10-17T09:51:48.813Z</td></tr><tr><td>abc555</td><td><p>у вас работают трансляции ютуба ? у меня на одном из провайдеров 40 сек работает а потом пишет что то пошло не так и я так и не решил эту проблему, даже не знаю на что смотреть.<br>
всё остальное работает нормально, только трансляции, в чём прикол я так и не понял.<br>
а на другом провайдере, при тех же настройках работает, таже самая винда, тот же браузер.<br>
и у меня места мало, я искал инструкцию для минимальной памяти, 2 дня ушло чтоб понять как это сделать причём на nftables, задача стояла не удалить нужные мне пакеты, некоторые заменил даже которые меньше весят.<br>
на одном из своих роутеров вай фай мне не нужен и я удалил этот пакет wpad-basic-mbedtls и места сразу стало больше, даже ещё 500 кб осталось свободного ))<br>
пакеты удалять только в сборке прошивки если что, то есть чтоб изначально это не было, некоторые думают что можно удалить из самого роутера, но это не так, место от этого не прибавится )</p></td><td>2024-10-17T09:56:31.433Z</td></tr><tr><td>abc555</td><td><p>прочитал ваше readme, можно сказать пробежался и наткнулся на параметр<br>
net.netfilter.nf_conntrack_tcp_be_liberal=1<br>
включил и один сайт который открывался через раз, начал работать нормально,<br>
почитал про этот параметр, ну типа если плохая связь то он решает проблему, в плане безопасности есть свои косяки, но в целом вроде нормально, надо потестировать ещё.<br>
ну я был в шоке, от куда у вас столько знаний, для меня это жесть, столько инфы, которая для меня как тёмный лес</p></td><td>2024-10-17T10:25:51.914Z</td></tr><tr><td>MIHAHIM</td><td><p>Да, все работает без проблем и на пк и на айфоне через вайфай и через приложение. У меня проблемы только с инстой и фейсбуком, сайты сами открываются, но никак не грузятся страницы людей и любые картинки / видео</p></td><td>2024-10-17T10:26:21.956Z</td></tr><tr><td>abc555</td><td><p>а вы заблокируйте порт udp 443 в роуторе, если правильно заблокировать, то включая QUIC в браузере, к примеру настройка network.http.http3.enable в Firefox, затем кнопка F12 и не должны пролетать пакеты HTTP/3, если пролетают, значит плохо заблокировал, то есть ни одного пакета HTTP/3 пролететь не должно при правильной блокировки порта в роуторе.<br>
и тогда все ваши устройства будут использовать только HTTP/2 и всё будет открываться.<br>
настройка в запрете QUIC больше вам не понадобится, можно её смело отключать.<br>
я у себя в 5ти местах заблокировал этот порт, наглухо и ни одного пакта не пролетает и на всех устройствах всё работает одинаково, ну почти одинаково</p></td><td>2024-10-17T10:34:31.434Z</td></tr><tr><td>bolvan</td><td><p>Отдельно либы ставить смысла нет.<br>
Чтобы они использовались, libcurl должен быть с ними скомпилен.<br>
Иначе они будут мертвым грузом.</p></td><td>2024-10-17T10:46:51.939Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="1495" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>net.netfilter.nf_conntrack_tcp_be_liberal=1</p>
</blockquote>
</aside>
<p>Сам по себе этот параметр ничего не вылечит. В zapret он нужен для корректной работы авто хост листа в условиях российской действительности. Немного кривоватые RST от DPI</p></td><td>2024-10-17T10:49:19.193Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="abc555" data-post="1497" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>а вы заблокируйте порт udp 443 в роуторе, если правильно заблокировать</p>
</blockquote>
</aside>
<p>Не подскажите как правильно это сделать на openwrt?</p></td><td>2024-10-17T10:53:32.331Z</td></tr><tr><td>abc555</td><td><p>ну не знаю, сайт открывается теперь всегда, та и связь вроде стала стабильней или мне так это показалось, авто хост листа я не использую, но я давно экспериментирую с настройками sysctl и этот параметр для меня новинка</p></td><td>2024-10-17T10:54:25.137Z</td></tr><tr><td>abc555</td><td><p>через люси в файрволе - правила для трафика, только включить надо только для ipv4<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/3afd85f13b7e2bcf7d8543a57683d040afb98f5c.jpeg" data-download-href="https://ntc.party/uploads/default/3afd85f13b7e2bcf7d8543a57683d040afb98f5c" title="1"><img src="zapret-обсуждение-726/3afd85f13b7e2bcf7d8543a57683d040afb98f5c_2_690x166.jpeg" alt="1" data-base62-sha1="8pQRAe4Uz1cxfSzqzNfoTRFf28I" width="690" height="166" srcset="zapret-обсуждение-726/3afd85f13b7e2bcf7d8543a57683d040afb98f5c_2_690x166.jpeg, zapret-обсуждение-726/3afd85f13b7e2bcf7d8543a57683d040afb98f5c.jpeg 1.5x, zapret-обсуждение-726/3afd85f13b7e2bcf7d8543a57683d040afb98f5c.jpeg 2x" data-dominant-color="2A2C2E"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">1</span><span class="informations">955×231 35 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
а затем в raw_prerouting и ещё в raw_output через SSH если умеете и у меня только тогда перестал гулять этот трафик<br>
хотя я может тут и не правильно сделал, сейчас перепроверю,<br>
та не, вроде так, ну во всяком случаи у меня он не гуляет</p></td><td>2024-10-17T11:02:37.810Z</td></tr><tr><td>abc555</td><td><p>В самом файрволе у меня так, offloading включён, без него плохо работает всё, медленно, в рекомендации его нужно отключать, но я не отключил и вроде всё работает<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/7854f9038761db83942b17f19bd7bc46e53b7a34.jpeg" data-download-href="https://ntc.party/uploads/default/7854f9038761db83942b17f19bd7bc46e53b7a34" title="2"><img src="zapret-обсуждение-726/7854f9038761db83942b17f19bd7bc46e53b7a34_2_660x500.jpeg" alt="2" data-base62-sha1="havlG2ly5hs54eYndWUYUoDLoZm" width="660" height="500" srcset="zapret-обсуждение-726/7854f9038761db83942b17f19bd7bc46e53b7a34_2_660x500.jpeg, zapret-обсуждение-726/7854f9038761db83942b17f19bd7bc46e53b7a34_2_990x750.jpeg 1.5x, zapret-обсуждение-726/7854f9038761db83942b17f19bd7bc46e53b7a34.jpeg 2x" data-dominant-color="272727"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">2</span><span class="informations">1017×770 77.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-17T11:15:50.602Z</td></tr><tr><td>MIHAHIM</td><td><p>А ничего что у меня в запрете уже есть строки с 443? это никак не повлияет?</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=5 --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=4"
</code></pre></td><td>2024-10-17T11:18:59.507Z</td></tr><tr><td>zzr</td><td><p><a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B5-%D0%BF%D0%B8%D1%88%D0%B8%D1%82%D0%B5-%D1%81%D1%8E%D0%B4%D0%B0-%D0%BD%D0%B8-%D0%BF%D1%80%D0%BE-%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B8-%D0%BD%D0%B5-%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D0%B2-1-%D0%B9-%D0%BF%D0%BE%D1%81%D1%82-%D1%82%D0%B5%D0%BC%D1%8B/11624/795">https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B5-%D0%BF%D0%B8%D1%88%D0%B8%D1%82%D0%B5-%D1%81%D1%8E%D0%B4%D0%B0-%D0%BD%D0%B8-%D0%BF%D1%80%D0%BE-%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B8-%D0%BD%D0%B5-%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D0%B2-1-%D0%B9-%D0%BF%D0%BE%D1%81%D1%82-%D1%82%D0%B5%D0%BC%D1%8B/11624/795</a><br>
уобщем там ни всё так прост ети хостлисты и ети обходы <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt#L107" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt#L107</a></p></td><td>2024-10-17T11:21:51.717Z</td></tr><tr><td>abc555</td><td><p>повлияет только на udp трафик на 443 порту, это и есть QUIC<br>
все ваши настройки на этот порт значения иметь больше не будут и может их больше не настраивать и QUIC в запрете отключите<br>
можете и не отключать, он всё равно работать не будет, но лучше отключить, меньше будет нагрузка<br>
можете удалить строки там где udp=443, отставить только те строки где tcp<br>
дискорд не знаю, я не им не пользуюсь, но если бы и пользовался, то заставил бы его работать только на tcp или удалил бы его в противном случаи )</p></td><td>2024-10-17T11:22:17.686Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1496" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>У меня проблемы только с инстой и фейсбуком, сайты сами открываются, но никак не грузятся страницы людей и любые картинки / видео</p>
</blockquote>
</aside>
<p>Хм, у меня не роутер, а просто WIndows. По поводу доменов - холодное открытие facebook/instagram добавило эти домены в hostlist-auto.</p>
<pre><code class="lang-auto">www.instagram.com
static.cdninstagram.com
scontent.cdninstagram.com
graph.instagram.com
gateway.instagram.com
scontent-hel3-1.cdninstagram.com
edge-chat.instagram.com
facebook.com
static.xx.fbcdn.net
scontent-hel3-1.xx.fbcdn.net
external-hel3-1.xx.fbcdn.net
</code></pre>
<p>И в hosts у меня вот так.</p>
<pre><code class="lang-auto">31.13.72.53 scontent-arn2-1.cdninstagram.com scontent.cdninstagram.com static.cdninstagram.com 
157.240.225.174 instagram.com www.instagram.com i.instagram.com
</code></pre>
<p>Ну и в целом dns-over-https, конечно же, настроен.<br>
Может вам как-то эта информация поможет <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"><br>
Кстати, в последнем посте вашем не увидел стратегии для tcp=443 без хостлиста. Разве не надо на случай, если чего-то нет?</p></td><td>2024-10-17T11:28:50.735Z</td></tr><tr><td>MIHAHIM</td><td><p>А можете показать как делать udp443 / udp443-2 и 3? У меня не получается в “любую зону” сделать. Можно в личку чтобы тут не мешать</p></td><td>2024-10-17T11:29:02.579Z</td></tr><tr><td>abc555</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1508" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>udp443 / udp443-2 и 3?</p>
</blockquote>
</aside>
<p>это просто название, любое можно написать</p></td><td>2024-10-17T11:30:29.209Z</td></tr><tr><td>doomer2007</td><td><p>Curl либо придётся собирать самому, либо брать собранный статически.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1478" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>На openwrt mbed tls не поддерживает ни tls 1.3, ни quic.</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/bolvan">@bolvan</a> не подскажите, какое влияние это оказывает на другие библиотеки собранные с mbed, типо wpad и тд. Я правильно понимаю, что имеет смысл собирать сейчас всё с wolfss или openssl?</p></td><td>2024-10-17T11:30:58.548Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>libreSSL 4 тогда уж.</p></td><td>2024-10-17T11:32:02.828Z</td></tr><tr><td>doomer2007</td><td><p>Зафиксировал. А общее влияние на библиотеки собранные с mbed какое?</p></td><td>2024-10-17T11:34:38.727Z</td></tr><tr><td>bolvan</td><td><p>Гадать можно сколько угодно. И даже находить чудо лекарства.<br>
На деле частенько оказывается, что оно работает, потому что не работает</p></td><td>2024-10-17T11:35:48.742Z</td></tr><tr><td>bolvan</td><td><p>Можно с openssl собрать только libcurl. Но тогда будет лишнее место расходоваться, тк разные компоненты привязаны к разным либам.<br>
Я обычно все с openssl собираю. Смотрю по зависимостям где что привязано к нежелательным либам и меняю там выбор либы на openssl. До тех пор, пока можно можно будет снять чекбокс с других либ.<br>
Для блокчека это перебор. Можно curl static засунуть в /tmp, дать ему +x и установить CURL variable перед чеком</p></td><td>2024-10-17T11:38:01.341Z</td></tr><tr><td>bolvan</td><td><p>libreSSL - это кастрированная версия openssl. кастрированность обусловлена лицензиями в основном.<br>
работает на некоторых алгоритмах в разы медленнее<br>
в openbsd она, и openssl speed существенно проседает</p></td><td>2024-10-17T11:39:51.856Z</td></tr><tr><td>abc555</td><td><p>а люди многие так этого и не поняли, на обычной стандартной сборке пытаются запустить quic, не понимая что он изначально в ней работать не будет и пытаются его настраивать, делятся советами )) у меня нет места для quic и я его сразу же отключил, понимая что смысла нет для меня с ним бороться<br>
всем кому нужен quic, место на флешь должно быть 16 мгб, наверное, но не меньше</p></td><td>2024-10-17T11:42:57.386Z</td></tr><tr><td>doomer2007</td><td><p>Честно говоря я из таких. Но как понять, что он работает? Смотреть в вайршарке тогда?<br>
До этого я просто лениво проходил по ссылке на сайт quic test, он меня поздравлял, что всё ок. С чем он меня поздравлял тогда?</p></td><td>2024-10-17T11:46:45.277Z</td></tr><tr><td>abc555</td><td><p>на винде это одно, если на роуторе, то должны быть нужные пакеты, а они весят много и я даже не уверен что для полноценной работы хватит 16 мгб памяти на флеш, если 8 мгб флеш на роуторе, то про quic можно забыть и не вспоминать<br>
хороший роутер в смысле фирма, ещё попробуй найди, чтоб в нём была память, попробуй его прошей, косяки есть во всех моделях, особенно где много памяти, попробуй его настрой, я юзаю их форум, там постоянно кто то жалуется, то то у него не работает, то то<br>
чтоб узать роутер с большой памятью и ещё 2х ядерный, это нужно шарить классически, поэтому я не спешу менять свои роутеры, работают, та и пусть работают )</p></td><td>2024-10-17T11:50:41.106Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="arinoki" data-post="1507" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>Кстати, в последнем посте вашем не увидел стратегии для tcp=443 без хостлиста. Разве не надо на случай, если чего-то нет?</p>
</blockquote>
</aside>
<p>А куда именно дописать эту стратегию и для чего она нужна?</p></td><td>2024-10-17T11:51:10.744Z</td></tr><tr><td>doomer2007</td><td><p>Не винда, не только винда. Там весь набор от линуксов до макос. В сетях я очень плох.<br>
То есть, когда меня поздравляют с квиком на десктопе, он проходит роутер, который в квик не может? А запрет на роутере уже не проходит из-за этого?</p></td><td>2024-10-17T11:55:58.408Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Парни, всем привет!<br>
Уже сломал голову, не пойму в чем беда.<br>
Сейчас на этом роутере стоит запрет.<br>
Хочу настроить работоспособность chapgpt и gemini, в целом нашел инструкцию как поставить comss.<br>
В HTTPS DNS Прокси выбираю “custom” и в поле “parameter” пишу <a href="https://dns.controld.com/comss" rel="noopener nofollow ugc">https://dns.controld.com/comss</a>, далее через putty устанавливаю Comss.one DNS:</p>
<pre><code class="lang-auto">sh -c 'sh -c "$(curl -sL https://api.controld.com/dl)" -s comss'</code></pre>
<p>При проверке на сайте <a href="https://controld.com/status" class="inline-onebox" rel="noopener nofollow ugc">Configuration Status</a> идет валидация и резольвер comss.<br>
На компе все работает!<br>
Но при подключении по Wi-Fi к телефону он долго думает, подключается и отключается. К телику вообще не хочет подключатся ни в какую, Wi-Fi видит, но не подключается, без ошибки.<br>
Помогает перезагрузка роутера, после чего все работает, но Comss через примерно пол часа тупо отваливается <img src="https://ntc.party/images/emoji/twitter/frowning_face.png?v=12" title=":frowning_face:" class="emoji" alt=":frowning_face:" loading="lazy" width="20" height="20"><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/9227713c1f86726388b81b779748f5df17595386.jpeg" data-download-href="https://ntc.party/uploads/default/9227713c1f86726388b81b779748f5df17595386" title="comss"><img src="zapret-обсуждение-726/9227713c1f86726388b81b779748f5df17595386_2_669x500.jpeg" alt="comss" data-base62-sha1="kQWdmhy7mC3LS6t91MpFLCGOC9M" width="669" height="500" srcset="zapret-обсуждение-726/9227713c1f86726388b81b779748f5df17595386_2_669x500.jpeg, zapret-обсуждение-726/9227713c1f86726388b81b779748f5df17595386_2_1003x750.jpeg 1.5x, zapret-обсуждение-726/9227713c1f86726388b81b779748f5df17595386_2_1338x1000.jpeg 2x" data-dominant-color="B2BBBF"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">comss</span><span class="informations">1369×1023 157 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-17T11:55:59.474Z</td></tr><tr><td>abc555</td><td><p>та нет, вы запускаете поиск как я понял на компе, но если запрет у вас на роуторе в котором маленькая память и нет нужных пакетов, то quic на роуторе не будет работать, если сам запрет запускаете на компе, а не на роуторе тогда будет работать наверно, я не пробовал, не знаю</p>
<p>если quic не будет работать на роуторе, тогда и на всех устройствах соответственно он тоже не будет работать</p>
<p>а чтоб quic работал на роуторе, то нужен роутер с большой памятью, на который нужно установить дополнительные пакеты с поддержкой quic</p>
<p>если у вас на роуторе нет такой возможности, то забудьте про quic ))</p>
<p>quic это новый протокол, который работает сразу с tcp и udp трафиком, он просто быстрее работает. за счёт udp, называется HTTP/3 этот протокол который легко заблокировать, так как udp не шифруется и его легко прочитать. это гибрид tcp и udp  называется quic<br>
на компе в браузере вы можете его отключить, а вот в телефоне нет, поэтому блокировать порт udp 443 нужно в роуторе</p></td><td>2024-10-17T12:06:39.252Z</td></tr><tr><td>MIHAHIM</td><td><p>Как добиться такого интерфейса на 23.05?)</p></td><td>2024-10-17T12:15:06.249Z</td></tr><tr><td>doomer2007</td><td><p>Запрет на роутере. Собран с mbed, там в последних версиях пишут нет tls 1.3 и quic. Можно все собрать на openssl. Память роли не играет.<br>
Вопрос был в другом. Есть сайт для проверки соединения с куик. Он меня поздравил, что всё ок, но роутер его по идее не должен поддерживать. Значит что куик работает на всем, что запускать с десктопа, но не на том, что запускать с роутера? Как это на уровне сети-то работает? Куик же вроде отдельный протокол, который рядом с тсп и удп, как он проходит с десктопа на неподдерживающий роутер? Или я задаю очевидно глупый вопрос?</p></td><td>2024-10-17T12:15:11.765Z</td></tr><tr><td>bolvan</td><td><p>Вы запутались.<br>
Поддержка quic нужна в curl, чтобы он смог пытаться подключаться по quic к сайтам для тестирования обхода.<br>
Роутер сам по себе ничего не должен поддерживать. Он лишь перекидывает IP пакеты и все.<br>
И для обхода никакой поддержки QUIC не надо особой</p></td><td>2024-10-17T12:26:04.257Z</td></tr><tr><td>abc555</td><td><p>роутер пропускает любой трафик, ведь саму стратегию вы на компе подбираете, вот для компа вам и выдаёт, но не для роутера же<br>
на компе возможно работать и будет, на роуторе та же комбинация естественно работать не будет.<br>
если место не вопрос, то собирайте нужные пакеты, ставьте на роутер, проверяйте на компе, а потом на роуторе, не забываете останавливать службу zapret в роуторе когда подбираете стратегию на компе</p></td><td>2024-10-17T12:27:28.887Z</td></tr><tr><td>abc555</td><td><p>Вам легко говорить если у вас сборка на openssl, там где по 3 мгб пакет только один весит.<br>
посоветуйте на будущее какой лучше роутер купить, мне советовали filogic или ipq807x из не дорогих, но я там почитал, не всё так просто и в кирпич превратить очень легко, ну и сама фирма доверия не внушает</p></td><td>2024-10-17T12:42:15.291Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
я тоже так могу, но я вроде не про винду спрашивал)</summary>
<p>C:\Users\admin&gt;curl --version<br>
curl 8.10.1 (x86_64-w64-mingw32) libcurl/8.10.1 LibreSSL/3.9.2 zlib/1.3.1 brotli/1.1.0 zstd/1.5.6 WinIDN libpsl/0.21.5 libssh2/1.11.0 nghttp2/1.63.0 ngtcp2/1.7.0 nghttp3/1.5.0<br>
Release-Date: 2024-09-18<br>
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp ws wss<br>
Features: alt-svc AsynchDNS brotli CAcert HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM PSL SPNEGO SSL SSPI threadsafe UnixSockets zstd</p>
</details></td><td>2024-10-17T12:42:25.064Z</td></tr><tr><td>bolvan</td><td><p>Почему же работать не будет ?<br>
Если работает за роутером, будет и с него.<br>
Если там есть TTL, то TTL надо уменьшить на 1.<br>
А вот обратно может не работать. На роутере может работать, за ним - нет. Например, если есть datanoack или badsum, роутер может это порезать</p></td><td>2024-10-17T12:43:37.879Z</td></tr><tr><td>bolvan</td><td><p>Лучше брать только с USB, чтобы сделать extroot и забыть про место</p></td><td>2024-10-17T12:44:14.582Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="1478" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Дело не в версии curl, а в crypto библиотеке.<br>
На openwrt mbed tls не поддерживает ни tls 1.3, ни quic. А если бы и поддерживалось, то по умолчанию бы точно не собиралось с этими опциями. Там важно место. Его мало<br>
Раньше у них был вольф. Он хотя бы tls 1.3 поддерживал</p>
</blockquote>
</aside>
<p>в общем без заморочек опенвртшный курл не апгрейднуть до поддержки квика, ясно</p></td><td>2024-10-17T12:44:30.768Z</td></tr><tr><td>abc555</td><td><p>у меня есть под флешку, я вставлял, она греется, это надо не флешку а жесткий тогда подключать, та и скорость на флешке маленькая, это модный только ssd по типу м2, а проц слабый, поэтому роутер менять по любому и на 2х ядерный надо<br>
ipq807x этот как раз 2х ядерный, 3 штуки всего стоит и памяти полно, но с заморочками</p></td><td>2024-10-17T12:48:15.555Z</td></tr><tr><td>Esto</td><td><p><a href="https://curl.se/docs/http3.html" class="inline-onebox" rel="noopener nofollow ugc">HTTP/3 with curl</a> вот инструкция как сделать с поддержкой. мне пришлось потому что мой дистр дает курл без квика. копипаст и все работает. в скрипте блокчека там прям вначале есть строчка с курлом и просто прописать путь до бинарника который вы скомпилили. на роутере это делать необязательно можно и на компе.болван выше написал в чем разница может быть в ттл это очевидный а про другие штуки я не понимаю.ну и екструт можно и без флешки сделать если уж хотите заморочиться. можно по сети чтоб раздавал ваш комп пространство для роутера</p></td><td>2024-10-17T12:49:21.647Z</td></tr><tr><td>abc555</td><td><p>я себе сделал, у меня ttl одинаковый на выходе для всех устройств, независимо какой и них он прописан, роутер переписывает ttl на значение которое я поставил, как будто подключено всего одно устройство</p></td><td>2024-10-17T12:55:48.010Z</td></tr><tr><td>doomer2007</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a>, всё стало теперь яснее.<br>
<a class="mention" href="/u/easyone11">@easyone11</a>, есть статически собранные, просто качаете и кладёте на роутер, если место есть. Ну и прописать нужно, чтобы система этот курл брала, а не дефолтный.<br>
<a class="mention" href="/u/esto">@Esto</a>, собирать человеку нужно под роутер, а не десктоп. То есть сборка будет не под x86_64, тут нужна уже кросскомпиляция.</p></td><td>2024-10-17T12:57:59.648Z</td></tr><tr><td>Esto</td><td><p>какому человеку нужно под роутер собирать. даже если так просто  архитектуру добавить в команды</p></td><td>2024-10-17T13:01:07.513Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Система - Тема) Я ставлю прошивки от acdev, у него в сборках несколько тем)</p></td><td>2024-10-17T13:01:19.802Z</td></tr><tr><td>doomer2007</td><td><aside class="quote no-group" data-username="abc555" data-post="1522" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>quic это новый протокол, который работает сразу с tcp и udp трафиком, он просто быстрее работает. за счёт udp, называется HTTP/3 этот протокол который легко заблокировать, так как udp не шифруется и его легко прочитать. это гибрид tcp и udp называется quic</p>
</blockquote>
</aside>
<p>Что вы имеете ввиду под шифрованием и не шифрованием udp/tcp? Там же различия в гарантии доставки или её отсутствии. Шифрование уровнем выше.</p></td><td>2024-10-17T13:01:23.171Z</td></tr><tr><td>doomer2007</td><td><p>И либы установить другие для этого. Копипастой простой уже сложнее обойтись.</p></td><td>2024-10-17T13:02:24.744Z</td></tr><tr><td>Esto</td><td><p>и зачем либы если у тебя просто бинарник получается</p></td><td>2024-10-17T13:05:49.475Z</td></tr><tr><td>doomer2007</td><td><p>Чтобы скомпилировать под другую архитектуру нужны либы для кросскомпиляции. Вы только  с либами для x86, не скомпилируюете под арм. Так-то это не сложно, речь шла только о том, что ваша копипаста этого не сделает.</p></td><td>2024-10-17T13:07:13.007Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Последней строчкой. С hostlist-auto сделал бы, и какую-то стратегию, которая у вас работает на большинстве сайтов. Именно на случай, если блокировка есть, но хоста нет в одном из ваших списков.<br>
Кстати не совсем понял зачем у вас столько разных списков, но видимо так надо. Мне просто хватает дискорда, hostlist-auto tcp 443 и udp 443. 3 стратегии на всё. Можно, конечно, ещё 4ую для tcp 80, но я в-общем-то забил на не-https-ресурсы.</p></td><td>2024-10-17T13:10:43.777Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="1532" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>у меня есть под флешку, я вставлял, она греется, это надо не флешку а жесткий тогда подключать, та и скорость на флешке маленькая, это модный только ssd по типу м2, а проц слабый, поэтому роутер менять по любому и на 2х ядерный надо</p>
</blockquote>
</aside>
<p>Сейчас флэшки тотально испортились. 10 лет назад они были нормальные. Быстрые и негорячие<br>
Сейчас все наоборот. Китайцы вставляют говнопамять туда.<br>
Но openwrt большая скорость и не нужна. Там вся система влезает на 8-16 мб.<br>
Идеально, если найдется старая флэшка на 1-2-4-8 гб. Новую надо брать USB 2.0, а не 3.0, потому что последние могут быть очень горячие.<br>
И не брать обрезки. лучше, чтобы корпус был металлический и не слишком короткий.<br>
Не брать большой обьем, потому что часто бывают подделки. Не брать брэнды на алике по той же причине.<br>
А если денег не жалко, есть тыщи за 1.5-2 USB SSD stick</p></td><td>2024-10-17T13:11:43.162Z</td></tr><tr><td>spv82</td><td><p><a href="https://github.com/sbwml/openwrt-curl-prebuilt" rel="noopener nofollow ugc">Вот тут</a> есть наработки для сборки openwrt-пакета curl (quictls + libngtcp2 + libnghttp3) c патченным openssl. Так что можно для себя такой пакет собрать если очень хочется.<br>
Хотя, тот же статический curl пожатый upx-ом вполне может просто в /tmp поместиться:</p>
<pre><code class="lang-auto">$ ./curl -V
curl 8.10.0 (mipsel-pc-linux-gnu) libcurl/8.10.0 OpenSSL/3.3.2 zlib/1.3.1 brotli/1.1.0 zstd/1.5.6 c-ares/1.33.1 libidn2/2.3.7 li
bpsl/0.21.5 libssh2/1.11.0 nghttp2/1.63.0 nghttp3/1.5.0
Release-Date: 2024-09-11
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps t
elnet tftp ws wss
Features: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Largefile libz NTLM PSL SSL threadsafe TLS-SRP TrackMem
ory UnixSockets zstd

$ du -h ./curl
2.3M    ./curl
</code></pre></td><td>2024-10-17T13:12:16.956Z</td></tr><tr><td>bolvan</td><td><p>Такой вариант был хорош для обмана сотового оператора, но он ломает работу zapret с tll fooling.<br>
Сейчас раздачу ограничивать запрещено законодательно</p></td><td>2024-10-17T13:15:51.117Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>162.159.193.5:2408 . Мой про таттелеком Жёстко. Заблокировал. Этот адрес. Даже запрет не Помогает amneziawg Тоже не помогает. Хотя . Пару дней назад работала 162.159.192.5 Этот адрес работает пока что</p></td><td>2024-10-17T13:25:03.718Z</td></tr><tr><td>abc555</td><td><p>флешки не вариант, у меня много знакомых которым я обслуживаю роутеры и я делаю везде одни и те же настройки, на случай если у меня перестанет работать, значит и у них тоже, нахожу решение и делаю и них так же, поэтому ищу нормальную модель роутера из не дорогих и потом всех напрягаю её купить если он хочет, не хочет, тогда до свидания, на таких условиях я им помогаю, причём  безвозмездно .<br>
себе бы я смог замутить, но настройки будут отличатся и я не буду знать быстрое решение вот так вот на другом роуторе как сделать, а сделать надо так, чтоб не звонили типа не работает что то там.<br>
мои знакомые полный ноль, максимальные их знания кнопка далее и даже ума у них не хватает снять галку с чего тот там</p></td><td>2024-10-17T13:25:46.998Z</td></tr><tr><td>doomer2007</td><td><p>А почему бы все роутеры своих знакомых не связать с впн? Так и дорабатывать что-то можно будет удаленно потом.</p></td><td>2024-10-17T13:28:27.698Z</td></tr><tr><td>spv82</td><td><p>Сеть <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/deployment/firewall/#wireguard" rel="noopener nofollow ugc">162.159.193.0/24</a> для клиентов c Zero Trust. Уверены что именно РКН заблокировал, а не CF отлуп дает?</p></td><td>2024-10-17T13:29:06.207Z</td></tr><tr><td>abc555</td><td><p>если я могу подключится удалённо, значит и ещё кто то сможет, поэтому вход у всех наглухо закрыт из вне и положить роутер не реально из вне, я продумал все варианты, ну почти все наверное )<br>
сам пробовал свой положить и не смог, он не отвечает, как будто его нету</p></td><td>2024-10-17T13:33:17.916Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>На мегафоне-то работает. Через запрет. Я проверял</p></td><td>2024-10-17T13:34:08.321Z</td></tr><tr><td>TikTak(TikTak)</td><td><p>А на gpon мгтс разве такое прокатывает? там же роутер у них с ont (оптическим сетевым терминалом) совмещён. и они вроде даже в техподдержке отказывают если его перепрошить. или тут вариант ещё один роутер после онт ставить</p></td><td>2024-10-17T13:43:01.386Z</td></tr><tr><td>abc555</td><td><p>я не знаю, если провайдер пихает свой роутер, то я бы не стал его брать, в любом случаи некоторые провы привязка у них по мас, но на 5-30 минут должно быть максимум.<br>
роутер от провайдера, у него установлен бэктор, грубо говоря чёрный ход, некоторые провы, вообще открывают полный доступ к роутерам своих клиентов и удалённо его настраивают, любой может к нему подключится ))) я в шоке от такого обслуживания, насколько люди бестолковые</p>
<p>ну а те кто только поставил себе wrt, то я бы на вашем месте зашёл в настройки через люси в раздел SSH и поставил только для lan, по умолчанию не определено, то есть из wan доступ открыт, а если ещё и пароль не поменяли, то вообще прикольно, школьник какой то залезет, нахимичит, а вы потом думаете, что где то косяк в драйверах или в чём то )</p></td><td>2024-10-17T13:49:05.153Z</td></tr><tr><td>TikTak(TikTak)</td><td><p>да на мгтсовских с gpon точно есть бэкдор. но вроде только с определённых ип. а не то что кто угодно заходи) и тп первым делом коннектится и смотрит настройки. если там  опенврт или доступа нет мастер к вам не поедет) ну если проблема не общедомовая конечно</p></td><td>2024-10-17T13:58:59.269Z</td></tr><tr><td>doomer2007</td><td><aside class="quote no-group" data-username="abc555" data-post="1550" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>если я могу подключится удалённо, значит и ещё кто то сможет</p>
</blockquote>
</aside>
<p>Ну да, только взломав вас. У вас настолько там агрессивная среда? А вдруг взломают болвана и прокинут прямо в код запрета гадость? Вы обновитесь и что дальше?! Шанс этого выше, чем взлом вашего впн сервера с кражей ключей.</p></td><td>2024-10-17T14:01:12.826Z</td></tr><tr><td>abc555</td><td><p>ip можно подделать, главное чтоб открыт вход, остальное дело техники, куча инфы как и что делать, поэтому роутер от провайдера не вариант и он как обычно, на него даже прошивку не накатаешь, так как флеш у него будет 4 мгб или модель такая не поддерживается как обычно, хоть и дорогая</p></td><td>2024-10-17T14:01:32.459Z</td></tr><tr><td>doomer2007</td><td><p>С жипонами сложно, но с помощью китайских трансиверов и своего роутера его поддерживающего, худо бедно братья китайцы научились работать.</p></td><td>2024-10-17T14:03:35.237Z</td></tr><tr><td>abc555</td><td><p>к примеру как вирус прописывает днс в роуторе, он попадает на ваш телефон, дальше ломится по стандартным заложенным в него логинам и паролем в роутер и если всё удачно, меняет днс в роуторе на тот который ему нужен и весь ваш трафик уже идёт через его сервер который он логирует, пароль от вашей почты легко ему перехватить, это самое такое простое как обычно бывает, вот поэтому на вход в роутер надо менять и логин и пароль и порт не стандартный, как и не стандартный ip для lan сети<br>
если вы до сих пор пользуетесь днс от провайдера, то естественно он видит всё и может вас направить к кому угодно )</p></td><td>2024-10-17T14:06:51.765Z</td></tr><tr><td>doomer2007</td><td><p>Роутер по ssh ключам. Впн сервер по ключам и настроить его с роутерами знакомых. Как всё это свзано с вирусом?<br>
У вас какие-то пошли чудеса, как вирус ломает мой последний адроид с селинуксом или мой 15 айфон. Там агентура моссада быть должна, не иначе, но только им вообще достаточно смс прислать.</p></td><td>2024-10-17T14:10:15.203Z</td></tr><tr><td>abc555</td><td><p>я исключаю всегда  любые варианты, даже те которые кажутся не реальными</p></td><td>2024-10-17T14:13:30.532Z</td></tr><tr><td>doomer2007</td><td><p>Вариант взлома болвана вы исключили, что более вероятно.</p></td><td>2024-10-17T14:14:05.478Z</td></tr><tr><td>abc555</td><td><p>каким образом ? через фрагментированный пакет например ? для этого вам надо зайти на какой нить вредоносный сайт, который на это заточен и не роутер, а ваша машина попадает под раздачу, если стоит антивирус, то чему вам боятся, а если у вас дох днс с фильтрацией, то вероятность сводится к нулю<br>
вызвать переполнение буфера в роуторе через запрет, мало вероятно, вот если установлен пакет upnp тогда и вероятность очень высокая и запрет тут будет не приделах</p></td><td>2024-10-17T14:21:28.056Z</td></tr><tr><td>rarebird</td><td><p>МГТС-вский роутер переводится в бридж, дальше цепляется свой</p></td><td>2024-10-17T14:24:47.841Z</td></tr><tr><td>abc555</td><td><p>если условия прова чтоб только был его роутер, то тогда меняешь такого провайдера, нафиг он такой нужен ) и без вариантов</p></td><td>2024-10-17T14:26:26.301Z</td></tr><tr><td>easyone11</td><td><p>подскажите чем это лучше чем просто подключение 2го роутера без перевода в бридж?</p></td><td>2024-10-17T14:33:17.760Z</td></tr><tr><td>rarebird</td><td><p>Режим бридж - это по сути как свитч, полностью пассивный режим пропуска трафика. Айпишник получает и всем роутингом управляет ваш роутер, подключённый следом. Это удобно, чтобы не покупать свой роутер с поддержкой gpon, а использовать их роутер в режиме бридж как бесплатный переходник с оптики на ethernet.</p></td><td>2024-10-17T14:37:48.186Z</td></tr><tr><td>doomer2007</td><td><p>Засунули вредоносный код в репу. Вы обновили запрет. Опенврт от рута его исполнил. Вон, в обычном линуксе любая фигня может что угодно в хомяке делать, в том числе подделать запрос на пароль для судо, который вы и введёте.</p></td><td>2024-10-17T14:38:22.845Z</td></tr><tr><td>easyone11</td><td><p>дубль</p></td><td>2024-10-17T14:48:52.452Z</td></tr><tr><td>easyone11</td><td><p>а лучше чем? вот я не перевёл в бридж, на гпон роутере нет вай фай, нет подключённых устройств, всё управляется на подключённым к нему роутере, что мне даст перевод мгтс роутера в бридж?</p></td><td>2024-10-17T14:49:17.039Z</td></tr><tr><td>bolvan</td><td><ol>
<li>Отсутствие закладок и бэкдоров от производителя, провайдера, настройщика</li>
<li>Отсутствие потенциальных препятствий для работы обхода. Мало ли что он там режет. какой фулинг и TTL. Не потому ли на МГТС так мало стратегий работает ? не роутер ли виноват, который там фирменный ?</li>
<li>Отсутствие лишнего NAT. Это хорошо сказывается на скорости и лучше пробивается всякими ICE. Много NAT может не пробиться</li>
<li>Если внешний IP, то ты имеешь сам к нему доступ на своем контролируемом роутере. Заводской же в лучшем случае даст сделать проброс портов</li>
</ol></td><td>2024-10-17T15:00:20.993Z</td></tr><tr><td>rarebird</td><td><p>bolvan уже ответил. Добавлю, конкретно у МГТС два нюанса - для включения бриджа нужно вбить параметр в html, так как в веб-морде он в списке не выпадает (есть инструкция на 4pda), и при перезагрузке (в т.ч. при отключении питания) сбрасывается port binding - решается подключением через UPS. И сохраняется конфиг, на всякий случай, чтобы восстанавливать одним движением.</p></td><td>2024-10-17T15:11:35.718Z</td></tr><tr><td>easyone11</td><td><p>Вот, это уже ответ, спасибо )</p></td><td>2024-10-17T15:13:15.414Z</td></tr><tr><td>rarebird</td><td><p>Ещё небольшой лайфхак при включении бриджа, если к интернету подключение через DHCP - настроить ту же локальную сеть на вашем роутере, как и дефолтная на роутера провайдера. Например, если на провайдерском роутере по умолчанию 192.168.1.x, то и в своём роутере задаётся эта же локалка (при обычном подключении роутера к роутеру, естественно, наоборот, локальные сети задаются разные). В этом случае при сбросе настроек или принудительном обновлении прошивки провайдером на своём роутере, когда слетит бридж, наиболее вероятно (если только заодно не сменится настройка локальной подсети), будет конфликт с подсетью и пропадёт подключение к интернету на вашем роутере, что должно привлечь внимание.</p></td><td>2024-10-17T16:08:20.724Z</td></tr><tr><td>MIHAHIM</td><td><p>Такой вопрос, безопасно ли использовать запрет в плане посещения сайтов банков / госуслуг итд. В плане шанс того что как-либо взломают / украдут данные такой же как и без использования запрета или выше? И чтобы запрет не юзался на определенных сайтах нужно ТОЛЬКО внести в zapret-hosts-user-exclude.txt список нужных доменов / ip? Но нужно ли это если итак все работает и не влияет на безопасность?</p></td><td>2024-10-17T21:23:20.307Z</td></tr><tr><td>bolvan</td><td><p>Я не вижу никаких моментов, влияющих на безопасность, связанных с zapret.<br>
Максимум, что можно получить, это неработающие сайты.<br>
В сборки от васянов могут напихать что угодно, вплоть до крадущих что-то троянов.<br>
Хостлисты не работают на стратегиях нулевой фазы.<br>
wssize и syndata - мимо.<br>
Так же если брать скрипты запуска, то применение фильтра по хостлисту, настроенного в /opt/zapret/config, ведется только к последнему профилю. Если есть --new, это повод задуматься</p></td><td>2024-10-18T05:45:14.353Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="bolvan" data-post="1575" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если есть --new, это повод задуматься</p>
</blockquote>
</aside>
<p>А что не так с new? И если он создает дыру в безопасности, чем его заменить? Просто в одну строку бахнуть? У меня тут в каждой строке new…</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=5 --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=4"
</code></pre></td><td>2024-10-18T07:02:18.186Z</td></tr><tr><td>bolvan</td><td><p>new не создает дыру в безопасности.<br>
Но он может сделать так, что MODE=hostlist не будет применятся вообще или применяться ожидаемым образом, и тем самым дурение будет применяться к сбербанку</p>
<pre><code class="lang-auto">--filter-udp=50000-65535 --dpi-desync=fake,tamper  --dpi-desync-any-protocol
</code></pre>
<p>вот это полностью нерабочая глупость для скриптов запуска<br>
никаким образом инстанс из NFQWS_OPT_DESYNC не будет получать udp пакеты<br>
в win версии это ТРЭШ С ФЛУДОМ. так везде и пишу чуть ли не матом на того идиота, кто это выкатил, и потом это копируется бездумно всеми подряд. обьяснять опять ничего не буду - надоело.<br>
однажды кто-нибудь вас забанит, будете потом в службу поддержки сбербанка долго стучаться<br>
(уловно говоря. но кто-то правда вас сможет забанить за ФЛУД)</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
</code></pre>
<p>Здесь тоже никогда не сработает<br>
udplen параметры вообще ни с какого боку</p>
<p>для discord написан отдельный custom</p>
<p>да здравствует копипаста</p></td><td>2024-10-18T07:22:49.793Z</td></tr><tr><td>MIHAHIM</td><td><p>Убрал приведенные выше строки, видел кастом для дискорда, но еще не разобрался, но в любом случае там помимо дискорда у меня еще 6 строк, как избавится от new?</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=5 --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=7 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=4"
</code></pre></td><td>2024-10-18T07:59:16.368Z</td></tr><tr><td>bolvan</td><td><p>Цель не в избавлении от new, а во вдумчивом его применении.<br>
Если он пишется, надо понимать зачем<br>
Все udp здесь работать не будет</p></td><td>2024-10-18T08:06:45.490Z</td></tr><tr><td>MIHAHIM</td><td><p>Весь этот конфиг я взял из сборки <a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B5-%D0%BF%D0%B8%D1%88%D0%B8%D1%82%D0%B5-%D1%81%D1%8E%D0%B4%D0%B0-%D0%BD%D0%B8-%D0%BF%D1%80%D0%BE-%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B8-%D0%BD%D0%B5-%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D0%B2-1-%D0%B9-%D0%BF%D0%BE%D1%81%D1%82-%D1%82%D0%B5%D0%BC%D1%8B/11624">YTDisBystro</a>, получается он неверно написан? Или он только под винду? Я его переделал немного под linux</p></td><td>2024-10-18T08:11:22.003Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Этот конфиг был в ранних версиях сборки. Начиная с 1.0 такого там уже нет</p>
<pre><code class="lang-auto">--filter-udp=50000-65535 --dpi-desync=fake,tamper  --dpi-desync-any-protocol
</code></pre>
<p>И убрали его именно после пояснения, что так делать НЕЛЬЗЯ.<br>
Вы берите последние версии сборок, или читайте темы. Иначе странно получается, один человек выкатил ошибочный и вредный пример. Почему-то его пример все взяли и распространяют, а потом 100500 раз обсуждений и пояснений, что это ошибка была, никто НЕ читает. И по сети гуляют именно неправильные конструкции, которые еще и вредные.</p></td><td>2024-10-18T08:18:51.228Z</td></tr><tr><td>bolvan</td><td><p>Под windows запуск немного отличается, потому что там нет ip/nf tables.<br>
Они можно сказать вшиты в сам zapret. Реализация через windivert.</p>
<p>И если на linux надо написать<br>
iptables -I POSTROUTING -t mangle -o eth0 -p tcp --dport 443 … -j NFQUEUE --queue-num 200<br>
nfqws --qnum=200 --dpi-desync=split2</p>
<p>То в винде это делается<br>
winws --wf-tcp=443 --dpi-desync=split2</p>
<p>в linux есть скрипты запуска. Это обертка вокруг голых иптаблес и nfqws/tpws. У нее есть свои особенности. Изначально она не была расчитана на мультистратегии, поэтому исторически там пишется отдельно для http,https,quic, а все остальное пишется кастомами или отказом от скриптов и ручным запуском на свое усмотрение</p></td><td>2024-10-18T08:32:17.339Z</td></tr><tr><td>MIHAHIM</td><td><p>Проверил, в последней версии --filter-udp=50000-50020</p>
<p>То есть, вот это безопасный и рабочий конфиг?:</p>
<p>Переделал, получилось так:</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-tls=sniext --dpi-desync-repeats=6 --dpi-desync-cutoff=d2 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00.bin --dpi-desync-cutoff=n2 --new
--filter-udp=50000-50020 --dpi-desync=fake,split2 --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00 --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre></td><td>2024-10-18T08:41:20.786Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="bolvan" data-post="1582" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>И если на linux надо написать<br>
iptables -I POSTROUTING -t mangle -o eth0 -p tcp --dport 443 … -j NFQUEUE --queue-num 200<br>
nfqws --qnum=200 --dpi-desync=split2</p>
</blockquote>
</aside>
<p>У меня роутер, куда поставил опенврт 23.05<br>
Это строчку в начало конфига дописать?</p>
<pre><code class="lang-auto">iptables -I POSTROUTING -t mangle -o eth0 -p tcp --dport 443 … -j NFQUEUE --queue-num 200
nfqws --qnum=200 --dpi-desync=split2
--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-tls=sniext --dpi-desync-repeats=6 --dpi-desync-cutoff=d2 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00.bin --dpi-desync-cutoff=n2 --new
--filter-udp=50000-50020 --dpi-desync=fake,split2 --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_test_00 --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre></td><td>2024-10-18T08:43:00.652Z</td></tr><tr><td>bolvan</td><td><p>Это лучше. Я не берусь судить что там автор раскидал по листам.<br>
cutoff обязателен только если есть --dpi-desync-any-protocol. Но автор, видимо, этого все еще не понимает. Но хотя бы флуда нет. На linux вместо cutoff есть connbytes в ip/nf таблес, потому там без него можно обойтись</p>
<pre><code class="lang-auto">У меня роутер, куда поставил опенврт 23.05
Это строчку в начало конфига дописать?
</code></pre>
<p>Нет, все не так просто.</p></td><td>2024-10-18T08:43:54.246Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1584" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Это строчку в начало конфига дописать?</p>
</blockquote>
</aside>
<p>Не надо просто так бездумно ничего добавлять. Это просто пример был различий в реализации “фильтра” на Linux И Windows.<br>
У вас на роутере свои конфиги будут, просто так копипастить между этим конфигом и тем нельзя.</p></td><td>2024-10-18T08:51:19.400Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1585" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но автор, видимо, этого все еще не понимает.</p>
</blockquote>
</aside>
<p>А может понимает, но хочет посмотреть на вашу реакцию, когда конфиг потащат сюда <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"> Главное - не мешает и ничего не ломает. На винде. Как уж на линуксах я не знаю )</p></td><td>2024-10-18T09:06:27.648Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="bolvan" data-post="1585" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Это лучше. Я не берусь судить что там автор раскидал по листам.<br>
cutoff обязателен только если есть --dpi-desync-any-protocol. Но автор, видимо, этого все еще не понимает. Но хотя бы флуда нет. На linux вместо cutoff есть connbytes в ip/nf таблес, потому там без него можно обойтись</p>
</blockquote>
</aside>
<p>Не заработало с cutoff, без - полет отличный.</p>
<p>Сейчас такой конфиг:</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre>
<p>Не подскажите как на опенврт роутере прописать (из виндового конфига)</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --wf-udp=443,50000-50020
</code></pre>
<p>Чтобы уж полноценный был конфиг рабочий, спасибо за помощь</p></td><td>2024-10-18T09:08:24.383Z</td></tr><tr><td>bolvan</td><td><p>Если так делать, то оставлять<br>
MODE_FILTER=none<br>
убирать весь udp из NFQWS_OPT_DESYNC<br>
udp с 443 помещать в NFQWS_OPT_DESYNC_QUIC с редактированием.  достаточно оставить --dpi-desync=fake --dpi-desync-repeats=1 (или чуть больше, надо блокчек гнать. возможно, потребуется пробив нестандартным фейком)<br>
убирать --filter-udp<br>
убирать cutoff и desync any protocol<br>
убирать tamper и udplen (они не работают в данном конфиге)<br>
убирать все со словом “discord” (тк специализация для discord не имеет смысла, udplen не работает)<br>
ставить MODE=custom<br>
MODE_HTTP=1 MODE_HTTP_KEEPALIVE=0 MODE_HTTPS=1 MODE_QUIC=1<br>
в init.d/openwrt/custom.d скопировать файлы<br>
init.d/openwrt/custom.d.examples/{10-inherit-nfqws,50-discord}</p>
<p>и то, гарантий по стратегии, разумеется, никаких<br>
как видите, кроме простого переноса конфига, есть еще куча бесполезных настроек, которые желательно убирать. и доисследование параметров на своем провайдере</p></td><td>2024-10-18T09:15:53.159Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Пока у вас есть настроение для объяснений (ну вдруг <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> ). Можно вкратце про автохостлист еще раз, на примере</p>
<p>осталось две ситуации рассмотреть</p>
<ol>
<li><a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> есть только в youtube.txt но параметры1 НЕ помогают получить доступ к сайту</li>
<li><a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a>  есть и в youtube.txt и autolist.txt<br>
и наши профили (жесткие фильтры везде tcp=443)</li>
</ol>
<pre><code class="lang-auto">--filter-tcp=443 --hostlist="youtube.txt"  [параметры1]
--filter-tcp=443 --hostlist="russain.txt"  [параметры2]
--filter-tcp=443 --hostlist-auto="autolist.txt"  [параметры3]
</code></pre>
<p>В каком порядке будут применяться параметры “дурения” при доступе к <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a>?<br>
Помощь я читал, но мне не до конца понятен механизм попадания именно в такой ситуации домена в автохостлист.<br>
Т.е. для ситуации1 применяются параметры1 и потом фиксируется факт блокировки (после 3х неуспешных попыток с таймаутом 60 сек, которые тоже параметрами задать можно)<br>
ну и для ситуации2 в каком порядке применяются и не применяются парамметры1,3<br>
Про debug и логирование я знаю, но сэмулировать такую ситуацию на практике сложно.</p></td><td>2024-10-18T09:30:59.165Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>убирать весь udp из NFQWS_OPT_DESYNC<br>
udp с 443 помещать в NFQWS_OPT_DESYNC_QUIC<br>
убирать --filter-udp</p>
</blockquote>
</aside>
<p>Убирать и перемещать все строки? или только</p>
<pre><code class="lang-auto">--filter-udp=443
</code></pre>
<aside class="quote no-group" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>убирать cutoff и desync any protocol<br>
убирать tamper и udplen (они не работают в данном конфиге)</p>
</blockquote>
</aside>
<p>Тут понял</p>
<aside class="quote no-group" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>убирать все со словом “discord” (тк специализация для discord не имеет смысла, udplen не работает)</p>
</blockquote>
</aside>
<p>2 Строки целиком где есть дискорд?</p>
<aside class="quote no-group" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>в init.d/openwrt/custom.d скопировать файлы<br>
init.d/openwrt/custom.d.examples/{10-inherit-nfqws,50-discord}</p>
</blockquote>
</aside>
<p>Тут понял</p></td><td>2024-10-18T09:31:39.249Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="SanSerg" data-post="1590" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/sanserg/48/9882_2.png" class="avatar"> SanSerg:</div>
<blockquote>
<p>В каком порядке будут применяться параметры “дурения” при доступе к <a href="http://youtube.com">youtube.com</a>?</p>
</blockquote>
</aside>
<p>Сверка профилей идет всегда слева направо. При первом совпадении сразу match и никаких больше поисков ни при каких условиях.<br>
То есть если он в youtube.txt, до автолиста дело не дойдет.<br>
В автолистном профиле если он уже в листе, дурение пойдет как при обычном листе, без проверки результата. Если его еще нет в автолисте, дурение НЕ пойдет и будет оцениваться результат. При НЕ успехе (ретрансмиссии, RST, http redirect на другой домен) будет занесение в лист.</p></td><td>2024-10-18T09:34:47.744Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Спасибо.Теперь понятно и логично.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1592" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>То есть если он в youtube.txt, до автолиста дело не дойдет.</p>
</blockquote>
</aside>
<p>а то вот тут возникал вопрос. И многие утверждают, что все равно если нет доступа (после применения профиля1), то ютуб.ком  добавиться в автолист.</p></td><td>2024-10-18T09:36:56.875Z</td></tr><tr><td>bolvan</td><td><p>Это не так.<br>
Но есть еще нюансики с нулевой фазой.<br>
На этапе нулевой фазы (tcp handshake) при наличии wssize или syndata оно может пойти по автохостлист профилю . И смотря где написано wssize будет либо не работать вообще, либо работать всегда без учета листа. Только нулевая часть, остальное потом выправится, тк профили переключатся, когда появится имя хоста</p>
<p>Есть же --debug. Он там все показывает что творит.<br>
Смотрим начало соединения. SYN пакет.<br>
Сразу же идет поиск профиля. Там может выпасть или автолистный , или profile 0.<br>
Потом идет TLS CLientHello<br>
Hostname discovered, L7 discovered.<br>
Пересканирование профилей.<br>
Hostlist check profile 1.<br>
Profile 1 matches<br>
это переключение профилей, дальше обработка по profile 1 с youtube без автолиста</p></td><td>2024-10-18T09:38:29.278Z</td></tr><tr><td>MIHAHIM</td><td><p>Вот так получилось, но мне кажется я вас не так понял в каких-то моментах…</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl

NFQWS_OPT_DESYNC_QUIC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--dpi-desync=fake,split2 --hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre></td><td>2024-10-18T09:45:49.893Z</td></tr><tr><td>jcdenton</td><td><p>Уважаемый <a class="mention" href="/u/bolvan">@bolvan</a> , такая проблема, у матери на компе стоит лубунту 2204, с установленным тогда же (в 22 году) запретом, с опциями --split2, --wssize=1:6, (да, знаю что что влияет на скорость, но в данном случае это не критично) работало железобетонно, даже когда заблочили ютуб не пришлось приезжать, ибо я заранее вбил все его домены еще когда заблочили только аватарки. Но вчера, после обновления ядра до 5.15.0-124 (<a href="https://pastebin.com/emAYu7nS" class="inline-onebox" rel="noopener nofollow ugc">2024-10-17 12:08:19 status installed snapd:amd64 2.65.3+22.042024-10-17 12:08: - Pastebin.com</a>), обход перестал работать впринципе, при этом никаких ошибок в консоли и тд. Я подумал ок, время обновить прогу, поставил последнюю версию с сайта - тоже самое (знаю, что теперь для работы -wssize нужно прописывать его в NFQWS_OPT_DESYNC_HTTPS_SUFFIX), обычные стратегии типа fake работают (но не на ютубе), а --wssize нивкакую, подскажите куда копать, действительно ли это какие-то изменения в ядре линукса или что-то другое. Прописывал NFQWS_OPT_DESYNC=“–debug=1 --dpi-desync=split2” и в NFQWS_OPT_DESYNC_HTTPS_SUFFIX=“–debug=1 --wssize 1:6” тоже, но что-то никакого подробного лога в консоли не увидел.</p></td><td>2024-10-18T09:47:50.944Z</td></tr><tr><td>bolvan</td><td><p>Тяжело это, когда ничего не понимаешь. Когда это всего лишь буковки.</p>
<p>tcp бесполезен для QUIC<br>
автолист, если он нужен, лучше реализовать тогда через<br>
MODE_FILTER=autohostlist, убрав его из профилей вообще. скрипты допишут<br>
будет стандартный автолист в директории ipset</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl

NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"

MODE_FILTER=autohostlist
MODE_HTTP=1
MODE_HTTP_KEEPALIVE=1
MODE_HTTPS=1
MODE_QUIC=1
</code></pre>
<p>netrogat.txt перемещается в ipset/zapret-hosts-exclude.txt<br>
autohostlist.txt перемешается в ipset/zapret-hosts-auto.txt</p>
<p>что это за russia blacklist и прочие листы я не знаю, тоже могут быть логические нестыковки</p></td><td>2024-10-18T09:51:26.033Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1594" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Только нулевая часть, остальное потом выправится, тк профили переключатся, когда появится имя хоста</p>
</blockquote>
</aside>
<p>спасибо, вот это тоже требовало для меня пояснения. Что если будет что-то типа</p>
<pre><code class="lang-auto">--dpi-desync=fake,disorder2 --dpi-desync-ttl=1 --dpi-desync-autottl=3 --wssize 1:6
</code></pre>
<p>для автолиста. То на первом проходе выполнится только wssize  (нулевая фаза), а потом когда станет известно имя хоста (после clienthello например) то еще раз пойдёт скан по профилям и может выбраться другой.</p></td><td>2024-10-18T09:52:01.706Z</td></tr><tr><td>bolvan</td><td><p>Именно так.<br>
Теоретически скан профилей может выполняться 3 раза.<br>
На этапе tcp handshake, на этапе узнавания L7 и на этапе узнавания хоста. Последние 2 обычно вместе происходят, так что обычно скана всего 2.<br>
И если вместо hostlist-auto будет hostlist и/или hostlist-exclude, то wssize по этому профилю не применится, тк он не будет выбран на этапе tcp handshake</p></td><td>2024-10-18T09:54:32.824Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1592" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сверка профилей идет всегда слева направо. При первом совпадении сразу match и никаких больше поисков ни при каких условиях.<br>
То есть если он в youtube.txt, до автолиста дело не дойдет.</p>
</blockquote>
</aside>
<p>Печально. Я думал кроме матча по домену проверяется еще и его доступность для нормального коннекта.</p></td><td>2024-10-18T09:54:50.715Z</td></tr><tr><td>bolvan</td><td><p>Доступность для конекта - критерий ненадежный.<br>
Там может быть и подмена сертификата (кто его подменяет ? откуда нам знать ? и подменяют ли ?), может быть какой-то http код левый (400, например. кто его выдает ? сервер в нормальном состоянии ? фейк наш дошел до сервера и испортил ответ ?).<br>
Может сервер призадумался.</p>
<p>Я думал над этой автоматией. Сложно получается и ненадежно, отказался.<br>
В byedpi есть кое-какая автоматия с обратной связью. Но там это проще сделать, чем на уровне отдельных пакетиков</p></td><td>2024-10-18T09:57:30.636Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1601" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Я думал над этой автоматией. Сложно получается и ненадежно, отказался.</p>
</blockquote>
</aside>
<p>Вы вообще единственный разработчик этой гениальной и полезной программы или коллектив разработчиков?<br>
В любом случае огромное спасибо за разработку. Учитывая функционал и поддержку для разных платформ, это очень большая и полезная программа.</p></td><td>2024-10-18T10:08:12.151Z</td></tr><tr><td>MIHAHIM</td><td><p>Спасибо за конфиг <img src="https://ntc.party/images/emoji/twitter/blush.png?v=12" title=":blush:" class="emoji" alt=":blush:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="bolvan" data-post="1597" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>netrogat.txt перемещается в ipset/zapret-hosts-exclude.txt<br>
autohostlist.txt перемешается в ipset/zapret-hosts-auto.txt</p>
</blockquote>
</aside>
<p>Как понять перемещается? Эти файлы скинуть в папку ipset?</p></td><td>2024-10-18T10:08:22.612Z</td></tr><tr><td>SanSerg(Сергей)</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1603" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Как понять перемещается? Эти файлы скинуть в папку ipset?</p>
</blockquote>
</aside>
<p>содержимое исходное этих файлов поместить в те что указаны ipset/zapret*.txt</p></td><td>2024-10-18T10:09:18.866Z</td></tr><tr><td>MIHAHIM</td><td><p>Так они пустые <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-18T10:10:24.176Z</td></tr><tr><td>doomer2007</td><td><p>Одна польза от ркн. У вас есть повод чаще навещать маму(если вы не через впн к ней подключаетесь), чтобы ей запрет настроить.</p></td><td>2024-10-18T10:11:26.673Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Реально рекламный слоганы.<br>
“Ркн заботится о вас, обновили настройки тспу, навестите родителей!”<br>
“На форумах затишье??? РКН придёт на помощь, общайтесь с новыми силами и энергией.”<br>
“Никогда не слышал о ресурсе xyz.xy? Заблокируем его для тебя, чтобы узнал и им пользовался впредь.”</p></td><td>2024-10-18T10:27:19.183Z</td></tr><tr><td>easyone11</td><td><p>блин)) поржал</p></td><td>2024-10-18T11:04:38.534Z</td></tr><tr><td>bolvan</td><td><p>Нет, это значит информацию из файла A перенести в файл B<br>
Если там ничего нет, значит ничего и делать не надо</p></td><td>2024-10-18T13:11:41.780Z</td></tr><tr><td>bolvan</td><td><p>Я начинал это делать для себя по большему счету в 16 году. Потом выложил может кому будет полезно. Так с тех пор и делаю когда есть желание и настроение. Или необходимость.<br>
Кое-какой вклад в репу есть и других участников, но он минимален.<br>
Другие в основном делают всякие специализации. Под кинетик. Интерфейсик какой-нибудь. Опакечивание под дистрибутивчик. И тд. Как независимые проекты.<br>
Большинство методов - не моя придумка, хотя кое-что и я сам придумал без оглядки на другие источники.</p></td><td>2024-10-18T13:14:50.601Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Ну сейчас это реально кросплатформенный и полностью настраиваемый проект</p>
<aside class="quote no-group" data-username="bolvan" data-post="1610" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Я начинал это делать для себя по большему счету в 16 году.</p>
</blockquote>
</aside>
<p>Клевые проекты наверное так и начинаются.<br>
но сейчас в итоге то и кросплатформенный  (даже под win32) и полностью настраиваемый.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1610" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Большинство методов - не моя придумка, хотя кое-что и я сам придумал без оглядки на другие источники.</p>
</blockquote>
</aside>
<p>Ну тут же и реализовать в разных системах методы это не тривиальная задача. Про свои методы я даже не говорю. Тут тяжело иногда разобраться по логам и дампу вайршарка как это уже работает, не то что придумать.<br>
В общем как говорится “снимаю шляпу” и здоровья  вам и всех благ за вклад в бесперебойную работу инета.</p></td><td>2024-10-18T14:39:41.011Z</td></tr><tr><td>MIHAHIM</td><td><p>Сделал полностью как вы сказали, пока что всё работает, спасибо</p>
<aside class="quote no-group" data-username="bolvan" data-post="1597" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>что это за russia blacklist и прочие листы я не знаю, тоже могут быть логические нестыковки</p>
</blockquote>
</aside>
<p>russia blacklist содержит большинство блокированных сайтов одним списком, более 10к наименований</p>
<aside class="quote no-group" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>и то, гарантий по стратегии, разумеется, никаких</p>
</blockquote>
</aside>
<p>Тут еще хотел уточнить, что вы имели ввиду по поводу этой стратегии в целом, гарантий на работоспособность никаких или на безопасность?</p></td><td>2024-10-18T14:54:47.284Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Возможно уже был вопрос такой, но если допустим есть рабочий список стратегий для windows версии, как лучше всего его перенести на линукс версию? Что выбирать, tpws, nfqws? Куда список стратегий вносить? Линуксом пользоваться хоть и умею, но различие между версиями уж больно крутое.<br>
Квикстарт читал, там по этому поводу не видел ответов на свои вопросы.</p></td><td>2024-10-18T14:59:19.315Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1612" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>russia blacklist содержит большинство блокированных сайтов одним списком, более 10к наименований</p>
</blockquote>
</aside>
<p>Я бы тогда убрал строчки с russia blacklist вообще.<br>
Если есть автолист, зачем что-то еще ? Оно само накопится там.<br>
Либо отказ от автолиста и использование предлагаемых сетапом вариантов автозагрузки и автообновления готовых листов.<br>
Недавно вышли re-filter листы. Небольшие и хорошо почищенные от всякого мусора - нарко казино</p>
<p>На безопасность zapret вряд ли может как-то влиять. Разве что очень специфические случаи.</p>
<p>Общую стратегию обхода следует адаптировать под провайдера как обычно. Блокчек, обьединение.</p></td><td>2024-10-18T15:13:19.321Z</td></tr><tr><td>bolvan</td><td><p>Мы тут это и обсуждаем рядом.<br>
Только там процесс осложнен чьей-то чудо-сборкой с кучей профилей.<br>
Большинство из которых можно выкинуть</p></td><td>2024-10-18T15:15:32.766Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Боюсь я пришел с той же чудосборкой <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p>Почитал ваши посты, вроде бы понял как конфиг задать, потом посмотрю еще раз репу чтобы понять разницу между tpws, nfqws, filter и еще четвертой опцией.<br>
Почему вообще такая разница между виндой и линуксом? Понятное дело, что в одном случае используются iptables, а в другом целый драйвер, но почему именно несколько бинарников?</p></td><td>2024-10-18T15:44:37.192Z</td></tr><tr><td>bolvan</td><td><p>Несколько - каких именно ?<br>
В чем отличие tpws и nfqws читаем readme.<br>
filter - это не бинарик. Это режим, когда обход DPI не работает, а вам нужна лишь система получения листов и заполнения ipset для последующих собственных заворотов на впн или прокси<br>
Или вопрос почему несколько инстансов пускается ? Исторически так было, до мультистратегий. В винде - тоже</p></td><td>2024-10-18T16:27:25.268Z</td></tr><tr><td>danaYatsuta</td><td><p>Добрый день, переехала с ByeDPI на zapret чтобы обойти блокировку войса в дискорде. На ByeDPI у меня стояли аргументы <code>--hosts :googlevideo.com --fake -1 --md5sig --auto none --disorder 1</code> и на них все работало (кроме вышеупомянутого войса, до него я еще не добралась) и я пытаюсь воспроизвести эту конфигурацию на запрете. С <code>--disorder 1</code> все понятно, использую <code>--dpi-desync=disorder2</code> и все кроме ютуба работает, а вот аналог <code>--fake -1</code> не понимаю как получить, и я пока что не нашла другую рабочую комбинацию. Подскажите пожалуйста, как можно настроить запрет по аналогии с ByeDPI с этой опцией?</p>
<p>Edit: я прошу прощения за упоминание, я случайно <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"> не ту кнопку ответить нажала</p></td><td>2024-10-18T16:57:01.520Z</td></tr><tr><td>easyone11</td><td><p>а запустить блокчек для поиска стратегии не хотите?</p></td><td>2024-10-18T17:08:10.436Z</td></tr><tr><td>danaYatsuta</td><td><p>В <a href="https://github.com/bol-van/zapret/discussions/200" rel="noopener nofollow ugc">обсуждениях на гитхабе</a> видела, что блокчек для <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> не сработает. Все же сработает?</p></td><td>2024-10-18T17:11:07.637Z</td></tr><tr><td>easyone11</td><td><p><a href="http://googlevideo.com">googlevideo.com</a> не заблокирован, поэтому для него и не сработает (для ютуба надо сканить сами сервера откуда видео идёт)<br>
для всего заблокированного (если не по ip) блокчек работает</p></td><td>2024-10-18T17:13:22.156Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote quote-modified" data-post="1" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Примечание: На время проверки нужно отключить  фаерволл / брандмауэр / антивирус. 
Если до этого стоял goodbyedpi, то запустить от имени администратора service_remove.cmd 

Скачать и распаковать архив с zapret (автор bolvan) <a href="https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip">https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip</a>

<details><summary>Примечание для системы x32 либо windows 7:</summary>На x32 zapret не работает, а на windows 7 нужно скопировать файлы WinDivert.dll и WinDivert64.sys из папки x86_64\ с goodbyedpi и заменить в zapret-е в 2 мес…</details>
  </blockquote>
</aside>
<p>
Тут описано, для каких адресов проверять</p></td><td>2024-10-18T17:14:18.206Z</td></tr><tr><td>danaYatsuta</td><td><p>Прогнала по адресу типа <code>rr**....googlevideo.com</code>, блокчек показывает что <code>working without bypass</code>. Перепроверила что запрет был на момент запуска блокчека выключен.</p>
<p>Посмотрела тему скинутую выше, но не знаю как ее выполнить, ибо сижу на линуксе.</p></td><td>2024-10-18T17:27:14.538Z</td></tr><tr><td>bolvan</td><td><p>У byedpi своя специфика fake. Если nfqws работает напрямую на raw sockets и может делать практически все, то у dpi руки связаны socket api.<br>
byedpi ухищрается, идет на обман системы (гонки), чтобы только как-то сэмулировать fake.<br>
У него это получается, но он имеет свои ограничения. Абы как он фейк послать не может.<br>
–fake -1  означает делить оригинальный запрос на позиции 1 байт с конца. Все байты запроса, кроме последнего, а потом последний байт отдельным пакетом.<br>
И вместо 1 части он через обман системы заставляет послать фейк. Он будет точно размером с первую часть. Если полезные данные фейка меньше, они будут дополнены нулями. Если больше - обрезаны.<br>
Если взять оригинальный пакет длиной N, то посыл будет таким :  fake 1…(N-1), original N, original 1…(N-1). Если отбросить fake, который не дойдет до сервера, то получаем в добавок к этому еще и эффект disorder.</p>
<p>Точно воспроизвести данный вариант на zapret не получится, потому что он не имеет регулируемой длины фейков. Но это и не надо.<br>
–dpi-desync=fake,disorder2  с ограничителями ttl и/или fooling вполне достаточно<br>
–dpi-desync-fooling=md5sig, если копировать с byedpi</p></td><td>2024-10-18T17:45:04.700Z</td></tr><tr><td>danaYatsuta</td><td><p><code>--dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig</code> результатов не дал <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"> Попробовала потыкать разные значения <code>--desync-dpi-ttl</code> и <code>--desync-dpi-autottl</code>, пока что тоже без результатов. Может можно все же как-то прогнать блокчек по ютубу? А то у меня уже заканчиваются идеи…</p>
<p>Edit: отбой тревоги, добавление <code>--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin</code> наконец спасило ютуб. Спасибо всем за помощь и ответы! Теперь надо заниматься дискордом…</p></td><td>2024-10-18T18:02:19.471Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Кстати сегодня делал эксперимент, на ПК с виндой с запущенным запретом включил вайфай хотспот и подключился со смартфона, однако работа запрета на него не распространилась. Он только в локалхосте работает? Вообще есть смысл как-то пытаться поднять туннель, чтобы таким макаром прокинуть запрет на беспроводные устройства или это только на роутере поднимать?</p>
<p>||OpenVPN меня сегодня выбесил||</p></td><td>2024-10-18T20:12:13.717Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>ValdikSS писал, что windivert не поддерживает транзитный трафик. Поэтому и не работает такая схема с хотспотом, увы. Через хотспот можно использовать byedpi <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/741" class="inline-onebox">Окологудбайдипиайный флуд - #741 by TesterTi</a> Но имхо, проще просто установить byedpi4android</p></td><td>2024-10-18T20:31:30.944Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group" data-username="bolvan" data-post="1614" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Я бы тогда убрал строчки с russia blacklist вообще.<br>
Если есть автолист, зачем что-то еще ? Оно само накопится там.</p>
</blockquote>
</aside>
<p>Тоесть, всё что заблокировано и содержится в russia blacklist , при посещении будет добавляться в автолист и обходить блокировку?</p>
<p>UPDATE: попробовал убрать, много заблокированных сайтов перестали открываться вообще</p>
<p>Поставил отфильтрованный список вместо старого блеклиста, все нужные сайты открываются.</p>
<p>Инсту и фб так и не удалось побороть, ну да и хрен с ними)</p></td><td>2024-10-18T21:00:05.755Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Даже если поднять VPN-туннель как либо?</p>
<p>ByeDPI мне не особо подходит ввиду не такой обильной жирности в стратегиях, плюс меньшее комьюнити в нем (никто не делится стратегиями, а в гудчеке лишь всего парочка). Против дискорда помогает, но ютуб глохнет на нем.<br>
Видимо буду значит роутер поверх как-то мутить, раз на андроиде запрет пока не завести никак.</p></td><td>2024-10-18T21:11:45.571Z</td></tr><tr><td>bolvan</td><td><p>Да, виндовая версия не работает с проходным трафиком.<br>
Варианта 2<br>
Ставить любой прокси на винду или использовать виртуалку с linux и на нее заворачивать трафик</p></td><td>2024-10-19T06:47:14.971Z</td></tr><tr><td>bolvan</td><td><p>Читаем доку по поводу автолиста. Метод тыка он прикольный, но не всегда дает нужный результат и отнимает время у других на ответы</p></td><td>2024-10-19T06:47:52.319Z</td></tr><tr><td>bolvan</td><td><p>На андроиде запрет завести можно, но только по-хакерски.<br>
Рут, консоль. приложения нет<br>
Сделать приложение никаких принципиальных проблем нет. Если кто-то возьмется - это вполне реально. Но рута требовать будет, от этого никак не уйти</p></td><td>2024-10-19T06:51:09.598Z</td></tr><tr><td>MIHAHIM</td><td><p>Доброго дня, вчера видимо забыл проверить, но дискорд полностью отказывается работать… все остальное работает отлично</p>
<aside class="quote no-group" data-username="bolvan" data-post="1589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>в init.d/openwrt/custom.d скопировать файлы<br>
init.d/openwrt/custom.d.examples/{10-inherit-nfqws,50-discord}</p>
</blockquote>
</aside>
<p>Эти 2 файла копировал, не пойму в чем может быть проблема</p></td><td>2024-10-19T09:08:34.861Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Я пытался в термуксе поднять, в том числе через proot контейнер в нем - ошибками сыпало как минимум по поводу отсутствия systemd, как максимум - по поводу отсутствия чего-то в /proc и другого подобного.</p>
<p>Кстати говоря с прокси все сработало, но хочется все же более прозрачно все прокидывать, наверное без участия роутера здесь не обойтись.</p></td><td>2024-10-19T09:10:49.841Z</td></tr><tr><td>HasherLoc</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1633" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Эти 2 файла копировал, не пойму в чем может быть проблема</p>
</blockquote>
</aside>
<p>Нужно пересоздать конфиг заново )</p></td><td>2024-10-19T09:11:18.406Z</td></tr><tr><td>MIHAHIM</td><td><p>В каком плане? А что с ним не так?</p>
<p>Вот весь конфиг:</p>
<pre><code class="lang-auto">FWTYPE=nftables

SET_MAXELEM=522288

IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"

IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"

AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
AUTOHOSTLIST_DEBUGLOG=0

MDIG_THREADS=30

GZIP_LISTS=1

MODE=custom
MODE_HTTP=1
MODE_HTTP_KEEPALIVE=0
MODE_HTTPS=1
MODE_QUIC=1
MODE_FILTER=autohostlist

DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000

NFQWS_OPT_DESYNC="--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"

NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"


TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"


FLOWOFFLOAD=donttouch

INIT_APPLY_FW=1

DISABLE_IPV6=1

GETLIST=get_antizapret_domains.sh

</code></pre></td><td>2024-10-19T09:12:46.806Z</td></tr><tr><td>HasherLoc</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1636" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>В каком плане?</p>
</blockquote>
</aside>
<p>Просто пересоздай конфиг с помощью install_easy.sh и всё будет работать )</p></td><td>2024-10-19T09:33:18.794Z</td></tr><tr><td>MIHAHIM</td><td><p>Удалять ничего не надо? Сразу install_easy.sh?</p>
<p>Запустил, пересоздал, дискорд также не работает…</p></td><td>2024-10-19T09:35:28.485Z</td></tr><tr><td>javoroleg(Oleg)</td><td><p>Уважаемый Bol-Van выражаю вам свою благодарность за ваш великий труд, и жму вашу<br>
мужественную руку от всей души ! С вашим запретом мне удалось уже несколько раз дома починить один популярный видео хостинг и кое какие ресурсы попроще, а что не удалось починить, отправилось на смену геолокации.<br>
Тут многие считают что РКН лютует, но мне как отцу троих несовершеннолетних детей очевидно, что он (РКН) очень сильно не дорабатывает и запаздывает !!!  В связи с этим у меня возникла необходимость на “детских” смартфонах усилить блокировки в плоть до белых списков.<br>
В вашем Произведении Искусства (zapret) есть замечательное приложение tpws, которое умеет soscks5 proxy!<br>
Я его запускаю вот так: “./tpws --socks --debug=1 --port=9050 --hostlist-exclude=/opt/zapret/tpws-exclude.txt”  и в файлик прописываю только те домены которые нужны детям для учебы.<br>
Добавьте пожалуйста в ваш замечательный tpws экспериментальный ключик, который отправляет нахер все что не попало в файл исключений.<br>
Спасибо буду примного благодарен !</p></td><td>2024-10-19T09:49:57.593Z</td></tr><tr><td>HasherLoc</td><td><p>У меня для дискорда такой конфиг и всё работает )</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/discord-domain.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-autottl=1:1-20 --dpi-desync-split-pos=2 --dpi-desync-repeats=5 --dpi-desync-fooling=md5sig,badseq
</code></pre></td><td>2024-10-19T09:53:07.684Z</td></tr><tr><td>MIHAHIM</td><td><p>Тоже не помогло…</p></td><td>2024-10-19T09:56:50.947Z</td></tr><tr><td>easyone11</td><td><p>скрипт для работы войса<br>
если в диск не входится подбирай стратегию для него блокчеком</p></td><td>2024-10-19T09:59:16.536Z</td></tr><tr><td>MIHAHIM</td><td><p>Так вот  у меня работало с этими 2мя строчками, потом мне посоветовали их убрать и оптимизировали скрипт</p>
<aside class="quote no-group quote-modified" data-username="MIHAHIM" data-post="1588" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Сейчас такой конфиг:</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre>
<p>Вот такой конфиг сейчас:</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="bolvan" data-post="1597" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl

NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"

MODE_FILTER=autohostlist
MODE_HTTP=1
MODE_HTTP_KEEPALIVE=1
MODE_HTTPS=1
MODE_QUIC=1
</code></pre>
</blockquote>
</aside></td><td>2024-10-19T10:02:31.612Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="easyone11" data-post="1642" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>если в диск не входится подбирай стратегию для него блокчеком</p>
</blockquote>
</aside>
<p>попробуй подбери просто чтобы входилось хз</p></td><td>2024-10-19T10:03:39.721Z</td></tr><tr><td>MIHAHIM</td><td><p>Помогите пожалуйста, все поломал я, криворукое…</p>
<p>Переустановил запрет, те же конфиги делаю, но теперь и ютуб не работает от слова совсем, открывается ntc party и еще пару сайтов…</p>
<p>Вот полный конфиг…</p>
<pre><code class="lang-auto"># this file is included from init scripts
# change values here

# can help in case /tmp has not enough space
#TMPDIR=/opt/zapret/tmp

# redefine user for zapret daemons. required on Keenetic
#WS_USER=nobody

# override firewall type : iptables,nftables,ipfw
FWTYPE=nftables

# options for ipsets
# maximum number of elements in sets. also used for nft sets
SET_MAXELEM=522288
# too low hashsize can cause memory allocation errors on low RAM systems , even if RAM is enough
# too large hashsize will waste lots of RAM
IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"
# dynamically generate additional ip. $1 = ipset/nfset/table name
#IPSET_HOOK="/etc/zapret.ipset.hook"

# options for ip2net. "-4" or "-6" auto added by ipset create script
IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"
# options for auto hostlist
AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
# 1 = debug autohostlist positives to ipset/zapret-hosts-auto-debug.log
AUTOHOSTLIST_DEBUGLOG=0

# number of parallel threads for domain list resolves
MDIG_THREADS=30

# ipset/*.sh can compress large lists
GZIP_LISTS=1
# command to reload ip/host lists after update
# comment or leave empty for auto backend selection : ipset or ipfw if present
# on BSD systems with PF no auto reloading happens. you must provide your own command
# set to "-" to disable reload
#LISTS_RELOAD="pfctl -f /etc/pf.conf"

# override ports
#HTTP_PORTS=80-81,85
#HTTPS_PORTS=443,500-501
#QUIC_PORTS=443,444

# CHOOSE OPERATION MODE
# MODE : nfqws,tpws,tpws-socks,filter,custom
# nfqws : nfqws for dpi desync
# tpws : tpws transparent mode
# tpws-socks : tpws socks mode
# filter : no daemon, just create ipset or download hostlist
# custom : custom mode. should modify custom init script and add your own code
MODE=nfqws
# apply fooling to http
MODE_HTTP=1
# for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet
MODE_HTTP_KEEPALIVE=1
# apply fooling to https
MODE_HTTPS=1
# apply fooling to quic
MODE_QUIC=1
# none,ipset,hostlist,autohostlist
MODE_FILTER=autohostlist

# CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run "nfq/nfqws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (syndata,wssize)
DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000
NFQWS_OPT_DESYNC="--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"
#NFQWS_OPT_DESYNC_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTP=""
#NFQWS_OPT_DESYNC_HTTP_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTPS=""
#NFQWS_OPT_DESYNC_HTTPS_SUFFIX="--wssize 1:6"
#NFQWS_OPT_DESYNC_HTTP6=""
#NFQWS_OPT_DESYNC_HTTP6_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTPS6=""
#NFQWS_OPT_DESYNC_HTTPS6_SUFFIX="--wssize 1:6"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"
#NFQWS_OPT_DESYNC_QUIC_SUFFIX=""
#NFQWS_OPT_DESYNC_QUIC6="--dpi-desync=hopbyhop"
#NFQWS_OPT_DESYNC_QUIC6_SUFFIX=""

# CHOOSE TPWS DAEMON OPTIONS. run "tpws/tpws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (mss)
TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"
#TPWS_OPT_SUFFIX="--mss 88"

# openwrt only : donttouch,none,software,hardware
FLOWOFFLOAD=donttouch

# openwrt: specify networks to be treated as LAN. default is "lan"
#OPENWRT_LAN="lan lan2 lan3"
# openwrt: specify networks to be treated as WAN. default wans are interfaces with default route
#OPENWRT_WAN4="wan vpn"
#OPENWRT_WAN6="wan6 vpn6"

# for routers based on desktop linux and macos. has no effect in openwrt.
# CHOOSE LAN and optinally WAN/WAN6 NETWORK INTERFACES
# or leave them commented if its not router
# it's possible to specify multiple interfaces like this : IFACE_LAN="eth0 eth1 eth2"
# if IFACE_WAN6 is not defined it take the value of IFACE_WAN
#IFACE_LAN=eth0
#IFACE_WAN=eth1
#IFACE_WAN6="ipsec0 wireguard0 he_net"

# should start/stop command of init scripts apply firewall rules ?
# not applicable to openwrt with firewall3+iptables
INIT_APPLY_FW=1
# firewall apply hooks
#INIT_FW_PRE_UP_HOOK="/etc/firewall.zapret.hook.pre_up"
#INIT_FW_POST_UP_HOOK="/etc/firewall.zapret.hook.post_up"
#INIT_FW_PRE_DOWN_HOOK="/etc/firewall.zapret.hook.pre_down"
#INIT_FW_POST_DOWN_HOOK="/etc/firewall.zapret.hook.post_down"

# do not work with ipv4
#DISABLE_IPV4=1
# do not work with ipv6
DISABLE_IPV6=0

# select which init script will be used to get ip or host list
# possible values : get_user.sh get_antizapret.sh get_combined.sh get_reestr.sh get_hostlist.sh
# comment if not required
#GETLIST=


</code></pre></td><td>2024-10-19T11:07:10.323Z</td></tr><tr><td>danaYatsuta</td><td><p>Мелочный вопрос: есть ли возможность сделать фильтрацию по доменам указав домен напрямую а не файл с ними? Например в ByeDPI можно <code>--hosts=/path/to/file.txt</code> а можно <code>--hosts=:googlevideo.com</code>. Мне просто для конкретно <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> нужна стратегия, немного глупо что валяется файл с одним доменом и удлиняет конфиг, хотя не критично естественно.</p></td><td>2024-10-19T11:12:43.129Z</td></tr><tr><td>bolvan</td><td><p>zapret существует для обхода блокировок, а не их создания.<br>
Вам нужен какой-то родительский контроль. Их полно</p></td><td>2024-10-19T11:41:56.896Z</td></tr><tr><td>rngvalerka</td><td><p>попробуй добавить в этот файл еще ntc.party и дискордовскую морду</p></td><td>2024-10-19T11:42:42.730Z</td></tr><tr><td>danaYatsuta</td><td><p>Зачем? У меня все что не UDP работает с <code>--dpi-desync=disorder2</code>, это просто для ютуба нужна особенная стратегия</p></td><td>2024-10-19T11:44:32.039Z</td></tr><tr><td>bolvan</td><td><p>Для дискорда трафик делится на веб и voice части, которая реализована не через http/https.<br>
Веб часть должна обходится стандартным образом.<br>
Если чтобы ее обойти якобы нужны какие-то листы, то значит вы идете в неверном направлении.</p>
<blockquote>
<p>ВАЖНО : множественные стратегии создавались только для случаев, когда невозможно обьединить имеющиеся стратегии для разных ресурсов. Копирование стратегий из blockcheck для разных сайтов во множество профилей без понимания как они работают приведет к нагромождению параметров, которые все равно  не покроют все возможные заблокированные ресурсы. Вы только увязните в этой каше.</p>
</blockquote>
<p>для voice части существует custom script</p></td><td>2024-10-19T11:44:49.819Z</td></tr><tr><td>rngvalerka</td><td><p>эксперимента для</p></td><td>2024-10-19T11:45:55.493Z</td></tr><tr><td>danaYatsuta</td><td><p>Какого эксперимента, чтобы выяснить что? Не очень понимаю</p></td><td>2024-10-19T11:46:39.961Z</td></tr><tr><td>rngvalerka</td><td><p>это для меня, есть мысль, что не так уж там и много “стратегий”, то что было до августа идет одним списком, то что вместе с гуглвидео другим, а теперь вот еще UDP добавился.</p></td><td>2024-10-19T11:52:04.275Z</td></tr><tr><td>danaYatsuta</td><td><p>Как мне кажется с гуглвидео уникальная ситуация. Без каких-либо средств обхода все еще можно еле как-то загрузить видео на 144р, с <code>disorder2</code> можно достичь 1080p но оно регулярно зависает, и наконец с <code>fake</code> он полностью работоспособен. Учитывая что дискорд заблочили после ютуба и он - помимо войса - у меня обходится простым <code>disorder2</code>, я думаю что-то мутят конкретно с ютубом.</p></td><td>2024-10-19T11:55:46.201Z</td></tr><tr><td>bolvan</td><td><p>Верно, для ютуба действительно есть особые правила.<br>
Там явно прослеживается запрет SNI, кроме гугловских. Видимо это борьба с фейками от гудбая и от слишком умных провайдеров.</p>
<p>Есть 3 факта</p>
<ol>
<li>У провайдеров РКН клянчил адреса GGC</li>
<li>Провайдеры , пользуясь отсутствием официального запрета ютубе, пытались надуть РКН путем применения обмана DPI, что заставило РКН реагировать. Провайдеры нихрена не достигли, им погрозили пальчиком, а всем остальным обход усложнился из-за действия этих глупых провайдеров.</li>
<li>Не-гугловские фейки работают везде, кроме GGC гуглевидео. См пункт 1</li>
</ol></td><td>2024-10-19T11:59:00.824Z</td></tr><tr><td>rngvalerka</td><td><p>Ну значит я просто везунчик и новые блокировки просто добавляю к гуглвидео и оно работает. Про ограничение скорости тоже не видел, либо не работает вовсе, либо валит на все деньги.</p></td><td>2024-10-19T12:04:19.540Z</td></tr><tr><td>danaYatsuta</td><td><p>Так мысль моего конфига в том, что для гуглвидео применяется обход сложнее чем для остальных сайтов</p></td><td>2024-10-19T12:05:23.178Z</td></tr><tr><td>rngvalerka</td><td><p>Нет так нет.</p></td><td>2024-10-19T12:05:31.313Z</td></tr><tr><td>bolvan</td><td><p>Сейчас это не реализовано.<br>
Поддерживаются только файлы, которые могут перечитываться по сигналу HUP</p></td><td>2024-10-19T12:06:26.096Z</td></tr><tr><td>danaYatsuta</td><td><p>Хорошо, спасибо за ответ</p></td><td>2024-10-19T12:06:57.772Z</td></tr><tr><td>MIHAHIM</td><td><aside class="quote no-group quote-modified" data-username="MIHAHIM" data-post="1643" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<aside class="quote no-group quote-modified" data-username="MIHAHIM" data-post="1588" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Сейчас такой конфиг:</p>
<pre><code class="lang-auto">--hostlist=/opt/zapret/zapret_lists/russia-youtubeQ.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-udp=443 --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new
--hostlist=/opt/zapret/zapret_lists/russia-discord.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --hostlist-auto=/opt/zapret/zapret_lists/autohostlist.txt --hostlist-exclude=/opt/zapret/zapret_lists/netrogat.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl
</code></pre>
<p>Вот такой конфиг сейчас:</p>
</blockquote>
</aside>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="
--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl

NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"

MODE_FILTER=autohostlist
MODE_HTTP=1
MODE_HTTP_KEEPALIVE=1
MODE_HTTPS=1
MODE_QUIC=1
</code></pre>
</blockquote>
</aside>
<p>Не знаю что случилось, но не работает теперь ни один конфиг… на пк всё также работает любой из этих, на роутере нет… переустановил уже дважды <img src="https://ntc.party/images/emoji/twitter/pensive.png?v=12" title=":pensive:" class="emoji" alt=":pensive:" loading="lazy" width="20" height="20"></p>
<p>На ютубе Код ошибки: SSL_ERROR_RX_MALFORMED_SERVER_HELLO при открытии через мозилу</p></td><td>2024-10-19T12:10:54.842Z</td></tr><tr><td>danaYatsuta</td><td><p>Не разбираюсь в роутерах совсем, но мб проблема в том что у <code>NFQWS_OPT_DESYNC</code> не закрыта кавычка?</p></td><td>2024-10-19T12:40:31.392Z</td></tr><tr><td>MIHAHIM</td><td><p>Это я уже заметил, спасибо, но не помогло <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<pre><code class="lang-auto"># this file is included from init scripts
# change values here

# can help in case /tmp has not enough space
#TMPDIR=/opt/zapret/tmp

# redefine user for zapret daemons. required on Keenetic
#WS_USER=nobody

# override firewall type : iptables,nftables,ipfw
FWTYPE=nftables

# options for ipsets
# maximum number of elements in sets. also used for nft sets
SET_MAXELEM=522288
# too low hashsize can cause memory allocation errors on low RAM systems , even if RAM is enough
# too large hashsize will waste lots of RAM
IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"
# dynamically generate additional ip. $1 = ipset/nfset/table name
#IPSET_HOOK="/etc/zapret.ipset.hook"

# options for ip2net. "-4" or "-6" auto added by ipset create script
IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"
# options for auto hostlist
AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
# 1 = debug autohostlist positives to ipset/zapret-hosts-auto-debug.log
AUTOHOSTLIST_DEBUGLOG=0

# number of parallel threads for domain list resolves
MDIG_THREADS=30

# ipset/*.sh can compress large lists
GZIP_LISTS=1
# command to reload ip/host lists after update
# comment or leave empty for auto backend selection : ipset or ipfw if present
# on BSD systems with PF no auto reloading happens. you must provide your own command
# set to "-" to disable reload
#LISTS_RELOAD="pfctl -f /etc/pf.conf"

# override ports
#HTTP_PORTS=80-81,85
#HTTPS_PORTS=443,500-501
#QUIC_PORTS=443,444

# CHOOSE OPERATION MODE
# MODE : nfqws,tpws,tpws-socks,filter,custom
# nfqws : nfqws for dpi desync
# tpws : tpws transparent mode
# tpws-socks : tpws socks mode
# filter : no daemon, just create ipset or download hostlist
# custom : custom mode. should modify custom init script and add your own code
MODE=nfqws
# apply fooling to http
MODE_HTTP=1
# for nfqws only. support http keep alives. enable only if DPI checks for http request in any outgoing packet
MODE_HTTP_KEEPALIVE=1
# apply fooling to https
MODE_HTTPS=1
# apply fooling to quic
MODE_QUIC=1
# none,ipset,hostlist,autohostlist
MODE_FILTER=autohostlist

# CHOOSE NFQWS DAEMON OPTIONS for DPI desync mode. run "nfq/nfqws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (syndata,wssize)
DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000
NFQWS_OPT_DESYNC="--hostlist=/opt/zapret/zapret_lists/russia-youtubeGV.txt --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-youtube.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--hostlist=/opt/zapret/zapret_lists/russia-blacklist.txt --filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-skip-nosni=1 --dpi-desync-autottl --new
--dpi-desync=fake,split2 --filter-tcp=443 --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"
#NFQWS_OPT_DESYNC_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTP=""
#NFQWS_OPT_DESYNC_HTTP_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTPS=""
#NFQWS_OPT_DESYNC_HTTPS_SUFFIX="--wssize 1:6"
#NFQWS_OPT_DESYNC_HTTP6=""
#NFQWS_OPT_DESYNC_HTTP6_SUFFIX="--dpi-desync=syndata"
#NFQWS_OPT_DESYNC_HTTPS6=""
#NFQWS_OPT_DESYNC_HTTPS6_SUFFIX="--wssize 1:6"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=10"
#NFQWS_OPT_DESYNC_QUIC_SUFFIX=""
#NFQWS_OPT_DESYNC_QUIC6="--dpi-desync=hopbyhop"
#NFQWS_OPT_DESYNC_QUIC6_SUFFIX=""

# CHOOSE TPWS DAEMON OPTIONS. run "tpws/tpws --help" for option list
# SUFFIX VARS define additional lower priority desync profile. it's required if MODE_FILTER=hostlist and strategy has hostlist-incompatible 0-phase desync methods (mss)
TPWS_OPT="--hostspell=HOST --split-http-req=method --split-pos=3 --oob"
#TPWS_OPT_SUFFIX="--mss 88"

# openwrt only : donttouch,none,software,hardware
FLOWOFFLOAD=donttouch

# openwrt: specify networks to be treated as LAN. default is "lan"
#OPENWRT_LAN="lan lan2 lan3"
# openwrt: specify networks to be treated as WAN. default wans are interfaces with default route
#OPENWRT_WAN4="wan vpn"
#OPENWRT_WAN6="wan6 vpn6"

# for routers based on desktop linux and macos. has no effect in openwrt.
# CHOOSE LAN and optinally WAN/WAN6 NETWORK INTERFACES
# or leave them commented if its not router
# it's possible to specify multiple interfaces like this : IFACE_LAN="eth0 eth1 eth2"
# if IFACE_WAN6 is not defined it take the value of IFACE_WAN
#IFACE_LAN=eth0
#IFACE_WAN=eth1
#IFACE_WAN6="ipsec0 wireguard0 he_net"

# should start/stop command of init scripts apply firewall rules ?
# not applicable to openwrt with firewall3+iptables
INIT_APPLY_FW=1
# firewall apply hooks
#INIT_FW_PRE_UP_HOOK="/etc/firewall.zapret.hook.pre_up"
#INIT_FW_POST_UP_HOOK="/etc/firewall.zapret.hook.post_up"
#INIT_FW_PRE_DOWN_HOOK="/etc/firewall.zapret.hook.pre_down"
#INIT_FW_POST_DOWN_HOOK="/etc/firewall.zapret.hook.post_down"

# do not work with ipv4
#DISABLE_IPV4=1
# do not work with ipv6
DISABLE_IPV6=0

# select which init script will be used to get ip or host list
# possible values : get_user.sh get_antizapret.sh get_combined.sh get_reestr.sh get_hostlist.sh
# comment if not required
#GETLIST=

</code></pre></td><td>2024-10-19T12:51:57.828Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote quote-modified" data-post="837" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/837">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Если взять множество вариаций с TTL, то надо брать TTL максимальный из минимально рабочих. 
К TTL добавить дополнительный ограничитель.  Это можно быть любой из рабочих - datanoack, md5sig, badsum, badseq. 
datanoack - вообще самая ультимативная штука, но не работает через домашний роутер. Работает только с него. Если работает, то никаких TTL и фулингов вообще не надо. 
Следует избегать wssize, syndata, ipfrag, 
Стараться уложиться в fake,split2,split. 
disorder применять только, если не работаю…
  </blockquote>
</aside>

<aside class="quote no-group" data-username="bolvan" data-post="837" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Стараться уложиться в fake,split2,split.<br>
<strong>disorder применять только, если не работают вариант split2 или split.</strong></p>
</blockquote>
</aside>
<p>Почему так?</p></td><td>2024-10-19T13:12:14.762Z</td></tr><tr><td>javoroleg(Oleg)</td><td><p>Как-то там все не очень хорошо с этим родительским контролем, я изучал вопрос уже:</p>
<p>Гугл - очень душный однозначно нет!<br>
Встроенный в андроид - возможно, но очень жидкий функционал по сути ограничение времени работы приложений и блокировка запуска приложений хорошо но недостаточно<br>
Сторонние приложения - однозначно нет, все они платные и крайне низкого качества…</p>
<p>Может как-то можно изготовить параметр для тестирования чего-то там --drop-all например<br>
Можно даже в документацию ничего не писать</p>
<p>я даже готов оказать посильную финансовую помощь<br>
<a href="mailto:javoroleg@yandex.ru">javoroleg@yandex.ru</a><br>
Спасибо.</p></td><td>2024-10-19T13:13:50.564Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="rngvalerka" data-post="1664" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rngvalerka/48/8880_2.png" class="avatar"> rngvalerka:</div>
<blockquote>
<aside class="quote no-group" data-username="bolvan" data-post="837" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Стараться уложиться в fake,split2,split.<br>
<strong>disorder применять только, если не работают вариант split2 или split.</strong></p>
</blockquote>
</aside>
<p>Почему так?</p>
</blockquote>
</aside>
<p>Потому что начинать надо с наименее инвазивных техник.<br>
Можно чуток кожу надрезать. Можно отрезать палец. потом руку. Потом голову.<br>
Если можно мелким разрезом вылечить, зачем сразу секир бошка ?<br>
Чем сильнее порежешь, тем скорее пациент где-нибудь споткнется или умрет.<br>
А потом будете писать крокодила с 20 профилями и листами и потом обсуждать здесь что не работает на 200 постов.</p></td><td>2024-10-19T13:58:44.225Z</td></tr><tr><td>bolvan</td><td><p>Если надо лишь управлять проксированием в зависимости от домена, то уже давно существует универсальное готовое решение. xray. Велик изобретать смысла нет. Составить список разрешенных, которые запустить на свободный выход. Остальные в унитаз<br>
xray можно даже запустить в режиме прозрачного прокси</p></td><td>2024-10-19T14:00:14.154Z</td></tr><tr><td>serpen(VL)</td><td><p>вопрос такой этот репозиторий можно юзать или нет с запретом? Потому что как я понял это форк от запрета bolvan, но хотелось бы быть уверенным в том немножко что человеку можно довериться юзать его форк, никто не знает?</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/Flowseal/zapret-discord-youtube">
  <header class="source">

      <a href="https://github.com/Flowseal/zapret-discord-youtube" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/29397cf07a4e512f78ac6ec3489210e133f60cc2_2_690x344.png" class="thumbnail" data-dominant-color="ECEDE8">

  <h3><a href="https://github.com/Flowseal/zapret-discord-youtube" target="_blank" rel="noopener nofollow ugc">GitHub - Flowseal/zapret-discord-youtube</a></h3>

    <p><span class="github-repo-description">Contribute to Flowseal/zapret-discord-youtube development by creating an account on GitHub.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-19T14:14:16.310Z</td></tr><tr><td>SickTH</td><td><p>Я думаю можно просто флаги вытащить из батников и к себе применить ради теста…ну и листы посмотреть вдруг у себя какой то сайт пропустили. Вирус-то так не словить, а сама репа наверное для удобства. (Ну чтобы простой человек нажал 1 кнопку и все и не думал о том какие где параметры применяются).</p></td><td>2024-10-19T14:26:55.983Z</td></tr><tr><td>ech0brav0</td><td><p>Это форком нельзя назвать. Просто очищенный zapret под винду, с заранее прописанной стратегией для обхода блокировок Discord и YouTube. Просто возьмите стратегии оттуда и используйте в нормальном zapret от bolvan</p></td><td>2024-10-19T14:32:44.139Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Жаль, что большинство людей не слышали про принцип KISS из программирования <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-19T15:33:26.564Z</td></tr><tr><td>rngvalerka</td><td><p>А есть версия без вот этой вот пурги про филлипинскую медицину, расчлененку и рептилоидов?<br>
Ну там, условно, сплит занимает 10 тактов процессора, а дизордер 50. Один профиль занимает 1 МБ памяти, а два - целых 2, какой ужас.<br>
Дело только в этом?</p></td><td>2024-10-19T15:39:14.377Z</td></tr><tr><td>bolvan</td><td><p>Нет. Дело в системах защиты от ддос атак, которые порежут запрос, и гос услуги перестанут работать.<br>
А ТСПУ на http от дисордер может повесить запрос.<br>
disorder - менее естественная штука, чем сплит, а потому потенциально более проблемная.<br>
Если бы я был ддосером, я бы захотел, чтобы жертве было как можно более тяжело. А если анти-ддосером, я бы все эти тяжести слал куда подальше. Чем они и занимаются<br>
От крокодильих конфигов можно реально запутаться, и если что-то меняется, потом сам ногу сломишь</p></td><td>2024-10-19T15:55:58.304Z</td></tr><tr><td>rngvalerka</td><td><aside class="quote no-group" data-username="danaYatsuta" data-post="1654" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/danayatsuta/48/1506_2.png" class="avatar"> danaYatsuta:</div>
<blockquote>
<p>у меня обходится простым <code>disorder2</code></p>
</blockquote>
</aside>
<p>получается все-таки не простым? fake, split2 или disorder2?</p></td><td>2024-10-19T16:07:56.972Z</td></tr><tr><td>rngvalerka</td><td><p>Впрочем, пофиг. Всем кисс, солид и абстрактную фабрику.</p></td><td>2024-10-19T16:15:46.059Z</td></tr><tr><td>ewgen198409(ewgen1984)</td><td><pre><code class="lang-auto">NFQWS_OPT_DESYNC_HTTPS="--dpi-desync=disorder2 --dpi-desync-repeats=6 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin"
</code></pre>
<p>Вот этим победим все блокировки у оператора домру. А вот с ютубчиком проблемы. На мобильном и тв долгие загрузки видео, иногда просто может остановиться посередине ролика. Качество 1080.<br>
Чем можно подлечить еще?</p></td><td>2024-10-19T16:18:32.289Z</td></tr><tr><td>bolvan</td><td><p>В этом примере все параметры, кроме первого, не имеют никакого эффекта</p></td><td>2024-10-19T16:22:20.935Z</td></tr><tr><td>ewgen198409(ewgen1984)</td><td><p>Все перелопатил. Либо ютуб либо инстаграм ломает <img src="https://ntc.party/images/emoji/twitter/confused.png?v=12" title=":confused:" class="emoji" alt=":confused:" loading="lazy" width="20" height="20"><br>
Запустил заного блокчек, написал все ресурсы которые надо нагнуть. Будем посмотреть…</p></td><td>2024-10-19T16:32:02.888Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="pioli" data-post="1228" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/p/0ea827/48.png" class="avatar"> pioli:</div>
<blockquote>
<p>А есть версия winws.exe для win7 x32 ?</p>
</blockquote>
</aside>
<p>Собрал на гитхабе <a href="https://github.com/spvkgn/zapret/releases/download/latest/zapret-cygwin-x86.zip" rel="noopener nofollow ugc">https://github.com/spvkgn/zapret/releases/download/latest/zapret-cygwin-x86.zip</a><br>
Насчет win7 не гарантирую, хотя в wine запустилось.</p></td><td>2024-10-19T16:53:22.899Z</td></tr><tr><td>bolvan</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/bol-van/zapret-win32">
  <header class="source">

      <a href="https://github.com/bol-van/zapret-win32" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/939fc1939d3c3b740e1c51f635d969bf5f1f0a3c_2_690x344.png" class="thumbnail" data-dominant-color="F5F8F6">

  <h3><a href="https://github.com/bol-van/zapret-win32" target="_blank" rel="noopener">GitHub - bol-van/zapret-win32</a></h3>

    <p><span class="github-repo-description">Contribute to bol-van/zapret-win32 development by creating an account on GitHub.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-19T17:19:59.769Z</td></tr><tr><td>javoroleg(Oleg)</td><td><p>Ну и тухлятина этот proxy-xray ему по хорошему еще и сервер в качестве ответной части нужен, еще и в докер это все втащили <img src="https://ntc.party/images/emoji/twitter/expressionless.png?v=12" title=":expressionless:" class="emoji" alt=":expressionless:" loading="lazy" width="20" height="20"><br>
так вроде да, под мою задачу подходит, и вроде работает даже, <img src="https://ntc.party/images/emoji/twitter/see_no_evil.png?v=12" title=":see_no_evil:" class="emoji" alt=":see_no_evil:" loading="lazy" width="20" height="20"> может это даже хороший способ обхода всяких DPI,<br>
но ваш tpws это просто бриллиант по сравнению с этим Г (proxy-xray)<br>
У меня весь функционал запущен на Orange pi Zero-3 все как-бы ничего но сам дистрибутив настолько криво собран, что что-то туда до установить сразу превращается в проблему.<br>
Да… уж послали-так-послали  <img src="https://ntc.party/images/emoji/twitter/sob.png?v=12" title=":sob:" class="emoji" alt=":sob:" loading="lazy" width="20" height="20"></p></td><td>2024-10-19T20:33:16.474Z</td></tr><tr><td>ech0brav0</td><td><p>О каком докере идёт речь?) Это standalone приложение выполняющее функцию проксирования трафика, маскируясь под домен цели. Если вы не разобрались или как-то не так поняли технологию, то не стоит её клеймить такими словами</p></td><td>2024-10-19T21:10:17.201Z</td></tr><tr><td>MIHAHIM</td><td><p>Если вдруг кому поможет, нашел корень своих проблем. Оказывается у меня в разных листах были одни и те же домены указаны, но при этом на каждый лист своя стратегия, убрал дублирующие домены - все заработало. Я доволен <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"></p></td><td>2024-10-19T22:11:37.484Z</td></tr><tr><td>PeFeD(Fedor)</td><td><p>А можно, плиз, где-то почитать об этом в виде статьи или даже просто файла?</p>
<aside class="quote no-group" data-username="javoroleg" data-post="1681" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/j/a698b9/48.png" class="avatar"> javoroleg:</div>
<blockquote>
<p>весь функционал запущен на Orange pi Zero-3</p>
</blockquote>
</aside>
<p>Или это методом проб и ошибок на собственном опыте “без конспектирования”?</p>
<aside class="quote no-group" data-username="javoroleg" data-post="1681" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/j/a698b9/48.png" class="avatar"> javoroleg:</div>
<blockquote>
<p>сам дистрибутив настолько криво собран</p>
</blockquote>
</aside>
<p>Дистрибутив - кого? Запрета? Или в целом с Армбианом косяки?</p></td><td>2024-10-20T05:02:16.520Z</td></tr><tr><td>bolvan</td><td><p>xray написано на go. бинарики GO как правило в себя включают все зависимости, поэтому в системе их минимум. никаких докеров не надо. это только усложняет и загромождает процесс, превращая прогу в монстра. докер нужен только для крупных и тяжело настраиваемых решений с кучей зависимостей.<br>
тут готовые сборки. прям бери EXEшник, пиши конфиг, и поехали.<br>
докер, вероятно, был сделан для какой-то веб морды, но она не нужна</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/XTLS/Xray-core/releases">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/XTLS/Xray-core/releases" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/b75a19d626fcdb5c3367a73c8503a9b2656d3c53_2_690x345.png" class="thumbnail" data-dominant-color="EDF2F4" width="690" height="345"></div>

<h3><a href="https://github.com/XTLS/Xray-core/releases" target="_blank" rel="noopener">Releases · XTLS/Xray-core</a></h3>

  <p>Xray, Penetrates Everything. Also the best v2ray-core, with XTLS support. Fully compatible configuration. - XTLS/Xray-core</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>я бы сказал, это tpws по сравнению с xray, выглядит весьма скромно. у xray дофига возможностей, но tpws и не создавался с этими целями. tpws - это маленькая, весящая 100+кб дурилка, а не прокси менеджер на 30 мб.<br>
загромождать прогу несвойственными ей функциями, к тому же реализованными в другом широко доступном софте, не вижу никакого смысла. и тратить на это свое время тоже</p></td><td>2024-10-20T06:01:46.837Z</td></tr><tr><td>pioli</td><td><p>Спасибо.</p></td><td>2024-10-20T07:30:06.806Z</td></tr><tr><td>Cbnny</td><td><p>А что у GDPI/Zapret’а за проблемы с прокси плагинами? Если я включаю плагин в браузере при включённом GDPI/Zapret’е (в моём случае имеется FastProxy и CensorTracker), то наглухо стопорится загрузка видео в ютубе, при этом сайт работает шустро, даже аватарки каналов работают)), стоит отключить плагины - загрузка видео начинает работать. С прокси антизапрета такого не было.</p>
<p>Нет, я не включаю несколько плагинов одновременно</p></td><td>2024-10-20T08:00:54.878Z</td></tr><tr><td>bolvan</td><td><p>Они не рассчитаны на распознавание прокси протокола. Это не будет работать.<br>
Антизапрет выборочно проксирует</p></td><td>2024-10-20T08:15:52.716Z</td></tr><tr><td>javoroleg(Oleg)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/samuelhbne/proxy-xray?tab=readme-ov-file">
  <header class="source">

      <a href="https://github.com/samuelhbne/proxy-xray?tab=readme-ov-file" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/b732be609dbc687a4644bce4e46e9fdc592b54b5_2_690x344.png" class="thumbnail" data-dominant-color="EAECE8">

  <h3><a href="https://github.com/samuelhbne/proxy-xray?tab=readme-ov-file" target="_blank" rel="noopener nofollow ugc">GitHub - samuelhbne/proxy-xray: Xray client container with socks5/http/dns proxy...</a></h3>

    <p><span class="github-repo-description">Xray client container with socks5/http/dns proxy and QR code support. Running on x86 and arm/arm64 (Raspberry Pi).</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
Если это не докер - то я китайский император <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"></p></td><td>2024-10-20T08:54:02.650Z</td></tr><tr><td>javoroleg(Oleg)</td><td><p>Спасибо за ссылку на бинарники, это уже лучше, поковыряюсь еще.</p></td><td>2024-10-20T08:58:52.811Z</td></tr><tr><td>bolvan</td><td><p>Это чья-то сборка под докер, а не оригинал</p></td><td>2024-10-20T10:12:25.968Z</td></tr><tr><td>doomer2007</td><td><p>Ты не китайский император, ты просто много умничаешь.</p></td><td>2024-10-20T10:15:59.543Z</td></tr><tr><td>Cbnny</td><td><p>Как оживить аватарки каналов?</p></td><td>2024-10-20T10:48:04.710Z</td></tr><tr><td>abc555</td><td><p>Один мутный у меня провайдер замутил так, что на телефонах при включённом offloading нифига не работает, хотя на копме всё норм, пришлось отключить, ну и естественно похуже стал работать нэт и вопрос, никак не н@ебать прова, только отключение offloading и без вариантов ?<br>
на роутере wrt на nfqws</p></td><td>2024-10-20T11:00:58.602Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group" data-username="Cbnny" data-post="1693" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/7ea924/48.png" class="avatar"> Cbnny:</div>
<blockquote>
<p>Как оживить аватарки каналов?</p>
</blockquote>
</aside>
<p>На ютубе?<br>
Попробовать перенаправить yt3_ggpht_com в yt4.<br>
У меня пока работает.</p></td><td>2024-10-20T11:07:14.032Z</td></tr><tr><td>bolvan</td><td><p>Если на offloading что-то работает иначе, значит в чем-то проблема. Так быть не должно.<br>
offloading включен средствами zapret ? hardware или software ?<br>
Каковы параметры дурения ?<br>
Разница из-за подключения по проводу и wifi или только от устройства зависит ?</p></td><td>2024-10-20T11:12:45.777Z</td></tr><tr><td>abc555</td><td><p>А вот это я не проверил, комп подключён через провод, ящик и телефоны через вафлю и вот через вафлю при включённом offloading как раз и не работает обход, через провод всё окей.<br>
Вручную я прописал lan=br-lan и wan=eth0.2, но думаю это отношение не имеет, у без проводной сети название phy0-ap0, хотя оно относиться к lan</p></td><td>2024-10-20T11:40:03.809Z</td></tr><tr><td>bolvan</td><td><p>Мне это интересно исключительно с точки зрения теоретически возможной ошибки в скриптах и nf/iptables,  из-за чего может что-то не поступать на обработчик<br>
Потому мне и нужна инфа о настройке, и желательно лог nfqws в придачу на проблемном случае</p>
<p>Проверил на своем медиатеке MT7621 с хардваре оффлоадом по проводу. Все хорошо.<br>
При скачивании больших файлов CPU usage не дернется, блокировки обходятся, автолист работает (значит входящие приходят)</p></td><td>2024-10-20T11:42:20.655Z</td></tr><tr><td>abc555</td><td><p>Я понял, постараюсь снять лог, но не раньше чем через дня 4 получится добраться до этого роутера. А может в нём попробовать указать phy0-ap0 как второй интерфейс lan ? Ну я попробую, проверю, потом напишу</p></td><td>2024-10-20T11:47:28.227Z</td></tr><tr><td>bolvan</td><td><p>Нет, ему важно откуда приходят пакеты.<br>
Если phy обьеденены в мост, то и приходит оно оттуда, а не от отдельных phy.<br>
И он это сам определяет.</p>
<p>nft list table inet zapret<br>
тоже хотелось бы увидеть</p></td><td>2024-10-20T11:49:31.039Z</td></tr><tr><td>abc555</td><td><p>Сам прикол что всё работало, а потом пров что то намутил и работать перестало, только на проводе без изменений, --dpi-desync-repeats=20 на нём только работает, на других провайдерах значение почти не важно 6 -11 хватает с головой, а у этого только 20 )) и вот на нём и перестало работать по вафле<br>
и я ничего не менял, просто отключил offloading и заработало и на ящике и на телефонах<br>
боролся наверное часа 3, перепробовал кучу вариантов и не смог, что он там сделал я так и не понял, провайдер такой, видать любитель подмахнуть и их вроде и полно, но у каждого свои косяки, менять шило на мыло не интересно<br>
Но я главное понял, что если через кабель при включённом offloading всё работает, значит и по вафле тоже должно работать, вот это вот я не знал.<br>
У меня места мало, поэтому я стандартный пакет wpad-basic-mbedtls поставил, но как я замел намного раньше, пакет wpad-mbedtls работает намного стабильней, но места для него не осталось, может и из него такой косяк.</p></td><td>2024-10-20T11:53:54.763Z</td></tr><tr><td>abc555</td><td><p>Умудрился собрать прошивку с полным wpad, потом проверю, начну с неё, с полным мне в любом случаи нравилось больше, если не удачно, тогда скину логи, если удачно тогда напишу</p></td><td>2024-10-20T13:35:26.391Z</td></tr><tr><td>bolvan</td><td><p>Если оффлоадинг управлялся из LUCI, то это неправильное действие.<br>
Для запрета общая установка openwrt должна быть выключена</p></td><td>2024-10-20T13:40:35.598Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="1703" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если оффлоадинг управлялся из LUCI, то это неправильное действие.</p>
</blockquote>
</aside>
<p>Как это понять?</p>
<aside class="quote no-group" data-username="bolvan" data-post="1703" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Для запрета <strong>общая установка</strong> openwrt должна быть выключена</p>
</blockquote>
</aside>
<p>Что это значит?</p></td><td>2024-10-20T14:21:04.013Z</td></tr><tr><td>abc555</td><td><p>для запрета выключена, оффлоадинг включён через люси<br>
ну то есть при установке выключил через запрет, а потом через люси обратно включил.<br>
сам оффлоадинг снижает нагрузку, уменьшает пинг, для сетевой игры это очень важно, особенно если шутер, ну и сам нэт летает, поэтому без него никак</p></td><td>2024-10-20T14:21:24.026Z</td></tr><tr><td>bolvan</td><td><p>Это неверно и будет ломать правильную работу zapret.<br>
Поэтому и не работает. Больше никаких логов и инфы не надо.<br>
Правильно будет включить в запрете и выключить в luci. Эффект будет тот же, но zapret будет работать нормально.<br>
И еще к сведению.  hardware flow offloading не работает с wifi. только software.<br>
так что включай-не включай, если стоит hardware что в zapret, что в luci, будет работать как без offload через wifi</p></td><td>2024-10-20T14:28:25.393Z</td></tr><tr><td>abc555</td><td><p>перепробовал все варианты включая software, результат нулевой<br>
или нужно включить software и выключить в люси ? и тогда оффлоадинг по идее должен работать не затрагивая запрет ?<br>
в любом случаи через кабель если выключить в люске сразу заметно что скорость упала, даже спидтестом если мерить, но перепроверю ещё</p></td><td>2024-10-20T14:33:45.109Z</td></tr><tr><td>bolvan</td><td><p>любой offload в LUCI сломает работу nfqws. он не будет получать пакетов. получит SYN и досвидос</p></td><td>2024-10-20T14:34:13.163Z</td></tr><tr><td>abc555</td><td><p>ну не знаю. работает и вроде бы нормально, только на одном провайдере такая фигня, а так вроде всё чётко</p></td><td>2024-10-20T14:39:02.690Z</td></tr><tr><td>bolvan</td><td><p>как я уже писал выше, метод тыка прикольный, но тратит чужое время, когда начинаются проблемы</p></td><td>2024-10-20T14:41:05.321Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="rem" data-post="1704" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/5fc32e/48.png" class="avatar"> rem:</div>
<blockquote>
<aside class="quote no-group" data-username="bolvan" data-post="1703" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Для запрета <strong>общая установка</strong> openwrt должна быть выключена</p>
</blockquote>
</aside>
<p>Что это значит?</p>
</blockquote>
</aside>
<p>Это значит должен быть нолик в flow_offloading в /etc/config/firewall, а в LUCI снята галка</p>
<pre><code class="lang-auto">config defaults
        option input 'ACCEPT'
        option output 'ACCEPT'
        option forward 'REJECT'
        option drop_invalid '0'
        option flow_offloading_hw '1'
        option flow_offloading '0'
</code></pre>
<p>Если надо, включать в /opt/zapret/config или в install_easy.sh</p>
<pre><code class="lang-auto"># openwrt only : donttouch,none,software,hardware
FLOWOFFLOAD=software
</code></pre></td><td>2024-10-20T14:43:58.551Z</td></tr><tr><td>abc555</td><td><p>но без метода тыка можно ведь что не будь не заметить, а так во всех вариантах проверил, времени конечно занимает дольше, но зато видишь всё в целом как работает.<br>
спасибо, я обязательно всё это проверю, к сожалению роутер этот далеко, а тут где я сейчас всё работает и проверить не могу</p></td><td>2024-10-20T14:49:50.993Z</td></tr><tr><td>abc555</td><td><p>а если не используешь вай фай то что тогда лучше включать в FLOWOFFLOAD= ?<br>
и я так так понимаю что редактировать параметр FLOWOFFLOAD можно ведь через обычный редактор vi или только при установке ?</p></td><td>2024-10-20T14:51:46.468Z</td></tr><tr><td>bolvan</td><td><p>Если процессор способен справиться с нагрузкой и не порезать при этом скорость, оффлоад  лучше вообще не использовать. Например, он несовместим с шейпингом и приоритезацией трафика.<br>
Если hardware offload, в tcpdump  тоже будешь видеть огрызки.</p>
<p>Если скорость режется, надо иметь в виду, что hardware вариант ничего не даст для wifi.<br>
Проверил только что. fw4 добавляет в flowtable только порты свитча.<br>
Собственно, свитч это и есть аппаратный модуль, реализующий оффлоад.<br>
wifi не связан со свитчом никак. Он управляется процессором роутера и ОС. Отдельное устройство.<br>
SFO не исключает трафик из ОС, а лишь сокращает путь обработки, исключая из него стандартные цепочки netfilter. На этом экономится процессор. Но остальное все задействуется. Поэтому SFO будет работать для любых вариантов.</p>
<p>Редактировать config можно и редактором, но придется потом перезапустить /etc/init.d/zapret restart.<br>
Правильно будет сначала остановить /etc/init.d/zapret stop, потом редактировать, потом запустить /etc/init.d/zapret start</p></td><td>2024-10-20T14:56:05.117Z</td></tr><tr><td>abc555</td><td><p>приоритезация трафика у меня всё равно не работает, минимальная сборка, нет нужных для этого пакетов, та я и раньше с ней игрался и отказался от этого, нашел другое решение для темы которую мутил</p></td><td>2024-10-20T14:59:26.069Z</td></tr><tr><td>abc555</td><td><p>роутеры с 8 мгб памяти, много туда не засунешь, я понимаю что для полноценной работы проги нужен другой роутер где есть память, для работы полного функционала, та и проц чтоб был нормальный, тогда да, а так, на минималках, но работает, прикольно</p></td><td>2024-10-20T15:04:29.343Z</td></tr><tr><td>bolvan</td><td><p>Есть вариант затянуть все зависимости в squashfs через image builder.<br>
Да и скачивалка в openwrt вебовская уже дает возможность запихать указанные пакеты в образ</p></td><td>2024-10-20T15:06:00.047Z</td></tr><tr><td>abc555</td><td><p>так я так и сделал, все пакеты установлены, сами файлы запрета занимают где то 400 килобайт и у меня впритык со всеми пакетами</p></td><td>2024-10-20T15:07:39.554Z</td></tr><tr><td>bolvan</td><td><p>от luci еще можно отказаться. кучу места освободит</p></td><td>2024-10-20T15:08:14.048Z</td></tr><tr><td>abc555</td><td><p>не, от люси никак, визуально бывает виднее, я такие пакеты, если динамический нэт, то удаляю ppp ppp-mod-pppoe, а если вай фай не нужен, то удаляю wpad-basic-mbedtls, сразу места много становится, можно и дрова наверно вай фай, не пробовал и ещё будет место<br>
раньше сносил ipv6, нормально место освобождалось, а с час они намутили, там что то максимум 200 килобайт всего свободных, толку удалять ipv6 нету</p></td><td>2024-10-20T15:09:48.789Z</td></tr><tr><td>Cbnny</td><td><p>И как это сделать?</p></td><td>2024-10-20T15:11:08.488Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="MIHAHIM" data-post="1683" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/b487fb/48.png" class="avatar"> MIHAHIM:</div>
<blockquote>
<p>Оказывается у меня в разных листах были одни и те же домены указаны, но при этом на каждый лист своя стратегия, убрал дублирующие домены - все заработало. Я доволен</p>
</blockquote>
</aside>
<p>А по итогу то инсту и фэйсбук побороли?</p></td><td>2024-10-20T17:16:04.501Z</td></tr><tr><td>easyone11</td><td><p>так они борятся через hosts<br>
просто стратегии не помогут из за блока ip</p></td><td>2024-10-20T17:42:52.401Z</td></tr><tr><td>doomer2007</td><td><p>Люся на 8 мб правда уже жмёт. Можно ещё  сделать костыль, чтобы запрет ставить только в /tpm и каждый раз автоматически скачивать его при загрузке. opkg может ставить в рам, значит и люсю можно качать каждый раз заново.</p></td><td>2024-10-20T17:44:06.519Z</td></tr><tr><td>lsblk</td><td><p>Спасибо, с этим разобрался!</p>
<p>Но возник другой вопрос.<br>
<code>NFQWS_OPT_DESYNC="-dpi-desync=fake,split2 --dpi-desync-ttl=7 --dpi-desync-fooling=badseq"</code> - так работает контрабанда (ntc.party, rezka.ag, флибуста, рутрекер и т.п)</p>
<p><code>NFQWS_OPT_DESYNC="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq"</code> - так работает ютуб по tls 1.2 (нужно для андроида, по другому не хочет)</p>
<p>Совместить нормально не получилось, решил попробовать разделить так:<br>
<code>NFQWS_OPT_DESYNC="-dpi-desync=fake,split2 --dpi-desync-ttl=7 --dpi-desync-fooling=badseq --new --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --hostlist=/opt/zapret/ipset/zapret-hosts-user-yt.txt"</code>, где zapret-hosts-user-yt.txt - хосты ютуба. Так же пробовал и 2 отдельных хостлиста задавать. Но не работает ютуб.<br>
Потратил кучу времени уже, но так и не смог пока понять, что делаю не так.</p>
<p>в целом конфиг такой:</p>
<pre><code class="lang-auto">...
MODE=nfqws
MODE_HTTP=1
MODE_HTTP_KEEPALIVE=0
MODE_HTTPS=1
MODE_QUIC=1
MODE_FILTER=hostlist

DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000

#NFQWS_OPT_DESYNC="--dpi-desync=fake,split2 --dpi-desync-ttl=7 --dpi-desync-fooling=badseq"
NFQWS_OPT_DESYNC="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq"

NFQWS_OPT_DESYNC_HTTP="--dpi-desync=fake --dpi-desync-ttl=7 --dpi-desync-fake-http=0x00000000"
NFQWS_OPT_DESYNC_QUIC="--dpi-desync=fake --dpi-desync-repeats=6"
...
</code></pre>
<p>на полшишки рабочий)</p></td><td>2024-10-20T22:14:07.028Z</td></tr><tr><td>lsblk</td><td><aside class="quote no-group" data-username="easyone11" data-post="1723" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>просто стратегии не помогут из за блока ip</p>
</blockquote>
</aside>
<p>Каким образом возможно обойти блок по ip через hosts мм? <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"><br>
Вот же туркмены, не додумались…</p></td><td>2024-10-20T22:34:45.257Z</td></tr><tr><td>doomer2007</td><td><p>Хочу вернуться к теме курла с поддержкой http3. А можно его как-то скомпилировать вместе с openwrt. Чтобы получился не статический файл, а с зависимостями openssl, который заменит mbedtls? И всё это в squashfs.</p></td><td>2024-10-20T23:37:36.844Z</td></tr><tr><td>easyone11</td><td><aside class="quote" data-post="1" data-topic="11822">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/nekspsy/48/11143_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D1%8B-instagram-%D0%B8-facebook/11822">Домены instagram и facebook</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    Поделитесь, пожалуйста, доменами инсты+фб. 
Делаю отдельный конфиг для фб+инста+твиттер, т.к ютуб стал работать без костылей. 
При обращении к инсте глянул консоль, куда запросы идут, выписал, и все равно не пускает. 
На данный момент работает только твиттер. 
Текущий список: 

<a href="http://facebook.com" rel="noopener nofollow ugc">facebook.com</a> 
<a href="http://fbcdn.net" rel="noopener nofollow ugc">fbcdn.net</a> 
<a href="http://fb.com" rel="noopener nofollow ugc">fb.com</a> 
<a href="http://messenger.com" rel="noopener nofollow ugc">messenger.com</a> 
<a href="http://twitter.com" rel="noopener nofollow ugc">twitter.com</a> 
<a href="http://twimg.com" rel="noopener nofollow ugc">twimg.com</a> 
<a href="http://t.co" rel="noopener nofollow ugc">t.co</a> 
<a href="http://x.com" rel="noopener nofollow ugc">x.com</a> 
<a href="http://instagram.com" rel="noopener nofollow ugc">instagram.com</a> 
<a href="http://cdninstagram.com" rel="noopener nofollow ugc">cdninstagram.com</a> 
<a href="http://igcdn-photos-e-a.akamaihd.net" rel="noopener nofollow ugc">igcdn-photos-e-a.akamaihd.net</a> 
<a href="http://instagramstatic.com" rel="noopener nofollow ugc">instagramstatic.com</a> 

Что упустил?
  </blockquote>
</aside>
</td><td>2024-10-21T04:30:37.441Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="doomer2007" data-post="1727" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>курла с поддержкой http3. А можно его как-то скомпилировать вместе с openwrt. Чтобы получился не статический файл</p>
</blockquote>
</aside>
<p>Можно. Берёте сорцы отсюда: <a href="https://github.com/sbwml/openwrt-curl-prebuilt" class="inline-onebox" rel="noopener nofollow ugc">GitHub - sbwml/openwrt-curl-prebuilt: Building libcurl with HTTP/3 and QUIC support</a><br>
И собираете OpenWrt сами с этими сорцами.</p></td><td>2024-10-21T05:22:54.369Z</td></tr><tr><td>tehkos(TConst)</td><td><p><code>NFQWS_OPT_DESYNC="--hostlist=/opt/zapret/ipset/zapret-hosts-user-yt.txt --dpi-desync=split  --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq  --new -dpi-desync=fake,split2  --dpi-desync-ttl=7 --dpi-desync-fooling=badseq"</code></p></td><td>2024-10-21T06:09:02.755Z</td></tr><tr><td>lsblk</td><td><p>Спасибо, сработало!<br>
Проблема былв в чём? Хостлист нужно задавать первым параметром, или же то что нужно исключить, нужно задавать первым, до --new, или и то и другое?</p></td><td>2024-10-21T06:39:55.179Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="lsblk" data-post="1725" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/ba9def/48.png" class="avatar"> lsblk:</div>
<blockquote>
<p>Но возник другой вопрос.<br>
<code>NFQWS_OPT_DESYNC="-dpi-desync=fake,split2 --dpi-desync-ttl=7 --dpi-desync-fooling=badseq"</code> - так работает контрабанда (ntc.party, rezka.ag, флибуста, рутрекер и т.п)</p>
<p><code>NFQWS_OPT_DESYNC="--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq"</code> - так работает ютуб по tls 1.2 (нужно для андроида, по другому не хочет)</p>
</blockquote>
</aside>
<p>Эти стратегии вполне совмещаемые<br>
Общий знаменатель должен быть<br>
–dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-ttl=7<br>
Хотя я бы лучше сделал так<br>
–dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq,md5sig</p>
<p>И badseq может ломать plain http на ТСПУ. Надо проверять отдельно</p></td><td>2024-10-21T07:15:17.870Z</td></tr><tr><td>bolvan</td><td><p>Теоретически да, но практически я пробовал. Идут ошибки сборки.<br>
В openwrt так часто бывает. С дефолтными опциями собирается, а другие варианты поломаны</p></td><td>2024-10-21T07:18:14.340Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Нуда там, паттерн примерно  такой: --hostlist файл1 стратегия1 --new --hostlist файл2 стратегия2 --new стратегия3</p></td><td>2024-10-21T07:24:14.338Z</td></tr><tr><td>abc555</td><td><p>Подскажите, может есть какой не будь установить маленький пакет под nftables на wrt, чтоб заработала обратная фрагментация или отдельно такого нету ? Не хочется спрашивать на форуме wrt, у них сразу вопросы, а зачем, для чего, интеллект тоже как всегда н@ебёт, по факту и спросить больше не у кого</p></td><td>2024-10-21T11:30:40.942Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Tpws, весит мало, просит тоже мало. Обратную фрагментацию делает</p></td><td>2024-10-21T11:36:53.651Z</td></tr><tr><td>abc555</td><td><aside class="quote no-group" data-username="wigeance" data-post="1736" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Tpws</p>
</blockquote>
</aside>
<p>так нет такого пакета, я через opkg проверил<br>
у меня последняя версия сборки wrt</p></td><td>2024-10-21T11:39:38.537Z</td></tr><tr><td>bolvan</td><td><p>tpws из zapret-а<br>
Его можно установить и без скриптов запуска, если самому все сделать</p></td><td>2024-10-21T11:47:53.129Z</td></tr><tr><td>abc555</td><td><p>Подскажите как установить и сколько надо места хоть примерно, тут осталось на этом роуторе всего 60 килобайт ) Но есть роутеры где места ещё хватает<br>
и может он и установлен, только не работает, так как чего то может не хватать, каких не будь дополнительных пакетов</p></td><td>2024-10-21T11:50:37.013Z</td></tr><tr><td>bolvan</td><td><p>150 кб</p>
<p>Товарищ NewUse делал минимальную обертку здесь<br>
<a href="https://github.com/bol-van/zapret/pulls" class="onebox" target="_blank" rel="noopener">https://github.com/bol-van/zapret/pulls</a><br>
Принимать я отказался это в основную репу, но можно его спросить где можно взять</p>
<p>Или самому все написать</p></td><td>2024-10-21T11:52:22.952Z</td></tr><tr><td>abc555</td><td><p>Я установил так<br>
wget -O “/tmp/zapret-master.zip” <a href="https://github.com/bol-van/zapret/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/archive/refs/heads/master.zip</a><br>
cd /tmp<br>
unzip zapret-master.zip<br>
cd /tmp/zapret-master/<br>
./install_easy.sh<br>
наверно это и есть минимальная сборка<br>
для установки Tpws надо было запустить ещё ./install_ какой ?<br>
До конца я ещё не разобрался просто, 2 недели ещё не прошло как начал юзать запрет,<br>
иду так, поэтапно<br>
Сама фишка у меня была вложить минимальное, так как мало места, но на некоторых место немного осталось и можно ещё добавить что нить, но обратная у меня не работает нигде, значит не поставил<br>
а добавить 150 кб, я могу поставить тут wpad-mini и наверно влезет<br>
цель была проверить ляжет не ляжет роутер, тут сетка и если ляжет то сразу будет кипишь, но вроде тягу держит, вроде всё нормально, сколько тут устройств подключено, я понятия не имею, но не мало это точно ))</p></td><td>2024-10-21T11:54:17.361Z</td></tr><tr><td>bolvan</td><td><p>По моим ощущениям у вас не хватит знаний делать что-то нестандартным образом.<br>
А стандартным на минимальном количестве места ничего не сделаешь</p></td><td>2024-10-21T12:27:11.386Z</td></tr><tr><td>abc555</td><td><p>не ну поставил же, как поставить теперь к примеру с нуля ./install какой ещё надо будет запустить по мима ./install_easy.sh ?</p></td><td>2024-10-21T12:28:58.722Z</td></tr><tr><td>abc555</td><td><p>Естественно я себе не ставил ни git ни nano, как все там советуют, поставил unzip в место grep, меньше весит, советчиков там много в нэте, только толку от них мало</p></td><td>2024-10-21T12:36:55.636Z</td></tr><tr><td>bolvan</td><td><p>Там надо будет самому написать procd стартап в /etc/init.d  и nftables в /etc/nftables.d<br>
От zapret только бинарик tpws</p></td><td>2024-10-21T12:40:58.442Z</td></tr><tr><td>abc555</td><td><p>написать в procd не проблема, я умею пользоваться редактором vi<br>
покажите на примере что нужно там написать<br>
и я так понимаю бинарик tpws должен висеть, значит скачивать его не нужно, уже хорошо, осталось только прописать<br>
с offloading спасибо, я реально понял как правильно теперь, а то всё гадал<br>
так вот поэтапно и иду, параметр за параметром, осталось вот только разобраться с tpws<br>
а как ещё по другому научится, в школу пойти, так они там ничему не научат, как в поговорке, рождённый пить летать не может )</p></td><td>2024-10-21T12:43:09.983Z</td></tr><tr><td>bolvan</td><td><p>Если не умеете писать шелл скрипты или ничего не знаете о nftables, то не получится</p></td><td>2024-10-21T12:57:21.720Z</td></tr><tr><td>abc555</td><td><p>та вы на примере покажите, я просто не врубаюсь, что конкретно я упустил.<br>
поймите, таких как я много которые не умеют писать скрипты, многие играются с параметрами запрета, не понимая того, что половина этих параметров и них не работает, они вообще не имеют понятия что делают, но я хоть примерно понимаю, вот дошел до tpws и куда дальше смотреть и если есть у вас образец, что я пути не смогу поменять, главное чтоб скрип работал, а то как обычно окажется что не хватает нужного пакета для работы скрипта, но ведь не останавливаться на достигнутом, надо дальше идти правильно ?<br>
Вот смотрите<br>
Я сделал так<br>
wget -O “/tmp/zapret-master.zip” <a href="https://github.com/bol-van/zapret/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/archive/refs/heads/master.zip</a><br>
cd /tmp<br>
unzip zapret-master.zip<br>
cd /tmp/zapret-master/<br>
./install_easy.sh<br>
да да нет нет и всё установилось, настраивать vi /opt/zapret/config это я понял, разобрался почти во всём,<br>
select MODE :<br>
1 : tpws<br>
2 : tpws-socks<br>
3 : nfqws<br>
4 : filter<br>
5 : custom<br>
your choice (default : tpws) : 3<br>
selected : nfqws</p>
<p>select filtering :<br>
1 : none<br>
2 : ipset<br>
3 : hostlist<br>
4 : autohostlist<br>
your choice (default : none) : 3<br>
selected : hostlist<br>
выбрал так и всё вроде работает, но не работает обратная фрагментация, к примеру ставлю параметр --dpi-desync=fake,disorder2, как вы сказали disorder2 это и есть обратная фрагментация  со значением 2, но не работает, включаю на запрете, работает, на роуторе нет</p></td><td>2024-10-21T13:04:53.372Z</td></tr><tr><td>bolvan</td><td><p>OK, я напишу минималку для tpws и nft.<br>
А что они понятия не имеют, так это неизбежно. И это не изменить. Это можно только принять.<br>
Хоть кто-то да прорвется</p>
<p>Вариант через инсталятор не прокатит, потому что он потребует устанавливать зависимости для nfqws и ipset, а еще curl. + сами скрипты. Итого 1.5 мб</p></td><td>2024-10-21T13:12:09.673Z</td></tr><tr><td>abc555</td><td><p>минимальные пакеты которые я надыбал для nft это<br>
unzip kmod-nfnetlink-queue kmod-nft-queue gzip curl<br>
которые нужно добавить в сборку прошивки чтоб с экономить место<br>
вам нужно заменить пакет grep на unzip для минимальной сборки, unzip весит меньше, а функцию выполняет туже, просто получается разархивировать этой командой unzip zapret-master.zip</p></td><td>2024-10-21T13:21:29.266Z</td></tr><tr><td>abc555</td><td><p>Вся операция проходит ведь в папке темп, 27 мегабит свободно или 1.5 мб будет весить сама программа запрет ? так она на данный момент занимает у меня примерно 400 кб на диске<br>
служба запрет установлена<br>
дополнительно у меня памяти подкачки есть ещё 27 мегабит, к примеру распаковывать архив при запуске в тепм, даже пусть 2 мегабита, пофиг, места полно<br>
я из оперативки сделал ещё оперативку и хватает с головой загрузить адблок и для работы места валом, на только ram<br>
к примеру у lz4 лучшая производительность, но меньше сжатие что я включил<br>
у lz производительность хуже, но лучше сжатие<br>
пакет zram-swap создаёт дополнительную память из оперативки, у тех у кого мало её, то он то что надо, решает как раз этот вопрос</p></td><td>2024-10-21T13:23:44.327Z</td></tr><tr><td>bolvan</td><td><p>Пишите более внятно, это читать тяжело. Какая-то каша.<br>
Если речь идет о системах, где осталось буквально 200 кб, то там надо tpws запускать без стандартных скриптов запуска. nfqws там не взлетит.<br>
Когда места хватает для полного комплекта, то о чем мы вообще говорим ?</p></td><td>2024-10-21T13:32:10.626Z</td></tr><tr><td>abc555</td><td><p>ну так вот, не знаю как вам проще показать<br>
<img src="zapret-обсуждение-726/0ec065aa2192cc81dcbe6edefd742abb0d3bb2a6.jpeg" alt="3" data-base62-sha1="26uToJigOSpe0gbeZYUAFIIz6tw" width="616" height="225"></p>
<p><img src="zapret-обсуждение-726/8982cc664dd5e3f9812dacced77269a47d262407.jpeg" alt="5" data-base62-sha1="jCtEaaR6w8DvqcyCU8hIHoXNxj1" width="620" height="97"></p></td><td>2024-10-21T13:39:08.381Z</td></tr><tr><td>arinoki(Arinoki)</td><td><details>
<summary>
оффтопик</summary>
<p>Вы если что не путайте мегабиты с мегабайтами. Ну, вы их не путаете как я понял - но пишете не то =)</p>
</details></td><td>2024-10-21T13:43:06.059Z</td></tr><tr><td>abc555</td><td><p>та я постоянно путаю мегабайты мегабиты, главное суть ясна )</p></td><td>2024-10-21T13:44:05.875Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group" data-username="Cbnny" data-post="1721" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/7ea924/48.png" class="avatar"> Cbnny:</div>
<blockquote>
<p>И как это сделать?</p>
</blockquote>
</aside>
<p>Тут zapret-топик, я думал, вам кто-нибудь подскажет/напишет строчку стратегии. Если yt4 по айпи не забанен…</p>
<p>Моё решение не связано с zapret, но раз уж вы спросили:<br>
Я накидал простенький плагин под Оперу, использовав <code>chrome.declarativeNetRequest()</code>. Он тупо перенаправляет. yt3 → yt4. Прямо на лету. Благо там сертификаты расшарены.</p>
<p>Если у вас винда, можно попробовать через строчку в файле <code>hosts</code> перенаправить.</p></td><td>2024-10-21T13:51:26.484Z</td></tr><tr><td>doomer2007</td><td><p>Суть как раз очень сложно уловить, когда вы пишите без запятых сплошной стеной текста с горой ошибок. Вы прям очень круто замахнулись всё настроить, да так чтобы это всё по красоте, да и в маленькую память, при этом не зная ни шелла, ни скриптов запуска, а до этого вообще мне про шифрованный tcp и нешифрованный udp рассказывали. Вам бы поставить какой-нибудь линукс в виртуалку. Но если вы хотите ещё и скрипты запуска освоить, то линукс без systemd.</p></td><td>2024-10-21T14:20:16.842Z</td></tr><tr><td>abc555</td><td><p>та я всегда стараюсь сделать всё по красоте, мне просто нужно понять всё в целом, я же не айтишник, можно сказать не владею языками, терминами, но вижу немного по другому, не так как айтишник и замечаю очень часто, то что не видят другие, можно сказать что думаю не стандартно, то есть когда все смотрят налево, я иду направо<br>
мне не сложно освоить скрипты, главное чтоб я понимал что я делаю<br>
к примеру я вон написал выше инструкцию как поставить запрет на роутер, точнее как я его поставил и повторить в точности может любой школьник, но понять что не работает обратная фрагментация не каждый сможет, понять что она не работает и остановившись на ней, дальше надо понять как её сделать, не возможно или никак не принимается, как там морфиус говорил, нет ничего невозможного )</p></td><td>2024-10-21T14:39:45.960Z</td></tr><tr><td>bolvan</td><td><p>См последний коммит в репе<br>
init.d/openwrt_minimal<br>
В доке “Установка на openwrt в режиме острой нехватки места на диске”</p></td><td>2024-10-21T14:46:25.960Z</td></tr><tr><td>abc555</td><td><p>То есть установка с нуля пока всё скачено в папку тепм, я устанавливаю как устанавливал или как, по о концовке ввести init.d/openwrt_minimal и дальше разберусь ?<br>
Простите если вопрос тупой, но как я говорил что я не айтишник, та и нормальных айтишников единицы, лично я в живую не знаю никого, даже ни разу не видел, так вот в нэте встречаю и реально их мало нормальных. Вот тут на форуме Вы, Валдикс, Топер и это те которые ну лично моё мнение я считаю реальными, остальные юзеры такие же как я. Просто кто то чтоб не упасть лицом в грязь, старается не задавать тупых вопросов, так же и в жизни он себя ведёт, создаёт вид что он молодец, ну а я не стесняюсь, если не знаю, мне не стыдно спросить. В любом случаи спасибо что вы есть, причём все участники форума</p></td><td>2024-10-21T15:37:56.228Z</td></tr><tr><td>vernette</td><td><p>Можно вообще без зависимостей скачать, чтоб даже unzip не ставить:</p>
<pre><code class="lang-auto">cd /tmp
wget -O master.tar.gz "https://github.com/bol-van/zapret/archive/refs/heads/master.tar.gz"
tar xfz master.tar.gz
</code></pre></td><td>2024-10-21T20:28:26.822Z</td></tr><tr><td>NewUse(New Use)</td><td><p>так можно же из пул реквеста вытянуть или с моей репы… только учтите, что это только tpws, у меня умещалось на openwrt 19 с люси и gui из соседнего PR на роутере 4/32, проверял только на iptables, но должно быть унивирсальным, ибо там испрльзуются стандартные конфиги фаервола через uci</p>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/NewUse/zapret">
  <header class="source">

      <a href="https://github.com/NewUse/zapret" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/e96d75839436f755b6f352bbdd29040359e05afe_2_690x344.png" class="thumbnail" data-dominant-color="F4F4F4">

  <h3><a href="https://github.com/NewUse/zapret" target="_blank" rel="noopener nofollow ugc">GitHub - NewUse/zapret: DPI bypass multi platform</a></h3>

    <p><span class="github-repo-description">DPI bypass multi platform</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>– это мой гит, находится кроссылкой из PR</p>
<p>, готовые пакеты из моего PR собирал spvkgn в <a href="https://github.com/spvkgn/zapret-openwrt/tree/gh-pages" class="inline-onebox" rel="noopener nofollow ugc">GitHub - spvkgn/zapret-openwrt at gh-pages</a></p>
<p>Потихоньку начал пилить nfqws, но с ним всё сильно сложнее, он изначально больше, так ещё и обвязка сильно больше и сильно криевее получается, ибо нет возможности через стандартный uci-синтаксис правила заводить… Да и тестировать пока тоже не на чем</p>
<p>Из того, что у меня не реализовано, это ipset и хостлисты, не реализовано специально, ибо жрёт и без того недостаточную память, в случае tpws смысла от них не вижу, но может не прав.</p></td><td>2024-10-21T22:34:05.213Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="NewUse" data-post="1762" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/newuse/48/9771_2.png" class="avatar"> NewUse:</div>
<blockquote>
<p>Да и тестировать пока тоже не на чем</p>
</blockquote>
</aside>
<p>Как это не на чем ? А виртуалки на что ?</p></td><td>2024-10-22T05:42:02.466Z</td></tr><tr><td>mrgogu</td><td><p>Всем добрый день. Возможно вопрос не для данного топика, но пока что еще не разобрался в форуме.</p>
<p>В общем настроил на VyOS 1.5 данное ПО и теперь сайты, заблокированные РКН работают. Но теперь хочу ходить через VPN на иностранные сайты, которые ограничили доступ из РФ.</p>
<p>Чисто технически я понимаю что мне нужно</p>
<ol>
<li>Брать список таких доменов/ip адресов. Может быть кто-то в курсе такого?</li>
<li>Добавлять такие домены в hostlist-exclude</li>
<li>Маршрутизировать в VPN.</li>
</ol>
<p>Собственно пока как то так вижу задачу, но конкретика в голове не складывается. Буду рад советам.</p>
<p>P.S отдельное спасибо автору zapret и всем причастным за возможность смотреть youtube и ковырять instagram)</p></td><td>2024-10-22T08:20:03.083Z</td></tr><tr><td>easyone11</td><td><ol>
<li><a href="https://github.com/dartraiden/no-russia-hosts/blob/master/hosts.txt" class="inline-onebox">no-russia-hosts/hosts.txt at master · dartraiden/no-russia-hosts · GitHub</a></li>
</ol></td><td>2024-10-22T08:31:21.253Z</td></tr><tr><td>mrgogu</td><td><p>Отлично, спасибо. Я видел что install_easy можно выбрать параметр filter</p>
<blockquote>
<p>filter - только заполнить ipset или загрузить hostlist</p>
</blockquote>
<p>получается если запустить дополнительный инстанс (так же будет работать) и скормить ему данный список, то можно даже не маршрутизацией, а средствами nftables форвардить трафик в VPN.</p></td><td>2024-10-22T08:49:37.683Z</td></tr><tr><td>Alex-dv(Alex)</td><td><p>Всем доброго дня! Хочу поделится информацией: установил zapret на обычный x86 комп, используемый в качестве роутера (2 сетевых адаптера, ОС Ubuntu 24.04). Какое то время все работало, затем провайдер поменял какие то параметры, на сервисе 2ip стал отображаться под другим названием, после чего работа youtube и некоторых других сайтов стала нестабильной. Было перепробовано много параметров работы nfqws, не помогало. Помогло просто удаление и установка заново последней версии zapret с github’а. Причем параметры nfqws оставил те, которые предлагает установщик. После этого работа стала стабильной! Так что всем у кого есть проблемы попробуйте просто обновиться до последней версии, так как уважаемый bolvan достаточно часто выпускает обновления)</p></td><td>2024-10-22T09:12:10.171Z</td></tr><tr><td>Cbnny</td><td><p>Ну вот пишут, что можно перенаправить, а что конкретно делать то? Мне б инструкцию, чтоли</p></td><td>2024-10-22T09:21:48.643Z</td></tr><tr><td>bolvan</td><td><p>Все не совсем так.<br>
Не надо никаких exclude.<br>
Скорее надо заполнять ipban список. Но это может усложниться прыгающими IP определенных сайтов, где придется писать скрипты для загона целых ASок.<br>
И еще надо уметь настраивать policy based routing в linux.<br>
Либо делать рулежку по доменам средствами прокси-менеджера. Например, xray.<br>
Тут нет однокнопочного и простого решения.<br>
Если надо простоты - гораздо удобнее использовать расширение броузера по типу foxy proxy.<br>
Скрипты zapret добавляют фильтр по интерфейсу. Если он есть, то траф на VPN не пойдет на zapret</p></td><td>2024-10-22T09:29:04.106Z</td></tr><tr><td>viveler</td><td><p>Доброе утро, пытаюсь настроить <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> с zapret’ом но пока не понял как это делать… Нужно ли прогонять blockcheck? Извиняюсь если где то про это говорилось, не разобрался с этим форумом.</p></td><td>2024-10-22T09:44:06.051Z</td></tr><tr><td>mrgogu</td><td><p>Большое спасибо за ответ. Просто хочется именно коробочное решение получить, поэтому прокси в броузере не хочется делать.<br>
С PBR в целом знаком. Через bgpq3 список подсетей по AS в теории тоже смогу получить. Про xray впервые слышу, поэтому надо поизучать.</p>
<p>Просто мне казалось что параметр fitler сам сможет получить ipset, видимо нужное его заставить сделать его с другим именем, чтобы не сломался основной инстанс.</p></td><td>2024-10-22T09:46:24.525Z</td></tr><tr><td>bolvan</td><td><p>ipset ipban всегда формируется при любой конфигурации<br>
он и существует для редиректа трафика<br>
так что заполнять можно zapret-hosts-user-ipban.txt<br>
Если надо тянуть что-то скриптовое, в системе запуска zapret есть ipset hook.<br>
Это скрипт, который на входе получает имя ipset , а на выходе в stdout выдает список ip или cidr.<br>
Скрипты zapret это обьединяют со своими источниками и засовывают в сет.<br>
В случае nftables это единственная возможность засунуть в сет все сразу. Иначе при попытке засунуть пересекающиеся IP потом будет ошибка. Или самому надо делать сет и заполнять его и правила отдельные для него писать.</p></td><td>2024-10-22T10:17:32.415Z</td></tr><tr><td>PeFeD(Fedor)</td><td><blockquote>
<p>в файле <code>hosts</code> перенаправить</p>
</blockquote>
<aside class="quote no-group" data-username="Cbnny" data-post="1768" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/7ea924/48.png" class="avatar"> Cbnny:</div>
<blockquote>
<p>а что конкретно делать то?</p>
</blockquote>
</aside>
<p>Мда. Если эти две строчки взаимосвязаны, то у меня для вас плохие новости… ))</p>
<p>За инструкциями - в гугл (или яндекс). Врядли вам тут будут расписывать про хостс и с чем его едят. Вводите “перенаправление файл hosts” и читаете.</p>
<p>По итогу вам в <em>hosts</em> надо добавить строку<br>
<code>64.233.163.132 yt3.ggpht.com</code></p></td><td>2024-10-22T10:32:44.481Z</td></tr><tr><td>Cbnny</td><td><p>Я знаю про hosts, вопрос то был в том, что именно прописывать. Просто все эти абстрактные объяснения типа “перенаправить один адрес на другой” для меня абсолютно непонятны</p></td><td>2024-10-22T14:31:07.142Z</td></tr><tr><td>anonymous182(anonymous182)</td><td><p>dpi-desync-any-protocol+ fake,disorder2 (со стороны клиента) помогает работе ovpn tcp, были ли у кого ни будь успешные кейсы использования со стороны сервера? Полагаю, придется завернуть большой диапазон портов и вероятно использовать стратегии без ttl, имеет ли смысл?</p></td><td>2024-10-22T15:42:50.964Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="vernette" data-post="1761" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/v/48db29/48.png" class="avatar"> vernette:</div>
<blockquote>
<p>Можно вообще без зависимостей скачать, чтоб даже unzip не ставить:</p>
<pre><code class="lang-auto">cd /tmp
wget -O master.tar.gz "https://github.com/bol-van/zapret/archive/refs/heads/master.tar.gz"
tar xfz master.tar.gz
</code></pre>
</blockquote>
</aside>
<p>Еще проще</p>
<pre><code class="lang-auto">wget -qO- "https://github.com/bol-van/zapret/archive/refs/heads/master.tar.gz" | tar -xz
</code></pre></td><td>2024-10-22T16:04:00.211Z</td></tr><tr><td>Hytyq</td><td><p>Добрый день, использовал программу версии 1.0.0 и она перестала работать (Точнее дискорд стал очень сильно тормозить, в войсы заходят за минуты). Решил обновить, скачивал 1.5.1 (Такая же фигня происходит), в мастере ничего не понял, в bungle master ничего не заработало (Видимо я слишком туп, чтобы понять как работает). Что посоветуете делать (Оператор Дом.ру)</p></td><td>2024-10-22T16:32:56.929Z</td></tr><tr><td>bolvan</td><td><p>Таких версий у zapret нет. Может что-то другое ? Сборка, лаунчер ? Тогда к ним и вопрос, не сюда.<br>
А вообще я всегда говорю в таком случае лучше отказаться от этого варианта.<br>
Тут требуется техническая грамотность на определенном уровне.<br>
Это не для пользователя уровня телефона.<br>
Не существует всегда работающих универсальных вариантов</p></td><td>2024-10-22T16:49:37.836Z</td></tr><tr><td>Hytyq</td><td><p>понял, просто скачал и в правду сборки. Пойду разбираться че та как там было</p></td><td>2024-10-22T16:56:26.103Z</td></tr><tr><td>Cheeck</td><td><aside class="quote no-group" data-username="viveler" data-post="1770" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/viveler/48/11596_2.png" class="avatar"> viveler:</div>
<blockquote>
<p>пытаюсь настроить <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> с zapret’ом но пока не понял как это делать… Нужно ли прогонять blockcheck?</p>
</blockquote>
</aside>
<p>Если не работают дефолтные стратегии − нужно. Прогоните для доменов <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> и <a href="http://twimg.com" rel="noopener nofollow ugc">twimg.com</a>, поиск стратегий для http и quic в блокчеке можно отключить, в данном случае он не нужен. Измените настройки с учётом полученных результатов. Сами домены внесите в хостлист.</p></td><td>2024-10-22T20:16:06.538Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет!<br>
Обычно по этой смехе делаю запрет: <a href="https://gist.github.com/barmaley6699/37b10173481f69e10d824faef541352f#file-zapret-openwrt-txt-L22" rel="noopener nofollow ugc">https://gist.github.com/barmaley6699/37b10173481f69e10d824faef541352f#file-zapret-openwrt-txt-L22</a><br>
Зачастую ставлю vless, AmneziaWG и т.д, развлекаюсь в общем.<br>
Сегодня сделал сброс до заводских и накатил запрет по этой инструкции, после обновил все пакеты по этой команде:</p>
<pre><code class="lang-auto">opkg list-upgradable | cut -f 1 -d ' ' | xargs -r opkg upgrade  - #обновляет все пакеты установленные</code></pre>
<p>После чего через пару минут тупо умер интернет, не работает от слова совсем, вай фай ловит, но не подключается.<br>
Так как я еще пользуюсь ChatGpt, то прописал comss через патси:</p>
<pre><code class="lang-auto">sh -c 'sh -c "$(curl -sL https://api.controld.com/dl)" -s comss'</code></pre>
<p>И о чудо, все заработало, интернет подключился, все как раньше. Не понимаю почему.<br>
Из изменений: Раньше после обновы в люси в разделе службы был Ruantiblock, сейчас его просто нет, исчез.<br>
Прошивка стоит от acdev, позавчера было все норм. Может в самом запрете есть изменения, что после команды обновления такую дичь творят?!</p></td><td>2024-10-22T20:39:30.626Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1778" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Таких версий у zapret нет.</p>
</blockquote>
</aside>
<p>Теперь уже есть ) На ютубе эту сборку так и называют zapret 1.5.1 Объяснять что-то - бесполезно, так что готовьтесь к таким вопросам, их со временем будет все больше.</p></td><td>2024-10-22T22:01:46.195Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group" data-username="Cbnny" data-post="1774" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/7ea924/48.png" class="avatar"> Cbnny:</div>
<blockquote>
<p>абстрактные объяснения типа “перенаправить один адрес на другой”</p>
</blockquote>
</aside>
<p>Как заставить вас назвать официантку Свету – Олей? По-моему, очевидно. Повесить Свете на лацкан бейдж с надписью “Оля”. Это же (надеюсь) не абстрактно? ))<br>
Как сказать браузеру ходить на сайт s4, думая что ходишь на сайт s3? Это и есть вся “абстракция” файла <code>hosts</code>. Он для этого и придуман.<br>
Вы берёте <strong>айпи</strong> сайта s4, а рядом пишите <strong>имя</strong> s3. Это и есть строчка, которую я вам дал в ответах выше.</p></td><td>2024-10-23T04:04:27.602Z</td></tr><tr><td>serpen(VL)</td><td><p>тут запрет для линя, оригинального репозитория, то о чем вы говорите “переделка”  для винды.</p></td><td>2024-10-23T05:33:39.067Z</td></tr><tr><td>bolvan</td><td><p>вполне себе официально выпущено под винду и BSD<br>
проблема лишь в репаках, которые состоят из проги и чьего-то конфига, которые преподносят как готовую однокнопочную таблетку. что, очевидно, не соответствует реальности.<br>
автор никогда не преследовал цели сделать удобное и простое решение для всех, не будет подбирать ни для кого конфиг персонально, не будет разбираться и отвечать на вопросы “у меня не работает”, если человек не способен сам разбираться и предоставлять какой-то технический feedback.<br>
тем более , если дело касается чьей-то сборки.<br>
на такие вопросы ответ универсальный : идите к тому, кто сделал сборку. если сложно, не пользуйтесь.</p></td><td>2024-10-23T06:10:16.925Z</td></tr><tr><td>Cbnny</td><td><p>“вопрос то был в том”, понимаете? БЫЛ, то есть я писал в прошедшем времени.</p></td><td>2024-10-23T10:14:00.242Z</td></tr><tr><td>viveler</td><td><p>Так preset_russia не работает с <a href="http://x.com" rel="noopener nofollow ugc">x.com</a> (максимум он работает только для дискорда и ютуба)</p>
<p>А хост лист нужно самому делать или кидать их в youtube_list?</p>
<p>(извините у меня с этим немного плоховато)</p></td><td>2024-10-23T10:48:28.889Z</td></tr><tr><td>Cheeck</td><td><p>Лучше использовать preset_russia_autohostlist. Когда блокчек отработает, в конце будет строка:</p>
<pre><code class="lang-auto">* SUMMARY
ipv4 &lt;домен&gt; curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 &lt;ваша_стратегия_обхода&gt;
</code></pre>
<p>Дальше два варианта:<br>
Первый − в preset_russia_autohostlist меняете последнюю строку на<br>
<code>&lt;ваша_стратегия_обхода&gt; --hostlist-auto="%~dp0autohostlist.txt"</code><br>
Создаёте (если его нет) autohostlist.txt, вписываете туда нужные домены (с переносом строки после последнего). Сохраняете. Пробуете.<br>
Второй − в preset_russia_autohostlist добавляете где-нибудь в середине строку<br>
<code>--filter-tcp=443 --hostlist="%~dp0twitter.txt" &lt;ваша_стратегия_обхода&gt; --new ^</code><br>
Создаёте twitter.txt, вписываете туда нужные домены. Сохраняете. Пробуете.</p>
<p>Если стратегия из SUMMARY не подойдёт, можете поискать в лог-файле блокчека другие рабочие (они помечены как !!! AVAILABLE !!!) и попробовать их.</p></td><td>2024-10-23T13:00:09.531Z</td></tr><tr><td>KDS</td><td><p>А можно чуть поподробнее, как в запрете работает autottl ? И почему эта шайтан-технология упорно отказывается работать у некоторых провайдеров, хоть с указанием дельты, хоть вообще без нее?<br>
Спасибо.</p>
<p>У меня на РТК работает идеально.</p></td><td>2024-10-23T13:10:59.900Z</td></tr><tr><td>bolvan</td><td><p>В доке все описано.<br>
Не работает по разным причинам. Например, из-за ассиметрии исходящего и входящего пути.<br>
autottl основано на предположениях, которые не всегда оказываются верными</p></td><td>2024-10-23T13:30:53.125Z</td></tr><tr><td>notAlx</td><td><p>Здравствуйте. Объясните пожалуйста, для чего в preset_russia(_autohostlist).cmd вот это:<br>
<code>--filter-udp=50000-50099 --new ^</code><br>
Если мы перед этим уже отфильтровали по этим ip, проверили адрес назначения в ipset и применили методы дурения. Что будет происходить без этого правила? Просто хотелось бы понять, надо ли так же для других наборов портов и ip делать аналогичное пустое правило.</p></td><td>2024-10-23T15:02:58.926Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У меня впечатление, что эта строчка вообще ничего не делает и вероятно как-то случайно появилась.</p></td><td>2024-10-23T15:41:39.952Z</td></tr><tr><td>bolvan</td><td><p>О, нет. Она там далеко не случайно.<br>
Она нужна, чтобы udp 50000-50099 на адреса не из ipset discord не попало сюда<br>
–dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig<br>
Всегда при анализе конфигов pktws следует придерживаться алгоритма и мысленно его трассировать по шагам. На входе некий пакет, куда он попадет ?</p></td><td>2024-10-23T15:52:23.601Z</td></tr><tr><td>notAlx</td><td><p>Значит оно попадает на --filter-udp=50000-50099 --new ^ и это равносильно правилу “ничего не делать с этими пакетами”. А если на всех стратегиях есть --hostlist или вообще нет стратегий без конкретного указания --filter-tcp или --filter-udp, то необходимости в той строке уже нет?</p></td><td>2024-10-23T16:05:20.914Z</td></tr><tr><td>bolvan</td><td><p>Верно</p>
<aside class="quote no-group" data-username="notAlx" data-post="1794" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/a698b9/48.png" class="avatar"> notAlx:</div>
<blockquote>
<p>А если на всех стратегиях есть --hostlist или вообще нет стратегий без конкретного указания --filter-tcp или --filter-udp, то необходимости в той строке уже нет?</p>
</blockquote>
</aside>
<p>Тогда оно упадет в profile 0, и будет тот же самый эффект.<br>
Но надо помнить еще про autohostlist. Он приоритетен, может упасть туда</p></td><td>2024-10-23T16:12:43.522Z</td></tr><tr><td>viveler</td><td><p>каким то образом после блокчека заработал preset_russia с <a href="http://x.com" rel="noopener nofollow ugc">x.com</a></p>
<p>незнаю как но спасибо</p></td><td>2024-10-23T17:36:26.230Z</td></tr><tr><td>Crab_malevi4</td><td><p>Доброго дня, сегодня отвалился <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> во вкладке Network в хроме вот такое - (failed) net::ERR_CONNECTION_RESET.<br>
Как вообще проверить по ip его забанили или как? Потому как все адреса связанные с ютубом работают, и этот также работал 2 дня назад и вдруг перестал резко. Пользуюсь сборкой Zapret-а YTDisBystro от KDS-а если что</p></td><td>2024-10-23T19:10:53.087Z</td></tr><tr><td>SanSerg(Сергей)</td><td><p>Первая проверка ping <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a><br>
обычно если блок прямо по IP То и пинг не работает. Еще обратить внимание на то какой IP будет.<br>
можно еще проверить nslookup <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> и IP должен быть один из “реальных” IP этого адреса, а не подставленный провайдером левый например. Список всех “реальных” IP можно найти скриптом IPFinder от <a class="mention" href="/u/ori">@Ori</a> .<br>
Хотя опять же это больше для того случая если НЕ включен DoH в браузере. А если включен, то проверять ping на тот IP к которому браузер обращается. Его можно увидеть в консоли разработчика F12<br>
Блок чисто по IP хорошо видно еще в Wireshrkе. Там видно что даже ответов на SYN нет. Но это всё частные случаи, у разных провайдеров может быть по разному всё.</p></td><td>2024-10-23T20:34:35.727Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1793" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Она нужна, чтобы udp 50000-50099 на адреса не из ipset discord не попало сюда</p>
</blockquote>
</aside>
<p>Я правильно понимаю, что если в эту строчку добавить <code>--filter-tcp=443</code>, то эффект по сути будет ровно тот же?<br>
<code>--filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto="%~dp0autohostlist.txt"</code></p></td><td>2024-10-23T20:56:20.662Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Парни, кто как мету обходит?<br>
У меня идет через autohostlist обход, а у друга он тупо не пашет, потому что оптоволокно, от ростелекомовского роутера идет кабель.<br>
Весь запрет работает, а вот инста и прочее от мета никак.</p></td><td>2024-10-23T21:17:15.362Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>dns-over-https в браузере или на уровне системы включен?<br>
blockcheck пытались прогонять по нужным доменам?</p>
<details>
<summary>
Спойлер</summary>
<p><a href="http://fbcdn.net" rel="noopener nofollow ugc">fbcdn.net</a><br>
<a href="http://fbsbx.com" rel="noopener nofollow ugc">fbsbx.com</a><br>
<a href="http://facebook.com" rel="noopener nofollow ugc">facebook.com</a><br>
<a href="http://instagram.com" rel="noopener nofollow ugc">instagram.com</a><br>
<a href="http://cdninstagram.com" rel="noopener nofollow ugc">cdninstagram.com</a></p>
</details>
<p>Примерный список доменов. Можете надёргать и из своего hostlist-auto, раз у вас всё работает. Если не поможет - можно занести домены с правильными айпишниками в hosts. Айпишники можно найти через этот скрипт.</p><aside class="quote quote-modified" data-post="116" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/116">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Как оказалось, в прошлой версии я сломал парсер, когда переписывал его для параллельных запросов. В итоге учитывались только результаты из 1 потока. 
Исправил. Также немного переделал систему тестирования найденных айпи. Добавил пинг, улучшил проверку редиректа (теперь он реагирует только на смену домена, редиректы из разряда google.com → www.google.com считаются безопасными). В целом сделал отображение покрасивше~ 
<a class="attachment" href="zapret-обсуждение-726/w0qAOCJ3XjjPZR6fJlNaRVmQZwj.cmd">IPfinder.cmd</a> (15,7 КБ) 
 <a class="lightbox" href="zapret-обсуждение-726/1037bc5fae2ca8cc9efff1b0a4a103d94df8c77d.png" data-download-href="https://ntc.party/uploads/default/1037bc5fae2ca8cc9efff1b0a4a103d94df8c77d" title="ffffff">[ffffff]</a>
  </blockquote>
</aside>
</td><td>2024-10-23T21:54:48.784Z</td></tr><tr><td>fresa</td><td><pre><code>--dpi-desync=split2 \
--dpi-desync-split-seqovl=1 \
</code></pre>
<p>работает всё, кроме главной <a href="http://instagram.com" rel="noopener nofollow ugc">instagram.com</a>. для твиттера отдельная стратегия понадобилась. ютубы через впн, там постоянно надо что-то чинить, а мне лень</p></td><td>2024-10-24T11:28:45.394Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="fresa" data-post="1802" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/fresa/48/11770_2.png" class="avatar"> fresa:</div>
<blockquote>
<p>ютубы через впн, там постоянно надо что-то чинить, а мне лень</p>
</blockquote>
</aside>
<p>Честно говоря не знаю что там постоянно надо чинить. У меня в целом стратегия для tcp-443 не менялась уже почти месяц и работает универсально на всё. И youtube, и facebook/instagram/x тоже.</p></td><td>2024-10-24T12:54:42.561Z</td></tr><tr><td>fresa</td><td><p>мета и трекеры, обходятся чуть ли не просто запуском запрета. для ютуба я для себя стратегию так и не нашёл, все блокчекеры говорят одно, но вижу я только фигу, а не котиков</p></td><td>2024-10-24T13:01:59.105Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А по инструкции отсюда подбирали?</p><aside class="quote quote-modified" data-post="1" data-topic="10060">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060">Подбор рабочего конфига для GGC ютуба через blockcheck</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Примечание: На время проверки нужно отключить  фаерволл / брандмауэр / антивирус. 
Если до этого стоял goodbyedpi, то запустить от имени администратора service_remove.cmd 

Скачать и распаковать архив с zapret (автор bolvan) <a href="https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret-win-bundle/archive/refs/heads/master.zip</a>

<details><summary>Примечание для системы x32 либо windows 7:</summary>На x32 zapret не работает, а на windows 7 нужно скопировать файлы WinDivert.dll и WinDivert64.sys из папки x86_64\ с goodbyedpi и заменить в zapret-е в 2 мес…</details>
  </blockquote>
</aside>
</td><td>2024-10-24T13:27:30.430Z</td></tr><tr><td>fresa</td><td><p>спасибо за советы, но мне не интересно это, у меня есть впска. я просто челу написал как работает у меня, я не искал стратегию для себя</p></td><td>2024-10-24T13:34:24.137Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Кол-во рабочих стратегий, находимых блокчеком на моем прове, с каждом днем все меньше и меньше. А те, которые найдены, на деле без добавления десятка повторов практически неработоспособны. У меня на два оставшихся кое-как обходимых провайдерских ggc нашлось сегодня только это для tls v1.3:</p>
<p>первый</p>
<pre><code class="lang-auto">--dpi-desync=split --dpi-desync-fooling=badseq
--dpi-desync=fake,split --dpi-desync-ttl=3 --dpi-desync-fake-tls=0x00000000
--dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-fake-tls=0x00000000
--dpi-desync=split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3
--dpi-desync=fake,split --dpi-desync-ttl=1 --dpi-desync-autottl=1 --dpi-desync-fake-tls=0x00000000
--dpi-desync=fake,split --dpi-desync-ttl=1 --dpi-desync-autottl=3 --dpi-desync-fake-tls=0x00000000
--dpi-desync=fake,split --dpi-desync-ttl=1 --dpi-desync-autottl=5 --dpi-desync-fake-tls=0x00000000
--dpi-desync=syndata,split2
</code></pre>
<p>второй</p>
<pre><code class="lang-auto">--dpi-desync=fake,split --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=0x00000000
--dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=2
--dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4
--dpi-desync=fake,split --dpi-desync-ttl=1 --dpi-desync-autottl=3 --dpi-desync-fake-tls=0x00000000
</code></pre>
<p>Из них более-менее уверенно работает только:<br>
<code>--dpi-desync=split --dpi-desync-fooling=badseq,md5sig --dpi-desync-repeats=13</code></p></td><td>2024-10-25T08:33:21.602Z</td></tr><tr><td>abc555</td><td><p>Столкнулся с арчером с7 v4 и нихрена не получилось чтоб работал запрет на nftables пробовал, главное на арчере с20 v4 всё чётко и все те же настройки, всё тоже самое на c7 нифига не завелись, та и вообще он как то работает неправильно сам по себе. В общем к чему я клоню, к тому что у каждой модели свои косяки. Похоже что с дровами от wrt какие то проблемы судя по его работе, но так как роутер не мой, решать вопрос не хочу. Просто хочу сказать, чтоб вы не думали что купите новый какой не будь роутер и всё будет хорошо. Если он без запрета работает со странностями, то ставя запрет, вы вообще ничего не поймёте что происходит. Я просто натыкался на коменты, типа что за фигня, а фигня как раз в самом роуторе изначально и запрет тут явно не приделах )</p></td><td>2024-10-25T09:08:25.237Z</td></tr><tr><td>abc555</td><td><p>Без unzip я ещё не пробовал, но спасибо, минус 100 кб как раз то что надо, следующую сборку попробую</p></td><td>2024-10-25T09:17:39.497Z</td></tr><tr><td>abc555</td><td><p>Поюзал немного tpws, действительно обратная фрагментация работает, но вернулся обратно на nfqws, у меня удалось на nfqws настроить хорошо, случайно конечно получилось, но работает нормально, хрен с этой фрагментацией. Возможно надо было ещё бороться, но терпения не хватило, может когда не будь потом. Для меня это спортивный интерес, сама задача сделать, когда включаешь мозг и заставляешь его работать на приделе, до такой степени, что он начинает закипать, перебирая все вероятности за короткий промежуток времени, всплеск адреналина ускоряет работу мозгов до сумасшедших скоростей, не обычное ощущение. Меня это чисто прикалывает )</p></td><td>2024-10-25T09:36:52.191Z</td></tr><tr><td>bolvan</td><td><p>Да, нюансы бывают, но обычно со знаниями можно понять что там не так.<br>
Без знаний примерно так и будет как у вас.</p></td><td>2024-10-25T09:38:17.972Z</td></tr><tr><td>abc555</td><td><p>Согласен, но я бывает быстрее на годы по своей специальности конечно опережаю любого конкурента, подобную тактику применяю так же к примеру в роутере, то что другие будут учить годами и так и не выучат, я схаваю за три дня, потом правда надо дать остыть башке, винчик, желательно домашний хорошо решает эту проблему, стереть воспоминания )</p></td><td>2024-10-25T09:44:53.704Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1807" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p><code>--dpi-desync-fake-tls=0x00000000</code></p>
</blockquote>
</aside>
<p>На моем провайдере в последнее время хорошо себя показывает трехбайтовый фейк 160303. Потестите, может у вас похожая ситуация.</p></td><td>2024-10-25T10:31:01.898Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А попробуйте так. Пропишите в <code>blockcheck.sh</code> (лежит в <code>zapret-win-bundle/blockcheck/zapret/</code>) в начало файла (после <code>#!/bin/sh</code>) вот это и прогоните ещё раз blockcheck (только пути у вас свои будут, обязательно без пробелов сделать).</p>
<pre><code class="lang-auto">PKTWS_EXTRA="--dpi-desync-fake-tls=C:\Soft\zapret-win-bundle\fake\tls_clienthello_drive_google_com.bin --dpi-desync-fake-quic=C:\Soft\zapret-win-bundle\fake\quic_initial_www_google_com.bin" 
</code></pre>
<p><a class="attachment" href="zapret-обсуждение-726/qRWO7ltlGpKMOLasGg1Jk3Kqf1b.bin">tls_clienthello_drive_google_com.bin</a> (316 байтов)<br>
<a class="attachment" href="zapret-обсуждение-726/avkz3vEm5j136Kzl6KqCOfgRdcV.bin">quic_initial_www_google_com.bin</a> (1,2 КБ)</p></td><td>2024-10-25T11:23:53.922Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><aside class="quote no-group" data-username="abc555" data-post="1812" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>то что другие будут учить годами и так и не выучат, я схаваю за три дня</p>
</blockquote>
</aside>
<p>Вы говорите глупости. Решают не голые знания, а опыт, который вы за три дня никак не получите. Можно ускорить его получение, но не слишком сильно. Вы на первой же нестандартной ситуации поплывете.</p></td><td>2024-10-25T11:44:00.892Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>С нулевыми фейками у меня показывают себя лучше.<br>
А ggc по h3 уже месяц как недоступны и ничем не пробиваются при любых quic-фейках.</p></td><td>2024-10-25T11:55:35.371Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Что же у вас за такой злостный провайдер, прямо заинтриговали <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"></p></td><td>2024-10-25T11:58:07.357Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>И правда. Особенно любопытно, что даже quic блокируется.</p></td><td>2024-10-25T12:11:17.761Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="Ori" data-post="1813" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>трехбайтовый фейк 160303</p>
</blockquote>
</aside>
<p>К сожалению, не лучше обычного.</p>
<aside class="quote no-group" data-username="minecrafter" data-post="1817" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/minecrafter/48/15060_2.png" class="avatar"> minecrafter:</div>
<blockquote>
<p>злостный провайдер</p>
</blockquote>
</aside>
<p>УГМК. С 19 сентября где-то YT стал выдавать 2 провайдеровских ggc, обходимый только по tcp, и кучу московских, которые ничем никак по tcp/udp не обходятся. И самая обида, что к зарубежным серверам, которые здесь товарищи иногда постят, у меня прекрасно по h3 цепляет курлом, но таких мне YT не выдает.</p>
<p>Если совсем зажмет, придется, наверное, на ТТК возвращаться, хоть там и дороже, но там до сих пор просто split2 работает без ничего.</p></td><td>2024-10-25T12:13:01.502Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1819" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>хоть там и дороже, но там до сих пор просто split2 работает без ничего.</p>
</blockquote>
</aside>
<p>Скупой платит дважды(с) <img src="https://ntc.party/images/emoji/twitter/anguished.png?v=12" title=":anguished:" class="emoji" alt=":anguished:" loading="lazy" width="20" height="20"></p></td><td>2024-10-25T12:40:39.435Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Смена прова была за пару лет до блокировки YT, все остальные ресурсы здесь обходятся запретом тривиально, стратегия не меняется годами.</p></td><td>2024-10-25T12:45:24.670Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Все остальные ресурсы блокируются тривиально. Нет ни одного ресурса, который бы блокировался так же жестко как гуглевидео, в том числе и экспериментальными методами. Которые вас, судя по всему и коснулись.<br>
А РТК у вас нету там что ли?</p></td><td>2024-10-25T12:47:24.228Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><aside class="quote no-group" data-username="minecrafter" data-post="1822" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/minecrafter/48/15060_2.png" class="avatar"> minecrafter:</div>
<blockquote>
<p>А РТК у вас нету там что ли?</p>
</blockquote>
</aside>
<details>
<summary>
оффтопик</summary>
<p>У друга ртк, не сильно лучше моего. Какие сервера ggc у него выдаются, я не исследовал, но стабильного воспроизведения у него нет при подобранных стратегиях, то не сразу стартует, то затыкается на середине. И это не считая выше тарифа, разовой платы за подключение (у остальных бесплатно) и лишней железки в доме, за которую тоже отстегивай.</p>
</details></td><td>2024-10-25T13:03:47.193Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Понял вас.</p></td><td>2024-10-25T13:06:50.294Z</td></tr><tr><td>rem</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a></p>
<blockquote>
<p><a href="https://ntc.party/t/zapret-whats-new/61/163" class="inline-onebox">Zapret: what's new - #163 by bolvan</a></p>
</blockquote>
<p>Дело нужное!<br>
Надеюсь в <a href="https://github.com/remittor/zapret-openwrt" rel="noopener nofollow ugc">zapret-openwrt</a> придётся не очень многое изменять.</p></td><td>2024-10-25T13:09:44.196Z</td></tr><tr><td>bolvan</td><td><p>Немного. Несколько переменных ушло, на место пришли другие. Чуть побольше. А может и поменьше, если учитывать все эти специализации под http, https, https, quic , суффиксы</p></td><td>2024-10-25T13:23:00.874Z</td></tr><tr><td>abc555</td><td><p>А если я не хочу чтоб работало http, quic, нужно только https, то никак не отключить теперь ?<br>
Вы бы архивы версий сохраняли, чтоб вдруг не понравится и можно было старую скачать</p></td><td>2024-10-25T13:27:42.267Z</td></tr><tr><td>bolvan</td><td><p>Новый вариант дает больше возможностей, но они теперь реализованы не в лоб.<br>
Если нужен только https - достаточно оставить перехват порта tcp 443. Это практически winws для linux.<br>
Версии доступны в тэгах</p></td><td>2024-10-25T13:36:49.564Z</td></tr><tr><td>bolvan</td><td><p>В последней версии сделан параметр POSTNAT=0 в конфиге<br>
Если его раскоментировать, появятся IP клиентов в логе.<br>
Но перестанет работать datanoack fooling и ipfrag для проходящих запросов через роутер.</p></td><td>2024-10-25T13:49:33.927Z</td></tr><tr><td>bolvan</td><td><p>Еше может быть сложность с поддержкой многострочного присвоения переменных в конфиге,<br>
Такое теперь норма :</p>
<pre><code class="lang-auto">TPWS_SOCKS_OPT="
--filter-tcp=80 --methodeol &lt;HOSTLIST&gt; --new
--filter-tcp=443 --split-tls=sni --disorder &lt;HOSTLIST&gt;
"
</code></pre>
<p>Это выпарсивается и реплейсится с помощью sed-скриптов. См common/installer.sh<br>
Реплейс, увы, работает только с одной строкой. Заменяет одну или много на одну. Иначе там огород усложняется.<br>
В инсталяторе у меня оно при редактировании снова разделяется на строки после --new. Чисто на уровне представления и редактирования. Тоже самое можно в люське сделать</p></td><td>2024-10-25T14:22:44.598Z</td></tr><tr><td>uwu(uwu)</td><td><p>а есть какой нибудь легкий способ сделать чтобы хекс принимал рандомное значение? (при каждом client hello)<br>
то есть 0x16030102920100028e0303+[random]<br>
или в этом нет смысла?</p></td><td>2024-10-25T16:31:06.213Z</td></tr><tr><td>bolvan</td><td><p>дефолтный tls fake рандомизируется по хостнейму в SNI и некоторым другим полям<br>
абы какая рандомизация может привести к нестабильности. то работает, то нет</p></td><td>2024-10-25T16:33:46.060Z</td></tr><tr><td>uwu(uwu)</td><td><p>с дефолтным к сожалению не работает<br>
т.е вот так не работает:</p>
<details>
<summary>
Спойлер</summary>
<p><code> --dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-ttl=5</code></p>
</details>
<p>а вот так работает (причем с подобными хекс фейками работает просто идеально):</p>
<details>
<summary>
Спойлер</summary>
<p><code>--dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fake-tls=0x16030102920100028e03035672ea15594162966e8a144297c497ddace5d546af7a4a0414a946fa52023cf720b0220c217abb1db321abbf01985cf3d07c61367c2ba5eff307b0f6f042448077 --dpi-desync-ttl=5</code></p>
</details>
<p>если я правильно понимаю, что значит “дефолтный” tls fake</p></td><td>2024-10-25T16:45:23.916Z</td></tr><tr><td>bolvan</td><td><p>Дефолтный значит тот, что применяется при отсутствии --dpi-desync-fake-tls</p></td><td>2024-10-25T16:57:18.395Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>пользуюсь winws в win7x64sp1</p>
<p>всё работает на первый взгляд</p>
<p>но наблюдаю определённые траблы с DoH который в хром встроенный</p>
<p>т.е. толи чебурнилы сам посебе doh блочат но winws его пробивает но неуверенно толи сам winws работая на 443 этот самый doh поламывает</p>
<p>суть в том что при включённом doh на всё медленнее реакция - хотя казалосьбы хвастались что наоборот. вплоть до dnserr<br>
и что точно всегда с doh не успевает запускаться holavpn(тоже хромный как расширение) т.е. при старте хрома он сцука хочет чтото от своего сервака и только получив это “чтото” стартует в том числе список сайтов на которых грузится<br>
но “не успевает”  и закладки через hola с прошлого раза грузятся “напрямую”<br>
а без doh “успевает” и они же через hola запускаются</p>
<p>отсюда вопрос кто-нибудь представляет алгоритм проверки проблем с doh?</p>
<p>может более другая стратегия нужна? текущая открывает всё блоченное (но по вариантам checkblock она не единственная)</p>
<p>doh он всегда только на 443? а адрес как узнать? то что выбираешь в хроме 8.8.8.8 или 1.1.1.1 или даже 9.9.9.9 - нихрена в реальности ни такие судя по сниферу(m$ net mon)</p></td><td>2024-10-25T20:50:41.119Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="Quqas" data-post="1835" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>но наблюдаю определённые траблы с DoH который в хром встроенный</p>
</blockquote>
</aside>
<p>Ну, можно simpledns crypt поставить и настроить DOH system-wide. А проверить какой dns используется можно например тут - <a href="https://one.one.one.one/help/" class="inline-onebox" rel="noopener nofollow ugc">1.1.1.1 — One of the Internet’s Fastest, Privacy-First DNS Resolver</a></p>
<details>
<summary>
Спойлер</summary>
<p><img src="zapret-обсуждение-726/902990ac7249977e19adfc13fa72cfa8f7fba2f5.png" alt="image" data-base62-sha1="kzjO8mEkjVWZjpppGdQ74jBCnT7" width="581" height="357"></p>
</details></td><td>2024-10-26T02:47:45.823Z</td></tr><tr><td>KDS</td><td><p>Это не так работает. Для проверки HTTPS надо прописывать фейк с клиентхелло. Для проверки квика - фейк квика. В указанном вами случае блокчек просто будет подставлять к каждой стратегии в конец эти 2 параметра, что смысла вообще не имеет.</p></td><td>2024-10-26T03:11:19.927Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Но фактически-то использоваться будет только в определённых стратегиях. Так что вроде не должно это ничего ломать при проверке.</p></td><td>2024-10-26T03:59:21.742Z</td></tr><tr><td>KDS</td><td><p>Ну, по логике не должно, ибо ключ с фейком tls не должен работать на UDP, а ключ с фейком квика - на TCP. Но как там оно на самом деле - неизвестно. Но если так - то конечно не будет ничего страшного, тут вы правы.</p></td><td>2024-10-26T04:17:22.331Z</td></tr><tr><td>bolvan</td><td><p>Очень даже известно.<br>
Есть fake для unknown tcp и unknown udp пейлоада. Остальные задействуются только как реакция на пакет или серию пакетов определенного распознанного протокола</p></td><td>2024-10-26T06:49:59.154Z</td></tr><tr><td>lsblk</td><td><aside class="quote no-group" data-username="bolvan" data-post="1732" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>–dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq,md5sig</p>
</blockquote>
</aside>
<p>Так работает, спасибо! Сегодня установил сабж на свежий роутер с актуальной прошивкой и nftables, гляжу, а тут обновление, переделал конфиг под новый формат. В целом всё работает на этой стратегии, но спустя неделю тестов наблюдается время от времени нестабильность всё же. По этому хотелось уточнить:</p>
<ol>
<li>Куда пишется лог дебага? Задал переменную включения дебага, но лог так и не нашел)</li>
<li>Возможно ли задать в blockcheck исключения для некоторых стратегий? А то очень много времени уходит на отрабутку всего, особенно если задать повторы 5+</li>
</ol></td><td>2024-10-26T07:19:56.552Z</td></tr><tr><td>bolvan</td><td><ol>
<li>Если демон не запускается отдельно, можно делать так --debug=syslog --debug=@filename. Первый вариант - чтение по logread | grep nfqws или logread | grep tpws . Второй очевиден</li>
<li>Исключения задать нельзя, но можно использовать переменные-модификаторы<br>
<code>SKIP_TPWS=1 CURL_MAX_TIME=1 CURL_MAX_TIME_QUIC=2 ./blockcheck.sh | tee /tmp/blockcheck.txt</code><br>
или использовать quick режим - до первой рабочей стратегии</li>
</ol></td><td>2024-10-26T07:41:17.715Z</td></tr><tr><td>lsblk</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="1842" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>–debug=syslog --debug=@filename</p>
</blockquote>
</aside>
<p>Всё понял, включить дебаг мало, нужно конкретно указать, куда его выводить, если запускаю его из конфига. Проверил щас, работает!</p>
<aside class="quote no-group" data-username="bolvan" data-post="1842" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Исключения задать нельзя, но можно использовать переменные-модификаторы</p>
</blockquote>
</aside>
<p>Принял. Просто у меня проверяются как заведомо нерабочие, например datanoack в различных вариациях (я за провайдерским натом), так и нежелательные, вроде --wssize 1:6, которые, как я понял, лучше не юзать, если есть рабочие варианты без них т.п.</p>
<p>По поводу нестабильности ещё, тут даже уже не запрету, провайдерам и ркп вопросы, а к уже гуглу наверно больше, например пару дней как ютуб в браузере начал после пары минут воспроизведения стабильно выдавать: "Something went wrong. Refresh or try again later. "</p></td><td>2024-10-26T07:59:22.195Z</td></tr><tr><td>bolvan</td><td><p>С ютубом такая хрень у всех творится, потому что РКН прицельно работает особым образом по части GGC. Потому как повезет.<br>
Надо открывать F12 в броузере и тыкать на множество видео, смотря где ошибки на *.googlevideo.com. И их чекать, находя потом общий знаменатель. Не забывая про специальные фейки tls и quic, подставляя их в PKTWS_EXTRA<br>
В остальном в блокчеке есть множественные попытки для нахождения стабильных стратегий</p></td><td>2024-10-26T08:01:13.031Z</td></tr><tr><td>lsblk</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="1844" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Не забывая про специальные фейки tls и quiс</p>
</blockquote>
</aside>
<p>Кстати, вот здесь интересное наблюдение имеется. У меня в хроме отключен http3 и kyber, использую его чисто ради проверки ютуба с запретом. Так вот там на голом http1.1 ютуб работает порой стабилней, чем на лисе с quic-ом.</p></td><td>2024-10-26T08:09:56.755Z</td></tr><tr><td>bolvan</td><td><p>Если там значится http/1.1, это не значит, что нет TLS<br>
Это тоже https. Щас без https уже никто практически не работает.<br>
А что под TLS сидит не так важно.</p></td><td>2024-10-26T08:11:08.285Z</td></tr><tr><td>i-no(...)</td><td><p><code>daemon.err nfqws[12345]: dpi-desync-repeats must be within 1..20</code></p>
<p>Есть ли возможность рассмотреть увеличение лимита <code>--dpi-desync-repeats</code> выше 20 для nfqws хотя бы?</p>
<p>Например, мне не хватило 20 чтобы пробить РТК с помощью nfqws отдельной стратегией на *.googlevideo.com  на TCP:443</p>
<p><code>--dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=20 --dpi-desync-autottl</code></p>
<p>но удалось пробить докидыванием +10 повторов таким же методом с помощью winws. Важен именно TCP/TLS т.к. внешний плеер не доступается к GV через QUIC, который, к слову, работает без проблем в браузере.</p>
<p>(Кстати, тут вероятен суточный фактор, похоже, что режим работы “их” аппаратуры подстраивается под интенсивность и массовость ютубосмотрения в сторону ужесточения, затем всё возвращается к более спокойным настройкам)</p></td><td>2024-10-26T08:57:24.971Z</td></tr><tr><td>bolvan</td><td><p>Эти 20 легко в исходниках подредактировать или закоментить проверку.</p>
<pre><code class="lang-auto">		case 21: /* dpi-desync-repeats */
			if (sscanf(optarg,"%u",&amp;dp-&gt;desync_repeats)&lt;1 || !dp-&gt;desync_repeats || dp-&gt;desync_repeats&gt;20)
			{
				DLOG_ERR("dpi-desync-repeats must be within 1..20\n");
				exit_clean(1);
			}
			break;
</code></pre>
<p>Лимит был поставлен, чтобы не засунули туда чудовищные значения и не создали супер-флуд от непонимания.<br>
Если действительно убедитесь, что 30 работает, увеличу до 50</p></td><td>2024-10-26T09:05:04.842Z</td></tr><tr><td>abc555</td><td><p>У вас какая то не понятная стратегия, я замечал при использовании гудбая, если установить autottl, та или в ручную поставить ttl, то начинается флуд, от провайдера приходят icmp, старайтесь вообще не использовать функцию ttl, только уже в самом крайнем случаи, та и не знаю как у вас, у меня через гудбай если пробивать толку от неё нет вообще, она уже давно не эффективна, летом работала, с час они сто то там поменяли, не --dpi-desync=split, а попробуйте --dpi-desync=fake,split2 и так параметр, за параметром, лишнего не стоит так от лишь бы было и что попало.<br>
То что я методом тыка подбираю себе, но я сначала пробиваю через гудбай, через лаунчер и примерно понимаю что делать дальше, я не просто в тупую от фонаря, а понимаю что делаю, тестируя по параметру в отдельности, а потом устанавливаю цепочку последовательности.<br>
У меня забиты в браузере разные сайты, которые работают от разных параметров по отдельности и я юзаю эти параметры и потом совмещаю их вместе</p></td><td>2024-10-26T09:15:39.869Z</td></tr><tr><td>bolvan</td><td><p>У вас каша в голове.<br>
ttl сам по себе ничего не делает. это один из ограничителей для фейков, чтобы они не дошли до сервера. В отличие от гудбая, где опция ttl заводит фейк. В zapret это не так.<br>
icmp expired in transit - нормальное явление на пакеты с ограниченным TTL</p></td><td>2024-10-26T09:30:04.322Z</td></tr><tr><td>abc555</td><td><p>Раньше через гудбай просто включаешь авто ttl в лаунчере, ну мне так удобней и некоторые сайты начинают работать, не включаешь больше ничего, только авто ttl, но начинает от провайдера с его ip адресов сыпаться icmp, лавинами, поэтому лично я отказался от использования ttl вообще, стал подбирать другие варианты и флуд icmp больше не беспокоит.<br>
В запрете я не знаю, проверить не могу, не знаю как.<br>
Как на уровне роутера проверить что он там делает, я понятия не имею, вижу только подключения, порты какие он использует, а так, как проверить, Wireshark тут уже не поможет.<br>
Разве только подключить его к другому роутеру и возможно что нить можно увидеть тогда, есть флуд или нет, но я так ещё не пробовал.<br>
Раньше ещё когда пользовался стандартной прошивкой, я так и делал, проверял, не открыт ли у него порт или ещё что не будь, искал уязвимости, перед тем как подключить его напрямую в сеть и некоторые модели не оправдали моего доверия и я отказался от них, потом уже перешел на wrt, так юзал, проверял, досил его и вроде как тягу он выдержал и только тогда подключил его на прямую</p></td><td>2024-10-26T09:34:49.331Z</td></tr><tr><td>bolvan</td><td><p>tcpdump есть для этих целей</p></td><td>2024-10-26T09:48:45.614Z</td></tr><tr><td>abc555</td><td><p>Ну им ещё надо уметь пользоваться, уметь читать логи, не всё так просто )<br>
Если всему этому научится, то можно идти в нэт кантору работать смело как специалист )<br>
Если бы они ещё платили нормально, то так бы и сделал )<br>
Не знаю как где, но у нас такие дремучие работают, полный ноль, я общался с многими, там действительно одна каша в голове и никакой фантазии )<br>
Они даже кабель не в состоянии  протянуть по уму, так всё на пох делают как им удобней.<br>
И с час реклама идёт, “набираем в школу it”, кого вы набираете, кого попала и что попало, как минимум один на тысячу который возможно осилит и какова вероятность что он придёт учится, возможно толковый такой выберет что нить с бизнесом, так как капуста сразу, а не потом может быть, поэтому никого они не найдут никогда, ну имею введу нормального кто действительно осилит )</p></td><td>2024-10-26T09:50:42.928Z</td></tr><tr><td>electrifying</td><td><p>А где можно скачать сборку со старым скриптом, а не новым? Разобрался<br>
Кстати, а почему установка и конфиг поменялись? В старой что-то было не так? У меня просто старая версия раскатана нужно ли обновляться до совсем новой?</p></td><td>2024-10-26T13:57:51.310Z</td></tr><tr><td>bolvan</td><td><p>Есть соседняя тема whatsnew. Там описаны все причины.<br>
Если кратко, то старая конфигурация была расcчитана на старый вариант без мультистратегий, и народ начал им злоупотреблять после их введения. + добавлена гибкость в настройке и облегчен перенос конфигов с винды</p></td><td>2024-10-26T15:11:46.600Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Хотел проверить версию с больше чем 20 репитсами.<br>
Поменял и поставил в стратегии 40 репитсов:</p>
<pre><code class="lang-auto">		case 21: /* dpi-desync-repeats */
			if (sscanf(optarg,"%u",&amp;dp-&gt;desync_repeats)&lt;1 || !dp-&gt;desync_repeats || dp-&gt;desync_repeats&gt;100)
			{
				DLOG_ERR("dpi-desync-repeats must be within 1..100\n");
				exit_clean(1);
			}
			break;
</code></pre>
<p>а в логе (дебаг) все равно пишет:</p>
<blockquote>
<p>dpi-desync-repeats must be within 1…20</p>
</blockquote>
<p>Вроде больше нигде проверку на repeats&gt;20 не нашел, только если внутри бинарника она</p></td><td>2024-10-26T16:39:13.233Z</td></tr><tr><td>bolvan</td><td><p>А компилировать кто будет ? Это не шелл скрипт, а код на C</p></td><td>2024-10-26T17:04:58.828Z</td></tr><tr><td>SickTH</td><td><p>Простите за глупый вопрос, но можно, пожалуйста, какой-нибудь пример флуда в вайршарке? Чтобы знать чего избегать.( и чтобы вы не ругались <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> ) Просто посматривая туда я не наблюдаю какой-то огромной стены пакетов нескончаемой…но вдруг что-то упускаю.</p></td><td>2024-10-27T00:03:58.318Z</td></tr><tr><td>cptLamar</td><td><p>Получилось собрать конфиг для нового zapret на openwrt на основе сборки <a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B5-%D0%BF%D0%B8%D1%88%D0%B8%D1%82%D0%B5-%D1%81%D1%8E%D0%B4%D0%B0-%D0%BD%D0%B8-%D0%BF%D1%80%D0%BE-%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B8-%D0%BD%D0%B5-%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D0%B2-1-%D0%B9-%D0%BF%D0%BE%D1%81%D1%82-%D1%82%D0%B5%D0%BC%D1%8B/11624/">YTDisBystro</a></p>
<details>
<summary>
Summary</summary>
<pre><code class="lang-auto">NFQWS_ENABLE=1
NFQWS_PORTS_TCP=80,443,50000-50090
NFQWS_PORTS_UDP=443,50000-50090
NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
--filter-tcp=80 --hostlist=/opt/zapret-lists/netrogat.txt --new                      
--filter-tcp=443 --hostlist=/opt/zapret-lists/netrogat.txt --new
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-youtubeQ.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtubeGV.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl
--filter-tcp=80 --hostlist=/opt/zapret-lists/russia-blacklist.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-blacklist.txt --hostlist=/opt/zapret-lists/myhostlist.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_c
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin -
--filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new                           
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new                                                        
--filter-tcp=443 --hostlist-auto=/opt/zapret-lists/autohostlist.txt --hostlist-exclude=/opt/zapret-lists/netrogat.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"
</code></pre>
</details>
<p><span class="bbcode-s">Возможно</span> 100%, некоторые параметры отсюда не работают или не имеют смысла) Мне главное, что оно работает и возвращает работоспособность дискорда и ютуба.</p>
<p>Из особенностей:</p>
<ol>
<li>Скопировал все hostlists из YTDisBystro в /opt/zapret-lists/</li>
</ol>
<ul>
<li>Сделал russia-blacklist.txt пустым, так как весит слишком много и содержит сайты, которые мне не нужны</li>
</ul>
<ol start="2">
<li>Скопировал quic_pl_by_ori.bin из YTDisBystro в /opt/zapret/files/fake</li>
</ol></td><td>2024-10-27T01:05:29.447Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>tcp на диапазоне 50000-50090 лишнее, это только для дискорда и только udp.<br>
ну и в целом я вижу некоторые опечатки.<br>
<code> --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_co--filter-udp=443</code><br>
<code>----filter-udp=50000-50090</code><br>
надеюсь тут видно что не так =)<br>
и ещё - раз вы сделали <code>russia-blacklist.txt</code> пустым, то там, где он всё же прописан, видимо правильнее будет использовать <code>hostlist-auto</code>, а не просто <code>hostlist</code>, иначе какой в этом смысл.<br>
То есть по идее как-то так.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">NFQWS_ENABLE=1
NFQWS_PORTS_TCP=80,443
NFQWS_PORTS_UDP=443,50000-50090
NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
NFQWS_OPT="
--filter-tcp=80 --hostlist=/opt/zapret-lists/netrogat.txt --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/netrogat.txt --new
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-youtubeQ.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtubeGV.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl --new
--filter-tcp=80 --hostlist-auto=/opt/zapret-lists/russia-blacklist.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new
--filter-tcp=443 --hostlist-auto=/opt/zapret-lists/russia-blacklist.txt --hostlist=/opt/zapret-lists/myhostlist.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --dpi-desync-cutoff=n2 --new
--filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new  
--filter-tcp=443 --hostlist-auto=/opt/zapret-lists/autohostlist.txt --hostlist-exclude=/opt/zapret-lists/netrogat.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"
</code></pre>
</details></td><td>2024-10-27T01:30:38.478Z</td></tr><tr><td>bolvan</td><td><p>Флуд возникает, когда на nfqws перенаправляется трафик без ограничения по connbytes, либо используется winws, тк на нем connbytes отсутствует по определению + задан --dpi-desync=fake|split|disorder и --dpi-desync-any-protocol без --dpi-desync-cutoff, особенно с --dpi-desync-repeats.</p>
<p>Будет примерно следующее<br>
оригинал<br>
ругань<br>
ругань<br>
ругань<br>
оригинал<br>
ругань<br>
ругань<br>
ругань<br>
оригинал<br>
ругань<br>
ругань<br>
ругань<br>
…<br>
до бесконечности<br>
Потому что ему сказали фейкать любой протокол. Чем он и занимается. Без разницы что ему дают, он на все кричит.<br>
Если указан split,split2,disorder,disorder2, ipfrag2 , то будет фрагментация каждого оригинала.<br>
Короче, применение стратегии будет по каждому пакету без ограничения. Канал upload будет зафлужен.</p></td><td>2024-10-27T08:06:59.813Z</td></tr><tr><td>SickTH</td><td><p>Спасибо. Cutoff просто задал в первый день, когда увидел ваше сообщение с недовольством ( но со своими “bird ideas” если понимаете о чем я. дурачок я в этом плане), а остальные найденные страты его вроде и не требуют тк нет any protocol. Стало чуть понятнее. В общем буду обращать внимание на вайршарк и ковыряться если что).</p></td><td>2024-10-27T09:00:37.145Z</td></tr><tr><td>abc555</td><td><p>Поставил новую версию запрета, настройки все те же поставил как и в предыдущей версии, но вроде даже получше стало работать, спасибо !</p></td><td>2024-10-27T12:18:38.453Z</td></tr><tr><td>cptLamar</td><td><p>Спасибо, что подсветили опечатки (у меня шизанулся терминал и начал криво копировать и вставлять текст). Почему-то с <code>--hostlist-auto</code> перестает работать дискорд, возможно, нужно, чтоб был выбран соответствующий режим фильтрации при установке, а при MODE_FILTER=none эти строки игнорятся. В итоге просто убрал этот хостлист из конфига, и всё работает.</p>
<details>
<summary>
Summary</summary>
<pre><code class="lang-auto">NFQWS_ENABLE=1
NFQWS_PORTS_TCP=80,443
NFQWS_PORTS_UDP=443,50000-50090
NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
NFQWS_OPT="
--filter-tcp=80 --hostlist=/opt/zapret-lists/netrogat.txt --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/netrogat.txt --new
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-youtubeQ.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtubeGV.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/myhostlist.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl --new
--filter-udp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --dpi-desync-cutoff=n2 --new
--filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new
--filter-tcp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new
--filter-tcp=443 --hostlist-auto=/opt/zapret-lists/autohostlist.txt --hostlist-exclude=/opt/zapret-lists/netrogat.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl"
</code></pre>
</details></td><td>2024-10-27T15:06:35.238Z</td></tr><tr><td>bolvan</td><td><p>Если нет маркера <code>&lt;HOSTLIST&gt;</code> в опциях, то MODE_FILTER никак не влияет на параметры запуска nfqws.<br>
Скрипты запуска не занимаются разбором и эвристикой вписанных опций.<br>
Кроме реплейса маркера там ничего нет.<br>
Еще есть проверка на запрещенный параметр --ipset.</p></td><td>2024-10-27T16:31:00.510Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote" data-post="166" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/166">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    В blockcheck сделана фильтрация только по IP:port тестируемого в настоящий момент домена. 
Все остальное больше не трогается. Не рушит на час работу броузера.
  </blockquote>
</aside>

<p><a class="mention" href="/u/bolvan">@bolvan</a>, огромное спасибо. Изменение прям 10/10 <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-27T16:53:33.122Z</td></tr><tr><td>Kolobok</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Ну, милок, что-то я не совсем поняла, отчего такой форс-пуш на коммит <code>2aaa2f7c</code> случился? Может, расскажешь, что там произошло, а то на старости лет я уже не соображаю, что за ветер в голове у молодёжи!</p></td><td>2024-10-28T06:47:34.984Z</td></tr><tr><td>bolvan</td><td><p>Просто чистка истории для облегчения репы на тэге v64.<br>
Все равно там нет совместной разработки . Нужно лишь перекачать репу.<br>
Тэги и релизы остались</p></td><td>2024-10-28T07:06:01.062Z</td></tr><tr><td>testing</td><td><p>А в чем смысол? Если надо, можно клонировать только последний коммит например, или гитхаб стал ругаться что репа слишком большая?</p></td><td>2024-10-28T07:50:38.614Z</td></tr><tr><td>bolvan</td><td><p>Можно сказать причина чисто косметическая.<br>
Может быть еще для кого-то, кто не знает о --depth 1<br>
Эта история вряд ли нужна. Там все равно никаких тэгов не было.<br>
Заодно подстегнет мейнтейнеров, если таковые имеются, опираться на тэги. Там могли быть ссылки на commit hash</p></td><td>2024-10-28T07:56:39.317Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="1868" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Просто чистка истории для облегчения репы на тэге v64.</p>
</blockquote>
</aside>
<p>Мде.<br>
Для облегчения всего репозитория это слишком радикальное решение!<br>
Есть утилиты, которые из версионной-истории локальной папки git позволяют вычистить всю историю для указанных файлов. Так вот можно было вычистить всю историчность для бинарей. А после этого всю эту патченную репу загнать на гитхаб.</p>
<p>При этом вся история для других файлов сохранилась бы.</p>
<p>Да даже после этого радикального действия директория с репозиторием весит те же 132МБ.</p></td><td>2024-10-28T11:38:08.415Z</td></tr><tr><td>abc555</td><td><p>У меня 400 кб всего занимает запрет, от куда у вас 132 мб ? Ну допустим список хостов, я его просто скачивал и он занимает почти 3 мб, а 132 что там у вас ? или я чего то не понимаю ? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-28T14:51:09.062Z</td></tr><tr><td>abc555</td><td><p>Я когда новый запрет устанавливал, удалилась старая версия и новая встала, место свободного осталось так же, прикольно, можно не сбрасывать настройки роутера чтоб очистить память, как я раньше делал.<br>
У меня правда всё по стандарту, никаких лишних путей не придумывал.<br>
Использую только zapret-hosts-user.txt</p></td><td>2024-10-28T14:54:43.101Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="abc555" data-post="1872" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>У меня 400 кб всего занимает запрет, от куда у вас 132 мб ?</p>
</blockquote>
</aside>
<p>Речь про результат вызова команды <code>git clone &lt;url&gt; ; git checkout &lt;commit-hash&gt;</code><br>
Именно это делает сборочная система OpenWrt.<br>
В будние дни сервера github довольно медленно отдают данные.</p>
<p>Благо сейчас можно по тэгу скачать сразу tgz готовый.</p></td><td>2024-10-28T15:03:11.610Z</td></tr><tr><td>abc555</td><td><p>Нормально всё работает у меня во всяком случаи, я использую команду wget -O<br>
я не устанавливал себе git, он много весит и поставить его мне некуда, та и git мне не нужен от слова совсем )</p></td><td>2024-10-28T15:05:32.975Z</td></tr><tr><td>rem</td><td><p>Да речь тут не о пользователях. А о разработчиках, которые используют git не только лишь с --depth 1</p></td><td>2024-10-28T15:06:55.344Z</td></tr><tr><td>abc555</td><td><p>Та я понял, мы на разных языках разговариваем, короче я не в теме, так и не понял о чём вы )<br>
Я не силён в терминах IT, когда в двух словах кто то скажет и что он имел введу, нужно догадываться, а сленг молодёжный где 2 слова связать не могут, для меня это сложно понять, это как в анекдоте, когда заика пришел в магазин за халвой, а купил хлеба )<br>
Я на форуме wrt бывает им рассказываю, а они не понимают, я им на пальцах уже показываю, а они всё равно не догоняют, то логи им, то ещё что нить, я им какие логи не весели, возьми да проверь сам, потом спустя время всё же до кого то доходит и говорят спасибо что нашел косяк ))<br>
Помню какой то лыган, спрашивал там, он мутил какую то фишку для блокировок и я по нику понял от куда он и с какой целью интересуется, отшил его сразу и все от него отморозились и никто ему так и не помог ))</p></td><td>2024-10-28T15:08:26.305Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>А как в новой версии конфига записать :–dpi-desync=split --dpi-desync-fooling=badseq --wssize 1:6   ?<br>
В предыдущей версии --wssize 1:6 прописывал в<br>
NFQWS_OPT_SUFIX  и кое как ТВ приставка шевелилась . Никакие другие варианты дурения, опубликованные здесь и <a href="https://github.com/bol-van/zapret/discussions/200" class="inline-onebox" rel="noopener nofollow ugc">Обход замедления youtube в России · bol-van/zapret · Discussion #200 · GitHub</a>  не работают.</p></td><td>2024-10-28T17:12:30.515Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
по идеи так и писать в строчку, до суфикса так было</summary>
<p>NFQWS_OPT="<br>
–filter-tcp=80 –dpi-desync=split --dpi-desync-fooling=badseq --wssize 1:6 --new<br>
–filter-tcp=443 –dpi-desync=split --dpi-desync-fooling=badseq --wssize 1:6 --new<br>
–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 <br>
"</p>
</details></td><td>2024-10-28T17:34:32.275Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Пробовал сразу же, после перехода на новую версию кода , не работает. Превъюшки появляются ,но при попытке запустить какой нить ролик YT -бесконечная загрузка.</p></td><td>2024-10-28T17:38:14.824Z</td></tr><tr><td>easyone11</td><td><p>а если старую версию поставить то с такими параметрами работает?</p></td><td>2024-10-28T17:39:22.532Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Я же писал ранее ,что  --wssize 1:6 прописанная через “суфикс” -работает. А tcp=80  и -udp=443 мне не надо. Сейчас прописано так:<br>
–filter-tcp=443 <br>
–dpi-desync=split<br>
–dpi-desync-fooling=badseq<br>
–wssize 1:6</p></td><td>2024-10-28T17:43:16.041Z</td></tr><tr><td>easyone11</td><td><p>дебажи тогда</p></td><td>2024-10-28T17:46:37.035Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>А на человечьем языке ?</p></td><td>2024-10-28T17:47:39.709Z</td></tr><tr><td>anon9001(anon)</td><td><p>Откладка</p></td><td>2024-10-28T17:51:33.819Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Зачем отлаживать в новой версии ,если работало в старой???</p></td><td>2024-10-28T17:55:45.157Z</td></tr><tr><td>bolvan</td><td><p>Я не особо силен в git. Предполагал, что это снесет весь старый мусор, но он все равно там остался, только невидимый<br>
Если подскажете как можно вычистить бинарии, будет здорово</p></td><td>2024-10-28T19:42:58.379Z</td></tr><tr><td>bolvan</td><td><p>wssize нет смысла писать для порта 80. DPI сечет TLS ServerHello. Ответ http ему сечь незачем.<br>
wssize только тормознет http</p></td><td>2024-10-28T19:45:27.103Z</td></tr><tr><td>bolvan</td><td><p>Конкретные значения параметров NFQWS_OPT и MODE_FILTER сообщите, на которых не работает wssize.</p></td><td>2024-10-28T19:48:17.268Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Застали врасплох. Переходил на предыдущую версию. Опять вернулся на новую, поэтому задержался с ответом.<br>
NFQWS_OPT:<br>
–dpi-desync=fake,disorder2<br>
–dpi-desync-autottl=2<br>
–dpi-desync-fooling=md5sig<br>
–new<br>
–filter-tcp=443 ˂HOSTLIST˃<br>
–dpi-desync=split<br>
–dpi-desync-fooling=badseq<br>
–wssize 1:6<br>
MODE_FILTER :hostlist</p></td><td>2024-10-28T20:37:43.373Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Приставка заработала в такой конфигурации<br>
NFQWS_OPT:–dpi-desync=split<br>
–dpi-desync-fooling=badseq<br>
–wssize 1:6</p>
<p>MODE_FILTER :hostlist<br>
Правда,ничего больше из домашних девайсов не работает ,но хоть что-то…</p></td><td>2024-10-28T22:07:45.301Z</td></tr><tr><td>easyone11</td><td><p>Понятно, в ридмишки такого вроде нет.<br>
А можешь пояснить как wssize не работает для хостлиста, но при этом работает с аутохост листом?<br>
Имеется ввиду что недоступные сайты будут заполнять ауто лист? для чего, если он действует с самого начала соединения, когда еще нельзя принять решение о попадании в лист. Или что то другое имется ввиду?</p></td><td>2024-10-29T04:23:23.609Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="drmirro" data-post="1890" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/drmirro/48/11337_2.png" class="avatar"> drmirro:</div>
<blockquote>
<p>NFQWS_OPT:<br>
–dpi-desync=fake,disorder2<br>
–dpi-desync-autottl=2<br>
–dpi-desync-fooling=md5sig<br>
–new<br>
–filter-tcp=443 ˂HOSTLIST˃<br>
–dpi-desync=split<br>
–dpi-desync-fooling=badseq<br>
–wssize 1:6<br>
MODE_FILTER :hostlist</p>
</blockquote>
</aside>
<p>Потому что hostlist, поэтому и не работает. Мне казалось уже все усвоили, что wssize и syndata с хостлистом не работает и не применяется на профилях, где есть хостлист и нет ауто-хостлиста.<br>
Иначе бы это привело к неоднозначности алгоритма. --hostlist a --wssize 1:6 --new --hostlist b --wssize 2:4 --new --hostlist -c --new . при условии незнания хоста неясно применять ли и если да, то какой<br>
Аналог суффикса - дописать --new --wssize 1:6<br>
Суффикс именно это и делал</p></td><td>2024-10-29T06:08:27.266Z</td></tr><tr><td>bolvan</td><td><p>Имеется в виду, что если аутолист, то процессинг идет по нему вне зависимости от того , есть ли домен в этом самом листе. Потому что чтобы в аутолист что-то попало, нужно сначала попробовать без дурения. А если домен  уже есть в аутолисте, то тем более надо выбирать этот профиль.<br>
Возможно, здесь моя небольшая недодумка. Наверно, надо было при условии отсутствия имени хоста скипать даже autolist профиль и застревать на нем при наличии любого имени хоста. Но уже как сделано, так сделано. Менять значит ломать совместимость<br>
В любом случае применение wssize никак не зависит от наличия чего-либо в хостлисте, потому что проверять нечего.</p></td><td>2024-10-29T06:14:34.074Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="1893" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Потому что hostlist, поэтому и не работает. Мне казалось уже все усвоили, что wssize и syndata с хостлистом не работает и не применяется на профилях, где есть хостлист и нет ауто-хостлиста.</p>
</blockquote>
</aside>
<p>приходят новые люди и каждый раз наступают на эти грабли так и дальше будет, ридмишка очень большая, сходу там разобраться и к тому же всё запомнить фактически не реально для людей отдалённых от сетевых технологий.<br>
Сделать бы какое-нибудь оповещение о нерабочих параметрах в строках было бы конечно мега круто, но я думаю тебе это не надо да и как это реализовать, если нет UI, оповещение в логах или в командной строке так же не поможет обычным пользователям, так что 0ая фаза так и будет мелькать, как и нерабочие параметры в udp которые полностью копируют с tcp.</p></td><td>2024-10-29T06:23:02.749Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="1894" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Наверно, надо было при условии отсутствия имени хоста скипать даже autolist профиль и застревать на нем при наличии любого имени хоста. Но уже как сделано, так сделано. Менять значит ломать совместимость</p>
</blockquote>
</aside>
<p>то есть при аутохостлисте wssize начинает работать только если сайт недоступен? Я думал 0ая фаза сразу начинает применения даже если сайт доступен.</p></td><td>2024-10-29T06:27:47.044Z</td></tr><tr><td>bolvan</td><td><p>Будет и будет, я с этим уже смирился. Оно неизбежно. Везде соломку не подложишь, свои мозги всем не вставишь. Защита от дурака имеет свои пределы.</p></td><td>2024-10-29T06:28:19.367Z</td></tr><tr><td>bolvan</td><td><p>Нет, wssize начинает работать всегда , потому что его действие начинается прямо с SYN пакета и заканчивается либо пробеганием пакета с TLS ClientHello, либо plain http request, либо при наступлении условия --wssize-cutoff. Это такая длительная процедура терапии, не единомоментная.<br>
В общем случае условия прекращения применения wssize могут смениться вместе с профилем, если мы работаем с произвольным протоколом, не основанном на http и tls.<br>
Вопрос здесь именно в выборе профиля для пакета.<br>
Если хоста у нас нет, то профили с hostlist не выбираются, но профиль с auto hostlist выбирается. И дальше начинает задействоваться его стратегия. Если там есть wssize, будет применен и он</p></td><td>2024-10-29T06:32:12.134Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Из тех , кто пользуется Вашей разработкой понимают, что они делают процентов 10. Остальные тупо копипастят конфиги у других. Я вхожу в эти 80%. Только вот все профили найденные в инете и из " коробки" у меня не работают. Я даже в Гугл раньше через VPN заходил. Тута IP “заграничный” , а “замедление” ЮТ похлесче ,чем в других регионах.</p></td><td>2024-10-29T06:43:21.751Z</td></tr><tr><td>bolvan</td><td><p>Я об этом пишу с самого начала. Что не получится просто так взять и …<br>
Хакерская методика, борются с ней, не дают работать, условия разные везде, гарантий нет, нужно исследовать каждый случай. Нет одной таблетки.</p></td><td>2024-10-29T06:44:26.294Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="drmirro" data-post="1899" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/drmirro/48/11337_2.png" class="avatar"> drmirro:</div>
<blockquote>
<p>Я вхожу в эти 80%.</p>
</blockquote>
</aside>
<p>А куда еще 10% потерялось? )<br>
Как не горько это признавать, но вы правы. Постой пример в конфиге для дискорда:<br>
<code>--dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-udplen-pattern=0xDEADBEEF</code></p>
<p>Никого тут ничего не смущает? Меня вот начало, с недавних пор, как я переключился с штудирования дурения TCP на аналогичное для UDP.</p></td><td>2024-10-29T06:55:10.272Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>А ,что в общем можно сказать , что ЮТ на  Zapret работает только с  --wssize 1:6 и только на ТВ приставке. На компе под Виндой только первые 19 сек.,после перезапуска ролик можно просмотреть до конца. Старые Смарт ТВ ( Sams &amp; LG) в полном ауте.</p></td><td>2024-10-29T06:58:42.410Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Остальные 10% только думают ,что они понимают ,что делают…</p></td><td>2024-10-29T07:01:06.692Z</td></tr><tr><td>Kolobok</td><td><p>Да ну, милок, что ж за глупости ты удумал-то! Если хочешь, чтоб репозиторий вперёд не рос, так не храни там всякую часто меняющуюся требуху, блобы те же самые. Вообще, по-хорошему бы выкинуть оттуда и прочую мелочёвку вроде <code>cygwin1.dll</code> - меньше мусора, легче порядок навести.<br>
Трунькай ты или ребейз делай, форс-пушь хоть сто раз - толку мало. Всё равно когда-нибудь весить он начнёт много мегабайт. Про мейнтейнеров - это всё ерунда, право слово. Есть код, а есть релизы, и это две большие разницы.<br>
Репозиторий git ведь нужен разработчикам, кто там сам код правит, собирает, отлаживает. Ну, и для железок с хорошими ресурсами, где можно запуллить, собрать с <code>-march=native -Os</code> и радоваться. А для всех остальных, особенно с точки зрения безопасности, лучше релизы с бинарями давай. Вот украдёт кто твои пароли или ещё что случится - под тегами появится совсем не то, что ты ожидал. А с релизами да хешами коммитов спокойно - всё на месте останется.</p>
<p>Что до размера-то репозитория… ты ж сам теги оставил! Смотри сам:</p>
<pre data-code-wrap="bash"><code class="lang-bash">$ git tag -l
v64
v65
v65.1
v66
</code></pre>
<p>А как думаешь, к каким коммитам эти теги привязаны? Правильно, к тем, что из <code>master</code> убрал, вместе со всей историей от начала веков. Хочешь облегчить репозиторий, так все теги сними, и локально, и на <code>remote</code>; рефлог подчисть, мусор собери, запушь, и будет тебе счастье - временно. Но пока блобы хранишь, беды всё равно не избежать…<br>
А если хочешь дело как следует сделать, так возьми да верни историю назад, всё подчисть, и собери по-человечески, без блобов этих. Репозиторий как архивный пометь, название ему новое дай, и создавай свеженький - начиная с той версии, что больше разрастаться не будет. Вот тогда, глядишь, и порядок будет, и всем хорошо.</p></td><td>2024-10-29T07:12:14.496Z</td></tr><tr><td>bolvan</td><td><p>Для ТВ всегда надо начинать с curl теста на TLS 1.2.<br>
Если он не проходит, значит старый ТВ скорее всего не заведется.<br>
Дальше надо смотреть использует ли ТВ quic. Приложение ATV для трубы стандартное сильно отличается от обычного приложения для трубы. Мне его даже на VPN не удалось завести под эмулятором.</p></td><td>2024-10-29T07:13:40.708Z</td></tr><tr><td>KDS</td><td><p>Вот только что человеку хотел написать - А что с квиком то? Он как бы точно есть на андроиде, да и браузер его по полной на ютубе использует. Если QUIC полностью заблочен (такое вообще где-нибудь бывает?) - так, думаю, как раз параметрами выше (только правильными) его можно разблокировать и пользоваться.</p></td><td>2024-10-29T07:17:43.184Z</td></tr><tr><td>bolvan</td><td><p>Окей, это немного проясняет ситуацию.<br>
Но откуда в релизах будут появляться бинарики ? Их же нельзя туда залить самому ?<br>
Надо писать actions. Который должен это собрать под кучу платформ, взять основное содержимое репы, добавить туда бинари в том виде, в котором они есть сейчас.<br>
Мне постили всякие половинчатые решения для actions, но никто не сделал так, чтобы не ломать текущую логику. Они делали просто бинарики. Но накой они мне нужны сами по себе ?<br>
Чтобы я теперь обьяснял всем, что нужно найти особые бинарики. А какие ? А куда положить ?</p>
<p>UPD. Тэги пересобрал руками по новым commit hash, релиз пересоздал на базе нового тэга.<br>
Старые тэги в мусорку. Репа стала 18 мб</p></td><td>2024-10-29T07:18:50.493Z</td></tr><tr><td>KDS</td><td><p>Так может для тех кто сам билдит, отлаживает и т.п. оставить все в этом репозитории, а все остальное - перекинуть в другой? В смылсе разделить никсовую и виндовую части. Многие же так делают.</p></td><td>2024-10-29T07:26:22.195Z</td></tr><tr><td>bolvan</td><td><p>Можно то можно, но этот новый репозиторий будет отличаться от старого только отсутствием C кода. Все остальное там быть должно. Шелл скрипты, иниты.<br>
Придется поддерживать когерентность.<br>
Мне кажется проще было бы сделать и правда через акшинс билд, но это сложно писать, я в этом вообще не разбираюсь. Пришлось бы щас заседать и изучать долго.<br>
Там придется делать для разных архитектур linux, под BSD, macos, cygwin.<br>
Если кто-то хотел бы действительно сделать полезное дело, кто шарит, это отдельная вполне независимая задача. Сильно бы помогло. Но только не так, как уже делали.</p></td><td>2024-10-29T07:30:25.439Z</td></tr><tr><td>punkmaster(Владимир)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/zhivem/DPI-Penguin">
  <header class="source">

      <a href="https://github.com/zhivem/DPI-Penguin" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/a294c5e859a7c01458e3d2d2bb464ac742f55131_2_690x344.png" class="thumbnail" data-dominant-color="E8EAEC">

  <h3><a href="https://github.com/zhivem/DPI-Penguin" target="_blank" rel="noopener nofollow ugc">GitHub - zhivem/DPI-Penguin: DPI Penguin — это графический интерфейс для...</a></h3>

    <p><span class="github-repo-description">DPI Penguin — это графический интерфейс для утилиты GoodbyeDPI и Zapret</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-10-29T08:13:54.177Z</td></tr><tr><td>Kolobok</td><td><aside class="quote no-group" data-username="bolvan" data-post="1907" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>UPD. Тэги пересобрал руками по новым commit hash, релиз пересоздал на базе нового тэга.<br>
Старые тэги в мусорку. Репа стала 18 мб</p>
</blockquote>
</aside>
<p>Вот и хорошо, да только временно: с каждым изменением в <code>/binaries/</code> репка будет расти большая-пребольшая, без внучки и Жучки не выпуллишь.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1907" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Мне постили всякие половинчатые решения для actions, но никто не сделал так, чтобы не ломать текущую логику. Они делали просто бинарики. Но накой они мне нужны сами по себе ?</p>
</blockquote>
</aside>
<p>Да, вот ты прав, у того же GoodbyeDPI действительно решение полумерное: бинарники собираются, а в релизах вдруг появляются хостлисты и скрипты, которых в самом репозитории нет. Но разве нельзя сделать всё нормально? Можно и релизы организовать по каждому тегу, и пререлизы по каждому коммиту.</p>
<p>Например, если делать по твоим тегам, без semver, но с нотацией <code>^v[\d.]*</code>, можно выставить вот такой триггер для основных релизов:</p>
<pre data-code-wrap="yaml"><code class="lang-yaml">on:
  push:
    tags:
      - 'v*'
</code></pre>
<p>Тогда каждый раз, когда создаётся тег, начинающийся с <code>v</code>, будет собираться релиз. Чтобы версию из тега получить, можно полагаться на <code>${GITHUB_REF#refs/tags/}</code>. А для создания релизов на GitHub удобно использовать официальную утилиту:<br>
<code>gh release create "${GITHUB_REF#refs/tags/}" --title "Релиз ${GITHUB_REF#refs/tags/}" --notes "Релиз моей замечательной программы zapret, собранный автоматически."</code></p>
<p>Если хочешь более готовое решение, есть такие варианты, например, <a href="https://github.com/softprops/action-gh-release" rel="noopener nofollow ugc">softprops/action-gh-release@v2</a>. Там всё проще пареной редьки, просто укажи что-то вроде:</p>
<pre data-code-wrap="yaml"><code class="lang-yaml">      with:
        prerelease: false
        files: |
          ./autobuild/arm64.tar.xz
          ./autobuild/openwrt-tpws-only.tar.gz
          ./autobuild/win32.zip
          и прочие файлики
</code></pre>
<p>И всё будет, как сейчас модно говорить, чики-пуки. Пререлизы тоже можно сделать, просто поменяй триггер на пуш в <code>master</code>, который меняет код, чтобы на каждую правку в документации не теребонькать.</p>
<p>Вот если бы был репозиторий, где всё по уму собрано без блобов, то любой ламер, даже не очень опытный, за пять минут налепит workflow для actions - там большого ума-то и не надо.</p></td><td>2024-10-29T08:35:58.492Z</td></tr><tr><td>rem</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="1887" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Я не особо силен в git. Предполагал, что это снесет весь старый мусор, но он все равно там остался, только невидимый<br>
Если подскажете как можно вычистить бинарии, будет здорово.</p>
</blockquote>
</aside>
<p>Взял директорию zapret от 24 октября (я тогда её обнолял через git pull) и скопировал её в новую директорию zapret-test.</p>
<p>Через TortoiseGit удалил в репо zapret-test директорию binaries и всё её содержимое. Сделал коммит в этот локальный репо.</p>
<p>В директории zapret-test запустил консоль гита (я использую винду) и ввёл такую команду:</p>
<p><code>git filter-branch --index-filter 'git rm -rf --cached --ignore-unmatch binaries' HEAD</code></p>
<p>Эта команда будет исполняться очень долго.</p>
<p>Затем я создал в своём профиле на гитхабе новый репо zapret и скопировал ссылку к нему.</p>
<p>Через TortoiseGit поменял у локального репо zapret-test настройки у remote репозиториев.<br>
Изменил оригинальную ссылку origin на путь к своему репозиторию на гитхабе: <a href="mailto:git@github.com">git@github.com</a>:remittor/zapret.git</p>
<p>Ну а далее я через TortoiseGit вызвал sync и запустил заливку изменений в remote git:</p>
<pre><code class="lang-auto">git.exe push -v --progress --force "origin" master:master
Pushing to github.com:remittor/zapret.git
Enumerating objects: 6249, done.
Counting objects: 100% (6249/6249), done.
Delta compression using up to 12 threads
Compressing objects: 100% (3028/3028), done.
Writing objects: 100% (6249/6249), 1.81 MiB | 368.00 KiB/s, done.
Total 6249 (delta 4455), reused 3721 (delta 3177), pack-reused 0
remote: Resolving deltas: 100% (4455/4455), done.
To github.com:remittor/zapret.git
* [new branch]      master -&gt; master
updating local tracking ref 'refs/remotes/origin/master'
</code></pre>
<p>И вот теперь вот тут <a href="https://github.com/remittor/zapret" class="inline-onebox" rel="noopener nofollow ugc">GitHub - remittor/zapret</a> находится очень компактный репозиторий (3.6 МБ).<br>
Правда теги нужно заного расставить.</p></td><td>2024-10-29T08:36:47.450Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Kolobok" data-post="1911" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kolobok/48/8347_2.png" class="avatar"> Kolobok:</div>
<blockquote>
<p>Вот если бы был репозиторий, где всё по уму собрано без блобов, то любой ламер, даже не очень опытный, за пять минут налепит workflow для actions - там большого ума-то и не надо.</p>
</blockquote>
</aside>
<p>Там статические блобы есть только для win64. Все остальное вполне может жить и с пустым binaries, если можно сделать make. Собранное через make помещается в binaries/my, который является приоритетным для инсталяции через install_bin.sh.Это работает на всех платформах, кроме windows.<br>
Инсталятор, если не находит бинарей готовых, сам запускает make Если есть нужные пакеты на linux, оно соберется. На mac/BSD соберется без пакетов.<br>
Под windows надо использовать отдельно cygwin для winws и mingw для mdig и ip2net. + подтягивать cygwin1.dll и всякие батники по желанию.<br>
Так что для классических unix платформ эта репа была бы вполне готовым решением и без бинарей.<br>
Но ситуевину осложняют только прошивки, где ничего не собрать, и винда.<br>
Если для винды еще как-то не очень сложно собрать, то для прошивок это реальная боль. Для несведущих - задача невозможная.</p></td><td>2024-10-29T08:43:36.917Z</td></tr><tr><td>bolvan</td><td><p>Этот вариант тоже ломает старую историю с commit hash ?<br>
Я это делал через git rebase, потом расставил тэги по названию комитов и их новым хэшам, а старые снес. Стало 18 мб. За счет удаления истории, а не всех бинариков.<br>
Мой первый недодел в том, что не дошло почему остается мусор. Колобок обьяснил, за что благодарность.<br>
Бинарики пока нет приемлемого решения с actions, придется руками тащить</p></td><td>2024-10-29T08:58:12.545Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="1914" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Этот вариант тоже ломает старую историю с commit hash ?</p>
</blockquote>
</aside>
<p>Нет конечно. Я же специально дал ссылку на свой репо что бы вы посмотрели и проверили что да как.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1914" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Стало 18 мб.</p>
</blockquote>
</aside>
<p>Вы как то не так проверяете размер всего репо.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1914" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Бинарики пока нет приемлемого решения с actions, придется руками тащить</p>
</blockquote>
</aside>
<p>Через actions можно что угодно делать!<br>
Но как правило их складывают в релизах.<br>
Для виндовых бинарников , которые не собираются из сорцов, можно сделать доп. репо. И уже при сборке релизов тащить от туда нужные бинари.</p></td><td>2024-10-29T09:08:38.320Z</td></tr><tr><td>bolvan</td><td><p>Первый вариант держал старый мусор за счет тэгов.<br>
После их перестройки и удаления старых мусор ушел. 128-&gt;18</p>
<blockquote>
<p>Но как правило их складывают в релизах.</p>
</blockquote>
<p>Угу, надо бы сделать , чтобы бралась вся репа, засовывались бы туда собранные бинариес и выкладывался бы релиз с этим всем. А в основной тогда можно убрать бинарики</p></td><td>2024-10-29T09:09:32.174Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="1916" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>После их перестройки и удаления старых мусор ушел. 128-&gt;18</p>
</blockquote>
</aside>
<p>Точно. Сейчас проверил: 18 МБ.<br>
Вчера было не так.</p></td><td>2024-10-29T09:11:25.463Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="bolvan" data-post="1913" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но ситуевину осложняют только прошивки, где ничего не собрать, и винда.</p>
</blockquote>
</aside>
<p>На GH пробовал собирать статические c musl libc для кучи архитектур и для винды тоже: <a href="https://github.com/spvkgn/zapret/releases/" class="inline-onebox" rel="noopener nofollow ugc">Releases · spvkgn/zapret · GitHub</a><br>
Наверное, еще можно и macOS добавить, там есть runner.</p></td><td>2024-10-29T09:54:54.062Z</td></tr><tr><td>nalsur</td><td><p>Настраиваю zapret на Keenetic Extra (KN-1710), при запущенном скрипте zapret проверка с помощью curl работает, при выключенном соответственно не работает. Но youtube так и не работает (превьюшки грузятся моментально, но само видео нет). В какую сторону копать? Получается проверка с помощью curl ничего не дает?</p></td><td>2024-10-29T11:06:56.130Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Нужно curl’ом дергать *.googlevideo.com вашего провайдера</p></td><td>2024-10-29T11:28:16.118Z</td></tr><tr><td>nalsur</td><td><p>так и делаю</p>
<blockquote>
<p>curl --connect-to ::speedtest.selectel.ru <a href="https://manifest.googlevideo.com/100MB" rel="noopener nofollow ugc">https://manifest.googlevideo.com/100MB</a> -k -o nul</p>
</blockquote></td><td>2024-10-29T11:33:12.456Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Не то дёргаете. надо домены типа <code>rr1---sn-n8v7znse.googlevideo.com</code> дёргать. Как узнать ваши - можете глянуть тут, например (вам будет интересно с пятого пункта) - <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck</a></p></td><td>2024-10-29T11:52:41.669Z</td></tr><tr><td>nalsur</td><td><p>Спасибо, почитаю, попробую.</p>
<p>Бегло нашел 4 адреса</p>
<pre><code class="lang-auto">https://rr2---sn-t0a7lnee.googlevideo.com
https://rr3---sn-jvhnu5g-31oe.googlevideo.com
https://rr2---sn-q4fl6ns7.googlevideo.com
https://rr1---sn-jvhnu5g-n8vr.googlevideo.com
</code></pre>
<p>через curl так же все качает … но видео нет.<br>
Если есть возможность - скиньте свой рабочий конфиг, для примера.</p></td><td>2024-10-29T12:49:01.717Z</td></tr><tr><td>bolvan</td><td><p>Здорово. А довести дело до конца сможете ?<br>
Чтобы бралась оригинальная репа и на ее базе образовывался весь каталог binaries в его текущем виде  ? Результат - совмещенное содержимое репы и полученных binaries</p>
<p>freebsd - собирать под BSD 11 x64. нужно для pf/opnsense, чтобы не ставить компиляторы или отдельно полноценную фрю<br>
x86 - i586<br>
arm - armv6 soft float. можно armv5.<br>
mips32 - release 1 (r1)<br>
arm64 - тут вроде все стандартно. без неонов только<br>
x86_64 - тоже стандартно, без доп extensions<br>
mips64 - нужен только big endian под octeon<br>
mac - совмещенный бинарик x64+arm. способ сборки в makefile (make mac) -target arm64-apple-macos10.8<br>
windows - cygwin надо брать последний для win7.  ip2net и mdig собирать в mingw, а не cygwin, чтобы не тянуть толстую зависимость. x86 - брать последний под x86<br>
потом упаковать последним upx --lzma  бинарики для linux</p></td><td>2024-10-29T13:23:25.132Z</td></tr><tr><td>KDS</td><td><p>Я так понимаю 32-х битная под винду с гитхаба все, кто успел тот и съел? Или когда-нибудь вернется?</p></td><td>2024-10-29T13:43:36.917Z</td></tr><tr><td>spv82</td><td><p>Эта не подойдет? <a href="https://github.com/spvkgn/zapret/releases/download/latest/zapret-cygwin-x86.zip" rel="noopener nofollow ugc">https://github.com/spvkgn/zapret/releases/download/latest/zapret-cygwin-x86.zip</a><br>
Там только сами бинарники, скрипты в основной репе есть.</p></td><td>2024-10-29T13:58:11.235Z</td></tr><tr><td>spv82</td><td><p>BSD - нашлось только 12.4 через <a href="http://vmactions.org" rel="noopener nofollow ugc">vmactions.org</a><br>
Остальное вроде все решаемо.</p></td><td>2024-10-29T14:29:34.813Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="nalsur" data-post="1923" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/nalsur/48/11897_2.png" class="avatar"> nalsur:</div>
<blockquote>
<p>Если есть возможность - скиньте свой рабочий конфиг, для примера.</p>
</blockquote>
</aside>
<p><code>--filter-tcp=443 --hostlist=C:\Soft\zapret\zapret-winws\googlevideo.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --dpi-desync-repeats=10</code></p>
<p>В <code>googlevideo.txt</code> у меня собственно только <code>googlevideo.com</code> - на моём провайдере как выяснилось разные стратегии для провайдерских ютуб-серверов и зарубежных не нужны.</p>
<p><a class="attachment" href="zapret-обсуждение-726/qRWO7ltlGpKMOLasGg1Jk3Kqf1b.bin">tls_clienthello_drive_google_com.bin</a> (316 байтов)</p></td><td>2024-10-29T14:56:25.828Z</td></tr><tr><td>bolvan</td><td><p>ok, пусть будет 12. более-менее актуальные версии pfsense на 12 минимум.<br>
а остальные сами соберут</p>
<p>вот это плохо. собирается под cygwin, а не mingw</p>
<pre><code class="lang-auto">Dump of file mdig.exe

File Type: EXECUTABLE IMAGE

  Section contains the following imports:

    cygwin1.dll
                4080F8 Import Address Table
                40803C Import Name Table
                     0 time date stamp
                     0 Index of first forwarder reference

                   1B __cxa_atexit
                   48 __getreent
                   53 __main
                   E1 _dll_crt0@0
</code></pre></td><td>2024-10-29T14:57:48.331Z</td></tr><tr><td>bolvan</td><td><p>если сделаем, будет и 32 битная тоже в релизе.<br>
но zapert-winws будет выкинут.<br>
в релизе только бинарии останутся.<br>
zapret-winws пойдет в bundle</p></td><td>2024-10-29T14:59:19.849Z</td></tr><tr><td>beneficial92</td><td><p>А где бы теперь взять всю историю?<br>
Лично я пытался проследить, когда и как wsize стал устаревшим, но это вообще вещь полезная. А склонить до сегодняшних изменений не догадался.</p></td><td>2024-10-29T16:15:25.507Z</td></tr><tr><td>spv82</td><td><p>В форкнутых репо история сохранилась.</p></td><td>2024-10-29T16:43:40.661Z</td></tr><tr><td>bolvan</td><td><p>–wsize до сих пор работает. И в некоторых случаях он нужен.<br>
Чтобы победить провайдера, пытающегося обходить DPI для своих клиентов, и ломающего работу zapret. Например.<br>
Но для сплита tcp он больше не нужен. Его заменил split2, который имеет гораздо меньше побочных эффектов.<br>
split2 был сделан много лет назад. Даже старая репа вряд ли сохранила те изменения, потому что я ее сносил не раз полностью</p></td><td>2024-10-29T17:01:03.158Z</td></tr><tr><td>Taigei</td><td><p>Немного накосячили в предыдущем поэтому блеклист не работал кроме ютуба,<br>
Вот так всё работает как в оригинале за исключением автохостлиста который был в конце и не нужен как по мне из-за наличия блеклиста. Если всё равно будут сайты отваливаться, то autottl надо на фиксированный поменять.</p>
<details>
<summary>
Спойлер</summary>
<p>NFQWS_ENABLE=1<br>
NFQWS_PORTS_TCP=80,443<br>
NFQWS_PORTS_UDP=443,50000-50090<br>
NFQWS_TCP_PKT_OUT=9<br>
NFQWS_TCP_PKT_IN=3<br>
NFQWS_UDP_PKT_OUT=9<br>
NFQWS_UDP_PKT_IN=0<br>
NFQWS_OPT="<br>
–filter-tcp=80 --hostlist=/opt/zapret-lists/netrogat.txt --new<br>
–filter-tcp=443 --hostlist=/opt/zapret-lists/netrogat.txt --new<br>
–filter-udp=443 --hostlist=/opt/zapret-lists/russia-youtubeQ.txt --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new<br>
–filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtubeGV.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new<br>
–filter-tcp=443 --hostlist=/opt/zapret-lists/russia-youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl --new<br>
–filter-tcp=80 --hostlist=/opt/zapret-lists/russia-blacklist.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new<br>
–filter-tcp=443 --hostlist=/opt/zapret-lists/russia-blacklist.txt --hostlist=/opt/zapret-lists/myhostlist.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-autottl --new<br>
–filter-udp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=7 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --dpi-desync-cutoff=n2 --new<br>
–filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_pl_by_ori.bin --new<br>
–filter-tcp=443 --hostlist=/opt/zapret-lists/russia-discord.txt --dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new"</p>
</details></td><td>2024-10-29T19:06:04.038Z</td></tr><tr><td>drmirro(Drmirro)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1933" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но для сплита tcp он больше не нужен. Его заменил split2, который имеет гораздо меньше побочных эффектов.</p>
</blockquote>
</aside>
<p>У меня, почему то, все с точностью “до наоборот”. Вот так  ЮТ еще,кое как , но работает :<br>
–filter-tcp=443<br>
–dpi-desync=split<br>
–dpi-desync-fooling=badseq<br>
–wssize 1:6</p>
<p>А так :<br>
–filter-tcp=443<br>
–dpi-desync=split2<br>
–dpi-desync-fooling=badseq<br>
уже нет. Провайдер пытается обходить DPI ?</p></td><td>2024-10-30T00:49:25.438Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>А возможно собирать winws только в mingw? Или в msys2/ucrt64?</p>
<details>
<summary>
offtopic</summary>
<p>Сегодня YT на угмк прове внезапно начал отдавать новые домены для московских ggc, которые пусть по tcp (h3 так и не робит), но обходятся запретом, в отличие от предыдущих. Что-то поменялось на магистральном. Дышать стало свободнее. <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p>
</details></td><td>2024-10-30T05:51:42.549Z</td></tr><tr><td>thomasR34</td><td><p>Всем привет. Может кто пожалуйста поделится конфигом запрета под SkyNet (СПБ)? Видел где-то здесь выше кому-то скидывали в ЛС. Просто уже перепробовал всё что в своих силах, ютуб работает, но с косяками: иногда первая загрузка долгая, на телефоне всё еще хуже бывает, что шорсты могут по секунд 10-20 грузится. Свежие видео вообще с трудом большим грузятся.</p></td><td>2024-10-30T05:56:46.744Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="1936" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>А возможно собирать winws только в mingw? Или в msys2/ucrt64?</p>
</blockquote>
</aside>
<p>Нет. Он сильно зависит от unix обертки. mdig и ip2net не зависят.<br>
cygwin и был выбран, чтобы не переписывать дофига кода. К тому же там blockcheck , и он точно не будет работать без unix обертки.</p></td><td>2024-10-30T06:37:39.460Z</td></tr><tr><td>bolvan</td><td><p>Тестировалось только на тарифе с внешним IP и ipv6 на роутере, а не за ним.<br>
Для последней версии zapret из репы.<br>
Телики не тестировались.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">NFQWS_ENABLE=1
# redirect outgoing traffic with connbytes limiter applied in both directions.
NFQWS_PORTS_TCP=80,443
NFQWS_PORTS_UDP=443
# PKT_OUT means connbytes dir original
# PKT_IN means connbytes dir reply
# this is --dpi-desync-cutoff=nX kernel mode implementation for linux. it saves a lot of CPU.
NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
# redirect outgoing traffic without connbytes limiter and incoming with connbytes limiter
# normally it's needed only for stateless DPI that matches every packet in a single TCP session
# typical example are plain HTTP keep alives
# this mode can be very CPU consuming. enable with care !
#NFQWS_PORTS_TCP_KEEPALIVE=
#NFQWS_PORTS_UDP_KEEPALIVE=
# use &lt;HOSTLIST&gt; and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir
# hostlist markers are replaced to empty string if MODE_FILTER does not satisfy
# &lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list
NFQWS_OPT="--filter-udp=443 --hostlist=/opt/zapret-lists/list-youtube.txt --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=3 &lt;HOSTLIST_NOAUTO&gt; --new --hostlist=/opt/zapret-lists/list-youtube.txt --dpi-desync=fake,split2 --dpi-desync-repeats=8 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack &lt;HOSTLIST&gt;"
</code></pre>
<pre><code class="lang-auto">cat /opt/zapret-lists/list-youtube.txt 
googlevideo.com
youtubei.googleapis.com
ytimg.com
youtube.com
</code></pre>
</details></td><td>2024-10-30T06:41:43.304Z</td></tr><tr><td>bolvan</td><td><p>wssize и wsize - вещи совершенно разные.<br>
Первый заставляет сервер сплитать запросы , второй - клиент.<br>
wssize так любят, потому что ТСПУ сечет ответы сервера TLS 1.2 и высекает из них сертификат с именем домена. Но часто без него можно обойтись, ограничившись fake. В этом случае ТСПУ может отстать от запроса и не проверять ответ сервера.<br>
fake для youtube должен быть специальный, содержащий неблокируемые домены гугла. Иногда требуется несколько повторов (–dpi-desync-repeats"</p></td><td>2024-10-30T06:47:11.340Z</td></tr><tr><td>easyone11</td><td><p>у тебя только udp дурится?</p></td><td>2024-10-30T07:04:22.684Z</td></tr><tr><td>bolvan</td><td><p>Там длинная строка без переносов.<br>
Инсталятор ее засовывает в 1 строку. При редактировании разбивает по --new</p></td><td>2024-10-30T07:05:12.490Z</td></tr><tr><td>easyone11</td><td><p>это я вижу<br>
у тебя там только --filter-udp=443 (причём 2 раза) без tcp<br>
ну и настройки после 2го udp применяются тисипишные</p></td><td>2024-10-30T07:10:55.287Z</td></tr><tr><td>nalsur</td><td><p>Для информации, может будет полезно. Роутер Keenetic Extra (KN-1711) + Entware, заработало с помощью данного конфига, youtube на компах \ смартфонах работает (просто летает), на теликах (LG и Samsung) нет. Провайдер МТС, Казань.<br>
P.S. проверка curl’ом:</p>
<blockquote>
<p>curl --connect-to ::speedtest.selectel.ru <a href="https://manifest.googlevideo.com/100MB" rel="noopener nofollow ugc">https://manifest.googlevideo.com/100MB</a> -k -o nul<br>
curl --connect-to ::speedtest.selectel.ru <a href="https://rr3---sn-hgn7yn7e.googlevideo.com/100MB" rel="noopener nofollow ugc">https://rr3---sn-hgn7yn7e.googlevideo.com/100MB</a> -k -o nul</p>
</blockquote>
<p>так и не работает, т.е. не показывает активность … тем не менее youtube работает.</p></td><td>2024-10-30T08:10:40.490Z</td></tr><tr><td>bolvan</td><td><p>Да. Первые 2 профиля принимают на себя весь udp 443, а другого и не перехватывается.<br>
Остальное без фильтра по l4, но туда ничего, кроме tcp , и не может придти</p></td><td>2024-10-30T08:22:00.115Z</td></tr><tr><td>bolvan</td><td><p>Этот конфиг спрашивали для skynet СПБ. Конфиг не является таблеткой для всех случаев жизни</p></td><td>2024-10-30T08:23:19.733Z</td></tr><tr><td>MAMBA(Samatov)</td><td><aside class="quote no-group" data-username="bolvan" data-post="1939" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<pre><code class="lang-auto">NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
</code></pre>
</blockquote>
</aside>
<p>Не конфликтует ли с “–dpi-desync-repeats=10”?</p></td><td>2024-10-30T09:01:31.697Z</td></tr><tr><td>easyone11</td><td><p>то есть если фильтр не указан это l4 (хз что за эль4:D) в общем если фильтр не указан, идёт применение к tcp?<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f24b609cba1f2fffecdaaf3f32500db1517c8d0e.png" data-download-href="https://ntc.party/uploads/default/f24b609cba1f2fffecdaaf3f32500db1517c8d0e" title="c4583ee3c9a86ae82d16d8d7e70f603f"><img src="zapret-обсуждение-726/f24b609cba1f2fffecdaaf3f32500db1517c8d0e.png" alt="c4583ee3c9a86ae82d16d8d7e70f603f" data-base62-sha1="yzr2FVrF6dADOdas7d01E5YN83s" width="690" height="70" data-dominant-color="F0E2E3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">c4583ee3c9a86ae82d16d8d7e70f603f</span><span class="informations">1712×175 5.97 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-10-30T09:04:26.017Z</td></tr><tr><td>bolvan</td><td><p>никак не связано</p></td><td>2024-10-30T09:10:04.230Z</td></tr><tr><td>bolvan</td><td><p>L4 - это уровень транспортного протокола в системе OSI<br>
очень грубо говоря это tcp или udp<br>
если фильтр не указан, идет применение ко всему, что туда попадет.</p></td><td>2024-10-30T09:11:12.520Z</td></tr><tr><td>easyone11</td><td><p>немного понял, спс</p></td><td>2024-10-30T09:16:54.575Z</td></tr><tr><td>easyone11</td><td><p>а нет в планах сделать какой то мини гайд для минимального понимания лога в дебаге?<br>
хотя бы 10 строчек на что стоит обратить внимание в первую очередь при анализе.<br>
Или там очень вариативно и толку от мини гайда не будет?</p></td><td>2024-10-30T09:45:41.874Z</td></tr><tr><td>bolvan</td><td><p>Очень сильно зависит от того, что там хотят подчерпнуть в логе.<br>
Схема лога довольно проста.<br>
nfqws обрабатывает очередь пакетов.<br>
Значит на вход идут пакеты. Как только приходит пакет, об этом идет информация. Что это, какой протокол, какие порты, начальный hex dump пейлоада.<br>
Дальше расписываются все проводимые над ним действия.<br>
В конце выдается вердикт системе. Дропнуть пакет, отправить неизменным или отправить измененным. Часто при работе по пакету происходит его внутренняя переотправка в модифицированном или неизменном виде, отправка дополнительных пакетов (фейки), а системе говорят дропнуть оригинал</p></td><td>2024-10-30T10:12:23.629Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Прошу проверить корректность конфига. На ТВ работает не стабильно. Приходится перезапускать видеоролик несколько раз.</p>
<pre><code class="lang-auto">NFQWS_OPT="
--filter-tcp=80 --dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-ttl=5 --dpi-desync-repeats=10 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new
--filter-tcp=443 --dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-ttl=5 --dpi-desync-repeats=10 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin &lt;HOSTLIST&gt;
"

# none,ipset,hostlist,autohostlist
MODE_FILTER=hostlist
</code></pre></td><td>2024-10-30T10:22:14.853Z</td></tr><tr><td>easyone11</td><td><p>мне кажется надо понять какой протокол использует приставка, найти проблемный ggc и блокчекать его в поисках новой страты</p></td><td>2024-10-30T10:41:43.774Z</td></tr><tr><td>easyone11</td><td><p>понятно, спасибо<br>
pS<br>
почему ник такой выбрал? ) или это бол-ван по типу большой-ваня? )</p></td><td>2024-10-30T10:41:52.178Z</td></tr><tr><td>Govnovoz</td><td><p>Добрый день. Перешел на  zapret под openwrt с версии под windows.</p>
<p>На windows использовал конфиг от flowseal. Сейчас же, на openwrt, получилось заставить работать YouTube на любых клиентах и Discord. Но проблема в том, что в Discord не работает голос, что на PC клиенте, что на Мобильном устройстве, что на Xbox.</p>
<p>Есть у кого рабочий конфиг, чтобы заставить Discord работать с голосом, как это было на приложении Windows?</p>
<p>Версия zapret на роутере - 65.</p></td><td>2024-10-30T10:49:56.013Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group quote-modified" data-username="thomasR34" data-post="1937" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/ecae2f/48.png" class="avatar"> thomasR34:</div>
<blockquote>
<p>SkyNet (СПБ)? Просто уже перепробовал всё что в своих силах, ютуб работает, но с косяками: иногда первая загрузка долгая, на телефоне всё еще хуже бывает, что шорсты могут по секунд 10-20 грузится. Свежие видео вообще с трудом большим грузятся.</p>
</blockquote>
</aside>
<p>Эта проблема вызвана не конфигом запрета, а особенностью скайнета. У них гуглокэши установлены до ТСПУ - и на кластере led2, и на кластере led3. И эти гуглокэши жутко тормозят при кэшировании - проблема не на канале клиент-сервер, а дальше. Поэтому никакими стратегиями это не решается.<br>
Выход: заблочить провайдерские кэши через ublock:</p>
<pre><code class="lang-auto">||rr*---sn-n3toxu-axql.googlevideo.com^
||rr*---sn-n3toxu-axqs.googlevideo.com^
</code></pre>
<p>Либо через hosts.<br>
После этого начинает полностью тянуться с питерских магистральников, которые отдают видосы мгновенно и 10-секундные затыки при перемотке/прогрузке пропадают.</p></td><td>2024-10-30T11:15:04.859Z</td></tr><tr><td>oniksofers(Oniksofers)</td><td><p>Тут пошел прогрев по новостям, про скорый бан гугловских сервисов. Означает ли это, что после подобного, всё что остается это пользоваться wssize, так как домены гугла все наебнут? Или можно фейковать кем то другим?</p></td><td>2024-10-30T11:18:35.306Z</td></tr><tr><td>easyone11</td><td><p>надо просто положить скрипт 50-discord из custom.d.examples в папку custom.d - для 67версии<br>
в 65 не помню так же  там или нет</p></td><td>2024-10-30T11:23:37.617Z</td></tr><tr><td>bolvan</td><td><p>разраб GUI для гудбая вообще себя debiloid назвал</p></td><td>2024-10-30T11:48:18.756Z</td></tr><tr><td>easyone11</td><td><p>дурной пример )</p></td><td>2024-10-30T11:54:01.355Z</td></tr><tr><td>nalsur</td><td><p>Применил это у себя - телик LG заработал. <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"></p></td><td>2024-10-30T11:59:10.655Z</td></tr><tr><td>Govnovoz</td><td><p>Пробовал, ничего не поменялось.</p></td><td>2024-10-30T12:34:10.645Z</td></tr><tr><td>easyone11</td><td><p>в 67?</p></td><td>2024-10-30T12:37:48.237Z</td></tr><tr><td>Govnovoz</td><td><p>Нет, в 65. С 66 я так понимаю полностью поменяли систему конфига, там уж точно не разберусь как заставить работать Discord и YouTube на всех устройствах.</p></td><td>2024-10-30T12:43:13.815Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="easyone11" data-post="1956" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>почему ник такой выбрал? ) или это бол-ван по типу большой-ваня? )</p>
</blockquote>
</aside>
<p>Есть несколько языков, в которых первостепенное значение этого слова означает мячик.<br>
Пример: <a href="https://www.samstone.nl/product/bol-van-seleniet-wit-o8-cm/" class="inline-onebox" rel="noopener nofollow ugc">Bol van Seleniet wit Ø8 cm - Sam Stone Company</a></p></td><td>2024-10-30T12:45:17.286Z</td></tr><tr><td>rem</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> , а можете проверить этот “конфиг” ?</p>
<pre><code class="lang-auto">--filter-tcp=80 ˂HOSTLIST˃
--dpi-desync=fake,split2
--dpi-desync-autottl=2
--dpi-desync-fooling=md5sig
--new
--filter-tcp=443
--hostlist=/opt/zapret/ipset/zapret-hosts-google.txt
--dpi-desync=fake,split2
--dpi-desync-repeats=11
--dpi-desync-fooling=md5sig
--dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin
--new
--filter-udp=443
--hostlist=/opt/zapret/ipset/zapret-hosts-google.txt
--dpi-desync=fake
--dpi-desync-repeats=11
--dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin
--new
--filter-udp=443 ˂HOSTLIST_NOAUTO˃
--dpi-desync=fake
--dpi-desync-repeats=11
--new
˂HOSTLIST˃
--dpi-desync=fake,disorder2
--dpi-desync-autottl=2
--dpi-desync-fooling=md5sig
</code></pre>
<p>Я его использую в <a href="https://github.com/remittor/zapret-openwrt" rel="noopener nofollow ugc">zapret-openwrt</a> пакете.<br>
Закрались у меня сомнения…</p></td><td>2024-10-30T19:05:21.978Z</td></tr><tr><td>bolvan</td><td><p>Критических проблем я не вижу.<br>
Как общее правило свои специализации надо выносить наверх. Потому что если вдруг <code>&lt;HOSTLIST&gt;</code> окажется пустым или будет задан MODE_FILTER без хостлиста, то специализации перестанут работать, тк будут поглощены профилями без листов.<br>
Но здесь в рамках порт-фильтра это соблюдено.<br>
Не стоит держать собственные листы в ipset, поскольку при обновлении через инсталлятор они будут снесены. Все свои файлы лучше выносить из /opt/zapret</p></td><td>2024-10-30T19:29:11.463Z</td></tr><tr><td>Chep</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> А можно вопрос, какие аргументы указываются глобально, а какие только на один профиль?<br>
На сколько я понимаю, <code>--wf-*</code>  работают на все профили, т.е. их можно указать в начале и забыть про них, но если брать во внимание ваш пресет из вин бандла в котором фильтр юдп потом сбрасывается, на чистый, то кажется что и <code>--filter-*</code> должен работать на все профили</p>
<details>
<summary>
тык</summary>
<p>–filter-udp=50000-50099 --ipset=“%~dp0ipset-discord.txt” --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=n4 --new ^<br>
–filter-udp=50000-50099 --new</p>
</details>
<p>но, буквально двумя строчками ниже есть вот такое и дальше никак не “обнуляется”</p>
<details>
<summary>
тык</summary>
<p>–filter-udp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 --new ^</p>
</details>
<p>И кажется что как будто бы не сбрасывается, я честно говоря немножко запутался, можете обьяснить? <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>И еще вопрос, что будет если не указывать <code>--filter-tcp\udp=*</code>, будет просто кидать фейки на все открытые с помощью <code>--wf-*</code> порты?</p></td><td>2024-10-30T22:18:17.245Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>вопрос, какие аргументы указываются глобально</p>
</blockquote>
</aside>
<p>Присоединюсь к вопросу. В частности, в отношении <code>--dpi-desync-fwmark</code></p></td><td>2024-10-31T05:48:25.248Z</td></tr><tr><td>abc555</td><td><p>Вчера решился на всё таки запустить blockcheck. Выбрал только TLS1.2 на https, думал может будет быстрее, так как quic не использую, включил 2 стандарт на рутрекер и  брутфорс этот работал целый час и не нашел он ничего, а Вы говорите что так делать правильно, я методом тыка за 5 минут подобрал комбинацию, а тут час и результат по нулям. Смотрел на логи и там такие комбинации типа wsize, ttl, quic,как раз которые у меня не работают или просто не нужны такие варианты. А можно как то довести эту утилиту до ума ? Например когда выбираешь только TLS1.2 чтоб подгружались комбинации именно только для него, а не всё подряд, чтоб был выбор для nfqws или для tpws и я понимаю что это не просто сделать, но может в свободное время, Вы всё же доведёте её до ума когда не будь, а так конечно тема прикольная, но толку мало от неё на данный момент</p></td><td>2024-10-31T08:00:19.376Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>И ведь выбор ‘проверять только tpws’ в blockcheck для нас, грязных минимальщиков с 4/32, очень бы не помешал.</p></td><td>2024-10-31T08:08:58.841Z</td></tr><tr><td>easyone11</td><td><p>на сколько понимаю нулевая фаза работает всегда, в ридмишки искать по “фаз” там и будут команды (но лучше конечно болван ответит)</p></td><td>2024-10-31T08:13:08.001Z</td></tr><tr><td>abc555</td><td><p>И не возможно скопировать ссылку в батник, точнее в это окно, приходится прописывать, проверять по три раза, к примеру от гуглвидео, там целый набор всяких символов, ошибся на один и всё коту под хвост</p></td><td>2024-10-31T08:16:49.387Z</td></tr><tr><td>abc555</td><td><p>что такое нулевая фаза, можете на пальцах объяснить, без хитрых слов, как её включить или что там надо сделать</p></td><td>2024-10-31T08:24:45.304Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Пользуйтесь нормальной современной версией ОС - в той же Windows 10 всё отлично копируется в окно консоли.<br>
А если у вас условная Win7, поддержка которой вообще-то уже закончилась, и ей в принципе не слишком безопасно пользоваться - сами себе злобный буратино.</p></td><td>2024-10-31T08:28:22.640Z</td></tr><tr><td>abc555</td><td><p>Та не спасибо, я не из тех кто шагает в ногу со временем и у меня не условная 7, а модная, такую вы не видели, ваша 10 просто отдыхает, но не будем про это, здесь тема о запрете, а не о винде</p></td><td>2024-10-31T08:33:13.188Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="abc555" data-post="1973" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>включил 2 стандарт на рутрекер</p>
</blockquote>
</aside>
<p>Не лучшая идея тестить 1.2 на сайте с 1.3 да еще и с ECH</p></td><td>2024-10-31T08:36:46.222Z</td></tr><tr><td>anon9001(anon)</td><td><p>Брехня. У меня запрет стоит на x86_32 линуксе у которого тоже уже суппорт на исходе, однако эта машина выполняет колосальную работу как бутлеговский роутер. Тут скорее суппорт кончится в каком нить golang нежели в ядре. К тому же есть нетбсд у которого даже 486 суппорт имеется.</p></td><td>2024-10-31T08:38:33.339Z</td></tr><tr><td>abc555</td><td><p>тут я да, протупил с 1.3 )) но я и не сразу разобрался вообще как запустить blockcheck<br>
а поставил бы 1.3, то до утра наверно бы юзало, час этот я ели выдержал, думал оно не закончится никогда ))</p></td><td>2024-10-31T08:46:06.184Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1029" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сначала работает autottl. Если он не может - работает ttl. Он как fallback</p>
</blockquote>
</aside>
<p>Что-то не работает этот фоллбэк. При автоттл сайт выдает MALFORMED_SERVER_HELLO при указании рядом просто ttl (любого) - то же самое. Если указать просто ttl (хоть 1) без автоттл - открывается.<br>
Сайт, если это важно, <code>https://rutor.info</code></p></td><td>2024-10-31T08:53:14.065Z</td></tr><tr><td>abc555</td><td><p>Проверил, у меня открывается. ttl вообще не использую, с лета больше не работает эта функция, возможно даже к лучшему, до вас может эти их новации ещё не дошли, поэтому ttl ещё у вас работает )</p></td><td>2024-10-31T08:59:07.678Z</td></tr><tr><td>easyone11</td><td><p>судя по ридми он не так прост, как кажется и нет чоткой работы у него нет</p>
<blockquote>
<p>На каких-то провайдерах эта техника будет работать неплохо, на других доставит больше проблем, чем пользы.<br>
Где-то может потребоваться тюнинг параметров. Лучше использовать с дополнительным ограничителем.</p>
</blockquote></td><td>2024-10-31T09:28:04.284Z</td></tr><tr><td>KDS</td><td><p>Вот и мне интересно, с каким дополнительным ограничителем?</p>
<p>Все у него есть четкая работа - ни с одним сайтом нет проблем, кроме этого рутора</p></td><td>2024-10-31T09:31:02.070Z</td></tr><tr><td>bolvan</td><td><p>Перечитайте еще раз описание алгоритма поиска профиля в readme.<br>
Он идет слева направо.  От первого профиля до последнего, пока не будет найдено совпадение.<br>
Поэтому положение важно.<br>
Ничего там не сбрасывается. Повторный фильтр на 50000-50099 сделан, чтобы не удовлетворяющие ipset IP адреса упали на пустой профиль и не шли дальше, тк там на последнем нет фильтра по портам. Чтобы туда не упало. Как альтернатива можно было бы там написать фильтр. Но когда писался этот батник, еще не было возможности указывать порты через запятную в filter.</p>
<blockquote>
<p>И еще вопрос, что будет если не указывать <code>--filter-tcp\udp=*</code>, будет просто кидать фейки на все открытые с помощью <code>--wf-*</code> порты?</p>
</blockquote>
<p>Зависит от стратегии. Если any protocol, то будет. Иначе только на распознанные протоколы.</p></td><td>2024-10-31T09:35:32.573Z</td></tr><tr><td>bolvan</td><td><p>desync-fwmark - глобальный параметр, и это не параметр дурения</p></td><td>2024-10-31T09:36:20.008Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="MayanKoyote" data-post="1974" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mayankoyote/48/10518_2.png" class="avatar"> MayanKoyote:</div>
<blockquote>
<p>И ведь выбор ‘проверять только tpws’ в blockcheck для нас, грязных минимальщиков с 4/32, очень бы не помешал.</p>
</blockquote>
</aside>
<p>SKIP_PKTWS=1 ./blockcheck.sh</p></td><td>2024-10-31T09:37:35.903Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="1983" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Что-то не работает этот фоллбэк. При автоттл сайт выдает MALFORMED_SERVER_HELLO при указании рядом просто ttl (любого) - то же самое. Если указать просто ttl (хоть 1) без автоттл - открывается.<br>
Сайт, если это важно, <code>https://rutor.info</code></p>
</blockquote>
</aside>
<p>Работает. В данном случае работает потому что не работает.<br>
В autottl он вычисляется неправильно.<br>
fallback не срабатывает.<br>
Он работает , когда невозможно вычислить длину пути до сервера на базе предположений или вычисленный TTL, приведенный к указанному диапазону во 2 и 3 параметрах оказывается больше вычисленной длины пути. В этом случае идет отказ алгоритма и переход на статический ttl</p>
<p>Юзер предполагает, наверно, что если сайт не открыл автоттл, то его откроет ttl. Это в корне не верно</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">uint8_t autottl_guess(uint8_t ttl, const autottl *attl)
{
	uint8_t orig, path, fake;

	// 18.65.168.125 ( cloudfront ) 	255
	// 157.254.246.178 			128
	// 1.1.1.1				 64
	// guess original ttl. consider path lengths less than 32 hops
	if (ttl&gt;223)
		orig=255;
	else if (ttl&lt;128 &amp;&amp; ttl&gt;96)
		orig=128;
	else if (ttl&lt;64 &amp;&amp; ttl&gt;32)
		orig=64;
	else
		return 0;

	path = orig - ttl;

	fake = path &gt; attl-&gt;delta ? path - attl-&gt;delta : attl-&gt;min;
	if (fake&lt;attl-&gt;min) fake=attl-&gt;min;
	else if (fake&gt;attl-&gt;max) fake=attl-&gt;max;

	if (fake&gt;=path) return 0;

	return fake;
}
</code></pre>
</details></td><td>2024-10-31T09:39:03.043Z</td></tr><tr><td>bolvan</td><td><p>Нулевая фаза - это этап установления tcp соединения. На ней еще неизвестно имя хоста, известен только IP адрес и порт</p></td><td>2024-10-31T09:47:47.643Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1990" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Юзер предполагает, наверно, что если сайт не открыл автоттл, то его откроет ttl. Это в корне не верно</p>
</blockquote>
</aside>
<p>При наличии правильной стратегии - откроет. Главное, чтобы фейк в сервер не влетал и ничего не ломал.</p></td><td>2024-10-31T09:49:35.628Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="1986" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Вот и мне интересно, с каким дополнительным ограничителем?</p>
</blockquote>
</aside>
<p>md5sig - наиболее безболезненный, но работает только на linux серверах.<br>
Если autottl вычислил слишком маленький TTL, что не достает до DPI, то никакие ограничители не помогут. Фейки не будут доходить до DPI</p></td><td>2024-10-31T09:49:36.137Z</td></tr><tr><td>bolvan</td><td><p>Вопрос был конкретно про fallback. Я обьяснил что это такое.<br>
Это не автоматия по анализу результата открытия сайта. Ее нет.<br>
Это выбор TTL для фейков, когда алгоритм autottl не в состоянии автоматически его вычислить.</p></td><td>2024-10-31T09:50:40.049Z</td></tr><tr><td>KDS</td><td><p>Да это я понял. А вот почему он не срабатывает - не совсем. Получается атоподбор не сработал, фоллбэк не сработал, фейк влетел в сервер - все сломалось. Причем на одном конкретном сервере, на других автоттл отлично работает. Видимо асинхронность каналов, если я все правильно понял.</p></td><td>2024-10-31T09:55:07.249Z</td></tr><tr><td>bolvan</td><td><p>Можно посмотреть в дебаг логе результат подбора autottl, прогнать mtr --tcp до сервера<br>
и сравнить с количеством хопов в mtr</p></td><td>2024-10-31T09:56:45.999Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="1996" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>mtr --tcp</p>
</blockquote>
</aside>
<p>А можно по-виндовски? tracert обычный? По нему до сервера 9 хопов, коробка стоит на 3-м</p>
<p>Пойду смотреть, как дебаг прикрутить…</p></td><td>2024-10-31T09:59:06.842Z</td></tr><tr><td>bolvan</td><td><p>Для винды есть winmtr, но не знаю есть ли там tcp.<br>
На разных протоколах может быть разный длины путь. Какие-то системы инспекции могут заворачивать на себя.</p></td><td>2024-10-31T10:07:43.365Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="KDS" data-post="1997" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>По нему до сервера 9 хопов, коробка стоит на 3-м<br>
Пойду смотреть, как дебаг прикрутить…</p>
</blockquote>
</aside>
<p>а как понять что из всего там коробка? или это надо тестить когда обход выключен на чём запорится?<br>
после фильтра --debug=@/opt/zapret/log.txt --страта</p></td><td>2024-10-31T10:08:33.751Z</td></tr><tr><td>bolvan</td><td><p>Коробка может быть не одна.<br>
Длина пути сечется в блокчеке по изменению результата проверки.<br>
Не обязательно даже нет-&gt;да. Может быть другой результат curl. Другая ошибка.<br>
Особенно это хорошо видно на plain http. Другой код редиректа, другой адрес заглушки.</p></td><td>2024-10-31T10:11:30.571Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="easyone11" data-post="1975" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>на сколько понимаю нулевая фаза работает всегда, в ридмишки искать по “фаз” там и будут команды (но лучше конечно болван ответит)</p>
</blockquote>
</aside>
<p>Она не всегда работает. Она всегда есть.<br>
Но будет ли на ней применена какая-то стратегия зависит от алгоритма выбора профиля.<br>
Если на выбранном профиле будут параметры маниппуляции типа wssize и syndata, то будет дурить.</p></td><td>2024-10-31T10:14:20.667Z</td></tr><tr><td>bolvan</td><td><p>Консольное окно в windows вполне работает с clipboard.<br>
Там есть quick edit mode. Если он включен, вставка работает по правой мыши.<br>
Если нет - через системное меню окна.<br>
Там же и настройки</p></td><td>2024-10-31T10:16:23.285Z</td></tr><tr><td>KDS</td><td><p>Короче, понятно - в дебаге autottl: guessed 10 а хопов до сервера 9. Результат на лице )</p>
<p><a class="mention" href="/u/easyone11">@easyone11</a> Трассируем забаненый по IP хост, дальше какого хопа пакеты не пойдут, там и коробка.</p></td><td>2024-10-31T10:16:24.767Z</td></tr><tr><td>bolvan</td><td><p>Скорее всего здесь имела место ассиметрия.<br>
Для таких случаев и есть дополнительный ограничитель fooling<br>
Можно еще дельтой поиграться на множестве доменов.</p></td><td>2024-10-31T10:17:07.523Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="1980" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Не лучшая идея тестить 1.2 на сайте с 1.3 да еще и с ECH</p>
</blockquote>
</aside>
<p>Нормальная идея. Сайтов только с 1.3 практически нет , потому что еще много клиентов, не поддерживающих 1.3. Поэтому чаще всего поддерживается 1.2 и 1.3 вместе. 1.0 и 1.1 чаще всего уже отключают.  ECH так же не обязателен</p></td><td>2024-10-31T10:22:48.729Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="2004" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Можно еще дельтой поиграться на множестве доменов.</p>
</blockquote>
</aside>
<p>Да пробовал, не помогает.</p>
<aside class="quote no-group" data-username="bolvan" data-post="2005" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Нормальная идея.</p>
</blockquote>
</aside>
<p>Это я к тому, что рутрекер, как мне кажется, при отключенном ECH вообще уже не работает, как коробки не дури.</p></td><td>2024-10-31T10:24:17.296Z</td></tr><tr><td>abc555</td><td><p>Так лучше использовать в blockcheck не домен а ip ?<br>
И как выбрать нужные мне параметры поиска стратегии, чтоб юзало только определённые мною варианты</p></td><td>2024-10-31T10:24:39.188Z</td></tr><tr><td>bolvan</td><td><p>На каких-то провах может и не работает. На моих всех  работает.<br>
Фоксик на винде не 11 и без DoH</p></td><td>2024-10-31T10:25:06.567Z</td></tr><tr><td>KDS</td><td><p>А что в 11 это как-то по особому работает? ) Тоже Фоксик и вот никак. И блокчек везде мимо.</p></td><td>2024-10-31T10:26:34.478Z</td></tr><tr><td>bolvan</td><td><p>IP выбрать нельзя. По нему невозможно достучаться до сайта, тк требуется указание хоста в SNI.<br>
Выбирать параметры сейчас не выйдет. Не представляю как это реализовать.<br>
Может какие-то группы параметров тестирования назвать и перечислять в переменной.<br>
Только так.</p></td><td>2024-10-31T10:26:48.506Z</td></tr><tr><td>bolvan</td><td><p>Да, фоксик в 11 принимает системный DoH, если он настроен, и включает ECH</p></td><td>2024-10-31T10:27:46.644Z</td></tr><tr><td>KDS</td><td><p>Нет у меня настройки доха, у меня 21H2, а дох в систему научили вписывать с 23 только вроде</p></td><td>2024-10-31T10:28:14.930Z</td></tr><tr><td>zzzombie1989(zzzombie1989)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2011" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Да, фоксик в 11 принимает системный DoH, если он настроен, и включает ECH</p>
</blockquote>
</aside>
<p>Так вот почему у меня Cloudflire сразу в Фокс прописался, хотя раньше всё это руками приходилось делать. Видимо с роутера подхватился. Система - Windows 11 Pro 24H2</p></td><td>2024-10-31T10:31:27.107Z</td></tr><tr><td>abc555</td><td><p>Тогда вопрос, а как вы находите нужные стратегии, чуйкой или просто огромным опытом, яж не думаю что вы часами через blockcheck юзаете, скорей всего я думаю методом, до которого мне ещё нужно расти ?)</p></td><td>2024-10-31T10:31:56.392Z</td></tr><tr><td>bolvan</td><td><p>Блокчек дает инфу для размышления.<br>
Смотрится результат по нескольким ресурсам. Анализируется стабильность. Находится общий знаменатель, стратегии обьединяются</p></td><td>2024-10-31T10:33:22.231Z</td></tr><tr><td>abc555</td><td><p>Не. ну это я понимаю, а в ручную задать переменные пока нет такой возможности ? Ну выбрать там к примеру что нить и пусть оно юзает, подбирает цифры<br>
Я пока по старике vi /opt/zapret/config что нить поменял, затем<br>
/etc/init.d/zapret restart<br>
cd …<br>
rm -rf zapret-master/<br>
и так можно делать очень долго, но я просто наблюдаю, примерно время открытия страницы, правильно, не правильно, визуальная настройка, для меня так намного быстрее чем ждать часами.<br>
Думаю ускорить процесс в ручную использовать uci set</p></td><td>2024-10-31T10:35:55.255Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Для разных GGC, blockcheck выдает различные результаты.<br>
Прошу рассмотреть возможность работы по нескольким адресам с суммированием результатов проверки. Спасибо.</p></td><td>2024-10-31T10:38:14.777Z</td></tr><tr><td>bolvan</td><td><p>Автоматическое обьединение стратегий - это довольно сложная штука.<br>
Мини экспертная система. Пока не планируется</p></td><td>2024-10-31T10:48:04.418Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote quote-modified" data-post="1" data-topic="10880">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar">
    <a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880">GoodCheck - блокчек-скрипт для GoodbyeDPI, Zapret, ByeDPI</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    Новый билд: 
<a class="attachment" href="zapret-обсуждение-726/ntisRLkRucCSo2KaP0YNq5dixxr.zip">GoodCheck_v1.3.02.zip</a> (6,5 МБ) 
Тестовый билд с автоматической проверкой doh: 
<a class="attachment" href="zapret-обсуждение-726/a0CYAngSAAoJZnIvlZ4dQpr3soK.zip">GoodCheck_v1.3.06.zip</a> (6,5 МБ) 
Новый билд с отдельным чеклистом для Ютуба (проверяются только домены, нужные для его работы) 
<a class="attachment" href="zapret-обсуждение-726/hshievjMZuvnEKV35Zf7IrjkUiv.zip">GoodCheck_v1.3.07.zip</a> (6,5 МБ) 

Скрипт, похожий по функционалу на блокчек Zapret’a. Изначально делался для GDPI. Потом разросся в более универсальный и стал совместим с gdpi, zapret и byedpi. 
Как этим пользоваться? 

Кладёте всё в отдельную папку. Открываете config.cmd блокнотом…
  </blockquote>
</aside>
</td><td>2024-10-31T10:48:42.067Z</td></tr><tr><td>easyone11</td><td><p>объединение стратегий - это когда протестил условно 2 сайта и просто нашёл у них общие строки стратегий которые эвейлбл, в них смотришь по приоритету fake,split2,split.<br>
disorder применять только, если не работают вариант split2 или split.<br>
или под объединеием подразумевается что то другое?</p></td><td>2024-10-31T10:51:47.085Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Хотелось бы получить одновременный прогон всех GGC одной командой.  Пока приходится подставлять вручную, через пробел.</p>
<pre><code class="lang-auto">PKTWS_EXTRA="--dpi-desync-repeats=10" ./blockcheck.sh
rr2---sn-pivhx-n8vl.googlevideo.com rr7---sn-pivhx-n8vs.googlevideo.com rr1---sn-pivhx-n8vz.googlevideo.com
</code></pre>
<pre><code class="lang-auto">
* SUMMARY
ipv4 rr2---sn-pivhx-n8vl.googlevideo.com curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-fooling=badsum --dpi-desync-fake-tls=0x00000000
ipv4 rr7---sn-pivhx-n8vs.googlevideo.com curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=5 --dpi-desync-fake-tls=0x00000000
ipv4 rr1---sn-pivhx-n8vz.googlevideo.com curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=4 --dpi-desync-fake-tls=0x00000000
</code></pre></td><td>2024-10-31T13:16:16.138Z</td></tr><tr><td>doomer2007</td><td><p>Есть некоторое недопонимание с моей стороны. Для объединения стратегий нужно писать так</p>
<blockquote>
<p>–filter-tcp=80-443</p>
</blockquote>
<p>или так?</p>
<blockquote>
<p>–filter-tcp=80,443</p>
</blockquote></td><td>2024-10-31T13:21:51.941Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Первый делает порты с 80 по 443, второй только порты 80 и 443</p></td><td>2024-10-31T13:25:55.744Z</td></tr><tr><td>easyone11</td><td><p>в последней версии работает запятая, если тире это с 80 по 443</p></td><td>2024-10-31T13:25:58.963Z</td></tr><tr><td>doomer2007</td><td><p><a class="mention" href="/u/wigeance">@wigeance</a>, <a class="mention" href="/u/easyone11">@easyone11</a>, а если выше в конфиге указан параметр TPWS_PORTS=80,443, то я правильно понимаю, что в этом случае –filter-tcp=80-443 всё же равнозначен –filter-tcp=80,443?</p></td><td>2024-10-31T13:28:47.513Z</td></tr><tr><td>easyone11</td><td><p>до новой версии он тоже был указан, но работало только тире с 80 по 443<br>
так что видимо нет</p></td><td>2024-10-31T13:32:18.955Z</td></tr><tr><td>wigeance(Wigeance)</td><td><aside class="quote no-group" data-username="doomer2007" data-post="2025" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>TPWS_PORTS=80,443</p>
</blockquote>
</aside>
<p>Указывает какие порты будут перенаправленны силами ip/nftables на процесс tpws/nfqws.</p>
<aside class="quote no-group" data-username="doomer2007" data-post="2025" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>–filter-tcp=80,443</p>
</blockquote>
</aside>
<p>Указывает какие порты будут обработаны самим процессом в рамках этой стратегии. Т.е. можно гнать порты с 80 по 443 на процесс, а внутри процесса обрабатывать только 80 и 443, остальные порты будут перенаправляться, но не будут обработаны. (Так делать нежелательно, но никто не запрещает. Вы просто лишний трафик гоняете внутри роутера).</p></td><td>2024-10-31T14:08:42.286Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="bolvan" data-post="1929" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ok, пусть будет 12. более-менее актуальные версии pfsense на 12 минимум.<br>
а остальные сами соберут</p>
</blockquote>
</aside>
<p>C 12 в VM тоже проблема - она уже в EOL и “pkg install -y gmake” обламывается. Тамошний make вроде не подходит для сборки если я правильно понял. А так в 14.1 все норм собирается.</p>
<aside class="quote no-group" data-username="bolvan" data-post="1929" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>вот это плохо. собирается под cygwin, а не mingw</p>
</blockquote>
</aside>
<p>Просто лень было. Теперь собрал под mingw.<br>
Кстати, binaries/win64/cygwin1.dll меньше 1 mb - он самосборный или из какой-то прошлой версии? Из офрепо больше трех mb выходит.</p></td><td>2024-10-31T14:28:10.738Z</td></tr><tr><td>abc555</td><td><p>Если я правильно понял, то в стратегии указывается в начале --filter-tcp=443, а если не указывать, то будет работать по всем портам 80 и 443.<br>
Не знаю правильно или нет, но для ютуба стратегию я настроил отдельно указав --hostlist=/opt/zapret/ipset/ тут лист ютуба в конце добавив --new, для всего остального настроил по другому чтоб не слал повторы  --dpi-desync-repeats и фейки --dpi-desync-fake-tls, так как работает и без повторов и фейков всё остальное, чем меньше флуда, тем лучше, меньше привлекаешь к себе внимание.<br>
Параметр --dpi-desync-fake-tls меняет заголовок к примеру на гугл, то есть не на рутрекер вы зашли, а на гугл, так может увидеть пров<br>
параметр --dpi-desync-repeats отправляет количество пакетов которые указаны в --dpi-desync=, то есть сколько раз будет повторов одних и тех же пакетов.<br>
Было бы классно если бы bolvan более подробней написал инструкцию, желательно с примерами, много параметров о которых мне так до сих пор ничего не известно, от куда брать значение, как оно хотя бы должно выглядеть на примере, чтоб просто попробовать чтоб понять</p></td><td>2024-10-31T14:51:38.944Z</td></tr><tr><td>bolvan</td><td><p>И это тоже.<br>
Но еще надо выбрать набор ограничителей для фейков.<br>
Если есть возможность использовать datanoack, здорово.<br>
Если связался с TTL, то надо выбирать максимальный из рабочих. Если он оказался довольно большой, лучше присобачить еще fooling. Какой - зависит от тестов. Работает ли badsum , работает ли badseq. На http может badseq вешать, на https работать. и так далее</p></td><td>2024-10-31T15:03:33.645Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="spv82" data-post="2028" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>C 12 в VM тоже проблема - она уже в EOL и “pkg install -y gmake” обламывается. Тамошний make вроде не подходит для сборки если я правильно понял. А так в 14.1 все норм собирается.</p>
</blockquote>
</aside>
<p>Подходит. BSDшный make использует BSDMakefile, если он есть, и Makefile, если его нет.<br>
В gnu make можно собрать через “make bsd”.<br>
Никаких пакетов дополнительных не надо. Стандартная инсталяция BSD 11+ по make собирает весь проект.<br>
Нужно как-то максимум к 12-й прикрутить, и чтобы в будущем оно внезапно не перестало собираться, потому что ссылается на чей-то репозиторий, который дропнул поддержку.<br>
Иначе просто смысла нет. Половина сенсников отвалится.</p>
<p>win64/zapret-winws я дропнул,он остался только в bundle<br>
в binaries теперь только одни бинарики и ничего больше. максимально подходит для автоматизации билда</p></td><td>2024-10-31T15:05:08.309Z</td></tr><tr><td>abc555</td><td><p>Напишите пожалуйста инструкцию чтоб понятней было рядовому пользователю о параметрах, 99% всех кто юзает запрет не знает фактически ничего, копируют у друг друга стратегии.<br>
Вы просто там всё написали как диссертацию, что не каждый профессор догонит, не говоря уже уже про простых юзеров )</p></td><td>2024-10-31T15:10:27.585Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="2029" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Было бы классно если бы bolvan более подробней написал инструкцию, желательно с примерами, много параметров о которых мне так до сих пор ничего не известно, от куда брать значение, как оно хотя бы должно выглядеть на примере, чтоб просто попробовать чтоб понять</p>
</blockquote>
</aside>
<p>Талмуда мало, Коран писать пора ? И Библию заодно. 3 в одном.<br>
Там все технически описано. Но конечно для тыкальщиков нажмите тут, возьмите здесь, поместите туда - такого мало</p>
<p>Тема слишком сложная. Не получится тут все без понимания провернуть.<br>
Как ни обьясняй. Нельзя выполнить шаги раз два три и получить результат. Не работает это<br>
Или пусть рядовых однокнопочники ведут, тратят дни и ночи на отслеживание и обновление стратегий под провайдеры. А юзер выберет провайдера и нажмет СТАРТ</p></td><td>2024-10-31T15:10:50.230Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="spv82" data-post="2028" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>Кстати, binaries/win64/cygwin1.dll меньше 1 mb - он самосборный или из какой-то прошлой версии? Из офрепо больше трех mb выходит.</p>
</blockquote>
</aside>
<p>upx-ом пожал.  мне важно, чтобы в основной репе было поменьше, потому что качают на роутеры в tmpfs. На 64 мб еще влезает, но если раздувать, может и не влезть. А делать спец дистр для openwrt мне как-то не хочется.</p></td><td>2024-10-31T15:15:03.808Z</td></tr><tr><td>abc555</td><td><p>Так, хотя бы чтоб немного было понятней обычным людям и сразу будет меньше лишних вопросов, наоборот будет более продвинутые вопросы, которые дадут тему для размышления, подкинут новые идеи, а так все тыкают пальцем в небо, все поголовно, они просто ничего не пишут, просто читают, а если и пишут, то не знают как спросить, так как не понимают что спрашивать )</p></td><td>2024-10-31T15:15:29.566Z</td></tr><tr><td>bolvan</td><td><p>Я им всем ответил. Это сложная тема. Если вы чувствуете, что вам тяжело, оставьте это занятие.<br>
Вы все равно не поймете, вы вряд ли сделаете хорошо, а мне нянькой работать никакого резона нет.<br>
Поддержка простого решения здесь выливается в колоссальные затраты со стороны разработчиков</p></td><td>2024-10-31T15:16:34.627Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2030" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если есть возможность использовать datanoack, здорово.</p>
</blockquote>
</aside>
<p>мне недавно бан прилетел от cf при использовании datanoack, может конечно совпадение, потому что я и другие стратегии тестил в это время)<br>
пришлось ip менять</p></td><td>2024-10-31T15:17:31.823Z</td></tr><tr><td>abc555</td><td><p>Та не, я про параметры, о которых Вы написали на гитхабе, более поподробней и с примерами, чтоб можно было понять что это и для чего</p></td><td>2024-10-31T15:18:28.484Z</td></tr><tr><td>bolvan</td><td><p>В талмуде описано для чего. Как еще обьяснить, это просто буковки для юзеров.<br>
Я не могу обьяснить когда и куда их надо вставлять.<br>
Чтобы это понять, надо понять для чего буковки</p></td><td>2024-10-31T15:19:15.512Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="uwu" data-post="2037" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>мне недавно бан прилетел от cf при использовании datanoack, может конечно совпадение, потому что я и другие стратегии тестил в это время)<br>
пришлось ip менять</p>
</blockquote>
</aside>
<p>Использую. Никто еще не банил.<br>
Но если стремно, можно еще TTL добавить, чтобы не доходило</p></td><td>2024-10-31T15:20:47.184Z</td></tr><tr><td>abc555</td><td><p>Я ведь не про стратегию и куда её вставлять, просто немного простыми словами описание некоторых параметров и всё, немного более понятней чтоб было, сам запрет написан по уму, в принципе всё понятно, параметры некоторые, вот там смотришь на них и х… его знает, для чего они и как их проверить</p></td><td>2024-10-31T15:28:16.170Z</td></tr><tr><td>bolvan</td><td><p>zapret написан технически, а не юзеро ориентированным.<br>
Он пляшет от гибкого решения задачи по обману DPI, а не открытия сайтов простым действием.<br>
И именно благодаря этому он является инструментом, а не картинкой, требующей бесконечного обновления от благодетелей.</p>
<p>Поконкретнее какие параметры непонятны ?</p></td><td>2024-10-31T15:37:16.231Z</td></tr><tr><td>abc555</td><td><p>У прова свитч настроен так, что если много флуда, автоматом банит ip на 5-10 минут, а потом он может логи почитать и увидит и подумает что вы флудер, повторные варианты бана, начнёт за вами наблюдать уже, вариантов очень много почему пошел флуд, но лучше так больше не делать</p></td><td>2024-10-31T15:39:04.394Z</td></tr><tr><td>bolvan</td><td><p>Свитч - это простое устройство по перекидыванию трафика на уровне L2.<br>
Что для него есть флуд, если он на гигабит расчитан ? Ему наплевать что он кидает.<br>
Вот раздача торентов - это флуд. Но на него провайдеры вполне себе расчитаны с 100-1000 мб тарифами. Им им тоже все равно что вы в сеть выплевываете. Пока это не является атакой</p></td><td>2024-10-31T15:40:44.511Z</td></tr><tr><td>abc555</td><td><p>Если конкретней, то про эти<br>
tcp сегментом<br>
–dpi-desync-split-seqovl-pattern=|0xHEX<br>
–dpi-desync-badseq-increment=&lt;int|0xHEX&gt;<br>
–dpi-desync-badack-increment=&lt;int|0xHEX&gt;<br>
–dpi-desync-any-protocol=0|1</p>
<p>про параметр –dpi-desync-any-protocol=0|1 понятно, любой протокол, а выше вот эти три</p></td><td>2024-10-31T15:41:11.090Z</td></tr><tr><td>Chep</td><td><aside class="quote no-group" data-username="bolvan" data-post="1987" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Он идет слева направо. От первого профиля до последнего, пока не будет найдено совпадение.<br>
Поэтому положение важно.</p>
</blockquote>
</aside>
<p>Т.е. я правильно понимаю, что например в начале идет <code>--wf-* --dpi-desync=*</code> и пока дальше он не наткнется на аргументы того же типа, будет использовать то что было до этого, т.е. например если было  <code>--wf-l3=ipv4 --dpi-desync=fake</code> а дальше будет <code>--wf-l3=ipv6 --dpi-desync=split</code>, то в таком случае заменится все, а если будет <code>--dpi-desync=split</code> то заменится только фейк на сплит?</p></td><td>2024-10-31T15:42:55.561Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="abc555" data-post="2043" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>У прова свитч настроен так</p>
</blockquote>
</aside>
<p>там от cloudflare заглушка прилетела (не от прова), но скорее всего я сам намудрил что-то со стратегиями)</p>
<details>
<summary>
Спойлер</summary>
<p><img src="zapret-обсуждение-726/d708433d54acac46fba5f6c99532a55558dac54e.png" alt="изображение" data-base62-sha1="uGgmfeE2elBY5TeFr519r7qCn4G" width="623" height="286"></p>
</details></td><td>2024-10-31T15:44:32.447Z</td></tr><tr><td>bolvan</td><td><p>seqovl - вообще достаточно сложная штука, одна из самых сложных в zapret.<br>
Без понимания механизмов работы tcp ее вряд ли можно понять.<br>
Но если кратко, то это механизм вставления скрытых фейков. Замешивание фейка и реала в одном пакете, чтобы их сложнее было разделить, DPI нихрена не понял, а сервер воспринял лишь передаваемое клиентом - оригинал.</p>
<p>badseq - тоже относится к пониманию tcp. что такое sequence. Высылание пакета с sequence number, отстоящим от текущего на указанный инкремент. ack делает тоже самое на ack sequence.</p>
<p>desync any protocol включает реакцию на пакеты с произвольным содержимым. В обычном виде реакция идет только на пакеты с распознанным известным протоколом</p>
<p>Обычному юзеру это обьяснять - все равно что пытаться просто рассказать об интегральных уравнениях. Интересно, но нихрена не понятно</p></td><td>2024-10-31T15:45:21.632Z</td></tr><tr><td>abc555</td><td><p>а у меня тоже такое было, методом тыка и выскакивала эта табличка и я понял что не подходит )</p></td><td>2024-10-31T15:45:36.831Z</td></tr><tr><td>abc555</td><td><p>Вот хотелось бы понять эту сложную штуку, мне к примеру чтоб понять, достаточно привести несколько примеров и всё,  а дальше я разберусь сам, крайний случай вынесу мозг интеллекту.<br>
Потому что как раз вот этой штуки мне и не хватает чтоб было вообще всё хорошо</p></td><td>2024-10-31T15:47:53.475Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Chep" data-post="2046" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/chep/48/6694_2.png" class="avatar"> Chep:</div>
<blockquote>
<p>Т.е. я правильно понимаю, что например в начале идет <code>--wf-* --dpi-desync=*</code> и пока дальше он не наткнется на аргументы того же типа, будет использовать то что было до этого, т.е. например если было <code>--wf-l3=ipv4 --dpi-desync=fake</code> а дальше будет <code>--wf-l3=ipv6 --dpi-desync=split</code>, то в таком случае заменится все, а если будет <code>--dpi-desync=split</code> то заменится только фейк на сплит?</p>
</blockquote>
</aside>
<p>нет. --wf это аналог iptables. Это управление перехватом трафика из ядра windows.<br>
Оно глобально для инстанса winws. Все равно где параметр.<br>
А вот --filter относится уже к профилям. Что из перехваченного куда раскидываем</p></td><td>2024-10-31T15:49:19.247Z</td></tr><tr><td>bolvan</td><td><p>Блокчек seqovl тоже тестирует. Можно посмотреть там что он делает и попытаться понять почему именно так, а не иначе</p></td><td>2024-10-31T15:51:12.028Z</td></tr><tr><td>Chep</td><td><p>Понял, спасибо <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-10-31T15:51:45.427Z</td></tr><tr><td>abc555</td><td><p>Ну ладно попробую его как нить запустить снова, а скажите, блокчек использует icmp или нет</p></td><td>2024-10-31T15:53:17.115Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2048" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но если кратко, то это механизм вставления скрытых фейков. Замешивание фейка и реала в одном пакете, чтобы их сложнее было разделить,</p>
</blockquote>
</aside>
<p>а можно глупый вопрос? я правильно понимаю, что если seqovl без паттерна, то ttl не нужен, а если с фейк файлом, то нужен?<br>
или там также как и с fake используется дефолтный фейк, если не указан отдельный паттерн?</p>
<p>я на практике не вижу какого либо эффекта от ttl при использовании seqovl (в том числе с фейк паттерном)</p></td><td>2024-10-31T15:55:01.735Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="doomer2007" data-post="2025" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>если выше в конфиге указан параметр TPWS_PORTS=80,443, то я правильно понимаю, что в этом случае –filter-tcp=80-443 всё же равнозначен –filter-tcp=80,443?</p>
</blockquote>
</aside>
<p>Если используется tpws, то можно сказать да.<br>
Профиль берет порты с 80 по 443 в первом случае, 80 или 443 во втором. Но кроме 80 и 443 все равно ничего не может придти</p></td><td>2024-10-31T15:55:17.430Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="2054" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>блокчек использует icmp или нет</p>
</blockquote>
</aside>
<p>Единственное место, где используется icmp echo, это проверка доступности ipv6 протокола</p>
<pre><code class="lang-auto"># yandex public dns
pingtest 6 2a02:6b8::feed:0ff &amp;&amp; IPVS_def=46
</code></pre></td><td>2024-10-31T15:56:29.840Z</td></tr><tr><td>abc555</td><td><p>понял, спасибо, а то у меня всё заблокировано и заходить всё открывать не очень хочется</p></td><td>2024-10-31T15:58:20.396Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="uwu" data-post="2055" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>а можно глупый вопрос? я правильно понимаю, что если seqovl без паттерна, то ttl не нужен, а если с фейк файлом, то нужен?<br>
или там также как и с fake используется дефолтный фейк, если не указан отдельный паттерн?</p>
</blockquote>
</aside>
<p>seqovl не вносит никаких дополнительных требований к ограничителям и является всего лишь модификацией стандартных split2,split,disorder2,disorder.<br>
Все с “2” не шлет фейков, без “2” - шлет.</p>
<p>Это, кстати, еще больше скрывает фейкование, потому что не требует каких-либо модификаторов, которые сразу видны, если используется “2” вариант</p>
<p>Паттерн всегда есть, по умолчанию состоит из ноликов, но его можно переопределить в параметре.</p></td><td>2024-10-31T15:59:34.358Z</td></tr><tr><td>uwu(uwu)</td><td><p>я только чуть чуть понял(<br>
но насколько я понял ttl отсюда можно убрать:<br>
<code>--dpi-desync=split2 --dpi-desync-split-seqovl=308 --dpi-desync-split-seqovl-pattern="C:\zapret\zapret-win-bundle-master\blockcheck\zapret\files\fake\tls_clienthello_vk_com.bin" --dpi-desync-ttl=5</code></p></td><td>2024-10-31T16:05:05.248Z</td></tr><tr><td>bolvan</td><td><p>Да, если split2, то можно убрать</p></td><td>2024-10-31T16:05:34.883Z</td></tr><tr><td>beneficial92</td><td><p>За пояснения спасибо.<br>
Посмотрел по форкам и пуллам. Выяснилось, что гитхаб вообще <a href="https://github.com/bol-van/zapret/commit/7443de517a0544c722d0286d17ce5b1af1fb3570" rel="noopener nofollow ugc">помнит всё</a> вплоть до v.3, просто помалкивает.<br>
А вот <a href="https://github.com/bol-van/zapret/commit/626b1444dcdb2674490386020cb0ae2dfc01c903" rel="noopener nofollow ugc">тут</a>, если кому интересно, wsize впервые объявлен устаревшим.</p></td><td>2024-10-31T16:49:58.870Z</td></tr><tr><td>rem</td><td><p>Вот интересное про github: <a href="https://habr.com/ru/companies/ruvds/articles/835448/" class="inline-onebox" rel="noopener nofollow ugc">Любой может получить доступ к удалённым и приватным данным репозиториев GitHub / Хабр</a></p></td><td>2024-10-31T17:08:13.884Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Имеется ли разница для применения?</p>
<pre><code class="lang-auto">--filter-tcp=443 --dpi-desync=fake,split --dpi-desync-ttl=5 --dpi-desync-fake-tls=0x00000000 --dpi-desync-repeats=10 &lt;HOSTLIST&gt; --new --hostlist=/opt/zapret/ipset/mamba.txt --dpi-desync=fake --dpi-desync-ttl=4 --new
--filter-tcp=443 --hostlist=/opt/zapret/ipset/mamba.txt --dpi-desync=fake --dpi-desync-ttl=4 --new --dpi-desync=fake,split --dpi-desync-ttl=5 --dpi-desync-fake-tls=0x00000000 --dpi-desync-repeats=10 &lt;HOSTLIST&gt; --new 
MODE_FILTER=hostlist
</code></pre></td><td>2024-10-31T17:42:24.423Z</td></tr><tr><td>_rv</td><td><p>Кто-нибудь может поделиться общими соображениями?</p>
<p>Для googlevideo у меня работает <code>fake,split2 --dpi-desync-fooling=md5sig  --dpi-desync-repeats=11 --dpi-desync-fake-tls=&lt;...&gt;</code> , но время от времени видео открываются с задержками, Чтобы это как-то побороть, увеличивается параметр -dpi-desync-repeats При чем в разное время достаточными бывают разные значения - от дефолтного 11, до 20.</p>
<p>И тут два вопроса.</p>
<ul>
<li>при таком поведении стоит ли пытаться найти более адекватную стратегию, при которой повторы не будут нужны (и вообще возможно ли такое в теории) или стоит в целом удовлетвориться таким методом?</li>
<li>если увеличение-dpi-desync-repeats приемлемая тактика, то есть ли смысл увеличить лимит с 20 до более высоких значений?</li>
</ul></td><td>2024-10-31T18:20:15.147Z</td></tr><tr><td>uwu(uwu)</td><td><p>а если фейк на хекс поменять?<br>
например 0x16030102920100028e03035672ea15594162966e8a144297c497ddace5d546af7a4a0414a946fa52023cf720b0220c217abb1db321abbf01985cf3d07c61367c2ba5eff307b0f6f042448077</p></td><td>2024-10-31T18:24:38.757Z</td></tr><tr><td>Ori</td><td><p>У меня такая же стратегия, но без повторов и с фейком 0x160303. Попробуйте, может сработает. Ну и задержки могут быть вызваны не только стратегией, но и каким-то проблемным сервером или серверами. Можно попробовать заблочить какую-нибудь группу и посмотреть на результат.</p></td><td>2024-10-31T18:26:29.131Z</td></tr><tr><td>_rv</td><td><p>Да, без репитов завелось, спасибо.</p></td><td>2024-10-31T18:31:02.588Z</td></tr><tr><td>electrifying</td><td><p>Стоит ли апдейтится на самую последнюю версию или можно сидеть на старой, где еще старый config и первоначальная настройка была</p></td><td>2024-10-31T18:39:22.043Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Если у вас и сейчас всё отлично работает - то очевидно можно не обновляться.</p></td><td>2024-10-31T18:52:14.158Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="Ori" data-post="2067" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>задержки могут быть вызваны не только стратегией, но и каким-то проблемным сервером или серверами. Можно попробовать заблочить какую-нибудь группу</p>
</blockquote>
</aside>
<p>да, тут проблемы многоэтажные. В фаерфоксе стратегия работает прекрасно для всех видео. В хроме (на самом деле, в проге на базе electron) - опять задержки. При чем на некоторых видео всё очень плохо, на некоторых всё открывается мгновенно.</p></td><td>2024-10-31T19:16:47.640Z</td></tr><tr><td>doomer2007</td><td><aside class="quote no-group" data-username="bolvan" data-post="2059" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Все с “2” не шлет фейков, без “2” - шлет.</p>
</blockquote>
</aside>
<p>Это вообще кем-то общепринятые названия, или чисто ваша предумка. Я к тому, почему не называть вместо split2 split-nofake например?</p></td><td>2024-10-31T19:54:22.993Z</td></tr><tr><td>doomer2007</td><td><p>В случае NFQWS_PORTS_TCP=80,443, логика же будет такой же? Мы этой переменной обозначаем диапазон, а значит несмотря на то, что тут –filter-tcp=80-443 тоже диапазон,он не сможет работать с другими портами кроме тех, что указаны в NFQWS_PORTS_TCP</p></td><td>2024-10-31T20:29:59.492Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="doomer2007" data-post="2072" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>Это вообще кем-то общепринятые названия, или чисто ваша предумка. Я к тому, почему не называть вместо split2 split-nofake например?</p>
</blockquote>
</aside>
<p>Не всегда изначально решения принимаются верно, потом приходится тащить груз совместимости.<br>
Сейчас бы я назвал split=split4.  Цифра означает количество пакетов. 2 - разделить на 2 , 4 - разделить на 2 и послать обрамляющих 2 фейка<br>
Сначала я сделал split как split2. Потом подумал, и решил, что лучше еще сильнее запутать DPI, засунув фейки. Но еще потом решил сделать версию без фейков, и назвал ее split2</p></td><td>2024-11-01T05:36:39.791Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="doomer2007" data-post="2073" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/doomer2007/48/9833_2.png" class="avatar"> doomer2007:</div>
<blockquote>
<p>В случае NFQWS_PORTS_TCP=80,443, логика же будет такой же? Мы этой переменной обозначаем диапазон, а значит несмотря на то, что тут –filter-tcp=80-443 тоже диапазон,он не сможет работать с другими портами кроме тех, что указаны в NFQWS_PORTS_TCP</p>
</blockquote>
</aside>
<p>Да, именно так. Не надо воспринимать конфиг как нечто единое и волшебное.<br>
Есть стадия перехвата через ip/nf tables. Есть стадия обработки в nfqws.<br>
Стадии управляются раздельно. Точно так же, как если делать руками, придется написать самому таблес и самому запустить nfqws с параметрами.<br>
nfqws получает лишь то, что дают tables</p></td><td>2024-11-01T05:39:05.614Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Доброго, я правильно понимаю что если в регионе заблокирован гугл и ютуб то quic_google и tls_google не имеет смысла использовать? Может есть такие же только <a href="http://ya.ru" rel="noopener nofollow ugc">ya.ru</a> например.</p></td><td>2024-11-01T09:02:26.299Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Да, тогда другой фейк нужен, можно и от <a href="http://ya.ru" rel="noopener nofollow ugc">ya.ru</a>, если и он не заблочен, конечно <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"><br>
你好 ?</p></td><td>2024-11-01T09:09:23.717Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Где взять то от ya. ru</p></td><td>2024-11-01T09:16:10.274Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Ручками сделать <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"> Готовых решений будет все меньше и меньше с каждым днем. Привыкайте <img src="https://ntc.party/images/emoji/twitter/blush.png?v=12" title=":blush:" class="emoji" alt=":blush:" loading="lazy" width="20" height="20"></p></td><td>2024-11-01T09:17:05.836Z</td></tr><tr><td>spv82</td><td><p>В папке files/fake есть vk, gosuslugi. Или сами сделайте <a href="https://gist.github.com/spvkgn/82b396ff3f9ba0c19d1536a1e5c4777c" class="inline-onebox" rel="noopener nofollow ugc">Capture TLS Client Hello · GitHub</a></p></td><td>2024-11-01T09:19:02.396Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><div class="spoiler">
<p>Ну и зря. А wireshark кто будет изучать? <img src="https://ntc.party/images/emoji/twitter/laughing.png?v=12" title=":laughing:" class="emoji" alt=":laughing:" loading="lazy" width="20" height="20"></p>
</div></td><td>2024-11-01T09:20:49.793Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Обложки грузит в ютубе, не грузит я так понял quic. С помощью этого можно его сделать?</p></td><td>2024-11-01T09:22:45.760Z</td></tr><tr><td>abc555</td><td><p>Отключите quic, нафиг он вам нужен, для чего он вам, чтоб просто было ?</p></td><td>2024-11-01T11:14:58.045Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="bolvan" data-post="2031" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Нужно как-то максимум к 12-й прикрутить, и чтобы в будущем оно внезапно не перестало собираться, потому что ссылается на чей-то репозиторий, который дропнул поддержку.<br>
Иначе просто смысла нет. Половина сенсников отвалится.</p>
</blockquote>
</aside>
<p>В общем, прикрутилось - 11.4. Благо, можно обойтись без VM - <a href="https://hub.docker.com/r/empterdose/freebsd-cross-build" rel="noopener nofollow ugc">https://hub.docker.com/r/empterdose/freebsd-cross-build</a><br>
Посмотрите там freebsd и mac - все ли как должно быть? <a href="https://github.com/spvkgn/zapret/releases" class="inline-onebox" rel="noopener nofollow ugc">Releases · spvkgn/zapret · GitHub</a><br>
Еще нужно линуксовые довести до ума. Если я правильно понял, у вас используется openwrt-шный gcc-тулчейн для сборки? Тогда можно будет им же собирать.</p></td><td>2024-11-01T11:55:04.202Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Как это сделать на keenetic?</p></td><td>2024-11-01T12:15:03.384Z</td></tr><tr><td>zzzombie1989(zzzombie1989)</td><td><aside class="quote no-group" data-username="abc555" data-post="2083" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Отключите quic, нафиг он вам нужен, для чего он вам, чтоб просто было ?</p>
</blockquote>
</aside>
<p>Факт. Ютуб вообще на старом протоколе висит. Плюс ко всему вместо ускорения загрузки видео по QUIC мы получаем обратный эффект. Если на вашем провайдере работает связка с отключенным QUIC и Kyber - пользутесь именно ей. Если на Лисе сидите, то там есть более эффективный вариант ускорения загрузки видео с Ютуба:</p>
<pre><code class="lang-auto">network.buffer.cache.size = 262144
network.buffer.cache.count = 128
</code></pre></td><td>2024-11-01T12:17:02.319Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="spv82" data-post="2084" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>В общем, прикрутилось - 11.4. Благо, можно обойтись без VM - <a href="https://hub.docker.com/r/empterdose/freebsd-cross-build">https://hub.docker.com/r/empterdose/freebsd-cross-build</a><br>
Посмотрите там freebsd и mac - все ли как должно быть? <a href="https://github.com/spvkgn/zapret/releases">Releases · spvkgn/zapret · GitHub </a><br>
Еще нужно линуксовые довести до ума. Если я правильно понял, у вас используется openwrt-шный gcc-тулчейн для сборки? Тогда можно будет им же собирать.</p>
</blockquote>
</aside>
<p>Отмечу еще раз, что мне важен общий размер binaries. Потому что это все будет скачиваться в /tmpfs, где от силы есть 15-20 мб в RAM. Лучше расчитывать на 15.<br>
Потому все архитектуры, которых нет на роутерах, мы выкидываем.<br>
Лучше закоментировать в коде, чтобы было на всякий случай, но собирать не нужно.</p>
<p>все linux бинарики, кроме mips64, пакуем upx --lzma. upx не поддерживает mips64.<br>
другие архитектуры - нет. upx испортит macos сдвоенный бинарик</p>
<p><strong>freebsd</strong> - зачет. оставляем только x64<br>
<strong>macos</strong> - зачет. считаю, что было собрано из моего мейкфайла, а там установлена достаточно старая ось компатибилити. сиерра, вроде. в vmware под big sur норм.<br>
<strong>win32,win64</strong> - все хорошо, кроме cygwin1.dll. его надо паковать upx<br>
<strong>mips</strong> : оставляем только mipssf, mipselsf. первый идет в mips32r1-msb, второй  - в mips32r1-lsb. на тплинках , где родняк собран как mips release 2, работает.<br>
qemu-mips-static/qemu-mipsel-static -cpu 4Kc тоже работает.<br>
<strong>mips64</strong> : зачет. оставляем только mips64, mipsel64 - нет.<br>
qemu-mips64-static -cpu MIPS64R2-generic tpws<br>
Need port number<br>
<strong>arm</strong> - оставляем только arm, все hf и v7 выбрасываем. arm на стареньком ведроиде mediatek работает. qemu cortex-a9 и arm1026 тоже. будем считать, что зачет<br>
<strong>arm64</strong> - тут особо вариантов нет. на qemu-arm64-static работает. будем считать, что зачет<br>
<strong>ppc</strong> -  аналогично. qemu-ppc-static mpc8540 работает. будем считать, что зачет<br>
<strong>x86_64</strong> - зачет. но надо добавить tpws_wsl.tgz, где в корне единственный файл tpws с chmod 755. это надо для дистро-лесс установки в WSL upx паковать файл внутри tar.gz не надо<br>
<strong>x86</strong> - тут фейл. надо собирать под i586.<br>
qemu-i386-static -cpu pentium-v1 tpws<br>
qemu: uncaught target signal 4 (Illegal instruction) - core dumped<br>
Illegal instruction<br>
qemu-i386-static -cpu pentium2 tpws<br>
qemu: uncaught target signal 4 (Illegal instruction) - core dumped<br>
Illegal instruction<br>
qemu-i386-static -cpu pentium3 tpws<br>
Need port number</p>
<p>тулчейны можно использовать и для openwrt, как сейчас сделано.<br>
но там есть момент. не нашел тулчейн для arm soft float. может плохо искал.<br>
в итоге взял первый попавшийся арм постарее, сделал в конфиге SOFT_FLOAT=y и пересобрал SDK<br>
но, наверно, нет смысла морочиться. qemu тесты показывают, что и так все хорошо. кроме x86</p></td><td>2024-11-01T13:01:09.186Z</td></tr><tr><td>PeFeD(Fedor)</td><td><p>Запросы tcp/443 и udp/443 генерит ваш браузер (браузеры). А вовсе не роутер.<br>
Вам надо в конфиги Лисы/Хрома или чего там у вас…</p></td><td>2024-11-01T13:11:56.613Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="zzzombie1989" data-post="2086" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zzzombie1989/48/10205_2.png" class="avatar"> zzzombie1989:</div>
<blockquote>
<p>Если на Лисе сидите, то там есть более эффективный вариант ускорения загрузки видео с Ютуба:</p>
<pre><code class="lang-auto">network.buffer.cache.size = 262144
network.buffer.cache.count = 128
</code></pre>
</blockquote>
</aside>
<details>
<summary>
Оффтоп</summary>
<p>По-моему это добро не работает на DASH. Т.е. когда видео разбивается на кучу мелких файлов, а пользователю просто отправляется ссылка на m3u8 плейлист. Единственный действенный способ заставить ютуб буферизировать большой объем данных - переключиться на HLS, но тогда будет ограничение качества - максимум 720p.</p>
</details></td><td>2024-11-01T14:39:33.214Z</td></tr><tr><td>qwerty23</td><td><p>Добрый вечер! Подскажите пожалуйста, zapret от flowseal безопасен? : <a href="https://github.com/Flowseal/zapret-discord-youtube" class="inline-onebox" rel="noopener nofollow ugc">GitHub - Flowseal/zapret-discord-youtube</a>  я не силён в программировании. Мне нужно установить и чтобы просто работало, без всяких манипуляций с файлами.</p></td><td>2024-11-01T16:20:09.958Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Я думаю самый безопасный это оригинал bolvan/zapret все остальное под вопросом.</p></td><td>2024-11-01T16:30:59.145Z</td></tr><tr><td>serpen(VL)</td><td><p>по идее <strong>flowseal</strong> использует оригинальные файлы из запрета под винду, которые были на момент его релиза в репозитории bolvan, но со своими стратегиями и фиксами, он более почищен и юзер френдли с несколькими стратегиями, но не факт что они сработают. Однако это лучше для человека не смыслящего в этом и не понимающего в этом даже при чтении ридми на оригинальном запрете bolvan решение чтобы хотя бы попробовать. У меня так его конфиг с</p>
<pre><code class="lang-auto">--filter-udp=443 --hostlist="list-general.txt" --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic="%BIN%quic_initial_www_google_com.bin" --new ^
--filter-udp=50000-50100 --ipset="ipset-discord.txt" --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new ^
--filter-tcp=80 --hostlist="list-general.txt" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="list-general.txt" --dpi-desync=fake,split --dpi-desync-autottl=5 --dpi-desync-repeats=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls="%BIN%tls_clienthello_www_google_com.bin"
</code></pre>
<p>довольно хорошо завелся на ютуб и дискорд</p></td><td>2024-11-01T16:37:33.867Z</td></tr><tr><td>bolvan</td><td><p>Тот вариант работает по принципу 1 2 3 … 10<br>
ткни на что-нибудь. если не сработало, переходи к следующему.<br>
не сработало 10 , значит несудьба<br>
Иссуес, что не работает, там тоже полно.</p>
<p>Что касается вопроса безопасности, всегда можно в bin заменить содержимое на binaries/win64 из оригинала</p></td><td>2024-11-01T16:45:13.322Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>выбираю в blockchek 5 попыток (win7x64sp1)</p>
<p>получаю на одной и тойже стратегии рандомно (нет взаимосвязи какая попытка из 5 или соотношение сколько каких из 5)</p>
<p>и Авалибаблы и таймауты(или даже ошибки)</p>
<p>об чём это с большей вероятностью говорит?<br>
-сам сайт здесь и сейчас глючит или перегружен<br>
–или стратегия dpi не пробивает, но “пробивает”</p>
<p>случаи когда 5из5 одинаково тоже есть и с ними яснее</p></td><td>2024-11-01T16:57:24.732Z</td></tr><tr><td>bolvan</td><td><p>Нестабильность стратегии чаще всего вызвана балансировкой нагрузки, когда в одном случае обрабатывает один набор DPI, а в другом - другой. И обходятся не все варианты<br>
Но может и сайт тоже глючить. Надо на других тоже проверить</p></td><td>2024-11-01T17:02:34.157Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ок<br>
просто на днях заметил нестабильность и пришлось новую подбирать<br>
и на удивление от зубодробительной старой (много всего) - “упростилось” до fake +datanoack<br>
но “взамен” quic совсем никак не работает на сайте на котором доподлинно был…</p></td><td>2024-11-01T17:08:26.480Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>и кстати “легко давать советы чем сделать самому” но умений нет…</p>
<p>в идеальном идеале надо бы переделать логику blockcheck в плане мультидоменных проверок</p>
<p>а то сейчас - равноценно N запусков по одному домену</p>
<p>ни выигрыша по времени - ни главное - сопоставления удачных стратегий для разных доменов</p>
<p>вот если бы найдя удачную для первого домена с этой же стратегией тутже тестились следующие - минимум был бы выигрыш во времени. а в идеале только если все N доменов с ней удачны - делался бы однозначный вывод</p>
<p>щас кстати такого не наблюдаю - но раньше крайне муторно было искать универсальный способ (ещё на gbd) когда разные домены пробивались по разному из-за магистральных dpi. щас либо маршруты поменяли либо (и вот это интересно) стали ставить некий флаг что нижестоящий dpi “одобрил”  - и если это так: Новое поле для дурения в попытках сей флаг найти и выставлять</p></td><td>2024-11-01T17:40:11.193Z</td></tr><tr><td>electrifying</td><td><p>А я могу строку --filter-tcp=80 закомментировать если мне не требуется вообще какой-либо обход для http?</p></td><td>2024-11-01T18:07:40.039Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2097" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>вот если бы найдя удачную для первого домена с этой же стратегией тутже тестились следующие - минимум был бы выигрыш во времени. а в идеале только если все N доменов с ней удачны - делался бы однозначный вывод</p>
</blockquote>
</aside>
<p>Можно сделать такой режим, когда стратегии прогоняются для всех доменов сразу, и успешной считается та, что прошла для всех</p></td><td>2024-11-01T19:02:22.544Z</td></tr><tr><td>bolvan</td><td><p>Можно. Но еще надо убрать из перехвата порт 80, чтобы не насиловать изделие, на котором zapret работает</p></td><td>2024-11-01T19:05:28.281Z</td></tr><tr><td>easyone11</td><td><p>А нет желания (конечно его нет, но надо спросить :D) сделать FAQ из самых популярных вопросов?<br>
С скормил 2000 страниц форуму gpt и он выделил 20ку топ вопросов и ответов, да они могут быть не актуальны и кривые, но по вопросам я думаю он не ошибается, а ты смог бы пофиксить ответы. Может сделать такой и закрепить тему?<br>
Всегда можно будет людей посылать туда за ответом а не писать его + удобно да и вопросы сформировались сообществом, значит они как ни как да в целом важны.</p>
<details>
<summary>
FAQ</summary>
<p>FAQ Zapret</p>
<p>Может ли Zapret работать на маршрутизаторах Keenetic?<br>
Программа работает на Keenetic, однако такие роутеры могут вызывать различные проблемы, автор не поддерживает данный тип роутеров.<br>
Обсуждение тут <a href="https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-youtube-%D0%B8-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BE%D0%BA-%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B5-keenetic-%D1%81-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E-nfqws-tpws-zapret/9426" class="inline-onebox">Обсуждение: Обход замедления YouTube и блокировок на прошивке Keenetic с помощью nfqws / tpws (zapret)</a></p>
<p>Как использовать запланированный обход блокировки с nfqws?<br>
Достаточно запустить nfqws с параметрами --hostlist, чтобы перенаправлять трафик через iptables/nftables, и указать домены, требующие обхода, в соответствующем файле.</p>
<p>Запускается ли Zapret на роутерах с поддержкой TFO (TCP Fast Open)?<br>
TFO поддерживается в некоторых случаях, но зависимость от конфигураций может ограничить работу на домашних роутерах. Попробуйте с использованием --dpi-desync=fake и проверьте поддержку TFO.</p>
<p>Как настроить автозапуск и корректную конфигурацию с dnscrypt-proxy для Zapret?<br>
Автозапуск можно настроить через install_easy.sh. Для корректной работы с dnscrypt-proxy проверьте, чтобы DNS был надежно проксифицирован без ошибок.</p>
<p>Какие параметры настройки нужны для обхода блокировки с использованием Split?<br>
Для протоколов http/https лучше всего использовать --dpi-desync=fake и --dpi-desync-split-pos=1. Попробуйте также комбинации с split2 для более надежного обхода блокировок.</p>
<p>Какие настройки использовать для обхода DPI на IPv6?<br>
IPv6 может требовать дополнительных настроек, так как на некоторых маршрутизаторах возможно использование ipfrag2 только с nftables, который может потребовать больше ресурсов.</p>
<p>Как исключить сайт из списка обхода Zapret?<br>
Исключение сайта можно сделать через hostlist и autohostlist, добавляя домены, которые не должны обходиться, напрямую в zapret-hosts-user-exclude.txt</p>
<p>Запуск blockcheck.sh показывает предупреждение о DNS Hijack. Как это исправить?<br>
Убедитесь, что используемый DNS не перехватывается провайдером. Запустите dnscrypt-proxy, чтобы избежать перехвата.</p>
<p>Почему некоторые сайты открываются в режиме инкогнито, но не открываются в основном браузере?<br>
Это может быть связано с особенностями настроек браузера, которые работают с fake в инкогнито, но фильтруются при обычном подключении.</p>
<p>Как установить параметры nfqws для TCP и UDP?<br>
Для UDP и TCP требуются разные настройки. Для UDP используйте ipfrag2 и split режимы, для TCP применяйте настройки --dpi-desync=fake.</p>
<p>Работает ли Zapret на Windows?<br>
Программа Zapret может запускаться на Windows с использованием winws <a href="https://github.com/bol-van/zapret-win-bundle" class="inline-onebox">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a>.</p>
<p>Как проверить работоспособность обхода на роутере?<br>
Включите отладку с --debug, чтобы видеть перенаправляемые пакеты. Проверьте работу через blockcheck.sh или другими инструментами диагностики.<br>
Пример сохранения лога в файл NFQWS_OPT="<br>
–filter-tcp=80 --debug=@/opt/zapret/log.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig  --new</p>
<p>Почему после перезагрузки роутера настройки обхода блокировки не применяются?<br>
Запуск Zapret требует сохранения автозапуска, иначе после перезагрузки роутера настройки сбрасываются.</p>
<p>Может ли Zapret работать с OpenVPN и WireGuard?<br>
Запрет можно настроить для работы с OpenVPN и WireGuard, но VPN должен быть настроен после проксирования через Zapret.</p>
<p>Как настроить Zapret для обхода блокировки ресурсов youtube?<br>
Обсуждение тут <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060/209" class="inline-onebox">Подбор рабочего конфига для GGC ютуба через blockcheck - #209 by TikTak</a></p>
<p>Почему не обходятся некоторые заблокированные сайты при использовании Zapret например instagram и facebook?<br>
Это может быть связано с блокировкой по IP, обсуждение тут <a href="https://ntc.party/t/%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D1%8B-instagram-%D0%B8-facebook/11822" class="inline-onebox">Домены instagram и facebook</a></p>
<p>Какие дополнительные настройки подходят для обхода quic-протокола?<br>
Для обхода quic может потребоваться закрыть UDP-порт 443, либо использовать режим --dpi-desync=fake для обхода блокировок.</p>
<p>Как настроить параметр dpi-desync для повышения надежности обхода?<br>
Примените --dpi-desync=fake в комбинации с md5sig и disorder2, чтобы повысить шансы обхода блокировок.</p>
<p>Как обновить программу Zapret до последней версии?<br>
Чтобы обновить Zapret, скачайте последнюю версию с официального репозитория. После загрузки распакуйте архив в папку /tmp, а затем выполните скрипт install_easy.sh,<br>
который автоматически произведет обновление. Перед запуском убедитесь, что сохранили конфигурационные файлы, так как во время обновления могут сброситься некоторые настройки.</p>
<p>Почему параметры wssize и syndata не работают с хостлистом, если авто-хостлист не включен?<br>
Параметры wssize и syndata действуют корректно только в том случае, если авто-хостлист также активирован. Это связано с тем, что авто-хостлист динамически определяет новые заблокированные сайты,<br>
добавляя их в обходной список, и именно на него ориентируются настройки syndata и wssize. Без активного авто-хостлиста эти параметры могут игнорироваться.</p>
<p>Где прочитать подробную информацию по работе программы?<br>
Читать Readme <a href="https://github.com/bol-van/zapret" class="inline-onebox">GitHub - bol-van/zapret: DPI bypass multi platform</a>, краткая версия для ознокомления с программой <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt">https://github.com/bol-van/zapret/blob/master/docs/quick_start.txt</a> и для windows <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start_windows.txt">https://github.com/bol-van/zapret/blob/master/docs/quick_start_windows.txt</a></p>
</details></td><td>2024-11-01T19:20:37.992Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Рубрика вредные советы. Почти все вопросы и ответы у вас некорректны</p></td><td>2024-11-01T19:41:58.486Z</td></tr><tr><td>bolvan</td><td><p>Немного оффтопа.<br>
Однажды я попросил GPT рассказать о процессе ограбления общественного туалета.<br>
От прочитанного мы катались по полу полчаса</p></td><td>2024-11-01T19:44:31.920Z</td></tr><tr><td>easyone11</td><td><p>жалко конечно, значит чатгпт не справился<br>
если не отталкиваться от такой обработки то надо делать вручную по памяти, это много времени займёт и нужен опытный братик)</p></td><td>2024-11-01T19:44:53.338Z</td></tr><tr><td>easyone11</td><td><p>ну ваще то они апгрейдется ))<br>
каждый квартал читаю новости что вышла новая модель которая лучше какой другой очень хороший и эта прям лучшая лучшая)</p></td><td>2024-11-01T19:45:41.797Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Уже 100 раз сказали что это инструмент сделанный не для копипасты и запуска одной кнопкой (как многие пытаются его использовать), а для тех, кто может хотя бы редми прочитать на гитхабе</p></td><td>2024-11-01T19:45:59.569Z</td></tr><tr><td>rewhat</td><td><aside class="quote no-group" data-username="bolvan" data-post="2103" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Однажды я попросил GPT рассказать о процессе ограбления общественного туалета.</p>
</blockquote>
</aside>
<details>
<summary>
(оффтоп) если кому интересно</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/4109772aed116fe45aa0ec13754eb905014d24a3.png" data-download-href="https://ntc.party/uploads/default/4109772aed116fe45aa0ec13754eb905014d24a3" title="Снимок экрана_20241101_224540"><img src="zapret-обсуждение-726/4109772aed116fe45aa0ec13754eb905014d24a3_2_535x500.png" alt="Снимок экрана_20241101_224540" data-base62-sha1="9hljy4NWV4dnx5tkSCznveHI2wb" width="535" height="500" srcset="zapret-обсуждение-726/4109772aed116fe45aa0ec13754eb905014d24a3_2_535x500.png, zapret-обсуждение-726/4109772aed116fe45aa0ec13754eb905014d24a3_2_802x750.png 1.5x, zapret-обсуждение-726/4109772aed116fe45aa0ec13754eb905014d24a3_2_1070x1000.png 2x" data-dominant-color="313131"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана_20241101_224540</span><span class="informations">1096×1024 176 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-01T19:46:45.449Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Не только прочитать , но и воспользоваться полученными из него знаниями</p>
<p>Всем здрасти</p></td><td>2024-11-01T19:46:47.831Z</td></tr><tr><td>easyone11</td><td><p>faq это не одна кнопка, а повторюсь ответы на популрные вопросы, которые болван и так отвечает, а мог бы просто посылать в faq ну и люди возможно меньше будут спрашивать</p></td><td>2024-11-01T19:47:14.986Z</td></tr><tr><td>bolvan</td><td><p>Было время, когда компы были у немногих, смартфонов вообще не было. Это время во многих смыслах было лучше. Когда корпорации загнали массы мало соображающей публики в цифровое стойло “простых решений”, многое стало стремительно деградировать</p></td><td>2024-11-01T19:47:56.443Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Все ответы на вопросы которые вы там написали находятся или в редми на гите или поиском по этому форуму. Нужно только потратить 5 минут времени на поиск ответа</p></td><td>2024-11-01T19:48:40.537Z</td></tr><tr><td>easyone11</td><td><p>я бы так же отвечал, когда видел один и тот же вопрос в 5ый раз<br>
а болван очень часто отвечает развёрнуто ну и в целом отвечает, за место такой копипасты которая в просто посылает человека<br>
ну на мой взгляд польза хоть не большая была бы, как для разраба так и для пользователей, может я и не прав</p></td><td>2024-11-01T19:52:02.012Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ок<br>
Но для начало надо сделать выборку “глупых” вопросов<br>
После чего составить развернутый ответ<br>
И затем сдать данную работу на проверку <a class="mention" href="/u/bolvan">@bolvan</a></p>
<p>Но тут сходу проблемы</p>
<ul>
<li>РКН мудрит и обход умирает</li>
<li>Провайдеры ведут свои листы, отличные от РКН</li>
<li>Частенько ресурс закрывают по IP</li>
</ul>
<p>Как ты это собираешься решать?</p></td><td>2024-11-01T19:55:45.431Z</td></tr><tr><td>SickTH</td><td><p>Можно какой нибудь публичный док сделать или форму куда вводишь свой вопрос и когда база наберется попросить чат отсортировать (какие повторяются чаще слова и тд). А потом по частоте этих вопросов отсортировать xD</p></td><td>2024-11-01T19:58:10.989Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>РКН будет рад данному документу</p>
<p>Враги не дремлют</p></td><td>2024-11-01T19:59:51.099Z</td></tr><tr><td>easyone11</td><td><p>да не надо создавать, оно тут уже<br>
нужен опытный человек с памятью который, это сделал бы<br>
если гпт не справился с этим, просить болвана делать его 0 смысла, политику для кого это программа он уже не один раз отвечал</p></td><td>2024-11-01T20:02:39.249Z</td></tr><tr><td>easyone11</td><td><p>ага, закрывайте форум, а то ркн всё прочтёт )</p></td><td>2024-11-01T20:03:16.623Z</td></tr><tr><td>SickTH</td><td><p>Да может быть, но ведь и так называемый талмуд запрета тоже лежит в паблике. У меня тоже глупых вопросов полно я их пытаюсь периодически через ctrl+f тут и там для себя разрешить. Просто если признаться честно - страшно порой их задавать. Прочитал однажды тему увидел “сложно когда для тебя это просто буковки” и решил не спрашивать всякое по типу " я поменял местами строчки и все сломал хотя вроде и не должен был. что же делать" XD  ( на всякий случай дополню что по моему в моем случае помогло сообщение от bolvan где сказано что все идет сверху вниз и слева направо. там немного спутались листы у меня. да и иногда пока тестил что-то в авто попадало и надо было просто немного присмотреться)</p></td><td>2024-11-01T20:03:41.733Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну…<br>
Я сам своими руками “ломал запрет нежно”</p>
<p>Но правда щас после “нежно” хоть стало понятно что да как</p></td><td>2024-11-01T20:05:59.487Z</td></tr><tr><td>easyone11</td><td><p>так у многих<br>
faq не ответы на редкие вопросы, просто он должен закрывать большую часть популярных и одинаковых</p></td><td>2024-11-01T20:06:45.052Z</td></tr><tr><td>anonymous185(anonymous185)</td><td><p>Никто не сталкивался с проблемой на некоторых android tv устройствах - после сброса по питанию, сбрасывается время\дата, и при подключении к wifi долго висит статус “connected, no internet”, без запрета такой проблемы нет.</p>
<p>По дебагу и описанию вроде как долбится в сторону <a href="http://connectivitycheck.gstatic.com" rel="noopener nofollow ugc">connectivitycheck.gstatic.com</a> и <a href="http://clients3.google.com" rel="noopener nofollow ugc">clients3.google.com</a>, время синхронизирует с <a href="http://time.android.com" rel="noopener nofollow ugc">time.android.com</a>, проблем с доступом нет к этим доменам. Что-то еще может влиять?</p></td><td>2024-11-01T20:48:42.026Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Сертификаты не проходят проверку</p>
<p>Смена даты на 5 минут(разница во времени между сервером и клиентом) ведёт к разрыву со стороны сайта из-за недействительного сертификата при соединении (открытая часть)</p>
<p>На сколько помню допускается разница в минуту. Из-за этого пришлось подымать NTP сервер и синхронизировать все устройства с ним</p></td><td>2024-11-01T20:52:23.749Z</td></tr><tr><td>doomer2007</td><td><p><a class="mention" href="/u/rem">@rem</a>, <a class="mention" href="/u/bolvan">@bolvan</a>, дошли руки попробовать собрать курл. Сейчас можно уже собирать с openssl 3.4. В итоге собрал образ пока для виртуалки.</p>
<pre><code class="lang-auto">root@OpenWrt:~# curl -V
curl 8.10.1 (x86_64-openwrt-linux-gnu) libcurl/8.10.1 OpenSSL/3.4.0 nghttp2/1.63.0 nghttp3/1.5.0
Release-Date: 2024-09-18
Protocols: file ftp ftps http https ipfs ipns mqtt
Features: alt-svc HSTS HTTP2 HTTP3 HTTPS-proxy IPv6 Largefile SSL threadsafe UnixSockets
</code></pre></td><td>2024-11-02T02:16:15.302Z</td></tr><tr><td>easyone11</td><td><p>видимо так и есть<br>
а как запрет мешает синкаться с <a href="http://time.android.com">time.android.com</a>? без него же всё норм и по дебагу проблем с доступом нет.<br>
<a href="https://ntc.party/u/anonymous185">anonymous185</a> попробуй мб добавь в исключения эти сайты?</p></td><td>2024-11-02T03:35:26.665Z</td></tr><tr><td>bolvan</td><td><p>Стратегия может ломать проверочные домены. Можно снять tcpdump и убедиться так это или нет.<br>
Если что - поправить стратегию или внести в исключения<br>
Дата обычно по ntp синхронизируется, zapret на ntp никак не влияет, если специально его не натравил на порт ntp.<br>
Насколько помню, проверка наличия инета проводится по голому http. Не https.</p></td><td>2024-11-02T06:04:03.563Z</td></tr><tr><td>bolvan</td><td><p>В чем примечательность этого curl ? ECH работает ?<br>
если включаешь configure --enable-ech, curl требует функции, которой нет в openssl.<br>
вроде есть в боринг</p></td><td>2024-11-02T06:21:36.268Z</td></tr><tr><td>doomer2007</td><td><blockquote>
<p>Хочу вернуться к теме курла с поддержкой http3. А можно его как-то скомпилировать вместе с openwrt. Чтобы получился не статический файл, а с зависимостями openssl, который заменит mbedtls? И всё это в squashfs.</p>
</blockquote>
<p>Нужно было сразу напомнить, что я не просто курл собирал, а весь образ опенврт. Так что примечательность пока только в этом.</p></td><td>2024-11-02T09:48:28.636Z</td></tr><tr><td>RoxsAndy</td><td><p>На Openwrt 23.05 не получится, там в репах openssl старый, без поддержки quic. Нужен openssl не ниже 3.2, если правильно помню.</p></td><td>2024-11-02T11:27:57.238Z</td></tr><tr><td>doomer2007</td><td><p>Всё так, и опенссл должен быть выше, чем 3.2. В 24.10 опенссл останется той же версии. Я внимательно почитал все ветки на гитхабе за последние полтора года, кто и как решал эту проблему. С опенсселом выше, чем 3.2 уже всё довольно просто. Так что пришлось вручную менять опенссл и курл в исходниках. В итоге всё собралось.</p></td><td>2024-11-02T11:54:36.296Z</td></tr><tr><td>KDS</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Теперь ждите еще вопросов по zapret 1.4 - топер так почему-то решил назвать архив, а пользователи разбираться не будут <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"> Хотя вряд ли, так как там настройки менять нельзя, они намертво зашиты в экзешник, но просто предупреждаю, мало ли…</p></td><td>2024-11-02T11:57:15.425Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Когда я спрашивал у Топера несколько месяцев назад, будет ли визуальный лаунчер для Запрета - он ответил, что нет, и удалил мои комментарии на своем сайте. А сейчас с удивлением узнаю, что-таки дозрел до лаунчера Запрета. Ведь Гудбай не имеет и половины функционала Запрета.</p></td><td>2024-11-02T12:07:01.548Z</td></tr><tr><td>doomer2007</td><td><p>Откуда обычный народ узнает про всё это разнообразие? Тг и ютуб каналы? Или они за деньги их ещё рекламят? Сборки это же всегда жуткое васяноподелие, что игр по типу фаллаутов со скайримами, что программ.</p></td><td>2024-11-02T12:17:16.409Z</td></tr><tr><td>easyone11</td><td><p>сарафанное радио на различных форумах из разряда, мне это не помогло а это помогло</p></td><td>2024-11-02T12:57:00.814Z</td></tr><tr><td>KDS</td><td><p>Все настройки его лаунчера тупо скопипащены из Быстро (была когда-то такая сборка запрета). Так что дозрел, но не полностью - чисто обертку с 3-мя кнопками запилил.</p>
<p><a class="mention" href="/u/doomer2007">@doomer2007</a> Согласен, сборки - зло. Кроме своих ) Я тоже плююсь от всяких фоллаут3/нью-вегас экстендед эдишон, у меня свои сборки под обе, но народу нравится.</p></td><td>2024-11-02T13:35:21.522Z</td></tr><tr><td>bolvan</td><td><p>Что делать, я не контролирую хождение этого софта.<br>
Он открыт. Существует по принципу “солнышко светит и праведным, и неправедным”. Хоть на нос вешай,хоть гвозди забивай.<br>
А сборочные вопросы закрываю сразу с указанием идти к сборщикам.<br>
Но все же я бы называл на месте сборщиков как-то иначе. zapret launcher от васи. ссылка на страницу васи. тогда нет проблем</p></td><td>2024-11-02T13:44:25.524Z</td></tr><tr><td>KDS</td><td><p>Ну, в названии моей сборки слова запрет точно не было ) Ну а “от Васи” я не стал добавлять, ибо ни разу не Вася.</p>
<p>А так да, такие названия только путают пользователей, ну у топера хотя бы все понятно - был GoodbyeDPI Launcher, теперь zapret launcher. Преемственность, так сказать, сохранена )</p></td><td>2024-11-02T13:53:00.474Z</td></tr><tr><td>doomer2007</td><td><p>Вот подтверждение, что всё работает.</p>
<pre><code class="lang-auto">root@OpenWrt:~# cat /etc/openwrt_release
DISTRIB_ID='OpenWrt'
DISTRIB_RELEASE='23.05.5'
DISTRIB_REVISION='r24106-10cc5fcd00'
DISTRIB_TARGET='x86/64'
DISTRIB_ARCH='x86_64'
DISTRIB_DESCRIPTION='OpenWrt 23.05.5 r24106-10cc5fcd00'
DISTRIB_TAINTS='busybox'
</code></pre>
<pre><code class="lang-auto">root@OpenWrt:~# curl -V
curl 8.10.1 (x86_64-openwrt-linux-gnu) libcurl/8.10.1 OpenSSL/3.4.0 zlib/1.2.13 zstd/1.5.2 libidn2/2.3.4 libssh2/1.10.0 nghttp2/1.57.0 nghttp3/1.1.0 OpenLDAP/2.6.4
Release-Date: 2024-09-18
Protocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp
Features: alt-svc AsynchDNS HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Largefile libz NTLM SSL threadsafe TLS-SRP UnixSockets zstd
</code></pre>
<pre><code class="lang-auto">root@OpenWrt:~# ldd /usr/bin/curl
        /lib/ld-musl-x86_64.so.1 (0x7f5751bdb000)
        libcurl.so.4 =&gt; /usr/lib/libcurl.so.4 (0x7f5751b29000)
        libnghttp3.so.9 =&gt; /usr/lib/libnghttp3.so.9 (0x7f5751b05000)
        libnghttp2.so.14 =&gt; /usr/lib/libnghttp2.so.14 (0x7f5751add000)
        libidn2.so.0 =&gt; /usr/lib/libidn2.so.0 (0x7f5751aab000)
        libssh2.so.1 =&gt; /usr/lib/libssh2.so.1 (0x7f5751a73000)
        libssl.so.3 =&gt; /usr/lib/libssl.so.3 (0x7f57519a8000)
        libcrypto.so.3 =&gt; /usr/lib/libcrypto.so.3 (0x7f5751527000)
        libldap.so.2 =&gt; /usr/lib/libldap.so.2 (0x7f57514e0000)
        liblber.so.2 =&gt; /usr/lib/liblber.so.2 (0x7f57514d3000)
        libzstd.so.1 =&gt; /usr/lib/libzstd.so.1 (0x7f575140c000)
        libz.so.1 =&gt; /usr/lib/libz.so.1 (0x7f57513f7000)
        libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x7f57513df000)
        libc.so =&gt; /lib/ld-musl-x86_64.so.1 (0x7f5751bdb000)
        libunistring.so.5 =&gt; /usr/lib/libunistring.so.5 (0x7f575122e000)
        libsasl2.so.3 =&gt; /usr/lib/libsasl2.so.3 (0x7f5751215000)
</code></pre>
<pre><code class="lang-auto">root@OpenWrt:~# curl -I --http3-only https://cloudflare-quic.com
HTTP/3 200 
date: Sat, 02 Nov 2024 14:58:11 GMT
content-type: text/html
content-length: 125959
priority: u=3,i=?0
server: cloudflare
cf-ray: 8dc4fb32be50d69a-CDG
alt-svc: h3=":443"; ma=86400
server-timing: cfExtPri
</code></pre></td><td>2024-11-02T15:04:14.601Z</td></tr><tr><td>bolvan</td><td><p>Ага. Только, например, git-http не собирается, если libcurl4 собран с libidn<br>
Ошибки видимой нет, но получается кастрированный ipk, который не умеет git clone http(s)://…<br>
И таких косяков в openwrt полно. Там надо дорабатывать depends в Makefile в зависимости от опций сборки.</p></td><td>2024-11-02T15:42:27.563Z</td></tr><tr><td>doomer2007</td><td><p>Я не силён в гите. Это разве не оно?</p>
<pre><code class="lang-auto">root@OpenWrt:/tmp# git clone --depth 1 https://github.com/bol-van/zapret
Cloning into 'zapret'...
remote: Enumerating objects: 352, done.
remote: Counting objects: 100% (352/352), done.
remote: Compressing objects: 100% (310/310), done.
remote: Total 352 (delta 40), reused 230 (delta 18), pack-reused 0 (from 0)
Receiving objects: 100% (352/352), 5.73 MiB | 10.00 MiB/s, done.
Resolving deltas: 100% (40/40), done.
</code></pre>
<pre><code class="lang-auto">root@OpenWrt:/tmp# ldd /usr/bin/git
        /lib/ld-musl-x86_64.so.1 (0x7f288ae6f000)
        libz.so.1 =&gt; /usr/lib/libz.so.1 (0x7f288ae5a000)
        libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x7f288ae42000)
        libc.so =&gt; /lib/ld-musl-x86_64.so.1 (0x7f288ae6f000)
</code></pre></td><td>2024-11-02T16:02:24.351Z</td></tr><tr><td>bolvan</td><td><p>Чтобы с этим столкнуться, надо полностью собрать openwrt и некоторые feeds.<br>
А не отдельно, и накатить потом ipk<br>
Может в новых и пофиксили, 19 недавно собирал под старый роутер., там проблема была.</p></td><td>2024-11-02T16:32:58.960Z</td></tr><tr><td>doomer2007</td><td><p>Тут я не эксперт, не понимаю, что значит собрать образ openwrt полностью, а не отдельно. Это вроде полностью собранный openwrt.img с git-https и curl во время сборки, а не добавленный после. Это не Image Builder, и не собранный курл с гитом отдельно. Всё собралось в образ, который я и опробовал в виртуалке.</p></td><td>2024-11-02T18:30:11.701Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>а можно ли таким же образом и общий шейпер прова обломать?</p>
<p>тариф 30мбс но на какието ресурсы и выше (публично не обещано)</p>
<p>причём периодически меняется перечень - было время что вообще всё на эрэфийское сотка была</p>
<p>а щас видимо на то что в “своей” сети<br>
тотже яндекс-интернетометр и speedtest oakla (на площадке прова) дают сотку<br>
и даже тытруб считает что 70мбс</p>
<p>но 2ip уже 30 и т.п. не выше</p>
<p>так вот путём обмана куда лезу может можно шейпер по примеру dpi задурить? или там не по sni (скорей всего)?</p></td><td>2024-11-02T19:11:58.712Z</td></tr><tr><td>doomer2007</td><td><p>Вспоминаются статьи начала 2000 из журнала Хакер, про то как ночной бесплатный тариф перевести на день и вообще ничего не платить.</p></td><td>2024-11-02T19:30:39.802Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="KDS" data-post="2136" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Преемственность, так сказать, сохранена )</p>
</blockquote>
</aside>
<p>Там преемственность не только названия, но и вирусов <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-02T19:31:58.661Z</td></tr><tr><td>bolvan</td><td><p>DPI работает по принципу “триггер → действие”<br>
действие может быть очень разным. может быть блокировка, может быть шейпинг или собирание статистики.<br>
если удастся спалить триггер, обломается и действие</p></td><td>2024-11-02T19:51:32.262Z</td></tr><tr><td>doomer2007</td><td><p>Хочу заметить, что делал я это ещё и отчасти для того, чтобы запихнуть всё это добро в свой самый старый роутер. Но вот незадача, минимальный набор вещей с опенсселом 3.4 просто уже не может создать образ в 8мб.</p></td><td>2024-11-02T22:53:25.332Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Столкнулся вот с какой проблемой. Где-то с 30 октября РКН через провайдера что-то подкрутил - и Ютуб на Запрете стал медленнее работать, особенно в вечернее время, но не критично. Терпимо.<br>
А сегодня вот прямо сейчас с утра не могу зайти на Рутрекер и другие популярные торрент-трекеры (вылетает табличка провайдера, что сайт внесет в запрещенный список), при этом остальные запрещенные сайты прекрасно открываются.<br>
Что такое могли подкрутить применительно к торрент-трекерам?</p></td><td>2024-11-03T03:32:40.766Z</td></tr><tr><td>BorisP</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2147" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>вылетает табличка провайдера, что сайт внесет в запрещенный список</p>
</blockquote>
</aside>
<p>Заменить DNS, желательно DoH - <a href="https://dns.controld.com/comss" rel="noopener nofollow ugc">https://dns.controld.com/comss</a><br>
А провайдерские отключить.</p></td><td>2024-11-03T03:49:54.059Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>У меня давно comss - и все равно сегодня Рутрекер без прокси-сервера не открывается на Запрете. Первый раз такое.</p></td><td>2024-11-03T03:59:31.762Z</td></tr><tr><td>BorisP</td><td><p>Еще раз прочитай, на что заменить comss (устаревший сервис, его отключают).</p></td><td>2024-11-03T04:05:29.917Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>К сообщению выше - нашел проблему, как ни странно - это DNS от comss. Поставил в браузере от Гугла - и все торрент-трекеры летают. Не первый раз уже DNS от comss подводят. Видимо, надо возвращаться на dnscrypt-proxy.</p></td><td>2024-11-03T04:05:58.859Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>У меня утилита стоит от ControlD с comss. Это как раз их новые DNS от зимы сего года. Проблема в них уже не первый раз.</p></td><td>2024-11-03T04:07:25.332Z</td></tr><tr><td>BorisP</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.linkedin.com/">
  <header class="source">
      <img src="zapret-обсуждение-726/0fd7307b4ee824227ffac755ef3965372626381c.png" class="site-icon" data-dominant-color="4E9EC9" width="64" height="64">

      <a href="https://www.linkedin.com/" target="_blank" rel="noopener nofollow ugc">LinkedIn</a>
  </header>

  <article class="onebox-body">
    <img width="16" height="16" src="zapret-обсуждение-726/64d53e258550bba58c0d2b0c27cd964765ddb34d.png" class="thumbnail onebox-avatar" data-dominant-color="3F98C7">

<h3><a href="https://www.linkedin.com/" target="_blank" rel="noopener nofollow ugc">LinkedIn: Log In or Sign Up</a></h3>

  <p>1 billion members | Manage your professional identity. Build and engage with your professional network. Access knowledge, insights and opportunities.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p><a href="http://x.com" class="onebox" target="_blank" rel="noopener nofollow ugc">x.com</a></p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.instagram.com/">
  <header class="source">
      <img src="zapret-обсуждение-726/388ddf3c6954dee2dd245aec7bccedf035918b69.png" class="site-icon" data-dominant-color="F56B99" width="32" height="32">

      <a href="https://www.instagram.com/" target="_blank" rel="noopener nofollow ugc">Instagram</a>
  </header>

  <article class="onebox-body">
    <img width="500" height="500" src="zapret-обсуждение-726/0b96ff906b2e133eb9f1ba89ef045b7e1bf14f8d_2_500x500.png" class="thumbnail onebox-avatar" data-dominant-color="DE2D80">

<h3><a href="https://www.instagram.com/" target="_blank" rel="noopener nofollow ugc">Instagram</a></h3>

  <p>Create an account or log in to Instagram - Share what you're into with the people who get you.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
rezka.ag<br>
Открываются с гугловым DNS ? Протести плиз.</p></td><td>2024-11-03T04:22:12.077Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2149" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Рутрекер без прокси-сервера не открывается на Запрете. Первый раз такое.</p>
</blockquote>
</aside>
<p>Бывает, вообще-то. Не так давно пришлось разделить хостлисты и перейти на конструкцию вроде вот такой:<br>
<code>--hostlist=ваш_лист_с_рутрекером  --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/etc/nfqws/tls_clienthello_sberbank_ru.bin --dpi-desync-repeats=2</code><br>
и еще добавить домен rutracker.<strong>cc</strong></p>
<p>Заработал сразу и этот форум, и рутрекер, рутор и еще что-то. На рутрекере удобно проверять стратегии т.к. у него несколько доменов (.nl .org), их можно в разные листы помещать. Тот, что на .org кстати, работает и через QUIC.</p>
<p>DNS не влиял. Хотя хочется как-то настроить всё так, чтобы DoH использовался только для моего списка доменов, а не для всех без исключения. Наверняка это можно сделать через <code>dnsmasq</code></p></td><td>2024-11-03T04:25:30.624Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Открывается. С comss у меня тоже Резка открывалась. Правда, видео не всегда стабильно грузились.</p></td><td>2024-11-03T04:35:21.753Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Благодаря технологии Encrypted Client Hello Рутрекер и другие сайты с оной открываются даже без Запрета и ВПН.<br>
Поэтому и удивило сегодня, когда Рутрекер не открывался на DNS от comss.</p></td><td>2024-11-03T04:39:20.486Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>даже без Запрета</p>
</blockquote>
</aside>
<p>Да, подтверждаю. Но без Запрета там умер QUIC. Ситуация как-то “дышит”, даже не смотря на ECH в TCP TLS. Возможно, что ECH работает не всегда?</p></td><td>2024-11-03T04:45:47.545Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="i-no" data-post="2157" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Но без Запрета там умер QUIC</p>
</blockquote>
</aside>
<p>А он там был? У меня по квику рутрекер не отвечает, в том числе через впн.</p></td><td>2024-11-03T10:15:39.498Z</td></tr><tr><td>Hentay(Hentay)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/71d863db9f06b459bee92937d798732a9a2836ac.png" data-download-href="https://ntc.party/uploads/default/71d863db9f06b459bee92937d798732a9a2836ac" title="image"><img src="zapret-обсуждение-726/71d863db9f06b459bee92937d798732a9a2836ac.png" alt="image" data-base62-sha1="gf7zcq5A4wUcGRX2arcsv3heoyg" width="690" height="47" data-dominant-color="383A3A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1331×92 4.36 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Вроде как часть данных по http/3 передаются<br>
Но почему-то его называют QUICом</p></td><td>2024-11-03T10:29:51.626Z</td></tr><tr><td>KDS</td><td><p>Ну да, есть такое. Странно что сам сайт курлом но квику не пробивается, а вот передача частей идет по квику безо всяких обходилок.</p>
<p>Потому что http/3 в Мозилле и h3 в хромоногах - это и есть QUIC )</p></td><td>2024-11-03T10:44:39.513Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Ну потому что http3 и quic одно и то же. Разработанный хухелом стандарт quic потом был расширен и переименован для стандартизации. Но реализация протокола во всех браузерах разная. Хухел выдал либу для всех, но в своих проприетарщинах продолжает использовать свои модификации. Поэтому quic в хухле работает быстрее, чем в лисе, опере и других бровзерах.</p></td><td>2024-11-03T11:37:56.808Z</td></tr><tr><td>abc555</td><td><p>Чего вы с этим quic заморачиваетесь, нафиг он вообще нужен, никогда его не было и тут на тебе, все услышали новое слово, тут так найти стратегию не просто, а ещё и под quic отдельно надо искать. Заблокируйте порт в роуторе наглухо udp 443 и всё, забудете про quic и не важно включён у вас или нет в браузере, на телике или телефоне, пофиг где. При правильной блокировки порта, включаешь  quic в браузере, F12 на Firefox и http/3 трафик пролетать не должен совсем, если не пролетает, значит правильно заблокировали порт и не на одном устройстве он работать не будет и ищите стратегию без quic. Одно дело если какую нить сетевую игру заблокировали по udp к примеру, то тогда отдельно юзаешь под игру или под что то другое. Дискордом пользовались всегда только малолетки, играли они в бессмысленные игры по сети, возможно уже подросли и не пользуются скорей всего, но для него опять же надо отдельно настраивать. Если вам только для ютуба, то забудьте вы про этот quic как страшный сон</p></td><td>2024-11-03T12:01:57.858Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Вот и разделились люди на два лагеря:<br>
1 - QUIC нужен<br>
2 - Запилите себе порт <img src="https://ntc.party/images/emoji/twitter/rofl.png?v=12" title=":rofl:" class="emoji" alt=":rofl:" loading="lazy" width="20" height="20"></p></td><td>2024-11-03T12:04:48.892Z</td></tr><tr><td>abc555</td><td><p>Та какие люди разделились, есть взрослый контингент который понимает, а есть подростки, которые понятия не имеют что такое quic и как он работает, та и не каждый взрослый это понимает, не верите, спросите у любого, на улицу выйдите и спросите и никто вам не ответит, потому что никто не знает и знать не хочет даже</p></td><td>2024-11-03T12:09:14.470Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="abc555" data-post="2162" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Чего вы с этим quic заморачиваетесь, нафиг он вообще нужен</p>
</blockquote>
</aside>
<p>Вообще-то на http3 постепенно переходят все ресурсы в мире. Еще лет пять и эта технология как минимум будет на каждом сайте. А поддержка старой http2 останется для совместимости и то не у всех. Уже сейчас в том же клаудфлайр больше трети трафика ходит по этому протоколу.<br>
За новостями следить нужно, батенька <img src="https://ntc.party/images/emoji/twitter/stuck_out_tongue_winking_eye.png?v=12" title=":stuck_out_tongue_winking_eye:" class="emoji" alt=":stuck_out_tongue_winking_eye:" loading="lazy" width="20" height="20"></p></td><td>2024-11-03T12:12:15.353Z</td></tr><tr><td>abc555</td><td><p>Смотря в каком мире вы живёте, если в этом где всё блокируют, то нет смысла следить за бессмысленными новостями, вас это не коснётся, в лучшем случаи маил ру и яндекс в ближайшем будущем и всё, ничего больше не будет, та и к тому моменту я думаю уже это будет не важно</p></td><td>2024-11-03T12:17:12.584Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="abc555" data-post="2164" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>есть взрослый контингент который понимает, а есть подростки, которые понятия не имеют что такое quic и как он работает</p>
</blockquote>
</aside>
<p>А я думал, все как раз наоборот. Ну ладно )</p>
<p>Пожалуй, порт себе запиливать не буду <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"> Работает и работает хорошо, да и черт с ним.</p></td><td>2024-11-03T12:18:50.215Z</td></tr><tr><td>abc555</td><td><p>В большинстве 90% как минимум у всех в голове одно, или работает или нет и никто не заморачивается quic не quic, они даже комп никогда в глаза не видели, мышку в руках не держали, к примеру он смотрел ютуб на телике и понятия не имел что это сайт ютуб, всё что смотрел какой не будь там фильм древний и теперь он у него не работает, но слово ютуб, он не знает что это, даже не слышал никогда. Это тут на сайте, кажется что все в теме, а по факту, на улицу выйдите и никто вам не ответит ни на один вопрос касательно нэта</p></td><td>2024-11-03T12:21:32.967Z</td></tr><tr><td>uwu(uwu)</td><td><p>на данный момент quic впринципе не заблокирован в discord<br>
(по крайней мере у меня)</p></td><td>2024-11-03T12:22:36.907Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Понятно.<br>
Очередной алармист.<br>
Уже лет 10 такие товарищи кричат про Первое Пришествие Чебурнета, а воз и ныне там. Как пользовался нужными мне сайтами, так и пользуюсь. В некотором смысле даже еще свободнее стало.</p>
<aside class="quote no-group quote-modified" data-username="abc555" data-post="2168" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>В большинстве 90% … они даже комп никогда в глаза не видели</p>
</blockquote>
</aside>
<p>Че за бред? В РФ каждый третий в гаджете сидит по полдня.</p>
<aside class="quote no-group" data-username="abc555" data-post="2168" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Это тут на сайте, кажется что все в теме, а по факту, на улицу выйдите и никто вам не ответит ни на один вопрос касательно нэта</p>
</blockquote>
</aside>
<p>Как минимум 8 из 10 скажут, что такое ютуб.</p>
<p>В каком бункере ты там обитаешь? Вылазь срочно <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-03T12:24:28.328Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="uwu" data-post="2169" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>quic впринципе не заблокирован в discord</p>
</blockquote>
</aside>
<p>Но иметь правило для его разблокировки (на всякий) все равно не помешает <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
<p><a class="mention" href="/u/manwithbox">@manwithbox</a> Да явно не в бункере, знает про телевизор с ютубом ) За телевизоры не скажу, но вот что в приложении на телефоне давно квик и фиг ты его отключишь - это я знаю.</p>
<p>И еще через квик удобно стримы в Хроме смотреть - можно даже обходилку полностью вырубить, а оно продолжает работать )</p></td><td>2024-11-03T12:26:25.504Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="KDS" data-post="2171" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>И еще через квик удобно стримы в Хроме смотреть - можно даже обходилку полностью вырубить, а оно продолжает работать )</p>
</blockquote>
</aside>
<p>У меня стримы как не работали, так и не работают. В браузере. А в VLC все отлично.<br>
У меня решили видимо забить болт на блокировку трубы, уже на двух провах труба работает без всяких обходов, но квик отвалился, только h1. Я блокчеком пробивал все возможные конфиги на квик, без толку. И с пейлоадами, и без. Думаю, это уже провы что-то мутят в обход коробок. А вот сайты и дискорд официально всё.</p></td><td>2024-11-03T12:35:22.816Z</td></tr><tr><td>abc555</td><td><p>Не в гаджете, а в телефоне, гаджет это вот на компе у меня погода и прочее, я не знаю кто это слово совместил с телефоном, но оно как слово паразит. Тот кто сидит в телефоне, я не считаю этих людей что они в теме, что они вообще что то понимают, я проводил опрос в живую много лет.<br>
Есть те кто в компе, а есть те кто в телефоне, вот те кто в телефоне, у меня нет ничего общего с ними, даже поговорить с ними не о чем, они как зомби, все думают одинаково, делают одинаково, только тот кто в компе, ещё можно с ним поговорить о чём то и то не всегда</p></td><td>2024-11-03T12:37:57.794Z</td></tr><tr><td>KDS</td><td><p>А у меня вот не забили. Сегодня сломали квик (причем гуглвидео продолжил работать), но все остальное отвалилось.<br>
Потом сломали гуглвидео без квика.</p></td><td>2024-11-03T12:38:41.971Z</td></tr><tr><td>Timelord</td><td><p>Не нашел тему ytdisbystro, если у кого-то сохранилась инструкции из шапки, напишите пожалуйста</p></td><td>2024-11-03T12:39:13.520Z</td></tr><tr><td>Hentay(Hentay)</td><td><aside class="quote no-group" data-username="manwithbox" data-post="2170" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>В каком бункере ты там обитаешь? Вылазь срочно</p>
</blockquote>
</aside>
<p>Проснулся… Уже как несколько дней темы нету.<br>
Есть только архив</p>
<p>PS Забрал цитатку</p></td><td>2024-11-03T12:41:03.187Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="abc555" data-post="2173" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Не в гаджете, а в телефоне</p>
</blockquote>
</aside>
<p>Гаджетами называются все мобильные устройства. <a href="https://ru.wikipedia.org/wiki/%D0%93%D0%B0%D0%B4%D0%B6%D0%B5%D1%82" rel="noopener nofollow ugc">Статья из педивикии.</a> А на рабочем столе винды виджеты, и не важно, что они называются “Гаджеты” - это просто название.</p></td><td>2024-11-03T12:42:45.908Z</td></tr><tr><td>Timelord</td><td><p>Я давно не следил за темой, так как все, что мне надо, хорошо работало на 1.05 версии, но на всякий случай скачал ласт версии, а инструкции нету, не помешала бы))</p></td><td>2024-11-03T12:44:49.473Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Там всё просто. Запускаешь файлик пресета, он всё делает правильно.</p></td><td>2024-11-03T12:46:07.211Z</td></tr><tr><td>bolvan</td><td><p>Народ, не захламляем тему сторонними обсуждениями. Потом черт ногу сломит найти тут что-то полезное</p></td><td>2024-11-03T12:46:42.842Z</td></tr><tr><td>abc555</td><td><p>Вчера второй раз запустил блокчек, результат нулевой, все стратегии которые он юзал. у меня они не работают и не работали с момента как я поставил запрет, я их в ручную ставил раньше и ничего не было, поэтому только чуйкой и методом тыка смог подобрать, что то у вас взял, что то нарыл в нэте, что то сам и в итоге получилось вроде ничего. Мне нужно было совместить запрет с моими настройками роутера, а настройки у меня жесткие, но пока всё работает, круто, не знаю насколько этого хватит, но огромный вам зачёт</p></td><td>2024-11-03T12:51:50.116Z</td></tr><tr><td>doomer2007</td><td><p>А я считаю, что не только http3 не нужен, но и вообще весь ваш ынтырнет, да и города-то не нужны. Без оных сейчас бы работал в поле, потом пришел бы домой, а тебе жена еды наготовила. Щей, растегаев, блинов. А вечером легли бы на печь и повышали бы демографию страны, делали бы уже 10 ребенка.<br>
А сейчас что? Вот сидишь в своем тырнете, буковки пишешь, а они ведь тоже не нужны. Зачем тебе буквы-то? Читать? Не надо этого русскому человеку. Ты что счастливее от этого стал? Да и аниме тоже не нужно, а то обсмотрелись тут его многие, совсем одурели.<br>
Гречневая каша, хлеб ржаной, да бабу мять на печи, вот оно счастье, а всё остальное вместе с вашим запретом запретить!</p></td><td>2024-11-03T12:54:25.997Z</td></tr><tr><td>doomer2007</td><td><p>[Тут был мой ошибочный ответ.]</p></td><td>2024-11-03T12:55:16.390Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="abc555" data-post="2181" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Вчера второй раз запустил блокчек, результат нулевой, все стратегии которые он юзал. у меня они не работают и не работали с момента как я поставил запрет</p>
</blockquote>
</aside>
<p>а что именно вы пытаетесь пробить?<br>
блокчек, даже если он ничего не находит, то показывает набор стратегий, с которым можно работать.</p></td><td>2024-11-03T13:02:41.892Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="i-no" data-post="2154" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Хотя хочется как-то настроить всё так, чтобы DoH использовался только для моего списка доменов, а не для всех без исключения. Наверняка это можно сделать через <code>dnsmasq</code></p>
</blockquote>
</aside>
<p>server=/opt/etc/domen.conf/127.0.0.1#40515<br>
Добавить в конфиг<br>
127.0.0.1#40515 вместо этого свой дох<br>
opt/etc/domen.conf создать и вписать туда домены в столбик</p></td><td>2024-11-03T13:32:33.942Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Подскажите, сохранил raw от quicinitial и tlsclienthello.<br>
Там надо еще что-то править?</p></td><td>2024-11-03T13:38:09.246Z</td></tr><tr><td>bolvan</td><td><p>Главное, чтобы без хедеров L2/L3/L4. И без кибера.<br>
TLS должен начинаться с 16 03</p></td><td>2024-11-03T16:21:20.189Z</td></tr><tr><td>i-no(...)</td><td><p><code>daemon.err nfqws[8159]: rawsend: sendto: Operation not permitted</code><br>
Вот такая вещь в логе что может означать?</p></td><td>2024-11-03T16:22:30.103Z</td></tr><tr><td>bolvan</td><td><p>Вероятно исользуются ломающие nat команды и схема pre-nat.<br>
На чем выполняется, ip/nf tables , параметры nfqws какие ?<br>
Есть ли какие-то сложные правила маршрутизации, ip rules, множественные аплинки и прочее ?</p></td><td>2024-11-03T16:29:53.000Z</td></tr><tr><td>i-no(...)</td><td><p>Ничего сложного не должно быть. Разве только какой-то угарный треш в мультистратегии, остатки экспериментов по приручению YT.</p>
<details>
<summary>
Спойлер</summary>
<p>cat /etc/openwrt_release<br>
DISTRIB_ID=‘OpenWrt’<br>
DISTRIB_RELEASE=‘21.02.7’<br>
DISTRIB_REVISION=‘r16847-f8282da11e’<br>
DISTRIB_TARGET=‘ramips/mt7620’<br>
DISTRIB_ARCH=‘mipsel_24kc’<br>
DISTRIB_DESCRIPTION=‘OpenWrt 21.02.7 r16847-f8282da11e’<br>
DISTRIB_TAINTS=‘’</p>
<p>ps ww|grep nfqws<br>
5348 nobody     720 S    /usr/bin/nfqws --user=nobody --dpi-desync-fwmark=0x40000000 --qnum=200 --filter-udp=443 --hostlist=/etc/nfqws/googlevideo.list --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic=/etc/nfqws/quic_pl_by_ori.bin --dpi-desync-cutoff=n2 --new --filter-tcp=443 --hostlist=/etc/nfqws/youtube.list --dpi-desync=fake disorder2 --dpi-desync-repeats=2 --dpi-desync-fooling=md5sig badseq --dpi-desync-fake-tls=0x16030102920100028e03035672ea15594162966e8a144297c497ddace5d546af7a4a0414a946fa52023cf720b0220c217abb1db321abbf01985cf3d07c61367c2ba5eff307b0f6f042448077 --new --filter-tcp=443 --hostlist=/etc/nfqws/googlevideo.list --filter-l3=ipv6 --dpi-desync=fake disorder2 --dpi-desync-split-pos=10 --dpi-desync-repeats=20 --dpi-desync-fooling=hopbyhop datanoack md5sig --dpi-desync-ttl=2 --dpi-desync-fake-tls=0x16030300eb010000e70303854d914f4947c9e0c1b056cf83cc62d173488e8767bac2c007ba10db6ad5912b000056cca9cca8ccaac030c02cc028c024c014c00a009f006b003900c40088009d003d003500c00084c02fc02bc027c023c013c009009e0067003300be0045009c003c002f00ba0041c011c0070005c012c0080016000a00ff01000068000d0018001608060601060308050501050308040401040302010203000a000a0008001d00170018001900000022002000001d7472616e73706172656e63797265706f72742e676f6f676c652e636f6d000b000201000010000e000c02683208687474702f312e31 -new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-cutoff=n2 --hostlist=/etc/nfqws/user.list --dpi-desync-fake-quic=/etc/nfqws/quic_pl_by_ori.bin -new --filter-tcp=443 --dpi-desync=fake split2 --dpi-desync-repeats=2 --dpi-desync-split-pos=2 --dpi-desync-fooling=md5sig badseq --hostlist=/etc/nfqws/user.list --new --hostlist=/etc/nfqws/user2.list --dpi-desync=fake disorder2 --dpi-desync-split-pos=10 --dpi-desync-fooling=md5sig badseq --dpi-desync-fake-tls=/etc/nfqws/tls_clienthello_sberbank_ru.bin --dpi-desync-repeats=2</p>
<p>iptables-save|grep -i mark<br>
-A POSTROUTING -o eth0.2 -p udp -m mark --mark 0x40000000/0x40000000 -j MASQUERADE<br>
-A POSTROUTING -o eth0.2 -p udp -m multiport --dports 443 -m connbytes --connbytes 1:8 --connbytes-mode packets --connbytes-dir original -m mark ! --mark 0x40000000/0x40000000 -j NFQUEUE --queue-num 200 --queue-bypass<br>
-A POSTROUTING -o eth0.2 -p tcp -m multiport --dports 80,443 -m connbytes --connbytes 1:8 --connbytes-mode packets --connbytes-dir original -m mark ! --mark 0x40000000/0x40000000 -j NFQUEUE --queue-num 200 --queue-bypass</p>
</details>
<p>Выпрыгнула серия ошибок в лог полсуток тому назад и более пока не повторялось. Всё работает так как работало, ни хуже ни лучше.</p></td><td>2024-11-03T16:39:38.422Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>winws win7sp1x64<br>
казалосьбы нашёл отличную стратегию</p>
<pre><code class="lang-auto"> --dpi-desync=fake --dpi-desync-fooling=datanoack
</code></pre>
<p>но в хроме обычный неблоченый яху сдох<br>
<code>https://www.yahoo.com/</code><br>
и<br>
<code>http://mail.yahoo.com/</code></p>
<p>дают ERR_CONNECTION_RESET а приэтом в древнейшем ie11 заходит и curl тоже (поэтому blockchek не помогает)</p>
<p>чё с этим убогим хромом? без winws яху начинает работать</p>
<p>сам хром древний v97 и никаких киберов в нём нет</p>
<p>не понимаю что не так конкретно с сайтом что в хроме какимто бесом fake его ломает (почему долазит?)</p>
<p>раньше с gbd яху дох от badsum</p></td><td>2024-11-03T17:57:19.229Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2191" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>казалосьбы нашёл отличную стратегию</p>
</blockquote>
</aside>
<p>нужно добавить хостлист с указанием доменов. для которых эта стратегия применяется (чтобы она не лезла к сайтам, которые не требуется разблокировать)<br>
дополнительно еще можно ограничить фейк через ttl</p></td><td>2024-11-03T18:01:54.268Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>хостлист это петушь - лишняя большая нагрузка + никогда не будет полным. разве что лист от обратного для которых не применять и внести яху…</p>
<p>а с ttl ломает кабинет прова + blockchek от 7 до 10 показывает на разные сайты и стратегии</p>
<p>а на 10м хопе уже половина “настоящих” сайтов</p></td><td>2024-11-03T18:16:42.800Z</td></tr><tr><td>bolvan</td><td><p>ttl можно совместно с fooling применять, чтобы не ломал кабинет прова<br>
hostlist - небольшая нагрузка. там нет цикла от 1 до 100000  если совпадает, то</p></td><td>2024-11-03T18:24:17.386Z</td></tr><tr><td>bolvan</td><td><p>Есть же --hostlist-exclude. Зачем такие приколы ?</p></td><td>2024-11-03T18:25:14.810Z</td></tr><tr><td>KDS</td><td><p>Эммм, я опять что-то пропустил? Он существует сам по себе или в кооперации с обычным?</p></td><td>2024-11-03T18:26:35.104Z</td></tr><tr><td>bolvan</td><td><p>Он может и сам по себе, и вместе. Листов на профиль может быть неограниченное количество.<br>
Считается, что у профиля есть  хостлист, если присутствует хотя бы 1 домен в любых из листах include и exclude по этому профилю. Полная пустота всех листов равносильна их отсутствию.<br>
Пустота всех include листов равносильна отсутствию include листов.</p></td><td>2024-11-03T18:29:31.166Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Поэтому приходиться держать два листа минимум<br>
Один для “махинаций”<br>
Второй для “не тронь каку”</p>
<p>Хотя за последнее время только и успевай следить за запретом. Там что-то много изменений уже</p></td><td>2024-11-03T18:33:08.660Z</td></tr><tr><td>KDS</td><td><p>Понял. Значит достаточно</p>
<pre><code class="lang-auto">--wf-tcp=80,443 ^
--filter-tcp=80,443 --hostlist-exclude="%~dp0yahoo.txt" --dpi-desync=fake --dpi-desync-fooling=datanoack
</code></pre>
<p>В txt пишем <code>yahoo.com</code> и любые другие незаблоченные сайты, которые ломаются</p>
<p><a class="mention" href="/u/hentay">@Hentay</a> Я себе сделал еще “трожь каку но не так” ))</p>
<p>Но так как теперь порты в фильтре можно юзать через запятую, то минус одна строка в конфиге</p></td><td>2024-11-03T18:37:27.061Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2193" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>хостлист это петушь - лишняя большая нагрузка + никогда не будет полным</p>
</blockquote>
</aside>
<p>прошу прощения за оффтоп, но вы случайно не мой сосед по провайдеру? у меня с началом блокировок ютуба начал умирать интернет по вечерам, причем проблема была явно локальная до выхода на магистральный канал (и до тспу). кое-как решил вопрос с провом, такое ощущение что там кто-то канал забивал=)<br>
/trolling off</p></td><td>2024-11-03T18:41:44.903Z</td></tr><tr><td>Hentay(Hentay)</td><td><details>
<summary>
Спойлер</summary>
<p>Таких соседей у каждого … Много<br>
ТСПУ у некоторых так иногда ложиться, что интернет в обнимке тоже</p>
</details></td><td>2024-11-03T18:45:20.548Z</td></tr><tr><td>KDS</td><td><p>Хотелось бы уточнений, какой именно NAT оно ломает, а то не совсем понятно. Нат в роутере? нат провайдера? Оба?</p></td><td>2024-11-03T18:52:12.625Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>покачто пальцем в небо сменил на md5sig вместо datanoack<br>
и в первом приближении работает</p>
<p>но хочется всёж первопричину поймать</p>
<ul>
<li>с одной стороны хром (в ie гуд)</li>
<li>-с другой стороны яху (другие работают)</li>
<li>а с третий winws… но что именно ломает datanoack  или fake ?  и но опять почему тока яху и в хроме…</li>
</ul>
<p>и напоследок если --hostlist-exclude прикручу какие правила подстановки?<br>
<a href="http://yahoo.com" rel="noopener nofollow ugc">yahoo.com</a> понятно<br>
а чтоб *.yahoo.com как?</p></td><td>2024-11-03T18:53:30.849Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="KDS" data-post="2203" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Хотелось бы уточнений, какой именно NAT оно ломает, а то не совсем понятно. Нат в роутере? нат провайдера? Оба?</p>
</blockquote>
</aside>
<p>кстати да, пинг 250+ был именно в nat провайдера, дальше уже не повышался. но тут речь была впринципе об использовании хостлистов (ипсетов) для любой стратегии.</p></td><td>2024-11-03T18:56:04.278Z</td></tr><tr><td>bolvan</td><td><p>Судя по стратегии там нет ломки NAT<br>
datanoack его ломает, например.<br>
Что вообще такое ломка NAT ? Это когда conntrack помечает пакет как INVALID, отказывается делать для него NAT, а правило типа такого : -m conntrack --ctstate INVALID  -j DROP<br>
в цепочке OUTPUT блокирует отсылку пакета. В этом случае отсылатель получает permission denied.<br>
Если сделать iptables -I OUTPUT -j DROP, то любая отсылка будет вызывать денай<br>
Можно сделать так : iptables -I OUTPUT -m conntrack --ctstate INVALID  -j LOG<br>
и смотреть dmesg нет ли чего “такого”</p></td><td>2024-11-03T18:56:33.894Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Quqas" data-post="2204" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>а чтоб *.yahoo.com как?</p>
</blockquote>
</aside>
<p>Поддомены обрабатываются автоматом при наличии в списке основного домена, в нашем случае <code>yahoo.com</code> Ничего дополнительно указывать не надо.</p>
<p>И упаси вас бог совать звездочки в хостлист - это мало что не работает, так еще и смешно выглядит.</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> В общем, неоднозначный тип (как это правильно назвать то? Ограничитель?). Я бы лично подыскал что-нибудь другое.</p></td><td>2024-11-03T19:09:59.995Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>А можно ли как-то прописать для портов 80 и 443, чтобы проходили сначала профили с md5sig, а затем, если не пробивает, уже с datanoack?</p>
<p>Типа вот так или как грамотно прописать?:</p>
<pre><code class="lang-auto">--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="%~dp0list-youtube.txt" --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^
--filter-tcp=80,443 --hostlist-auto="%~dp0my_hostlist.txt" --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-autottl=2 --dpi-desync-fooling=datanoack
</code></pre></td><td>2024-11-03T19:21:39.928Z</td></tr><tr><td>bolvan</td><td><p>Единственная обратная связь присутствует в логике auto hostlist. Больше ее нигде нет.<br>
Вряд ли md5sig нужен, если работает datanoack</p></td><td>2024-11-03T19:26:26.744Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>То бишь смысла нет писать отдельно для 80 и 443, а затем вместе стратегию для 80,443? Верхние строчки с отдельно стратегиями для 80 и 443 можно убрать?</p></td><td>2024-11-03T19:35:57.358Z</td></tr><tr><td>bolvan</td><td><p>Первая строчка здесь полностью сьедает 80, дальше он уже не пойдет ни при каких условиях.<br>
Вторая строчка имеет дополнительное условие по хостлисту. Что мимо пойдет на 3 строчку.<br>
Получается в 3 строчке лишний порт 80. И автолист будет работать только по https. http будет дуриться всегда</p></td><td>2024-11-03T19:41:56.691Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Quqas" data-post="2191" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>казалосьбы нашёл отличную стратегию</p>
<pre><code class="lang-auto"> --dpi-desync=fake --dpi-desync-fooling=datanoack
</code></pre>
<p>но в хроме обычный неблоченый яху сдох<br>
<code>https://www.yahoo.com/</code><br>
и<br>
<code>http://mail.yahoo.com/</code></p>
<p>дают ERR_CONNECTION_RESET а приэтом в древнейшем ie11 заходит и curl тоже (поэтому blockchek не помогает)</p>
</blockquote>
</aside>
<p>Может у вас ipv6? Я не знаю на всех ли роутерах/провайдерах это так работает, но на моем, ipv6 выдается непосредственно устройству за роутером. Т.е. роутер по ipv6 перестает играть роль NAT (вроде как, я не эксперт если что, хз как оно на самом деле работает).<br>
Поэтому по ipv6 datanoack работает, а по ipv4 - уже нет. И, соответственно, если браузер сначала тычется в ipv6 - то всё норм. А если сначала в ipv4 (или одновременно туда и туда) - то фейл. Сам недавно такой прикол у себя обнаружил.</p></td><td>2024-11-03T20:40:49.218Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Если хром древний, чему удивляешься?<br>
Если на 7 нужно что-то хромоподобное, то Supermium в помощь. Не занимайся некрофилией.</p></td><td>2024-11-03T22:03:06.430Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>как в винде разделить дурение http и https?</p>
<p>чтоб для 80 порта datanoack а для 443 badseq</p>
<p><code>"C:\++\winws.exe" --wf-l3=ipv4 --wf-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --wf-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --wf-udp=443 --dpi-desync=fake</code></p>
<p>такое проглатывает без ошибки но эффекта не наблюдаю</p>
<p>или стопицот процессов только делать?</p></td><td>2024-11-04T00:55:27.516Z</td></tr><tr><td>Ori</td><td><p>Типа такого<br>
<code>"C:\++\winws.exe" --wf-l3=ipv4 --wf-udp=443 --wf-tcp=80,443,22220-22226,25500-25800 --filter-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --new --filter-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --new --filter-udp=443 --dpi-desync=fake</code></p>
<p>Хотя я не уверен проглотит ли filter-tcp такую штуку 443,22220-22226,25500-25800. Если нет то разнеси по отдельным фильтрам.</p>
<pre><code class="lang-auto">start "" /min "winws.exe" --wf-l3=ipv4 --wf-udp=443 --wf-tcp=80,443,22220-22226,25500-25800 ^
--filter-tcp=443 --dpi-desync=fake --dpi-desync-fooling=badseq --new ^
--filter-tcp=22220-22226 --dpi-desync=fake --dpi-desync-fooling=badseq --new ^
--filter-tcp=25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --new ^
--filter-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --new ^
--filter-udp=443 --dpi-desync=fake
</code></pre></td><td>2024-11-04T01:17:19.184Z</td></tr><tr><td>bolvan</td><td><p>Провайдер не может выдавать ipv6 устройствам за роутером. Это делает роутер.<br>
Провайдер выдает маршрутизируемый префикс обычно через DHCPv6-PD. Prefix delegation.<br>
Чаще всего /64, иногда /56 или даже /48.<br>
NAT не используется. Для раздачи клиентам адресов используется 2 механизма : stateless SLAAC и statefull DHCPv6</p>
<p>В фоксе есть установка fast-fallback-to-IPv4. По умолчанию включена. В этом случае броузер пытается законектиться так, как считает быстрее. Если отключить, будет следовать правилам приоритета в ОС, которые по дефолту предпочитают ipv6. Что может быть полезно для обхода блокировок, но если сайт сломан по ipv6, будет хуже для него. Будет тупняк с открытием</p></td><td>2024-11-04T06:24:05.980Z</td></tr><tr><td>bolvan</td><td><p>Порты уже можно писать через ЗПТ в filter, дублирование не нужно</p></td><td>2024-11-04T06:26:10.773Z</td></tr><tr><td>abc555</td><td><p>Интересует этот параметр --ctrack-timeouts по умолчанию 60:300:60:60<br>
Раньше я его не замечал, он появился в обновлённой версии ?<br>
Я так понимаю по умолчанию выглядит так нужно добавлять на прмере --ctrack-timeouts=60:300:60:60 это значение ?<br>
У меня стоит так, я изменил через sysctl<br>
net.netfilter.nf_conntrack_generic_timeout=60<br>
net.netfilter.nf_conntrack_tcp_timeout_close_wait=30<br>
net.netfilter.nf_conntrack_tcp_timeout_established=180<br>
net.netfilter.nf_conntrack_tcp_timeout_fin_wait=30<br>
net.netfilter.nf_conntrack_tcp_timeout_syn_recv=30<br>
net.netfilter.nf_conntrack_tcp_timeout_syn_sent=60<br>
net.netfilter.nf_conntrack_tcp_timeout_time_wait=30<br>
net.netfilter.nf_conntrack_udp_timeout_stream=60<br>
и на какое значение  --ctrack-timeouts надо изменить чтоб соответствовало моим значением ?<br>
А то мне не совсем понятно что это S:E:F[:U]</p></td><td>2024-11-04T09:20:12.651Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Параметр есть давно и относится к процессу nfqws и встроенному в него контраку<br>
К системному это отношения не имеет</p></td><td>2024-11-04T09:28:42.323Z</td></tr><tr><td>doomer2007</td><td><p>Какая правельная практика выявления причины задержки на 1 секунду в приложении ютуба? Как анализирубт проблемы в приложениях? Думаю уже многие этим интересовались и есть ссылки даже на форуме на это.</p></td><td>2024-11-04T09:28:47.691Z</td></tr><tr><td>abc555</td><td><p>Ну так он должен соответствовать с моим, а то системный удалил, а этот его ещё держит.<br>
Или он отталкивается от системного ? Вот это я не знаю, поэтому и спрашиваю.<br>
bolvan просто упорядочил инструкцию и этот параметр сразу бросился мне в глаза</p></td><td>2024-11-04T09:30:39.873Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2187" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Главное, чтобы без хедеров L2/L3/L4. И без кибера.<br>
TLS должен начинаться с 16 03</p>
</blockquote>
</aside>
<p>Благодарю, все получишось и работает заметно лучше чем на стоке.</p></td><td>2024-11-04T11:13:39.295Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>так как строка должна быть, не понимаю?</p>
<pre><code class="lang-auto">"C:\///\winws.exe" --wf-l3=ipv4 --wf-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --wf-udp=443 --dpi-desync=fake
</code></pre>
<p>что тут удалить и где --filter вставить ?</p></td><td>2024-11-04T12:37:49.916Z</td></tr><tr><td>Quqas(Quqas)</td><td><pre><code class="lang-auto">"//\winws.exe" --wf-l3=ipv4 --wf-tcp=80,443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --filter-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --wf-udp=443 --dpi-desync=fake
</code></pre>
<p>так тоже не даёт эффект</p></td><td>2024-11-04T12:53:05.122Z</td></tr><tr><td>bolvan</td><td><blockquote>
<p>–ctrack-timeouts</p>
</blockquote>
<p>Не надо в это лезть.<br>
К sysctl имеет нулевое отношение. Это внутренняя кухня nfqws.<br>
Без ее детального понимания не стоит менять</p></td><td>2024-11-04T13:18:34.914Z</td></tr><tr><td>bolvan</td><td><p>Ерунда написана. Перехватывается то, что потом не обрабатывается<br>
В один профиль запихано tcp 80 и udp 443.<br>
Профили разделяются ключом --new, а не --filter</p></td><td>2024-11-04T13:21:36.822Z</td></tr><tr><td>bolvan</td><td><p>Шарк, голова и знания. Других рецептов не знаю.</p></td><td>2024-11-04T13:24:06.869Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2226" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Ерунда написана. Перехватывается то, что потом не обрабатывается<br>
В один профиль запихано tcp 80 и udp 443.<br>
Профили разделяются ключом --new, а не --filter</p>
</blockquote>
</aside>
<p>так я и не спорю что ерунда - но самому не получается<br>
вот в 2 процесса разделяется</p>
<pre><code class="lang-auto">\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --wf-udp=443 --dpi-desync=fake
</code></pre>
<pre><code class="lang-auto">\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=80 --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig
</code></pre>
<p>а как в 1 строку=процесс не хватает мозга понять</p>
<p>речь про винду</p></td><td>2024-11-04T14:32:06.589Z</td></tr><tr><td>bolvan</td><td><p>А даже так ерунда.<br>
На портах 22220-22226,25500-25800 есть TLS или HTTP ?<br>
Если нет, то ничего не будет происходить.<br>
2 раза написано --dpi-desync=fake.<br>
Если кажется, что если второй раз написать --filter, будет другая стратегия, то это не так</p>
<p>Первая строчка будет дурить все http и tls на портах  tcp 443,22220-22226,25500-25800 и quic на udp 443<br>
с параметрами --dpi-desync=fake --dpi-desync-fooling=badseq.<br>
В случае udp badseq будет проигнорирован</p>
<p>Фильтр перехвата --wf глобален. Он не относится к отдельным профилям</p></td><td>2024-11-04T15:05:36.498Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ок а вот так</p>
<pre><code class="lang-auto">\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --wf-udp=443

</code></pre>
<p>и</p>
<pre><code class="lang-auto">\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=80 --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig
</code></pre>
<p>на 22220+ hola работает поэтому надо, но как для tcp80 свою стратегию не так как для 443? если это вообще для 1го процесса=строки возможно?</p></td><td>2024-11-04T16:04:07.096Z</td></tr><tr><td>bolvan</td><td><p>docs/quick_start_windows.txt</p></td><td>2024-11-04T18:15:35.438Z</td></tr><tr><td>KDS</td><td><p><code>\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=80,443,22220-22226,25500-25800 --wf-udp=443 --filter-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --new --filter-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig --new --filter-udp=443 --dpi-desync=fake</code></p>
<p>Вряд ли это хоть что-то откроет, конечно, в современных реалиях (разве что HTTP), но хоть для понимания )</p></td><td>2024-11-04T18:58:09.345Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>это “копия” <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2215" class="inline-onebox">Zapret: обсуждение - #2215 by Ori</a></p>
<p>и изначально показалось излишним</p></td><td>2024-11-04T19:00:57.843Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>winws</p>
<pre><code class="lang-auto"> --wf-l3=ipv4  --wf-udp=443 --wf-tcp=80,443,22220-22226,25500-25800 --filter-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig --new --dpi-desync=fake --dpi-desync-fooling=badseq
</code></pre>
<p>вроде то, но даже запущенный без ошибок “we have 2 user defined desync profile(s) and default low priority profile 0”<br>
вызывает сомнения что я прав<br>
(в faq написано то подробно, даже излешне, но примеров “целиком” нет и оттого нетольколишьвсё очевидно)</p></td><td>2024-11-04T19:04:37.369Z</td></tr><tr><td>KDS</td><td><p>Какая ж это копия? Тут бэдсекью, там датаноаск и порты в другом порядке обрабатываются. Все как в ваших последних постах.</p></td><td>2024-11-04T19:10:15.716Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>потому и в кавычках</p>
<p>показалось излишним сама конструкция с фильтрами</p>
<p>мессагой выше - то что я с напряжением мозга выдал - ждём “утверждения” от bolvan</p></td><td>2024-11-04T19:12:55.118Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2234" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>вроде то</p>
</blockquote>
</aside>
<p>стратегия кривая какая-то. в winws передал<br>
udp=443 --wf-tcp=80,443,22220-22226,25500-25800<br>
̶а̶ ̶и̶с̶п̶о̶л̶ь̶з̶о̶в̶а̶т̶ь̶ ̶б̶у̶д̶е̶ш̶ь̶ ̶т̶о̶л̶ь̶к̶о̶ ̶f̶i̶l̶t̶e̶r̶-̶t̶c̶p̶=̶8̶0̶</p>
<p>рекомендую ознакомиться с</p><aside class="quote quote-modified" data-post="150" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/150">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Несколько практических замечаний по поводу мульти-стратегий. 
Если используются скрипты zapret, то в опции NFQWS сначала пишите специальные стратегии для особых доменов. После них пишите --new и дальше то, что было там раньше. 
Все свои “фишки” типа стандартных листов / автолиста скрипты zapret добавляют в конец - к последнему профилю десинхронизации. 
НЕСОВМЕСТИМОЕ ИЗМЕНЕНИЕ. 
В новой концепции профилей методы нулевой фазы десинхронизации несовместимы с хост-листами и больше не применяются ! 
Р…
  </blockquote>
</aside>

<p>p.s я ошибся, насколько проверил, во 2 фильтре будет использоваться все перечисленное, что не попало в http, но все равно криво, особенно udp</p></td><td>2024-11-04T19:13:58.481Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group quote-modified" data-username="uwu" data-post="2237" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>только filter-tcp=</p>
</blockquote>
</aside>
<p>отнюдь</p>
<p>–new и буду юзать что не в фильтре</p>
<p>имхо</p>
<p>+уменя винда</p></td><td>2024-11-04T19:16:12.422Z</td></tr><tr><td>KDS</td><td><p>Я тоже не понимаю его. Спрашивает совета, ему показываешь как надо - он посылает нафиг, придумывает свою полуработающую фигню и ждет какого-то одобрения ) Странный человек.<br>
Думаю, надо его оставить в покое, пусть развлекается сам с собой )</p></td><td>2024-11-04T19:16:26.658Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>да не нафиг я шлю, а “более-лучше” ищу</p>
<p>вот после <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2217" class="inline-onebox">Zapret: обсуждение - #2217 by bolvan</a></p>
<p>и возникли сомненья но ответу я не увидел</p>
<p>p.s. спс вам за то что отвечаете</p></td><td>2024-11-04T19:17:51.127Z</td></tr><tr><td>KDS</td><td><p>Вы до сих пор понять не можете, чем отличается <code>--fw-tcp(udp)=</code> и <code>--filter-tcp(udp)=</code> ? Первое указывает <strong>какие</strong> порты обрабатывать, второе - <strong>как</strong> их обрабатывать. Ну или понимаете, но не так )</p>
<p>Сократить можно разве что так:<br>
<code>\zapret-winws\winws.exe" --wf-l3=ipv4 --wf-tcp=80,443,22220-22226,25500-25800 --wf-udp=443 --filter-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig --new --filter-udp=443 --dpi-desync=fake --new --dpi-desync=fake --dpi-desync-fooling=badseq</code></p>
<p>В итоге получаем:<br>
tcp 80 обрабатывается стратегией <code>--dpi-desync=split --dpi-desync-fooling=md5sig</code><br>
udp 443 обрабатывается стратегией <code>--dpi-desync=fake</code><br>
Все остальное (в нашем случае tcp 443,22220-22226,25500-25800) улетает на стратегию <code>--dpi-desync=fake --dpi-desync-fooling=badseq</code></p>
<p>Но все это без хостлистов, в которых указывается, какие домены обрабатывать или айписетов, в которых указывается то же самое, но в виде IP-адресов - это такое себе решение, череватое сломанными сайтами, которые даже не заблокированы и прочими подобными сюрпризами. Потому что тут у сайта канал не такой, тут фейк не туда улетел и вот это вот все.</p></td><td>2024-11-04T19:42:50.256Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>А как-же режим “none”?<br>
Но судя по-всему на винде данный режим не доступен. Прошу прощения…</p></td><td>2024-11-04T19:46:01.629Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>всё правильно. изначально хотел 80 и остальные порты разделить</p>
<p>и твой вариант с <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2234" class="inline-onebox">Zapret: обсуждение - #2234 by Quqas</a></p>
<p>какбудто совпадает - т.е. оно заработало, но 146% уверенности что я ничего не попутал  - нету</p></td><td>2024-11-04T19:50:17.295Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну подумаешь…<br>
Роутер ляжет или дым пойдет<br>
Все хорошо. Не бойся <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p></td><td>2024-11-04T19:55:00.154Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="KDS" data-post="2241" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p><code>--fw-tcp(udp)=</code> и <code>--filter-tcp(udp)=</code> ? Первое указывает <strong>какие</strong> порты обрабатывать, второе - <strong>как</strong> их обрабатывать. Ну или понимаете, но не так )</p>
</blockquote>
</aside>
<p>Проще сказать, что --wf-tcp(udp) - это флаги для windivert’а, а <code>--filter-tcp(udp)</code> - для winws’а. Т.е. первые говорят драйверу с каких портов перехватывать трафик. А вторые уже используются для внутренней фильтрации запретом. Насколько я понимаю.<br>
Ну в целом, вы это и написали, если так подумать <img src="https://ntc.party/images/emoji/twitter/zipper_mouth_face.png?v=12" title=":zipper_mouth_face:" class="emoji" alt=":zipper_mouth_face:" loading="lazy" width="20" height="20"><br>
Короче, это на тему того, почему их надо 2 раза указывать:</p>
<blockquote>
<p>показалось излишним сама конструкция с фильтрами</p>
</blockquote></td><td>2024-11-04T19:56:35.579Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Quqas" data-post="2243" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>какбудто совпадает</p>
</blockquote>
</aside>
<p>Вот именно что как-будто. Ибо указано обрабатывать udp 443 но стратегия для него не указана, а badseq не работает с udp, о чем вам не раз уже было сказано. Остается фейк, что нам в принципе и надо для udp 443, но в чем проблема фильтр указать, чтобы прога точно знала что делать? Комп от этого не сгорит и дым из роутера не пойдет )</p>
<p><a class="mention" href="/u/ori">@Ori</a> Может и “проще”, но явно не понятнее на начальном этапе ознакомления с программой.</p></td><td>2024-11-04T19:59:57.630Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>да, но тут <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2215" class="inline-onebox">Zapret: обсуждение - #2215 by Ori</a> аж 3 разу фильтр</p>
<p>но в целом понял всё в том числе что и udp не сломается в моём случае</p></td><td>2024-11-04T20:04:01.470Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Quqas" data-post="2247" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>аж 3 разу фильтр</p>
</blockquote>
</aside>
<p>Раньше фильтр запрета не умел обрабатывать порты через запятую. Сейчас уже умеет, поэтому того тройного дублирования из моего поста выше не нужно:</p>
<pre><code class="lang-auto">start "" /min "winws.exe" --wf-l3=ipv4 --wf-udp=443 --wf-tcp=80,443,22220-22226,25500-25800 ^
--filter-tcp=443,22220-22226,25500-25800 --dpi-desync=fake --dpi-desync-fooling=badseq --new ^
--filter-tcp=80 --dpi-desync=fake --dpi-desync-fooling=datanoack --new ^
--filter-udp=443 --dpi-desync=fake
</code></pre>
<p>Это для .cmd файла конструкция, если что. Бога ради, не запихивайте строку запуска в ярлык. Там ограничение по кол-ву символов + это максимально неудобно.</p></td><td>2024-11-04T20:06:26.103Z</td></tr><tr><td>KDS</td><td><p>Мы тут по сути, бьемся за грамматику. Можно написать “андроид”, а можно “андройд”. В принципе и так и так поймут…</p>
<p>И стратегии эти все равно ничего не открывают даже у меня (только что проверил), а у меня провайдер с блокировками вообще не злобствует особо.</p></td><td>2024-11-04T20:10:10.863Z</td></tr><tr><td>Chep</td><td><p>Разве нельзя фильтр юдп из последней строки запихать в первую, ведь</p>
<aside class="quote no-group" data-username="bolvan" data-post="2229" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В случае udp badseq будет проигнорирован</p>
</blockquote>
</aside>
<p>Разве так не будет достигнуто “уменьшение” кол-ва строк?</p></td><td>2024-11-04T20:11:31.510Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Скачиваете архив: <a href="https://github.com/bol-van/zapret-win-bundle" class="inline-onebox" rel="noopener nofollow ugc">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a><br>
Там есть Блокчек. Первый раз прогоняете его для того, чтобы понять, какие вообще стратегии работают против Вашего провайдера.<br>
Выбираете самые пробивные (смотреть их нужно не только в конце по результату, но и в самой процедуре).<br>
Затем берете из preset_russia.cmd дефолтную конфигурацию и подставляете свои параметры из Блокчека.<br>
В браузере проверяете на запрещенных сайтах - открывается или нет. Методом тыка со временем подберете себе стратегию на основе дефолтного шаблона/конфигурации.<br>
А с нуля никто здесь заочно Вам не напишет готовую конфигурацию, а самое главное - точно работащую конкретно против Вашего провайдера.</p></td><td>2024-11-04T20:21:26.352Z</td></tr><tr><td>Ori</td><td><p>Я хз, можно ли filter-tcp и filter-udp одновременно использовать для одного набора правил? Я не пробовал у себя. Если да - то вы правы.</p>
<p>Хотя там, наверное, для портов 22220-22226,25500-25800 надо добавлять отдельную строку. Потому что, что там на этих портах висит? Hola VPN? Какой она протокол использует, wireguard? Там может понадобиться <code>--filter-l7=wireguard</code> Хз крч.</p></td><td>2024-11-04T22:31:34.700Z</td></tr><tr><td>Hentay(Hentay)</td><td><pre><code class="lang-auto">--dpi-desync-any-protocol=0|1			; 0(default)=работать только по http request и tls clienthello  1=по всем непустым пакетам данных
</code></pre>
<p>Обработка по порту любого протокола</p></td><td>2024-11-04T22:34:35.680Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group quote-modified" data-username="Hentay" data-post="2253" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>–dpi-desync-any-protocol=0|1	<br>
Обработка по порту любого протокола</p>
</blockquote>
</aside>
<p>Пихать это добро на 443 порт - плохая идея, имхо. Уж лучше разнести по 2 фильтрам. 443 там, 22220-22226,25500-25800 - сям.</p></td><td>2024-11-04T22:39:17.909Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Знаю. Если у нас уникальная часть, то лучше дробить.<br>
Если не уникальна, то соединять</p></td><td>2024-11-04T22:44:14.290Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="Ori" data-post="2252" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Какой она протокол использует</p>
</blockquote>
</aside>
<p>в том то и дело что  обычный http(s)<br>
и утырки чебурнетные умудряются автоматом любой порт с http(s) блочить<br>
а мне сниффером выискивать их ещё надо<br>
а чтоб winws сам искал траф на любом порту - нету способа (ну кроме 1-65535)</p>
<hr>
<p>а ещё безотносительно всего что за сутки писал - curl как минимум под винду из blockchek вводит в заблуждения<br>
то что в нём “авалибабл” в реальной реальности в хроме или прогах под винду не работает<br>
syndata уж точно и прочие стратегии которые я по совету из faq старался выбирать наиболее “простые” чтоб минимум параметров = в реальности пришлось “усложнять” чтоб таже hola таки заработала<br>
только fake ей мало нужно fake,disorder - хотя curl и просто fake успешным считает и  fake,disorder<br>
и если сайты работают с просто fake для расширения holavpn уже fake,disorder обязателен<br>
и этот момент я вспотел выявлять…</p></td><td>2024-11-05T00:05:08.746Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>hola нужна чтоб там где эрэфийские ip лочат</p>
<p>и пока не работала в снифире никаких rst не видел - доп.причина “потеть” rst нету а hola не открывает сайты…<br>
поэтому  fake,disorder буквально пальцем в небо наугад пришлось подставлять</p></td><td>2024-11-05T00:19:44.843Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Quqas" data-post="2257" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>hola нужна чтоб там где эрэфийские ip лочат</p>
</blockquote>
</aside>
<p>Региональные блокировки, в большинстве своем, можно обойти тупо поставив в качестве doh <code>https://dns.controld.com/comss</code> или <code>https://dns.comss.one/dns-query</code></p></td><td>2024-11-05T00:35:42.272Z</td></tr><tr><td>meadow_seed</td><td><aside class="quote no-group" data-username="Ori" data-post="2258" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Региональные блокировки, в большинстве своем, можно обойти тупо поставив в качестве doh</p>
</blockquote>
</aside>
<p>Но… как может смена днс открывать сайты которые блокируют тебе доступ по айпи?<br>
Могу предположить, что происходит одно из двух:<br>
a. Сайты имеют какой-то секретный айпи на котором они доступны даже из страны которой они сами блокируют доступ. И comss каким-то образом находит такие айпи, что очень маловероятно.<br>
b. Этот днс просто подменяет айпи сайта на свой прокси расположенный в другой стране. То есть это тупо аналог бесплатных впн-расширений для браузера со всеми сопутствующими рисками в виде кражи данных и паролей.</p>
<aside class="quote no-group" data-username="Ori" data-post="2258" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p><code>https://dns.controld.com/comss</code> или <code>https://dns.comss.one/dns-query</code></p>
</blockquote>
</aside>
<p>На первом работает <a href="https://controld.com/status" rel="noopener nofollow ugc">Configuration Status | Control D</a>.<br>
Потестил <code>nyaa.si</code> и он открывается, на <code>https://dns.controld.com/comss</code> через айпи <code>206.253.89.78</code> (страна: Канада, провайдер: CONTROLD INC.), а на <code>https://dns.comss.one/dns-query</code> через <code>51.38.99.209</code> (страна: Германия, провайдер: VPS-LIM).</p></td><td>2024-11-05T05:05:25.675Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2234" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p><code>--wf-l3=ipv4  --wf-udp=443 --wf-tcp=80,443,22220-22226,25500-25800 --filter-tcp=80 --dpi-desync=split --dpi-desync-fooling=md5sig --new --dpi-desync=fake --dpi-desync-fooling=badseq</code></p>
</blockquote>
</aside>
<p>Здесь особая дурка для 80, остальное, включая и udp, идет по последнему профилю<br>
Но в целом это уже что-то разумное</p></td><td>2024-11-05T06:40:01.899Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="uwu" data-post="2237" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>рекомендую ознакомиться с</p>
<aside class="quote no-group">
<blockquote>
<p>Несколько практических замечаний по поводу мульти-стратегий. Если используются скрипты zapret, то в опции NFQWS сначала пишите специальные стратегии для особых доменов. После них пишите --new и дальше то, что было там раньше. Все свои “фишки” типа стандартных листов / автолиста скрипты zapret добавляют в конец - к последнему профилю десинхронизации. НЕСОВМЕСТИМОЕ ИЗМЕНЕНИЕ. В новой концепции профилей методы нулевой фазы десинхронизации несовместимы с хост-листами и больше не применяются ! Р…</p>
</blockquote>
</aside>
<p>p.s я ошибся, насколько проверил, во 2 фильтре будет использоваться все перечисленное, что не попало в http, но все равно криво, особенно udp</p>
</blockquote>
</aside>
<p>Это уже устаревшая информация для старых конфигоф, где было MODE_HTTP, MODE_QUIC</p></td><td>2024-11-05T06:41:25.834Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="2252" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Я хз, можно ли filter-tcp и filter-udp одновременно использовать для одного набора правил? Я не пробовал у себя. Если да - то вы правы.</p>
</blockquote>
</aside>
<p>Можно</p>
<aside class="quote no-group" data-username="Ori" data-post="2252" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Хотя там, наверное, для портов 22220-22226,25500-25800 надо добавлять отдельную строку. Потому что, что там на этих портах висит? Hola VPN? Какой она протокол использует, wireguard? Там может понадобиться <code>--filter-l7=wireguard</code> Хз крч.</p>
</blockquote>
</aside>
<p>Он в tcp засовывал эти порты, а WG работает по UDP.<br>
Если нет --dpi-desync-any-protocol, то по tcp реакции не будет ни на что, кроме HTTP и TLS</p></td><td>2024-11-05T06:47:09.144Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2261" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Это уже устаревшая информация для старых конфигоф, где было MODE_HTTP, MODE_QUIC</p>
</blockquote>
</aside>
<p>да чтож вы все на первый абзац внимание обращаете…<br>
там в середине идет описание, что такое wf и filter и парсинг стратегии для winws. я ради этого и скидывал</p></td><td>2024-11-05T06:47:11.293Z</td></tr><tr><td>bolvan</td><td><p>Все фишки вроде стандартных листов уже НЕ добавляются в конец. Ими замещаются маркеры, поскольку их можно написать в разных местах и не 1 раз в зависимости от целей</p></td><td>2024-11-05T06:48:14.988Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2253" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<pre><code class="lang-auto">--dpi-desync-any-protocol=0|1			; 0(default)=работать только по http request и tls clienthello  1=по всем непустым пакетам данных
</code></pre>
<p>Обработка по порту любого протокола</p>
</blockquote>
</aside>
<p>Нет, не на порту. Порт тут не при делах.<br>
Это означает включить реакцию на КАЖДЫЙ пакет. Абсолютно любой. До скончания соединения, если не указаны лимитеры start и cutoff, либо поток трафика не пресечется connbytes</p></td><td>2024-11-05T06:50:14.270Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2256" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>в том то и дело что обычный http(s)<br>
и утырки чебурнетные умудряются автоматом любой порт с http(s) блочить<br>
а мне сниффером выискивать их ещё надо<br>
а чтоб winws сам искал траф на любом порту - нету способа (ну кроме 1-65535)</p>
</blockquote>
</aside>
<p>Для этого и существует параметр --filter-l7=tls. Когда порт неизвестен, а надо дурить только конкретный протокол.<br>
Но диапазон портов все равно очень желательно ограничить, чтобы не перенапрягать windivert</p></td><td>2024-11-05T06:52:13.140Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Спасибо за более подробный ответ</p></td><td>2024-11-05T06:54:10.520Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="meadow_seed" data-post="2259" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/m/43a26b/48.png" class="avatar"> meadow_seed:</div>
<blockquote>
<p>Но… как может смена днс открывать сайты которые блокируют тебе доступ по айпи?<br>
Могу предположить, что происходит одно из двух:<br>
a. Сайты имеют какой-то секретный айпи на котором они доступны даже из страны которой они сами блокируют доступ. И comss каким-то образом находит такие айпи, что очень маловероятно.<br>
b. Этот днс просто подменяет айпи сайта на свой прокси расположенный в другой стране. То есть это тупо аналог бесплатных впн-расширений для браузера со всеми сопутствующими рисками в виде кражи данных и паролей.</p>
</blockquote>
</aside>
<p>Второй вариант. Уже натыкались. Они подменяют DNS на свой прокси</p></td><td>2024-11-05T06:55:12.724Z</td></tr><tr><td>abc555</td><td><p>Подскажите, NFQWS_PORTS_TCP_KEEPALIVE=80 работает только на 80 порту или можно добавлять через запятую любой порт ? И эта функция работает только на обходе или полностью для всего любого трафика 80 порта, независимо от обхода ?<br>
Нашел для себя полезность этой функции, я знаю что это, просто хочу немного уточнить</p></td><td>2024-11-05T08:00:39.585Z</td></tr><tr><td>bolvan</td><td><p>На любом порту. Но эта функция требует очень много головы и понимания зачем она нужна.<br>
Потому что ей нагрузить систему проще простого, а desync-any-protocol без cutoff приобретает те же свойства, что и на винде. ТРЭШ ФЛУД<br>
В России я не вижу ей адекватного применения на данный момент.</p></td><td>2024-11-05T08:17:59.322Z</td></tr><tr><td>abc555</td><td><p>Но я так понимаю TCP_KEEPALIVE говорит само за себя ? То есть не даёт разорвать соединение, точнее повторного запроса привет отсылать не будет, а продолжит использовать первое подключение на котором произошло рукопожатие, правильно я понимаю ? То есть при обрыве второй раз повторный привет слать не будет.<br>
И на счёт нагрузить систему, можно как то поподробней ? Какой период времени у KEEPALIVE ?<br>
Я изменил у себя глобально<br>
net.ipv4.tcp_keepalive_time=60<br>
net.ipv4.tcp_keepalive_intvl=10<br>
net.ipv4.tcp_keepalive_probes=5<br>
И как я понимаю, мои настройки должны быть в приоритете ? Я правильно понимаю ?<br>
Если я правильно понимаю, то при моих настройках, система нагружена не будет, поэтому смело можно использовать. Я вообще изменил все почти параметры которые были по умолчанию через sysctl, поэтому положить роутер я исключаю такую возможность.<br>
При настройках по умолчанию, да возможно забить оперативку и нагрузить проц</p></td><td>2024-11-05T08:29:27.540Z</td></tr><tr><td>bolvan</td><td><p>Но все является тем, чем звучит.<br>
Обьяснение не соответствует действительности совсем.<br>
И никакого отношения к sysctl не имеет.<br>
Надо побольше читать доку. Просто взять ctrl+f и найти слово.</p>
<p>И еще неплохо бы задуматься зачем стали бы скрипты zapret ковыряться в системных настройках, не имеющих к его работе никакого отношения. Просто чтобы комбайн все в кучу ? Тут бы помойка настала</p></td><td>2024-11-05T08:55:20.773Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Раз даже от опытных пользователей до сих пор идут вопросы и непонимание, как и что работает в Запрете, значит, инструкцию мало кто понимает… А уж новичку и подавно сложно разобраться. Из этого делаю вывод, что перед чтением документации Запрета необходимо прочитать книгу по компьютерным сетям и инструкцию как все это на практике работает. Ну и примеры, как будет работать та или иная строчка, опция. Без этого понимания не будет. Всё будет методом “тыка”.</p></td><td>2024-11-05T09:42:43.887Z</td></tr><tr><td>abc555</td><td><p>А вы так и не ответили на вопрос. Можно хотя бы приблизительно было ответить и доку я читал, там ничего не объясняется, так в двух словах по типу шпаргалки. Вы ведь создали, значит должны знать и хоть примерно, кроме того как “Обьяснение не соответствует действительности совсем”<br>
Какой не будь случай из жизни, к примеру вот была такая ситуация и роутер лёг и тогда на этом фоне будет нарисовываться картина, что и как работает</p></td><td>2024-11-05T11:03:39.889Z</td></tr><tr><td>abc555</td><td><p>Вы абсолютно правы, поэтому чтоб не читать книги по сетям, проще спросить )</p></td><td>2024-11-05T11:09:42.966Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>А кажись в доке написано, но сокращенно<br>
Нужно исходить от стороны запрета.</p>
<p>Данная функция отвечает за слежением TCP_KeepAlive соединений.<br>
Дурим мы просто по стратегией  первые пакеты (в состоянии офф)  или применяем её на все пакеты в соединении (в состоянии он).</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a>  Прошу поправить<br>
<a class="mention" href="/u/abc555">@abc555</a> Вот и картина вырисовывается. И функции sysctl не нужеы</p></td><td>2024-11-05T11:11:21.104Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="2274" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Какой не будь случай из жизни, к примеру вот была такая ситуация и роутер лёг и тогда на этом фоне будет нарисовываться картина, что и как работает</p>
</blockquote>
</aside>
<p>Единственный случай из жизни, это блокировка каждого запроса http внутри одного TCP сеанса.<br>
Такого на современных DPI в России не делается<br>
Следовательно для нубов правило НЕ ТРОГАЙ, НЕ ЛЕЗЬ<br>
Если непонятно обьяснение из доки, обьяснять смысла нет</p></td><td>2024-11-05T11:16:50.279Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2276" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Данная функция отвечает за слежением TCP_KeepAlive соединений.<br>
Дурим мы просто по стратегией первые пакеты (в состоянии офф) или применяем её на все пакеты в соединении (в состоянии он).</p>
</blockquote>
</aside>
<p>Первое предложение неверно, второе почти верно.<br>
Нет никакого on/off. Есть порты, которые перехватывается по upload части с connbytes и без connbytes.<br>
Первым управляет один параметр, вторым другой.<br>
download часть всегда перехватывается с connbytes.</p>
<p>Параметр keepalive отключает connbytes на выход, вот и все</p></td><td>2024-11-05T11:19:25.863Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Спасибо</p>
<p>И там образно было про on/off )</p></td><td>2024-11-05T11:21:20.062Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>В описании фильтра udp опечатка <a href="https://github.com/bol-van/zapret#:~:text=%2D%2Dfilter%2Dudp%3D%5B~%5Dport1%5B%2Dport2%5D%7C*%09%09%09%3B%20%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%20%D0%BF%D0%BE%D1%80%D1%82%D0%BE%D0%B2%20udp%20%D0%B4%D0%BB%D1%8F%20%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B5%D0%B9%20%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B5%D0%B3%D0%B8%D0%B8.%20~%20%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B0%D0%B5%D1%82%20%D0%B8%D0%BD%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8E.%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%20%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%20udp%20%D0%B8%20%D0%BD%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%20%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%20tcp%20%D0%B7%D0%B0%D0%BF%D1%80%D0%B5%D1%89%D0%B0%D0%B5%D1%82%20udp.%20%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F%20%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA%20%D1%87%D0%B5%D1%80%D0%B5%D0%B7%20%D0%B7%D0%B0%D0%BF%D1%8F%D1%82%D1%83%D1%8E.">(–filter-udp=)?</a></p>
<blockquote>
<p>установка фильтра udp и неустановка фильтра tcp запрещает <em><strong>udp</strong></em></p>
</blockquote>
<p>Должно же быть запрещает <em><strong>tcp</strong></em>? По аналогии с --filter-tcp=</p></td><td>2024-11-05T11:23:07.044Z</td></tr><tr><td>bolvan</td><td><p>Да, очепятка</p></td><td>2024-11-05T11:28:59.880Z</td></tr><tr><td>bolvan</td><td><p>Гипотетический пример, когда нужно было бы включить UDP_KEEPALIVE.<br>
stateless DPI. stateless - значит проверяет каждый пакет вне контекста соединений, не помнит контекст и не учитывает. Отдельно взятый пакет. Начинается на d1: Похоже на DHT.  Блокировать.<br>
Торенты тупят.<br>
Включаем keepalive, делаем desync=tamper.  nfqws уродует каждый исходящий пакет d1.  DPI его не замечает, торенты работают</p>
<p>Это чисто теоретический вариант</p>
<p>Навальные блокировки доказали stateful характер , прекрасно работал однократный fake или tamper, значит не надо мучать роутер, включать не нужно keepalive</p></td><td>2024-11-05T11:31:08.784Z</td></tr><tr><td>abc555</td><td><p>Ну вот смотрите, заходим на <a href="http://fast-torrent.ru/" rel="noopener nofollow ugc">http://fast-torrent.ru/</a>, открывается, клацаю на любой торрент, выскакивает заглушка ( не на всех провайдерах именно этот сайт ), включаю KEEPALIVE=80 и заглушка больше не выскакивает, я и предположил что очень эта функция похожа на своё название, а далее ещё хочу проверить одну тему как влияет эта функция на неё</p></td><td>2024-11-05T11:54:35.640Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>У меня без keepalive открывается. Connbytes 1:6 стоят. Подбирайте стратегию другую значит</p></td><td>2024-11-05T12:14:24.956Z</td></tr><tr><td>abc555</td><td><p>Connbytes 1:6  у меня ломает всю мою стратегию, я не использую подобные параметры</p></td><td>2024-11-05T12:30:56.180Z</td></tr><tr><td>abc555</td><td><p>Так же на одном прове перестал почему то открываться этот сайт <a href="http://rutor.lib/" rel="noopener nofollow ugc">http://rutor.lib/</a> и включение KEEPALIVE проблему разрулил, этот сайт не пытайтесь открыть, у вас он не откроется, это я для общественности написал про этот домен, потому что многие не в теме что это</p></td><td>2024-11-05T12:33:57.130Z</td></tr><tr><td>bolvan</td><td><p>HTTP  keepalive проверяется так<br>
Если в ответ на первый запрос идет “Connection: keep-alive”,<br>
curl говорит connection left intact<br>
значит keepalive срабатывает</p>
<p>Если далее включить дурилку без keepalive, и действительно провайдер использует statelss DPI (такие рудиментарники еще остались кое-где), то второй запрос пойдет на заглушку.<br>
В примере заглушки нет, значит keepalive дурилку включать не надо.<br>
На всякий случай включать keepalive - все равно что на всякий случай заглотить горсть непонятных таблеток. Авось поможет какая-то</p>
<pre><code class="lang-auto">curl -v http://fast-torrent.ru/a http://fast-torrent.ru/b
*   Trying 45.142.212.135:80...
* Connected to fast-torrent.ru (45.142.212.135) port 80
&gt; GET /a HTTP/1.1
&gt; Host: fast-torrent.ru
&gt; User-Agent: curl/8.4.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 301 Moved Permanently
&lt; Server: nginx/1.20.1
&lt; Date: Tue, 05 Nov 2024 12:33:11 GMT
&lt; Content-Type: text/html; charset=utf-8
&lt; Content-Length: 0
&lt; Connection: keep-alive
&lt; Location: /a/
&lt; X-Content-Type-Options: nosniff
&lt; Referrer-Policy: same-origin
&lt; Cross-Origin-Opener-Policy: same-origin-allow-popups
&lt; 
* Connection #0 to host fast-torrent.ru left intact
* Found bundle for host: 0x1c74b7dcf00 [serially]
* Re-using existing connection with host fast-torrent.ru
&gt; GET /b HTTP/1.1
&gt; Host: fast-torrent.ru
&gt; User-Agent: curl/8.4.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 301 Moved Permanently
&lt; Server: nginx/1.20.1
&lt; Date: Tue, 05 Nov 2024 12:33:12 GMT
&lt; Content-Type: text/html; charset=utf-8
&lt; Content-Length: 0
&lt; Connection: keep-alive
&lt; Location: /b/
&lt; X-Content-Type-Options: nosniff
&lt; Referrer-Policy: same-origin
&lt; Cross-Origin-Opener-Policy: same-origin-allow-popups
&lt; 
* Connection #0 to host fast-torrent.ru left intact
</code></pre></td><td>2024-11-05T12:36:09.894Z</td></tr><tr><td>abc555</td><td><p>У меня 2 таких заглушки, прова и выше него, ещё одна такая же и keep-alive проблему решил, а то никак не получалось. Ещё одну старую тему которую до конца так и не решил, хочу проверить как она будет работать с этой функцией</p></td><td>2024-11-05T12:41:45.721Z</td></tr><tr><td>bolvan</td><td><p>Если это решает проблему http - хорошо. Но будет крайней глупостью добавлять туда еще какие-то порты</p></td><td>2024-11-05T12:42:47.207Z</td></tr><tr><td>abc555</td><td><p>Флуда это главное не будет с моей стороны ? Не люблю привлекать внимание</p></td><td>2024-11-05T12:43:37.853Z</td></tr><tr><td>bolvan</td><td><p>Флуд возникает только от неграмотного применения desync any protocol</p></td><td>2024-11-05T12:44:06.588Z</td></tr><tr><td>abc555</td><td><p>я не включаю этот параметр desync any protocol, применение к нему так и не нашёл, походу он наверно у меня вообще не работает, та и не нужен лично мне.<br>
А так keep-alive юзаю пока что на iptv, как раз на 80 порту работает, а то вечная шляпа с ним, вечные лаги, пока нормально работает, надо неделю юзать хотя бы чтоб понять, я чисто визуально всегда определяю, для меня так проще и быстрее.</p></td><td>2024-11-05T12:45:58.873Z</td></tr><tr><td>Hentay(Hentay)</td><td><details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">root@RouterLan:/opt/zapret/nfq# curl -v http://fast-torrent.ru/a http://fast-torrent.ru/b
&gt; GET /a HTTP/1.1
&gt; Host: fast-torrent.ru
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 302 Moved Temporarily
&lt; Location: http://vasexperts.ru/test/blocked.php
&lt; Content-Length: 0
&lt; Cache-Control: max-age=0, no-cache, no-store, must-revalidate
&lt; Pragma: no-cache
&lt; Connection: close
&lt; 
&gt; GET /b HTTP/1.1
&gt; Host: fast-torrent.ru
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 302 Moved Temporarily
&lt; Location: http://vasexperts.ru/test/blocked.php
&lt; Content-Length: 0
&lt; Cache-Control: max-age=0, no-cache, no-store, must-revalidate
&lt; Pragma: no-cache
&lt; Connection: close
</code></pre>
</details>
<p>Забавные попытки заблокировать соединение.<br>
Сам сайт работет )</p>
<p>PS Пример, когда срабатывает ограничение провайдера</p></td><td>2024-11-05T13:12:42.889Z</td></tr><tr><td>rem</td><td><aside class="onebox githubissue" data-onebox-src="https://github.com/bol-van/zapret/issues/708">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/issues/708" target="_blank" rel="noopener nofollow ugc">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/issues/708" target="_blank" rel="noopener nofollow ugc">РКН внес в реестр zapret, хорошая работа!</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-11-05" data-time="13:40:55" data-timezone="UTC">01:40PM - 05 Nov 24 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/dttric" target="_blank" rel="noopener nofollow ugc">
          <img alt="dttric" src="zapret-обсуждение-726/9cf4a5efb98a33660fb266ceb2e599ad00a41688.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="C5D6E8">
          dttric
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">иронично что РКН запретил запрет XD
![image](https://github.com/user-attachment<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">s/assets/c73bd1d1-05fe-4c91-8bc6-20e46e5f0014)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-05T14:52:54.742Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Но забавно<br>
В одном месте запретил<br>
В другом месте <a href="https://blocklist.rkn.gov.ru" rel="noopener nofollow ugc">нет</a></p></td><td>2024-11-05T14:55:02.806Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>А при подборе стратегий через блокчек. Используются ли файлы клиентхедло и инитиал квик?</p></td><td>2024-11-05T15:09:37.344Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>И сюда не мог зайти несколько дней без прокси-сервера.<br>
Теперь Запрет для них самая опасная утилита по обходу ДПИ. Главным образом за счет того, что её не заблокируешь так просто, как ВПНы, и к тому же она привлекательна своей абсолютной бесплатностью. А это же вообще харам для чиновников с мышлением торгашей…</p></td><td>2024-11-05T15:44:32.372Z</td></tr><tr><td>bolvan</td><td><p>Странно, что гудбай не запретил заодно.<br>
Но у них реально только 2 возможности этот запрет реализовать.<br>
Или заблокировать весь гитхаб, или заставить его убрать проект или хотя бы скрыть от русских IP</p></td><td>2024-11-05T15:56:39.555Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>В связи с блокировкой DNS, возник вопрос, а можно как-то в Запрете порт 53 задурить от РКН? Чтобы DNSы нельзя было блокировать.</p>
<p>И второй вопрос: --dpi-desync-repeats= можно ли диапазон менять через запятую, например: --dpi-desync-repeats=7,13?</p></td><td>2024-11-05T16:10:03.574Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Дурить 53 порт…<br>
Можно так задурить его, что даже другие ДНС сервера будут  не понимать, что ты хочешь…</p>
<p>А так для DNS и так достаточно большой комплект инструментария</p></td><td>2024-11-05T16:17:42.164Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я спросил у специалистов. Можно ли технически как-то обезопасить ДНСы от блокировок в Запрете. Может неправильно формулирую, мне простительно, я не айтишник.</p></td><td>2024-11-05T16:20:59.650Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Дурить можно…<br>
НО: DoH,DoT,DoQ и многие другие</p>
<p>Выбирайте инструментарий и разворачиваете</p></td><td>2024-11-05T16:23:33.590Z</td></tr><tr><td>bolvan</td><td><p>Какая именно блокировка DNS ? Что-то не слышал пока о такой.<br>
Некоторые провайдеры мутят с DNS. er-telecom , оно же ДОМ, подменяет запросы.<br>
Но это не блокировка<br>
Если они начнут на ТСПУ что-то делать с 53 портом, это затронет не только домашних юзеров. Это сломает всю сеть</p></td><td>2024-11-05T16:37:49.217Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Не совсем блокировка DNS. Они продолжают работать, блокируют [<a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a>], а сайты на ECH к нему стучаться.<br>
Обходится путем добавления этого домена в список.</p></td><td>2024-11-05T16:39:25.732Z</td></tr><tr><td>bolvan</td><td><p>Пока на моих провайдерах не замечаю. Может тестируют на ограниченной аудитории.<br>
Но так они заблокируют вообще весь клауд</p></td><td>2024-11-05T16:41:18.079Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>А что по поводу диапазона repeats?</p></td><td>2024-11-05T16:42:43.229Z</td></tr><tr><td>bolvan</td><td><p>Покажите, что большее количество что-то решает, и увеличу.<br>
Столько дурней прогу юзают, я боюсь они там устроят кошмар</p></td><td>2024-11-05T16:44:44.913Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Ну люди в моей теме отписывались.<br>
Имеем следующих провайдеров, которые блокнули доступ к этому ресурсу и сайты с ECH умерли.</p>
<ol>
<li>МТС;</li>
<li>Билайн;</li>
<li>Ростелеком.<br>
О других провайдерах пока не знаю. И неизвестно глобальная это проблема или как-то бьют по отдельным регионам.<br>
Отвались все сайты на ECH, даже те, что в РФ не заблокированы.<br>
Но пока проблема решается просто, надеюсь, что и дальше также будет решаться.</li>
</ol></td><td>2024-11-05T16:44:49.274Z</td></tr><tr><td>bolvan</td><td><p>У них выбора нет. Их сверху теребят шипастым жезлом. Какого черта все блин открывается. Медуза рутракер. Вы здесь зря хлеб свой жуете ?</p></td><td>2024-11-05T16:46:49.018Z</td></tr><tr><td>Aleksandr75ru</td><td><p>И это грустно, так как были надежды на ECH, но чтобы его так быстро обрубили. Мда…</p></td><td>2024-11-05T16:49:48.274Z</td></tr><tr><td>bolvan</td><td><p>Они слишком затянули с ним. Если бы сделали лет 5 назад, сделали бы обязательным стандартом, хрен бы что получилось у блокеров</p></td><td>2024-11-05T16:51:50.067Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Теперь криптуй все<br>
Шифруй все<br>
И комп в окно <img src="https://ntc.party/images/emoji/twitter/rofl.png?v=12" title=":rofl:" class="emoji" alt=":rofl:" loading="lazy" width="20" height="20"></p>
<p>Когда что-то надо тихо берут и достают.  А не ноют</p></td><td>2024-11-05T16:52:57.116Z</td></tr><tr><td>i-no(...)</td><td><p>Оно может и решает, но, как выясняется, стабильной стратегии на этом не построить. В моем случае для <code>googlevideo.com</code> на tcp 29 повторов nfqws + winws работало всего около трех дней. Так что ориентируемся на те пороги, которые вы считаете разумными.</p>
<p>Может быть вопрос был про рандомизацию кол-ва повторов в заданном диапазоне?</p></td><td>2024-11-05T16:54:17.803Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="2313" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Может быть вопрос был про рандомизацию кол-ва повторов в заданном диапазоне?</p>
</blockquote>
</aside>
<p>Только к хаосу приведет. То открывается, то нет.<br>
Вряд ли DPI будет считать количество фейков. Если бы он вообще распознавал фейки, он бы сразу их рубил вне зависимости от количества</p></td><td>2024-11-05T16:55:27.433Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Да, именно это и имел в виду.</p></td><td>2024-11-05T17:02:29.772Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>В официальной базе РКН ничего нет.</p></td><td>2024-11-05T19:11:39.590Z</td></tr><tr><td>rem</td><td><p>С недавних пор для поиска заблокированных ресурсов РКН стал требовать ввода полного пути. Иначе не выдаст ничего.<br>
Вот вам сам Яндекс сообщает, что отрабатывает запрос РКН:</p><aside class="onebox githubissue" data-onebox-src="https://github.com/bol-van/zapret/issues/708#issuecomment-2457784951">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/issues/708#issuecomment-2457784951" target="_blank" rel="noopener nofollow ugc">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/issues/708#issuecomment-2457784951" target="_blank" rel="noopener nofollow ugc">РКН внес в реестр zapret, хорошая работа!</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-11-05" data-time="13:40:55" data-timezone="UTC">01:40PM - 05 Nov 24 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/dttric" target="_blank" rel="noopener nofollow ugc">
          <img alt="dttric" src="zapret-обсуждение-726/9cf4a5efb98a33660fb266ceb2e599ad00a41688.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="C5D6E8">
          dttric
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">иронично что РКН запретил запрет XD
![image](https://github.com/user-attachment<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">s/assets/c73bd1d1-05fe-4c91-8bc6-20e46e5f0014)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-06T06:32:45.969Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="rem" data-post="2317" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/5fc32e/48.png" class="avatar"> rem:</div>
<blockquote>
<p>требовать ввода полного пути. Иначе не выдаст</p>
</blockquote>
</aside>
<p>Как не вводи, ничего и не выдаёт. Как бы так ввести, чтобы что-то выдал.<br>
Впрочем, все эти самоподстраховочки Яндекса не имееют принципиального значения, вектор же задан очень давно.</p></td><td>2024-11-06T06:52:32.480Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="rem" data-post="2317" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/5fc32e/48.png" class="avatar"> rem:</div>
<blockquote>
<p>РКН стал требовать ввода полного пути</p>
</blockquote>
</aside>
<p>Ну разумеется я верю <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"><br>
<img src="zapret-обсуждение-726/31d6f32ae25262631793bce363869f068cdee916.png" alt="image" data-base62-sha1="76TVhYvAOw289LC7EQzXFpMQWhg" width="666" height="246"></p>
<aside class="quote no-group" data-username="rem" data-post="2317" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/5fc32e/48.png" class="avatar"> rem:</div>
<blockquote>
<p>Вот вам сам Яндекс сообщает, что отрабатывает запрос РКН:</p>
</blockquote>
</aside>
<p>Это пост какого-то чела в гите запрета. Как бы я не искал, нифига не нашел. В базе ничего нет. А то, что где-то там алгоритмы не выдают искомое, то это объективно кривая работа яндекса.</p></td><td>2024-11-06T07:01:31.486Z</td></tr><tr><td>_rv</td><td><blockquote>
<p>Обходится путем добавления <a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a> в список</p>
</blockquote>
<p>Работает, спасибо.</p></td><td>2024-11-06T07:26:39.566Z</td></tr><tr><td>anon9001(anon)</td><td><blockquote>
<p>Если соединение проходит через фильтр, способный реконструировать TCP соединение, и который следует всем стандартам. Например, нас заворачивают на squid. Соединение идет через полноценный стек tcpip операционной системы, фрагментация отпадает сразу как средство обхода. Squid правильный, он все найдет как надо, обманывать его бесполезно. НО. Заворачивать на squid могут позволить себе лишь небольшие провайдеры, поскольку это очень ресурсоемко. Большие компании обычно используют DPI, который рассчитан на гораздо большую пропускную способность. Может применяться комбинированный подход, когда на DPI заворачивают только IP из “плохого” списка, и дальше уже DPI решает пропускать или нет. Так можно снизить нагрузку на DPI в десятки, если не сотни раз, а следовательно не покупать очень дорогие решения, обойдясь чем-то существенно более дешевым. Мелкие провайдеры могут покупать услугу фильтрации у вышестоящих, чтобы самим не морочиться, и они уже будут применять DPI.</p>
</blockquote>
<blockquote>
<p><strong><a href="https://github.com/bol-van" rel="noopener nofollow ugc">bol-van</a></strong> commented <a href="https://github.com/bol-van/zapret/issues/708#issuecomment-2458866328" rel="noopener nofollow ugc">Nov 6, 2024</a> •<br>
Они выделили 60 лярдов на развитие системы блокировок до 2030 года.<br>
Могут, но им придется нарастить вычислительные мощности значительно.<br>
И лучше сразу понять, что однажды это или совсем перестанет работать, или станет работать еле-еле.<br>
Заодно будут более продвинуто блокировать впн. Учитесь, пока есть возможность</p>
</blockquote>
<p>Я так понял они таки пошли Китайским путем и дурилкам таки все, конец?</p></td><td>2024-11-06T07:42:36.359Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="anon9001" data-post="2321" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> anon9001:</div>
<blockquote>
<p><strong><a href="https://github.com/bol-van" rel="noopener nofollow ugc">bol-van</a></strong> commented <a href="https://github.com/bol-van/zapret/issues/708#issuecomment-2458866328" rel="noopener nofollow ugc">Nov 6, 2024</a> •<br>
Они выделили 60 лярдов на развитие системы блокировок до 2030 года.<br>
Могут, но им придется нарастить вычислительные мощности значительно.<br>
И лучше сразу понять, что однажды это или совсем перестанет работать, или станет работать еле-еле.<br>
Заодно будут более продвинуто блокировать впн. Учитесь, пока есть возможность</p>
</blockquote>
</aside>
<p>Могут. Могут.<br>
Но такого точно не будет. По простым причинам. Сеть децентрализованная. Как бы не душили ресурсы, они продолжат работать, так как это весьма ощутимо ударит по экономике государства. Даже в Китае всё до сих пор открыто, даже с учетом тощего зарубежного трафика.<br>
Что до ВПН, то посмотрим историю “успешных” блокировок.<br>
Что-то точно будет, но 60 лярдов кардинально никак не повлияют. Нужно не масштабировать, а повышать качество. А без серьезных разработок, на которые нужно куда больше выделенных средств, ничего не получится.</p></td><td>2024-11-06T07:58:12.167Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><blockquote>
<p>Они выделили 60 лярдов на развитие системы блокировок до 2030 года.<br>
Могут, но им придется нарастить вычислительные мощности значительно.<br>
И лучше сразу понять, что однажды это или совсем перестанет работать, или станет работать еле-еле.<br>
Заодно будут более продвинуто блокировать впн. Учитесь, пока есть возможность</p>
</blockquote>
<p>Есть включить немного аналитики и футуризма, то, получается, что после падения Запрета больше не останется эффективных и - самое главное! - бесплатных методов дурения РКН/провайдеров?!<br>
Запрет - такой последний бастион?<br>
Если так, то это очень печально - значит, цензура и копирастия скоро в стране полностью победят. Хотя, этого следовало ожидать.<br>
Чиновникам нужен “учет и контроль”, а бизнесу извлекать прибыль из каждой страницы в интернете, блочить любые материалы, не купленные за деньги, и нашпиговать каждую страницу своей рекламой. Методы обхода одинаково мешают как правящему классу, так и крупному бизнесу. Поэтому РКН как цензурный комитет они будут напрягать и финансировать для полного контроля Рунета.</p></td><td>2024-11-06T09:28:39.846Z</td></tr><tr><td>abc555</td><td><p>Если вдруг забанят гитхаб и вам надо будет поставить запрет на роутер, то вам понадобится<br>
HFS ~ HTTP File Server это утилита мини сервак которая не требует установки, просто архив перетянул в окно и все дела, на вин 7 работает, не знаю как на чём то другом, не проверял.<br>
Это я так, на всякий случай, чтоб кипиша меньше было в случаи чего  )<br>
Когда то я использовал её в других целях, но вижу времена меняются и те темы про которые уже давно никто не помнит, становятся актуальными.</p></td><td>2024-11-06T11:48:16.718Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2323" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>бесплатных</p>
</blockquote>
</aside>
<p>Это не показатель. Скорее наоборот, почему-то именно платные впн услуги где казалось бы будет более устойчивый суппорт потому что клиент-контракт и все дела по профессиональному, но однако именно эта централизированая хрень первая пошла на бан, а проекты всяких васянов от коммьюнити с мостами под кроватями да меш п2п сетями работали на чистом энтузиазме и донатах. Вот тебе твои “платные” плюшки, им был пох. Никогда не забывай про норд внп и как он пофигительски отреагировал</p></td><td>2024-11-06T12:52:06.845Z</td></tr><tr><td>bolvan</td><td><p>Какой нафиг http сервер. Что за дилетантские рассуждения.<br>
Чтобы скопировать файл на openwrt, не нужен никакой http сервер.<br>
Файл можно по sftp перекинуть или даже с помощью nc (netcat)</p>
<p>nc -l -p 1111 &lt;zapret.tar.gz<br>
nc 192.168.1.2 1111 &gt;zapret.tar.gz</p>
<p>или даже так. сразу с распаковкой, чтобы не засорять tmp архивом</p>
<p>nc -l -p 1111 &lt;zapret.tar.gz<br>
nc 192.168.1.2 1111 | tar -zxvf -</p>
<p>а для удобства так</p>
<p>opkg install openssh-sftp-server</p></td><td>2024-11-06T13:03:00.168Z</td></tr><tr><td>bolvan</td><td><p>Централизованные решения не выживут. Их легко забанить.<br>
Ресурса скупать как дуров миллионы IP у них нет.<br>
Только васянские VPN и прокси с обфускацией. Или что-то совсем децентрализованное.</p></td><td>2024-11-06T13:11:01.602Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Автор старой “Компьютерры” Голубицкий уже много лет пишет, что единственный выход - это развитие децентрализованных сетей. Что думаете?</p></td><td>2024-11-06T13:31:31.499Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>единственный выход</p>
</blockquote>
</aside>
<p>Больше похоже на то, что нет уже никакого “единственного выхода”. Вопросы духовного плана, если так можно сказать, техническими средствами не решаются. В достаточно реальной на мой взгляд перспективе макрорегионального разделения будет разрушена связность. Внешнего трафика из “вражественных” регионов не будет. Возможно, дойдут до внедрения альтернативных протоколов L1-L2 уровня, чтобы воспользоваться имеющимися кабельными сетями когда-нибудь потом. Мы вполне успеем застать эти изменения. Однако, zapret вполне может пригодиться для обхода мягких форм регуляторики внутренней и между регионами, сохранившими достаточно приемлемые отношения.</p></td><td>2024-11-06T13:45:31.678Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="2329" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Больше похоже на то, что нет уже никакого “единственного выхода”. Вопросы духовного плана, если так можно сказать, техническими средствами не решаются.</p>
</blockquote>
</aside>
<p>Полностью согласен. Одним словом мир катится к чертям.<br>
Проект “человечество” не выдержал проверки на прочность.<br>
Потому мы наблюдаем сейчас распад. Ни zapret, ни VPN не смогут остановить эти процессы.<br>
Но они могут как-то помочь немного приспособиться к ситуации в частном порядке.<br>
И я считаю, что каждый человек, выбравший это и взявший на себя ответственность за свой выбор, имеет право так поступить.</p></td><td>2024-11-06T13:52:04.385Z</td></tr><tr><td>abc555</td><td><p>Я говорил про вин 7, каким интересно образом можно на ней ещё перекинуть файлы на роутер ? Расшаривать папки стандартной виндовсовской фигнёй ? У меня к примеру вообще удалена эта функция, я если и захочу открыть доступ к винде, то не смогу, так как вся эта херня у меня удалена.<br>
А тут по простому через сервер и не нужно ничего отрывать в винде, поэтому это не дилетантские рассуждения, а здравый смысл, не у всех же 11 винда как у вас и не у всех всё открыто и возможно открывать они ничего не хотят или не умеют. У меня лично нету никакого sftp сервера и нормальный я не находил, а устанавливать на роутер openssh-sftp-server, это ведь место должно быть которого нет</p></td><td>2024-11-06T14:12:54.101Z</td></tr><tr><td>i-no(...)</td><td><p>Там уже есть SSH и SCP. Из-под Windows вся файловая система роутера доступна, например, через WinSCP. Даже конфиги там править не-линуксойдам удобнее, чем в vi (и не придётся искать как из vi потом выйти).</p></td><td>2024-11-06T14:18:28.204Z</td></tr><tr><td>abc555</td><td><p>Та вы просто не поняли. Я написал что в случаи блокировки гитхаба установить запрет на роутер как ? Если домен будет заблокирован, вы не сможете установить, но вы сможете скачать архив с гитхаба через впн или не важно как и дальше вам нужно закинуть этот архив на роутер чтоб установить запрет и как вы это сделаете ? Вот я и написал что нужен сервер на компе, а дальше проще простого</p></td><td>2024-11-06T14:24:00.791Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Да, всё это похоже на неофеодализм со всеми вытекающими для простого люда…</p></td><td>2024-11-06T14:27:13.316Z</td></tr><tr><td>bolvan</td><td><p>openssh-sftp-server весит 70 кб. он вообще мало от чего зависит, ничего за собой не тянет.<br>
а netcat можно и для windows найти. тогда на рутер ничего не надо ставить</p></td><td>2024-11-06T14:28:23.936Z</td></tr><tr><td>abc555</td><td><p>про netcat я даже не слышал и там наверно надо много думать, учится пользоваться, с HFS даже думать не надо</p></td><td>2024-11-06T14:29:56.719Z</td></tr><tr><td>bolvan</td><td><p>Неткат - простейшая прога, открывающая соединение на указанный порт и качающая туда-сюда байтики через stdin/stdout. Средствами перенаправления ввода/вывода nc легко заставить выплюнуть в tcp или udp что угодно. Это куда проще, чем настраивать http сервер</p></td><td>2024-11-06T14:31:09.964Z</td></tr><tr><td>i-no(...)</td><td><p>Вообще, может захотеть депенденсей. Смотрю, на OpenWRT 21.02 – тянет еще<br>
libopenssl1.1 (986.8 KB)<br>
zlib (37.8 KB)</p></td><td>2024-11-06T14:32:37.686Z</td></tr><tr><td>bolvan</td><td><pre><code class="lang-auto">$ opkg depends openssh-sftp-server
openssh-sftp-server depends on:
        libc
$ cat /etc/os-release 
NAME="OpenWrt"
VERSION="22.03.0"
</code></pre>
<p>На 19 тоже самое. Он работает через SSH канал и криптой не занимается</p></td><td>2024-11-06T14:33:58.224Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Самое простое WINSCP и по SCP закинуть файлики в openwrt<br>
даже настраивать ничего не нужно и на роутер качать</p></td><td>2024-11-06T14:34:48.625Z</td></tr><tr><td>bolvan</td><td><p><a href="https://openwrt.org/docs/guide-user/services/nas/sftp.server" class="onebox" target="_blank" rel="noopener">https://openwrt.org/docs/guide-user/services/nas/sftp.server</a></p></td><td>2024-11-06T14:35:42.582Z</td></tr><tr><td>abc555</td><td><p>Название netcat сохраню себе на всякий случай, может пригодится когда нить, а HFS сервер настраивать не нужно, нажал оно октрылось, перетянул архив, пути указал в PuTTY не гитхаб а скопировал ссылку с HFS и все дела, вы наверно просто не видели что это за сервер такой, прикольный, поюзайте на досуге</p></td><td>2024-11-06T14:35:54.128Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>У меня вопрос (уже задавал, но ответа не было). Можно ли какой-то усилить эту стратегию, усилить пробивное действие или для datanoack не существует никакого усиления в Запрете?<br>
–dpi-desync=fake,split2 --dpi-desync-fooling=datanoack Есть ли смысл добавлять после datanoack ttl, autottl или --dpi-desync-split-pos=1???</p></td><td>2024-11-06T14:37:18.804Z</td></tr><tr><td>bolvan</td><td><p>datanoack - это не таран, а ограничитель, чтобы сервер не принял фейки<br>
он ничего не усиливает, но как ограничитель  - наиболее эффективен, если он работает и не режется где-то по пути</p></td><td>2024-11-06T14:38:15.751Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>То есть смысла нет добавлять после ttl, autottl или --dpi-desync-split-pos=1? Просто по Блокчеку у меня все эти значения одинаково хорошо дурят провайдера. Вот и спрашиваю, что лучше.</p></td><td>2024-11-06T14:39:44.899Z</td></tr><tr><td>abc555</td><td><p>Если у вас всё работает, зачем вам лишнее добавлять.<br>
Я у себя так, по параметру проверяю, лишние значения, тем более если ещё и не знаешь что это, для чего добавлять, потому что кто то где то на форуме выложил конфинг и вы его скопировали или через блок чек нашли, это просто примерные конфинги и не стоит их тупо копировать.<br>
Всё одинаковое как у всех долго не работает, поэтому нужно подобрать такую комбинацию, чтоб не было такой ни у кого и тогда вероятность что работать будет долго, высокая. Эти же лыганы блокировщики тоже читают и юзают форумы и отталкиваются от этого</p></td><td>2024-11-06T14:43:07.722Z</td></tr><tr><td>uwu(uwu)</td><td><p>хм, у меня на провайдере сайт openwrt заблочен, хотя его нет ни в одной выгрузке<br>
(даже в списке gdpi) но обходится легко<br>
ps блин нет, он просто медленно открывается</p></td><td>2024-11-06T14:43:37.467Z</td></tr><tr><td>i-no(...)</td><td><pre><code class="lang-auto">~# opkg depends -A openssh-sftp-server &amp;&amp; cat /etc/os-release
openssh-sftp-server depends on:
        libc
        libopenssl1.1
        zlib
NAME="OpenWrt"
VERSION="21.02.7"
</code></pre>
<p>Не в качестве спора. Наверняка, дефолтные образы имеют разное наполнение. У меня просто openssl не задействован, а там + 1 МБ. Специально образ не подбирал и image builder не использовал.</p></td><td>2024-11-06T14:45:01.157Z</td></tr><tr><td>bolvan</td><td><p>datanoack лучше всего. если работает - все остальное можно выкинуть</p></td><td>2024-11-06T14:45:17.809Z</td></tr><tr><td>bolvan</td><td><p>Это скорее всего ошибка мейнтейнеров<br>
Действительно, в 21 версии так для серверов openssh 8.x<br>
На 9.x уже нет</p>
<pre><code class="lang-auto">Package: openssh-sftp-server
Version: 8.4p1-4
Depends: libc, libopenssl1.1, zlib
</code></pre>
<pre><code class="lang-auto">
ldd /usr/lib/sftp-server 
        /lib/ld-musl-mips-sf.so.1 (0x77f56000)
        libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x77efe000)
        libc.so =&gt; /lib/ld-musl-mips-sf.so.1 (0x77f56000)
</code></pre></td><td>2024-11-06T14:48:18.801Z</td></tr><tr><td>KDS</td><td><p>Сплит-пос - усиление, остальное - ограничители.</p>
<p>Я иногда добавляю усилители, чтобы ничего не отвалилось, когда отвалится у других. Ничего противоестественного в этом не вижу. А DNA использовать не рискую, по причине явно прописанного в хелпе и блокчеке предупреждения.</p></td><td>2024-11-06T14:57:58.481Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Огласите весь список усилителей и ограничителе</p></td><td>2024-11-06T15:05:51.481Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="2352" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Сплит-пос - усиление, остальное - ограничители.</p>
</blockquote>
</aside>
<p>Откуда народ это все придумывает ?<br>
Ограничители все описаны в доке. Это TTL и fooling.<br>
Усилитель я вообще не знаю что такое. Есть способы воздействия на трафик. Они перечисляются в --dpi-desync. Остальные параметры уточняют характеристики воздействия</p></td><td>2024-11-06T15:09:40.228Z</td></tr><tr><td>girilid</td><td><p>Всех приветствую. Подскажите, пожалуйста, кто владеет информацией, пытаюсь настроить обход DPI на pfSense 2.7.2 при помощи dvtws от bol-van (спасибо Вам за инструментарий), но столкнулся с проблемой: при добавлении в скрипт запуска по инструкции на bsd-системы строки</p>
<blockquote>
<p>ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags syn,ack in not diverted recv “$NETIF”</p>
</blockquote>
<p>у меня напрочь падает загрузка всех интернет-страниц ($NETIF у меня pppoe0). Без этой строки обход DPI работает, но только через QUIC</p>
<p>Стратегию подсмотрел в пакете “zapret-discord-youtube-1.4.0”, а именно</p>
<blockquote>
<p>–filter-udp=443 --hostlist=“list-general.txt” --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=“%BIN%quic_initial_www_google_com.bin” --new ^<br>
–filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --dpi-desync-fake-quic=“%BIN%quic_initial_www_google_com.bin” --new ^<br>
–filter-tcp=80 --hostlist=“list-general.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^<br>
–filter-tcp=443 --hostlist=“list-general.txt” --dpi-desync=fake,split --dpi-desync-autottl=2 --dpi-desync-repeats=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=“%BIN%tls_clienthello_www_google_com.bin”</p>
</blockquote>
<p>На Win10 с ней Youtube работает идеально, и по TLS, и по QUIC, а при её адаптации под dvtws работает только через QUIC. По этому протоколу не все устройства в сети могут обращаться, затем и борюсь чтобы работало и по TLS.</p>
<blockquote>
<p>${SERVICE_CMD} <br>
–debug=1 <br>
–port=989 <br>
–filter-udp=443 --hostlist=“$YOUTUBE_LIST” --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=“$QUIC_BIN” --new <br>
–filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --dpi-desync-fake-quic=“$QUIC_BIN” --new <br>
–filter-tcp=80 --hostlist=“$YOUTUBE_LIST” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new <br>
–filter-tcp=443 --hostlist=“$YOUTUBE_LIST” --dpi-desync=fake,split --dpi-desync-autottl=2 --dpi-desync-repeats=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=“$TLS_BIN” <br>
| logger -t “${SERVICE_NAME}” &gt;/dev/null 2&gt;&amp;1 &amp;</p>
</blockquote>
<p>Наведите, пожалуйста, на мысль, куда посмотреть…</p></td><td>2024-11-06T15:10:02.552Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Может DNAT?</p>
<p>Я тоже подумал, читая документацию Запрета, что сплит-пос лишним не будет. Значение, которое указывается после знака равенства (от 1 до 1500), определяет позицию (смещение в байтах) внутри пакета TCP, где произойдет разделение.</p></td><td>2024-11-06T15:11:13.744Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Либо ты не туда смотрел<br>
Либо не тот рид читал</p>
<details>
<summary>
Спойлер</summary>
<p>Выдержка из /dosc/bsd  пункт pfSense</p>
<p>ipfw delete 100<br>
ipfw add 100 divert 989 tcp from any to any 80,443 out not diverted xmit em0<br>
pkill ^dvtws$<br>
dvtws --daemon --port 989 --dpi-desync=split2</p>
</details>
<p>Для bsd систем там отдельный рид и в нем есть отдельный пункт для pf</p></td><td>2024-11-06T15:20:55.805Z</td></tr><tr><td>bolvan</td><td><p>На pfsense может быть конфликт 2 фаерволов - pf и ipfw.<br>
Можно запустить dvtws с --debug и посмотреть приходят ли на него входящие пакеты.<br>
У меня не особо много опыта с pfsense, но из постов я видел много дичи вплоть до перевертыша src/dst адресов<br>
Если не получится завести входящие, можно от них отказаться, но придется тогда и отказаться от autottl и autohostlist</p></td><td>2024-11-06T15:21:52.302Z</td></tr><tr><td>girilid</td><td><p>Это видел, спасибо. Но смотрел скорее в файле bsdfw.txt, им и руководствовался</p>
<details>
<summary>
Спойлер</summary>
<p>ipfw delete 100<br>
ipfw add 100 divert 989 tcp from any to any 80,443 out not diverted xmit em0<br>
; required for autottl mode<br>
ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags syn,ack in not diverted recv em0<br>
; udp<br>
ipfw add 100 divert 989 udp from any to any 443 out not diverted xmit em0</p>
</details></td><td>2024-11-06T15:27:48.681Z</td></tr><tr><td>girilid</td><td><p>Вот кусок лога без строки</p>
<blockquote>
<p>ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags syn,ack in not diverted recv “$NETIF”</p>
</blockquote>
<p>Я не особо шарю в компьютерных сетях, поэтому обратился за помощью, если не сложно, посмотрите, пожалуйста</p>
<details>
<summary>
Спойлер</summary>
<p>packet: id=3034 len=375<br>
IP4: 192.168.1.192 =&gt; 173.194.187.8 proto=tcp ttl=127 sport=58700 dport=443 flags=AP seq=1452415997 ack_seq=2081504192<br>
TCP: 2F 3F 00 1D 00 20 CA D3 91 E2 45 BA AD 79 EF 3D E5 AE 32 91 25 D5 D0 78 08 25 43 84 5E 5A C3 41 … : /?.. …E…y.=…2.%…x.%C.^Z.A …<br>
using cached desync profile 0<br>
reassemble : feeding data payload size=335. now we have 1743/1743<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 1452414589-1452416331<br>
DELAY desync until reasm is complete (<span class="hashtag-raw">#2</span>)<br>
REPLAYING delayed packet <span class="hashtag-raw">#1</span> offset 0<br>
REPLAY IP4: 192.168.1.192 =&gt; 173.194.187.8 proto=tcp ttl=127 sport=58700 dport=443 flags=A seq=1452414589 ack_seq=2081504192<br>
TCP: 16 03 01 06 CA 01 00 06 C6 03 03 8A 74 DE 31 11 2F 07 E5 BA 24 3A B7 42 0F 2A 9F 51 0E 1A DC 42 … : …t.1./…$:.B.*.Q…B …<br>
using cached desync profile 0<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://rr3---sn-4g5e6ns6.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-4g5e6ns6.googlevideo.com</a><br>
discovered l7 protocol<br>
discovered hostname<br>
desync profile search for tcp target=173.194.187.8:443 l7proto=tls hostname=‘<a href="http://rr3---sn-4g5e6ns6.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-4g5e6ns6.googlevideo.com</a>’</p>
<ul>
<li>hostlist check for profile 4<br>
Checking include hostlist<br>
Hostlist check for <a href="http://rr3---sn-4g5e6ns6.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-4g5e6ns6.googlevideo.com</a> : negative<br>
Hostlist check for <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> : positive<br>
desync profile 4 matches<br>
desync profile changed by revealed l7 protocol or hostname !<br>
dpi desync src=192.168.1.192:58700 dst=173.194.187.8:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 87 01 00 02 83 03 03 5F 15 63 CB 06 EA 1C DD 40 76 F5 8C 44 50 6E 01 F3 A3 83 AC C2 … : …_.c…<span class="mention">@v</span>…DPn… …<br>
sending fake(1) 1st tcp segment 0-1 len=2 : 00 00 : …<br>
sending 1st tcp segment 0-1 len=2 seqovl=0 : 16 03 : …<br>
sending fake(2) 1st tcp segment 0-1 len=2 : 00 00 : …<br>
sending 2nd tcp segment 2-1407 len=1406 : 01 06 CA 01 00 06 C6 03 03 8A 74 DE 31 11 2F 07 E5 BA 24 3A B7 42 0F 2A 9F 51 0E 1A DC 42 E7 98 … : …t.1./…$:.B.<em>.Q…B… …<br>
DROPPING delayed packet <span class="hashtag-raw">#1</span><br>
REPLAYING delayed packet <span class="hashtag-raw">#2</span> offset 1408<br>
REPLAY IP4: 192.168.1.192 =&gt; 173.194.187.8 proto=tcp ttl=127 sport=58700 dport=443 flags=AP seq=1452415997 ack_seq=2081504192<br>
TCP: 2F 3F 00 1D 00 20 CA D3 91 E2 45 BA AD 79 EF 3D E5 AE 32 91 25 D5 D0 78 08 25 43 84 5E 5A C3 41 … : /?.. …E…y.=…2.%…x.%C.^Z.A …<br>
using cached desync profile 4<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://rr3---sn-4g5e6ns6.googlevideo.com" rel="noopener nofollow ugc">rr3---sn-4g5e6ns6.googlevideo.com</a><br>
dpi desync src=192.168.1.192:58700 dst=173.194.187.8:443<br>
split pos 2 is outside of this packet 1408-1743<br>
SENDING delayed packet <span class="hashtag-raw">#2</span> unmodified<br>
reassemble session finished<br>
packet: id=3034 drop<br>
packet: id=3035 len=1448<br>
IP4: 192.168.1.192 =&gt; 173.194.187.8 proto=tcp ttl=127 sport=58700 dport=443 flags=AP seq=1452414924 ack_seq=2081504192<br>
TCP: BA BB EE 05 C6 F2 55 7B FC 7A 0B 1D 6C 18 70 FC 6A F0 0A B3 D6 6C 89 BC 20 84 93 88 76 AB C3 C4 … : …U{.z…l.p.j…l… …v… …<br>
using cached desync profile 4<br>
not applying tampering to unknown protocol<br>
packet: id=3035 reinject unmodified<br>
packet: id=3036 len=1448<br>
IP4: 192.168.1.192 =&gt; 173.194.187.8 proto=tcp ttl=127 sport=58700 dport=443 flags=A seq=1452414589 ack_seq=2081504192<br>
TCP: 16 03 01 06 CA 01 00 06 C6 03 03 8A 74 DE 31 11 2F 07 E5 BA 24 3A B7 42 0F 2A 9F 51 0E 1A DC 42 … : …t.1./…$:.B.</em>.Q…B …<br>
using cached desync profile 4<br>
packet contains partial TLS ClientHello<br>
not applying tampering to TLS ClientHello without hostname in the SNI<br>
packet: id=3036 reinject unmodified</li>
</ul>
</details>
<p>С стратегиями выше при обращении через TLS видео не грузятся совсем, сами страницы ютуба, комментарии и тд грузятся.<br>
При модификации стратегии tcp=443 методом перебора и из результатов blockcheck - в основном также не работает, иногда грузится секунд 20 и потом начинает показывать видео. При использовании пакета  “zapret-discord-youtube-1.4.0” на Win10 всё грузится сразу, из-за этого не могу понять причину где я косячу. Есть предположение, что там в правила используется конструкция</p>
<blockquote>
<p>inbound and tcp and (tcp.Ack and tcp.Syn or tcp.Rst or tcp.Fin)…</p>
</blockquote>
<p>Она, как мне показалось, похожа на tcpflags syn,ack, но я никак не смог её адаптировать.<br>
Пробовал</p>
<blockquote>
<p>ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags syn,ack in not diverted recv “$NETIF”<br>
ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags rst in not diverted recv “$NETIF”<br>
ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags fin in not diverted recv “$NETIF”</p>
</blockquote>
<p>но не взлетело, все сайты перестают открываться</p></td><td>2024-11-06T15:41:36.669Z</td></tr><tr><td>bolvan</td><td><p>Этот лог выкушен из середины. Непонятно приходят ли входящие</p>
<pre><code class="lang-auto">ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags rst in not diverted recv “$NETIF”
ipfw add 100 divert 989 tcp from any 80,443 to any tcpflags fin in not diverted recv “$NETIF”
</code></pre>
<p>Это может понадобиться только для autohostlist. Но даже при таком варианте не будут срабатывать реакции на http redirect 302/307. На BSD нет способа их выцепить, не перенаправляя все входящие</p></td><td>2024-11-06T15:43:36.907Z</td></tr><tr><td>girilid</td><td><p>Спасибо за пояснения. Там лог приличный по размерам, взял сколько смог из консоли, под спойлер не смог разместить, приложил файлом</p></td><td>2024-11-06T15:50:29.007Z</td></tr><tr><td>bolvan</td><td><p>Входящие не приходят. Это конфликт фаеров.<br>
Может и есть какой-то способ починить, но мне неизвестен он.<br>
Можно спросить на гихабе в дискуссиях про pfsense. Может там подскажут.<br>
А сейчас проще всего отказаться от autottl, autohostlist и входящих.<br>
Использовать только pf тоже не получается из-за так и не пофиксенной проблемы в BSD</p></td><td>2024-11-06T15:56:31.641Z</td></tr><tr><td>girilid</td><td><p>Понятно… Спасибо, что уделили мне время</p></td><td>2024-11-06T15:57:33.848Z</td></tr><tr><td>girilid</td><td><p>А не подскажете, в opnSense те же грабли будут? В документации есть описание про OpenBSD, но можно ли пытаться применить описанные методы к opnSense?</p></td><td>2024-11-06T16:55:17.864Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="abc555" data-post="2334" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>вам нужно закинуть этот архив на роутер чтоб установить запрет и как вы это сделаете ?</p>
</blockquote>
</aside>
<p>Если имеется доступ к роутеру по ssh, то для доступа к файловой системе достаточно любого клиента с поддержкой SCP. Какой-нибудь тотал коммандер/фар менеджер или что там еще в ходу у виндузятников с этим легко справится.</p></td><td>2024-11-06T17:35:48.941Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>тотал коммандер/фар менеджер</p>
</blockquote>
</aside>
<p>Во! Да, оказывается, что даже для Far Manager есть плагин на основе WinSCP, это, конечно, весьма удобно. Так или иначе, виндузятникам придется скачать какой-то инструмент. По простоте всё выше перечисленное на мой взгляд одинаково.</p></td><td>2024-11-06T17:58:28.145Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="girilid" data-post="2365" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/5f9b8f/48.png" class="avatar"> girilid:</div>
<blockquote>
<p>А не подскажете, в opnSense те же грабли будут? В документации есть описание про OpenBSD, но можно ли пытаться применить описанные методы к opnSense?</p>
</blockquote>
</aside>
<p>Open в приставке к  sense означает лишь открытую версию чего-то, напоминающего pfsense.<br>
Точно не скажу.<br>
Но оба основаны на FreeBSD и к OpenBSD не относятся<br>
Грабли будут те же самые, потому что имеют отношение к FreeBSD</p></td><td>2024-11-06T18:14:37.734Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="2367" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Так или иначе, виндузятникам придется скачать какой-то инструмент.</p>
</blockquote>
</aside>
<p>В Win10+ в достаточно новых билдах из коробки идет openssh, который включает в себя scp и sftp</p></td><td>2024-11-06T18:15:51.178Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2345" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>datanoack - это не таран, а ограничитель, чтобы сервер не принял фейки<br>
он ничего не усиливает, но как ограничитель - наиболее эффективен, если он работает и не режется где-то по пути</p>
</blockquote>
</aside>
<p>кстати именно datanoack в любом виде (в виде добавки к любой стратегии ) напрочь ломает <a href="http://mail.yahoo.com" rel="noopener nofollow ugc">mail.yahoo.com</a><br>
как долазит туда мистика…  или и “должен” долазить как допустим md5sig ? но лишь тупой яху реагирует на сей признак…<br>
pingploteer считает что на 10м хопе он когда как просто <a href="http://yahoo.com" rel="noopener nofollow ugc">yahoo.com</a> на 20м<br>
а в зависимости от стратегии blockcheck предлагает ttl от 7 до 11 - т.е. уже не вариант</p>
<p>и в целом не понимаю как работает связка ttl и  dpi-desync-fooling<br>
в том смысле что дальше N хопа не полезит и dpi-desync-fooling (имхо)<br>
но почему с ttl=8 + --dpi-desync-fooling открывает кабинет прова который на 7м хопе<br>
а допустим ttl=7+ --dpi-desync-fooling уже не отрывает<br>
равно как и ttl=8 без --dpi-desync-fooling тоже (но тут то ещё понятно)<br>
<strong>НО</strong> ttl=11 + dpi-desync-fooling уже не открывает половину инета - сайты начиная 10го хопа зачастую. а как же тогда кабинет прова открывает? при  ttl=8 + dpi-desync-fooling??? кабинет на 7м</p></td><td>2024-11-06T18:21:26.697Z</td></tr><tr><td>girilid</td><td><p>Понял, благодарю за ответ</p></td><td>2024-11-06T18:40:46.018Z</td></tr><tr><td>KDS</td><td><p>Оттуда же, откуда zapret 1.4 и 1.5.1 видимо ))</p>
<aside class="quote no-group" data-username="Zanoni" data-post="2356" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Может DNAT?</p>
</blockquote>
</aside>
<p>Data No ACK</p></td><td>2024-11-06T18:42:12.781Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Потому что нужно заводить множественные стратегии со списками.<br>
Как смотрю у провайдера скорее всего несколько “ограничичтелей”</p>
<p>ТТЛ - срок жизник пакета дурение. Если его мало, то не долетает и мы упираемся в ограничение провайдера, но если много - сайт отлетает. Для таких сайтов нужно блокчек гонять и вносить их в разные стратегии дурения</p>
<p>PS datanoack - по идее пакеты со снятым флагом , который должен влетать в “ограничение” и сниматься, но может быть такое, что он влетает и вылетает <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"> до сайта.</p></td><td>2024-11-06T18:47:40.328Z</td></tr><tr><td>fresa</td><td><p>я не особо читал ваши сообщения, но у меня pf  и opnsense и оба работают с правилом<br>
ipfw add 100 divert 989 tcp from any to any 443 out not diverted xmit pppoe0<br>
автолисты, ттл и прочее тоже работает. в инструкции написано что выборка флагов идёт вместе с ипсет таблицей, у вас нет таблицы, мб в этом и проблема, гоните весь трафик 443 через dvtws, ничего в нем не сломается</p></td><td>2024-11-06T18:59:18.074Z</td></tr><tr><td>Shie_Zjon(12345 one two three four five )</td><td><p>у меня все работает через preset_russia Быстрый Старт, но, не могу понять, как сделать автоматический запуск.<br>
<em>поменять содержимое переменной WINWS1 на свою стратегию</em> - не понимаю что менять и где</p></td><td>2024-11-06T19:04:27.681Z</td></tr><tr><td>fresa</td><td><p>не, опнсенс это форк, он базируется на то ли ядре, то ли кодовой базе пфа, но под капотом много что переделано, имхо</p></td><td>2024-11-06T19:07:34.626Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Через блокнот отредактировать файлик и внести правки стратегии для своей сети.<br>
Далее запускаем бантик службы от админа и радуемся</p></td><td>2024-11-06T19:08:02.321Z</td></tr><tr><td>girilid</td><td><p>Здравствуйте, да, я в качестве эксперимента попробовал сделать</p>
<blockquote>
<p>ipfw add 100 divert 989 tcp from any to any 80,443 out not diverted xmit “$NETIF”<br>
ipfw add 100 divert 989 udp from any to any 443 out not diverted xmit “$NETIF”</p>
</blockquote>
<p>без анализа флагов пакетов, и отказаться от файла --hostlist=“$YOUTUBE_LIST” на правиле --filter-tcp=443,<br>
и всё попёрло без проблем</p>
<p>Но единственное - я опасаюсь, что это излишнее палево, гонять всё, что идёт по порту 443 через dvtws</p></td><td>2024-11-06T19:09:34.073Z</td></tr><tr><td>fresa</td><td><p>вроде для этого и существуют листы, чего там нет, то пропускается напрямую</p></td><td>2024-11-06T19:10:45.177Z</td></tr><tr><td>Shie_Zjon(12345 one two three four five )</td><td><p>то есть, все, что было в preset_russia скопировать типо того<br>
set WINWS1=–wf-tcp=80,443 --wf-udp=443,50000-50099 ^<br>
–filter-tcp=80 --dpi-desync=fake,split2 --d…</p></td><td>2024-11-06T19:12:19.301Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>–wf-tcp - сообщаем драйверу какие порты нам нужны для работы<br>
–filter-tcp - сообщаем запрету, что слушать и где мудрить.</p>
<p>порты перечисленные в –wf-tcp должны совпадать с перечисленными портами в –filter-tcp</p>
<p>После фильтра - идут листы и стратегии для обмана провайдера</p></td><td>2024-11-06T19:17:47.770Z</td></tr><tr><td>girilid</td><td><p>Да, но с моим списком работает криво, а без списка работает как из пушки. Список взят уже не помню где, пробовал разные списки (меня пока интересует именно ютуб)<br>
<a class="attachment" href="zapret-обсуждение-726/eaHUfcYBSFZHDx2lzFiQcxRPzGf.txt">russia-youtube.txt</a> (460 байтов)</p></td><td>2024-11-06T19:17:53.369Z</td></tr><tr><td>KAcidi(K Acidi)</td><td><p>При использовании Zapret для Ютуба видео подвисает примерно через 30 минут просмотра и требуется обновление страницы. Но иногда даже она не помогает. Как-то можно починить?<br>
Использую готовые батники от Flowseal<br>
<a class="attachment" href="zapret-обсуждение-726/itaNZOJ9DLnHfuSVRXMp09b6RR5.bat">general (ALT2).bat</a> (817 байтов)</p></td><td>2024-11-06T19:30:49.144Z</td></tr><tr><td>fresa</td><td><p>что значит криво? без списка все работает, а с ним нет? или как?</p></td><td>2024-11-06T19:33:22.019Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Люби Флоса…</p>
<p>Возможно стратегия устарела</p></td><td>2024-11-06T19:34:34.657Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><pre><code class="lang-auto">--filter-udp=443 --hostlist="list-general.txt" --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic="%BIN%quic_initial_www_google_com.bin" --new ^
--filter-udp=50000-50100 --ipset="ipset-discord.txt" --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new ^
--filter-tcp=80 --hostlist="list-general.txt" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="list-general.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern="%BIN%tls_clienthello_www_google_com.bin"
</code></pre>
<p>По мне он намудрил. Не использовать готовые батники и сборки. Делать свою, подбирая стратегии.</p></td><td>2024-11-06T19:35:21.426Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Он не намудрил<br>
Он просто собирает информацию и делает батник под тот или иной провайдер<br>
А потом сюрприз - не работает. Но все идут сюда или на оф гит запрета и ноют</p>
<p>Самостоятельно никто не хочет крутить там и вычислять - дай дай дай</p></td><td>2024-11-06T19:38:01.341Z</td></tr><tr><td>Shie_Zjon(12345 one two three four five )</td><td><p>так и не смог сделать автозапуск.<br>
зато запрет с этим стандартным preset_russia работает лучше, чем gdbdpi<br>
придется пока вручную запускать</p></td><td>2024-11-06T19:38:55.314Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Запрет гибче в данном плане гуда.<br>
Но из-за того что там всего много - глаза и руки бояться</p></td><td>2024-11-06T19:39:41.312Z</td></tr><tr><td>KDS</td><td><p>Потому что он не знает, как надо гуглвидео тестировать. У него еще недавно были звездочки в блэклистах, чего вы от человека хотите? И, видимо, не знает, что блокировки для гуглвидео отличаются от всех других и пытается все в одну кучу свалить.</p></td><td>2024-11-06T19:42:12.906Z</td></tr><tr><td>KAcidi(K Acidi)</td><td><p>Понял, попробую потыкать и сделать что-то сам.</p></td><td>2024-11-06T19:42:45.013Z</td></tr><tr><td>girilid</td><td><p>Так точно. На pfsense с dvtws без списка - видео на ютубе открываются почти сразу, а со списком - от 20 сек до “не работают совсем”.</p>
<p>По TLS, не QUIC</p></td><td>2024-11-06T19:43:52.660Z</td></tr><tr><td>fresa</td><td><p>ну покажите скрипт dvtws своего, ну как запускаете</p></td><td>2024-11-06T19:46:39.803Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>У меня тоже применяются звездочки, которые как оказались не воспринимаются</p>
<p>Подходил к ситуации - чем больше звезд , тем ярче небо <img src="https://ntc.party/images/emoji/twitter/rofl.png?v=12" title=":rofl:" class="emoji" alt=":rofl:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T19:47:05.392Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Hentay" data-post="2394" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>тем ярче небо</p>
</blockquote>
</aside>
<p>Тем больше звезд на гитхабе <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"><br>
Это репитс 10 почти всепробивающая стратегия, репитс 8 (или сколько у него там?) вообще таковой не является, судя по тестам.</p></td><td>2024-11-06T19:52:06.943Z</td></tr><tr><td>girilid</td><td><p>Вот мой скрипт<br>
<a class="attachment" href="zapret-обсуждение-726/t0td5QZMC0nA7Uls4WRURTMf4De.sh">dvtws.sh</a> (2,0 КБ)</p>
<p>претерпел некоторые изменения в ходе советов здесь. Сейчас это моя рабочая версия для TLS</p>
<p>Если добавить в --filter-tcp=443 условие --hostlist=“$YOUTUBE_LIST”, то видео или грузятся долго или вообще не грузятся</p></td><td>2024-11-06T19:52:53.093Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну репиты зависят от провайдера</p>
<p>У меня по сути только в дисе и то там стандратно…</p>
<aside class="quote no-group" data-username="girilid" data-post="2396" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/5f9b8f/48.png" class="avatar"> girilid:</div>
<blockquote>
<p>Если добавить в --filter-tcp=443 условие --hostlist=“$YOUTUBE_LIST”, то видео или грузятся долго или вообще не грузятся</p>
</blockquote>
</aside>
<p>Тригер Лист Условие<br>
В таком порядке лист может не встать.<br>
А так-же зависит от модфильтра в конфиге запрета</p></td><td>2024-11-06T19:53:37.872Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Hentay" data-post="2397" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Ну репиты зависят от провайдера</p>
</blockquote>
</aside>
<p>А, мне в Быстро надо было сделать 9 батников с репитами от 2 до 10 и пусть каждый подберет себе нужный? Блин, такую идею упустил <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T19:57:27.866Z</td></tr><tr><td>girilid</td><td><p>Я может выразился не по терминологии. Если я вместо</p>
<blockquote>
<p>–filter-tcp=443 --dpi-desync=split2 --dpi-desync-split-seqovl=49 --dpi-desync-split-pos=50 --wssize 1:6</p>
</blockquote>
<p>напишу</p>
<blockquote>
<p>–filter-tcp=443 --hostlist=“$YOUTUBE_LIST” --dpi-desync=split2 --dpi-desync-split-seqovl=49 --dpi-desync-split-pos=50 --wssize 1:6</p>
</blockquote>
<p>то работа видео на ютубе сильно ухудшается.</p>
<p>Толи лыжи не едут, толь я не понимаю специфику</p></td><td>2024-11-06T19:58:40.194Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Посмотрел …<br>
Дискорд - стандартный конфиг с 6 репитами, но там конбайтс на 3 пакете<br>
HTTPS с двумя</p>
<p>Впрочем всегда можно вернуться и реализовать идею</p></td><td>2024-11-06T19:59:14.571Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>–wssize 1:6<br>
Вот это может вставать поперёк всем. Замедляет соединение. Стоит искать стратегию без данного профиля</p>
<p>Теперь остался модфильтр глянуть из конфига запрета</p></td><td>2024-11-06T20:00:41.126Z</td></tr><tr><td>girilid</td><td><p>Спасибо за замечание. Мне это предложил blockcheck, я и попробовал применить. Буду смотреть в указанном направлении</p></td><td>2024-11-06T20:03:17.841Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Hentay" data-post="2400" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>но там конбайтс на 3 пакете</p>
</blockquote>
</aside>
<p>На 3-м пакете <strong>с данными</strong>. На кой черт дурить так много пакетов с данными, видимо только автору известно. Видимо, про запас )</p></td><td>2024-11-06T20:03:58.209Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну просто репиты эти очень хорошо роняют свитчи <img src="https://ntc.party/images/emoji/twitter/relieved.png?v=12" title=":relieved:" class="emoji" alt=":relieved:" loading="lazy" width="20" height="20"> у провайдеров<br>
Если не перекрутишь - все ок и все работает, главное обойти ограничения</p></td><td>2024-11-06T20:04:51.423Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну у меня тоже блокчек много что предложил хорошего.<br>
Пришлось раскидывать все чудо по портам…</p>
<p>Потом правда уже 3й раз подкручиваю ибо провайдер нас любят</p></td><td>2024-11-06T20:06:43.095Z</td></tr><tr><td>fresa</td><td><p>Господи, такая красота, куда я со своей помощью лезу. по Ютубу, я б пролистал логи dvtws  и лог загрузки страницы с видео, чтобы понять в чем проблема</p></td><td>2024-11-06T20:18:21.992Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="fresa" data-post="2374" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/fresa/48/11770_2.png" class="avatar"> fresa:</div>
<blockquote>
<p>ipfw add 100 divert 989 tcp from any to any 443 out not diverted xmit pppoe0<br>
автолисты, ттл и прочее тоже работает. в инструкции написано что выборка флагов идёт вместе с ипсет таблицей, у вас нет таблицы, мб в этом и проблема, гоните весь трафик 443 через dvtws, ничего в нем не сломается</p>
</blockquote>
</aside>
<p>Автолист имеет 3 триггера срабатывания. При отсутствии входящего трафика остается только 1 - ретрансмиссии. Если заблокированные запросы на провайдере виснут, то это сработает и без входящего, а если RST/redirect, то нет.<br>
Про ipset совсем не понял. Причем тут флаги</p></td><td>2024-11-06T20:25:56.933Z</td></tr><tr><td>girilid</td><td><p>Я понимаю, что профессионалам наверняка смешно <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p>Но я, как человек не вовлечённый в сетевые тёмные материи пошёл, как мне кажется, самым логичным путём с точки зрения обывателя:</p>
<p>взял рабочий в моих условиях пакет “zapret-discord-youtube-1.4.0” (причём самая свежая версия 1.5.2 у меня не работает) и просто попытался воспроизвести аналог на pfSense из информации “по сусекам”</p>
<p>Не судите строго, я только учусь <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T20:26:08.042Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>На разных операционных системах, разных условиях сети и провайдерских играх конфиг мог уже не один раз умереть</p></td><td>2024-11-06T20:30:07.764Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2370" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>кстати именно datanoack в любом виде (в виде добавки к любой стратегии ) напрочь ломает <a href="http://mail.yahoo.com">mail.yahoo.com </a><br>
как долазит туда мистика… или и “должен” долазить как допустим md5sig ? но лишь тупой яху реагирует на сей признак…</p>
</blockquote>
</aside>
<p>Он должен долазить. Все, кроме ttl, долазит, но отрыгивается серваком.<br>
Но бывает, что некоторые не отрыгивают. Клаудфлар берет badsum. yahoo берет datanoack<br>
Можно сделать fooling=datanoack,md5sig. Что-то одно наверняка сработает.</p>
<aside class="quote no-group" data-username="Quqas" data-post="2370" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>и в целом не понимаю как работает связка ttl и dpi-desync-fooling<br>
в том смысле что дальше N хопа не полезит и dpi-desync-fooling (имхо)<br>
но почему с ttl=8 + --dpi-desync-fooling открывает кабинет прова который на 7м хопе<br>
а допустим ttl=7+ --dpi-desync-fooling уже не отрывает<br>
равно как и ttl=8 без --dpi-desync-fooling тоже (но тут то ещё понятно)<br>
<strong>НО</strong> ttl=11 + dpi-desync-fooling уже не открывает половину инета - сайты начиная 10го хопа зачастую. а как же тогда кабинет прова открывает? при ttl=8 + dpi-desync-fooling??? кабинет на 7м</p>
</blockquote>
</aside>
<p>Связка просто работает. В фейки ставится указанный TTL и добавляется указанный фулинг.<br>
Фулинг разный бывает. Если badsum, его может что-то не пропускать, и реально работает только TTL</p></td><td>2024-11-06T20:30:57.706Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2404" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Ну просто репиты эти очень хорошо роняют свитчи <img src="https://ntc.party/images/emoji/twitter/relieved.png?v=12" title=":relieved:" class="emoji" alt=":relieved:" loading="lazy" width="20" height="20"> у провайдеров<br>
Если не перекрутишь - все ок и все работает, главное обойти ограничения</p>
</blockquote>
</aside>
<p>Кто эту фигню сморозил. Свитч - L2, им вообще плевать что передавать. Они даже про IP адреса не знают. Если они не какие-то управляемые с функцией распознавания вышестоящих протоколов. Но выше L4 они точно достать не могут. Тогда это уже не свитч, а DPI<br>
Даже если вы сделаете трэш флуд, то это ничуть не тяжелее, чем выгрузка торентов</p></td><td>2024-11-06T20:33:05.766Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Спасибо</p></td><td>2024-11-06T20:34:47.087Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="2403" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>На 3-м пакете <strong>с данными</strong>. На кой черт дурить так много пакетов с данными, видимо только автору известно. Видимо, про запас )</p>
</blockquote>
</aside>
<p>Кто-то в дискуссиях сообщил, что с cutoff=n2 не работает</p></td><td>2024-11-06T20:36:19.341Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2397" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Тригер Лист Условие<br>
В таком порядке лист может не встать.<br>
А так-же зависит от модфильтра в конфиге запрета</p>
</blockquote>
</aside>
<p>Ему пофиг в каком порядке. Внутри одного профиля может быть любой порядок параметров, относящихся к этому профилю. На результат никак не влияет</p></td><td>2024-11-06T20:37:21.858Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Подскажите как перекинуть эту вышенаписанную стратегию на openwrt, вроде написал и ничего не работает:</p>
<details>
<summary>
Summary</summary>
<p>NFQWS_OPT="<br>
–filter-tcp=80 --dpi-desync=disorder2 --new<br>
–filter-udp=50000-50100 --ipset=“/opt/zapret/ipset/ipset-discord.txt” --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new<br>
–filter-tcp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --dpi-desync=syndata,split2<br>
–filter-udp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic=“/opt/zapret/files/fake/quic_initial_www_google_com.bin” --new<br>
"</p>
</details>
<p>Где ошибка?</p></td><td>2024-11-06T21:46:07.249Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="2413" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>что с cutoff=n2 не работает</p>
</blockquote>
</aside>
<p>n3 для дискорда = d3? Если нет, то в чем смысл?</p>
<p><a class="mention" href="/u/keksimus">@Keksimus</a> А зачем синдате спплит2? И что это за огрызок вообще, почему --new в конце нет, если это отдельная стратегия?</p></td><td>2024-11-06T21:46:29.933Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="KDS" data-post="2416" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p><a class="mention" href="/u/keksimus">@Keksimus</a> А зачем синдате спплит2?</p>
</blockquote>
</aside>
<p>Не могу знать <img src="https://ntc.party/images/emoji/twitter/see_no_evil.png?v=12" title=":see_no_evil:" class="emoji" alt=":see_no_evil:" loading="lazy" width="20" height="20">, но <a href="https://github.com/Flowseal/zapret-discord-youtube" rel="noopener nofollow ugc">та</a> известная сборка неплохо работает, хотел закинуть эти стратегии себе на роутер.</p></td><td>2024-11-06T21:50:29.246Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>последнее --new убрать<br>
Модфильтр в конфиге запрета скорее выставлен - хостлист?</p></td><td>2024-11-06T21:51:05.052Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>автохостлист</p></td><td>2024-11-06T21:51:27.640Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>1 - тогда не хватка некоторых переменных в конце стратегии<br>
2 - Так-же потерено в конце некоторых строк --new (аналог tcp=80)</p>
<p>По сути нет листов, работаем без листов</p></td><td>2024-11-06T21:52:50.085Z</td></tr><tr><td>KDS</td><td><p>Скорее всего парсинг батников сломался. Я там нигде вообще не нашел синдату со сплитом.</p>
<p>Нашел просто синдату, непонятно (мне) зачем там вообще нужную. Гадить фейками на каждый SYN пакет на tcp 443?</p>
<pre><code class="lang-auto">NFQWS_OPT="--filter-tcp=80 --dpi-desync=disorder2 --new --filter-udp=50000-50100 --ipset="/opt/zapret/ipset/ipset-discord.txt" --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new --filter-tcp=443 --hostlist="/opt/zapret/ipset/list-general.txt" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --filter-udp=443 --hostlist="/opt/zapret/ipset/list-general.txt" --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic="/opt/zapret/files/fake/quic_initial_www_google_com.bin""
</code></pre>
<p>Так попробуйте.</p>
<p><a class="mention" href="/u/hentay">@Hentay</a> Мне, почему-то, тоже.</p></td><td>2024-11-06T21:59:26.662Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Если мы об этой строчке <code>-dpi-desync=syndata,split2</code> , то мы сплитим 16 нулей в пакете SYN</p>
<p>что-то мне подсказывает, что это лишено смысла…</p>
<p>PS У него автохост. Нужно перед --new добавить общую переменную листа <code>&lt;HOSTLIST&gt;</code>. А то автохост будет не работать. И будет читаться как “все что в листе - стратегия -новое -стратегия.” То есть обрабатываться в обход</p>
<details>
<summary>
стратегия для Keksimus</summary>
<p>NFQWS_OPT="<br>
–filter-tcp=80 --dpi-desync=disorder2  <code>&lt;HOSTLIST&gt;</code> --new<br>
–filter-udp=50000-50100 --ipset=“/opt/zapret/ipset/ipset-discord.txt” --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new<br>
–filter-tcp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --dpi-desync=syndata,split2 <code>&lt;HOSTLIST&gt;</code> --new<br>
–filter-udp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic=“/opt/zapret/files/fake/quic_initial_www_google_com.bin”<br>
"</p>
<p>И самое забавное, что мы используем автолист только в 2-х местах. Остальные стратегии по ипу или спискам</p>
</details></td><td>2024-11-06T22:10:26.997Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Hentay" data-post="2422" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>то мы сплитим 16 нулей в пакете SYN</p>
</blockquote>
</aside>
<p>именно в SYN. а не везде?</p>
<p>а, я понял: 16 нулей в syn  + остальные пакеты просто сплит</p></td><td>2024-11-06T22:23:21.951Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="KDS" data-post="2421" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Так попробуйте.</p>
</blockquote>
</aside>
<p>Также, не робит <img src="https://ntc.party/images/emoji/twitter/pensive.png?v=12" title=":pensive:" class="emoji" alt=":pensive:" loading="lazy" width="20" height="20"><br>
Прям чудеса какие-то</p></td><td>2024-11-06T22:23:38.180Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>в  риде на гитхабе так сказано<br>
мы про syndata <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="Keksimus" data-post="2424" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>Также, не робит <img src="https://ntc.party/images/emoji/twitter/pensive.png?v=12" title=":pensive:" class="emoji" alt=":pensive:" loading="lazy" width="20" height="20"><br>
Прям чудеса какие-то</p>
</blockquote>
</aside>
<p>Выше смотри некоторое пояснение<br>
PS форум скушал переменные. Голодный</p></td><td>2024-11-06T22:24:04.710Z</td></tr><tr><td>KDS</td><td><p>Не робил потому что вы, видимо, скопировали версию со сломанными форумом символами. Я этого вовремя не заметил, ибо 2 тире и длинное тире на форуме не отличишь. Попробуйте скопировать еще раз.</p>
<p>Вот что у него в батнике альт5 делает вот это последней строкой?<br>
<code>--filter-l3=ipv4 --filter-tcp=443 --dpi-desync=syndata</code></p>
<p>То есть гадить на любой SYN пакет TLS, который не попадает под вышеперечисленные фильтры. То есть почти на все, кроме ютуба и дискорда. В чем великий смысл сего действа, я даже предположить боюсь. Видимо, чтобы все блокировки сразу обходились ))</p></td><td>2024-11-06T22:31:05.755Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Тут разночтение получается…<br>
Сплитим ли мы syn , или все пакеты…<br>
Вот в чем вопрос великий</p>
<aside class="quote no-group" data-username="KDS" data-post="2426" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>То есть гадить на любой SYN пакет TLS, который не попадает под вышеперечисленные фильтры. То есть почти на все, кроме ютуба и дискорда. В чем великий смысл сего действа, я даже предположить боюсь.</p>
</blockquote>
</aside>
<p>Вообщет там вроде по уму должен быть автохостлист. Но переменная либо не долетела, либо её нет изначально в стратегии</p></td><td>2024-11-06T22:33:43.305Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="KDS" data-post="2426" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>То есть гадить на любой SYN пакет TLS, который не попадает под вышеперечисленные фильтр</p>
</blockquote>
</aside>
<p>разве это не до фильтра применяется?</p>
<p>ну кста я тебе об этом еще неделю назад в личку писал) просто кое-кто заигнорил</p></td><td>2024-11-06T22:36:18.400Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group quote-modified" data-username="Hentay" data-post="2425" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Выше смотри некоторое пояснение</p>
<p>стратегия для Keksimus</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="KDS" data-post="2426" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Не робил потому что вы, видимо, скопировали версию со сломанными форумом символами. Я этого вовремя не заметил, ибо 2 тире и длинное тире на форуме не отличишь. Попробуйте скопировать еще раз.</p>
</blockquote>
</aside>
<p>И так и сяк попробовал, результат отрицательный.</p></td><td>2024-11-06T22:37:10.693Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Тогда мой друх<br>
Блокчек/Гудчек тебе в помощь</p>
<p>PS запрет нужно отключить</p></td><td>2024-11-06T22:37:43.470Z</td></tr><tr><td>KDS</td><td><p>Именно, что нет там больше ничего. И вообще, про какой автохостлист идет речь, синдата только с айписетами работает, ибо SNI еще неизвестен на этом этапе.</p>
<p><a class="mention" href="/u/uwu">@uwu</a> Тем более. А о чем ты писал, эта строка только 12 часов назад появилась у него. А не, вру, еще в прошлой была. Ну, что я могу сказать… ничего )</p></td><td>2024-11-06T22:38:09.554Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="Hentay" data-post="2430" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Тогда мой друх<br>
Блокчек/Гудчек тебе в помощь</p>
<p>PS запрет нужно отключить</p>
</blockquote>
</aside>
<p>Так в том то и дело, что ручками когда стратегии нахожу то все в принципе и работает, ну кроме дискорда, а тут есть уже готовые стратегии, причем универсальные, вот думал просто закинуть их на роутер, а оно вон как, не хочет работать <img src="https://ntc.party/images/emoji/twitter/see_no_evil.png?v=12" title=":see_no_evil:" class="emoji" alt=":see_no_evil:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T22:41:07.158Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Потому что</p>
<ul>
<li>Система может вносить некоторые модификации</li>
<li>Провайдер мог поставить ещё фильтра</li>
<li>Упали некоторые CDN</li>
</ul>
<p>Так что в одном месте и на одной системе все может быть хорошо, но на другой системе может быть плохо</p>
<p>PS Все же на винде и линуксе немного разный инструментарий и окружение</p></td><td>2024-11-06T22:43:49.613Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="KDS" data-post="2431" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Ну, что я могу сказать… ничего</p>
</blockquote>
</aside>
<p>ну в любом случае там написано not recommended<br>
Видимо просто как крайний случай, который все пробивает по аналогии с wssize<br>
(это я просто предполагаю логику автора)</p></td><td>2024-11-06T22:44:48.777Z</td></tr><tr><td>Hentay(Hentay)</td><td><aside class="quote no-group" data-username="KDS" data-post="2431" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>синдата только с айписетами работает, ибо SNI еще неизвестен на этом этапе.</p>
</blockquote>
</aside>
<p>Опа…<br>
Тогда он используется только в листах дискорда(должен быть там). Дальше бесполезен<br>
Просто он выбрал у себя режим ведения автохостлист.<br>
Если сайт не отвечает несколько раз, то он заноситься в список и потом на нем применяется та или иная стратегия дурения</p></td><td>2024-11-06T22:48:53.393Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="uwu" data-post="2434" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>там написано not recommended</p>
</blockquote>
</aside>
<p>Где? В месте, на которое не наткнешься, если даже специально искать? ) В ридми нет, на гитхабе нигде нет, где может посмотреть обычный пользователь. Если честно, я вообще не нашел у него там слов not recommended</p></td><td>2024-11-06T22:50:35.155Z</td></tr><tr><td>uwu(uwu)</td><td><details>
<summary>
Спойлер</summary>
<p><img src="zapret-обсуждение-726/eaa81742da3fcfe67ffc2acb42248d41d93c9186.png" alt="изображение" data-base62-sha1="xtRRo4e090cv0U0NpEM7LbEr4ge" width="456" height="301"></p>
</details></td><td>2024-11-06T22:51:24.262Z</td></tr><tr><td>Hentay(Hentay)</td><td><pre><code class="lang-auto">РЕЖИМ SYNDATA
Тут все просто. Добавляются данные в пакет SYN. Все ОС их игнорируют, если не используется TCP fast open (TFO), а DPI может воспринять, не разобравшись есть там TFO или нет. Оригинальные соединения с TFO не трогаются, поскольку это их точно сломает. Без уточняющего параметра добавляются 16 нулевых байтов.
</code></pre>
<p>Гитхаб Запрета</p>
<p><a class="mention" href="/u/uwu">@uwu</a></p>
<p>да пусть он там хоть обпишеться. Это форк</p></td><td>2024-11-06T22:51:41.643Z</td></tr><tr><td>KDS</td><td><p>Охренеть. И кто туда полезет, когда написано - пробуйте по порядку все ALT? Я этот батник за последние 30 минут раз 10 открыл и то не заметил )</p>
<p><a class="mention" href="/u/hentay">@Hentay</a> Я знаю что такое автохостлист ) Не буду напоминать сборку, где он впервые появился и какие при этом вылезали проблемы <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T22:52:28.300Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Заметил что когда перезапускаю zapret то пишет <strong>!!! REFUSING TO USE BAD OPTIONS :</strong></p>
<details>
<summary>
Summary</summary>
<p>root@OpenWrt:~# /etc/init.d/zapret restart<br>
Clearing nftables<br>
net.netfilter.nf_conntrack_tcp_be_liberal = 0<br>
!!! REFUSING TO USE BAD OPTIONS :<br>
–filter-tcp=80 --dpi-desync=disorder2  --new<br>
–filter-udp=50000-50100 --ipset=/opt/zapret/ipset/ipset-discord.txt --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new<br>
–filter-tcp=443 --hostlist=/opt/zapret/ipset/list-general.txt --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --dpi-desync=syndata,split2  --new<br>
–filter-udp=443 --hostlist=/opt/zapret/ipset/list-general.txt --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin</p>
<p>Applying nftables<br>
Creating ip list table (firewall type nftables)<br>
setting high oom kill priority<br>
reloading nftables set backend (no-update)<br>
Inserting nftables ipv4 rule for nfqws postrouting (qnum 200) : tcp dport {80,443} ct original packets 1-9<br>
Inserting nftables ipv4 rule for nfqws prerouting (qnum 200) : tcp sport {80,443} ct reply packets 1-3<br>
Inserting nftables ipv4 rule for nfqws postrouting (qnum 200) : udp dport {443,50000-50100} ct original packets 1-9<br>
net.netfilter.nf_conntrack_tcp_be_liberal = 1<br>
root@OpenWrt:~#</p>
</details>
<p>На что то ругается <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p></td><td>2024-11-06T23:08:04.004Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>ipset убирайте, он через ip/nftables делается<br>
Если у вас там большие листы, то только iptables</p></td><td>2024-11-06T23:09:34.393Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>И маленькая ремарка</p>
<p>Дискорд идет через 50-discord кустом скрипт<br>
Так что лист дискорда можно удалить, как и саму всю строчку связанную с 50000 портами</p>
<p>PS Только в автохост потребуется прописать домены дискорда … Поиск рулит<br>
PS2 открой мой предыдущее сообщение тебе со спойлером. Там есть некоторые изменения</p></td><td>2024-11-06T23:10:07.620Z</td></tr><tr><td>fresa</td><td><p>я писал без иронии, мне понравился ваш скрипт с переменными, проверками и оформлением</p></td><td>2024-11-07T03:41:43.349Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="girilid" data-post="2399" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/5f9b8f/48.png" class="avatar"> girilid:</div>
<blockquote>
<blockquote>
<p>–filter-tcp=443 --hostlist=“$YOUTUBE_LIST” --dpi-desync=split2 --dpi-desync-split-seqovl=49 --dpi-desync-split-pos=50 --wssize 1:6</p>
</blockquote>
<p>то работа видео на ютубе сильно ухудшается.</p>
<p>Толи лыжи не едут, толь я не понимаю специфику</p>
</blockquote>
</aside>
<p>wssize не работает с хостлистом. если он так нужен, надо написать<br>
–new –filter-tcp=443 --wssize 1:6<br>
или туда, где приземляется весь трафик tcp 443</p></td><td>2024-11-07T07:54:19.774Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="2416" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>n3 для дискорда = d3? Если нет, то в чем смысл?</p>
</blockquote>
</aside>
<p>Для udp n и d - одно и то же, потому что не бывает пустых udp.<br>
Отличия есть на tcp.<br>
Кто-то придумал cutoff d4. Я спросил их у вас с d2 не работает ? сказали нет<br>
не проверял, не пользуюсь, ставить и разбираться тоже не хочу. Тем более, что на провайдерах может быть по-разному.<br>
просто добавил в настройки. сильно хуже не станет. 18 unknown фейков по 64 байта - ни о чем для современной сети</p></td><td>2024-11-07T07:57:15.994Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Keksimus" data-post="2415" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>Summary</p>
<p>NFQWS_OPT="<br>
–filter-tcp=80 --dpi-desync=disorder2 --new<br>
–filter-udp=50000-50100 --ipset=“/opt/zapret/ipset/ipset-discord.txt” --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new<br>
–filter-tcp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new --dpi-desync=syndata,split2<br>
–filter-udp=443 --hostlist=“/opt/zapret/ipset/list-general.txt” --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic=“/opt/zapret/files/fake/quic_initial_www_google_com.bin” --new<br>
"</p>
<p>Где ошибка?</p>
</blockquote>
</aside>
<p>–dpi-desync=syndata,split2 пойдет на udp, что полностью лишено смысла<br>
–new в конце не нужен</p></td><td>2024-11-07T08:00:38.282Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2422" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Если мы об этой строчке <code>-dpi-desync=syndata,split2</code> , то мы сплитим 16 нулей в пакете SYN</p>
<p>что-то мне подсказывает, что это лишено смысла…</p>
</blockquote>
</aside>
<p>Нет, в SYN пакете сплитов быть не может в принципе.<br>
Сплит идет во 2-ю фазу.<br>
1 фаза - реакция перед основным пакетом данных (fake, например)<br>
2 фаза - действие над основным пакетом данных (split2, disorder2)</p></td><td>2024-11-07T08:03:35.471Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="wigeance" data-post="2441" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Если у вас там большие листы, то только iptables</p>
</blockquote>
</aside>
<p>Все зависит от размера памяти.<br>
Под 128M nft выдерживает около 20K без проблем.<br>
Чтобы загнать 100K, нужно ~384 Mb<br>
Причем это пиковое значение. Основную часть жрет не контент в ядре, который уже загружен.<br>
Жрет алгоритм merge в программе nft. Его задача - убрать перекрытия диапазонов, поскольку nf-сеты не могут работать с перекрытиями. И он сильно жрет память.</p></td><td>2024-11-07T08:08:20.112Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Я пробовал как-то cutoff d2, оно и правда не работает (судя по всему из-за кибера), nfqws после 1го пакета перестает реассемблить и отстает от соединения. С d4 такого нет соответственно. Но я особо там не вглядывался в логи</p></td><td>2024-11-07T10:17:50.721Z</td></tr><tr><td>bolvan</td><td><p>cutoff делался только для портов udp 50000-50099<br>
Там же не quic ходит ? Если нет, то никакого реассембле не будет</p></td><td>2024-11-07T10:39:42.597Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>а, тогда извиняюсь, я про 443 порты говорил</p></td><td>2024-11-07T11:17:54.567Z</td></tr><tr><td>girilid</td><td><p>Ох, сколько нюансов, спасибо за пояснение, буду раскуривать мануалы дальше <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-07T13:56:17.787Z</td></tr><tr><td>irregular-circle</td><td><p>На byedpi для ютуба и остальных жёстко заблоченных сайтов хорошо работает (по крайней мере у меня) конфиг вида -d1 -s4 -d8 -s1+s -d5+s -s10+s -d20+s -s25+s -d30+s и так далее, без всяких фейков и out of order байтов, чисто сплиты и дизордеры. То есть, насколько я понимаю, из пакета client hello вырезаются (на них ставится ttl=1 и они не доходят даже до DPI) куски в начале пакета и на месте SNI, которые ядро потом по одному досылает на сервер. Вот собственно интересует, есть ли такая возможность как бы множественного сплита с дизордером на nfqws, чтобы можно было бы нарезать client hello на части и отправить в произвольном порядке? Судя по ману вроде нет… Просто на винде вышенаписанная стратегия для byedpi не работает, т.к происходит полная ретрансмиссия и вместо того чтобы заполнять дыры по одной ядро сразу кидает весь пакет целиком и видимо триггерит DPI, тут нужен обработчик пакетов типа nfqws.</p></td><td>2024-11-07T20:30:09.768Z</td></tr><tr><td>bolvan</td><td><p>Нет такой возможности. Так же не функции автоматической обратной связи.<br>
если не работает 1, попробовать 2</p></td><td>2024-11-08T06:04:12.826Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Каким же огромным стал в v68 mipselsf tpws - 294888:</p>
<pre><code class="lang-auto"># ls -l /tmp/tpws-v68
-rwxr-xr-x    1 root     root        294888 Nov  8 13:41 /tmp/tpws-v68
</code></pre>
<p>В v67 mips32r1-lsb tpws был всего 114984, в 2,5 раза меньше:</p>
<pre><code class="lang-auto"> ls -l /tmp/tpws-v67
-rwxr-xr-x    1 root     root        114984 Oct 31 21:59 /tmp/tpws-v67
</code></pre>
<p>Это он так от нового кода распух и про</p>
<p><a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BD%D0%B0-openwrt-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D0%BE%D1%81%D1%82%D1%80%D0%BE%D0%B9-%D0%BD%D0%B5%D1%85%D0%B2%D0%B0%D1%82%D0%BA%D0%B8-%D0%BC%D0%B5%D1%81%D1%82%D0%B0-%D0%BD%D0%B0-%D0%B4%D0%B8%D1%81%D0%BA%D0%B5" rel="noopener nofollow ugc">Установка на openwrt в режиме острой нехватки места на диске<br>
Требуется около 120-200 кб на диске.</a></p>
<p>можно начинать забывать или что еще можно с этим сделать?</p></td><td>2024-11-08T14:49:30.410Z</td></tr><tr><td>irregular-circle</td><td><p>Неплохо было бы реализовать дополнительную стратегию второй фазы shuffle. Что-то типа --dpi-desync=shuffle --dpi-desync-shuffle-pos=1:5:1+sni --dpi-desync-shuffle-order=3:1:2 кидает первым кусок пакета от 1 до 5 байта, вторым кусок от 5 до начала sni+1, третьим первый байт в начале пакета и наконец уже все остальное. Просто как альтернативу фейкам с repeats.</p></td><td>2024-11-08T14:52:49.764Z</td></tr><tr><td>spv82</td><td><p>Вы сравниваете распакованный с упакованным в upx? Так как вижу в v68:</p>
<pre><code class="lang-auto">du -h mips32r1-lsb/tpws
120K    mips32r1-lsb/tpws
</code></pre>
<aside class="quote no-group" data-username="MayanKoyote" data-post="2465" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mayankoyote/48/10518_2.png" class="avatar"> MayanKoyote:</div>
<blockquote>
<p>можно начинать забывать или что еще можно с этим сделать?</p>
</blockquote>
</aside>
<p>Если у вас openwrt то скорее подойдет бинарник собранный в SDK нужной версии. В репо запрета собраны статические бинари.</p></td><td>2024-11-08T15:13:52.043Z</td></tr><tr><td>bolvan</td><td><p>Судя по размеру это версия без upx.<br>
Но я ее в упор не вижу в релизе. Где ? Если самосбор, то это нормально. Без upx и будет. Если надо можно упаковать самостоятельно.</p></td><td>2024-11-08T15:14:44.066Z</td></tr><tr><td>bolvan</td><td><p>Достоверно известно, что когда не работает обычный disorder2, этот вариант работает ?<br>
То есть DPI может разобрать 2 фрагмента в обратном порядке, а 3 не может ?</p></td><td>2024-11-08T15:20:20.129Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Зачем самосбор. Обычный артефакт из Actions - Release v68<br>
<a href="https://github.com/bol-van/zapret/actions/runs/11738829404/artifacts/2162023778" class="onebox" target="_blank" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/actions/runs/11738829404/artifacts/2162023778</a></p></td><td>2024-11-08T15:20:20.317Z</td></tr><tr><td>bolvan</td><td><p>Это промежуточный результат сборки. Его можно использовать, но он без upx.</p></td><td>2024-11-08T15:21:57.338Z</td></tr><tr><td>i-no(...)</td><td><p>Можно ли эту идею каким-то образом потестировать?</p></td><td>2024-11-08T15:25:15.679Z</td></tr><tr><td>bolvan</td><td><p>Бай DPI умеет такое.<br>
Но прежде, чем мутить это в zapret, хотелось бы убедиться в эффективности.<br>
Пока не сталкивался с таким.</p>
<p>Кстати, даже если реализовать это в nfqws, то будет не полный аналог byedpi.<br>
byedpi играет с сокет апи, он не может абы что послать. Отдельные части.<br>
Должно быть он может резать на любое количество частей и применять disorder или fake к отдельно взятым частям. Но произвольно шуффлить он не может</p></td><td>2024-11-08T15:26:37.967Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Ага, понятно теперь.<br>
Просто из описания релиза сложилось впечатление что бинарники переехали оттуда полностью в Actions.</p></td><td>2024-11-08T15:30:31.192Z</td></tr><tr><td>bolvan</td><td><p>Сборка переехала, а бинарики в релиз переехали.</p></td><td>2024-11-08T15:30:54.944Z</td></tr><tr><td>fresa</td><td><p>а можно убрать из названия архива и директории внутри версионирование? это сильно усложняет написание скрипта для обновления запрета на freebsd</p></td><td>2024-11-08T15:46:36.410Z</td></tr><tr><td>bolvan</td><td><p>Это сделано, чтобы при распаковке разных версий они не мешались.<br>
В скрипте shell этот вопрос решить элементарно через glob</p></td><td>2024-11-08T15:53:43.228Z</td></tr><tr><td>irregular-circle</td><td><p>Ну у меня на билайне работает googlevideo с -d1 -s4 -d8 -s1+s -d5+s -s10+s -d20+s -s25+s -d30+s на андроиде и линуксе. Также чекал на ростелекоме, работает. <a href="https://ntc.party/t/byedpi-for-android-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/9075/293">Вот</a> еще человек пишет, что у него дискорд и ютуб заработали с подобным конфигом на андроиде. Конечно нужно чтобы кто-то еще проверил  на byedpi у себя и отписал. Там не 3 фрагмента, а больше(через DPI пакет проходит в порядке 2 - 4; 9 - sni+1; sni+6 - sni+10; sni+21 - sni+25; sni+31 - конец пакета; 1 - 1; 5 - 8; sni+2 - sni+5; sni+11 - sni+20; sni+26 - sni+30), обязательно чтобы были вырезаны куски из начала пакета там где 16 03… и в SNI иначе отказывается работать. Мб можно и меньшее количество фрагментов сделать.  На винде этот конфиг работать НЕ будет из-за полной рентрансмиссии. Да, конечно это не полноценный shuffle, поэтому и хочется чего-то такого на nfqws потому что у него больше возможностей чем у byedpi которая работает со стрим сокетами. Короче интересно, работает ли у кого такой конфиг и есть ли смысл это реализовать в запрете?<br>
апд: да, обычный запретовский дизордер с sequence overlap не работает для ютуба и дискорда, все остальное пробивает.</p></td><td>2024-11-08T16:13:38.205Z</td></tr><tr><td>bolvan</td><td><p>Было бы полезно, если вы попробовали сократить максимально это выражение.<br>
Чтобы понять поточнее на что реагирует DPI.<br>
Достаточно ли вырезать только 16 03 и SNI. Одно что-то - недостаточно ?<br>
split-pos=1 не работает на split2 или disorder ?<br>
действительно ли важно порезать именно по SNI ?<br>
Если так, то это может быть сочетание разных DPI, 1 из которых stateless как в Эмиратах и Саудии.</p>
<p>Если делать произвольное перемешивание, то использовать позицию SNI несколько сложновато и неоднозначно. Ведь она может попасть куда угодно. В любой интервал, и он может стать невалидным.<br>
SNI на позиции 100, допустим<br>
написано 101-SNI. Что делать ?<br>
А если это не TLS, то что делать ? Или SNI отсутствует в extensions.</p></td><td>2024-11-08T16:48:07.263Z</td></tr><tr><td>irregular-circle</td><td><p>Потестил, минимально рабочий конфиг byedpi для ютуба: -d1 -s25+s -d30+s. То есть сначала кидает 2 - SNI+25 потом SNI+31 - конец пакета, затем заполняет дыры 1-1 и SNI+26 - SNI+30. Насколько я понял, обязательно чтобы отсекались первые байты в пакете И одновременно с этим чтобы строчка …googlevideo.com… в SNI  не попала целиком в один из фрагментов, именно отсюда -s25+s -d30+s. По отдельности не работает, и если порезать SNI где-то в другом месте тоже не будет работать. Ни голый split с pos=1 ни disorder на запрете не работают для ютуба, работает только фейк со SNI гугла с repeats 3, потом split, для фейка дурение badseq.<br>
Да, я понимаю что это будет сложно реализовать, да и не особо нужно в принципе пока все работает.</p></td><td>2024-11-08T17:57:44.710Z</td></tr><tr><td>Starbreeze</td><td><p>юзаю byeDPI на андроиде с настройками:<br>
-n “<a href="http://www.google.com" rel="noopener nofollow ugc">www.google.com</a>” -d +s -O 1 -s 25+s -t 5</p>
<p>На вайфае, и мобильном операторе (мегафон) ютуб и инста летают.</p></td><td>2024-11-08T18:17:48.517Z</td></tr><tr><td>bolvan</td><td><p>Забавно. Должно быть они сделали дополнительное правило на поиска строки “<a href="http://googlevideo.com">googlevideo.com</a>”  в первых нескольких пакетах, не анализируя структуры TLS. В дополнение к обычной проверке.<br>
Может супер-шредер сделать ? Резать каждые N байт и отправлять в случайном порядке ?<br>
Или даже задать случайный диапазон длин. От 5 до 10, допустим. Пусть потом копаются в этом месеве из 50 пакетов в разном порядке с разной длиной. Или задом наперед отправлять. Чтобы случайность не привела к случайным сбоям.<br>
Или еще SNI-потрошитель. Начало -SNI норм, потом покрошить SNI на мелочь, потом опять норм.<br>
Вообщем пространство для игрищ большое. Надо подумать что будет лучше.<br>
Слишком уж увлекаться мелочью чревато реакцией ДДОС защит</p></td><td>2024-11-08T18:35:12.765Z</td></tr><tr><td>mike7</td><td><p>У меня на 2-х провайдерах -oob 2 --split -5+se срабатывает для <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, надо именно часть в конце SNI отрезать, ну и несколько частей.<br>
А вот QUIC не пробивается (</p></td><td>2024-11-08T18:54:17.601Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>для общего понимая, чем стратегия split без добавок “хуже” чем с добавками вроде md5sig и тп.(не ttl)?</p>
<p>в обоих случаях dpi пробивается. но чистый split ломает сами сайты (400) а с добавками уже не ломает</p></td><td>2024-11-08T19:01:39.415Z</td></tr><tr><td>anon9001(anon)</td><td><p>based</p></td><td>2024-11-08T19:03:35.121Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p><code>-dpi-desync-fooling=&lt;fooling&gt;;  дополнительные методики как сделать, чтобы фейковый пакет не дошел до сервера</code><br>
Вовремя отвергнутый пакет не дойдет до сервера и не сломает сайт. Для этого добавки и нужны. Добавки нейтрализуют токсичное воздействие фейка. Всё это описано, и ответ содержится в самом вопросе.</p>
</blockquote></td><td>2024-11-08T19:09:16.349Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>ТСПУ может пропустить сплит и отправить его в исходном виде до сайта (хотя тут зависит от самого сайта и он может открыться нормально)<br>
С добавками ТСПУ “спотыкается” . В этот момент весь обман остается в ТСПУ и  запрос уже без обмана идет до сайта.</p>
<p><a class="mention" href="/u/i-no">@i-no</a>  не все высокую кухню понимают)</p></td><td>2024-11-08T19:09:31.211Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Hentay" data-post="2487" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>не все высокую кухню понимают)</p>
</blockquote>
</aside>
<p>Да) Кухня - это внешнее пищеварение. Оно в отличие от внутреннего само собой не происходит)</p>
<p>Если серьезно, то содействие любому, кто пытается что-то понять - это благороднейшее дело. Я не шучу.</p></td><td>2024-11-08T19:15:31.789Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>может тогда [часть] пакетов помеченных добавками сам сайт отвергает?</p>
<p>а вовсе не dpi</p>
<p>заведомо знаю что тотже md5sig и datanoack, сами по себе, доходят (без применения ttl)  до сайтов и тоже могут их подламывать (нетольколишьвсе)</p></td><td>2024-11-08T19:17:33.182Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote" data-post="2489" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2489">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    может тогда [часть] пакетов помеченных добавками сам сайт отвергает? 
а вовсе не dpi 
заведомо знаю что тотже md5sig и datanoack доходят (без применения ttl) до сайтов и тоже могут их подламывать (нетольколишьвсе)
  </blockquote>
</aside>
</td><td>2024-11-08T19:17:56.804Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2489" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>[часть] пакетов помеченных добавками сам сайт отвергает?</p>
</blockquote>
</aside>
<p>Задача добавок в том и состоит, чтобы сайт их отверг, а DPI чтобы ими подавился и отстал от нашего трафика. Есть нюансы, но в целом результаты неплохие.</p></td><td>2024-11-08T19:21:50.390Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Потому что не все сайты на линуксе. Там анархия.<br>
Часть сайтов данную вещь понимают и отвергаю.<br>
И пакеты не помечают. Внутри системы они имеют метку, что бы система знала, что это трафик на выход и его нужно обработать</p></td><td>2024-11-08T19:26:04.556Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2484" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>для общего понимая, чем стратегия split без добавок “хуже” чем с добавками вроде md5sig и тп.(не ttl)?</p>
</blockquote>
</aside>
<p>split имеет фэйк внутри себя, поэтому нужно, чтобы он не дошел до сервера<br>
и фулинги сами по себе могут обманывать тспу<br>
p,s забавно, сейчас глянул свои конфиги, фулинг используется только для дискорда, все остальное обходится на уровне ттл или отсутствия фейков)</p></td><td>2024-11-08T19:37:14.139Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Добрый вечер, а вариант с ттл на данный момент является совсем не перспективным?<br>
Было бы круто добавить возможность добавлять список в стратегию в котором будет каждому ip соответствовать определенный ттл. Найти ip и определить их ттл не составит труда. Кому интересно скриптик выкладываю по определению ттл. Работает на кинетике только с дот и дох. Можно подправить под себя. Можно запускать с доменом а можно во внутрь список добавить.<br>
<a class="attachment" href="zapret-обсуждение-726/229Fj5IdBsCHMH0SSShWKn5ipn1.sh">ttl.sh</a> (2,4 КБ)<br>
Выглядит вот так<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/67df3e9c485acbbffc4ba2447b27770cf1503482.jpeg" data-download-href="https://ntc.party/uploads/default/67df3e9c485acbbffc4ba2447b27770cf1503482" title="IMG_20241108_234231"><img src="zapret-обсуждение-726/67df3e9c485acbbffc4ba2447b27770cf1503482_2_690x391.jpeg" alt="IMG_20241108_234231" data-base62-sha1="eOTtGiDEcEeQlyWvLyspkGPI25Q" width="690" height="391" srcset="zapret-обсуждение-726/67df3e9c485acbbffc4ba2447b27770cf1503482_2_690x391.jpeg, zapret-обсуждение-726/67df3e9c485acbbffc4ba2447b27770cf1503482_2_1035x586.jpeg 1.5x, zapret-обсуждение-726/67df3e9c485acbbffc4ba2447b27770cf1503482.jpeg 2x" data-dominant-color="CBD3D7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241108_234231</span><span class="informations">1080×613 174 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-11-08T20:26:25.491Z</td></tr><tr><td>Hentay(Hentay)</td><td><aside class="quote no-group" data-username="toxae1" data-post="2494" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/toxae1/48/12007_2.png" class="avatar"> toxae1:</div>
<blockquote>
<p>Добрый вечер, а вариант с ттл на данный момент является совсем не перспективным?</p>
</blockquote>
</aside>
<p>Данный режим зависит от провайдера и стратегии. Он не является бесперспективным. Может Вы решили так?)</p>
<p>Только проблема в том , что запрету нужен ttl до ТСПУ провайдера, а не до сайтов</p></td><td>2024-11-08T20:37:36.706Z</td></tr><tr><td>Axolder</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> подскажите пожалуйста. Какая стратегия используется в Launcher for Zapret 1.4? У меня проблема состоит в том, что когда я развертываю zapret на роутере, все работает, но мне необходимо запустить частную трансляцию на ютюб и тут начинаются потери пакетов, трансляция идет с прерываниями или с падением битрейта. Если запускаю Launcher for Zapret 1.4 то все в порядке. Соответственно его стратегия мне подошла бы для роутера, но сравнить не могу. Либо какие параметры могут отвечать за потерю пакетов? Потому что просмотр ютюба в порядке, но вот отдача идет не как обычно. Появилось такое где то в сентябре, когда repeats меняли на 15.</p></td><td>2024-11-08T20:38:50.691Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Что-то я новое узнаю о <a class="mention" href="/u/bolvan">@bolvan</a>.</p>
<p>Впрочем я подозревал, что ему многое начнут приписывать</p></td><td>2024-11-08T20:42:23.500Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="Hentay" data-post="2495" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Может Вы решили так?</p>
</blockquote>
</aside>
<p>Решил так по причине что не кто не обсуждает ттл. Как по мне так это очень даже перспективно.</p></td><td>2024-11-08T20:46:01.101Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ещё раз .</p>
<aside class="quote no-group" data-username="Hentay" data-post="2495" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Только проблема в том , что запрету нужен ttl до ТСПУ провайдера, а не до сайтов</p>
</blockquote>
</aside>
<p>Поэтому и не обсуждают. Оно у каждого свое<br>
Впрочем иногда ttl не берётся из-за выбранной стратегии</p></td><td>2024-11-08T20:46:51.317Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="Hentay" data-post="2495" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Только проблема в том , что запрету нужен ttl до ТСПУ провайдера, а не до сайтов</p>
</blockquote>
</aside>
<p>Ну так в том и прикол что если мы узнаем ттл сайта и пусть даже тспу стоит перед ним мы просто указываем -1 и дело в шляпе.</p></td><td>2024-11-08T20:49:40.106Z</td></tr><tr><td>Hentay(Hentay)</td><td><p><img src="https://ntc.party/images/emoji/twitter/rofl.png?v=12" title=":rofl:" class="emoji only-emoji" alt=":rofl:" loading="lazy" width="20" height="20"><br>
Ставим -1 для каждого сайта и надеемся не выиграть страйк и не сломать сайт</p>
<p>PS посмотреть на этот километр туалетной бумаги<br>
PS2 Про прокси всякие мы забыли и ещё кучу редиректов …</p></td><td>2024-11-08T20:51:08.831Z</td></tr><tr><td>uwu(uwu)</td><td><p>ну теоретически это может быть полезно, если у нас есть куча сайтов в хостлисте и нужно найти общий минимальный ttl<br>
но это нужно скорее всего скрипт допиливать и на сегодня я пока не вижу применения</p></td><td>2024-11-08T20:55:35.285Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Axolder" data-post="2496" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/axolder/48/10471_2.png" class="avatar"> Axolder:</div>
<blockquote>
<p>Какая стратегия используется в Launcher for Zapret 1.4?</p>
</blockquote>
</aside>
<p><code>--dpi-desync=fake,split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls="tls_clienthello_www_google_com.bin" --dpi-desync-ttl=5</code></p></td><td>2024-11-08T20:57:54.319Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Я тоже не вижу зачем он нужен.<br>
А с той идеей, где -1 TTL в зависимости от запроса и пихать в стратегию обхода… Там страйк выбьем без проблем</p></td><td>2024-11-08T20:58:28.078Z</td></tr><tr><td>Axolder</td><td><p>хм, а тут совсем не используются --dpi-desync-repeats=15. Дело в том, что когда в сентябре снова поломали все помогло повышение repeats c 6 до 15. Все хорошо, но при трансляции дропы, соответственно соединение нестабильное. Вот такие стратегии прописаны в роутере.<br>
<em>–filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum  --new</em><br>
<em>–filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=15 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin  --new</em><br>
<em>–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=15 --dpi-desync-ttl=0  --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin </em></p></td><td>2024-11-08T21:19:40.639Z</td></tr><tr><td>KDS</td><td><p>А зачем он там нужен? И куда вы транслируете то вообще?</p></td><td>2024-11-08T21:21:54.115Z</td></tr><tr><td>Hentay(Hentay)</td><td><aside class="quote no-group" data-username="Axolder" data-post="2505" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/axolder/48/10471_2.png" class="avatar"> Axolder:</div>
<blockquote>
<p><em>–filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-split-pos=1 --dpi-desync-ttl=0 --dpi-desync-fooling=md5sig,badsum --dpi-desync-repeats=15 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new</em><br>
<em>–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=15 --dpi-desync-ttl=0 --dpi-desync-any-protocol --dpi-desync-cutoff=d4 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin</em></p>
</blockquote>
</aside>
<p>Забавно… Два пересекающихся правила…</p></td><td>2024-11-08T21:22:39.851Z</td></tr><tr><td>KDS</td><td><p>Интереснее, что такое <em>–dpi-desync-ttl=0</em> <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p></td><td>2024-11-08T21:24:19.139Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Что и без указания его. То есть можно выкинуть</p></td><td>2024-11-08T21:24:42.784Z</td></tr><tr><td>KDS</td><td><p>десинк эни и катофф на 443 тисипи… мда ))</p></td><td>2024-11-08T21:25:46.454Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Не только<br>
Там морталкомбат за трафик на этом 443 порту<br>
И по идее катофф не самое зло</p></td><td>2024-11-08T21:26:12.212Z</td></tr><tr><td>Axolder</td><td><aside class="quote no-group quote-modified" data-username="KDS" data-post="2503" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>–dpi-desync-split-tls=sniext</p>
</blockquote>
</aside>
<p>ну вот при этих стратегиях все работает (воспроизведение). Необходимо запустить рабочую трансляцию на ютюб закрытую, начинаются дропы, потери кадров. С лаунчером вроде бы по ощущениям идет гораздо лучше, поэтому решил покопаться в тех стратегиях, которые у меня прописаны.<br>
ну стратегия не моя, поэтому и решил попросить совета у знающих людей. Так сказать подкорректировать.</p></td><td>2024-11-08T21:27:04.268Z</td></tr><tr><td>KDS</td><td><p>С чего там что-то идет лучше, если там даже не указан <a href="https://ntc.party/t/ytdisbystro-%D0%B8-%D1%81%D1%82%D1%80%D0%B8%D0%BC%D1%8B-%D0%BD%D0%B0-%D1%8E%D1%82%D1%83%D0%B1-%D0%BF%D0%BE-rtmps/12274/23">ютубовский домен</a> для обхода? Или вы сами его указали?</p></td><td>2024-11-08T21:28:47.521Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Там не понятно чем и как рулит человек…</p>
<p>Типо перепишите правильно стратегии обхода</p></td><td>2024-11-08T21:30:02.181Z</td></tr><tr><td>KDS</td><td><p>Я про то что в лаунчере топера нет этого домена. Вот совсем нет. Поэтому и спрашиваю.</p></td><td>2024-11-08T21:30:49.233Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Если там линукс и указана фильтрация “none”, то там на все агриться запрет . На любой трафик по указанным портам. Список в этом случае не обязателен</p></td><td>2024-11-08T21:31:59.575Z</td></tr><tr><td>Axolder</td><td><p>С прописанными этими стратегиями в роутере при запуске трансляции на ютюб битрейт не поднимается до нужного значения и есть скачки серьезные. При отключении на роутере запрета и включении на пк лаунчера битрейт трансляции нормализуется и скачков нет.</p></td><td>2024-11-08T21:33:35.982Z</td></tr><tr><td>Axolder</td><td><p>Нет, по хостлисту</p></td><td>2024-11-08T21:34:06.803Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Тогда осталось понять где листы. В предложенном варианте стратегии идут без листов . Причем там у тебя конфликт уже имеется с выбранной стратегией</p></td><td>2024-11-08T21:35:04.143Z</td></tr><tr><td>KDS</td><td><p>Так потому что у вас в роутере ужас ужасный, а не стратегии, вам же написали.</p></td><td>2024-11-08T21:36:17.688Z</td></tr><tr><td>Axolder</td><td><p>В конфиге стоит MODE_FILTER=hostlist.</p></td><td>2024-11-08T21:38:50.884Z</td></tr><tr><td>Axolder</td><td><p>Понял, спасибо.</p></td><td>2024-11-08T21:39:02.515Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Тогда покажи целиком стратегию свою… Тот кусок - это не стратегия, а конфликты</p></td><td>2024-11-08T21:39:35.689Z</td></tr><tr><td>Axolder</td><td><p><a class="attachment" href="zapret-обсуждение-726/32yUpDBpYhaSwEzPicqrkrMjAjN">config</a> (5,7 КБ)<br>
Вот конфиг.</p></td><td>2024-11-08T21:41:29.229Z</td></tr><tr><td>KDS</td><td><p>Вот так хотя бы надо (с учетом конфига из лаунчера):</p>
<pre><code class="lang-auto">–filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig,badsum --new
–filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=15 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin
</code></pre>
<p>Вы на tcp нагромоздили опций, которые с ним вообще не работают. И на udp так же.</p></td><td>2024-11-08T21:44:53.329Z</td></tr><tr><td>Hentay(Hentay)</td><td><p><a class="attachment" href="zapret-обсуждение-726/6LOntgH39Pkw5m9Ogj5izBQgLKb">config</a> (5,6 КБ)</p>
<p>Просто правка, без избавления паразитных и не работающих элементов</p></td><td>2024-11-08T21:45:50.224Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Там указано все-же листы, но стандартные</p>
<p>Ну и выбор пусть будет</p></td><td>2024-11-08T21:48:04.485Z</td></tr><tr><td>KDS</td><td><p>Ага. Ничего кроме стратегий не менял</p>
<p><a class="attachment" href="zapret-обсуждение-726/qBXYcZQgOprVybbgG88Fe6ljgBy">config</a> (5,5 КБ)</p></td><td>2024-11-08T21:51:17.267Z</td></tr><tr><td>salat11</td><td><p>Отлетел дискорд ( не конекта, не войса ) , использую быстро . Новую версию запрета скачал. Ютуб и прочие сайты работают без нареканий.</p></td><td>2024-11-08T21:59:16.174Z</td></tr><tr><td>Axolder</td><td><p>Спасибо, сейчас посмотрю где не прав.</p></td><td>2024-11-08T22:01:28.229Z</td></tr><tr><td>Axolder</td><td><p>Сейчас изучу.</p></td><td>2024-11-08T22:01:39.457Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>С дисом беда в том, что он в блоке<br>
И протокол войса там очень специфичен.</p>
<p>Поэтому фикс войса возможен только … ВПН или любой редиректор трафика.<br>
<em>Не раз разбиралось и не раз сообщалось</em></p>
<p>Задача запрета - обойти ограничения. Но если провайдер по IP забанил сервера, то филита ля комедия</p></td><td>2024-11-08T22:01:46.747Z</td></tr><tr><td>salat11</td><td><p>мой провайдер точно не будет блочить ( я знаю владельца ему это не нужно) , если только магистральный. Но на той-же магистрали всё работает.</p></td><td>2024-11-08T22:04:18.866Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Сеть не однородна. И какой-то вышестоящий провайдер мог заблокировать<br>
А то что работает - надо узнавать как трафик пользователей идет… Может ваш провайдер через всю РФ отправляет <img src="https://ntc.party/images/emoji/twitter/smirk.png?v=12" title=":smirk:" class="emoji" alt=":smirk:" loading="lazy" width="20" height="20"></p>
<p>PS Но известно, что частично трафик войса уходит на клаудфлае</p></td><td>2024-11-08T22:05:30.758Z</td></tr><tr><td>salat11</td><td><p>веб версия работает , там нет войса только . Проксей нет в браузере</p></td><td>2024-11-08T22:07:38.057Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Hentay" data-post="2532" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Поэтому фикс войса возможен только … ВПН или любой редиректор трафика.</p>
</blockquote>
</aside>
<p>Ну да, ну да <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"></p>
<p><a class="mention" href="/u/salat11">@salat11</a> Какая хоть Быстро то? Вы не в курсе, что давно есть выбор для дискорда из 3-х параметров?</p></td><td>2024-11-08T22:08:59.327Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Так проще, чем мучать запрет</p>
<p>Каждый провайдер огораживает свою жопу как может и умеет, но у некоторых ласты и лапки</p></td><td>2024-11-08T22:09:30.986Z</td></tr><tr><td>salat11</td><td><p>.2.0 и 2.1 , 1.65 ещё пробовал.</p></td><td>2024-11-08T22:09:45.508Z</td></tr><tr><td>KDS</td><td><p>И в чем проблема? На 2.1 открываем cmd и rem нерабочую и unrem (стираем rem) другую. Перезапускаем запрет, пробуем…</p>
<p>Интересно, как вы поняли, что не работает войс, если дис не запускается, через сайт что ли?</p>
<p><a class="mention" href="/u/hentay">@Hentay</a> Ну, если там уж что-то такое непробиваемое, то да. НО, думаю, синдата затащит )</p></td><td>2024-11-08T22:12:19.290Z</td></tr><tr><td>salat11</td><td><p>2 способа.<br>
1 сайт.<br>
2. запуск через vpn с последующим отключением от него .</p></td><td>2024-11-08T22:14:04.982Z</td></tr><tr><td>Hentay(Hentay)</td><td><p><a class="mention" href="/u/salat11">@salat11</a>  Возбуждаем, но не даем …</p>
<p><a class="mention" href="/u/kds">@KDS</a> Ну я просто упростил схему… Всех буду отправлять в… ТОР НАФИГ</p></td><td>2024-11-08T22:15:45.939Z</td></tr><tr><td>irregular-circle</td><td><p>Некоторые домены дискорда последнее время стали оч сильно блочить. Заходит в дискорд, но при попытке зайти в войс чат бесконечный connecting, создавая ложное впечатление что блочат udp на порты 50000-50100, но на самом деле до udp при звонке дело даже не доходит (тогда писало бы no route), для udp как и прежде работает один фейковый пакет с нулями. Фиксить надо именно стратегию для tcp/quic на домены дискорда, мб попробовать фейки с повторами. У меня такое было, и ещё у человека отсюда. Поэтому возможно не надо сразу отчаиваться и бежать покупать впн/впс.</p></td><td>2024-11-08T22:28:25.297Z</td></tr><tr><td>salat11</td><td><p>самый анекдот в том , что удалил папку с быстро , залил чистую 2.1 и запрет.  Всё заработало…</p></td><td>2024-11-08T22:29:11.198Z</td></tr><tr><td>Axolder</td><td><aside class="quote no-group" data-username="KDS" data-post="2525" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<pre><code class="lang-auto">–filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig,badsum --new
–filter-tcp=443 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --new
–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=15 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin
</code></pre>
</blockquote>
</aside>
<p>с этими стратегиями и конфигом трекеры вообще не открываются, а ютюб с горем пополам открывается, показывает часть превьюх, а видео в вечной загрузке, спасибо, буду разбираться.</p></td><td>2024-11-08T22:32:00.033Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="2542" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>Фиксить надо именно стратегию для tcp/quic на домены дискорда</p>
</blockquote>
</aside>
<p>Именно. Так как при коннекте на голос он сначала стучится по tcp 443 на *.discord.media</p>
<p><a class="mention" href="/u/salat11">@salat11</a> Ахахха, ну и ладно )</p></td><td>2024-11-08T22:33:05.589Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>никто не хочешь пропустить … Блокчек или гуд через своего провайдера.<br>
Пытаются на готовом…Из-за этого я не вношу глубинные правки</p>
<p>Дискорд войс - подключение к определённому серверу по https, далее уже попытка свести клиентов между собой(аля P2P). При не удачах снова участвует сервер.(50000+ порт) Тогда хватаем либо задержки, либо неконнект</p></td><td>2024-11-08T22:33:59.037Z</td></tr><tr><td>Axolder</td><td><p>Я сегодня пропускал гудчек и пытался с GoodbyeDPI запуститься, пока стабильных результатов не добился, чтобы все работало параллельно.<br>
С твоей “просто” правкой без убирания лишнего вроде бы запускается, но надо проверять будет трансляцию на дропы.</p></td><td>2024-11-08T22:37:44.584Z</td></tr><tr><td>Axolder</td><td><p>то есть нечто подобное в лаунчере, но тут оно не работает? Просто с лаунчером нет проблем ни с дс, ни с ютюбом ни с сайтами. Странно.</p></td><td>2024-11-08T22:38:59.904Z</td></tr><tr><td>KDS</td><td><p>Конечно нет, там настройки из Быстро, а с ней проблем почти никогда нет.</p></td><td>2024-11-08T22:39:57.731Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Гуд годиться, когда что-то простое.<br>
Запрет годиться, когда уже все плохо</p>
<p>Запрет гибче, геморройнее.</p>
<aside class="quote no-group" data-username="KDS" data-post="2549" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Конечно нет, там настройки из Быстро, а с ней проблем почти никогда нет.</p>
</blockquote>
</aside>
<p>Быстро быстро быстро гогогого… <img src="https://ntc.party/images/emoji/twitter/smirk.png?v=12" title=":smirk:" class="emoji" alt=":smirk:" loading="lazy" width="20" height="20"></p></td><td>2024-11-08T22:40:43.238Z</td></tr><tr><td>Axolder</td><td><p>Ну я же не прошу что то сделать за меня, я просто спросил используется ли в launcher for zapret repeats,потому что до середины сентября не было никаких проблем. При запуске трансляции с ним качество потока сейчас стабильнее, поэтому и хотел интегрировать его настройки в роутер. После добавления repeats-15 в роутере начались проблемки.</p></td><td>2024-11-08T22:48:19.134Z</td></tr><tr><td>KDS</td><td><p>Используются, но уж точно не 15, максимум 10</p></td><td>2024-11-08T22:54:32.884Z</td></tr><tr><td>Axolder</td><td><p>Сейчас специально перебирал. До пертурбаций в сентябре было 6. Сейчас же с 6 до 13 не заводится совсем. Выше - да.</p></td><td>2024-11-08T22:56:59.702Z</td></tr><tr><td>KDS</td><td><p>Потому что дело не в репитах, а в стратегиях к ним прилагающихся. У меня есть стратегии вообще с 2 репитами и они отлично работают. Тупо задудосить коробку репитами - много ума не надо, только вот это не всегда работает )</p></td><td>2024-11-08T23:00:19.695Z</td></tr><tr><td>Axolder</td><td><p>Я понимаю, но выше вы писали стратегию, которая используется в лаунчере, почему тогда с ней не заводится? Не могли бы вы мне помочь разобраться, чтобы сделать оптимальней. Вы говорите много мусора, не спорю, но у меня хотя бы заводится все, что требуется, если вы посоветуете, что-либо для оптимизации, был бы благодарен.</p></td><td>2024-11-08T23:04:01.067Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>в винде winws лист указать можно относительным путём (в тойже папке)? или только полный да ещё и чтоб через /cygdrive/ ?</p></td><td>2024-11-08T23:14:57.775Z</td></tr><tr><td>KDS</td><td><p>Потому что в лаунчере не 1 статегия на все, как вы пытаетесь сделать. Для ютуба она своя, для сайтов своя, для дискорда тоже своя.</p></td><td>2024-11-08T23:30:35.086Z</td></tr><tr><td>Axolder</td><td><p>ну вот сейчас запустил с роутером соединение скачет (красное, желтое, зеленое), запустил с лаунчером (<a href="http://rtmps.youtube.com" rel="noopener nofollow ugc">rtmps.youtube.com</a> в моем блеклисте) соединение зеленое, может что то можно придумать чтобы соединить стратегию с конфигом? Там ведь тоже вроде бы можно отдельные стратегии делать. На роутере тоже <a href="http://rtmps.youtube.com" rel="noopener nofollow ugc">rtmps.youtube.com</a> есть в блеклисте.</p></td><td>2024-11-09T00:25:34.542Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я два месяца здесь подбирал для себя почти идеальную конфигурацию. У всех разные провайдеры и прочие условия. Никто за Вас идеальную конфигурацию не подберет.<br>
Я брал за основу пресет как шаблон автора Запрета или шаблон Ори - а дальше уже сам игрался со значениями. Блок/Гудчек для меня оказался бесполезным. Прогнал его много раз - он выдает одни и те же стратегии. Их можно скопировать в блокнот и подставлять в пресет. Затем открывать каждый раз браузер с заблокированными сайтами, и проверять, какие стратегии быстрее работают.<br>
Есть более-менее универсальная стратегия, о которой здесь уже писали: –dpi-desync=split --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10(или меняйте) --dpi-desync-ttl=подбирайте сами под своего провайдера.</p></td><td>2024-11-09T05:15:36.375Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2556" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>в винде winws лист указать можно относительным путём (в тойже папке)? или только полный да ещё и чтоб через /cygdrive/ ?</p>
</blockquote>
</aside>
<p>Если запуск идет обычным образом, то есть не через сервис или task, то можно. Иначе текущая директория будет другой, и файлы не найдутся.<br>
Есть 3 работающих нотации записи cygwin путей. см docs/windows.md</p></td><td>2024-11-09T06:03:48.980Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="2554" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Тупо задудосить коробку репитами - много ума не надо, только вот это не всегда работает )</p>
</blockquote>
</aside>
<p>Кроме того, сами по себе репиты не имеют никакого эффекта. Это приложение к фейкам. Нет фейков - нет репитов</p></td><td>2024-11-09T06:04:53.298Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Hentay" data-post="2546" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Дискорд войс - подключение к определённому серверу по https, далее уже попытка свести клиентов между собой(аля P2P). При не удачах снова участвует сервер.(50000+ порт) Тогда хватаем либо задержки, либо неконнект</p>
</blockquote>
</aside>
<p>А это проверенная информация ? Судя по имеющейся инфе там только через сервер все идет.<br>
Были реально замечены  в шарке p2p конекты ?</p></td><td>2024-11-09T06:07:05.019Z</td></tr><tr><td>KDS</td><td><p>Логично.</p>
<p>Это что за прикол, мы чего-то не знаем? <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>Или очередной васян переплюнул всех других васянов?<br>
<img src="zapret-обсуждение-726/82729650860a34a4606359e23eda13bc079c1ca8.png" alt="изображение" data-base62-sha1="iBZzwJ1pB4wu3lB1LQUKEnTnneg" width="217" height="190"></p>
<p>Такие чудеса в блэклистах как-нибудь обрабатываются вообще? <img src="https://ntc.party/images/emoji/twitter/laughing.png?v=12" title=":laughing:" class="emoji" alt=":laughing:" loading="lazy" width="20" height="20"></p></td><td>2024-11-09T06:33:30.610Z</td></tr><tr><td>bolvan</td><td><p>Обрабатываются, но работать не будет.<br>
Потому что ищутся только полные совпадения.<br>
Для vasya.discord.app ищутся vasya.discord.app, discord.app, app.<br>
Ничего этого нет в списке</p></td><td>2024-11-09T06:45:38.069Z</td></tr><tr><td>KDS</td><td><p>Может это целующий смайлик в конце? Он просто любит дискорд очень <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>Я так понимаю, что RegEx в блэклистах - это очень ресурсозатратно и поэтому никак?</p></td><td>2024-11-09T06:51:57.998Z</td></tr><tr><td>bolvan</td><td><p>Да, это ресурсозатратно.<br>
Сейчас там сделана хэш-таблица с быстрым поиском по ключу строки на равенство.<br>
Поэтому ему плевать на размер. Хоть 10, хоть 10 млн.<br>
regexp сам по себе тяжел, а если бы еще при каждом запросе проходились бы по 10 лямов записей, оно бы подвисало на секунды с 100% загруженным ядром</p></td><td>2024-11-09T06:55:56.241Z</td></tr><tr><td>KDS</td><td><p>Кстати, а в течении какого времени программа понимает, что один из загруженных блэклистов обновился и перезагружает его? По прикидкам - секунд 10, но может я ошибаюсь?</p></td><td>2024-11-09T06:57:47.653Z</td></tr><tr><td>bolvan</td><td><p>Там выполняется stat() на файл при каждой сверке листа. При изменении времени модификации идет перегрузка. Но время гранулировано до секунд. Если есть какие-то мгновенные множественные изменения, то последние может не схватить</p></td><td>2024-11-09T06:58:45.921Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Я сказал приблизительно…<br>
И это надо проверять у тех, у кого белый ип и потом уже те, кто за провайдерским NAT<br>
Просто не вижу смысла гнать все через свои сервера, поэтому там будет что-то подобии - соединим клиенты между собой</p></td><td>2024-11-09T07:22:47.727Z</td></tr><tr><td>bolvan</td><td><p>Так это же несложно проверить тем, у кого уже все стоит. Созвонился, глянул шарк куда удп прут</p></td><td>2024-11-09T07:26:32.489Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Нужна группа кроликов с шаркой<br>
Группа с белыми<br>
Группа с черными<br>
Ну и последний тест - черные с белыми…</p>
<p>PS тогда возможно и поймем что там дис начудил с войсом</p></td><td>2024-11-09T07:27:18.822Z</td></tr><tr><td>bolvan</td><td><p>Можно считать, что в современном мире белые уже занесены в красную книгу.<br>
Смотрел недавно ксиоми камеру и приложение. Там пунч холе через udp делается. Через сервер не прет</p></td><td>2024-11-09T07:28:49.181Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну все-же они есть… (белые ипы)</p>
<p>Понятно)</p></td><td>2024-11-09T07:30:39.460Z</td></tr><tr><td>electrifying</td><td><p>Давно хотел спросить, а если запрет развернут на флешке которая подключена к роутеру в порте usb 2.0 этого будет достаточно для стабильного функционирования запрета или его нужно ставить на высокопроизводительную флешку(типо Samsung BAR Plus) и использовать порт usb 3.0. Или скорость чтения/записи флешки на работу запрет не влияет ну там может замедляет ее как-то</p></td><td>2024-11-09T07:47:31.065Z</td></tr><tr><td>i-no(...)</td><td><p>Трудно себе представить зачем Запрету высокопроизводительный сторадж. Все работает на уже старых, медленных по современным меркам одноядерных рутерных процессорах с обычной DDR RAM. Сторадж только для хранения бинариков, конфигов, скриптов, хостлистов.</p>
<p>Разве только вы на рутере хотите захват всего трафика на очень широких каналах осуществлять для аналитики, но уже не посредством Запрета.</p>
<p>Проблема со стабильностью, на мой взгляд, может возникнуть в связи с тем, что внешняя флешка подключается посредством разъемного соединения, а не пайки к плате. Вот это соединение может сбойнуть. Хотя, если вся необходимая информация уже была загружена в RAM, то даже отвал внешней флешки, теоретически, это не катастрофа.</p></td><td>2024-11-09T07:51:55.672Z</td></tr><tr><td>bolvan</td><td><p>там записи в файлы - минимум. любой сторадж достаточного обьема подойдет.<br>
сколько себя помню, всегда openwrt был на флэшках, и все было супер</p></td><td>2024-11-09T08:00:24.971Z</td></tr><tr><td>LAMLAN</td><td><p>Привет, пользуюсь для ютуба zapret, качал еще 11.10.24. В последнее время ютуб стал плохо работать. Грузит не сразу, приходиться ждать. А бывает даже не прогружает. Может появилась какая-нибудь новая версия Zapret, которая работает еще лучше и стабильнее?</p></td><td>2024-11-09T09:32:27.359Z</td></tr><tr><td>bolvan</td><td><p>Дело не в версии, а в стратегиях. Таблеточно-однокнопочные варианты плохо работают. Без курения сути никакая версия не поможет</p></td><td>2024-11-09T09:34:24.799Z</td></tr><tr><td>LAMLAN</td><td><p>А есть инструкция для тупых, как подобрать свою стратегию?</p></td><td>2024-11-09T09:38:06.418Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>1 - собираешь свои любимые сайты в список<br>
2 - прогоняешь этот список через блокчек<br>
3 - получаешь выводы<br>
4 - думаешь или пробуешь применять вывод блокчека<br>
5 - профит</p>
<p>PS про листы умолчал. Их тоже нужно подготавливать самому и учитывать в стратегиях</p></td><td>2024-11-09T09:41:21.101Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>1 - 2 - 3 - 4 - 5 - профит</p>
</blockquote>
</aside>
<p>Еще не повредит выспаться, покушать, прогуляться и только потом приступать, морально подготовившись к тому, что придётся читать много текста и размышлять. Размышлять много не выспавшись и не покушав не получится.</p></td><td>2024-11-09T09:45:02.602Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>забыл о белом коне…<br>
Иногда природа вносит коррективы</p></td><td>2024-11-09T09:47:03.868Z</td></tr><tr><td>LAMLAN</td><td><p>Я как-то раз запускал блокчек, даже следовал инструкции которая была приложена,  но словил неизвестную ошибку, про которую никто не писал и не смог продолжить. Остался вариант пользоваться однокнопочными вариантами, но и их сейчас ломают. Это просто пздц</p></td><td>2024-11-09T09:47:15.667Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>если под винду, то запрет уже не один раз переписан за 2 недели. Баг могли поправить<br>
если блокчек не работает, то есть гудчек ещё…</p></td><td>2024-11-09T09:48:21.310Z</td></tr><tr><td>LAMLAN</td><td><p>А может и гудчек был, вместо блокчек, не помню, вроде первый. Есть последняя актуальная инструкция, скачивания гудчека/блокчека с последующим поиском стратегий и применения их?</p></td><td>2024-11-09T10:01:33.202Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Выше описал что нужно сделать.<br>
Ищешь - подставляешь - проверяешь.<br>
Иногда приходиться вносить правки в то, что предлагает</p></td><td>2024-11-09T10:08:48.098Z</td></tr><tr><td>abc555</td><td><p>Я так понимаю если запущенно 2 запрета, то работать нихрена не будет.<br>
Один пров походу запустил обход и включил ютуб, нарушил всю мою схему, пришлось временно отключить обход, так как пошел конкретный сбой, разбираться времени не было</p></td><td>2024-11-09T10:17:42.418Z</td></tr><tr><td>bolvan</td><td><p>В этом топе был выявлен случай, когда пров использовал старинную технику смены wsize, что обламывает pktws. Пришлось применять собственный контр-wsize, чтобы загасить действие прова. Но надо исследовать имеет ли место на самом деле дурение провом. Просто так абы какие таблетки хавать не рекомендую</p></td><td>2024-11-09T10:39:27.475Z</td></tr><tr><td>easyone11</td><td><aside class="onebox githubcommit" data-onebox-src="https://github.com/bol-van/zapret/commit/f0e68527ba794d161fbaa08f87faa01419ffa0e2">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/commit/f0e68527ba794d161fbaa08f87faa01419ffa0e2" target="_blank" rel="noopener">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/commit/f0e68527ba794d161fbaa08f87faa01419ffa0e2" target="_blank" rel="noopener">nfqws,tpws: snisld split</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2024-11-09" data-time="13:02:34" data-timezone="UTC">01:02PM - 09 Nov 24 UTC</span>
      </div>

      <div class="user">
        <a href="" rel="noopener">
          <img alt="" src="" class="onebox-avatar-inline" width="20" height="20">
          
        </a>
      </div>

      <div class="lines" title="changed 7 files with 131 additions and 48 deletions">
        <a href="https://github.com/bol-van/zapret/commit/f0e68527ba794d161fbaa08f87faa01419ffa0e2" target="_blank" rel="noopener">
          <span class="added">+131</span>
          <span class="removed">-48</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
нас ждёт дополнительный вид\подвид дурения?</p></td><td>2024-11-09T14:03:27.969Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>о хоспади…<br>
Ещё плотнее изучать запрет <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"> всем неумехам</p></td><td>2024-11-09T14:06:20.853Z</td></tr><tr><td>easyone11</td><td><p>для тупеньких как я в блокчек просто добавятся новые строчки)) если конечно я прав про новый тип</p></td><td>2024-11-09T14:11:14.172Z</td></tr><tr><td>electrifying</td><td><p>Каким образом можно выцепить адрес аватарок на ютубе в мобильном приложении youtube revanced, charles упорно не хочет показывать адрес. Хотя в настройках есть режим для обхода блокировок который пускает аватарки на <a href="http://yt4.ggpht.com" rel="noopener nofollow ugc">yt4.ggpht.com</a>. А основной домен-то как узнать? Если я wireshark на комп поставлю, я смогу посмотреть запросы с телефона которые идут в вайфай сети?</p></td><td>2024-11-09T14:18:37.235Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="electrifying" data-post="2574" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Давно хотел спросить, а если запрет развернут на флешке которая подключена к роутеру в порте usb 2.0 этого будет достаточно для стабильного функционирования запрета</p>
</blockquote>
</aside>
<p>Нормально все работает. У меня так на mr3020 (подключен к основному роутеру) работает. Флешку маленькую (по размеру) подключаешь, трафик с устройств через него пускаешь - и все работает. Ютуб точно можно смотреть.</p></td><td>2024-11-09T14:22:13.262Z</td></tr><tr><td>Ori</td><td><blockquote>
<p>snisld</p>
</blockquote>
<p>Насколько я понял, это новая позиция для резалки. Режет в середине домена второго уровня?</p></td><td>2024-11-09T14:23:47.544Z</td></tr><tr><td>bolvan</td><td><p>Будет мультисплит и мультидисордер<br>
Можно будет мощно нашинковать запрос или хостнейм.</p>
<p>Как я понял, некие DPI повадились  банить, если вдруг проскочит пакет 16 03, а потом в нескольких следующих где угодно ‘<a href="http://googlevideo.com">googlevideo.com</a>’. Очевидно, это борьба с дурилкой, но борьба имеющимися мощностями. Для полной реконструкции мощи не хватает</p></td><td>2024-11-09T15:11:06.770Z</td></tr><tr><td>bolvan</td><td><p>Это только часть задумки. Будет больше</p></td><td>2024-11-09T15:11:29.730Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>не расстраивай всех…<br>
не пугай<br>
а то щас набегут с вопросами как это будет работать</p></td><td>2024-11-09T15:13:08.423Z</td></tr><tr><td>bolvan</td><td><p>А примерно как в байDPI, только чуть попроще</p>
<p>–dpi-desync=multisplit|multidisorder --dpi-desync-split-pos=1,hs+1,he-3,he-4,he-5,he-6,he-7,-100<br>
hs - маркер начала хоста, he - маркер конца хоста, значения без маркера берут начало пакета и конец пакета как отправную точку</p></td><td>2024-11-09T15:15:30.978Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Интересно, что будет, когда они накупят новое оборудование на миллиарды к 2030 году… Я так понимаю, есть риск, что многие нынешние стратегии Запрета перестанут работать. Нужна футуро-аналитика по предсказанию действий припадочных из РКН )))</p></td><td>2024-11-09T15:16:10.366Z</td></tr><tr><td>oniksofers(Oniksofers)</td><td><blockquote>
<p>накупят новое оборудование на миллиарды к 2030 году</p>
</blockquote>
<p>Мы всё таки в РФ живем, так что от этих миллиардов на откаты и прочие приколы откусят порядочный кусок.</p></td><td>2024-11-09T15:17:31.031Z</td></tr><tr><td>bolvan</td><td><p>Однажды мы достигнем пределов возможностей по дурению DPI.<br>
Их могут сделать очень крутыми, распознающими все.<br>
А могут пойти более простым путем. Банить все нестандартное, банить IP. В мире идут по второму варику в основном. Иногда к этому еще добавляют админ ресурс.<br>
Или может стать нам банально не до интернета всилу offline причин</p></td><td>2024-11-09T15:18:11.318Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Вычислять по IP<br>
Сажать на месяц для разборок<br>
Награждать штрафами…</p></td><td>2024-11-09T15:19:19.055Z</td></tr><tr><td>easyone11</td><td><ol>
<li>Mitmproxy ставите на комп\ноут, прописываете эту проксю на телефоне.</li>
<li>Какой нибудь анализаотр трафика на роутере</li>
<li>Дебагером на запрете<br>
Думаю какой нибудь из этих способов покажет куда вы ломитесь, а там уже методом исключения и логикой.<br>
Может быть есть и лучше варинаты хз</li>
</ol></td><td>2024-11-09T15:21:45.463Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Значит, пойдут по второму варианту (он дешевле). Президент на Валдае на днях сказал, что должен быть “суверенный интернет”. Цензура однозначно будет нарастать. Вольница никому не нужна и крайне не выгодна - ни правящему классу, ни тем более бизнесменам-копирастам.</p></td><td>2024-11-09T15:21:50.630Z</td></tr><tr><td>bolvan</td><td><p>Ага, и поэтому халявщики все равно отвалятся. Не по одной причине, так по другой.<br>
Поэтому я и не спешу их радовать.<br>
У многих это все равно не будет бесплатно и просто</p></td><td>2024-11-09T15:23:04.708Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Курс обучение дурение ТСПУ  за  …</p>
<p>Будет обьявления везде )</p></td><td>2024-11-09T15:23:52.452Z</td></tr><tr><td>bolvan</td><td><p>Я бы советовал всем изучать  методы скрытого проксирования, запасаться биткоином, покупать VPS.<br>
Пока не отключат забугор или не сделают белые списки, это может быть наилучшим решением в жесткой обстановке</p></td><td>2024-11-09T15:25:07.506Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Для скрытого проксирования, нужно что бы прокси использовалась как можно меньше  (делать паразитный трафик, для маскировки + обычный)</p>
<p>VPS - сами могут отрубить по гео нас всех<br>
Биток или электронная валюта - с ней есть проблемы усложнения её получения.  У тех у кого электро на халяву имеется, могут так играть</p></td><td>2024-11-09T15:26:48.626Z</td></tr><tr><td>bolvan</td><td><p>да, верно, весь трафик на один IP - признак VPN.<br>
потому надо выборочно проксировать</p></td><td>2024-11-09T15:28:03.258Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Выборочное туннелирование. (несколько проксей и трафик в разные стороны)<br>
Так правильнее, что бы не придрались</p>
<p>Траты на свободу ,пока не достигнут нецелесообразности трат, будут использоваться. Но большинство уже на этом этапе отвалятся</p></td><td>2024-11-09T15:28:37.645Z</td></tr><tr><td>irregular-circle</td><td><p>Вот еще подумал, что TCP Fast Retransmission может помешать такому нарезанию client hello на части и отправке в произвольном порядке. Например сервер получит много кусков с конца client hello, отправит несколько duplicate acknowledgement и ядро кинет в запрет кусок client hello от нуля и до начала отправленного куска с наименьшим номером последовательности, что вообще не нужно. Или я чего-то не понимаю?</p></td><td>2024-11-09T15:29:53.385Z</td></tr><tr><td>bolvan</td><td><p>У nfqws этих проблем точно не будет. Он эту колбасную нарезку выплюнет залпом</p></td><td>2024-11-09T15:31:28.212Z</td></tr><tr><td>i-no(...)</td><td><p><a href="https://github.com/emanuele-f/PCAPdroid" rel="noopener nofollow ugc">PCAPdroid</a> может подойти.</p>
<blockquote>
<p>PCAPdroid simulates a VPN in order to capture the network traffic <strong>without root</strong>. It does not use a remote VPN server, instead data is processed locally on the device.</p>
</blockquote></td><td>2024-11-09T16:11:15.430Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2599" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>припадочных из РКН )))</p>
</blockquote>
</aside>
<p>Да ладно вам) Пока видно, что они особо и не хотят жестить. Можно только пытаться реконструировать их целеполагание. Похоже, что задачу вменили снизить массовость именно YT до некоего уровня. Тут недавно же образовался некий <a href="https://transparencyreport.google.com/traffic/overview?hl=en&amp;fraction_traffic=start:1721260800000;end:1731110399999;product:21;region:RU" rel="noopener nofollow ugc">повышательный тренд</a>, вот его решили сбить маленько, чтобы в целевые показатели уложиться.</p>
<p>Кстати, а где можно было бы понагляднее посмотреть этот же трафик, но из независимого источника?</p></td><td>2024-11-09T16:20:34.387Z</td></tr><tr><td>KDS</td><td><p>Внезапно вопрос возник… Какие типы фейков работают с any-protocol? Все или какие-то определенные, типа quic, unknown и unknown-udp и т.п.<br>
Спасибо.</p></td><td>2024-11-09T16:27:30.286Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> не получается чекнуть такой домен gv:</p>
<pre><code class="lang-auto">* port block tests ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com:443
ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com does not resolve

* curl_test_https_tls12 ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com
- checking without DPI bypass
could not parse DNS reply blob
UNAVAILABLE code=6

* curl_test_https_tls13 ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com
- checking without DPI bypass
could not parse DNS reply blob
UNAVAILABLE code=6

* curl_test_http3 ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com
- checking without DPI bypass
could not parse DNS reply blob
UNAVAILABLE code=6

* SUMMARY
ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com curl_test_https_tls12 : test aborted, no reason to continue. curl code 6: could not resolve host
ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com curl_test_https_tls13 : test aborted, no reason to continue. curl code 6: could not resolve host
ipv4 rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com curl_test_http3 : test aborted, no reason to continue. curl code 6: could not resolve host
</code></pre>
<p>Так он ресолвится даже провайдерским dns:</p>
<pre data-code-wrap="cmd"><code class="lang-cmd">Non-authoritative answer:
Name:    rr5.sn-ug5onuxaxjvh-n8vz.googlevideo.com
Addresses:  2a00:1e48:99:16::10
          188.43.61.80
Aliases:  rr5---sn-ug5onuxaxjvh-n8vz.googlevideo.com
</code></pre></td><td>2024-11-09T18:33:40.047Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>А точно ли с него идет видео ?<br>
Просто при просмотре ещё обманки попадаются, которые гетом отвечают.<br>
И точно ли все обходы и обманы отключены?</p>
<p>Внимательнее отлови свой видео сервер</p></td><td>2024-11-09T18:35:47.402Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>В DevTools-&gt;Network обращения к такого вида доменам.</p></td><td>2024-11-09T18:39:40.789Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>да…<br>
Все правильно. Отлавливаешь один живой и его щупаешь по udp</p></td><td>2024-11-09T18:42:38.535Z</td></tr><tr><td>bolvan</td><td><p>Проблема в mdig для винды. В *nix нет проблемы. Будет фикс в следующем релизе.<br>
В bundle скоро залью исправленный бинарик</p></td><td>2024-11-09T19:58:32.466Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Благодарю, в свежем bundle все ок.</p></td><td>2024-11-10T03:15:49.706Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет!<br>
Как в OpenWrt можно сделать команду, чтобы запрет перезапускался раз в день или неделю и т.д. ?</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/9c5a997534c4b342af4580543e365a67be62be2c.jpeg" data-download-href="https://ntc.party/uploads/default/9c5a997534c4b342af4580543e365a67be62be2c" title="перезапуск"><img src="zapret-обсуждение-726/9c5a997534c4b342af4580543e365a67be62be2c_2_690x441.jpeg" alt="перезапуск" data-base62-sha1="mjaAOAmTjrXxvIOIOElI5eVik9K" width="690" height="441" srcset="zapret-обсуждение-726/9c5a997534c4b342af4580543e365a67be62be2c_2_690x441.jpeg, zapret-обсуждение-726/9c5a997534c4b342af4580543e365a67be62be2c.jpeg 1.5x, zapret-обсуждение-726/9c5a997534c4b342af4580543e365a67be62be2c.jpeg 2x" data-dominant-color="F2F3F4"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">перезапуск</span><span class="informations">860×550 75.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</div></td><td>2024-11-10T07:55:23.827Z</td></tr><tr><td>easyone11</td><td><p>кроном, например каждую ночь в 01 00<br>
0 1 * * * /etc/init.d/zapret restart</p></td><td>2024-11-10T08:03:19.507Z</td></tr><tr><td>bolvan</td><td><p>Если надо бить молотком каждый день, значит что-то не так.<br>
Память вроде не течет</p></td><td>2024-11-10T08:21:04.507Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Какие монструозные вещи люди мастерят на основе Запрета:<br>
Вот <a href="https://www.youtube.com/watch?v=DSxcS5bSNh0" rel="noopener nofollow ugc">тут</a>, например.</p></td><td>2024-11-10T08:37:05.729Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>И такие чудеса рекомендую кидать ссылкой</p>
<p>Но не зная ситуации, говорить об устранение проблемы весело и забавно. Хомячки скушают и потом будут поливать говном в случае облома (минимум). А при плохом сценарии будут плакать, что кошелек, пароли и много ещё потеряли</p>
<p>PS листы представляют только интерес. Больше ничего<br>
PS2 А так это комбайн неизвестно чего и с какими подарками</p></td><td>2024-11-10T08:39:58.020Z</td></tr><tr><td>anon9001(anon)</td><td><details>
<summary>
.</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/d13390cafcb3c2acafbb9827bfcb7ba30de2334e.png" data-download-href="https://ntc.party/uploads/default/d13390cafcb3c2acafbb9827bfcb7ba30de2334e" title="out"><img src="zapret-обсуждение-726/d13390cafcb3c2acafbb9827bfcb7ba30de2334e_2_235x500.png" alt="out" data-base62-sha1="tQGgKhYfuHkz7cz0Jtp2g55gaNo" width="235" height="500" srcset="zapret-обсуждение-726/d13390cafcb3c2acafbb9827bfcb7ba30de2334e_2_235x500.png, zapret-обсуждение-726/d13390cafcb3c2acafbb9827bfcb7ba30de2334e.png 1.5x, zapret-обсуждение-726/d13390cafcb3c2acafbb9827bfcb7ba30de2334e.png 2x" data-dominant-color="F1F2F2"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">out</span><span class="informations">238×505 91.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>Прям ужос какой-то, у меня так помню ffmpeg скрипты пилились, но вся соль запрета в том что он же в идеале демонизируется и работает автономно, а не батниками…</p></td><td>2024-11-10T08:56:44.480Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я не сразу даже понял, что это Запрет, пока не увидел привычную консоль. Кошмар.</p></td><td>2024-11-10T08:58:37.501Z</td></tr><tr><td>bolvan</td><td><p>Этот материал преподнесен для тех, кто в лучшем случае может кликнуть по батнику.</p></td><td>2024-11-10T09:06:27.790Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>У меня ни один браузер так и не дал порезвиться с данным набором<br>
Малвар и иди кури ты<br>
Сайт сам переполнен рекламой и навязчивой просьбой вырубить</p></td><td>2024-11-10T09:10:13.345Z</td></tr><tr><td>KDS</td><td><p>Внутрь лучше не смотреть - там все ужасно )</p>
<p>Самый полезный там - Распакуй, потом запускай!!! <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"></p></td><td>2024-11-10T09:11:15.228Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Списки к слову сделаны тупым копированием имени домена и… В глубину по небалуйся</p></td><td>2024-11-10T09:12:04.542Z</td></tr><tr><td>i-no(...)</td><td><p>А зачем вы бесплатно рекламируете каких-то деятелей, которые заботятся о сохранении своей клиентской базы?</p></td><td>2024-11-10T09:12:19.946Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Проверка на вшивость…<br>
Но там все вшиво</p>
<p>Я только о себе</p></td><td>2024-11-10T09:13:31.713Z</td></tr><tr><td>i-no(...)</td><td><p>А зачем вы так не уважаете самих себя? Это от чувства вины что ли? Просто игнорируйте этих деятелей. Они вымрут как класс без вашей помощи.</p></td><td>2024-11-10T09:14:58.259Z</td></tr><tr><td>KDS</td><td><p>Автор сего поделия - ютубер с чем то там около ляма подписчиков, его и без нас есть кому рекламить ))</p></td><td>2024-11-10T09:15:26.136Z</td></tr><tr><td>Hentay(Hentay)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Я нашел откуда пошел этот ужас</p>
<p><code>--filter-udp=50000-65535</code></p></td><td>2024-11-10T09:15:57.870Z</td></tr><tr><td>uwu(uwu)</td><td><p>это был первый день блокировки дискорда,  ̶м̶ы̶ ̶р̶а̶з̶в̶л̶е̶к̶а̶л̶и̶с̶ь̶ ̶к̶а̶к̶ ̶м̶о̶г̶л̶и̶, кто ж  знал, что тестовая версия вообще не предназначенная для каких либо рекомендаций пойдет в народ.<br>
я хз даже как в следующий раз что то писать тут на форуме , видимо нужно сразу ставить пометку /test</p></td><td>2024-11-10T09:18:30.075Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Ну Флостер к себе это утянул…<br>
А дальше народ и те, кто на хайпе, сели на коней апокалипсиса</p></td><td>2024-11-10T09:19:18.516Z</td></tr><tr><td>fateev1000</td><td><p>Здравствуйте.<br>
Подскажите из-за чего может не создаваться service, task с помощью батников?<br>
Раньше все работало и создавалась, обновил на днях версию запрета и престало создавать…<br>
Думал проблема в системе, но у меня так на двух компах… Тупо не создает… Попробовал для эксперимента создать сервис в GoodbyeDPI, там создалось без проблем.<br>
Удалил полностью и перекачал заново zapret, не меняя настроек, просто запускаю от имени админа батник service_create и ничего не создается, даже ошибок никаких нет…<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/876e7b6db103bedc8323a6f865f03aa0da6bb085.png" data-download-href="https://ntc.party/uploads/default/876e7b6db103bedc8323a6f865f03aa0da6bb085" title="Screenshot_2"><img src="zapret-обсуждение-726/876e7b6db103bedc8323a6f865f03aa0da6bb085.png" alt="Screenshot_2" data-base62-sha1="jk5afPEUaYKqsJJv9edlXTAkeGx" width="690" height="276" data-dominant-color="181818"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot_2</span><span class="informations">1509×604 20.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-11-10T09:25:36.631Z</td></tr><tr><td>Hentay(Hentay)</td><td><p>Попался на шутку от <a class="mention" href="/u/bolvan">@bolvan</a><br>
Если внимательно присмотреться, то можно увидеть одну переменную, которую нужно убрать</p>
<p>На сколько помню, там в риде написано, что нужно файл “поправить”</p></td><td>2024-11-10T09:26:57.064Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Тут нет злонамеренности, просто все эти блогеры с Ютуба не заходят сюда к автору Запрета. Один популярный скопировал папку с обходом - и все остальные тупо копируют. Нет бы зайти сюда и спросить у автора, как лучше сделать сборку для массового потребителя, так сказать, они начинают без рефлексии распространять.<br>
И понятно, зачем, чтобы не потерять на Ютубе подписчиков. В основном все эти монструозные решения исходят от прости Господи геймеров и стримеров Ютуба.</p></td><td>2024-11-10T09:31:33.145Z</td></tr><tr><td>fateev1000</td><td><aside class="quote no-group" data-username="Hentay" data-post="2644" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Попался на шутку от <a class="mention" href="/u/bolvan">@bolvan</a></p>
</blockquote>
</aside>
<p>Шутку добавили в последней версии? Раньше все было ок.</p></td><td>2024-11-10T09:31:54.918Z</td></tr><tr><td>bolvan</td><td><p>Это было сделано после нескольких иссуе от подростков-гамеров с вопросами “у меня дота не запускается памажите снести !!!”. Защита от дураков. Если тебе нужна служба , тебе придется редактировать параметры, а если ты даже на это способен, то с rem разберешься. А нет, так тебе служба точно не нужна</p></td><td>2024-11-10T09:33:59.630Z</td></tr><tr><td>fateev1000</td><td><aside class="quote no-group" data-username="Hentay" data-post="2648" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/hentay/48/12172_2.png" class="avatar"> Hentay:</div>
<blockquote>
<p>Где-то как несколько недель данная шутка лежит. Что бы все читали сначала, а потом делали</p>
</blockquote>
</aside>
<p>Все ясно, сравнил со старым конфигом. Рофл в начале rem. Спасибо за наводку, а то я начал грешить на систему. Уже перекопал все. Раньше просто рофлов не было и я по старинке скопировал свой конфиг в новый батник…</p></td><td>2024-11-10T09:40:32.132Z</td></tr><tr><td>i-no(...)</td><td><p><strong>Любой</strong> батник перед запуском должен рефлекторно открываться на просмотр и проверяться. Небесполезно было бы и дефолтное действие в эксплорере (проводнике) сменить на просмотр. Хотя, тут будет ломка, но это пройдет. Кроме этого, наличие rem в батнике из первоисточника уже заслуживает внимания <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-10T09:46:23.955Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2645" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>от прости Господи геймеров и стримеров Ютуба</p>
</blockquote>
</aside>
<p>А разблокировка стриминга ютуба есть только в Быстро <img src="https://ntc.party/images/emoji/twitter/joy.png?v=12" title=":joy:" class="emoji" alt=":joy:" loading="lazy" width="20" height="20"> И где тут логика, спрашивается?</p></td><td>2024-11-10T09:48:10.875Z</td></tr><tr><td>abc555</td><td><p>Подскажите, параметр dpi-desync-ttl указывает конкретный ttl тпсу, то есть вся стратегия основанная на desync будет срабатывать только для конкретного ttl который я укажу, а на все остальные хосты влиять никак не будет, я правильно понял ?</p></td><td>2024-11-10T09:52:50.798Z</td></tr><tr><td>KDS</td><td><p>Этот параметр указывает TTL фейкового пакета, а уж будет там ТСПУ или нет - это никому неизвестно )<br>
Цель - чтобы фейковый пакет гарантированно прошел ТСПУ, но не попал на сервер.</p></td><td>2024-11-10T10:51:39.645Z</td></tr><tr><td>abc555</td><td><p>Ну то есть дальше он не идёт указанного ttl, я правильно понял ?<br>
То есть не ближе, не дальше, а чётко по указанному ttl, всё что меня интересует.<br>
Я заметил что так оно и есть, просто хотел уточнить на всякий случай, мало ли, не так понял</p></td><td>2024-11-10T10:56:30.728Z</td></tr><tr><td>KDS</td><td><p>Ближе идет, дальше - нет.</p></td><td>2024-11-10T11:01:24.719Z</td></tr><tr><td>abc555</td><td><p>То есть на коротких дистанциях он всё ровно продолжает работать, ttl это просто конечная точка ?</p></td><td>2024-11-10T11:02:39.859Z</td></tr><tr><td>KDS</td><td><p>Да погуглите что такое TTL - это время жизни пакета. Естественно, если он “умер”, то все, его нет, это конечная точка.<br>
И это не точка, это сколько прыжков (хопов) через промежуточные маршрутизаторы пройдет пакет, пока не помрет.</p></td><td>2024-11-10T11:03:56.234Z</td></tr><tr><td>abc555</td><td><p>Не ну я думал может оно конкретно выстреливает по цели, а то просто конечная точка на которой всё закончится, а дальше как обычно.<br>
Я знаю что такое ttl и как оно работает, а как некоторые параметры, знает только создатель, поэтому и спрашиваю</p></td><td>2024-11-10T11:05:54.469Z</td></tr><tr><td>bolvan</td><td><p>TTL или HL зашиты в структуру ip/ipv6 header<br>
Роутеры тупые. Они перебрасывают пакеты на уровне L3, не разбираясь что там дальше. И ничего не знают о содержимом выше L3. И они уменьшают на 1 поле TTL/HL в L3 заголовке.<br>
Если после уменьшения оно становится 0, пакет дальше никуда не идет, а отправителю опционально высылается icmp</p></td><td>2024-11-10T11:07:46.137Z</td></tr><tr><td>KDS</td><td><p>Если вы знаете, на каком хопе у вас ТСПУ стоит - “стреляйте по цели”, указав TTL до этого хопа. Только вот обычно никто не знает, на каком хопе у них ТСПУ и нет ли за ним еще парочки, уже магистральных.</p></td><td>2024-11-10T11:09:44.220Z</td></tr><tr><td>abc555</td><td><p>В общем ограничитель параметр dpi-desync-ttl, чтоб не ломал дальше всё на своём пути.<br>
А то некоторые жалуются, типа у них там что то не работает, а я проверить не могу что там у них, скорей всего просто ломало что то на их пути дальше, поэтому указал ttl и пока ещё не знаю, на одном из прова я визуально это заметил на компе, тот ушлёпок который включил ютуб, до его включения у меня он лучше работал, а с час притормаживает, спрашивается, вот нафига было его включать, не умеешь, не трогай, не, включил )</p></td><td>2024-11-10T11:12:24.964Z</td></tr><tr><td>bolvan</td><td><p>Дальше там сломать можно только сервер назначения. Всем остальным на эту ломалку глубоко наплевать. Потому важно, чтобы до сервера не дошло</p></td><td>2024-11-10T11:13:08.961Z</td></tr><tr><td>abc555</td><td><p>Понял, спасибо. Как говорится опыт приходит с годами )</p></td><td>2024-11-10T11:14:11.899Z</td></tr><tr><td>Davd(Davd)</td><td><p>Здравствуйте. Скачал zapret-win-bundle с гитхаба. Там в батнике preset_russia заменил все фильтры на один, который мне выдал GoodCheck после перебора — большая часть заблокированных сайтов заработало. После попытки улучшения батника всплыло несколько проблем:<br>
1). Фильтр без --hostlist способствует открытию заблокированных сайтов. Указываю --hostlist=“%~dp0autohostlist.txt” — не открывает сайты ни в какую. Может, имеет значение, что в этот файл я вставил 60000 с лишним сайтов из списка goodbyedpi?<br>
2). Не работает модернизированный батник: <a href="https://pastebin.com/yV1BWPHW" class="inline-onebox" rel="noopener nofollow ugc">Пример батника - Pastebin.com</a>. Туда я добавил несколько правил обработок, каждое из которых позволяет достучаться до различных гугловских серверов. Что здесь нужно исправить? Документацию здесь <a href="https://github.com/bol-van/zapret/blob/master/docs/windows.md" class="inline-onebox" rel="noopener nofollow ugc">zapret/docs/windows.md at master · bol-van/zapret · GitHub</a> читал, но не нашёл нужной информации.</p></td><td>2024-11-10T11:18:26.717Z</td></tr><tr><td>KDS</td><td><p>Синдата не работает с хостлистами, потому что на этом этапе хост еще неизвестен. Только с ipset-ами.</p>
<p>На Ютубе нет 80-х портов.</p></td><td>2024-11-10T11:23:16.510Z</td></tr><tr><td>i-no(...)</td><td><p>Скажите пожалуйста, зачем вам шестьдесят тысяч сайтов? Даже если по 5 секунд на каждый потратить, то в режиме нон-стоп на просмотр их всех уйдет более трёх суток. Это, вероятнее всего, приведет к нервному истощению и госпитализации.</p>
<p>А если серьезно, то просто используйте оригинальный конфиг и добавьте в хостлист, скажем, myhostlist.txt дюжину реально нужных вам доменов и подключите его ключом --hostlist и всё. В принципе, можно использовать Запрет и без хостлиста тоже. Да, и вместо синдаты, конечно же, надо использовать <code>--dpi-desync-fake-tls</code> Или можно попробовать вообще без него, т.к. куски ютуба могут работать и с обычным генератором фейков, как выяснилось.</p></td><td>2024-11-10T11:32:28.612Z</td></tr><tr><td>abc555</td><td><p>Так бы жил бы себе Davd, к примеру он художник, а тут приходится вникать в параметры, так глядишь, не корабли рисовать будет, а параметры на картинах ))</p></td><td>2024-11-10T11:33:03.717Z</td></tr><tr><td>Davd(Davd)</td><td><p>Если из фильтров я уберу все хостлисты, то по какому приоритету будут применяться фильтры?<br>
А насчёт 80-ых портов… Получение адресов гугл-серверов же относится к ним? <a href="https://imgur.com/bHIsG0y" rel="noopener nofollow ugc">Скрин</a></p></td><td>2024-11-10T11:45:32.911Z</td></tr><tr><td>Davd(Davd)</td><td><p>Я на goodbyedpi сидел, на нём был обновляемый список хостов. Просто перекинул и думал, что так и будет работать.<br>
Фильтры из оригинального конфига не открывают ни ютуб, ни прочие заблокированные сайты. Для себя нужные фильтры нашёл. И как понял, их можно применить, вставив IP-адреса гугл серверов вместо доменных имён.</p></td><td>2024-11-10T11:49:21.128Z</td></tr><tr><td>Davd(Davd)</td><td><p>Да мне норм.</p></td><td>2024-11-10T11:50:21.953Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Davd" data-post="2665" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ebca7d/48.png" class="avatar"> Davd:</div>
<blockquote>
<p>Не работает модернизированный батник</p>
</blockquote>
</aside>
<p>тут все кроме конфига для дискорда - не рабочее<br>
это вам goodcheck посоветовал в каждый фильтр синдату запихнуть? можно лог проверки?</p></td><td>2024-11-10T11:56:29.670Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Davd" data-post="2670" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ebca7d/48.png" class="avatar"> Davd:</div>
<blockquote>
<p>Для себя нужные фильтры нашёл.</p>
</blockquote>
</aside>
<p>Что ж, это главное в реальности. Если syndata вскрывает вам доступ, то хостлисты вам не нужны.</p>
<blockquote>
<p>КОМБИНИРОВАНИЕ МЕТОДОВ ДЕСИНХРОНИЗАЦИИ</p>
<p>В параметре dpi-desync можно указать до 3 режимов через запятую. 0 фаза предполагает работу на этапе установления соединения. Может быть <code>synack</code> или <code>syndata</code>. <em>На 0 фазу не действует фильтр по hostlist.</em> Последующие режимы отрабатывают на пакетах с данными. Режим 1-й фазы может быть <code>fake</code>, <code>rst</code>, <code>rstack</code>. Режим 2-й фазы может быть <code>disorder</code>, <code>disorder2</code>, <code>split</code>, <code>split2</code>, <code>ipfrag2</code>. Может быть полезно, когда у провайдера стоит не один DPI.</p>
</blockquote>
<p>Выдержка из <a href="https://github.com/bol-van/zapret/blob/master/docs/readme.md" rel="noopener nofollow ugc">readme</a>.</p></td><td>2024-11-10T12:06:30.053Z</td></tr><tr><td>Davd(Davd)</td><td><p>В общем-то да. Кроме дискорда и предпоследнего фильтра, syndata отображался в вариантах фильтров с наибольшим числом откликов с сайтов. Делал раздельную проверку на ютуб и сайты вроде рутрекера и везде слегка различающиеся результаты.<br>
Прикрепил.<br>
<a class="attachment" href="zapret-обсуждение-726/gQEHjy2DZQmZpgiR9FYcnDvWEXi.txt">Log_GoodCheck_10-11-2024_12-45-16.txt</a> (2.1 MB)</p></td><td>2024-11-10T12:11:59.322Z</td></tr><tr><td>Davd(Davd)</td><td><aside class="quote no-group" data-username="i-no" data-post="2673" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Что ж, это главное в реальности. Если syndata вскрывает вам доступ, то хостлисты вам не нужны.</p>
</blockquote>
</aside>
<p>С syndata что-то не так?</p></td><td>2024-11-10T12:13:49.780Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Davd" data-post="2675" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ebca7d/48.png" class="avatar"> Davd:</div>
<blockquote>
<p>С syndata что-то не так?</p>
</blockquote>
</aside>
<p>Скорее наоборот. Специально только что перепроверил, и только <code>syndata</code> вскрыла мне вот прямо сейчас googlevideo по tcp и <strong>воспроизводится видео</strong>. Что хорошо. По udp googlevideo работал и так, ну а теперь можно использовать сторонние плееры, и прочие устройства, которые не работают по udp/quic.</p>
<p>Дополнительной нагрузки на CPU рутера не обнаружено. Скорость скачивания видео с помощью <code>yt-dlp</code> упирается в канальную (в моём случае ~ 11 MB/s)</p>
<p>Единственное, что “не так” это то, что <code>syndata</code> не ограничивается хостлистами. Придется формировать отдельный список айпи для GGC, чтобы только по нему она применялась.</p></td><td>2024-11-10T12:18:46.389Z</td></tr><tr><td>uwu(uwu)</td><td><p>у вас есть свои локальные сервера ggc, судя по чеку<br>
поэтому в чеклист нужно добавить только<code> youtube.com</code> , а местный ggc он подтянет автоматически<br>
и выбрать проверку tcp без syndata и wssize</p>
<p>в данном случае то что у вас, выглядит как оверкилл и забивание гвоздей лопатой</p></td><td>2024-11-10T12:22:00.592Z</td></tr><tr><td>Davd(Davd)</td><td><p>Рано я обрадовался. С syndata и без него, на ютубе максимум превью видео загружается, картинка. А самого видео нет.<br>
Отдельно ютуб в хостлист тоже попробовал добавить.</p></td><td>2024-11-10T12:39:06.590Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Davd" data-post="2678" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ebca7d/48.png" class="avatar"> Davd:</div>
<blockquote>
<p>Отдельно ютуб в хостлист тоже попробовал добавить.</p>
</blockquote>
</aside>
<p>я пишу про чеклист для goodcheck, а не хостлист</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> очередной глупый вопрос назрел:<br>
в хост лист.txt рядом с доменом можно вставлять комментарий?<br>
например:<br>
сайт.ком /комментарий<br>
сайт2.ком /комментарий2<br>
практически, насколько я вижу, это работает. я больше к тому, не мешает ли это работе запрета?</p></td><td>2024-11-10T12:41:07.854Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Бол-ван здравствуйте ещё раз спасибо вам за вашу программу все работает. Но у меня вопрос по Блокчеку планируется ли его модернизация? потому что конфиги он ищет мягко говоря не очень. Находит конфиг, а он оказывается нерабочим.</p></td><td>2024-11-10T13:57:18.726Z</td></tr><tr><td>zzzombie1989(zzzombie1989)</td><td><p>Судя по вашим:<br>
<code>--filter-udp=50000-65535</code><br>
Вам бы для начала документацию zapret’а изучить. Нет смысла допиливать функционал какой-то штуки, если её работоспособность ограничивается способностями пользователя.</p></td><td>2024-11-10T14:02:45.848Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Можно по подробнее что я не так делаю?</p></td><td>2024-11-10T14:04:02.763Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
в ридми</p>
<ol>
<li>не вижу пример с fake для блокчека, например  PKTWS_EXTRA=“–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”</li>
<li>и мне кажется красивей было бы<br>
Blockcheck имеет 3 уровня сканирования:<br>
<code>quick</code>  максимально быстро найти хоть что-то работающее.<br>
<code>standard</code> дает возможность провести исследование как и на что реагирует DPI в плане методов обхода.<br>
<code>force</code> дает максимум проверок даже в случаях, когда ресурс работает без обхода или с более простыми стратегиями.</li>
</ol>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/08487f24b8de1a8d553f2034ba65d0dcc72bb8e4.png" data-download-href="https://ntc.party/uploads/default/08487f24b8de1a8d553f2034ba65d0dcc72bb8e4" title=""><img src="zapret-обсуждение-726/08487f24b8de1a8d553f2034ba65d0dcc72bb8e4.png" alt="" data-base62-sha1="1bh8SbyG5iWM63hWD3oFdnliVP6" role="presentation" width="690" height="298" data-dominant-color="20252D"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename"></span><span class="informations">1050×454 24.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<a href="https://gyazo.com/b31fc785419c5758605168d45075828f" class="inline-onebox">Screenshot - b31fc785419c5758605168d45075828f - Gyazo</a></p>
</details></td><td>2024-11-10T14:18:51.361Z</td></tr><tr><td>bolvan</td><td><p>Блокчек находит рабочие стратегии для конкретного домена по конкретному протоколу.<br>
Броузер может дергать и другие домены, на которые есть ссылки в коде веб сайта.<br>
Потому без анализа F12 с включенным полем “протокол” тут не о чем говорить. + сюда анализ ipv4/ipv6, если есть ipv6</p></td><td>2024-11-10T14:19:28.507Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Кажется я понял в чем было дело. Это когда сайт использует другие домены для загрузки контента. Ок буду пробывать. Спс</p></td><td>2024-11-10T14:23:24.148Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>У меня ещё вопрос по Линукс конфиг лежит opt/zapret/config но отредактировать его не могу так как он использует root приходится запускать install easy sh все время. Есть ли способ как в виндовс запускать конфиг вручную и иметь доступ к его редактированию? Без использования install easy.</p></td><td>2024-11-10T14:58:28.695Z</td></tr><tr><td>Govnovoz</td><td><p>Привет, снова! А пробовал кто заставить работать голосовой чат на Xbox через Zapret на OpenWRT? Версия последняя, запущен скрипт 50-discord.</p></td><td>2024-11-10T16:32:35.294Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Можно попробывать добавить домены xbox в list discord или запустит без hostlist ов</p></td><td>2024-11-10T16:38:16.070Z</td></tr><tr><td>serpen(VL)</td><td><p>вопрос довольно важный, может ли трафик с задуром ТСПУ с компа начать обходить ТСПУ с других девайсов если время просто совпало тютелька в тютельку. Банально если запустить тот же дур который работает, а потом другую вещь из той же сети, приставку скажем к  телевизору. Внезапно приставка начала работать безо всяких блокировок на тот же ютуб. Возможно ли это в каком то из сценариев нашей реальности?</p></td><td>2024-11-10T17:50:45.169Z</td></tr><tr><td>Vasa</td><td><p>Привет, подскажите пожалуйста ламеру. Вроде в теме было, но так и не понял, что куда. Прошивка Openwrt, пров. Дом.ру,  ставил zapret по <a href="https://github.com/remittor/zapret-openwrt/wiki/Installing-zapret%E2%80%90openwrt-package" rel="noopener nofollow ugc">этому</a> гайду. Суть проблемы такая, что режет скорость, когда выключены  в Маршрутизация/NAT offloading - Программный flow offloading и Аппаратная разгрузка потока, Когда включено, скорость по тарифу, но ломается zapret (не работают некоторые сайты, discord)</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/de9d5b21f32ce4463148e89245d63dc8ddf97a2a.png" data-download-href="https://ntc.party/uploads/default/de9d5b21f32ce4463148e89245d63dc8ddf97a2a" title="Снимок экрана 2024-11-09 150215"><img src="zapret-обсуждение-726/de9d5b21f32ce4463148e89245d63dc8ddf97a2a.png" alt="Снимок экрана 2024-11-09 150215" data-base62-sha1="vLl8bJUYjQMcif41QG4c8JDPs6e" width="399" height="500" data-dominant-color="2A2A2A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-11-09 150215</span><span class="informations">700×876 31 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ccd5f28fff4a82a87b997b0ead11b17ef913966f.png" data-download-href="https://ntc.party/uploads/default/ccd5f28fff4a82a87b997b0ead11b17ef913966f" title="Снимок экрана 2024-11-09 194242"><img src="zapret-обсуждение-726/ccd5f28fff4a82a87b997b0ead11b17ef913966f.png" alt="Снимок экрана 2024-11-09 194242" data-base62-sha1="te3MDdO0LimVoyd8RLncY218Kpp" width="607" height="500" data-dominant-color="262626"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-11-09 194242</span><span class="informations">832×685 21.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-10T18:00:01.009Z</td></tr><tr><td>fresa</td><td><p>проц помирает?</p></td><td>2024-11-10T18:26:00.080Z</td></tr><tr><td>fresa</td><td><p>да</p></td><td>2024-11-10T18:26:06.857Z</td></tr><tr><td>bolvan</td><td><p>В запрете есть свое управление offload, его и надо использовать. А общую установку обязательно отключить</p></td><td>2024-11-10T18:32:29.085Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="serpen" data-post="2689" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/serpen/48/4255_2.png" class="avatar"> serpen:</div>
<blockquote>
<p>вопрос довольно важный, может ли трафик с задуром ТСПУ с компа начать обходить ТСПУ с других девайсов если время просто совпало тютелька в тютельку</p>
</blockquote>
</aside>
<p>Не может. Это фантастика</p></td><td>2024-11-10T18:33:30.384Z</td></tr><tr><td>Vasa</td><td><p>Не сочтите за наглость. Можете для домохозяек подробнее, где смотреть и что крутануть?  <img src="https://ntc.party/images/emoji/twitter/saluting_face.png?v=12" title=":saluting_face:" class="emoji" alt=":saluting_face:" loading="lazy" width="20" height="20"></p></td><td>2024-11-10T18:36:56.165Z</td></tr><tr><td>Vasa</td><td><p>в config такая строка # FlowOffload mode : donttouch,none,software,hardware<br>
FLOWOFFLOAD=software<br>
это оно?</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/db8cc2a637d8e7a423772b9bf301b43174bb6cf4.png" data-download-href="https://ntc.party/uploads/default/db8cc2a637d8e7a423772b9bf301b43174bb6cf4" title="Снимок экрана 2024-11-10 214356"><img src="zapret-обсуждение-726/db8cc2a637d8e7a423772b9bf301b43174bb6cf4.png" alt="Снимок экрана 2024-11-10 214356" data-base62-sha1="vke8Uk6hg3pvFsiDVqKmkFUll3K" width="586" height="500" data-dominant-color="262627"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Снимок экрана 2024-11-10 214356</span><span class="informations">628×535 11.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>сейчас так</p></td><td>2024-11-10T18:45:00.470Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="Vasa" data-post="2696" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/vasa/48/12725_2.png" class="avatar"> Vasa:</div>
<blockquote>
<p>это оно?</p>
</blockquote>
</aside>
<p>оно, но на сколько я помню болван говорил что её надо настраивать во время установки запрета, если менять просто в конфиге то результата не даст.</p></td><td>2024-11-10T18:46:53.291Z</td></tr><tr><td>Vasa</td><td><p>Дело в том, что не было выбора параметров, всё само установилось</p></td><td>2024-11-10T18:51:05.128Z</td></tr><tr><td>Vasa</td><td><p>а какой вариант должен тогда там быть, software или hardware или другой какой?</p></td><td>2024-11-10T18:54:28.916Z</td></tr><tr><td>bolvan</td><td><p>Это UIшка от remmitor.<br>
Видимо надо включить software или hardware и нажать сейв и апплай, оно перезапустит фаервол.<br>
А основную установку openwrt обязательно отключить</p></td><td>2024-11-10T18:59:35.632Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="2700" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Видимо надо включить software или hardware и нажать сейв и апплай, оно перезапустит фаервол.</p>
</blockquote>
</aside>
<p>то есть так же можно и поменять в конфиге после чего рестартануть фаирвол с запретом? Видимо я тебя не та понял когда ты говорил что это только при установке надо менять</p></td><td>2024-11-10T19:08:10.286Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="2700" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Видимо надо включить software или hardware и нажать сейв и апплай, оно перезапустит фаервол.</p>
</blockquote>
</aside>
<p>Моя luci-app перезапустит /etc/init.d/zapret (и то пользователю самому нужно Restart нажать).<br>
И всё. А уж как там дальше будет … я не проверял с этими флагами, т.к. всем mt7621 и младше пора на свалку (либо выполнять дочернюю работу, а не центрального узла)!</p></td><td>2024-11-10T19:14:24.756Z</td></tr><tr><td>Vasa</td><td><p>Благодарю, помогло <img src="https://ntc.party/images/emoji/twitter/handshake.png?v=12" title=":handshake:" class="emoji" alt=":handshake:" loading="lazy" width="20" height="20"></p></td><td>2024-11-10T20:12:41.085Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>я правильно понял что на syndata ttl не действует?<br>
нашёл удачную =syndata,disorder2 но ломаются госуслуги и прочие кабинеты налоговой а +ttl=7 ничего не меняет</p></td><td>2024-11-11T02:25:58.744Z</td></tr><tr><td>easyone11</td><td><p><code>disorder2</code> и <code>split2</code> не предполагают отсылку фейк пакетов, поэтому опции ttl и fooling неактуальны.<br>
Синдату можно ограничить айпилистом.</p></td><td>2024-11-11T04:02:11.566Z</td></tr><tr><td>i-no(...)</td><td><p>Недолго мучалась старушка <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-11T06:18:06.796Z</td></tr><tr><td>cimon357(Elena)</td><td><p>Всем zapret хорош (сама его использую и каждый раз благодарю автора - очень выручает). Но очень уж сложен в настройке (в подборе конфигурации). Особенно для неопытного пользователя.</p>
<p>Можно ли сделать что-то вроде сети проб (наподобие проб Ripe Atlas, например). Чтобы отслеживать ситуации с блокировками в реальном времени и находить работающую стратегию обхода? А потом предлагать ее всем тем, у кого такой же провайдер и такие же условия. Данные можно передавать зашифрованными.</p>
<p>Мне anti-DPI решения (которые ставишь у себя) нравятся больше, чем аренда сервера где-то там.</p></td><td>2024-11-11T09:50:01.022Z</td></tr><tr><td>i-no(...)</td><td><p>Предлагается протезировать отсутствующую усидчивость “сетью проб” у тех, кто, по идее, является реципиентом деструктивных влияний.</p></td><td>2024-11-11T10:10:09.195Z</td></tr><tr><td>bolvan</td><td><p>Вы хотите от него то, что обычно делается лишь в случае коммерческого продукта.<br>
Держать какую-то инфраструктуру поддержки и отслеживания ситуации.<br>
Нет этого. И не будет. Если только кто-то сторонний сделает.<br>
Но вряд ли кто-то задарма будет этим заниматься. Тут кроме времени еще и ресурс нужен. Доступ к провайдерам. И еще будет ответная реакция от империи на такой выпад.<br>
Лучшее, что сейчас можно сделать, это форум комьюнити. Топик , в котором пишут провайдер-город-стратегия, и ничего лишнего. Но они могут устаревать все равно</p></td><td>2024-11-11T10:11:28.822Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Хотя бы в Блокчеке по условно “весу” организовать градацию стратегий от самых эффективных до каких-нибудь синдата, чтобы не нужно было просматривать весь процесс с записью AVAILABLE.<br>
Потому что сейчас результат лучше не учитывать. А с такой градацией стратегии было бы новичкам полегче - было бы понятно, что самые эффективные указываются наверху списка SUMMARY.</p></td><td>2024-11-11T10:27:15.033Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>форум комьюнити. Топик, в котором пишут провайдер-город-стратегия, и ничего лишнего</p>
</blockquote>
</aside>
<p>Псевдоанонимный, чтобы при просмотре был виден только провайдер-город-стратегия и больше абсолютно ничего. На платформи “Дискурс”  - т. е. тут - именно так вряд ли получится сделать.</p></td><td>2024-11-11T10:28:27.339Z</td></tr><tr><td>anon9001(anon)</td><td><p>Гораздо легче из моего опыта запрет чем тот же впс. Там вся сложноть это в покупке и последующей поддержке, а не в настройке, левые хосты вообще могут выйти из бизнеса, а большие половину уже перебанили. С запретом ты один на один пробиваешься как а игру в шахматы, без всяких центральных серверов которые блочатся.</p></td><td>2024-11-11T10:29:28.569Z</td></tr><tr><td>i-no(...)</td><td><p>Вот именно. VPS — это неспортивно! <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-11T10:30:26.151Z</td></tr><tr><td>cimon357(Elena)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2709" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Лучшее, что сейчас можно сделать, это форум комьюнити. Топик , в котором пишут провайдер-город-стратегия, и ничего лишнего.</p>
</blockquote>
</aside>
<p>Такие стратегии даже на Хабре в комментариях (и в статьях) публиковали. Только это ведь все в открытом доступе, а значит, и операторы ТСПУ тоже читают и делают соответствующие выводы и настройки.</p></td><td>2024-11-11T10:38:00.064Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>и операторы ТСПУ тоже читают и делают соответствующие выводы и настройки.</p>
</blockquote>
</aside>
<p>Они в дашборды своих сетевых инструментов уставились, скорее-то всего, и смотрят в сводной статистике и в своих DPI, почему не так круто падает запрещенный трафик, как им нужно.</p></td><td>2024-11-11T10:39:42.582Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>кстати имхо недостаточно освещено и акцентировано что фуллинги через запятую можно указать и при этом они дают не ожидаемый эффект</p>
<p>речь не про пробивку dpi а про поломки сайтов</p>
<p>badsum, md5sig и <em><strong>badseq</strong></em>(ломает казалосьбы кашерный nginx на <a href="http://forum.ixbt.com" rel="noopener nofollow ugc">forum.ixbt.com</a>) по отдельности ломают разные сайты - а попарно  уже не ломают их же</p>
<p>хотя не вполне понимаю как это получается</p>
<p>p.s. задача без листов и ttl подобрать универсальный метод для проводного и на томже компе мобильного прова</p>
<p>ttl не подходит для lte момеда (где потребно фикс на 64 на тарифах не для компов)<br>
листы просто не хочу… считайте индивидуальный бзик</p></td><td>2024-11-11T10:54:23.834Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Quqas" data-post="2716" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>не вполне понимаю как это получается</p>
</blockquote>
</aside>
<p>А для чего же делать свою стратегию настолько всеобемлющей, что в неё попадает ixbt, который вроде бы незаблокирован? Достаточто ведь своего хостлиста.</p>
<aside class="quote no-group">
<blockquote>
<p>p.s. задача без листов и ttl подобрать универсальный метод для проводного и на томже компе мобильного прова</p>
</blockquote>
</aside>
<p>Для <code>winws</code> можно составить профили, которые будут зависеть от используемого сетевого интерфейса.</p></td><td>2024-11-11T10:56:22.304Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="i-no" data-post="2717" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>сетевого интерфейса</p>
</blockquote>
</aside>
<p>ну покачто и только проводной не получается сделать. всё время не ищя специально попадаются  сайты которые ломаются(+ момед =usb имеет склонность новую сетевуху создавать если в новую дырку сунуть)<br>
хотя если того не считать с теми же параметрами и мобильный работает<br>
про листы чти выше</p></td><td>2024-11-11T11:09:44.050Z</td></tr><tr><td>i-no(...)</td><td><p>Значит, задача своим волевым отказом от специально предназначенного инструмента, превращается в нерешаемую. Принято.</p></td><td>2024-11-11T11:12:20.646Z</td></tr><tr><td>abc555</td><td><p>или хост лист или ttl, а так что не будь да сломается какой не будь сайт, нравится это вам или нет.<br>
так же надо учитывать, сегодня работает, а завтра нет, поэтому никакая универсальная стратегия всё равно долго работать не будет, почти миллиард бакинских выделили чтоб отключить вам нэт )<br>
будем надеется что яхты подорожали и капусты им на блокировку не хватит )</p></td><td>2024-11-11T11:13:37.068Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2716" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>badsum, md5sig и <em><strong>badseq</strong></em>(ломает казалосьбы кашерный nginx на <a href="http://forum.ixbt.com">forum.ixbt.com</a>) по отдельности ломают разные сайты - а попарно уже не ломают их же</p>
<p>хотя не вполне понимаю как это получается</p>
</blockquote>
</aside>
<p>Дело в том, что все фулинги применяются к фейкам одновременно.<br>
ГудбайДПИ посылает фейки с каждым фулингом отдельно, zapret - нет.<br>
badsum может как резаться на пути, так и , наоборот, приниматься сервером (cloudflare).<br>
В первом случае стратегия не срабатывает в полной мере и не обходит блок, во втором она ломает сайт.<br>
md5sig принимается не linux серверами.<br>
Теперь прикинем что будет при badsum,md5sig.  Если badsum режется, ничего не изменится. Стратегия не будет работать.  Если badsum не режется, а принимается сервером, то при наличии md5sig сервер может уже не принять, и задача будет выполнена.</p>
<aside class="quote no-group" data-username="Quqas" data-post="2716" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>ttl не подходит для lte момеда (где потребно фикс на 64 на тарифах не для компов)<br>
листы просто не хочу… считайте индивидуальный бзик</p>
</blockquote>
</aside>
<p>Сейчас законодательно запрещено запрещать раздачу. Тарифы секутся по IMEI</p></td><td>2024-11-11T11:40:30.898Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2718" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>ну покачто и только проводной не получается сделать. всё время не ищя специально попадаются сайты которые ломаются(+ момед =usb имеет склонность новую сетевуху создавать если в новую дырку сунуть)</p>
</blockquote>
</aside>
<p>Посмотрите параметр ‘–nlm-filter’ в docs/windows.md<br>
Можно разные инстансы сажать на разный nlm-filter</p></td><td>2024-11-11T11:45:53.972Z</td></tr><tr><td>abc555</td><td><p>Стояло --dpi-desync-ttl=10, смотрю перестали сайты открываться, проверяю, стоит --dpi-desync-ttl=1, почему ? куда исчез нолик ?) доступ только у меня и сегодня я ничего не делал.<br>
нолик поставил обратно, всё заработало, а если он опять исчезнет, что это за глюк ?<br>
запрет не обновлял может недели 2, если это что то говорит, использую nfqws<br>
я вчера только поставил параметр dpi-desync-ttl и примерно ровно сутки поработал и слился на единичку и тут да, только 10 надо ставить, на этом прове<br>
поставлю 11 на всякий случай )</p></td><td>2024-11-11T13:51:34.982Z</td></tr><tr><td>easyone11</td><td><p>хакеры! не иначе</p></td><td>2024-11-11T14:05:12.061Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Инфляция. Вполне обычный феномен.</p></td><td>2024-11-11T14:09:39.931Z</td></tr><tr><td>abc555</td><td><p>ну да, залезли хакеры и нолик убрали ))<br>
не ну я серьёзно спрашиваю, яж не прикалываюсь<br>
только начал осваивать этот параметр и тут на тебе<br>
до этого я им не пользовался, но начали жаловаться пользователи, решил поставить и тут такая вспышка, смотрю не открылся сайт, не понял, залез проверяю, нет нолика )<br>
может bolvan поставил какое то ограничение, яж не знаю, ну типа придел до 10</p></td><td>2024-11-11T14:12:19.723Z</td></tr><tr><td>KDS</td><td><p>Деноминация - нолик отрезали <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"></p></td><td>2024-11-11T14:15:53.360Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ну так и блоченный сайт может ломатся от тойже стратегии которая пробивает dpi и не ломает другие блоченные<br>
и тут тотже автолист не поможет потомучто не понять dpi непущает или сам сайт отрыгнул<br>
поэтому смысл есть. тем более blockcheck фулинги не миксует и домены второго уровня даже не затестить</p></td><td>2024-11-11T16:26:52.649Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>А кто-нибудь поднимал бота для дискорда вместе с запретом? Я добился того, что бот на питоне (на библиотеке discord.py) вроде как логинится и даже приходят сообщения об изменении статуса в голосовом канале, но бот не коннектится сам (ошибок кстати тоже нет). Стратегию перенес с основного ПК (сам бот поднимаю на распберри), где дискорд с ней исправно (почти) работает.</p></td><td>2024-11-11T16:33:41.315Z</td></tr><tr><td>electrifying</td><td><p>А я правильно понимаю что со стратегиями типо disorder2 и split2 фейки не отсылаются поэтому надобность во флаге с fooling отпадает? Почему тогда в конфиге по умолчанию для http стоит стратегия --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig???</p></td><td>2024-11-11T16:38:50.989Z</td></tr><tr><td>uwu(uwu)</td><td><p>пушто там помимо split2 есть fake<br>
то есть тут 2 десинк метода: один фейки отправляет (–dpi-desync=fake), другой делит пакеты (–dpi-desync=split2)</p></td><td>2024-11-11T16:44:48.728Z</td></tr><tr><td>irregular-circle</td><td><p>Потестил ютуб с новой опцией --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld и всё работает прекрасно, вообще без всяких фейков и репитов. Огромное спасибо <a class="mention" href="/u/bolvan">@bolvan</a> за проделанную работу.</p></td><td>2024-11-11T20:04:23.538Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> , а планируется ли функция чека блеклистов, скажем каждые N секунд, чтобы не перезапускать экзешник после обновления блек лист(а/ов) ?</p></td><td>2024-11-11T20:12:31.797Z</td></tr><tr><td>KDS</td><td><p>А где взять win-версию с этим чудом и почему его нет в хелпе?</p></td><td>2024-11-11T20:15:48.424Z</td></tr><tr><td>easyone11</td><td><p>а это свежачок) <a href="https://github.com/bol-van/zapret/commit/a17e4908514f3f280d0d4a216f7d48b169d94ff8" class="inline-onebox">nfqws: multisplit · bol-van/zapret@a17e490 · GitHub</a><br>
видимо скоро будет пост в апдейтах</p></td><td>2024-11-11T20:19:41.334Z</td></tr><tr><td>KDS</td><td><p>Блин, хотел тоже потестить ( Ладно, ждем тогда</p></td><td>2024-11-11T20:23:41.800Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Тоже интересует, когда простым смертным новые опции станут доступны. Ну и описание хотелось бы прочитать к нововведениям.</p></td><td>2024-11-11T20:39:31.735Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2737" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>когда</p>
</blockquote>
</aside>
<p>Можно подписаться на релизы и ГитхабЪ услужливо уведомит по почте.<br>
А пока лучший SNI-кромсатор готовится, я не теряя времени зря снова доковырялся до GGC. Если кому-то интересно, то подсказка в том, что использованы не самые популярные техники. Но в ридми всё есть <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-11T20:41:00.500Z</td></tr><tr><td>KDS</td><td><p>Она давно уже есть</p></td><td>2024-11-11T20:49:26.055Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>кстати в blockcheck есть т.н. “ошибка”<br>
он подмену dns только при старте тестит. и только “свои” домены<br>
а на днях на одном прове заметил что прововский dns как минимум фэйсбук и инсту левые ip отдаёт. а те что при старте и 99% блоченных доменов - настоящие. а я как раз на основе их пытался стратегию найти и долго обламывался прежде чем понял обочто дело</p>
<p>благо не перехватывает сам 53 если 1.1.1.1 прописать.  послеэтого для 443 хватает банального disorder2 чтоб таже инста с мордокнигой стали открываться</p>
<p>отсюда мысль : убрать в blockchek проверку dns при старте но добавить проверку введённого(ых) домена(ов)</p></td><td>2024-11-11T21:01:05.934Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2737" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Тоже интересует, когда простым смертным новые опции станут доступны.</p>
</blockquote>
</aside>
<p>Форкните репо и запустите build вручную в Actions, там соберутся артефакты.<br>
Ок, сам запустил, но нужен логин чтобы скачать <a href="https://github.com/spvkgn/zapret/actions/runs/11789959815#artifacts" class="inline-onebox" rel="noopener nofollow ugc">build · spvkgn/zapret@f973a6f · GitHub</a></p></td><td>2024-11-12T03:03:26.927Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group" data-username="spv82" data-post="2741" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>но нужен логин чтобы скачать</p>
</blockquote>
</aside>
<p>MediaFire? ЯндексДиск? Нее, не слышал… )</p></td><td>2024-11-12T03:39:17.809Z</td></tr><tr><td>spv82</td><td><p>лень с телефона этим заниматься - кому надо так достанут</p></td><td>2024-11-12T04:10:26.003Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="2732" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>Потестил ютуб с новой опцией --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld и всё работает прекрасно, вообще без всяких фейков и репитов. Огромное спасибо <a class="mention" href="/u/bolvan">@bolvan</a> за проделанную работу.</p>
</blockquote>
</aside>
<p>Прекрасно, спасибо за тестинг. Сам еще не пробовал на ютубе.</p></td><td>2024-11-12T06:09:00.778Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="minecrafter" data-post="2733" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/minecrafter/48/15060_2.png" class="avatar"> minecrafter:</div>
<blockquote>
<p><a class="mention" href="/u/bolvan">@bolvan</a> , а планируется ли функция чека блеклистов, скажем каждые N секунд, чтобы не перезапускать экзешник после обновления блек лист(а/ов) ?</p>
</blockquote>
</aside>
<p>Это уже сделано. Только не каждые N секунд, а при каждой проверке листов идет сверка времени модификации файла, и при необходимости релоад. Можно править файл и не перезапускать</p></td><td>2024-11-12T06:10:26.144Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2737" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Тоже интересует, когда простым смертным новые опции станут доступны. Ну и описание хотелось бы прочитать к нововведениям.</p>
</blockquote>
</aside>
<p>В течение нескольких дней. Надо еще в tpws допилить похожую функцию. Доку дописать, блокчек допилить</p></td><td>2024-11-12T06:12:02.386Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2740" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>отсюда мысль : убрать в blockchek проверку dns при старте но добавить проверку введённого(ых) домена(ов)</p>
</blockquote>
</aside>
<p>Сейчас проверка днс не основана на doh. У чекера нет валидных IP. Эталона для сравнения нет.<br>
Поэтому он сначала сравнивает с публик днс, потом убеждается, что все результаты РАЗНЫЕ.<br>
Последняя проверка нацелена на те случаи, когда DNS перехватывается и заворачивается на провайдера (превед эр-телекому).<br>
Но это требует нескольких потенциально заблокированных доменов. С одним не прокатит.<br>
Причем подборка доменов должна быть особой. Без прыгающих пляшущих IP.<br>
Можно, конечно, переписать это на DoH. Но вот вопрос стоит ли ?<br>
Что может с DoH случиться ? Его же тоже могут заблочить нафиг ?<br>
И вопрос хороводов с IP адресами это никак не решит. facebook точно прыгает.</p></td><td>2024-11-12T06:17:57.614Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="spv82" data-post="2741" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>Форкните репо и запустите build вручную в Actions, там соберутся артефакты.</p>
</blockquote>
</aside>
<p>А разве actions всем подключают ? Мне его подключили после набора определенной популярности репы. Или платный тариф нужен. Не ?<br>
Если под openwrt, то довольно просто собрать на linux через openwrt sdk. Инструкция в docs/compile обновлена и упрощена.</p></td><td>2024-11-12T06:19:54.602Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Такой вопрос возник. Для перехода с Win 10 на Линукс какой дистрибутив Линукс советуете поставить для плавного перехода? Читал и знакомые говорили, что лучше всего ставить Арч Линукс (он как конструктор) или Манджаро с КДЕ Плазмой. Чистый Арч, потом накатить Плазму?</p></td><td>2024-11-12T06:25:23.879Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="bolvan" data-post="2748" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>А разве actions всем подключают ? Мне его подключили после набора определенной популярности репы. Или платный тариф нужен. Не ?</p>
</blockquote>
</aside>
<p>Не замечал такого. Использую actions на любом свежесозданном/форкнутом репо. Там есть платный тариф, но это для соответствующих задач.</p></td><td>2024-11-12T06:27:52.027Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="2732" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>Потестил ютуб с новой опцией --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld и всё работает прекрасно, вообще без всяких фейков и репитов.</p>
</blockquote>
</aside>
<p>Стратегия подходит только к ютубу или другие сайты с ней так же открывает?</p></td><td>2024-11-12T06:28:48.708Z</td></tr><tr><td>bolvan</td><td><p>Я имел в виду на свежесозданных github аккаунтах.<br>
Разве это не породит абузу , если всем дадут возможность выполнять произвольный код на github серверах ? Про собственные раннеры речи нет, но это конкретный оверкилл в нашем случае.</p></td><td>2024-11-12T06:34:33.673Z</td></tr><tr><td>bolvan</td><td><p>Я использую банальщину. Убунту. Почему ? Потому что геморроя меньше всего. Все стандартно, всеми поддерживается, есть launchpad. Зашел скачать драйвера AMD opencl. Под что они есть ? Правильно, только убунту, rhel, сусе и все, собственно. Не хочу snapd ? Есть готовые репы на лаунчпаде с мозиллой. Если что-то есть под linux, то для убунты оно есть скорее всего</p></td><td>2024-11-12T06:37:56.141Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2749" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Такой вопрос возник. Для перехода с Win 10 на Линукс какой дистрибутив Линукс советуете поставить для плавного перехода? Читал и знакомые говорили, что лучше всего ставить Арч Линукс (он как конструктор) или Манджаро с КДЕ Плазмой. Чистый Арч, потом накатить Плазму?</p>
</blockquote>
</aside>
<details>
<summary>
оффтоп</summary>
<p>Без обид, но если у вас такие вопросы возникают, то вы чистый арч не потянете. Начните с юзер-френдли, типа минта. И вообще, нашли вы, конечно, где спрашивать. Форумов по линукс-дистрибутивам - вагон и маленькая тележка.</p>
</details></td><td>2024-11-12T06:40:05.432Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Спасибо. Понятно.</p>
<blockquote>
<p>И вообще, нашли вы, конечно, где спрашивать.</p>
</blockquote>
<p>Там понтов много у линуксодов. Пытался спрашивать. А тут много опытных товарищей и атмосфера сложилась очень дружелюбная. Почему бы не спросить один раз? Тут и не такое уже спрашивали…</p>
<p>Простите за оффтоп.</p></td><td>2024-11-12T06:44:17.304Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2755" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Там понтов много у линуксодов. Пытался спрашивать. А тут много опытных товарищей и атмосфера сложилась очень дружелюбная.</p>
</blockquote>
</aside>
<details>
<summary>
оффтоп</summary>
<p>Ну, я к тому, что если вы всерьез решите пересесть на линукс, вам всё равно придется профильные ресурсы изучать. На понты и т.п. просто не обращать внимания.</p>
</details></td><td>2024-11-12T06:51:49.383Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Manjaro, Arch - роллинг релиз. Это может оказаться как хорошо, так и не очень. И определить это для себя можно только попробовав самому.</p></td><td>2024-11-12T07:00:14.161Z</td></tr><tr><td>rewhat</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2749" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>какой дистрибутив Линукс советуете поставить для плавного перехода?</p>
</blockquote>
</aside>
<p>Fedora KDE</p>
<p>сори, Ori, не туда ответил</p></td><td>2024-11-12T07:00:41.854Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="rewhat" data-post="2758" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>Fedora KDE</p>
</blockquote>
</aside>
<p>Есть, кста, очень классный дистр нобару, на базе федоры. От автора порт-протон, если мне память не изменяет. Единственный, который на моём асус рог без плясок с бубном заводится.</p></td><td>2024-11-12T07:03:52.079Z</td></tr><tr><td>rewhat</td><td><p>хз, я вот с недоверием отношусь ко всем дистрам кроме Debian, Ubuntu, Arch, Manjaro, Fedora, Suse, и подобных. Куча дистров существует, но какой смысл.</p>
<p>Есть например Fedora. Роллинг релиз, стабильная система. Есть классика типа Ubuntu или Mint, там вообще тишь да гладь. Есть Арч, если кому нужен конструктор и извращения с чтением release notes. Что еще нужно, казалось бы…</p></td><td>2024-11-12T07:07:44.043Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>не понял за doh<br>
есть же команда у какого dns спросить и по 53<br>
и сравнить с тем что даёт системный</p>
<p>ну а перехват 53 детектить как и сейчас . ну да одного хоста не хватит… тогда из старта можно не убирать<br>
но если при старте даже прошло проверку “на вшивость” сделать доп.проверку подмены адреса тестируемого домена</p>
<p>а ещё предложение по логике 2standart и 3force режимов</p>
<p>для случая выбора N попыток прерывать после первой неудачи и переходить к следующему варианту стратегии. а N нужно чтоб удостоверится что dpi удачную стратегию переварит N раз подряд.<br>
p.s.<br>
в 1quick так сделано - но он останавливает поиск после первой удачной стратегии. а зачастую на поверку она не подходящая и нужно рассмотреть и другие варианты</p></td><td>2024-11-12T07:10:36.917Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2761" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>для случая выбора N попыток прерывать после первой неудачи и переходить к следующему варианту стратегии. а N нужно чтоб удостоверится что dpi удачную стратегию переварит N раз подряд.</p>
</blockquote>
</aside>
<p>про это уже много отвечал. можно сделать еще вариант 4-й в списке. полу-quick. для юзеров. а standard для анализа DPI</p>
<blockquote>
<p>есть же команда у какого dns спросить и по 53<br>
и сравнить с тем что даёт системный</p>
</blockquote>
<p>Прыгают IP. CDN. Сейчас A скажет, через час B. Один DNS скажет C, другой - D.<br>
Сравнение невозможно.</p></td><td>2024-11-12T07:28:06.609Z</td></tr><tr><td>anon9001(anon)</td><td><p>Щас арч никто не потянет потому что его забанили. Нужно его через торрент качать, хотошо что у арч хотя бы есть торрент</p></td><td>2024-11-12T07:30:16.151Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>не знаю у меня не забанили</p></td><td>2024-11-12T08:18:21.062Z</td></tr><tr><td>djvadim100(Вадим)</td><td><p>У меня знаний по Arch выше чем по ubuntu, debian, да нужно поработать в консоли но видь это же круто, уже давно arch мой любимы дистрибутив</p></td><td>2024-11-12T08:21:04.497Z</td></tr><tr><td>KDS</td><td><p>А можно про новые опции, хотя бы вкратце, что, куда, зачем? Пытался код расковырять, но не сильно много там понял (<br>
Например, что такое midsld? Понял, что какой-то подрежим резки пакетов, ну и все на этом (</p></td><td>2024-11-12T08:55:57.102Z</td></tr><tr><td>bolvan</td><td><p>SLD = second level domain <a href="http://www.RUTRACKER.org">www.RUTRACKER.org</a><br>
TLD = top level domain <a href="http://www.rutracker.ORG">www.rutracker.ORG</a><br>
midsld - маркер посередине SLD.   www.RUTR <a href="http://ACKER.org">ACKER.org</a></p>
<p>multisplit - режим нарезки на произвольное количество частей (до 64 маркеров)<br>
multidisorder - тоже самое, но с конца</p>
<p>split2 без seqovl - частный случай multisplit, disorder2 без seqovl - частный случай multidisorder<br>
split2/disorder2 остаются именно из-за seqovl. в multi варианте seqovl нет</p>
<p>split переименуется в fakedsplit, disorder в fakeddisorder<br>
старые названия сохраняются для совместимости</p></td><td>2024-11-12T09:18:36.946Z</td></tr><tr><td>KDS</td><td><p>Благодарю, про маркеры тоже нашел пост. Будем крутить )</p></td><td>2024-11-12T09:29:14.448Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2762" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Прыгают IP. CDN. Сейчас A скажет, через час B. Один DNS скажет C, другой - D.<br>
Сравнение невозможно.</p>
</blockquote>
</aside>
<p>ну не в течении же 1 секунды 2х запросов<br>
я же не предлагаю “зашить” ip в скрипт<br>
1й этап как щас при старте делаем вывод о перехвате 53 или подмене ответов системного<br>
2й при вводе <a href="http://domain.org" rel="noopener nofollow ugc">domain.org</a> ещё раз сравниваем ответ ip от системного и публичного dns для <a href="http://domain.org" rel="noopener nofollow ugc">domain.org</a>. чисто чтоб исключить случай как описано в изначальном посте.<br>
любая разница в ответе повод вывести ахтунг. даже если это “просто” последствия “кэша” или чего другого не связанного с подменой dns от прова</p>
<hr>
<p>p.s.<br>
хотя я таки понял что ты имел ввиду. действительно простой nslookup на 1.1.1.1 подряд 10 раз за 5 сек. рандомно выдаёт 2 разных ip на инсту. и один из них даже открывает. а второй давно блочен по ip. но чебурнилы видать непрочухали.</p>
<aside class="quote no-group" data-username="bolvan" data-post="2762" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>сделать еще вариант 4-й в списке</p>
</blockquote>
</aside>
<p>ок. спс. ждём.</p></td><td>2024-11-12T09:33:38.642Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Quqas" data-post="2769" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>ну не в течении же 1 секунды 2х запросов</p>
</blockquote>
</aside>
<p>Разные DNS выдают разные ответы в одно и то же время.<br>
У них кэш. Сравнивать эти ответы невозможно.<br>
От одного сервера нечего сравнивать</p></td><td>2024-11-12T09:53:08.357Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>да. поправил уже. но ты успел быстрей ответить</p></td><td>2024-11-12T09:54:42.023Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Мультисплит можно будет использовать с fake после запятой, как split2?<br>
<code>--dpi-desync=fake,multisplit --dpi-desync-fooling=(дурилка) --dpi-desync-split-pos=1,midsld</code><br>
Такая стратегия будет корректной, рабочей?</p></td><td>2024-11-12T10:05:45.593Z</td></tr><tr><td>irregular-circle</td><td><p>В смысле, ломать не будет? Открывает, собрать три сегмента в обратном порядке должен уметь каждый сервер. Или вопрос про какие-то специфически заблокированные сайты? У меня ютуб проверяют жёстче всего, для сайтов типа фейсбука и этого достаточно дизордера с pos=1. Насколько я понимаю DPI теряется и не понимает, что перед ней client hello когда не видит 0x16 в начале. Только в случае ютуба DPI ещё парсит дополнительно пару следующих пакетов на наличие <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, чему призван мешать второй разрез который сечет googlevideo пополам.</p></td><td>2024-11-12T10:13:05.172Z</td></tr><tr><td>irregular-circle</td><td><p>По идее да, multisplit это стратегия второй фазы и будет работать с фейком. Только если можно обойтись без фейка, то зачем он нужен?</p></td><td>2024-11-12T10:17:25.654Z</td></tr><tr><td>bolvan</td><td><p>multisplit - это вариант split. сочетаемость с другими не меняется, кроме seqovl, который здесь не поддерживается</p></td><td>2024-11-12T10:25:06.247Z</td></tr><tr><td>bolvan</td><td><p>Ситуация может быть любая. Сегодня можно, завтра нет.<br>
Инструмент есть инструмент, это не шаблонная нажималка, и он должен быть гибок.</p></td><td>2024-11-12T10:25:52.854Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="2773" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>Насколько я понимаю DPI теряется и не понимает, что перед ней client hello когда не видит 0x16 в начале. Только в случае ютуба DPI ещё парсит дополнительно пару следующих пакетов на наличие <a href="http://googlevideo.com">googlevideo.com</a>, чему призван мешать второй разрез который сечет googlevideo пополам.</p>
</blockquote>
</aside>
<p>Да, мне тоже показалось, что алгоритм такой. Надо попробовать именно multisplit, а не multidisorder. Без переиначивания порядка</p></td><td>2024-11-12T10:28:00.947Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Классно! Тогда конфигурацию переписывать не буду. У меня все открывается, видео Ютуба быстро грузится. Поменяю сплит2 на мультисплит - и всё! В моей конфигурации все равно больше ничего улучшить нельзя.</p></td><td>2024-11-12T10:28:30.024Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="irregular-circle" data-post="2773" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>В смысле, ломать не будет?</p>
</blockquote>
</aside>
<p>Нене, в смысле вообще с этой стратегией сайты из блока открывает или нет. Если да,то имеет смысл убрать репиты и фейк гугла и уйти на multidisorder/multisplit</p></td><td>2024-11-12T10:38:07.233Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Сколько сидел, так и не смог пробить ютуб на multisplit. Видимо, нужен какой-то особенный параметр, но изменение split_pos=* и sld, endsld, midsld, ничего не дали.<br>
Пробовал бахнуть даже fake и repeats дополнительно к multisplit, но тоже ничего не вышло. Вообще 0% пробития.<br>
На multidisorder работает отлично. Даже не знаю, почему вообще не хочет работать multisplit.</p></td><td>2024-11-12T10:41:05.003Z</td></tr><tr><td>irregular-circle</td><td><p>А вот со сплитом не работает. Такое чувство, что каким-то конечным автоматом парсят сегменты, проходящие через DPI.</p></td><td>2024-11-12T10:41:38.534Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="2780" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>Даже не знаю, почему вообще не хочет работать multisplit.</p>
</blockquote>
</aside>
<p>DPI умеет собирать фрагменты по порядку, но не умеет вне порядка<br>
nfqws, кстати, тоже умеет собирать TLS лишь по порядку. Но он и не расчитан на распознавание обманов, потому что работает с исходным трафиком, который не обманывает. Сборка нужна в основном для кибера.</p>
<p>на моем прове на http DPI  пинает на заглушку при любом количестве фрагментов, а при disorder соединение зависает. на https тоже самое, только не зависает при disorder</p>
<p>Они на каком-то прове добавили проверку еще на тупое вхождение подстроки “<a href="http://googlevideo.com">googlevideo.com</a>”, и поэтому не работает обычный disorder</p></td><td>2024-11-12T10:48:52.665Z</td></tr><tr><td>irregular-circle</td><td><p>Открывает все что мне нужно +дискорд и ютуб. Только не факт, что у вас такие же алгоритмы DPI.<br>
Ещё работает гуглофейк с disorder2 и --dpi-desync-split-tls=snisld. Без репитов.</p></td><td>2024-11-12T11:20:17.475Z</td></tr><tr><td>abc555</td><td><p>На с чёт того что исчез нолик я так подумал сегодня, что наверно это мой косяк, просто автоматом бывает что то делаю, что даже не замечаю, точнее не запоминаю что делал, возможно бадун сыграл свою роль, не знаю</p></td><td>2024-11-12T12:22:51.910Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="electrifying" data-post="2779" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>и фейк гугла</p>
</blockquote>
</aside>
<p>Вряд ли это получится. TLS 1.2 перестают работать без фейка</p>
<aside class="quote no-group quote-modified" data-username="irregular-circle" data-post="2783" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>–dpi-desync-split-tls=snisld</p>
</blockquote>
</aside>
<p>Это вообще не работает, прога сразу вылетает.</p></td><td>2024-11-12T13:30:06.853Z</td></tr><tr><td>bolvan</td><td><p>seqovl в MS/MD все-таки будет<br>
для MS на каждый сегмент. в linux еще сечется превышение MTU и повторяется отправка без seqovl при ошибке. в других системах нет возможности продетектить превышение MTU. при превышении соединение сломается. тут сами думайте и оценивайте ваши сплиты и размер seqovl.<br>
расчет идет на то, что пакеты не будут в сети перепутаны порядком, иначе будет срыв техники. пакеты идут залпом. как только первый приходит, оригинальная часть тут же выдается сервером в сокет, а tcp window смещается в плюс. если будет дисордер по естественным причинам, сервер сглотнет seqovl fake вместо real</p>
<p>для MD на все, кроме первого сегмента. если на какой-то части seqovl&gt;=начального смещения, то seqovl автоматом отменяется для этой части. иначе будет срыв техники, но здесь он легко виден сразу, и можно отменить гарантированный фейл. превышения MTU в этом варианте быть не может в принципе, тк отсылаемые пакеты не увеличиваются относительно оригинала.</p>
<p>если вдруг TLS ClientHello размазано по разным пакетам, то позиции сплита нормализуются под текущий пакет. выбираются только те, что в него вписываются. правила работают с нормализованными позициями и смещениями внутри этого пакета.  то есть nfqws не обьединяет мультипакетный запрос. он работает только внутри каждого пакета.</p></td><td>2024-11-12T13:31:46.795Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="KDS" data-post="2787" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Это вообще не работает, прога сразу вылетает.</p>
</blockquote>
</aside>
<p>Так автор еще в прод изменения не катил</p></td><td>2024-11-12T14:28:59.582Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="KDS" data-post="2787" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<aside class="quote no-group quote-modified" data-username="irregular-circle" data-post="2783" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>–dpi-desync-split-tls=snisld</p>
</blockquote>
</aside>
<p>Это вообще не работает, прога сразу вылетает.</p>
</blockquote>
</aside>
<p>В релизе этого нет еще.<br>
А в следующем идет на депрекацию split-tls и split-http-req. Упоминания уберутся, хотя внутренне будет поддерживаться совместимость пока.<br>
Теперь все это делается через split-pos и  маркеры. В крайнем случае через мультипрофиль, если надо применять разное для tls, http и других</p></td><td>2024-11-12T14:32:41.696Z</td></tr><tr><td>Quqas(Quqas)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/187378ab53ca0f7ca6ae654690b4199221c154c3.jpeg" data-download-href="https://ntc.party/uploads/default/187378ab53ca0f7ca6ae654690b4199221c154c3" title="image"><img src="zapret-обсуждение-726/187378ab53ca0f7ca6ae654690b4199221c154c3_2_690x360.jpeg" alt="image" data-base62-sha1="3uiR2IYf2qMuI7RjBfU0coGo7MD" width="690" height="360" srcset="zapret-обсуждение-726/187378ab53ca0f7ca6ae654690b4199221c154c3_2_690x360.jpeg, zapret-обсуждение-726/187378ab53ca0f7ca6ae654690b4199221c154c3.jpeg 1.5x, zapret-обсуждение-726/187378ab53ca0f7ca6ae654690b4199221c154c3.jpeg 2x" data-dominant-color="1E1E1E"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">979×512 70.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
не все ещё выходные каналы чебурнилы перекрыли</p>
<p>это без vpn и прочего<br>
жаль пров сугубо региональныймелкий. но при этом видать сосвоими каналами.</p></td><td>2024-11-12T14:47:55.937Z</td></tr><tr><td>irregular-circle</td><td><p>А если попробовать то же самое (гуглофейк, disorder2, без репитов) только --dpi-desync-split-pos=155 отдельно для <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>? С отключенным кибером. Просто ради интереса.</p></td><td>2024-11-12T15:31:28.006Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group quote-modified" data-username="irregular-circle" data-post="2792" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/f08c70/48.png" class="avatar"> irregular-circle:</div>
<blockquote>
<p>–dpi-desync-split-pos=155</p>
</blockquote>
</aside>
<p><a href="https://youtu.be/9mvm0TlHO4s" rel="noopener nofollow ugc">Да, это жостка</a></p></td><td>2024-11-12T15:44:31.096Z</td></tr><tr><td>yatolkosprosit</td><td><p>Внезапно перестал работать Ютуб в Хроме, хотя пару часов назад работал. Теперь же не загружается ни главная страница, ни старницы с конкретным видео. Просто ничего не происходит. В Firefox пока еще работает.</p></td><td>2024-11-12T16:19:51.095Z</td></tr><tr><td>censorliber</td><td><p>В одной из групп тоже у одного человека только что отвалился ютуб. Какой у вас провайдер? Провайдер сибсети, Новосибирская.</p></td><td>2024-11-12T16:22:17.484Z</td></tr><tr><td>yatolkosprosit</td><td><p>Билайн (проводной). Только это все равно не от провайдера зависит.</p>
<p>Снова заработал. Возможно это из-за того, что я сначала запустил Хром, а потом включил Запрет?</p></td><td>2024-11-12T16:23:50.571Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Ещё одно <a href="https://www.youtube.com/watch?v=W_yF7fNRvhE" rel="noopener nofollow ugc">поделие</a>, хренобень на основе Запрета, но зато с визуальным интерфейсом. )))<br>
Я смотрю Гудбай и Запрет прям пошли в народ со всеми вытекающими. Это слава.</p></td><td>2024-11-12T16:41:11.265Z</td></tr><tr><td>rewhat</td><td><details>
<summary>
Спойлер</summary>
<aside class="quote no-group" data-username="Zanoni" data-post="2797" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>с визуальным интерфейсом</p>
</blockquote>
</aside>
<p>Это скорее антивизуальный интерфейс. С таким интерфейсом лучше вообще без интерфейса сидеть. Спасибо хоть вирусню не встроили (на первый взгляд по крайней мере).</p>
</details></td><td>2024-11-12T16:44:13.549Z</td></tr><tr><td>anon9001(anon)</td><td><blockquote>
<p>решения которые есть их без конца приходится обновлять и поднастраивать</p>
</blockquote>
<div class="spoiler">
<p>Я не обновнял запрет ни разу с июля fyi</p>
</div></td><td>2024-11-12T16:50:06.211Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>не обновнял запрет ни разу с июля fyi</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/anon9001">@anon9001</a>  Сам Запрет-то ладно, а профили тоже стабильны? Как дело обстоит с ggc?</p></td><td>2024-11-12T17:41:33.842Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="i-no" data-post="2800" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Как дело обстоит с ggc?</p>
</blockquote>
</aside>
<p>У меня ggc работал дольше всех на простом split2… потом 1 октября полностью был заблочен по сни. Мне похоже повезло раз так долго держался. Потом я уже стратегии сам подбирал и читал ман. Щас как и у всех: фейк кекс и репиты нужны</p></td><td>2024-11-12T17:46:03.487Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Главное ubuntu не ставь самую дефолтную с гномом, она самая ужасная, там авторы неадекватны. Почему она самая раскрученная я не понимаю. Если ubuntu то с любой другой оболочкой: xubuntu, kubuntu, ubuntu mate, cinnamon.</p></td><td>2024-11-12T17:50:06.627Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>как и у всех: фейк кекс и репиты</p>
</blockquote>
</aside>
<p>А вот по TCP перестало взлетать так. Пришлось задействовать хопбайхоп и айпифраг второй. Прочее переставало работать вскоре после применения, та же синдата, например. Пока побочные эффекты от этого минимальны, совсем небольшая задерка при воспроизведении видео, и исчезающе малая при перемотке: seek to pos тыкается неограниченно без подвисаний. QUIC при этом летает турбореактивно.</p>
<div class="spoiler">
<p><code>--dpi-desync=hopbyhop,ipfrag2 --dpi-desync-fooling=hopbyhop2</code></p>
</div></td><td>2024-11-12T17:55:23.802Z</td></tr><tr><td>anon9001(anon)</td><td><p>У меня нету ипв6 <img src="https://ntc.party/images/emoji/twitter/disappointed.png?v=12" title=":disappointed:" class="emoji" alt=":disappointed:" loading="lazy" width="20" height="20"></p></td><td>2024-11-12T17:58:02.713Z</td></tr><tr><td>KDS</td><td><p>Вообще мимо, к сожалению</p></td><td>2024-11-12T18:13:08.436Z</td></tr><tr><td>irregular-circle</td><td><p>А судя по логам дизордер в каком месте режет? Не googlevideo? Хотя неважно уже. Все равно это костыль, лучше ждать новой версии.</p></td><td>2024-11-12T18:28:49.842Z</td></tr><tr><td>viveler</td><td><p>Здравствуйте, извините если под камнем но как обходится блокировка RTC каналов дискорд? я пользуюсь preset_russia и абсолютно всё что мне нужно работает (например сам дискорд) но немогу зайти в звонки.</p></td><td>2024-11-12T19:40:34.528Z</td></tr><tr><td>KDS</td><td><p>Например, так:</p>
<details>
<summary>
Спойлер</summary>
<p><code>--filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6</code></p>
</details></td><td>2024-11-12T20:20:08.453Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Blockcheck будет адаптирован под проверку новых стратегий?</p></td><td>2024-11-13T02:47:47.001Z</td></tr><tr><td>easyone11</td><td><aside class="quote" data-post="2746" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/2746">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    В течение нескольких дней. Надо еще в tpws допилить похожую функцию. Доку дописать, блокчек допилить
  </blockquote>
</aside>
</td><td>2024-11-13T03:05:01.831Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> а в --debug=@/tmp/zapretlog.txt нельзя добавить время как в zapret-hosts-auto-debug.log?<br>
И еще вопрос по логу дебага, если в страте --dpi-desync-repeats=10 как это будет видеться в логе? Искал посыл фейк пакетов 10 раз подряд, но не вижу ничего такого.</p></td><td>2024-11-13T04:07:12.814Z</td></tr><tr><td>bolvan</td><td><p>Если надо время, включаем syslog и читаем logread.<br>
Там не только время, но и PID<br>
В логе количество фейков не отражается никак</p></td><td>2024-11-13T05:46:12.096Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> предложение для blockcheck’а добавить флаг на возможность отключения тестирования стратегий с <code>--wssize 1:6</code>. Чтобы в скрипт не лазить, а запускать что-нибудь типа:</p>
<pre><code class="lang-auto">WSSIZE_TEST=0 ./blockcheck.sh
</code></pre></td><td>2024-11-13T07:39:19.003Z</td></tr><tr><td>bolvan</td><td><p>Это частный случай.<br>
Если делать, то надо выделять группы тестов, называть их как-то и задавать по именам.<br>
Если отказаться от tls 1.2 теста, то wssize не будет. Для 1.3 он не выполняется</p></td><td>2024-11-13T08:02:56.122Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><ul>
<li>ещё синдату, тоже в большинстве случаев не нужно.<br>
И быстрее бы проверка проходила, если можно было исключать стратегии, точно не работающие у определенного провайдера.</li>
</ul></td><td>2024-11-13T08:03:31.753Z</td></tr><tr><td>viveler</td><td><p>это можно вставить как то в preset_russia?</p></td><td>2024-11-13T09:50:54.526Z</td></tr><tr><td>Aleksandr75ru</td><td><p>А разве, в данном пресете, по умолчанию не этот параметр стоит?<br>
Вот, скрин из батника bolvan</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/e956243572b696bbbff014edab53d9b3c8ac8a7b.png" data-download-href="https://ntc.party/uploads/default/e956243572b696bbbff014edab53d9b3c8ac8a7b" title="2024-11-13_185703"><img src="zapret-обсуждение-726/e956243572b696bbbff014edab53d9b3c8ac8a7b_2_690x82.png" alt="2024-11-13_185703" data-base62-sha1="xibO5bjWFSr5K5u1cyUyvp1xTcf" width="690" height="82" srcset="zapret-обсуждение-726/e956243572b696bbbff014edab53d9b3c8ac8a7b_2_690x82.png, zapret-обсуждение-726/e956243572b696bbbff014edab53d9b3c8ac8a7b_2_1035x123.png 1.5x, zapret-обсуждение-726/e956243572b696bbbff014edab53d9b3c8ac8a7b_2_1380x164.png 2x" data-dominant-color="F4F4F5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">2024-11-13_185703</span><span class="informations">1946×234 19.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-13T09:57:21.539Z</td></tr><tr><td>viveler</td><td><p>по крайней мере у меня голосовые звонки не работают да и посмотрел вроде как нету</p></td><td>2024-11-13T09:57:49.955Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Тогда вставьте на новую строку и все. Не забудьте в конце предыдущей строки добавить --new ^<br>
Например, вот строка:</p>
<details>
<summary>
Спойлер</summary>
<p><code>--filter-tcp=443 --hostlist="%~dp0list-youtube.txt" --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^</code></p>
</details>
<p>А вот это уже нужная вам строчка после нее:</p>
<details>
<summary>
Спойлер</summary>
<p><code>--filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6</code></p>
</details></td><td>2024-11-13T09:59:08.304Z</td></tr><tr><td>viveler</td><td><p>хорошо, кстати батники очень отличаются</p>
<p>было обновление?</p></td><td>2024-11-13T09:59:35.505Z</td></tr><tr><td>Aleksandr75ru</td><td><p>4 дня назад <a href="https://github.com/bol-van/zapret-win-bundle" rel="noopener nofollow ugc">обновлялась репа</a> для винды.</p></td><td>2024-11-13T10:01:06.777Z</td></tr><tr><td>viveler</td><td><p>надо будет перекачать…</p></td><td>2024-11-13T10:01:18.480Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Не пойму почему служба не запускается, ошибок в логах не вижу, сами бинарники свои никуда тоже не пишут (либо я их не нашел?).</p>
<details>
<summary>
Спойлер</summary>
<pre data-code-wrap="bash"><code class="lang-bash">pi@raspberrypi:/opt/zapret $ sudo systemctl stop zapret
pi@raspberrypi:/opt/zapret $ sudo systemctl start zapret
pi@raspberrypi:/opt/zapret $ sudo systemctl status zapret
○ zapret.service
     Loaded: loaded (/etc/systemd/system/zapret.service; enabled; preset: enabled)
     Active: inactive (dead) since Wed 2024-11-13 14:53:13 +05; 3s ago
   Duration: 1y 7month 3w 5d 22h 32min 40.995s
    Process: 32274 ExecStart=/opt/zapret/init.d/sysv/zapret start (code=exited, status=0/SUCCESS)
    Process: 32382 ExecStop=/opt/zapret/init.d/sysv/zapret stop (code=exited, status=0/SUCCESS)
        CPU: 602ms

Nov 13 14:53:12 raspberrypi zapret[32318]: setting high oom kill priority
Nov 13 14:53:12 raspberrypi zapret[32318]: reloading nftables set backend (no-update)
Nov 13 14:53:13 raspberrypi zapret[32274]: Inserting nftables ipv4 rule for nfqws postrouting (qnum 200) : tcp dport {80,443} ct original packets 1-9
Nov 13 14:53:13 raspberrypi zapret[32274]: Inserting nftables ipv4 rule for nfqws prerouting (qnum 200) : tcp sport {80,443} ct reply packets 1-3
Nov 13 14:53:13 raspberrypi zapret[32274]: Inserting nftables ipv4 rule for nfqws postrouting (qnum 200) : udp dport {443,50000-50090} ct original packets 1-9
Nov 13 14:53:13 raspberrypi zapret[32382]: Stopping daemon 3: /opt/zapret/nfq/nfqws
Nov 13 14:53:13 raspberrypi zapret[32418]: No /opt/zapret/nfq/nfqws found running; none killed.
Nov 13 14:53:13 raspberrypi zapret[32382]: Clearing nftables
Nov 13 14:53:13 raspberrypi systemd[1]: zapret.service: Deactivated successfully.
Nov 13 14:53:13 raspberrypi systemd[1]: Started zapret.service.
pi@raspberrypi:/opt/zapret $ ps aux | grep nfqws
pi         32442  0.0  0.2   6088  1920 pts/0    S+   14:53   0:00 grep --color=auto nfqws
</code></pre>
</details>
<p>Пытался вручную запускать через /opt/zapret/init.d/sysv/zapret, чего-то другого тоже не увидел.</p>
<p>Конфиг:</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto"># this file is included from init scripts
# change values here

# can help in case /tmp has not enough space
#TMPDIR=/opt/zapret/tmp

# redefine user for zapret daemons. required on Keenetic
#WS_USER=nobody

# override firewall type : iptables,nftables,ipfw
FWTYPE=nftables
# nftables only : set this to 0 to use pre-nat mode. default is post-nat.
# pre-nat mode disables some bypass techniques for forwarded traffic but allows to see client IP addresses in debug log
#POSTNAT=0

# options for ipsets
# maximum number of elements in sets. also used for nft sets
SET_MAXELEM=522288
# too low hashsize can cause memory allocation errors on low RAM systems , even if RAM is enough
# too large hashsize will waste lots of RAM
IPSET_OPT="hashsize 262144 maxelem $SET_MAXELEM"
# dynamically generate additional ip. $1 = ipset/nfset/table name
#IPSET_HOOK="/etc/zapret.ipset.hook"

# options for ip2net. "-4" or "-6" auto added by ipset create script
IP2NET_OPT4="--prefix-length=22-30 --v4-threshold=3/4"
IP2NET_OPT6="--prefix-length=56-64 --v6-threshold=5"
# options for auto hostlist
AUTOHOSTLIST_RETRANS_THRESHOLD=3
AUTOHOSTLIST_FAIL_THRESHOLD=3
AUTOHOSTLIST_FAIL_TIME=60
# 1 = debug autohostlist positives to ipset/zapret-hosts-auto-debug.log
AUTOHOSTLIST_DEBUGLOG=0

# number of parallel threads for domain list resolves
MDIG_THREADS=30

# ipset/*.sh can compress large lists
GZIP_LISTS=1
# command to reload ip/host lists after update
# comment or leave empty for auto backend selection : ipset or ipfw if present
# on BSD systems with PF no auto reloading happens. you must provide your own command
# set to "-" to disable reload
#LISTS_RELOAD="pfctl -f /etc/pf.conf"

# mark bit used by nfqws to prevent loop
DESYNC_MARK=0x40000000
DESYNC_MARK_POSTNAT=0x20000000

TPWS_SOCKS_ENABLE=0
# tpws socks listens on this port on localhost and LAN interfaces
TPPORT_SOCKS=987
# use &lt;HOSTLIST&gt; and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir
# hostlist markers are replaced to empty string if MODE_FILTER does not satisfy
# &lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list
TPWS_SOCKS_OPT="
--filter-tcp=80 --methodeol &lt;HOSTLIST&gt; --new
--filter-tcp=443 --split-tls=sni --disorder &lt;HOSTLIST&gt;
"

TPWS_ENABLE=0
TPWS_PORTS=80,443
# use &lt;HOSTLIST&gt; and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir
# hostlist markers are replaced to empty string if MODE_FILTER does not satisfy
# &lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list
TPWS_OPT="
--filter-tcp=80 --methodeol &lt;HOSTLIST&gt; --new
--filter-tcp=443 --split-tls=sni --disorder &lt;HOSTLIST&gt;
"

NFQWS_ENABLE=1
# redirect outgoing traffic with connbytes limiter applied in both directions.
NFQWS_PORTS_TCP=80,443
NFQWS_PORTS_UDP=443,50000-50090
# PKT_OUT means connbytes dir original
# PKT_IN means connbytes dir reply
# this is --dpi-desync-cutoff=nX kernel mode implementation for linux. it saves a lot of CPU.
NFQWS_TCP_PKT_OUT=9
NFQWS_TCP_PKT_IN=3
NFQWS_UDP_PKT_OUT=9
NFQWS_UDP_PKT_IN=0
# redirect outgoing traffic without connbytes limiter and incoming with connbytes limiter
# normally it's needed only for stateless DPI that matches every packet in a single TCP session
# typical example are plain HTTP keep alives
# this mode can be very CPU consuming. enable with care !
#NFQWS_PORTS_TCP_KEEPALIVE=
#NFQWS_PORTS_UDP_KEEPALIVE=
# use &lt;HOSTLIST&gt; and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir
# hostlist markers are replaced to empty string if MODE_FILTER does not satisfy
# &lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list
#NFQWS_OPT="--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new --filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 &lt;HOSTLIST_NOAUTO&gt;"
NFQWS_OPT="--filter-tcp=443 --hostlist=/opt/zapret/ipset/russia-discord.txt --dpi-desync=split --dpi-desync-split-pos=5 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=/opt/zapret/files/bystro_fake/tls_clienthello_1.bin --dpi-desync-repeats=2 --dpi-desync-ttl=5 --new --filter-udp=443 --hostlist=/opt/zapret/ipset/russia-discord.txt --dpi-desync=fake,udplen --dpi-desync-udplen-increment=5 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/bystro_fake/quic_2.bin --dpi-desync-repeats=7 --dpi-desync-cutoff=n2 --new --filter-udp=50000-50090 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n3"

# none,ipset,hostlist,autohostlist
MODE_FILTER=none

# openwrt only : donttouch,none,software,hardware
FLOWOFFLOAD=none

# openwrt: specify networks to be treated as LAN. default is "lan"
#OPENWRT_LAN="lan lan2 lan3"
# openwrt: specify networks to be treated as WAN. default wans are interfaces with default route
#OPENWRT_WAN4="wan vpn"
#OPENWRT_WAN6="wan6 vpn6"

# for routers based on desktop linux and macos. has no effect in openwrt.
# CHOOSE LAN and optinally WAN/WAN6 NETWORK INTERFACES
# or leave them commented if its not router
# it's possible to specify multiple interfaces like this : IFACE_LAN="eth0 eth1 eth2"
# if IFACE_WAN6 is not defined it take the value of IFACE_WAN
IFACE_LAN=wlan0
#IFACE_WAN=
#IFACE_WAN6="ipsec0 wireguard0 he_net"

# should start/stop command of init scripts apply firewall rules ?
# not applicable to openwrt with firewall3+iptables
INIT_APPLY_FW=1
# firewall apply hooks
#INIT_FW_PRE_UP_HOOK="/etc/firewall.zapret.hook.pre_up"
#INIT_FW_POST_UP_HOOK="/etc/firewall.zapret.hook.post_up"
#INIT_FW_PRE_DOWN_HOOK="/etc/firewall.zapret.hook.pre_down"
#INIT_FW_POST_DOWN_HOOK="/etc/firewall.zapret.hook.post_down"

# do not work with ipv4
#DISABLE_IPV4=1
# do not work with ipv6
DISABLE_IPV6=1

# select which init script will be used to get ip or host list
# possible values : get_user.sh get_antizapret.sh get_combined.sh get_reestr.sh get_hostlist.sh
# comment if not required
#GETLIST=get_antizapret_domains.sh
</code></pre>
</details></td><td>2024-11-13T10:01:53.230Z</td></tr><tr><td>i-no(...)</td><td><p>Он вообще работал хоть когда-то? Пока опытные линуксойды не откликнулись, пропробуйте, может быть, запустить <code>nfqws</code> без параметров, чтобы понять, что он на месте и работоспособен. Он же должен выдать просто список ключей и выйти. Затем, может быть, редактировались скрипты, и где-то закралась ошибочка. При описании стратегий, например. Надо искать.</p>
<p>По идее, если вся среда уже была сконфигурирована, бинарник можно же вручную запустить с необходимыми параметрами.</p></td><td>2024-11-13T10:35:59.541Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>/opt/zapret/nfq/nfqws запускается, список ключей выдает.</p></td><td>2024-11-13T10:39:37.077Z</td></tr><tr><td>bolvan</td><td><p>Первым делом надо запускать все это вручную с теми же параметрами.<br>
может какого-то файла нет или права стоят на /opt 700</p></td><td>2024-11-13T10:45:32.669Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Да, действительно, накосячил с путем первого фейка. Я бы понял это раньше, если бы systemd показывал эти ошибки в своем логе или где-то еще. Спасибо за наводку, правда бот для дискорда с новыми стратегиями все равно не может подключиться к голосовому каналу, но это уже другой разговор.</p></td><td>2024-11-13T10:51:14.902Z</td></tr><tr><td>bolvan</td><td><p>Убрал из init скрипта 2&gt;/dev/null и убрал start-stop-daemon.<br>
stderr теперь виден в <code>journalctl -u zapret</code><br>
Но в systemctl status - не виден.<br>
На openwrt оно стартуется через procd. Проще всего его заставить логить через --debug=syslog в самом начале параметров.</p></td><td>2024-11-13T11:28:15.229Z</td></tr><tr><td>iyushin(Roman)</td><td><p>Все работает идеально кроме войса в discord, со всеми конфигами одно и тоже, дней 5 назад проблем не было</p></td><td>2024-11-13T12:01:01.555Z</td></tr><tr><td>anon9001(anon)</td><td><p>Я заметил что чем крупнее сайт тем больше на него мощность тратят. Я пока ковырялся в стратегиях, то обнаружил кучу сайтов которые работают на простейшем одном фейке без фулинга и сплитов вообще, поэтому всякие сайты запрещенных калькуляторов обходить легче. <span class="spoiler">Даже замедление порнхаба обходилось фейком, это я для науки тестировал ибо не знаю других сайтов с тротлингом</span>. Крупные же сайты вроде гуглвидео требуют пляски с бубном и потом уже ломают сайты калькуляторов.</p></td><td>2024-11-13T12:14:54.169Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>гуглвидео требуют пляски</p>
</blockquote>
</aside>
<p>Тут похоже, что дело даже не в крупноте сайтов, а в том, что <em>админресурс</em> во всех смыслах этого слова брошен как раз на GGC. Ну, это пока так. Хотя в чисто технической части волна пока не до всех регионов докатилась.</p></td><td>2024-11-13T12:22:16.095Z</td></tr><tr><td>bolvan</td><td><p>Это ожидаемо. Когда из каждого утюга вылезает zapret, начинают принимать меры.<br>
Только на всех не хватает мощи, потому делают точечно.<br>
На особо важные цели, означенные партией</p></td><td>2024-11-13T12:22:33.661Z</td></tr><tr><td>electrifying</td><td><p>А что ркн мешает вместо замедлений, начать банить  по айпи как они делают уже с некоторыми сайтами ведь тогда и с запретом бороться не надо будет, он просто перестанет работать</p></td><td>2024-11-13T12:24:06.064Z</td></tr><tr><td>bolvan</td><td><p>IP легко сменить. А если CDN, то придется банить его весь.<br>
Кроме того вспоминаются случаи, когда владельцы забаненых доменов выставляли IP адреса сбербанка, вк, и прочего. Помните ? Или даже не владельцы, а expired домены регал дядя вася и назначал ему IP сбербанка</p></td><td>2024-11-13T12:24:43.594Z</td></tr><tr><td>electrifying</td><td><p>А если сайт за cloudflare там обычно один айпи, это тип тоже обойти можно?</p></td><td>2024-11-13T12:25:46.433Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>что ркн мешает</p>
</blockquote>
<p>Ну и ещё им мешает застенчивость особого рода у более высокого начальства. Эти деятели не осмеливаются назвать блокировку блокировкой, они используют другой термин — замедление. То есть, замедление до нуля (по превышению максимальных таймаутов) это не блокировка, примерно как отрицательный рост — это не спад, это именно такой особый подвид роста. Это такой образ мысли, который во многом определяет тип управляющих воздействий, ну и отчасти служит, как они считают, громоотводом. Это важный момент в том плане, что именно благодаря ему zapret полезен сейчас и будет полезен дальше долго, на мой взгляд. А вот у соседей в этом плане жёстче: не только по айпи забанят, но и уберут маршруты. Может дойти и до точечного физического уничтожения сетевой инфраструктуры, именно с их стороны. Запрет им уже не поможет. Видно, что им свое население не жалко. А нашим жалко.</p></td><td>2024-11-13T12:37:39.075Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="i-no" data-post="2836" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>и будет полезен дальше долго</p>
</blockquote>
</aside>
<p>Нууу, болван уже на этот вопрос отвечал он сказал что если ркн захочет запрет перестанет работать</p></td><td>2024-11-13T12:41:24.886Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, задачу им так жестко не ставят пока, это помимо технических сложностей. Время покажет, конечно.</p></td><td>2024-11-13T12:43:10.685Z</td></tr><tr><td>electrifying</td><td><p>Согласен, в будущем без своего впс в России будет не обойтись и то, если не дадут команду блокнуть маршруты за рубеж</p></td><td>2024-11-13T12:47:05.449Z</td></tr><tr><td>Aleksandr75ru</td><td><p>И мне кажется, что когда дело дойдет до этого (блокнут Zapret), то в сети появится куча инструкций и однокнопочных решений.<br>
За примером далеко ходить не нужно, сначала волна популярности GDPI и куча сборок, сейчас Zapret и ситуация такая же.<br>
Но надеюсь, что до такого не дойдет.</p></td><td>2024-11-13T12:58:32.954Z</td></tr><tr><td>bolvan</td><td><p>Я бы не был так уверен.<br>
GDPI и zapret работают по одному принципу. Но GDPI более шаблонен, а zapret дает больше гибкости в настройке того же самого метода.<br>
Но когда в принципе метод накроется, останется только проксирование трафика.<br>
Однокнопочное тут может быть только VPNо подобное что-то.<br>
Но для него требуются сервера. Если набегут халявщики оно быстро закроется.<br>
Как по нагрузке, так и из-за привлечения внимания империи</p></td><td>2024-11-13T13:12:09.688Z</td></tr><tr><td>iyushin(Roman)</td><td><p>А можно заставить работать warp только на discord?</p></td><td>2024-11-13T13:24:16.542Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я так понимаю останется только прокси: протоколы устойчивые к глубокому анализу пакетов - ShadowSocks, Trojan, V2Ray (VMess/VLESS), XTLS, Hysteria, Cloak… Но даже их можно заблокировать, поэтому наверняка возникнут новые протоколы с гибкими утилитами, которые смогут работать через разные протоколы, комбинировать их, например, заблокируют ShadowSocks, ничего страшного, переключаемся на Trojan. VPN и прокси с комбинацией защищенных устойчивых к ТСПУ/DPI протоколов. Или кто-нибудь придумает что-то эффективнее ВПНов и Тора с каким-нибудь ядреным методом, недоступным никакому ДПИ.</p></td><td>2024-11-13T15:00:03.079Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="2821" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>4 дня назад <a href="https://github.com/bol-van/zapret-win-bundle" rel="noopener nofollow ugc">обновлялась репа </a> для винды</p>
</blockquote>
</aside>
<p>Хобба. <img src="https://ntc.party/images/emoji/twitter/astonished.png?v=12" title=":astonished:" class="emoji" alt=":astonished:" loading="lazy" width="20" height="20"> Вот это да.<br>
Спасибо за наводку!!</p>
<p>Честно говоря, с последними перестроениями репозитория и <em>“бинарников больше нет, они теперь только в релизе”</em> я вообще перестал туда заходить. Думал эту репу вообще убили…<br>
Ещё раз спасибо.</p>
<p>Блиииин… Опять за двумя репами следить… ))</p></td><td>2024-11-13T16:13:45.186Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="2840" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>то в сети появится куча инструкций и однокнопочных решений.</p>
</blockquote>
</aside>
<p>Все бесплатные решения в сети сейчас держутся только благодаря запрету, стоит спасибо болвану сказать что он сборку для винды сделал, иначе однокнопочных батников на которых выехал какой-то чел и в своей репе собрал практически столько же звезд, сколько оригинальная репа болвана</p></td><td>2024-11-13T16:25:53.177Z</td></tr><tr><td>Aleksandr75ru</td><td><p>А это кто так выехал? Можно даже в личку. Хотя, мне кажется, что я понимаю, кто это может быть. Но не уверен на все 100%.</p></td><td>2024-11-13T16:50:02.664Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="2840" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>появится куча инструкций и однокнопочных решений.</p>
</blockquote>
</aside>
<p>Однокнопочных решений уже не было с 2021 года когда начали впны и тор по протоколам мочить. Тогда, впервые в жизни нормалфажи начали открывать логи и консоли чтобы посмотреть что было за кнопкой</p></td><td>2024-11-13T17:21:33.381Z</td></tr><tr><td>rewhat</td><td><aside class="quote no-group" data-username="anon9001" data-post="2847" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> anon9001:</div>
<blockquote>
<p>Однокнопочных решений уже не было с 2021</p>
</blockquote>
</aside>
<p>Как нормалфаж заявлю: однокнопочное решение было до блокировки Ютуба - service_install.cmd из goodbyedpi. Без всякого пердолинга всё работало, ну разве что для Инсты надо было хосты прописать.</p></td><td>2024-11-13T17:28:41.036Z</td></tr><tr><td>rewhat</td><td><p>Вот что подумал: сборки Запрета это же тупо набор параметров, которые возможно(!) заработают у большинства пользователей. Эти сборки сами не обновляются, еще могут и не запуститься из-за изменений в репозитории Запрета (как со сборкой KDS было, когда бинарники в релизы переехали), да и вообще у кого-то параметры могут работать, а у кого-то нет. Короче сборки это относительно удобная тема, но не идеал.</p>
<p>Так вот, в теории же можно ли сделать более классную сборку?</p>
<ol>
<li>
<p>Допустим люди из разных городов и провайдеров делятся параметрами для обхода.</p>
</li>
<li>
<p>Далее эти параметры выгружаются на Github Gists например.</p>
</li>
<li>
<p>Создается сборка Запрета в виде бинарника с автоматическим обновлением. При запуске, сборка предлагает выбрать город, и провайдера, всё это подтягивается из Gists, и потом уже Запрет запускается с этими параметрами. Ну и там в фоне еще автообновлятор будет работать.</p>
</li>
</ol>
<p>Ну типа того. Это же по идее лучше чем обычные сборки на cmd’шках.</p>
<p>Еще в фоне можно крутить какой-нибудь интеллектуальный blockcheck, который будет каждый день пинговать googlevideo например, и если будет замедление, то будет сам подбирать параметры, и отправлять их на сервер, чтобы новые параметры утвердили пользователи, и эти параметры попали в списки для всех.</p></td><td>2024-11-13T18:16:09.962Z</td></tr><tr><td>oniksofers(Oniksofers)</td><td><p><strong>(Можно) грабить корованы</strong> Tm</p></td><td>2024-11-13T18:26:18.727Z</td></tr><tr><td>rewhat</td><td><p>Ха-ха конечно, но это же не так фантастично звучит, ну в теории.</p></td><td>2024-11-13T18:26:51.911Z</td></tr><tr><td>uwu(uwu)</td><td><p>ага, судя по этой стратегии в топе, с которым будут делиться люди будет та самая 50000-65355 tamper,fake<br>
на уровне попросить конфигов у чатгпт)</p></td><td>2024-11-13T18:27:08.461Z</td></tr><tr><td>rewhat</td><td><p>Поэтому должна быть модерация конфигов. Главная проблема, где взять столько людей, которые будут делиться разными параметрами, и модерировать конфиги. Вот в Китае бы зашло наверное, там комьюнити намного больше по идее.</p></td><td>2024-11-13T18:28:03.663Z</td></tr><tr><td>anon9001(anon)</td><td><p>Что вообще случилось с пакет манглами в китае? Когда я в последний раз читал про это, то это были старые research paper из 2015 года и вот такая <a href="https://github.com/NullHypothesis/brdgrd" rel="noopener nofollow ugc">прога</a> все что я нашел на эту тему. Кстати мне интересно, это правда “защищает” мосты или нет, может <a class="mention" href="/u/bolvan">@bolvan</a> проверить, там всего один .c файл</p></td><td>2024-11-13T18:47:40.457Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я так понимаю, что для реализации всего этого нужен программист. Хороший опытный специалист. А оные за бесплатно обычно не работают.</p></td><td>2024-11-13T18:49:22.132Z</td></tr><tr><td>rewhat</td><td><p>Механизм обновления программы, подтягивания, и публикации списков не так сложно сделать по идее. Может дырявенько и кривенько, но и я бы написал. А интеграция с Запретом (тем более что он на C или C++), и подбор параметров для него - тут я вообще не бум-бум. Может для прикола как-нибудь, когда-нибудь, наверное…</p>
<p>Ну в самом простом случае: сделать механизм обновления самой программы, и списков. То есть тупо скачал сборку, она либо сама обновилась, либо нет, и обновились списки “город-провайдер”, Запрет запустился. Списки обновляют ограниченный круг людей. В таком случае, это несложно.</p></td><td>2024-11-13T18:51:23.449Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="2846" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>А это кто так выехал?</p>
</blockquote>
</aside>
<p>Flowseal</p></td><td>2024-11-13T19:09:51.829Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>На мой взгляд, составлять и где-то постоянно хранить списки стратегий по обману  провайдеров страны - это тупиковый путь. Когда-нибудь могут и личную ответственность влепить за такое.<br>
Лучше довести до ума Блокчек, сделать сканирование более быстрым и эффективным, чтобы в конце выдавались по-настоящему рабочие стратегии. Тогда все остальные будет не нужно. Просканировал своего провайдера, выявил стратегии - и подставляй в пресет.</p></td><td>2024-11-13T19:14:46.451Z</td></tr><tr><td>rewhat</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2858" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Когда-нибудь могут и личную ответственность влепить за такое.</p>
</blockquote>
</aside>
<p>Маловероятно конечно… Скорее беспокоит, что могут забанить например репозиторий по запросу РКН. Хотя не знаю, были ли такие кейсы когда-то.</p>
<p>Сделать крутой блокчек тоже клевая идея. Тут вроде кто-то предлагал разделить параметры по весам, вот че-то подобное бы сделать, чтоб пользователь руками ничего не делал, а всё было на автоматике. Чтоб реально была самая тупая вещь по обходу блокировок: пользователь нажал кнопку, и программа сама всё сделала.</p></td><td>2024-11-13T19:18:56.810Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2855" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Я так понимаю, что для реализации всего этого нужен программист. Хороший опытный специалист. А оные за бесплатно обычно не работают.</p>
</blockquote>
</aside>
<p>Да, такого болвана как болван, еще поискать. Чтобы задарма.<br>
Болван за идею работает. Только своя у него идея. Она не включает поднос ко рту на блюдечке.<br>
Идея - нести образование в массы. Чтобы народ учился и готовился к закручиванию гаек.</p></td><td>2024-11-13T19:20:15.856Z</td></tr><tr><td>rewhat</td><td><p>Только образовываться будет очень немного людей. Итого в большом интернете окажется маленькая элитарная группа русскоязычных пользователей. Кому-то может и хорошо от этого конечно, но я по крайней мере думаю что если у всех будет однокнопочное решение, то РКН просто обосрется со своими блокировками.</p></td><td>2024-11-13T19:24:14.345Z</td></tr><tr><td>bolvan</td><td><p>А я думаю это мы обосремся от репрессивной машины.<br>
Устроят подобие туркменистана + админ ресурс</p></td><td>2024-11-13T19:25:00.267Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>За это Вас и уважаем. Советское воспитание. Сейчас у молодых с идейностью такой полный швах.</p></td><td>2024-11-13T19:32:58.449Z</td></tr><tr><td>anon9001(anon)</td><td><p>Значит все правильно, деньги не на впсы да роутеры нужно сейчас тратить, а на накопители и скачивать интернет</p></td><td>2024-11-13T19:36:02.169Z</td></tr><tr><td>PeFeD(Fedor)</td><td><aside class="quote no-group quote-modified" data-username="anon9001" data-post="2864" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> anon9001:</div>
<blockquote>
<p>деньги не на впсы да роутеры нужно сейчас тратить…</p>
</blockquote>
</aside>
<p>…а на Старлинк.</p></td><td>2024-11-13T20:02:37.710Z</td></tr><tr><td>i-no(...)</td><td><p>Не годится. Всё эфирное глушится на раз. Причем в широком географически охвате. По этой же причине никакие мэши в “туркменистане” не взлетят.</p></td><td>2024-11-13T20:04:33.324Z</td></tr><tr><td>KDS</td><td><p>И куда он там “выехал”? Лаунчер с 3-мя кнопками рвет его 7 батников как Тузик грелку. Потому что там как и в Быстро - универсальные стратегии, которые не надо по провайдерам делить, это заведомо проигрышное решение.</p></td><td>2024-11-13T20:09:33.987Z</td></tr><tr><td>anon9001(anon)</td><td><p>Универсальные не значит оптимизированые</p></td><td>2024-11-13T20:11:08.666Z</td></tr><tr><td>KDS</td><td><p>И кто их “оптимизировать” будет на местах? Мариванна из (вписать нужный город)? Пользователи таких сборок потому ими и пользуются, что ничерта в запрете не понимают и что-то там оптимизировать уж точно не смогут. А кто может - у тех свои сборки и чужие им нафиг не сдались.</p></td><td>2024-11-13T20:17:18.992Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="KDS" data-post="2869" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>у тех свои сборки</p>
</blockquote>
</aside>
<p>У меня # в конфиге стоит на разные строки, и я теперь буду менять опции с какого-нить термакса когда ютуп с телека захочу посмотреть, а основную строку в остальное время оставлять. Тоже бутлег полный, если честно… но я не могу найти стратегий объедениящий ютуп, у него файк кекс все ломает для всего остального</p></td><td>2024-11-13T20:20:51.007Z</td></tr><tr><td>Crab_malevi4</td><td><p>Всех приветствую, сейчас устанавливаю zapret на роутер и тут возник такой вопрос, как там прописывать стратегию nfqws? Я хочу перенести её из сборки YTDisBystro, но как бы я её не писал, zapret упорно ничего не видит, как будто у меня в конфиге вообще ничего не прописано. Конфиг прилагаю<br>
<a class="attachment" href="zapret-обсуждение-726/wbxm5yUjFfDbQ7z41onPhC0XVSj">config</a> (6.8 KB)</p></td><td>2024-11-13T22:19:51.990Z</td></tr><tr><td>KDS</td><td><p>Возможно неправильные пути к хостлистам или нет самих файлов хостлистов. Так же с файлами фейков<br>
А так вроде все правильно</p></td><td>2024-11-13T22:48:50.246Z</td></tr><tr><td>easyone11</td><td><p>походу можно тестить новый запрет, дефолт конфиг уже с мульти*</p><aside class="onebox githubcommit" data-onebox-src="https://github.com/bol-van/zapret/commit/36cd8ca3b2b2c34fc420151bfdab712206816c90">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/commit/36cd8ca3b2b2c34fc420151bfdab712206816c90" target="_blank" rel="noopener">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
    <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/commit/36cd8ca3b2b2c34fc420151bfdab712206816c90" target="_blank" rel="noopener">update config.default</a>
    </h4>

    <div class="github-info">
      <div class="date">
        committed <span class="discourse-local-date" data-format="ll" data-date="2024-11-13" data-time="20:16:06" data-timezone="UTC">08:16PM - 13 Nov 24 UTC</span>
      </div>

      <div class="user">
        <a href="" rel="noopener">
          <img alt="" src="" class="onebox-avatar-inline" width="20" height="20">
          
        </a>
      </div>

      <div class="lines" title="changed 1 files with 4 additions and 4 deletions">
        <a href="https://github.com/bol-van/zapret/commit/36cd8ca3b2b2c34fc420151bfdab712206816c90" target="_blank" rel="noopener">
          <span class="added">+4</span>
          <span class="removed">-4</span>
        </a>
      </div>
    </div>
  </div>
</div>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-14T04:52:34.781Z</td></tr><tr><td>iskander444</td><td><p>Пользуюсь <a href="https://github.com/bol-van/zapret" class="inline-onebox" rel="noopener nofollow ugc">GitHub - bol-van/zapret: DPI bypass multi platform</a>, как уже упоминал - работает стандартный preset_russia.cmd и более чем устраивает. Закинул его в автозагрузку, всё так же работает, но значок на панели задач, который там постоянно висит, немного напрягает. Прочитал инструкцию, понял что можно сделать либо задачу в планировщике через task_create.cmd, либо установить как службу через service_create.cmd, но вот только немного не понял как именно. Подскажите, пожалуйста, как мне перенести настройки из preset_russia.cmd в файл для создания задачи либо службы, не принципиально.</p></td><td>2024-11-14T07:10:19.909Z</td></tr><tr><td>bolvan</td><td><p>В service_install.cmd<br>
убрать REM с set ARGS и call :srvinst<br>
вписать параметры<br>
поставить кавычки на путях с обратными слэшами</p>
<pre><code class="lang-auto">rem set ARGS=^
--wf-tcp=80,443 --wf-udp=443,50000-50099 ^
--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto=\"%~dp0autohostlist.txt\" --new ^
--filter-tcp=443 --hostlist=\"%~dp0list-youtube.txt\" --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=\"%~dp0tls_clienthello_www_google_com.bin\" --new ^
--filter-tcp=80,443 --dpi-desync=fake,disorder2 --dpi-desync-repeats=6 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-udp=50000-50099 --ipset=\"%~dp0ipset-discord.txt\" --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=n4 --new ^
--filter-udp=443 --hostlist=\"%~dp0list-youtube.txt\" --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=\"%~dp0quic_initial_www_google_com.bin\" --new ^
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11
</code></pre>
<p>(надеюсь не надо обьяснять, что убирать rem не надо с двух инсталляций сервиса ?)<br>
schtasks, увы,не может работать с путями длиннее 256 символов. но можно использовать опцию <span class="mention">@config</span> и запихать конфиг в файл. Но там есть недостаток. В cmd есть экспансия текущего пути, в файле ее не будет</p></td><td>2024-11-14T07:31:31.806Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="easyone11" data-post="2875" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>походу можно тестить новый запрет, дефолт конфиг уже с мульти*</p>
</blockquote>
</aside>
<p>Релизка не собрана же еще да и дока не обновлена</p></td><td>2024-11-14T08:11:41.904Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="electrifying" data-post="2879" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Релизка не собрана же еще да и дока не обновлена</p>
</blockquote>
</aside>
<p>code &gt; download zip<br>
бинарники закинуть руками<br>
так нельзя?<br>
правда если в блокчеке еще нет опций, то хз какие тестить кроме тех что в дефолт конфиге</p></td><td>2024-11-14T08:14:14.081Z</td></tr><tr><td>KDS</td><td><p>del</p></td><td>2024-11-14T12:58:37.397Z</td></tr><tr><td>i-no(...)</td><td><p>Работает. Подгрузились профили, большой хостлист (не использую, только для теста). Никаких сообщений об ошибке.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">winws.exe
SHA-256: 8850101e0765d0ce5e4d122e8c97e06a21aea9c923b4688f3b06065dcb3bd096

WinDivert.dll
SHA-256: c1e060ee19444a259b2162f8af0f3fe8c4428a1c6f694dce20de194ac8d7d9a2

WinDivert64.sys
SHA-256: 8da085332782708d8767bcace5327a6ec7283c17cfb85e40b03cd2323a90ddc2
</code></pre>
</details></td><td>2024-11-14T13:17:48.149Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Гендиректор “Мосфильма” Карен Шахназаров - после встречи с Путиным: Замедление YouTube, на мой взгляд, сегодня не очень целесообразно, на что президент сказал, что там бывают всякие пакости. Он выслушал и сказал: «Я разберусь, я посмотрю».</p>
<p>Понимаю, что не по теме. Хотя как не по теме - прямо касается блокировки Ютуба.<br>
Может после этого замедление лукавое снимут?</p></td><td>2024-11-14T13:32:47.294Z</td></tr><tr><td>electrifying</td><td><p>Первый день живёшь в России? Сказать не значит сделать, к тому же я думаю перед ВВП отчитывались и он в курсе всей этой темы</p></td><td>2024-11-14T13:36:14.304Z</td></tr><tr><td>i-no(...)</td><td><p>Не так давно мне поступил входящий звонок от провайдера, первый за всё время и единственный, с вопросом нормально ли всё работает, а то, мол, люди жалуются. Так и было дословно сказано.</p></td><td>2024-11-14T13:48:44.250Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>А вы бы сказали по приколу, что zapret поставил и теперь все работает <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-14T13:49:58.451Z</td></tr><tr><td>i-no(...)</td><td><p>Тут гораздо больший прикол — это как сам факт звонка, так и оговорка “люди жалуются”. За язык я не тянул. Новый корпоративный стиль что ли формируется.</p></td><td>2024-11-14T13:55:43.871Z</td></tr><tr><td>rewhat</td><td><aside class="quote no-group" data-username="i-no" data-post="2887" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Новый корпоративный стиль что ли формируется.</p>
</blockquote>
</aside>
<p>Прикольно было бы, если бы вы такой типа “да, я тоже жалуюсь”, а они такие “не хотите ли расторгнуть договор, и перейти на наш мобильный интернет с уникальным тарифным планом? <img src="https://ntc.party/images/emoji/twitter/point_right.png?v=12" title=":point_right:" class="emoji" alt=":point_right:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/point_left.png?v=12" title=":point_left:" class="emoji" alt=":point_left:" loading="lazy" width="20" height="20">”</p></td><td>2024-11-14T14:07:43.295Z</td></tr><tr><td>i-no(...)</td><td><p>Ребята, звонил не сейл — этих я бы сжёг напалмом без анестезии, они давно заранее предупреждены и потому никогда сами не звонят — а подключатор (техник, инженер). Я его <em>не просил</em>!. Видимо жалоб много настолько, что у него клапан не держит. Теперь любопытно, как ПАО будет выкручиваться из ситуации, в которой вынужденно оказалось. В том числе в связи с использованием zapret, что должно быть и так очевидно особенно если включать жесткие режимы в профиль.</p></td><td>2024-11-14T14:31:50.172Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="i-no" data-post="2887" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>так и оговорка “люди жалуются”</p>
</blockquote>
</aside>
<p>Тут двойной смысл в этом. Либо прова действительно заботит (что врятли), либо из-за твоего НАТовоского ипишника у которого запрет пахает, теперь у всех остальный перестало работать, на что я бы конечно же ввел одним местом по губам прова.</p></td><td>2024-11-14T14:53:24.502Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="2889" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Теперь любопытно, как ПАО будет выкручиваться из ситуации, в которой вынужденно оказалось. В том числе в связи с использованием zapret, что должно быть и так очевидно особенно если включать жесткие режимы в профиль.</p>
</blockquote>
</aside>
<p>zapret использует ПАО ? Вряд ли он потянет их канал</p></td><td>2024-11-14T15:25:16.179Z</td></tr><tr><td>censorliber</td><td><p>Сеггодня с дом ру обратился парень, помог только один конфиг. Не буду его сливать, но у них там очень жестокая ситуация. А также почему-то ютуб с этим одним конфигом работает только в Firefox <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p></td><td>2024-11-14T15:25:59.118Z</td></tr><tr><td>style0092</td><td><p>Не знаю, у меня на дом.ру все хорошо работает на сборке <a class="mention" href="/u/kds">@KDS</a>. Особенно хорошо на неизданном конфиге, естественно с DOH от comms one.</p></td><td>2024-11-14T16:55:01.674Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2891" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>zapret использует ПАО ?</p>
</blockquote>
</aside>
<p>Его (nfqws) использую я, а звонит мне ПАО . Я же гордый благодаря вам, жаловаться им не звоню. Если позвонят ещё и попросят перестать использовать, то дам знать. Может, сумеем предсказать когда наступит “туркменистан”.</p>
<blockquote>
<p>Вряд ли он потянет их канал</p>
</blockquote>
<p>Я их канал) Замечу, что дохленький проц рутера, который тут некоторые на свалку отправляют, не нагружен вообще, как бы я ни старался. Нечем даже в openwrt измерить и отобразить столь малые величины.</p></td><td>2024-11-14T17:26:52.590Z</td></tr><tr><td>bolvan</td><td><p>Лучше вообще не надо говорить о средствах обхода блокировок с провайдером.<br>
Хвастовство не доведет до добра.<br>
Все все понимают. Все молчат.</p></td><td>2024-11-14T17:31:24.995Z</td></tr><tr><td>i-no(...)</td><td><p>Согласен. Я отвечал уклончиво и никаких технических вопросов не обсуждал.</p></td><td>2024-11-14T17:32:36.871Z</td></tr><tr><td>rewhat</td><td><p>Я не очень понял эти посты про провайдера. То есть звонит провайдер, типа “не жалуетесь? всё работает?”. Провайдер спалил что работает условный Ютуб, или вообще спалил что работает Запрет? С чего бы им вообще беспокоиться? Ну вот спалили они Запрет, который обходит не-провайдерские коробки, ну и в чем дело-то.</p></td><td>2024-11-14T17:48:22.635Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, я попытался экстрагировать <em>подтекст</em> этого звонка. Было похоже, на то, что “почему это я не звоню и не жалуюсь как все”. В такой реконструированной постановке вопрос повис в воздухе и ответа не получил. Пусть ищут useful idiots где-то в другом месте.</p>
<p>Ну и к слову до значительной части GGC пинг = 1. Может, там между мной и им есть еще что-нибудь, о чем специально не говорится.</p></td><td>2024-11-14T17:58:42.589Z</td></tr><tr><td>rewhat</td><td><p>Аа, типа провайдер по просьбе РКН например, хочет собрать список любителей обхода, и на них проводить эксперименты. Ну чисто как догадка. Потому что реально, чтоб там кто-то беспокоился, и индивидуально звонил, это странно.</p></td><td>2024-11-14T17:59:55.028Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="rewhat" data-post="2900" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rewhat/48/13085_2.png" class="avatar"> rewhat:</div>
<blockquote>
<p>реально, чтоб там кто-то беспокоился, и индивидуально звонил, это странно.</p>
</blockquote>
</aside>
<p>Вот именно</p></td><td>2024-11-14T18:05:14.294Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><aside class="quote no-group" data-username="i-no" data-post="2899" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Пусть ищут useful idiots где-то в другом месте.</p>
</blockquote>
</aside>
<p>Мне кажется, что вы многое додумываете, накручиваете. В колцентрах провайдеров работают, мягко говоря, не слишком одаренные субъекты, которые вынесут мозг и диалог с ними порой не поддается нормальной логике.</p>
<details>
<summary>
Спойлер</summary>
<p>На самом деле самого дела нет. В самой деятельности заключена самость дела — и наоборот. Наоборот получим оборот на и таким образом перевернем образ(с)</p>
</details></td><td>2024-11-14T18:05:45.657Z</td></tr><tr><td>i-no(...)</td><td><p>Конечно, я предположил, я этого и не скрываю. И я не нервничаю по этому поводу. Но исполнители не часто понимают, зачем их послали что-то делать или сказали что-то кому-то сказать. Звонили не дрессированные ТПшники из колцентра, а тот деятель, что курировал подключение в свое время. Ему же кто-то вменил это в обязанность. И он достаточно адекватен, насколько я помню. Ну, или ему поболтать не с кем было.</p></td><td>2024-11-14T18:14:25.272Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="i-no" data-post="2899" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>“почему это я не звоню и не жалуюсь как все”</p>
</blockquote>
</aside>
<p>За тобой выехали.</p>
<p>Если серьезно то я жду не дождусь если начнут выежать за впны, этим они признают что бессильны против технологий, и у людей повысится опсек наконец таки.</p></td><td>2024-11-14T18:17:18.990Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="anon9001" data-post="2904" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> anon9001:</div>
<blockquote>
<p>если начнут выежать за впны</p>
</blockquote>
</aside>
<p>людей не хватит за каждым выезжать</p></td><td>2024-11-14T18:43:51.040Z</td></tr><tr><td>KDS</td><td><p>Интересно, почему в winbundle оказался winws.exe из v67 (8850101E0765D0CE5E4D122E8C97E06A21AEA9C923B4688F3B06065DCB3BD096)<br>
Чем v68 провинилась?</p></td><td>2024-11-14T18:52:28.090Z</td></tr><tr><td>KDS</td><td><p>Спасибо. А можно то же самое, но из последних исходников?</p></td><td>2024-11-14T19:05:59.428Z</td></tr><tr><td>bolvan</td><td><p>За всем не уследишь. Поправлено</p></td><td>2024-11-14T20:46:21.856Z</td></tr><tr><td>KDS</td><td><p>А можно поинтересоваться, что есть маркер method и как его юзать?</p></td><td>2024-11-14T20:56:17.173Z</td></tr><tr><td>ahcbqflpa</td><td><aside class="quote no-group" data-username="censorliber" data-post="2892" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/censorliber/48/8307_2.png" class="avatar"> censorliber:</div>
<blockquote>
<p>но у них там очень жестокая ситуация</p>
</blockquote>
</aside>
<p>Могу ошибаться, но Дом.ру вроде перехватом DNS занимаются. Просто обхода недостаточно, нужно еще шифрованный DNS включать, DoH там в лисице, “Использовать безопасный DNS-сервер” в хроме, либо в системе.</p></td><td>2024-11-14T21:46:23.388Z</td></tr><tr><td>style0092</td><td><p>Так и есть, без DOH, вообще ловить нечего на дом.ру уж точно)</p></td><td>2024-11-14T22:10:27.264Z</td></tr><tr><td>doomer2007</td><td><blockquote>
<p>Я другой такой страны не знаю, Где так вольно дышит человек.</p>
</blockquote></td><td>2024-11-14T23:40:27.805Z</td></tr><tr><td>Cheeck</td><td><p>Вышел на улицу, вдохнул полной грудью запах свободы, закашлялся.</p></td><td>2024-11-15T00:07:57.899Z</td></tr><tr><td>doomer2007</td><td><p>У меня рядом пивзавод. Пахнет солодом.</p></td><td>2024-11-15T00:22:21.809Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="KDS" data-post="2907" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>А можно то же самое, но из последних исходников?</p>
</blockquote>
</aside>
<aside class="onebox githubactions" data-onebox-src="https://github.com/spvkgn/zapret/actions/runs/11849429352">
  <header class="source">

      <a href="https://github.com/spvkgn/zapret/actions/runs/11849429352" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Commit">
      <svg width="24" height="24" class="github-icon github-icon-success" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm16.28-2.72a.75.75 0 00-1.06-1.06l-5.97 5.97-2.47-2.47a.75.75 0 00-1.06 1.06l3 3a.75.75 0 001.06 0l6.5-6.5z"></path></svg>



  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/spvkgn/zapret/actions/runs/11849429352" target="_blank" rel="noopener nofollow ugc">nfqws: add marker support for seqovl pos</a>
    </h4>

      <div class="github-info">
        build <span class="github-run-number">#227</span>
      </div>
  </div>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-15T03:02:19.701Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Не знаю, писали ли здесь. Но отъехал multidisorder, а multisplit так и не завелся.<br>
Видео прогружает очень хорошо, но вот сам ютуб очень сильно лагает. Видимо, теперь придется отдельную стратегию на ютуб и multidisoder на googlevideo.</p>
<p>upd: Да, пришлось разделить сам сайт и googlevideo на разные стратегии. Multidisorder все еще хорош для пробития googlevideo.</p></td><td>2024-11-15T06:15:24.926Z</td></tr><tr><td>bolvan</td><td><p>tls 1.2 он не пробивает.<br>
идет реакция на сертификат из ответа сервера.<br>
по-прежнему нужен fake с google SNI<br>
или нежелательный wssize</p></td><td>2024-11-15T07:49:45.096Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Все таки, завел multisplit. Работает прекрасно.<br>
А не подскажите, вот 11 часов назад обновлялась репа Zapret win, но я так понимаю, новый функционал еще не был добавлен в нее?</p></td><td>2024-11-15T08:44:47.333Z</td></tr><tr><td>bolvan</td><td><p>Успокойтесь вы все. Делается, тестируется. Ловятся косяки.<br>
Не буду же я выкладывать непроверенное</p></td><td>2024-11-15T09:32:32.407Z</td></tr><tr><td>bolvan</td><td><p>Разбил уже всю голову о BSD.<br>
С linux и windows multisplit  1,midsld чудесно обходит GGC TLS 1.3<br>
На BSD ни в какую.<br>
Часа 3 уже смотрю в шарк. Включил ECN в BSD.<br>
Все тоже самое. Сегменты идут абсолютно идентично. Ловлю с роутера прям с выходного интерфейса.<br>
Вижу разницу только в поле ip.id. Еще в наличии tcp options в пакетах с timestamp.<br>
Но виснет, зараза. После отсыла сплитнутого hello - отруб всех пакетов.<br>
Причем на остальных ресурсах нормально работает.<br>
И если прокснуть на tpws через bsd тем же курлом, что работает на linux/win, тоже виснет. То есть дело именно в BSD.</p>
<p>Еще заметил такую хрень. Если GGC стоит до ТСПУ, то из внешней сети из-за бугра ТСПУ тоже режет. И тоже обходится дурилкой.</p></td><td>2024-11-15T09:36:03.048Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>А может и ну его, этот BSD? На нем доли процента сидят. В основном винда у всех и линукс различных редакций.</p></td><td>2024-11-15T09:38:10.680Z</td></tr><tr><td>easyone11</td><td><p>когда ребёнок инвалид, душа будет болеть у родителей, а запрет это ребёнок болвана)</p></td><td>2024-11-15T09:52:49.440Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p>Тогда по аналогии, запрет - это вундеркинд, а не инвалид <img src="https://ntc.party/images/emoji/twitter/nerd_face.png?v=12" title=":nerd_face:" class="emoji" alt=":nerd_face:" loading="lazy" width="20" height="20"> Не?</p></td><td>2024-11-15T09:54:29.382Z</td></tr><tr><td>bolvan</td><td><p>Вам что, приперло прямо сейчас ?<br>
Блокчек тестируется. Обнаруживаются различные косяки dash, bash, ash, которые приводят к  неожиданному поведению. Все в рабочем порядке</p>
<p>zapret - всего лишь глупая железяка. Как шуруповерт глуп или дрель.<br>
Голова у вас должна быть, чтобы куда надо их сунуть</p></td><td>2024-11-15T10:05:09.471Z</td></tr><tr><td>easyone11</td><td><p>Нет конечно и так всё работает, жиру бесимся потестить просто)<br>
Хотя есть люди у которых найденные страты не работают корректно или даже у кого их мало находятся, для них наверно важно</p></td><td>2024-11-15T10:22:38.682Z</td></tr><tr><td>Pavel4e5(Pavel4e5)</td><td><p>Была похожая проблема, но с GoodbyeDPI, и тоже с GGC, описание здесь: <a href="https://github.com/ValdikSS/GoodbyeDPI/pull/711" rel="noopener nofollow ugc">https://github.com/ValdikSS/GoodbyeDPI/pull/711</a> . ТСПУ точно обращает внимание на поле ip id. Может быть информация в том моем PR поможет.</p></td><td>2024-11-15T10:37:59.605Z</td></tr><tr><td>rader</td><td><p>Ах, вот как. У меня GGC завелось на split2 и 1,midsld с seqovl. На остальное multisplit работает, но пришлось поставить disorder2, ибо ломается SSTP. Есть один клиент. Можно было его в исключения занести, конечно.</p></td><td>2024-11-15T10:47:10.670Z</td></tr><tr><td>rader</td><td><p>Но-но! Я попросил бы! )</p></td><td>2024-11-15T10:47:30.965Z</td></tr><tr><td>bolvan</td><td><p>Фак. Я искал как можно поменять ip.id, чтобы проверить не связано ли.<br>
Нашел кое что в nft, но не работает. Не меняет. По крайней мере на проходящем трафике.<br>
Максимально на выход это совал с макс приоритетом хука. Не удалось.<br>
Надо проверить вставить в dvtws выставление не 0. Щасс</p></td><td>2024-11-15T10:56:27.022Z</td></tr><tr><td>anon9001(anon)</td><td><p>У них днс пойзон идет по полной, а они потом винят запрет, хотя он первым делом говорит, fix your dns I won’t start otherwise.</p></td><td>2024-11-15T10:57:29.758Z</td></tr><tr><td>Pavel4e5(Pavel4e5)</td><td><p>У меня не работало, когда поле id было статичным и не менялось, вне зависимости от значения.<br>
К сожалению не специалист в BSD.</p></td><td>2024-11-15T11:02:40.248Z</td></tr><tr><td>bolvan</td><td><p>Да, эврика. Спасибо.  Достаточно  random в ip_id, чтобы сразу же все заработало. На 0 он плохо реагирует. linux сам выставляет ip_id, а BSD нет</p>
<p>UPD. Важно, чтобы все сегменты имели разные ip_id. 0 - не особое значение.</p></td><td>2024-11-15T11:22:30.685Z</td></tr><tr><td>Pavel4e5(Pavel4e5)</td><td><p>Рад, что помогло. Еще бы <a class="mention" href="/u/valdikss">@ValdikSS</a> не забивал на Pull Request’ы, тогда и в Гудбае бы тоже улучшилась проходимость <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p></td><td>2024-11-15T11:30:36.686Z</td></tr><tr><td>bolvan</td><td><p>ValidkSS - занятой человек. Он делом занимается.<br>
А у болвана слишком много времени на всякую хренотень.<br>
Не был бы болван болваном, он тоже бы щас зарабатывал</p></td><td>2024-11-15T11:31:29.555Z</td></tr><tr><td>Pavel4e5(Pavel4e5)</td><td><p>Ну за эту хренотень и ценим )</p></td><td>2024-11-15T11:41:05.314Z</td></tr><tr><td>Ori</td><td><p>У меня возникли следующие вопросы, возможно глупые:</p>
<ol>
<li>Можно ли указывать разрезы отдельными флагами, типа <code>--dpi-desync=multisplit --dpi-desync-split-pos=1 --dpi-desync-split-pos=midsld</code> или обязательно в рамках одного флага <code>--dpi-desync=multisplit --dpi-desync-split-pos=1,midsld</code></li>
<li>В чем на практике будет разница между <code>--dpi-desync-split-pos=1,midsld</code> и <code>--dpi-desync-split-pos=midsld,1</code>? Я так понимаю, первый вариант отрезает 1 байт, а потом ещё раз режет в середине sld. А второй вариант режет в середине sld, а вот потом он режет на 1 байт дальше середины? Или опять-таки 1-ый байт пакета? Если 1-ый байт, то, получается разницы между этими двумя вариантами нет?</li>
<li>Я правильно понимаю, что на данный момент для <code>--dpi-desync-split-pos=</code> помимо чисел поддерживаются 4 опции: sni, sniext, snisld, midsld. Или есть что-то ещё?</li>
</ol></td><td>2024-11-15T13:08:33.829Z</td></tr><tr><td>bolvan</td><td><ol>
<li>Можно</li>
<li>Ни в чем. При каждом применении идет ресолв всех маркеров в абсолютные смещения, затем сортировка по возрастанию и уникализация (что-то типа numeric sort -u). В качестве базы берется реассемблированный полный запрос, если таковое имеет место. Потом идет нормализация смещений по текущему пакету внутри многопакетного запроса. Все, что вылетело за пакет или равно 0 в пакете, выбрасывается</li>
<li>Эти опции называются маркерами. Абсолютный маркер - когда только число или -число. Минус значит с конца пакета. Относительный маркер нечто, нечто+число и нечто-число</li>
</ol></td><td>2024-11-15T13:15:31.005Z</td></tr><tr><td>Ori</td><td><p>Т.е. можно указать midsld+1 и он отрежет на 1 байт дальше середины?</p></td><td>2024-11-15T13:17:27.616Z</td></tr><tr><td>bolvan</td><td><p>Все верно</p></td><td>2024-11-15T13:18:16.369Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Спасибо за эти вопросы. Сам хотел на днях сформулировать. Но у Вас профессиональнее получилось.<br>
Надеюсь, Болван подробно в Редми напишет как все это делать…</p></td><td>2024-11-15T13:21:41.384Z</td></tr><tr><td>Ori</td><td><p>И эту штуку можно указывать прямо в <code>--dpi-desync-split-pos=</code>? Или нужно в <code>--dpi-desync-split-tls=</code>? Что-то я запутался, учитывая что у них схожая функция.</p></td><td>2024-11-15T13:23:48.332Z</td></tr><tr><td>bolvan</td><td><p>split-tls и split-http-req депрецированы. компат леер есть более-менее, но эти опции уходят</p></td><td>2024-11-15T13:43:06.635Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>Уважаемые господа и дамы, возможно оффтоп, но есть вопрос. Озон одолел… При любых настройках конфига <a href="http://ozon.ru" rel="noopener nofollow ugc">ozon.ru</a> и их приложение люто затупливают. уже в exclude запихал все что только можно, основные домены, поддомены, cdn и т.п, результат один. отследить не могу т.к при открытии консоли браузера все прогружается как ни в чем не бывало. при отключении запрета естественно все начинает бегать без проблем. В частности есть подозрение на .ozone.ru, но добавление его в исключения в  любом виде не дает результатов. Может кто сталкивался?</p></td><td>2024-11-15T15:24:33.502Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="wullikam" data-post="2943" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wullikam/48/10216_2.png" class="avatar"> wullikam:</div>
<blockquote>
<p>в exclude запихал все что только можно</p>
</blockquote>
</aside>
<p>Покажите эксклюд.</p></td><td>2024-11-15T15:32:32.242Z</td></tr><tr><td>wullikam(wullikam)</td><td><p><img src="zapret-обсуждение-726/852096575675b9fd3496ff8ece7796cef90db965.png" alt="image" data-base62-sha1="iZHjVKgLb66Ub7IN4lpXkgzX3qR" width="467" height="311"></p></td><td>2024-11-15T15:36:01.882Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="wullikam" data-post="2943" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wullikam/48/10216_2.png" class="avatar"> wullikam:</div>
<blockquote>
<p>отследить не могу т.к при открытии консоли браузера все прогружается как ни в чем не бывало</p>
</blockquote>
</aside>
<p>Ну,если приложение тупит на телефоне ставьте charles, сертификат на телефон и смотрите</p></td><td>2024-11-15T15:38:02.415Z</td></tr><tr><td>i-no(...)</td><td><p>Какое значение для MODE_FILTER присвоено в вашем конфиге?</p></td><td>2024-11-15T16:07:01.655Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="wullikam" data-post="2943" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wullikam/48/10216_2.png" class="avatar"> wullikam:</div>
<blockquote>
<p>Уважаемые господа и дамы</p>
</blockquote>
</aside>
<p>кинь весь конфиг</p>
<ul>
<li>еще можно debug посмотреть, что там происходит когда zapret видит ozon</li>
</ul></td><td>2024-11-15T16:36:19.820Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>hostlist.<br>
Поймал wireshark’ом<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/c641a698f3889786dcff0af6f91cdee52dee9ed9.png" data-download-href="https://ntc.party/uploads/default/c641a698f3889786dcff0af6f91cdee52dee9ed9" title="image"><img src="zapret-обсуждение-726/c641a698f3889786dcff0af6f91cdee52dee9ed9.png" alt="image" data-base62-sha1="shRc6EaTngk9WH3ppDbvQ3mzilj" width="690" height="87" data-dominant-color="A9B8C5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">941×120 4.29 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
но добавление в исключения так же что то не особо дает результата</p></td><td>2024-11-15T16:46:20.417Z</td></tr><tr><td>lnrd_sknrd</td><td><aside class="quote no-group" data-username="Zanoni" data-post="2883" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Я разберусь, я посмотрю</p>
</blockquote>
</aside>
<p>После этого новость: “На борьбу с VPN и другими способами обхода блокировки было выделено ещё 240 млрд ₽”</p></td><td>2024-11-15T16:52:20.184Z</td></tr><tr><td>printf_ck</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Отличная программа, благодарю за труд и столь экстенсивный мануал куда можно нырять с головой и надолго!</p>
<p>Выявлять оптимальные рабочие стратегии под местного провайдера конечно задача не тривиальная, но в какой-то момент это становится даже забавно.</p>
<p>В итоге за пару недель тестов свёл до двух рабочих вариантов, которые иногда приходится переключать если отваливается YouTube, видимо у них в зоопарке ТСПУ на маршруте новые подопытные включаются / выключаются периодически.</p>
<hr>
<p>Кто-нибудь сумел обойти блокировку мессенджера Session?</p>
<p>Заметил что пару недель назад при использовании <code>zapret</code> как приятный бонус работал Session, последнее время отвалился капитально, поэтому интересно в какую-сторону можно было бы посмотреть, чтобы это стало осмысленной стратегией, а не приятной неожиданностью…</p></td><td>2024-11-15T17:44:42.303Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="printf_ck" data-post="2951" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>В итоге за пару недель тестов свёл до двух рабочих вариантов</p>
</blockquote>
</aside>
<aside class="quote no-group" data-username="printf_ck" data-post="2951" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>Кто-нибудь сумел обойти блокировку мессенджера Session?</p>
</blockquote>
</aside>
<p>Не страдай хренью. Уже имеются универсальные стратегии. Просто <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/1939">скачай</a> и пользуйся.</p></td><td>2024-11-15T17:58:46.929Z</td></tr><tr><td>bolvan</td><td><p>Есть более-менее работающие на большинстве провайдеров стратегии, с тем или иным процентом слома. но совсем универсальных нет.</p></td><td>2024-11-15T19:00:28.660Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Само собой.</p></td><td>2024-11-15T19:04:49.788Z</td></tr><tr><td>anon9001(anon)</td><td><p>Все. Сделал себе бутлег настройку через sed для автоматической смены конфига при вызове yt-dlp, теперь вообще seamless интерграция. Ютубовский конфиг только активируется при качке, а после отбратно ставится, а так как я всю жизнь пользовался yt-dlp для автоматической скачки временно в оперативную память, то разницы до и после блокировки щас ноль. Только на винде жаль нету sed, да и я не помню если putty мог в remote commands через cmd для пайпинга, там как всегда через одно место.</p>
<p>Вобщем огроменые кудосы болвану! Ты это, даже если в россии все эти пакет мэнглы накроются, не забрасывай проект. Куча мелких авторитарных стран использует твой софт по сей день. Я видел турка на форче которые тебя хвалил от души и как ты Эрдогана на@бывашь.</p></td><td>2024-11-15T20:41:40.429Z</td></tr><tr><td>KDS</td><td><p>Не знаю, как там насчет Session, но может автохостлист сработает. Вообще не представляю что это и по каким протоколам бегает.</p></td><td>2024-11-15T20:53:06.536Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="manwithbox" data-post="2952" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>Не страдай хренью.</p>
</blockquote>
</aside>
<p>Страданий не испытываю, мсье испытывает наслаждение от изучения исходного кода и документации, до степени пользователя Gentoo.</p>
<p><img src="https://ntc.party/images/emoji/twitter/face_with_monocle.png?v=12" title=":face_with_monocle:" class="emoji only-emoji" alt=":face_with_monocle:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="KDS" data-post="2956" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Не знаю, как там насчет Session, но может автохостлист сработает.</p>
</blockquote>
</aside>
<p>Это пожалуй единственное из местного конфига что может теоретически сработать.</p>
<aside class="quote no-group" data-username="KDS" data-post="2956" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Вообще не представляю что это и по каким протоколам бегает.</p>
</blockquote>
</aside>
<p>Вообще у них свой onion протокол <a href="https://github.com/oxen-io/lokinet" rel="noopener nofollow ugc">lokinet</a>, на данный момент судя по всему <a href="https://github.com/oxen-io/session-android/issues/1617" rel="noopener nofollow ugc">без какой-либо попытки обхода цензуры</a>, народ на гитхабе недоволен этим фактом…</p>
<aside class="quote quote-modified" data-post="1" data-topic="9223">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/f0a364/48.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BC%D0%B5%D1%81%D1%81%D0%B5%D0%BD%D0%B4%D0%B6%D0%B5%D1%80%D0%B0-session/9223">Блокировка мессенджера Session</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    Похоже, блокируют и мессенджер Session. 
Не соединяется с серверами без VPN/прокси. 
 <a class="lightbox" href="zapret-обсуждение-726/2e555e6f93d642fc01d71a22562b62bd52747583.png" data-download-href="https://ntc.party/uploads/default/2e555e6f93d642fc01d71a22562b62bd52747583" title="Session">[Session]</a>
  </blockquote>
</aside>
</td><td>2024-11-15T21:16:20.405Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, шарк работает, а эксклюды-то — нет. Иначе не ломался бы ozon. Без толку шаркать при не применяющихся экслюдах. Что ещё вы редактировали? Проверьте MODE_FILTER</p></td><td>2024-11-15T22:20:29.708Z</td></tr><tr><td>bolvan</td><td><p>sed под винду легко найти. полно вариантов unix утилит. от cygwin до wsl. можно и native вариант поискать без зависимостей.<br>
на счет переключения конфига - я думаю это все решается через мультистратегию и листы</p></td><td>2024-11-16T08:47:28.246Z</td></tr><tr><td>abc555</td><td><p>На одном из провов не удаётся запустить ютуб, перепробовал кучу комбинаций, блокчек такое как рутрекер находит фактически сразу, но ютуб нет, строку я добавляю в батник с разными вариантами по типу PKTWS_EXTRA=“–dpi-desync-repeats=5 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” но результат на нуле, меняю fake-tls на разное значение и толку ноль. Сам ютуб открывается без обхода, всё прогружается быстро, клацаешь на видео и вечная идёт загрузка. Блокируются только домены если смотреть в браузере *.googlevideo.com, всё остальное проходит. То есть все стандартные стратегии как у всех на этого прова не действуют. Подскажите какие можно попробовать не обычные варианты обхода, а то за неделю я так и не смог запустить ютуб. Запрет стоит в роуторе последний 68 использую nfqws, на всех других провов проблем таких нет. Использую только tls2, хотя и включал tls3, результат тот же, всякие разные варианты типа лаунчеров и прочего перепробовал всё что смог надыбать, чтоб хотя бы ради интереса запустить хотя бы на компе и не смог )</p></td><td>2024-11-16T08:51:21.342Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>не обычные варианты обхода</p>
</blockquote>
</aside>
<p>Если доступен ipv6 можно попробовать специфичное только для него - хопбайхоп с айпифрагом вторым, без фейков.</p>
<p><span class="spoiler">Что-то вот такое:<br>
<code>--filter-tcp=443 --filter-l3=ipv6 --hostlist=/etc/nfqws/googlevideo.txt --dpi-desync=hopbyhop,ipfrag2 --dpi-desync-fooling=md5sig,hopbyhop --dpi-desync-repeats=2 --dpi-desync-autottl6=1:1-10</code></span></p></td><td>2024-11-16T09:01:40.703Z</td></tr><tr><td>abc555</td><td><p>ipv6 пров не предоставляет, только ipv4</p></td><td>2024-11-16T09:02:39.932Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="i-no" data-post="2961" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>–filter-tcp=443 --filter-l3=ipv6 --hostlist=/etc/nfqws/googlevideo.txt --dpi-desync=hopbyhop,ipfrag2 --dpi-desync-fooling=md5sig,hopbyhop --dpi-desync-repeats=2 --dpi-desync-autottl6=1:1-10</p>
</blockquote>
</aside>
<p>Это где-то работает ?<br>
Мой опыт говорит, что сеть беспощадна к ипфрагу на tcp. практически все режется</p></td><td>2024-11-16T09:08:23.582Z</td></tr><tr><td>bolvan</td><td><p>В 69 будет кое-что новое. Мультидисордер. может он спасет</p></td><td>2024-11-16T09:09:37.536Z</td></tr><tr><td>i-no(...)</td><td><p>Конечно работает. На ПАО. Ответственно ведь заявляю.<br>
Побочка есть, но маленькая. В хромовых браузера ОК, в альтернативных приложениях задержки могут быть позаметнее. Но приемлемо. yt-dlp фигачит на максе.</p>
<p>Собственно говоря, без мультикромсатора чтобы по вайфаю что-то послушать-посмотреть с телефона через какой-нибудь <code>NewPipe</code> итп. других вариантов нет. В нем нет QUIC.</p></td><td>2024-11-16T09:13:19.221Z</td></tr><tr><td>abc555</td><td><p>Тогда подождём 69, походу они идут на опережение, а этот пров подмахнул конкретно, наверно хочет чтоб ему медаль вручили или почётную грамоту как лучшему очковтирателю</p></td><td>2024-11-16T09:17:34.407Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="abc555" data-post="2966" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>пров подмахнул</p>
</blockquote>
</aside>
<p>Можно синдату попробовать. Если пров прямо такой растакой, то и пейлоад к ней может сработать. Из минусов - нужно подготовить айпи лист для ggc, хотя чтобы потестить синдату по-быстрому можно и без него.</p></td><td>2024-11-16T09:20:55.050Z</td></tr><tr><td>abc555</td><td><p>А может добавить в лист полные домены *.googlevideo.com ? Их там не много и они не меняются, всегда одни и те же, хотя наверно не прокатит. Вы думаете бан по ip ?</p></td><td>2024-11-16T09:26:04.225Z</td></tr><tr><td>i-no(...)</td><td><p>Нет. Синдата - это орудие нулевой фазы, в авторских терминах. Она не ограничивается обычным хостлистом и будет работать на всё. Это, на мой взгляд, излишне. Поэтому айпи лист как ограничитель её спектра действия. Добавлять в хостлист полные домены, естественно, пустое дело т.к. матчились бы по <code>googlevideo.com</code>, но не в случае любого десинка нулевой фазы, в том числе синдаты.</p>
<div class="spoiler">
<p>Насчет бана по ip, или отключения маршрутов, тут, разумеется туннель. Подойдет даже бесплатный, т.е. спонсируемый ЦРУшниками. Главное тогда не давать им паразитировать на вашем трафике и заруливать в такой туннель исключительно и только трафик на GGC. Если не чувствуете в себе силы надёжно этот момент отработать, то бесплатные туннели лучше не использовать, на мой взгляд. Негативные последствие наступают обычно не сразу и не лично для кого-то, а для социальных групп.</p>
</div></td><td>2024-11-16T09:30:43.530Z</td></tr><tr><td>uwu(uwu)</td><td><p>в какой ggc долбится ютуб на этом прове?)<br>
в рф есть отдельные пулы ggc, которые не пробиваются запретом<br>
в частности это относится например к<code> rr7---sn-gvnuxaxjvh-aome.googlevideo.com</code> . ggc доступен как правило только для ртк, для остальных из внешней сети он не пробивается.<br>
недавно выяснили, что , например, в днр помогает исключение этого пула ggc из выдачи ютубом.</p></td><td>2024-11-16T09:57:58.797Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>Да собственно ничего такого и не вертелось.<br>
<a class="attachment" href="zapret-обсуждение-726/n8Q819Fe1KaxgDpjvBBWaJHp1vo">config</a> (5,8 КБ)</p></td><td>2024-11-16T10:04:11.102Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="uwu" data-post="2970" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>помогает исключение этого пула ggc из выдачи ютубом.</p>
</blockquote>
</aside>
<p>это делается путём назначения на этот адрес локального ip?</p></td><td>2024-11-16T10:14:12.774Z</td></tr><tr><td>i-no(...)</td><td><p>По идее должен сработать вот такой кастомный фильтр в uBlock:<br>
<code>||r*---sn-gvnuxaxjvh-*.googlevideo.com</code></p></td><td>2024-11-16T10:17:13.731Z</td></tr><tr><td>uwu(uwu)</td><td><p>нет, там помогло добавление этого пула серверов в прокси. тогда они пропали из выдачи<br>
по итогу появились новые сервера, которые уже пробивались запретом</p></td><td>2024-11-16T10:21:29.652Z</td></tr><tr><td>easyone11</td><td><p>на ТВ такое не спасёт, какие варианты есть для роутера?</p></td><td>2024-11-16T10:22:28.171Z</td></tr><tr><td>easyone11</td><td><p>тоесть надо проксю поднимать чтобы туда завернуть их?</p></td><td>2024-11-16T10:22:54.368Z</td></tr><tr><td>uwu(uwu)</td><td><p>хз<br>
мы через цензор трекер делали</p>
<details>
<summary>
Спойлер</summary>
<p><a href="https://ntc.party/t/goodcheck-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%BA-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-goodbyedpi-zapret-byedpi/10880/1191" class="inline-onebox">GoodCheck - блокчек-скрипт для GoodbyeDPI, Zapret, ByeDPI - #1191 by fateev1000</a></p>
</details></td><td>2024-11-16T10:23:50.727Z</td></tr><tr><td>easyone11</td><td><p>из странного<br>
2 страты для tcp=80 HOSTLIST, split2 и disorder2, хз может так и можно<br>
cutoff=d3 - это вроде для винды (да и в целом для голосовых диска есть скрипт готовый)<br>
на озон наверно не повлияет, а можешь debug сделать? лог посмотрим что там с озоном делается</p></td><td>2024-11-16T10:24:02.356Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="uwu" data-post="2970" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>в частности это относится например к<code> rr7---sn-gvnuxaxjvh-aome.googlevideo.com</code> . ggc доступен как правило только для ртк, для остальных из внешней сети он не пробивается.</p>
</blockquote>
</aside>
<p>С 2 провов нормально пробивается. Не РТК</p></td><td>2024-11-16T10:25:16.015Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="2979" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>С 2 провов нормально пробивается. Не РТК</p>
</blockquote>
</aside>
<p>у меня с билайна он с любыми настройками не открывается. и ретрансмишены идут до client hello</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/62f4a1f88b7b0e5da3acad11156eac8b815ff748.png" data-download-href="https://ntc.party/uploads/default/62f4a1f88b7b0e5da3acad11156eac8b815ff748" title="изображение"><img src="zapret-обсуждение-726/62f4a1f88b7b0e5da3acad11156eac8b815ff748.png" alt="изображение" data-base62-sha1="e7oUKceqrd9bpiUTOeTCs3HcfS8" width="690" height="230" data-dominant-color="656E77"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">716×239 15.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-16T10:26:53.575Z</td></tr><tr><td>i-no(...)</td><td><p>Тут похлопотнее. Надо тогда список всех быстрых GGC собрать и что-то с ними единообразное делать. Дропать в файрволе или перенаправлять на другие, расположенные чуть дальше и, как пишет <a class="mention" href="/u/uwu">@uwu</a><br>
Обычный веб-плеер пытается подключаться к нескольким GGC и рукотворный вывод их из строя (видимо, любым удобным способом) решает вопрос. Что там в телеках не знаю.</p></td><td>2024-11-16T10:27:01.051Z</td></tr><tr><td>easyone11</td><td><p>Ну ладно, как столкнусь буду подробнее разбираться, пока тоже возникали идея на полный блок его фаирволом и всё.<br>
Интересно если допустим запрос перенаправлять на другой доступный ggc а там этого видео нет, что будет делать труба, дальше направит или стопнет с ошибкой.<br>
ps<br>
курлом <a href="http://rr7---sn-gvnuxaxjvh-aome.googlevideo.com">rr7---sn-gvnuxaxjvh-aome.googlevideo.com</a> пробивается нормально, хз показатель или нет, мгтс мск</p></td><td>2024-11-16T10:30:19.970Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="easyone11" data-post="2982" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>мгтс</p>
</blockquote>
</aside>
<p>Там же должен быть ipv6. Если есть, то под ТВ можно попробовать отдельный профиль на TCP и с десинк хопбайхоп, айпифраг второй. Если будете пробовать и сработает, то маякните. Интересно тоже.</p></td><td>2024-11-16T10:33:58.890Z</td></tr><tr><td>electrifying</td><td><p>А есть сроки выхода 69 релизки в прод?</p></td><td>2024-11-16T12:16:04.867Z</td></tr><tr><td>bolvan</td><td><p>Осталось 2 задачи. Сделать совместимость с APK в новом openwrt и доку дописать.<br>
В остальном уже можно юзать, если самому собрать бинарии</p></td><td>2024-11-16T12:27:02.947Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Есть какой-нибудь обход для доступа к store.playstation и доступа к онлайну? У самого XBOX, мне всего лишь /xsts.auth.xboxlive.com/50.7.85.221 прописать, а тут не знаю.</p></td><td>2024-11-16T12:32:38.607Z</td></tr><tr><td>easyone11</td><td><p>а не они нас банят по гео? или мы их? если мы то<br>
надо дампить сетевые запросы для понимания а что дурить то</p></td><td>2024-11-16T12:40:59.876Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="AnyWay" data-post="2986" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> AnyWay:</div>
<blockquote>
<p>Есть какой-нибудь обход для доступа к store.playstation и доступа к онлайну?</p>
</blockquote>
</aside>
<p>Если речь про ру стор, то нет.</p></td><td>2024-11-16T12:46:59.844Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>А если не ру? Походу только допом впн ставить)</p></td><td>2024-11-16T12:54:06.272Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="AnyWay" data-post="2989" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> AnyWay:</div>
<blockquote>
<p>А если не ру</p>
</blockquote>
</aside>
<p>С не ру ни у кого проблем нет</p></td><td>2024-11-16T13:04:51.883Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="abc555" data-post="2960" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Блокируются только домены если смотреть в браузере</p>
</blockquote>
</aside>
<p>Это проблема только с браузером? В мобильном клиенте как?</p></td><td>2024-11-16T14:30:46.337Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="uwu" data-post="2970" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>в днр помогает исключение этого пула ggc из выдачи ютубом.</p>
</blockquote>
</aside>
<p>Пытался родственникам удаленно утуб запустить там. Плюнул и завернул все в впн. Там гугл в блоке.</p></td><td>2024-11-16T18:29:53.980Z</td></tr><tr><td>q30q1e(Q30q1e)</td><td><p>Имеется 2 компьютера в одной сети, на одном ещё в начале октября был установлен сервис запрета от flowseal, работает всё “дс включительно”<br>
На втором работает всё кроме войса в дискорде, вроде как перепробовал всё, отчаялся</p>
<p>Есть ли какие идеи по данной проблеме?</p>
<p>Ps сейчас остановился на YTDisBystro, сервисы удалял и в ручную и через скрипты, стратегии тоже все перепробовал, с другими решениями абсолютно та же ситуация…</p>
<p>upd возможно это как то связанно с адгвардом?</p></td><td>2024-11-16T19:18:16.363Z</td></tr><tr><td>KDS</td><td><p>Не возможно а так и есть. Эта поделка взяла моду лезть куда не надо и <a href="https://adguard.com/ru/blog/adguard-7-10-for-windows.html">мешать</a> запрету/гудбаю</p></td><td>2024-11-16T19:31:31.876Z</td></tr><tr><td>q30q1e(Q30q1e)</td><td><p>Есть ли возможность их подружить?<br>
upd не сразу заметил ссылку, попробую убрать эту галочку</p></td><td>2024-11-16T19:41:19.884Z</td></tr><tr><td>KDS</td><td><p>Ну, если на странице настроек Антитрекинг убрать галку Защищать от DPI не сработает, то видимо нет.<br>
Возможно понадобится комп перезагрузить</p></td><td>2024-11-16T19:42:47.717Z</td></tr><tr><td>q30q1e(Q30q1e)</td><td><p>Она и не включена :')<br>
Ладно, спасибо за наводку, буду пытаться копать дальше</p></td><td>2024-11-16T19:43:53.056Z</td></tr><tr><td>q30q1e(Q30q1e)</td><td><p>Удалил дискорд из фильтрации адгварда, всё работает х.х<br>
Я с неделю слона в комнате не замечал х.х<br>
В любом случае, спасибо)</p></td><td>2024-11-16T19:50:18.091Z</td></tr><tr><td>easyone11</td><td><p>адвагд мешает только дискорду? если добавить какой нибудь сайт который дурится запретом то он тоже перестанет работать?</p></td><td>2024-11-16T20:02:14.848Z</td></tr><tr><td>q30q1e(Q30q1e)</td><td><p>только дс</p></td><td>2024-11-16T20:13:17.519Z</td></tr><tr><td>drmirro(Drmirro)</td><td><aside class="quote no-group" data-username="uwu" data-post="2970" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>помогает исключение этого пула ggc из выдачи ютубом.</p>
</blockquote>
</aside>
<p>А можно подробнее ,как это сделать на Запрете в роутере?</p></td><td>2024-11-16T20:20:34.693Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="drmirro" data-post="3001" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/drmirro/48/11337_2.png" class="avatar"> drmirro:</div>
<blockquote>
<p>А можно подробнее ,как это сделать на Запрете в роутере?</p>
</blockquote>
</aside>
<p>я не знаком с функционалом запрета на роутерах.<br>
по поводу роутера не подскажу, по идее на нем должны быть возможности роутинга, но я таким не занимался.<br>
я кидал выше ссылку, как это сделать через расширение в браузере, но это актуально в том случае, если редиректор вас определяет на непробиваемый пул</p></td><td>2024-11-16T20:32:40.802Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>А можно блокчек запускать в фоновом режиме на linux/entware? Лог он сохраняет. Т. Е. Запустил выбрал нужные настройки и вышел из entware а он продолжает подбирать. Ну типо служба такая.</p></td><td>2024-11-16T20:54:24.404Z</td></tr><tr><td>Zerogoki(Zero Goki)</td><td><p>У кого-нибудь работает с сайтом <a href="https://kemono.su" rel="noopener nofollow ugc">kemono.su</a>? (через впн и прокси все норм с ним)<br>
использую такой конфиг <code>--dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern="%BIN%tls_clienthello_www_google_com.bin"</code></p>
<p>Все другие сайты успешно пробивает, например <a href="http://x.com" rel="noopener nofollow ugc">x.com</a>, <a href="http://nhentai.net" rel="noopener nofollow ugc">nhentai.net</a>, дискорд, ютуб тоже работает. А на этом сайте ошибка ERR_CONNECTION_RESET всегда.</p></td><td>2024-11-17T01:32:28.173Z</td></tr><tr><td>BorisP</td><td><p>Работает с дефолтным конфигом YTDisBystro v2.2 + DoH <a href="https://dns.controld.com/comss" rel="noopener nofollow ugc">https://dns.controld.com/comss</a></p></td><td>2024-11-17T02:03:47.049Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p><code>kemono.su</code></p>
</blockquote>
<p>Там спереди <code>ddos-guard.net</code><br>
Похоже, что умышленно запечатано с той стороны по гео, поэтому без туннелирования не работает.</p></td><td>2024-11-17T02:32:39.223Z</td></tr><tr><td>easyone11</td><td><p>Почему то у меня запрет логирует время с другим часовым поясом, на роутере время нормальное, а в логах -3 часа.</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/9bab94d12666c37540d8b39ba0c63b72d6393800.png" data-download-href="https://ntc.party/uploads/default/9bab94d12666c37540d8b39ba0c63b72d6393800" title="image"><img src="zapret-обсуждение-726/9bab94d12666c37540d8b39ba0c63b72d6393800.png" alt="image" data-base62-sha1="md7Cobotq5mxcQW9MkCkG2jMZWg" width="690" height="164" data-dominant-color="EBEBEC"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">957×228 24.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>PS<br>
<a class="mention" href="/u/zerogoki">@Zerogoki</a> kemono.su открылся дефолтной стратой + doh комса</p></td><td>2024-11-17T05:45:55.439Z</td></tr><tr><td>electrifying</td><td><p>Сайт в блоке по айпи, не пингуется. Так что запрет не поможет, либо искать другой айпи и в хост прописывать его</p></td><td>2024-11-17T05:46:47.487Z</td></tr><tr><td>BorisP</td><td><p>Так а зачем DoH то ? <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p></td><td>2024-11-17T05:56:52.781Z</td></tr><tr><td>bolvan</td><td><p>Можно. nohup или screen в помощь</p></td><td>2024-11-17T06:19:43.958Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zerogoki" data-post="3004" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zerogoki/48/5403_2.png" class="avatar"> Zerogoki:</div>
<blockquote>
<p><code>--dpi-desync=split2 --dpi-desync-split-seqovl=652 --dpi-desync-split-pos=2 --dpi-desync-split-seqovl-pattern="%BIN%tls_clienthello_www_google_com.bin"</code></p>
<p>Все другие сайты успешно пробивает, например <a href="http://x.com">x.com </a>, <a href="http://nhentai.net">nhentai.net </a>, дискорд, ютуб тоже работает. А на этом сайте ошибка ERR_CONNECTION_RESET всегда.</p>
</blockquote>
</aside>
<p>seqovl в варианте split ломает часть сайтов.<br>
где есть защита от левых sequence numbers за пределами tcp window.<br>
seqovl в варианте disorder не выходит за tcp window, поэтому более совместим. но он точно сломает windows server. <a href="http://rsdn.ru">rsdn.ru</a>, например. так что я бы не рекомендовал использовать seqovl без ограничителей.</p></td><td>2024-11-17T06:21:51.638Z</td></tr><tr><td>electrifying</td><td><p>И как он помочь должен, если сайт в блоке по айпи</p></td><td>2024-11-17T06:26:11.105Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="easyone11" data-post="3007" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>Почему то у меня запрет логирует время с другим часовым поясом, на роутере время нормальное, а в логах -3 часа.</p>
</blockquote>
</aside>
<p>Часовой пояс не выставлен.<br>
В /etc/config/system надо вписать MSK-3 и ребутнуть систему</p>
<pre><code class="lang-auto">
config system
  ........
        option timezone 'MSK-3'
  ........
</code></pre></td><td>2024-11-17T06:26:44.015Z</td></tr><tr><td>easyone11</td><td><p>стоит</p>
<details>
<summary>
Спойлер</summary>
<p><img src="zapret-обсуждение-726/2fadc074511055000fa8880c4e86cb4e23e6399a.png" alt="image" data-base62-sha1="6NMHyGy3GbA00cgmbv4li2aSt62" width="501" height="410"></p>
<p><img src="zapret-обсуждение-726/7658cc25deffebf515b66c3ea2394aacf8295204.png" alt="image" data-base62-sha1="gSWAwNH9VaDkUAFfrWv5E3qFwgI" width="246" height="36"></p>
</details>
<p>отмечу что я просматриваю дебаглог и ранее такого не замечал<br>
либо это вот прям на днях стало либо хз</p></td><td>2024-11-17T06:29:16.995Z</td></tr><tr><td>bolvan</td><td><p>Вот код для получения даты/времени в логе. Тут четко localtime используется.</p>
<pre><code class="lang-auto">int fprint_localtime(FILE *F)
{
	struct tm t;
	time_t now;

	time(&amp;now);
	localtime_r(&amp;now,&amp;t);
	return fprintf(F, "%02d.%02d.%04d %02d:%02d:%02d", t.tm_mday, t.tm_mon + 1, t.tm_year + 1900, t.tm_hour, t.tm_min, t.tm_sec);
}
</code></pre>
<p>Проверил у себя. Время нормальное.<br>
Что говорит команда <code>date</code> ? Там пишется часовой пояс</p></td><td>2024-11-17T06:35:41.433Z</td></tr><tr><td>easyone11</td><td><p><img src="zapret-обсуждение-726/7658cc25deffebf515b66c3ea2394aacf8295204.png" alt="image" data-base62-sha1="gSWAwNH9VaDkUAFfrWv5E3qFwgI" width="246" height="36"><br>
странная фигня, за послед неделю в запрете ничего не менял<br>
на роутере только с форвард днс игрался для пары сайтов<br>
PS<br>
–debug=syslog пишет нормальное время</p></td><td>2024-11-17T06:35:57.196Z</td></tr><tr><td>bolvan</td><td><p>Мог localtime_r по какой-то причине вернуть ошибку, и она не проверяется.<br>
Но по какой - это вопрос. Вроде оно не зависит от файлов таймзоны в системе.</p>
<pre><code class="lang-auto">## ERRORS

The *localtime*() function shall fail if:

**EOVERFLOW**
The result cannot be represented.
</code></pre>
<p>Если левый 64-битный time_t туда подсунуть, который +миллиарды лет. Но этого нет, тк там time() используется</p>
<p>syslog свое время пишет, с zapret никак не связано</p>
<p>Сейчас если убрать что-то из аутолиста и подергать проблема все еще есть ?<br>
Может это была кратковременная ситуация неправильного пояса при обновлении времени или еще по какой-то причине ?</p></td><td>2024-11-17T06:40:20.186Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3017" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сейчас если убрать что-то из аутолиста и подергать проблема все еще есть ?<br>
Может это была кратковременная ситуация неправильного пояса при обновлении времени или еще по какой-то причине ?</p>
</blockquote>
</aside>
<p>проблема всё еще есть<br>
поставил таити option timezone ‘&lt;-10&gt;10’<br>
root@RT-AX59U:~# /etc/init.d/sysntpd restart<br>
root@RT-AX59U:~# date<br>
Sat Nov 16 20:47:56 -10 2024</p>
<p>в дебаг логе всё равно -3 от мск<br>
17.11.2024 06:49:01 : rutor.info : profile 4 : client 192.168.1.8:50022 : proto tls : adding to /opt/zapret/ipset/zapret-hosts-auto.txt<br>
PS<br>
роутер рибутнул<br>
PSS<br>
не критично конечно если это не на что не влияет, но интерено с фига ли так стало</p></td><td>2024-11-17T06:51:33.331Z</td></tr><tr><td>bolvan</td><td><p>strace показывает, что при каждом логировании записи идет обращение к файлу /etc/TZ</p>
<pre><code class="lang-auto">open("/opt/zapret/ipset/zapret-hosts-auto-debug.log", O_WRONLY|O_CREAT|O_APPEND|O_LARGEFILE, 0666) = 6
open("/etc/TZ", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_CLOEXEC) = 7
</code></pre>
<p>он есть ? что в нем ?</p></td><td>2024-11-17T07:16:18.972Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="bolvan" data-post="3015" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p><code>%02d.%02d.%04d</code></p>
</blockquote>
</aside>
<p>Вообще такой формат лучше не использовать.<br>
Либо <code>YYYY-MM-DD</code> (ISO)<br>
Либо <code>17 Nov 2024</code> (WEB/HTTP)</p></td><td>2024-11-17T07:19:59.457Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3020" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>он есть ? что в нем ?</p>
</blockquote>
</aside>
<p>ls -l /etc/TZ<br>
lrwxrwxrwx    1 root     root             7 Jul 16 01:14 /etc/TZ → /tmp/TZ</p>
<p>MSK-3</p></td><td>2024-11-17T07:29:19.105Z</td></tr><tr><td>bolvan</td><td><p>Все ясно. Дело в сборке на github.<br>
В openwrt используется такой патч для musl</p>
<pre><code class="lang-auto">--- a/src/time/__tz.c
+++ b/src/time/__tz.c
@@ -32,6 +32,9 @@ static int r0[5], r1[5];
 static const unsigned char *zi, *trans, *index, *types, *abbrevs, *abbrevs_end;
 static size_t map_size;
 
+static const char *tzfile;
+static size_t tzfile_size;
+
 static char old_tz_buf[32];
 static char *old_tz = old_tz_buf;
 static size_t old_tz_size = sizeof old_tz_buf;
@@ -133,6 +136,15 @@ static void do_tzset()
 		"/usr/share/zoneinfo/\0/share/zoneinfo/\0/etc/zoneinfo/\0";
 
 	s = getenv("TZ");
+
+	/* if TZ is empty try to read it from /etc/TZ */
+	if (!s || !*s) {
+		if (tzfile)
+			__munmap((void*)tzfile, tzfile_size);
+
+		s = tzfile = (void *)__map_file("/etc/TZ", &amp;tzfile_size);
+	}
+
 	if (!s) s = "/etc/localtime";
 	if (!*s) s = __utc;
</code></pre>
<p>без него под openwrt не ставится таймзона и в логах время GMT<br>
Тут вопрос решается только пересборкой тулчейна с этим патчем<br>
или подвезти с классического linux файл /etc/localtime<br>
или пересобрать самому бинарики по docs/compile<br>
или установить env variable /etc/TZ. для nfqws получается нужно лезть в юнит procd или скрипты запуска.<br>
или ln -f /etc/TZ /etc/localtime</p></td><td>2024-11-17T07:31:30.567Z</td></tr><tr><td>easyone11</td><td><p>отлично что нашли причину<br>
с этой проблемой столкнуться все кто на openwrt и её надо фиксить только самостоятельно?</p></td><td>2024-11-17T07:36:14.673Z</td></tr><tr><td>bolvan</td><td><p>Все не так просто.<br>
В openwrt этот патч был сделан, чтобы не тянуть за собой сложную структуру классического файла /etc/localtime. Он был заменен на простой текстовик.<br>
И его классический musl не понимает.<br>
Если подтянуть /etc/localtime с классического linux, сделать export TZ=/etc/localtime<br>
то начинает работать.<br>
По хорошему тут надо собирать патченым тулчейном</p></td><td>2024-11-17T07:37:25.310Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3023" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>или ln -f /etc/TZ /etc/localtime</p>
</blockquote>
</aside>
<p>к сожалению не помогло, роутер рибутал</p>
<p>root@RT-AX59U:~# ls -l /etc/localtime<br>
lrwxr-xr-x    2 root     root             7 Jul 16 01:14 /etc/localtime → /tmp/TZ<br>
root@RT-AX59U:~#</p></td><td>2024-11-17T07:47:38.310Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3025" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Все не так просто.<br>
В openwrt этот патч был сделан, чтобы не тянуть за собой сложную структуру классического файла /etc/localtime</p>
</blockquote>
</aside>
<p>тоесть лучше не делать export TZ=/etc/localtime с линукс файла?<br>
не хочется навредить, с учётом не серьёзности проблемы</p></td><td>2024-11-17T07:50:10.579Z</td></tr><tr><td>KDS</td><td><p>Выдать для этого сайта другой IP, который не в блоке ) Прикиньте, так можно было</p>
<p>Правда, нужен еще перезапуск браузера, чтобы заблоченный IP из кэша DNS стерся, а то браузер так и будет в заблоченный долбиться</p></td><td>2024-11-17T07:52:41.541Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="KDS" data-post="3028" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Выдать для этого сайта другой IP, который не в блоке )</p>
</blockquote>
</aside>
<p>Если сайт за cf или у него один айпишник то не выдаст ничего все равно</p></td><td>2024-11-17T07:55:51.537Z</td></tr><tr><td>KDS</td><td><p>Для кимоно - выдаст</p></td><td>2024-11-17T07:56:34.424Z</td></tr><tr><td>bolvan</td><td><p>Достаточно подтянуть /etc/localtime с классического. Это работает.</p></td><td>2024-11-17T08:03:45.900Z</td></tr><tr><td>easyone11</td><td><p>а с чего оно началось то?<br>
Раньше точно было нормальное время да и ты сам говоришь у тебя нормально</p>
<aside class="quote no-group" data-username="bolvan" data-post="3015" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Проверил у себя. Время нормальное.</p>
</blockquote>
</aside></td><td>2024-11-17T08:06:04.553Z</td></tr><tr><td>bolvan</td><td><p>У меня самосборка. До гитхаба оно собиралось в тулчейне openwrt</p></td><td>2024-11-17T08:06:53.799Z</td></tr><tr><td>0x7f</td><td><p>а как скомпилировать запрет для опенврт? это надо компилировать на самом роутере чтобы получился бинарник который запустится именно там? мне вебморда пишет что у роутера архитектура ARMv8 Processor rev 4, для такой архитектуры можно сделать бинарник на обычном x64 компе?</p></td><td>2024-11-17T08:37:04.089Z</td></tr><tr><td>bolvan</td><td><p>на самом openwrt это сделать достаточно сложно, хотя лично я так и делаю.<br>
но для всех остальных есть docs/compile с достаточно простой и копипастной инструкцией<br>
требуется классический linux или WSL на крайняк (будет долго)</p></td><td>2024-11-17T08:37:45.870Z</td></tr><tr><td>easyone11</td><td><p>подозреваю тогда что проблема пошла с 68 версии, когда убрались бинарники а я просто скачал zapret-v68.zip, распаковал и обновился как раньше</p></td><td>2024-11-17T08:43:34.213Z</td></tr><tr><td>bolvan</td><td><p>Так и есть. Из-за сборки тулчейном без openwrt-specific патча</p></td><td>2024-11-17T08:44:07.235Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3035" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>docs/compile</p>
</blockquote>
</aside>
<p>будем знать, спасибо<br>
тогда жду v69 и пойду изучать docs/compile</p></td><td>2024-11-17T08:47:34.798Z</td></tr><tr><td>0x7f</td><td><p>делаю по инструкции <a href="https://github.com/bol-van/zapret/blob/master/docs/compile/build_howto_openwrt.txt" class="inline-onebox" rel="noopener nofollow ugc">zapret/docs/compile/build_howto_openwrt.txt at master · bol-van/zapret · GitHub</a><br>
заменил команду</p>
<pre><code class="lang-auto">curl -o - https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/openwrt-sdk-23.05.5-x86-64_gcc-12.3.0_musl.Linux-x86_64.tar.xz | tar -Jxvf -
cd openwrt-sdk-23.05.5-x86-64_gcc-12.3.0_musl.Linux-x86_64
</code></pre>
<p>на команду</p>
<pre><code class="lang-auto">curl -o - https://downloads.openwrt.org/releases/23.05.4/targets/x86/64/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64.tar.xz | tar -Jxvf -
cd openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64
</code></pre>
<p>после команды <code>make package/{tpws,nfqws,mdig,ip2net}/compile</code> открылся такой интерфейс<br>
<a href="https://fastpic.org/view/124/2024/1117/_240c45fa5ac6486692763954ed671c06.webp.html" rel="noopener nofollow ugc"><img src="zapret-обсуждение-726/088f4a0d16a3e32fdb4cc9c57b70a74bbbb1665c.jpeg" alt="FastPic.Ru" data-base62-sha1="1dIOz8pXsTqmfzEU7oKnIe7bxVO" width="150" height="78"></a><br>
куда тут нажимать чтобы ничего не сломать?</p></td><td>2024-11-17T09:01:51.708Z</td></tr><tr><td>bolvan</td><td><p>Ничего. esc, yes</p></td><td>2024-11-17T09:02:29.936Z</td></tr><tr><td>0x7f</td><td><p>спасибо за ответ. я предлагаю добавить в <a href="https://github.com/bol-van/zapret/blob/master/docs/compile/build_howto_openwrt.txt" rel="noopener nofollow ugc">инструкцию</a> что если будет ошибка <code>Can't locate FindBin.pm in @INC</code> то надо установить <code>dnf install perl</code> и если будет ошибка <code>Missing libncurses.so or ncurses.h</code> то надо установить <code>dnf install ncurses-devel</code>.</p></td><td>2024-11-17T09:09:08.132Z</td></tr><tr><td>bolvan</td><td><p>Это все distro-specific.   dnf на RHEL-клонах. на других apt или pacman или еще что-то<br>
Если чел на linux не только в фаерфокс тыкает, то он неизбежно столкнется с решением проблем недостающих пакетов, и знает как их решать</p></td><td>2024-11-17T09:09:53.430Z</td></tr><tr><td>electrifying</td><td><p>А есть дока как под aarch64 собрать</p></td><td>2024-11-17T09:12:21.453Z</td></tr><tr><td>bolvan</td><td><p>Точно так же. Только взять SDK для своей архитектуры.<br>
Там в первом пункте написано examples. Примеры. И написано взять SDK для <em>своей</em> платформы</p></td><td>2024-11-17T09:13:05.020Z</td></tr><tr><td>0x7f</td><td><p>да, но всё-таки можно хотя бы указать названия пакетов, чтобы сэкономить людям время, например в начале инструкции можно написать “чтобы всё работало как надо установи на свой дистр пакеты perl и ncurses-devel”. люди конечно могут гуглить, но если можно облегчить людям жизнь то почему бы и нет.</p></td><td>2024-11-17T09:13:20.402Z</td></tr><tr><td>bolvan</td><td><p>Можно. Если хотите помочь, возьмите образы дефолтных систем на ubuntu, debian, fedora и прочих основных дистров и попробуйте на них пройти процедуру сборки.<br>
Выпишите все, что потребовалось устанавливать. Я это внесу в доку</p></td><td>2024-11-17T09:14:46.663Z</td></tr><tr><td>0x7f</td><td><p>да, это хорошая мысль. ещё вопрос, после команды <code>ls -l bin/packages/*/base</code> мне вернуло следующее</p>
<pre><code class="lang-auto">-rw-r--r--. 1 root root  5344 ноя 17 12:03 ip2net_1_x86_64.ipk
-rw-r--r--. 1 root root 15769 ноя 17 12:02 libcap_2.69-1_x86_64.ipk
-rw-r--r--. 1 root root 20977 ноя 17 12:02 libcap-bin_2.69-1_x86_64.ipk
-rw-r--r--. 1 root root  8242 ноя 17 12:03 libmnl0_1.0.5-1_x86_64.ipk
-rw-r--r--. 1 root root 11361 ноя 17 12:03 libnfnetlink0_1.0.2-1_x86_64.ipk
-rw-r--r--. 1 root root  6192 ноя 17 12:03 mdig_1_x86_64.ipk
-rw-r--r--. 1 root root 62777 ноя 17 12:03 nfqws_1_x86_64.ipk
-rw-r--r--. 1 root root 44841 ноя 17 12:02 tpws_1_x86_64.ipk
-rw-r--r--. 1 root root 44228 ноя 17 12:02 zlib_1.2.13-1_x86_64.ipk
-rw-r--r--. 1 root root 80764 ноя 17 12:02 zlib-dev_1.2.13-1_x86_64.ipk
</code></pre>
<p>что теперь с этими пакетами делать? просто установить на роутер и прогнать скрипт <code>install_easy.sh</code>? это и будет установкой свежайшей версии запрета?</p></td><td>2024-11-17T09:18:15.096Z</td></tr><tr><td>bolvan</td><td><p>Да, именно так. zapret уже должен быть в /opt. Инсталятор при переносе в opt сотрет оттуда все файлы.<br>
lib* - это зависимости.<br>
zlib-dev не нужен, остальное нужно<br>
проги zapret установятся в /opt/zapret/binaries/my<br>
Там их найдет install_bin.sh. Его и надо прогнать, чтобы он настроил бинарики из my</p></td><td>2024-11-17T09:20:10.417Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3035" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>требуется классический linux или WSL</p>
</blockquote>
</aside>
<p>ох, ток заметил, получается теперь надо вм с линухой поднимать чтобы ставить запрет<br>
а инструкция “Простая установка” значит уже не полная?</p></td><td>2024-11-17T09:40:53.567Z</td></tr><tr><td>bolvan</td><td><p>Это касается только сборки из исходников. Для релизов не нужно</p></td><td>2024-11-17T09:41:34.913Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Эх, жаль, что на мой роутер openwrt не установить, а значит и Запрет тоже. Приходится использовать только на Винде. На роутере или на Линуксе Запрет намного функциональнее?</p></td><td>2024-11-17T09:45:02.239Z</td></tr><tr><td>bolvan</td><td><p>Не особо. Но само по себе его расположение прозрачно открывает инет для всех устройств без их настройки.<br>
Отсутствие звена в виде linux NAT дает возможность использовать фулинг datanoack. Через роутер это заработает только по проводу с включенным аппаратным offload, тк свитч тупой и не сечет неправильные tcp флаги. linux их отбросит. c ipfrag тоже больше шансов, тк роутер может обьединять фрагменты при их прохождении через него.<br>
connbytes и ipset-ы в ядре уменьшают нагрузку на процесс nfqws.<br>
Скрипты дают подкачку листов из коробки с разных ресурсов.<br>
система ipban позволяет выборочно заворачивать забаненные IP на прокси или VPN</p></td><td>2024-11-17T09:48:15.208Z</td></tr><tr><td>easyone11</td><td><p>хм, так я из релиза и качал вроде как… ладно это было давно и могу ошибаться уже<br>
поставлю 69ию и посмотрю уйдёт ли проблема со временем<br>
ps<br>
глупый вопрос, в релизах 2 версии архивов .tar.gz и .zip просто для удобства?</p></td><td>2024-11-17T09:51:07.405Z</td></tr><tr><td>bolvan</td><td><p>Если речь о локальном времени, то да, в релизе бинарики в этом смысле испорченные.<br>
Если эта проблема не критична, можно игнорировать или подтянуть /etc/localtime с linux системы.<br>
Без пересборки исходников.</p>
<p>tar.gz и zip чтобы не надо было ставить ничего ни на openwrt, ни на винду, чтобы распаковать</p></td><td>2024-11-17T09:52:50.644Z</td></tr><tr><td>easyone11</td><td><p>Время там вообще не критично, плохо если есть другие проблемы которые не бросаются в глаза.</p></td><td>2024-11-17T09:57:43.205Z</td></tr><tr><td>bolvan</td><td><p>Я просмотрел все патчи в openwrt на musl. Их там порядка 8-10.<br>
Ничего критичного, кроме этого</p></td><td>2024-11-17T09:58:17.173Z</td></tr><tr><td>spv82</td><td><p>Бинарники собранные с OpenWrt SDK 21/22/23 можно тут взять <a href="https://github.com/spvkgn/zapret-openwrt/releases" class="inline-onebox" rel="noopener nofollow ugc">Releases · spvkgn/zapret-openwrt · GitHub</a></p>
<p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Сегодня попробую прикрутить тот патч для musl из опенрврт</p></td><td>2024-11-17T10:16:36.036Z</td></tr><tr><td>bolvan</td><td><p>Если там есть armv6 с soft float, то можно все тулчейны брать из openwrt.<br>
С linux они совместимы. Если нет /etc/TZ, нормально принимается /etc/localtime</p></td><td>2024-11-17T10:22:18.649Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="bolvan" data-post="3058" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если там есть armv6 с soft float, то можно все тулчейны брать из openwrt.</p>
</blockquote>
</aside>
<p>Согласен, так было бы проще. Может есть смысл забить на soft float ? Почему-то опенврт этот вариант игнорируют.</p></td><td>2024-11-17T10:37:02.822Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>По поводу скрипта даже не знал, спасибо, нашел, сделал.<br>
Что касаемо дебага, а он разве не для автохостлиста?</p></td><td>2024-11-17T10:38:17.024Z</td></tr><tr><td>bolvan</td><td><p>Нельзя. Есть модели без hard float. Уже однажды присылали иссуе с падением.<br>
Устройств с ARM великое множество. Не обязательно на openwrt.<br>
Но можно легко собрать недостающий тулчейн, поставив там банально в .config CONFIG_SOFT_FLOAT=y<br>
И кэшировать его на гитхабе. Остальное брать прямо с openwrt сайта</p>
<p>download<br>
unpack<br>
echo CONFIG_SOFT_FLOAT=y &gt;.config<br>
echo CONFIG_MAKE_TOOLCHAIN=y &gt;&gt;.config<br>
make defconfig<br>
make toolchain -j 8</p></td><td>2024-11-17T10:38:42.277Z</td></tr><tr><td>easyone11</td><td><p>welcome<br>
про дебаг подробно в ридмишки</p>
<details>
<summary>
Спойлер</summary>
<p><code>--debug</code> позволяет выводить подробный лог действий на консоль, в syslog или в файл. Может быть важен порядок следования опций. <code>--debug</code> лучше всего указывать в самом начале. Опции анализируются последовательно.</p>
</details></td><td>2024-11-17T10:40:56.981Z</td></tr><tr><td>0x7f</td><td><p>компилирую на свежем debian12 командой <code>make package/{tpws,nfqws,mdig,ip2net}/compile &gt; err.log</code><br>
установил <code>apt install python3-distutils ncurses-dev gawk wget</code><br>
выдаёт ошибку <a href="https://pastebin.com/R7f7eJPr" class="inline-onebox" rel="noopener nofollow ugc">make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_m - Pastebin.com</a><br>
чего-то ещё не хватает?</p></td><td>2024-11-17T11:50:32.527Z</td></tr><tr><td>bolvan</td><td><p>make package/tpws/compile V=99<br>
подробности покажет</p></td><td>2024-11-17T11:53:12.135Z</td></tr><tr><td>0x7f</td><td><p>вот всё что есть</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'eip197-mini-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'r8169-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'e100-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'bnx2-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'bnx2x-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'ar3k-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'mwifiex-sdio-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'kmod-phy-bcm-ns-usb2', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'edgeport-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'r8152-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'kmod-phy-bcm-ns-usb3', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'amdgpu-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'radeon-firmware', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'kmod-gpio-button-hotplug', which does not exist
WARNING: Makefile 'package/kernel/linux/Makefile' has a dependency on 'nu801', which does not exist
WARNING: Makefile 'package/zapret/nfqws/Makefile' has a dependency on 'libnetfilter-queue', which does not exist
WARNING: Makefile 'package/zapret/nfqws/Makefile' has a dependency on 'libcap', which does not exist
WARNING: Makefile 'package/zapret/nfqws/Makefile' has a dependency on 'zlib', which does not exist
WARNING: Makefile 'package/zapret/tpws/Makefile' has a dependency on 'zlib', which does not exist
WARNING: Makefile 'package/zapret/tpws/Makefile' has a dependency on 'libcap', which does not exist
tmp/.config-package.in:70:warning: ignoring type redefinition of 'PACKAGE_libc' from 'bool' to 'tristate'
tmp/.config-package.in:98:warning: ignoring type redefinition of 'PACKAGE_libgcc' from 'bool' to 'tristate'
tmp/.config-package.in:219:warning: ignoring type redefinition of 'PACKAGE_libpthread' from 'bool' to 'tristate'
tmp/.config-package.in:247:warning: ignoring type redefinition of 'PACKAGE_librt' from 'bool' to 'tristate'
Config-build.in:1251:warning: defaults for choice values not supported
Config-build.in:1255:warning: defaults for choice values not supported
Config-build.in:1259:warning: defaults for choice values not supported
make[1]: *** No rule to make target 'make'.  Stop.
make: *** [/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/include/toplevel.mk:225: make] Ошибка 2

</code></pre>
</details></td><td>2024-11-17T11:54:38.181Z</td></tr><tr><td>bolvan</td><td><p>Ему наплевать на musl. Есть target platform, есть host platform.<br>
На host должен быть минимально необходимый набор тулзов, остальное он сам соберет.</p>
<pre><code class="lang-auto">x86_64-openwrt-linux-musl-gcc -s -std=gnu99 -Os -o tpws *.c  -lz -lpthread
make[3]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws'
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/zapret/tpws'
time: package/zapret/tpws/compile#1.15#0.20#1.33
    ERROR: package/zapret/tpws failed to build.
</code></pre>
<p>x86_64-openwrt-linux-musl-gcc -s -std=gnu99 -Os -o tpws *.c  -lz -lpthread<br>
ошибку не выдал. значит он скорее всего собирается.<br>
и скорее всего в build_dir/target-…/tpws  есть EXEшник tpws, а в <code>bin/packages/.../base/tpws*ipk</code><br>
но дальше идет какая-то ошибка упаковки</p></td><td>2024-11-17T11:59:08.370Z</td></tr><tr><td>0x7f</td><td><p>я скорее всего не то кинул, там выше я поправил сообщение, возможно в чём-то другом проблема.</p></td><td>2024-11-17T12:02:45.937Z</td></tr><tr><td>0x7f</td><td><p>вот всё что есть в папке tpws</p>
<pre><code class="lang-auto">root@vbox:/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64# ls /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws
andr         epoll-shim  gzip.h     helpers.h   hostlist.h  ipset.h  Makefile  params.h  pools.h     protocol.h  redirect.h  resolver.h  sec.h    tamper.c  tpws.c       tpws_conn.h  uthash.h
BSDmakefile  gzip.c      helpers.c  hostlist.c  ipset.c     macos    params.c  pools.c   protocol.c  redirect.c  resolver.c  sec.c       socks.h  tamper.h  tpws_conn.c  tpws.h
</code></pre></td><td>2024-11-17T12:06:06.535Z</td></tr><tr><td>bolvan</td><td><p>make package/tpws/clean<br>
make package/tpws/compile V=99</p>
<p>должно показывать подробный процесс сборки</p></td><td>2024-11-17T12:07:56.795Z</td></tr><tr><td>0x7f</td><td><p>вот что вернули эти команды</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config'
make[2]: 'conf' is up to date.
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config'
#
# No change to .config
#
make[1]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64'
make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/toolchain'
echo "libc" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install
echo "libgcc" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install
echo "libpthread" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install
echo "librt" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install
touch -r /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain/.built /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain/.autoremove 2&gt;/dev/null &gt;/dev/null
find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain -mindepth 1 -maxdepth 1 -not '(' -type f -and -name '.*' -and -size 0 ')' -and -not -name '.pkgdir'  -print0 | xargs -r -0 rm -rf
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/toolchain'
time: package/toolchain/compile#0.19#0.09#0.23
make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/zapret/tpws'
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.prepared_9524d99e02a39d0ace91be0eafa79c02_18f1e190c5d53547fed41a3eaa76e9e9_check
mkdir -p /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws
cp -fpR ./tpws/* /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.prepared_9524d99e02a39d0ace91be0eafa79c02_18f1e190c5d53547fed41a3eaa76e9e9
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.configured_*
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/stamp/.tpws_installed
(cd /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/./; if [ -x ./configure ]; then find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.guess | xargs -r chmod u+w; find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.guess | xargs -r -n1 cp --remove-destination /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config.guess; find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.sub | xargs -r chmod u+w; find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.sub | xargs -r -n1 cp --remove-destination /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config.sub; AR="x86_64-openwrt-linux-musl-gcc-ar" AS="x86_64-openwrt-linux-musl-gcc -c -Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro" LD=x86_64-openwrt-linux-musl-ld NM="x86_64-openwrt-linux-musl-gcc-nm" CC="x86_64-openwrt-linux-musl-gcc" GCC="x86_64-openwrt-linux-musl-gcc" CXX="x86_64-openwrt-linux-musl-g++" RANLIB="x86_64-openwrt-linux-musl-gcc-ranlib" STRIP=x86_64-openwrt-linux-musl-strip OBJCOPY=x86_64-openwrt-linux-musl-objcopy OBJDUMP=x86_64-openwrt-linux-musl-objdump SIZE=x86_64-openwrt-linux-musl-size CFLAGS="-Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro " CXXFLAGS="-Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro " CPPFLAGS="-I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/usr/include -I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/include/fortify -I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/include " LDFLAGS="-L/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/usr/lib -L/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/lib -znow -zrelro "   ./configure --target=x86_64-openwrt-linux --host=x86_64-openwrt-linux --build=x86_64-pc-linux-gnu --disable-dependency-tracking --program-prefix="" --program-suffix="" --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls  ; fi; )
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.configured_68b329da9893e34099c7d8ad5cb9c940
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.built
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.built_check
make -C /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws AR="x86_64-openwrt-linux-musl-gcc-ar" AS="x86_64-openwrt-linux-musl-gcc -c -Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro" LD=x86_64-openwrt-linux-musl-ld NM="x86_64-openwrt-linux-musl-gcc-nm" CC="x86_64-openwrt-linux-musl-gcc" GCC="x86_64-openwrt-linux-musl-gcc" CXX="x86_64-openwrt-linux-musl-g++" RANLIB="x86_64-openwrt-linux-musl-gcc-ranlib" STRIP=x86_64-openwrt-linux-musl-strip OBJCOPY=x86_64-openwrt-linux-musl-objcopy OBJDUMP=x86_64-openwrt-linux-musl-objdump SIZE=x86_64-openwrt-linux-musl-size
make[3]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws'
x86_64-openwrt-linux-musl-gcc -s -std=gnu99 -Os -o tpws *.c  -lz -lpthread
make[3]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws'
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/zapret/tpws'
time: package/zapret/tpws/compile#1.31#0.26#1.55
    ERROR: package/zapret/tpws failed to build.
make[1]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64'

</code></pre>
</details></td><td>2024-11-17T12:10:15.829Z</td></tr><tr><td>0x7f</td><td><p>нет, опять не то, не понимаю почему он не записывает в файл весь вывод, вот что на самом деле было</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">Config-build.in:1255:warning: defaults for choice values not supported                                                                                                                                                              [47/159]
Config-build.in:1259:warning: defaults for choice values not supported                                                                                                                                                                      
#                                                                                                                                                                                                                                           
# No change to .config                                                                                                                                                                                                                      
#                                                                                                                                                                                                                                           
make[1]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64'                                                                                                                                           
make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/toolchain'                                                                                                                         
Makefile:735: WARNING: skipping libgomp -- package has no install section                                                                                                                                                                   
echo "libc" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install                                                                                         
echo "libgcc" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install                                                                                       
echo "libpthread" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install                                                                                   
echo "librt" &gt;&gt; /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/pkginfo/toolchain.default.install                                                                                        
touch -r /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain/.built /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain/.autor
emove 2&gt;/dev/null &gt;/dev/null                                                                                                                                                                                                                
find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/toolchain -mindepth 1 -maxdepth 1 -not '(' -type f -and -name '.*' -and -size 0 ')' -and -not -name '.pkgdir'  -print0 | xargs -r -0 r
m -rf                                                                                                                                                                                                                                       
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/toolchain'    
time: package/toolchain/compile#0.19#0.04#0.22                                                                                                                                                                                              
make[2]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/zapret/tpws'                                                                                                                       
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.prepared_9524d99e02a39d0ace91be0eafa79c02_18f1e190c5d53547fed41a3eaa76e9e9_check                                               
mkdir -p /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws                                                                                                                              
cp -fpR ./tpws/* /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/                                                                                                                     
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.prepared_9524d99e02a39d0ace91be0eafa79c02_18f1e190c5d53547fed41a3eaa76e9e9                                                     
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.configured_*                                                                                                                   
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/target-x86_64_musl/stamp/.tpws_installed                                                                                                              
(cd /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/./; if [ -x ./configure ]; then find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_m
usl/tpws/ -name config.guess | xargs -r chmod u+w; find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.guess | xargs -r -n1 cp --remove-destination /opt/zapret/openwrt
-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config.guess; find /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.sub | xargs -r chmod u+w; find /opt/zapret/o
penwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/ -name config.sub | xargs -r -n1 cp --remove-destination /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/scripts/config.sub; AR
="x86_64-openwrt-linux-musl-gcc-ar" AS="x86_64-openwrt-linux-musl-gcc -c -Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_m
usl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro" LD=x86_64-openwrt-linux-musl-ld NM="x86_64-openwrt-linux-musl-gcc-nm" CC="x86_64-openwrt-linux-musl-gcc" GCC="x86_64-openwrt-l
inux-musl-gcc" CXX="x86_64-openwrt-linux-musl-g++" RANLIB="x86_64-openwrt-linux-musl-gcc-ranlib" STRIP=x86_64-openwrt-linux-musl-strip OBJCOPY=x86_64-openwrt-linux-musl-objcopy OBJDUMP=x86_64-openwrt-linux-musl-objdump SIZE=x86_64-openw
rt-linux-musl-size CFLAGS="-Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security
 -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro " CXXFLAGS="-Os -pipe -fno-caller-saves -fno-plt -fhonour-copts -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64
_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro " CPPFLAGS="-I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_mus
l/usr/include -I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/include/fortify -I/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain
-x86_64_gcc-12.3.0_musl/include " LDFLAGS="-L/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/staging_dir/toolchain-x86_64_gcc-12.3.0_musl/usr/lib -L/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/
staging_dir/toolchain-x86_64_gcc-12.3.0_musl/lib -znow -zrelro "   ./configure --target=x86_64-openwrt-linux --host=x86_64-openwrt-linux --build=x86_64-pc-linux-gnu --disable-dependency-tracking --program-prefix="" --program-suffix="" -
-prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls  ; fi; )                        
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.configured_68b329da9893e34099c7d8ad5cb9c940                                                                                    
rm -f /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.built                                                                                                                          
touch /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.built_check                                                                                                                    
make -C /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws AR="x86_64-openwrt-linux-musl-gcc-ar" AS="x86_64-openwrt-linux-musl-gcc -c -Os -pipe -fno-caller-saves -fno-plt -fhonour-copts
 -ffile-prefix-map=/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws=tpws -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro" LD=x86_64-open
wrt-linux-musl-ld NM="x86_64-openwrt-linux-musl-gcc-nm" CC="x86_64-openwrt-linux-musl-gcc" GCC="x86_64-openwrt-linux-musl-gcc" CXX="x86_64-openwrt-linux-musl-g++" RANLIB="x86_64-openwrt-linux-musl-gcc-ranlib" STRIP=x86_64-openwrt-linux-
musl-strip OBJCOPY=x86_64-openwrt-linux-musl-objcopy OBJDUMP=x86_64-openwrt-linux-musl-objdump SIZE=x86_64-openwrt-linux-musl-size                                                                                                          
make[3]: Entering directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws'                                                                                                         
x86_64-openwrt-linux-musl-gcc -s -std=gnu99 -Os -o tpws *.c  -lz -lpthread                                                                                                                                                                  
cc1: note: someone does not honour COPTS correctly, passed 0 times                               


x86_64-openwrt-linux-musl-gcc -s -std=gnu99 -Os -o tpws *.c  -lz -lpthread
cc1: note: someone does not honour COPTS correctly, passed 0 times
In file included from gzip.c:1:
gzip.h:4:10: fatal error: zlib.h: No such file or directory
    4 | #include &lt;zlib.h&gt;
      |          ^~~~~~~~
compilation terminated.
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
In file included from hostlist.c:3:
gzip.h:4:10: fatal error: zlib.h: No such file or directory
    4 | #include &lt;zlib.h&gt;
      |          ^~~~~~~~
compilation terminated.
cc1: note: someone does not honour COPTS correctly, passed 0 times
In file included from ipset.c:3:
gzip.h:4:10: fatal error: zlib.h: No such file or directory
    4 | #include &lt;zlib.h&gt;
      |          ^~~~~~~~
compilation terminated.
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
In file included from sec.c:5:
sec.h:11:10: fatal error: sys/capability.h: No such file or directory
   11 | #include &lt;sys/capability.h&gt;
      |          ^~~~~~~~~~~~~~~~~~
compilation terminated.
cc1: note: someone does not honour COPTS correctly, passed 0 times
cc1: note: someone does not honour COPTS correctly, passed 0 times
In file included from tpws.c:43:
sec.h:11:10: fatal error: sys/capability.h: No such file or directory
   11 | #include &lt;sys/capability.h&gt;
      |          ^~~~~~~~~~~~~~~~~~
compilation terminated.
cc1: note: someone does not honour COPTS correctly, passed 0 times
make[3]: *** [Makefile:12: tpws] Error 1
make[3]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws'
make[2]: *** [Makefile:35: /opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/build_dir/target-x86_64_musl/tpws/.built] Error 2
make[2]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/package/zapret/tpws'
time: package/zapret/tpws/compile#1.11#0.26#1.73
    ERROR: package/zapret/tpws failed to build.
make[1]: *** [package/Makefile:129: package/zapret/tpws/compile] Error 1
make[1]: Leaving directory '/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64'
make: *** [/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64/include/toplevel.mk:225: package/tpws/compile] ￐ﾞ￑ﾈ￐ﾸ￐ﾱ￐ﾺ￐ﾰ 2

</code></pre>
</details>
<p>видимо не хватает файла sys/capability.h</p></td><td>2024-11-17T12:14:31.654Z</td></tr><tr><td>bolvan</td><td><p>Не выполнена установка зависимостей из пункта 2</p></td><td>2024-11-17T12:16:27.782Z</td></tr><tr><td>0x7f</td><td><p>зависимости я устанавливал, это странно.<br>
выполнил <code>apt-get install libcap-dev</code> потом ещё раз выполнил команды из пункта 2 и всё скомпилировалось без проблем</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">root@vbox:/opt/zapret/openwrt-sdk-23.05.4-x86-64_gcc-12.3.0_musl.Linux-x86_64# ls -l bin/packages/*/base
￐ﾸ￑ﾂ￐ﾾ￐ﾳ￐ﾾ 312
-rw-r--r-- 1 root root  5344 ￐ﾽ￐ﾾ￑ﾏ 17 15:19 ip2net_1_x86_64.ipk
-rw-r--r-- 1 root root 15769 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 libcap_2.69-1_x86_64.ipk
-rw-r--r-- 1 root root 20977 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 libcap-bin_2.69-1_x86_64.ipk
-rw-r--r-- 1 root root  8242 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 libmnl0_1.0.5-1_x86_64.ipk
-rw-r--r-- 1 root root 11361 ￐ﾽ￐ﾾ￑ﾏ 17 15:19 libnfnetlink0_1.0.2-1_x86_64.ipk
-rw-r--r-- 1 root root  6192 ￐ﾽ￐ﾾ￑ﾏ 17 15:19 mdig_1_x86_64.ipk
-rw-r--r-- 1 root root 62777 ￐ﾽ￐ﾾ￑ﾏ 17 15:19 nfqws_1_x86_64.ipk
-rw-r--r-- 1 root root 44841 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 tpws_1_x86_64.ipk
-rw-r--r-- 1 root root 44233 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 zlib_1.2.13-1_x86_64.ipk
-rw-r--r-- 1 root root 80764 ￐ﾽ￐ﾾ￑ﾏ 17 15:18 zlib-dev_1.2.13-1_x86_64.ipk

</code></pre>
</details></td><td>2024-11-17T12:23:20.995Z</td></tr><tr><td>bolvan</td><td><p>Нет. Они не нужны на host системе.<br>
Зависимости должны быть в SDK под target систему</p>
<p>Это ненормально, что оно ищет хедеры с хост системы</p></td><td>2024-11-17T12:23:55.026Z</td></tr><tr><td>0x7f</td><td><p>ну, дебиан был совсем свежий 12.8 может быть guest-addons из виртуалбокса что-то испортил, может мейнтейнеры дебиана что-то накосячили. в любом случае сейчас вроде всё скомпилировалось.</p></td><td>2024-11-17T12:26:13.080Z</td></tr><tr><td>bolvan</td><td><p>На убунте 24 со снесенным libcap-dev нормально под SDK собирается</p></td><td>2024-11-17T12:34:12.939Z</td></tr><tr><td>electrifying</td><td><p>Поддержку apk для openwrt в репу добавили похоже скоро таки ждём 69 версию, осталась только актуализировать доку как писал тут bolvan выше в треде</p></td><td>2024-11-17T13:16:49.288Z</td></tr><tr><td>lighting</td><td><p><img src="zapret-обсуждение-726/eeb9e26927b4e0716025e04de9eaa7adbec3e5f3.jpeg" alt="1000004086" data-base62-sha1="y3RToAyle9p4PDTsOowk16c7JtN" width="544" height="195"><br>
Видимо для андроида тоже, интересно понадобится ли root?) И как это вообще будет работать (будет ли создаваться псевдоVPN и т. п.)?</p></td><td>2024-11-17T13:22:41.633Z</td></tr><tr><td>electrifying</td><td><p>Это чей-то мердж реквест болван просто одобрил</p></td><td>2024-11-17T13:24:01.358Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="spv82" data-post="3057" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>Бинарники собранные с OpenWrt SDK 21/22/23 можно тут взять <a href="https://github.com/spvkgn/zapret-openwrt/releases">Releases · spvkgn/zapret-openwrt · GitHub</a></p>
</blockquote>
</aside>
<p>Спасибо<br>
Я правильно понимаю что я могу скачать под свою архитектору 4 ipk файла<br>
*_68_aarch64_cortex-a53.ipk<br>
Скачать zip zapreta без бинарников и закинуть эти ipk в binaries\aarch64\ переименовав в ip2net и тд, после чего это уже запускать install_easy.sh?<br>
И так надо будет делать каждый раз чтобы чтобы избавиться от багов openwrt musl?</p></td><td>2024-11-17T13:39:23.454Z</td></tr><tr><td>bolvan</td><td><p>Их можно установить через opkg.<br>
Все свои бинарики помещаются в /opt/zapret/binaries/my и приоритетно выбираются</p></td><td>2024-11-17T13:40:39.858Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="lighting" data-post="3078" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/aeb1de/48.png" class="avatar"> lighting:</div>
<blockquote>
<p>Видимо для андроида тоже, интересно понадобится ли root?) И как это вообще будет работать (будет ли создаваться псевдоVPN и т. п.)?</p>
</blockquote>
</aside>
<p>Это просто бинарики, собранные под bionic.<br>
Не имеющие проблем с DNS в /etc/resolv.conf, юзерами в /etc/passwd, таймзоной в /etc/localtime и прочими изысками стандартного linux.<br>
Чтобы на даче взять старинный аппарат на android 5.0, вставить туда симку, раздать через wifi сотового оператора и обойти блокировки через zapret<br>
Про рута читаем доку про android</p></td><td>2024-11-17T13:43:30.194Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3081" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Все свои бинарики помещаются в /opt/zapret/binaries/my и приоритетно выбираются</p>
</blockquote>
</aside>
<ol start="0">
<li>Через opkg установилось, понадобилось еще libcap поставить, но я бы предпочёл через binaries/my</li>
<li>Прям без переименования ip2net_68_aarch64_cortex-a53.ipk в ip2net.ipk?</li>
<li>В релизах это пофиксится или надо будет каждый раз кидать новые ipk под новые версии zapret?</li>
</ol></td><td>2024-11-17T14:24:30.551Z</td></tr><tr><td>0x7f</td><td><p>я проверил в виртуалбоксе какие пакеты нужны на свежих установках популярных дистров чтобы <a href="https://github.com/bol-van/zapret/blob/master/docs/compile/build_howto_openwrt.txt" rel="noopener nofollow ugc">инструкция</a> работала без ошибок</p>
<pre><code class="lang-auto">kde debian 12.8
apt install python3-distutils ncurses-dev gawk wget libcap-dev

kubuntu 22.04
apt install make build-essential unzip libncurses-dev

kde fedora 41
dnf install git perl patch ncurses-devel libcap-devel

</code></pre>
<p>если можно добавьте это в начале инструкции по компиляции, может это сэкономит людям время на гугление.</p></td><td>2024-11-17T14:36:36.508Z</td></tr><tr><td>bolvan</td><td><p>Собранное под SDK собирается как dynamic executable, потому требует .SO (DLLки как в винде)<br>
Если надо статик, можно собрать с CFLAGS=-static. Я так раньше и собирал, когда бинарики были в репе.<br>
Эти манипуляции со сборкой только для тех, кто хочет новье испробовать с исходников</p></td><td>2024-11-17T15:57:45.747Z</td></tr><tr><td>0x7f</td><td><aside class="quote no-group" data-username="bolvan" data-post="3086" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если надо статик, можно собрать с CFLAGS=-static</p>
</blockquote>
</aside>
<p>это тоже стоило бы добавить в инструкцию по компиляции. и вообще список флагов с которыми можно собрать.</p></td><td>2024-11-17T16:03:38.911Z</td></tr><tr><td>bolvan</td><td><p>git не хватает<br>
libcap-dev проверил на debian-mate 12.8 только что скачанном. не требуется. не вижу никакой необходимости иметь этот пакет на хост системе. сборка идет тулчейном под таргет платформу, там собирается свой libcap-dev и помещается в staging_dir. там и хедеры находятся</p></td><td>2024-11-17T16:08:29.517Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="easyone11" data-post="3080" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>Скачать zip zapreta без бинарников и закинуть эти ipk в binaries\aarch64\</p>
</blockquote>
</aside>
<p>Можно достать их из .ipk и скинуть в zapret/binaries/my</p></td><td>2024-11-17T16:22:35.830Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="easyone11" data-post="3080" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>И так надо будет делать каждый раз чтобы чтобы избавиться от багов openwrt musl?</p>
</blockquote>
</aside>
<p>В следующем релизе этот баг будет исправлен.</p></td><td>2024-11-17T16:23:59.068Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3011" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>seqovl в варианте split ломает часть сайтов.<br>
где есть защита от левых sequence numbers за пределами tcp window.<br>
seqovl в варианте disorder не выходит за tcp window, поэтому более совместим. но он точно сломает windows server. <a href="http://rsdn.ru">rsdn.ru </a>, например. так что я бы не рекомендовал использовать seqovl без ограничителей.</p>
</blockquote>
</aside>
<p>подскажи плс, о каких ограничителях идет речь?<br>
у меня в конфигах с seqovl (без фейка) не работает --dpi-desync-ttl=X<br>
у меня 100% тспу на 5 хопе, ставлю к примеру --dpi-desync-ttl=1 - сайты по прежнему открываются.</p>
<p>блин… почему до меня доходит только после того, как я написал сообщение…<br>
вопрос снимается, там речь шла о split, а не о split2/disorder2</p></td><td>2024-11-17T19:23:45.108Z</td></tr><tr><td>KDS</td><td><p>Об обычных, видимо - ttl, bad seq и badmd5sum</p></td><td>2024-11-17T23:26:21.518Z</td></tr><tr><td>bolvan</td><td><p>Имел в виду не fooling и ttl, а hostlist/ipset.</p>
<p>Сегодня, наверно, выложу v69.  Там будут более понятные названия.<br>
split=&gt;fakedsplit<br>
disorder=&gt;fakeddisorder<br>
split2=&gt;multisplit<br>
disorder2&gt;=multidisorder<br>
С одновременным расширением функционала до множественного сплита в multi вариантах</p></td><td>2024-11-18T07:53:24.522Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="3093" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Там будут более понятные названия.</p>
</blockquote>
</aside>
<p>Обратной совместимости не будет, то есть если сейчас у меня на 68 указан флаг split2 и я обновлюсь на 69, теперь программа будет ожидать только  строку multisplit,придется редактировать конфиг ?</p></td><td>2024-11-18T08:09:09.678Z</td></tr><tr><td>bolvan</td><td><p>Будет. не 100% во всех аспектах, но основное будет.<br>
split2/disorder2 будут синонимами multisplit/multidisorder<br>
fakedsplit/fakeddisorder - синонимы split/disorder<br>
старые названия уйдут из хелпов и док, чтобы быть постепенно вытесненными</p></td><td>2024-11-18T08:26:51.234Z</td></tr><tr><td>abc555</td><td><p>Один из моих провов, который забанил ютуб, так вчера я поюзал специально, на адреса <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> даже пинг не проходит, трассировка тоже. Запуская на компе в cmd<br>
ping ип ютуба -f -l 1472 пишет нужна фрагментация, хотя mtu у меня 1500, начинаю опускать значение mtu потихоньку до момента когда просто пишет превышен интервал времени )) С роутера тоже не пингуется. Хотел скачать ролик с ютуба через загрузчик yt и не качается, упирается в адрес rr2— *************<a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> и закачка не идёт и как я подозревал, что походу забанили по ip и по всей вероятности, я попробую конечно, но думаю 69 версия меня не спасёт на этом прове. Я думаю они отрабатывают свои стратегии на подопытных провов. Я базарил помню с провом, он сказал что доступа к тпсу у него нет.<br>
На другом прове ютуб летает без обхода и как я понял если пров не хочет терять клиентов, то значит он должен дать на лапу чтоб ютуб ему включили, одним словом коррупция процветает, на галимом ютубе кто то наживается ))<br>
Третий пров, у него ютуб работает месяца полтора это точно и они ходят по хатам и прибалтывают людей чтоб подключились к ним )) И люди ведутся, отключаются и подключаются к этим кренделям )<br>
Ещё на 2х других провов, работает ютуб с запретом, но как я понял, они просто наблюдают ))<br>
Мафия которая рулит тпсу реально наживается, нашли они для себя фишку заработка )))<br>
Как в 90е не хочешь платить, отключим ютуб ))) Это мои догадки, но основаны за наблюдением 5ти разных провов</p></td><td>2024-11-18T08:57:00.348Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Чёрт бы их побрал, но ...</summary>
<aside class="quote no-group">
<blockquote>
<p>упирается в адрес <code>rr2—*************googlevideo.com</code> &lt;…&gt; но думаю 69 версия меня не спасёт</p>
</blockquote>
</aside>
<p>Если на самом проблемном прове веб часть ютуба всё же как-то вскрывается, то надо посмотреть ggc из другого пула. Или даже подобрать самостоятельно из тех, что выскакивают у клиентов других провайдеров. И вот уже к этим другим пробовать доступаться по ICMP, TCP и UDP (например, с помощью <code>nping</code>),. Тут и zapret может быть поможет. Надо пробовать.<br>
<code>yt-dlp</code> может качать с помощью внешнего даунлоадера (<code>curl</code>) не только по TCP как обычно, но и по UDP. Адреса для альтернативных серверов ggc можно попробовать подменить хоть в hosts.</p>
<p>Но это не всё. Интересно, затащит ли ControlD если взять его DoH и использовать его автотуннелирование только для <code>*.googlevideo.com</code><br>
У ControlD же, насколько я понимаю, прикол именно в автотуннелировании, иначе как бы он помогал вскрывать закрытое.</p>
</details>
<p>Занятие для нескучных вечеров <img src="https://ntc.party/images/emoji/twitter/point_up.png?v=12" title=":point_up:" class="emoji" alt=":point_up:" loading="lazy" width="20" height="20"></p></td><td>2024-11-18T09:13:53.101Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Разрешите поинтересоваться.<br>
Например, есть у нас fake,split2, значит в новой версии будет fake,multisplit?<br>
Если мы хотим расширить до полного multi, нам нужно добавить в split pos (кроме цифры) тот же midsld, и тогда функционал будет уже не обычного split2, а полнофункционального multisplit? Ну и для disorder то же самое. Ну, это если мне не нужен полный multi, а обычный, старый split2 или disorder2.<br>
Надеюсь, что описал нормально.</p>
<p>upd. Multidisorder, multisplit только с split pos работает, без него происходит вылет. С обычным disorder2, split2 не нужен split pos. Может в релизе будет иначе.</p></td><td>2024-11-18T09:19:41.625Z</td></tr><tr><td>abc555</td><td><p>Та не, это слишком просто. Нельзя было давать в руки жуликов такое как тпсу, сама идея такое как тпсу это изначально задумка наживы, теперь я это понял. И когда карты раскрыты, играть становится интересней )</p></td><td>2024-11-18T09:23:51.038Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, восстанавливать чью-то целевую логику в условиях “рыночности” — это скучное же занятие. Тем более, что у нас логика пока еще не всегда рыночная. А вот экспроприировать экспроприатора в техническом смысле — это интересно.</p></td><td>2024-11-18T09:27:02.628Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>планирую прикрутить к openwrt и запутался<br>
в доках на гитхабе якобы только tpws в ней можно но зато с nftables</p>
<p>а сторонняя сборка для кинетиков уже nfqws но только iptables -а в 23openwrt его якобы никак и только nftables</p>
<p>кто пояснить может?</p>
<p>казалосьбы nfqws <em>более-лучше</em>. но как его на openwrt23 приладить?</p></td><td>2024-11-18T10:55:59.547Z</td></tr><tr><td>abc555</td><td><p>Ну ждём 69 версию, хотелось бы поюзать</p></td><td>2024-11-18T11:03:51.872Z</td></tr><tr><td>i-no(...)</td><td><p>Наверное в 1ую очередь можно использовать авторский инсталл скрипт. Еще можно взять <a href="https://github.com/remittor/zapret-openwrt" rel="noopener nofollow ugc">пакетизированный</a> zapret от <a class="mention" href="/u/rem">@rem</a> и хоть через интерфейс “загрузить”, хоть через opkg его установить. Самые свежие бинарии, еще не релизнутые, выше были опубликованы, их можно вручную накатить поверх для соответствующей архитектуры проца (см. по <code>cat /proc/cpuinfo</code>)</p></td><td>2024-11-18T11:06:37.097Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>я на этапе сборки wrt вижу где fw4 убрать но не вижу где fw3 вернуть<br>
есть некий firewall C</p></td><td>2024-11-18T11:19:11.550Z</td></tr><tr><td>i-no(...)</td><td><p>Можно только предполагать по каким неведомым дорожкам вы решили пойти, но по идее уже есть дефолтные образы для очень многих систем (рутеров). Если ваш в списке поддерживаемых, причем достаточно давно, то должен быть дефолтный образ 23 версии, уже готовый для использования. В 23 версии исходно ставится fw4. Зачем вам его менять на fw3 если zapret может работать и с тем и с другим. Не запутывайте себя зря.</p></td><td>2024-11-18T11:22:50.208Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ну ещё раз перечитав понял что в самом деле зря суетился (tpws только при недостатке памяти)<br>
и ориг скрипт надо юзать<br>
просто изначально хотел скриптом кинетика и там жёсткое требование iptables неясно правда почему</p></td><td>2024-11-18T11:27:48.014Z</td></tr><tr><td>i-no(...)</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/Anonym-tsk/nfqws-keenetic">
  <header class="source">

      <a href="https://github.com/Anonym-tsk/nfqws-keenetic" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/5af0620e6d5c5d748685013bfb9f43d22e8eb4dd_2_690x344.png" class="thumbnail" data-dominant-color="EBEAE8">

  <h3><a href="https://github.com/Anonym-tsk/nfqws-keenetic" target="_blank" rel="noopener nofollow ugc">GitHub - Anonym-tsk/nfqws-keenetic</a></h3>

    <p><span class="github-repo-description">Contribute to Anonym-tsk/nfqws-keenetic development by creating an account on GitHub.</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
Потому что под кинетик делалось прежде всего. Если хотите именно этот пакет пробовать, то можно начать с установки опеврт 21 версии, там iptables. Потом сможете обновить свой опеврт если захотите.</p></td><td>2024-11-18T11:29:25.706Z</td></tr><tr><td>electrifying</td><td><p>А если запрет развернут на роутере есть ли разница откуда блокчек запускать с роутера или набор в винде?</p></td><td>2024-11-18T15:01:42.395Z</td></tr><tr><td>i-no(...)</td><td><p>Наверное, что-то может не проверяться за пределами роутера…<br>
Чисто субъективно, не хочется запускать блокчек на роутере. Да<br>
и бывает что по интуиции получается быстрее, чем ждать пока<br>
блокчек отработает.</p></td><td>2024-11-18T15:04:17.905Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="3098" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>апример, есть у нас fake,split2, значит в новой версии будет fake,multisplit?<br>
Если мы хотим расширить до полного multi, нам нужно добавить в split pos (кроме цифры) тот же midsld, и тогда функционал будет уже не обычного split2, а полнофункционального multisplit? Ну и для disorder то же самое. Ну, это если мне не нужен полный multi, а обычный, старый split2 или disorder2.<br>
Надеюсь, что описал нормально.</p>
<p>upd. Multidisorder, multisplit только с split pos работает, без него происходит вылет. С обычным disorder2, split2 не нужен split pos. Может в релизе будет иначе.</p>
</blockquote>
</aside>
<p>split2/disorder2 - это подмножества multisplit/multidisorder. при единственном сплите они превращаются в предшественников<br>
если не задан никакой сплит пос, то выбирается abs+2. о чем и пишется в --debug в начале</p></td><td>2024-11-18T15:31:31.537Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="3108" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>А если запрет развернут на роутере есть ли разница откуда блокчек запускать с роутера или набор в винде?</p>
</blockquote>
</aside>
<p>Есть. Некоторые методы дурения не могут пройти роутер, но работают с него.<br>
И TTL будет на 1 меньше на роутере</p></td><td>2024-11-18T15:32:27.200Z</td></tr><tr><td>hufrea</td><td><p>Может в <code>tpws</code> во флагах <code>disorder</code> и <code>oob</code> добавить опциональные аргументы - к каким позициям их применять. Это добавит больше гибкости, позволив “вырезать” конкретные сегменты или отправлять их с OOB. Обратная совместимость при этом сохранится.</p></td><td>2024-11-18T16:30:53.221Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Получается, split2 будет при такой настройке - multisplit split-pos=2?<br>
А если я укажу split pos=1, то как вы указали, это превратит multisplit в обычный fakedsplit?<br>
Или я вообще не так понимаю?<br>
Думаю, что это последний вопрос по этой теме. Так что, заранее спасибо)</p></td><td>2024-11-18T16:40:03.483Z</td></tr><tr><td>electrifying</td><td><p>Там на гитхабе дока уже обновлена под 69 версию, можете посмотреть про работу новых флагов</p></td><td>2024-11-18T17:37:46.715Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="hufrea" data-post="3112" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/h/8c91f0/48.png" class="avatar"> hufrea:</div>
<blockquote>
<p>Может в <code>tpws</code> во флагах <code>disorder</code> и <code>oob</code> добавить опциональные аргументы - к каким позициям их применять. Это добавит больше гибкости, позволив “вырезать” конкретные сегменты или отправлять их с OOB. Обратная совместимость при этом сохранится.</p>
</blockquote>
</aside>
<p>Это только усложнит все без ощутимой выгоды.<br>
disorder и так хорошо все перемешивает. по принципу нечетные-четные.<br>
Произвольно его применять невозможно, но можно было бы не на каждый 2-й , а  на 1,5,8, но обязательно с промежутком не менее 1. Но смысла в этом не вижу. Только сложнота<br>
oob нельзя давать на более чем 1 сегмент, иначе будут проблемы. байтик в сокет залетит</p></td><td>2024-11-18T18:13:34.315Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Aleksandr75ru" data-post="3113" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>Получается, split2 будет при такой настройке - multisplit split-pos=2?</p>
</blockquote>
</aside>
<p>Да, это равносильно бывшему split2 без указания позиции</p>
<aside class="quote no-group" data-username="Aleksandr75ru" data-post="3113" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/dfb087/48.png" class="avatar"> Aleksandr75ru:</div>
<blockquote>
<p>А если я укажу split pos=1, то как вы указали, это превратит multisplit в обычный fakedsplit?<br>
Или я вообще не так понимаю?<br>
Думаю, что это последний вопрос по этой теме. Так что, заранее спасибо)</p>
</blockquote>
</aside>
<p>fakedsplit никак не может вырасти из multisplit. faked делит только на 2 части и обрамляет фейками, multi не обрамляет и делит на  любое кол-во частей</p></td><td>2024-11-18T18:17:15.593Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3111" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>И TTL будет на 1 меньше на роутере</p>
</blockquote>
</aside>
<p>А, так вот как это определяется. В traceroute сразу видно где чебурнет кончается что гадать тогда не нужно? Неплохо бы это упомянуть в мане если так</p></td><td>2024-11-18T18:20:15.456Z</td></tr><tr><td>bolvan</td><td><p>Кстати, мне так и не удалось полностью победить вот это на linux</p>
<blockquote>
<p>tpws обеспечивает сплит только за счет раздельных вызовов send, и это обычно работает надежно, если разбивать не на слишком много частей и не на слишком мелкие подряд следующие части. В последнем случае Linux все же может обьединить некоторые части, что приведет к несоответствию реальной сегментации указанным сплит позициям. Другие ОС в этом вопросе ведут себя более предсказуемо. Спонтанного обьединения замечено не было. Поэтому не стоит злоупотреблять сплитами и в особенности мелкими соседними пакетами.</p>
</blockquote>
<p>TCP_NODELAY там всегда был. Мне еще пришлось добавить CORK. Это немного улучшило</p></td><td>2024-11-18T18:21:18.563Z</td></tr><tr><td>hufrea</td><td><p>byedpi в цикле получает <code>TCP_INFO</code> и смотрит количество неотправленных байт,  если они есть, то он ждет некоторое время.</p><aside class="onebox githubblob" data-onebox-src="https://github.com/hufrea/byedpi/blob/5e8ff5ca1901528b9a622a180227657b43ade079/desync.c#L88">
  <header class="source">

      <a href="https://github.com/hufrea/byedpi/blob/5e8ff5ca1901528b9a622a180227657b43ade079/desync.c#L88" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/hufrea/byedpi/blob/5e8ff5ca1901528b9a622a180227657b43ade079/desync.c#L88" target="_blank" rel="noopener nofollow ugc">hufrea/byedpi/blob/5e8ff5ca1901528b9a622a180227657b43ade079/desync.c#L88</a></h4>



    <pre class="onebox"><code class="lang-c">
      <ol class="start lines" start="78" style="counter-reset: li-counter 77 ;">
          <li>    struct timespec time = { </li>
          <li>         .tv_nsec = ms * 1e6</li>
          <li>    };</li>
          <li>    nanosleep(&amp;time, 0);</li>
          <li>}</li>
          <li>#else</li>
          <li>#define delay(ms) Sleep(ms)</li>
          <li>#endif</li>
          <li></li>
          <li>#ifdef __linux__</li>
          <li class="selected">static void wait_send(int sfd)</li>
          <li>{</li>
          <li>    for (int i = 0; params.wait_send &amp;&amp; i &lt; 500; i++) {</li>
          <li>        struct tcp_info tcpi = {};</li>
          <li>        socklen_t ts = sizeof(tcpi);</li>
          <li>        </li>
          <li>        if (getsockopt(sfd, IPPROTO_TCP,</li>
          <li>                TCP_INFO, (char *)&amp;tcpi, &amp;ts) &lt; 0) {</li>
          <li>            perror("getsockopt TCP_INFO");</li>
          <li>            break;</li>
          <li>        }</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-18T18:26:28.409Z</td></tr><tr><td>bolvan</td><td><p>В byedpi threaded model. Там можно позволить себе подождать.<br>
А здесь 1 тред и асинхронка. Тормознет все остальное.<br>
Ждать меньше 1 тика таймера нельзя. На openwrt это 10 мс, тк HZ=100.</p>
<p>Можно, конечно, как опцию сделать</p></td><td>2024-11-18T18:28:30.340Z</td></tr><tr><td>hufrea</td><td><aside class="quote no-group" data-username="bolvan" data-post="3120" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>В byedpi threaded model.</p>
</blockquote>
</aside>
<p>Нет, там тоже один поток (все на epoll/poll). Да, все тормознет, зато сплиты гарантированно не будут объединены, хоть и такой ценой, лучше идеи не нашлось. Если использовать какой-нибудь libev, то можно асинхронно ждать, но тогда многое придется переписать. Можно во время сна вызывать event loop с низким таймаутом, однако тоже нужно будет многое переписать.</p></td><td>2024-11-18T18:37:01.148Z</td></tr><tr><td>bolvan</td><td><p>Понятно, у меня та же ситуевина.<br>
Тогда надо добавить эту фишку как опцию, не включенную по умолчанию</p></td><td>2024-11-18T18:40:07.715Z</td></tr><tr><td>Torque</td><td><p>Добрый вечер я новичок. При редактировании файла конфигурации в редакторе VI при сохранении новых  строк файл не сохраняется. Все команды VI использовал. Что не так? Подскажите пожалуйста.</p></td><td>2024-11-18T18:56:04.698Z</td></tr><tr><td>bokov333(Bokov333)</td><td><p>зачем новичку vi? чем плох nano?</p></td><td>2024-11-18T19:00:43.909Z</td></tr><tr><td>Torque</td><td><p>Так думал что там VI</p></td><td>2024-11-18T19:25:55.541Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3010" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>screen</p>
</blockquote>
</aside>
<p>Спасибо протестил, это отлично работает на кинетике, теперь можно на ноч ставить и утром проверять. Благодарю. Подумаю мож замучу скрипт с кронтаб чтоб каждую ноч тестить список.<br>
Подскажите можно ли max curl еще меньше ставить?</p>
<pre><code class="lang-auto">screen -S blockcheck
SECURE_DNS=1 SKIP_TPWS=1 CURL_MAX_TIME=0.3 ./blockcheck.sh | tee /opt/tmp/blockcheck.txt
</code></pre></td><td>2024-11-18T21:49:55.109Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="bolvan" data-post="3093" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Сегодня, наверно, выложу v69</p>
</blockquote>
</aside>
<p>Видимо, что-то пошло не так? <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"><br>
Спасибо за новый хелп, наконец-то указали, что на какой фазе работает, не приходится по всему хелпу инфу размазанную искать. Скольких затупов это бы помогло избежать )</p></td><td>2024-11-19T01:38:56.748Z</td></tr><tr><td>bolvan</td><td><p>Англ доку не успел</p></td><td>2024-11-19T06:56:16.776Z</td></tr><tr><td>bolvan</td><td><p>curl принимает таймаут только в секундах<br>
блокчек в крон пока не выйдет, тк не реализован пакетный режим работы без диалогов. но это планируется</p></td><td>2024-11-19T06:57:19.423Z</td></tr><tr><td>toxae1(Toxa)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/0827ff60fd1df4303ee0dc5de8c17b2f613825aa.jpeg" data-download-href="https://ntc.party/uploads/default/0827ff60fd1df4303ee0dc5de8c17b2f613825aa" title="IMG_20241119_102001"><img src="zapret-обсуждение-726/0827ff60fd1df4303ee0dc5de8c17b2f613825aa_2_638x499.jpeg" alt="IMG_20241119_102001" data-base62-sha1="1a9vSt6srXM8lqsxswlizqRVsKe" width="638" height="499" srcset="zapret-обсуждение-726/0827ff60fd1df4303ee0dc5de8c17b2f613825aa_2_638x499.jpeg, zapret-обсуждение-726/0827ff60fd1df4303ee0dc5de8c17b2f613825aa_2_957x748.jpeg 1.5x, zapret-обсуждение-726/0827ff60fd1df4303ee0dc5de8c17b2f613825aa.jpeg 2x" data-dominant-color="CCD3D7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241119_102001</span><span class="informations">1080×846 221 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Я имел ввиду 300 мсек не повлияет на результат подбора стратегии. Можно еще меньше?</p></td><td>2024-11-19T07:22:03.251Z</td></tr><tr><td>bolvan</td><td><p>Экспериментально это надо выяснять. Зависит от многих факторов.<br>
время считается с момента запуска курла, а не с момента подключения к серваку.<br>
на медленных системах он может вставать долго сам по себе.<br>
зависит и от самого курла. с curl.se качал статик, так он че-то тупит на старте, когда обычный сразу встает.<br>
задержки в сети и тупняк сайта тоже непредсказуемые величины</p></td><td>2024-11-19T07:37:15.278Z</td></tr><tr><td>abc555</td><td><p>Встроенный редактор vi в openwrt, это что то типа стандартного блокнота на винде.<br>
Когда нет лишнего места для установки nano и прочего, то вполне хватает и стандартного.<br>
К примеру<br>
vi /opt/zapret/config это вход в запрет режим чтения<br>
кнопка i это режим редактирования<br>
кнопка Esc это выход из режима редактирования<br>
:wq эта команда  сохранить и выйти<br>
/etc/init.d/zapret restart а это перезапуск запрета</p></td><td>2024-11-19T09:05:19.426Z</td></tr><tr><td>abc555</td><td><p>А вы ещё как я понял не сделали ? Я вчера бинарники взял с 68 версии, остальное залил с главной страницы, всё установилось, но работать не захотело. поставил обратно 68<br>
Может ещё что то нужно было перетянуть, скачал архив с основной страницы zapret-master, перетянул в него папку бинарники из v68 и закинул в роутер<br>
Наверно надо было просто скопировать с заменой всех файлов, но не стал заморачиваться</p></td><td>2024-11-19T09:11:14.926Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Мож кто подскажет по ДНР<br>
<code>--dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld,sniext+1,endhost-2,-10 --dpi-desync-repeats=16 --dpi-desync-ttl=0</code><br>
Этим пробил блокировку гугла провайдером.<br>
Все загружается но видео не грузит &gt; замедлено.<br>
Че можно добавить?<br>
Fake tls не варик т.к. гугл в блоке а с другими и в РФ не грузит видео.</p></td><td>2024-11-19T12:43:40.858Z</td></tr><tr><td>i-no(...)</td><td><p>Попробуйте отдельный профиль с хостлистом только для GGC и туда отдельно что-нибудь пожестче из нулевой фазы. Может, специфика под ipv6 сработает, если он имеется. Хотя с учетом географии, сомневаюсь. Пробовать надо.</p></td><td>2024-11-19T12:54:21.444Z</td></tr><tr><td>KDS</td><td><p>А --filter-tcp=443 --wssize 1:6 и факедсплит не работают? Естественно без всяких хостлистов</p></td><td>2024-11-19T13:00:29.061Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Это для какой версии конфиг? У себя в V68 -ввел ничего не открывается. У меня от Гугла в бане только поисковик и ЮТ. С вашим конфигом Все в глубоком Ауте.</p></td><td>2024-11-19T13:06:26.218Z</td></tr><tr><td>KDS</td><td><p>От 69</p></td><td>2024-11-19T13:07:59.730Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Хоть город, то какой ? Стольный?</p></td><td>2024-11-19T13:08:59.010Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Тогда понятно. 69 еще не юзал.</p></td><td>2024-11-19T13:09:41.452Z</td></tr><tr><td>electrifying</td><td><p>Ждём релизку 69 версии</p></td><td>2024-11-19T13:11:07.704Z</td></tr><tr><td>KDS</td><td><p>Для 68 можно попробовать <code>--filter-tcp=443 --wssize 1:6 --dpi-desync=split --dpi-desync-fooling=md5sig,badseq</code> в последней строке конфига, либо перед автохостлистом</p>
<p>Естественно, <code>googlevideo.com</code> из всех хостлистов убрать.</p></td><td>2024-11-19T13:20:07.854Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="KDS" data-post="3142" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>либо перед автохостлистом</p>
</blockquote>
</aside>
<p>Профиль с автохостлистом лучше убрать на время тестирования.</p></td><td>2024-11-19T13:26:24.726Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Ранее две недели назад уже писал.<br>
Да, такое кое как работает. Естественно не на всем и не с первого раза.</p></td><td>2024-11-19T13:26:53.229Z</td></tr><tr><td>KDS</td><td><p>А если так? <code>--filter-tcp=443 --wssize 1:6 --dpi-desync=split --dpi-desync-fooling=md5sig,badseq --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=25</code></p></td><td>2024-11-19T13:42:12.749Z</td></tr><tr><td>drmirro(Drmirro)</td><td><p>Даже стало хуже на Винде открывается теперь с 3 раза. На андроид ТВ и старом самсе со второй попытки,как и раньше.<br>
Тут у прова два GGS один теперь уже " типа забугорный", а другой новый вида:<br>
<a href="http://xn--rr---sn-x5nuoxuauq03g-px8e-rjv.googlevideo.com" rel="noopener nofollow ugc">rrх---sn-x5nuoxuauq03g-px8e.googlevideo.com</a>   - вот он ,гад, не пробиваемый всю малину , по моему разумению, и портит.</p></td><td>2024-11-19T13:57:13.419Z</td></tr><tr><td>i-no(...)</td><td><p>Возможно. В таком случае, если он всего один такой, то можно ему переопределить айпи адрес от любого более адекватного. И сплит пос 33 — хорошая идея. <img src="https://ntc.party/images/emoji/twitter/point_down.png?v=12" title=":point_down:" class="emoji" alt=":point_down:" loading="lazy" width="20" height="20"></p></td><td>2024-11-19T13:59:50.301Z</td></tr><tr><td>KDS</td><td><p>Для такого сплитпос 33 можно попробовать. Или от 30 до 35</p></td><td>2024-11-19T14:00:00.908Z</td></tr><tr><td>drmirro(Drmirro)</td><td><aside class="quote no-group" data-username="i-no" data-post="3147" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>переопределить айпи адрес от любого более адекватного</p>
</blockquote>
</aside>
<p>Как это сделать в реале на роутере? Проверить смогу теперь только через пару -тройку часов. Пока надо отключиться.</p></td><td>2024-11-19T14:06:24.017Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group quote-modified" data-username="toxae1" data-post="3134" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/toxae1/48/12007_2.png" class="avatar"> toxae1:</div>
<blockquote>
<p>–dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld,sniext+1,endhost-2,-10 --dpi-desync-repeats=16 --dpi-desync-ttl=0</p>
</blockquote>
</aside>
<p>Сделал так<br>
–dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld,sniext+1,endhost-2,-10<br>
Видео запускается на несколько секунд.</p></td><td>2024-11-19T14:37:25.770Z</td></tr><tr><td>electrifying</td><td><p>А midsld и endsld разве не должны указываться через +цифра?</p></td><td>2024-11-19T14:49:11.730Z</td></tr><tr><td>KDS</td><td><p>Не должны. Цифра - лишь смещение от маркера, она не обязательна</p></td><td>2024-11-19T15:09:32.278Z</td></tr><tr><td>Kerlaeda(Kerlaeda)</td><td><p>По поводу файков , сам если что на тринити (“отдельный котел в аду им”) , мне лично помогают около гуловские фейки, так как тот же гуглдиск, гуглдок или гуглземля не забанены, до недавнего пользовался<br>
фейками от гуглземли из скрипта ORI GoodCheckGoGo , а недавно KDS выложил YTDisBystro_x64_2.3_PR оттуда два фейка , quic_3.bin и tls_clienthello_4.bin (<a href="http://iana.org" rel="noopener nofollow ugc">iana.org</a> я так понимаю) , вполне работают.</p></td><td>2024-11-19T15:18:47.184Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
v69 в релизе</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/13b11e9d4e7a3caed2826f2a138a83f9d6e18ae9.png" data-download-href="https://ntc.party/uploads/default/13b11e9d4e7a3caed2826f2a138a83f9d6e18ae9" title="03d3989ebba595acfd8da4624783353f"><img src="zapret-обсуждение-726/13b11e9d4e7a3caed2826f2a138a83f9d6e18ae9.png" alt="03d3989ebba595acfd8da4624783353f" data-base62-sha1="2Ocy1ZuRdbmCGO4AMCaOfMsFTbH" width="573" height="500" data-dominant-color="1C2026"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">03d3989ebba595acfd8da4624783353f</span><span class="informations">891×777 45.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-19T15:19:40.734Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="Kerlaeda" data-post="3153" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kerlaeda/48/13179_2.png" class="avatar"> Kerlaeda:</div>
<blockquote>
<p>тринити</p>
</blockquote>
</aside>
<p>Тоже тринити, спасибо за подсказау буду пробовать</p></td><td>2024-11-19T15:41:44.688Z</td></tr><tr><td>electrifying</td><td><p>А блокчек в win бандле содержит изменения на тестирование мультистратегий из 69 блокчека в Линукс релизах?</p></td><td>2024-11-19T15:50:47.597Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Говорили что да</p></td><td>2024-11-19T15:54:04.076Z</td></tr><tr><td>electrifying</td><td><p>Судя по sh скрипту отличия есть, так что поставлю ка лучше wsl и запущу оттуда</p></td><td>2024-11-19T15:58:05.433Z</td></tr><tr><td>bolvan</td><td><p>Под WSL работать не будет. Если это не WSL2.<br>
bundle только что обновил</p></td><td>2024-11-19T16:09:35.011Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="3159" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если это не WSL2</p>
</blockquote>
</aside>
<p>С ним тоже не стартует, пишет не удалось определить фаерволл</p></td><td>2024-11-19T16:34:42.177Z</td></tr><tr><td>bolvan</td><td><p>WSL2 это виртуалка с linux. там можно установить и nft, и ipt</p></td><td>2024-11-19T16:42:58.605Z</td></tr><tr><td>KDS</td><td><p>Для tls иана, для квика - вк.ком )</p></td><td>2024-11-19T16:58:11.259Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="spv82" data-post="3090" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/spv82/48/1834_2.png" class="avatar"> spv82:</div>
<blockquote>
<p>В следующем релизе этот баг будет исправлен.</p>
</blockquote>
</aside>
<p>установил v69, баг со временем а аутохост остался</p></td><td>2024-11-19T17:40:39.717Z</td></tr><tr><td>electrifying</td><td><p>Фанаты Кинетика благодарите болвана он хоть и писал 9000 раз что он не уважает оверпрайс роутеру от кинетика, но таки запилил скрипт на фикс udp</p></td><td>2024-11-19T17:53:16.061Z</td></tr><tr><td>easyone11</td><td><p>тоже удивился когда увидел в комитсах)</p></td><td>2024-11-19T18:17:04.128Z</td></tr><tr><td>bolvan</td><td><p>Давно просил кинетеров его сделать, тк мне не на чем тестить.<br>
Сделали, чуть немного покромсал его. Пусть будет</p></td><td>2024-11-19T18:47:23.483Z</td></tr><tr><td>bolvan</td><td><p>У меня он не остался. Все работает нормально и без /etc/localtime</p></td><td>2024-11-19T18:47:47.544Z</td></tr><tr><td>easyone11</td><td><p>печально</p></td><td>2024-11-19T18:48:43.164Z</td></tr><tr><td>bolvan</td><td><p>архитектура какая ?</p></td><td>2024-11-19T18:49:05.162Z</td></tr><tr><td>easyone11</td><td><p>arch all 1<br>
arch noarch 1<br>
arch aarch64_cortex-a53 10</p>
<p>musl libc (aarch64)<br>
Version 1.2.4</p></td><td>2024-11-19T18:49:40.137Z</td></tr><tr><td>bolvan</td><td><p>Так, действительно под x64 норм, а под mips хрень</p>
<p>Нет, это у меня пропал /tmp/TZ, на который ссылается линк /etc/TZ.<br>
все норм</p></td><td>2024-11-19T18:50:50.059Z</td></tr><tr><td>easyone11</td><td><p>странно, ну и ладно…</p>
<p>ls -l /etc/TZ<br>
lrwxr-xr-x    1 root     root             7 Jul 15 22:14 /etc/TZ → /tmp/TZ</p></td><td>2024-11-19T18:57:12.759Z</td></tr><tr><td>bolvan</td><td><p>А <code>cat /tmp/TZ</code> ?</p></td><td>2024-11-19T19:02:49.488Z</td></tr><tr><td>easyone11</td><td><p>еще раз зашёл на роутер, поменял туда обратно часовой пояс, стало норм, в 68версии не помогло, а сейчас помогло…</p></td><td>2024-11-19T19:04:19.245Z</td></tr><tr><td>bolvan</td><td><p>/etc/TZ - это линк, который не меняется.<br>
а /tmp/TZ заполняет /etc/init.d/system каждый раз<br>
/tmp - это tmpfs, ram disk</p></td><td>2024-11-19T19:13:23.224Z</td></tr><tr><td>easyone11</td><td><p>примерно понимаю, какой то локальный глюк, мб после того как патался пофиксить время пока не стало ясно что это из за бинарников в 68ой версии<br>
сейчас всё ок, спасибо</p></td><td>2024-11-19T19:38:43.517Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>если вдруг решу обновится (и так пока что всё устраивает) следующую строку надо на “новый язык” переводить?</p>
<pre><code class="lang-auto"> --filter-tcp=80   --dpi-desync=disorder --dpi-desync-fooling=badsum,md5sig --new --dpi-desync=fake,disorder --dpi-desync-fooling=badseq,badsum
</code></pre>
<p><em>кстати предлагаю заинтересованным проверить её на своём прове. считаю что вполне универсальная и не зависящая от nat и ttl и даже без листов (по желанию)</em></p>
<p>на 5и совсем разных провах проверил и всё что по ip не блочено открывает</p>
<p>единственно что думаю как замодить?? чтоб вместо указания 80 сделать чтоб tls или http сам запрет определял. для тех извращенских случаев когда “чистый” http не на 80</p></td><td>2024-11-19T19:51:34.029Z</td></tr><tr><td>_rv</td><td><p>Скачал новый винбандл, подключил свой .cmd от старой версии, заменив только строку для tcp ютуба. Должен сказать, что мультисплит - это просто красиво.</p>
<blockquote>
<p>–filter-tcp=443 --hostlist=“%~dp0list-youtube.txt” --dpi-desync=fake,multidisorder --dpi-desync-split-pos=1,midsld  --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=…</p>
</blockquote>
<p>на ростелекоме работает без --dpi-desync-repeats.</p></td><td>2024-11-19T20:11:48.632Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="Quqas" data-post="3177" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>надо на “новый язык” переводить?</p>
</blockquote>
</aside>
<p>нет</p>
<ul>
<li>nfqws : переименование <code>split</code> =&gt; <code>fakedsplit</code> , <code>disorder</code> =&gt; <code>fakeddisorder</code>. старые варианты остаются как синонимы.</li>
</ul></td><td>2024-11-19T20:14:24.124Z</td></tr><tr><td>KDS</td><td><p>А также без фейк, дисордер и 1 ) Но нужен seqovl=1</p></td><td>2024-11-19T20:14:49.465Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="3177" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>кстати предлагаю заинтересованным проверить её на своём прове. считаю что вполне универсальная и не зависящая от nat и ttl и даже без листов (по желанию)</p>
</blockquote>
</aside>
<p>потестил:<br>
не пробило смайлики на твиче и медиа на твиттере.</p>
<p>это из того, что успел за пару минут чекнуть, дальше не стал)</p></td><td>2024-11-19T21:36:42.648Z</td></tr><tr><td>i-no(...)</td><td><p>Для тестов помимо браузера использовал виндовый плеер <code>MPC-BE</code> который парсит ютубные ссылки и может воспроизводить видео. В лучшие временя он работал великолепно, но оказался очень чувствителен к цензуре и, в отличие от браузерного плеера, пользоваться им было затруднительно или вовсе невозможно.</p>
<details>
<summary>
Опять удалось добиться улучшений. Теперь всё стало практически идеально.</summary>
<p><code>--filter-tcp=443 --filter-l3=ipv6 --hostlist=/etc/nfqws/googlevideo.list --dpi-desync=ipfrag2 --dpi-desync-fooling=hopbyhop2 --dpi-desync-skip-nosni=0 --dpi-desync-any-protocol=1 --dpi-desync-cutoff=s6 --dpi-desync-repeats=2 --dpi-desync-autottl6=1:1-10</code></p>
<p>Больше никаких тупняков. Открытие около 1 секунды, перемотка без задержек.</p>
</details></td><td>2024-11-19T22:12:12.894Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>смайлы которые с <a href="http://static-cdn.jtvnw.net" rel="noopener nofollow ugc">static-cdn.jtvnw.net</a> в твиче или какието другие?<br>
у мну грузит. притом что сам твич разве блочен?</p>
<p>что за твитер медия х.з. акка нету. но видео кажет <a href="https://x.com/i/status/1858994574817194040" class="inline-onebox" rel="noopener nofollow ugc">x.com</a></p>
<hr>
<p>хотя спорить не стану . возможно есть более анальные провы</p></td><td>2024-11-19T22:42:57.972Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>а оно точно работает вообще хоть как нибудь прямо сейчас?<br>
тотже vlc как сломали на счёт тытруба (везде а не в эрэфии)так весь гугл не даёт  рецепта (только нерабочий спам)</p></td><td>2024-11-19T22:55:54.484Z</td></tr><tr><td>i-no(...)</td><td><p>Оно совершенно точно работает прямо сейчас у меня так как описано. Мне же это не приснилось. Возможно, что где-то еще это сможет работать тоже. Главное, что именно для этого профиля понадобится как минимум ipv6</p>
<p>Для стабилизации может потребоваться небольшое увеличение повторов и отодвигание cutoff.</p></td><td>2024-11-19T23:09:59.952Z</td></tr><tr><td>Quqas(Quqas)</td><td><p><img src="zapret-обсуждение-726/bbe9630c06f792a0d42de24abb2d91131cc1c3b2.png" alt="image" data-base62-sha1="qOljB6U98XesD0AiI1zyKdECihs" width="459" height="388"><br>
видимо приснилось</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f6950f08789f7873e398d07ebe3f42471f56cb42.jpeg" data-download-href="https://ntc.party/uploads/default/f6950f08789f7873e398d07ebe3f42471f56cb42" title="image"><img src="zapret-обсуждение-726/f6950f08789f7873e398d07ebe3f42471f56cb42_2_664x500.jpeg" alt="image" data-base62-sha1="zbmOvdevTrypBdYyZa19t033Ljk" width="664" height="500" srcset="zapret-обсуждение-726/f6950f08789f7873e398d07ebe3f42471f56cb42_2_664x500.jpeg, zapret-обсуждение-726/f6950f08789f7873e398d07ebe3f42471f56cb42.jpeg 1.5x, zapret-обсуждение-726/f6950f08789f7873e398d07ebe3f42471f56cb42.jpeg 2x" data-dominant-color="2D2320"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">716×539 82 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
буфер до 120 как правило</p></td><td>2024-11-19T23:15:17.270Z</td></tr><tr><td>i-no(...)</td><td><p>Вам виднее, что мне приснилось) Если сможете рассказать, как вскрыть GGC с помощью <code>--dpi-desync=fake,disorder --dpi-desync-fooling=badseq,badsum</code> буду благодарен.</p></td><td>2024-11-19T23:20:17.520Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>речь про сам плеер а не стратегию</p>
<p>а тытруб у меня с банальным fake по h3</p></td><td>2024-11-19T23:21:36.297Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>тытруб у меня с банальным fake по h3</p>
</blockquote>
<p>В браузерах - да, так все летает.</p>
<blockquote>
<p>скрин работающего плеера с видлом</p>
</blockquote>
<details>
<summary>
Вот и скрин</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15.jpeg" data-download-href="https://ntc.party/uploads/default/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15" title="3QQ3M3qVnwQ_pos20m52s.PNG"><img src="zapret-обсуждение-726/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15_2_345x201.jpeg" alt="3QQ3M3qVnwQ_pos20m52s.PNG" data-base62-sha1="6Y3dqbcvlHh83Gcs48XfPssSUqp" width="345" height="201" srcset="zapret-обсуждение-726/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15_2_345x201.jpeg, zapret-обсуждение-726/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15_2_517x301.jpeg 1.5x, zapret-обсуждение-726/30d6d7ad43345ed4a2024970b7b74a0f0bf89e15_2_690x402.jpeg 2x" data-dominant-color="363A3C"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">3QQ3M3qVnwQ_pos20m52s.PNG</span><span class="informations">960×560 39.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-11-19T23:32:25.764Z</td></tr><tr><td>Quqas(Quqas)</td><td><p><img src="zapret-обсуждение-726/61cad13791069004774deae8727b93f523b330cb.jpeg" alt="image" data-base62-sha1="dX6QC0iG2WRqMKY3qKAx56LtSkj" width="459" height="388"><br>
ну если не считать того что полный игнор ползунка перемотки то да…</p></td><td>2024-11-19T23:33:57.356Z</td></tr><tr><td>i-no(...)</td><td><p>Что там с ползунком не так?</p></td><td>2024-11-19T23:34:39.330Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>впервые вижу этот плеер - тыркал на нижнюю полоску<br>
тонкую<br>
а надо на жирную верхнюю</p></td><td>2024-11-19T23:35:35.402Z</td></tr><tr><td>i-no(...)</td><td><p>Все бывает впервые) Это MPC тот же, но у него часть контролов выключена “для красоты”. Выбирается в меню Вид или с клавиатуры Ctrl + цифра.</p></td><td>2024-11-19T23:37:00.594Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>только сдаётся мне не в запрете дело с багами плеера</p>
<p>а в том чтоб тытруб тебя “запомнил” когда ты саму страницу открыл и скопировал</p>
<p>а если закрыть браузер и тайм-аут и вырубленным запретом не открывает</p>
<p>в крайнем случаЕ можно <a href="http://wide-youtube.l.google.com" rel="noopener nofollow ugc">wide-youtube.l.google.com</a> в эксклюды внести</p>
<p>баг на этом этапе а не в ggc</p></td><td>2024-11-19T23:51:56.218Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Не уверен, что понимаю схему с “запоминанием”...</summary>
<p>Не уверен, что понимаю схему с “запоминанием” меня. Открываю в плеере видео из истории воспроизведения, то, которое давно очень не открывал, и оно воспроизводится тоже. Ну, то есть, я это проверял все таки. Если без nfqws — Гигантская_Фига.jpeg</p>
<p>Такие дела.</p>
<blockquote>
<p><code>wide-youtube.l.google.com</code> в эксклюды внести<br>
баг на этом этапе а не в ggc</p>
</blockquote>
<p>Если вывести из-под действия <code>nfqws</code> хотя бы одно из двух, то ничего не воспроизведётся.</p>
<p>Ну и с любого устойства хоть по проводу, хоть по вайфаю, которое работает только по tcp, тоже ничего не посмотреть без профиля для ggc. Возможно, родное приложение YT будет работать лучше, потому что там udp/h3 как говорят. Это не проверял. И да, MPC парсит как-то очень по-своему, отчего много боли приблокировках.</p>
<p>В целом устойчивее всего воспроизводился mp4 dash с кодеком h264/avc, чем меньше размер кадра, тем было лучше. Сейчас стало почти одинаково прекрасно в любом доступном формате, в том числе и UHD.</p>
</details></td><td>2024-11-19T23:55:50.493Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>у меня не открывало в принципе пока запрет не отрубил</p>
<p>а потом и вовсе перестало никак</p>
<p>а вот щас и с запретом с моими настройками открывает<br>
плеер</p>
<p>муть кароче. но то что хоть както умеет уже кейс… vlc так и немогёт - и решения тому нет</p></td><td>2024-11-19T23:58:51.809Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>спецом ребутнулся чтоб исключить влияние кэшей и т.д.</p>
<p>не открывая браузер стал запускать 3 ошибки а потом как начало открывать так и продолжило скока хошь.</p>
<p>служба с изначальными настройками</p>
<p>но вот фулхд плеер не аллё</p>
<p>720 тока хотя на сайте 1080</p>
<p>может с этим и тупняки…</p></td><td>2024-11-20T00:08:58.681Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="3183" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>что за твитер медия х.з. акка нету. но видео кажет <a href="https://x.com/i/status/1858994574817194040">x.com</a></p>
</blockquote>
</aside>
<p><code>pbs.twimg.com</code></p></td><td>2024-11-20T00:28:00.127Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>а пример где используется но у тебя не видно?если оно конечно без акка откроет.</p>
<p>сам сайт и у меня 400 ошибка что с запретом что без</p></td><td>2024-11-20T01:15:24.201Z</td></tr><tr><td>bolvan</td><td><p>badsum не на всех провах срабатывает. за роутером может резаться.<br>
все это описано в доке</p></td><td>2024-11-20T05:54:38.156Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p>Можно ли теперь транслировать стратегии zapret’а в byedpi более прямолинейно?<br>
Например: <code>--dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld</code> в <code>-d1 -d0+hm</code> не сработало.</p></td><td>2024-11-20T06:21:49.973Z</td></tr><tr><td>anon9001(anon)</td><td><p>Если тут кто-то любит смотреть ютуп через плеер то я советую связку yt-dlp+плеер который качает в ramdisk чтобы этих player specific багов не было. На винде есть утилита imdisk которую можно настроить в task scheduler вот так:</p>
<p><code>imdisk -a -s 4096M -m R: -p "/fs:ntfs /q /y"</code></p>
<p>На линуксе проще сделать, добавив в fstab нативно:</p>
<p><code>tmpfs /mnt/tmp tmpfs defaults,size=4096m 0 0</code></p></td><td>2024-11-20T06:54:45.832Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
оффтоп по гитхабу</summary>
<p>Если делается какой то фикс который отображается в комитсах после выхода ПО в релиз, как его себе установить?<br>
Скачивая архив из раздела Releases фикса же там не будет?<br>
Надо скачать релиз и скачать zip через кнопку Code, заменить всё содержимое из Code копированием в папке релиза, бинарники останутся, изменённые файлы заменятся и уже из данной папки делать установку?</p>
</details></td><td>2024-11-20T07:29:33.971Z</td></tr><tr><td>electrifying</td><td><p>Скажите пожалуйста, а если я использую multisplit вместе со split-pos и split-seqovl мне же не нужен флаг fooling?</p></td><td>2024-11-20T08:05:06.019Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="3200" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>сам сайт и у меня 400 ошибка что с запретом что без</p>
</blockquote>
</aside>
<p>тут, возможно. даже не с медиа проблема, а весь сайт нестабильно работает</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/975f304ac21f38ecde92e9df572599c091d6d1e7.png" data-download-href="https://ntc.party/uploads/default/975f304ac21f38ecde92e9df572599c091d6d1e7" title="изображение"><img src="zapret-обсуждение-726/975f304ac21f38ecde92e9df572599c091d6d1e7.png" alt="изображение" data-base62-sha1="lB62oZAALUeWxetgmEz454jCID5" width="690" height="270" data-dominant-color="020202"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">726×285 5.03 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/e9d65fed515bb59ee4478fb275975d7f5d1d39bd.png" data-download-href="https://ntc.party/uploads/default/e9d65fed515bb59ee4478fb275975d7f5d1d39bd" title="изображение"><img src="zapret-обсуждение-726/e9d65fed515bb59ee4478fb275975d7f5d1d39bd.png" alt="изображение" data-base62-sha1="xmCxS461EuC0YBnPfvMo6tOYeqp" width="690" height="175" data-dominant-color="EFEFF0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">744×189 9.63 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>но с твиттером там необычная ситуация.  сначала половина картинок не грузится, при входе на сайт нужно подождать секунд 30 (в этот момент curl до pbs выдает unknown ssl error)<br>
затем оно как-то пробивается и работает, пока ты сам активен на сайте (в этот момент curl проходит), в случае где-то 10минут неактивности медиа опять отваливается.<br>
с твоим конфигом у меня 50 на 50 шанс, что оно впринципе не пробьется. (я прождал минут 5)</p>
<p>вообще вот мой костыльный конфиг на данный момент:</p>
<pre><code class="lang-auto">--wf-tcp=443 --wf-udp=50000-50099 ^
--filter-tcp=443 --hostlist="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\youtube.txt" --dpi-desync=fake,split --dpi-desync-split-pos=1 --dpi-desync-fake-tls=0x16030102920100028e03035672ea15594162966e8a144297c497ddace5d546af7a4a0414a946fa52023cf720b0220c217abb1db321abbf01985cf3d07c61367c2ba5eff307b0f6f042448077 --dpi-desync-ttl=5 --new ^
--filter-tcp=443 --hostlist="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\other_light_block.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --new ^
--filter-tcp=443 --hostlist="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\other_hard_block.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=308 --dpi-desync-split-seqovl-pattern="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\tls_clienthello_vk_com.bin" --new ^
--filter-tcp=443 --hostlist="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\discord.txt" --dpi-desync=fake,split2 --dpi-desync-fooling=datanoack --dpi-desync-ttl=5 --new ^
--filter-udp=50000-50099 --ipset="C:\zapret_NEW\zapret-win-bundle-master\zapret-winws\ipset-discord.txt" --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n3 --dpi-desync-ttl=5
</code></pre></td><td>2024-11-20T08:12:57.484Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Acindaz" data-post="3202" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/acindaz/48/6420_2.png" class="avatar"> Acindaz:</div>
<blockquote>
<p>Можно ли теперь транслировать стратегии zapret’а в byedpi более прямолинейно?<br>
Например: <code>--dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld</code> в <code>-d1 -d0+hm</code> не сработало.</p>
</blockquote>
</aside>
<p>Более - да, совсем - нет. У мультидисордера фиксированный порядок отправки с последнего к первому, и он не меняется.<br>
В tpws disorder работает чредованием четных и нечетных</p></td><td>2024-11-20T08:34:39.408Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="easyone11" data-post="3204" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>Надо скачать релиз и скачать zip через кнопку Code, заменить всё содержимое из Code копированием в папке релиза, бинарники останутся, изменённые файлы заменятся и уже из данной папки делать установку?</p>
</blockquote>
</aside>
<p>Это можно делать только с пониманием что ты делаешь.<br>
Есть такие фиксы, которые требуют измененных бинариков.<br>
Например, старый nfqws не запустится с multidisorder и маркерами, хотя блокчек будет упорно его в это тыкать</p></td><td>2024-11-20T08:35:56.932Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="3205" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Скажите пожалуйста, а если я использую multisplit вместе со split-pos и split-seqovl мне же не нужен флаг fooling?</p>
</blockquote>
</aside>
<p>Нет. fooling нужен только для отдельных фейков. multi не создает отдельных фейков</p></td><td>2024-11-20T08:36:46.033Z</td></tr><tr><td>KDS</td><td><p>А мульти + секьюовл создает? Или он их так мешает в пакет, что это не считается фейком и сайт сломать не может?</p></td><td>2024-11-20T08:47:54.461Z</td></tr><tr><td>bolvan</td><td><p>это считается скрытыми фейком, замешанным в оригинал. он должен дойти до сервера. фулинг не требуется.<br>
в варианте split сайт сломаться может, если там имеется какая-то несовместимая с уходом за пределы окна ddos защита<br>
в варианте disorder 100% ломаются windows сервера</p></td><td>2024-11-20T08:54:31.131Z</td></tr><tr><td>KDS</td><td><p>Спасибо. В принципе, если добавить фулинг - то ничего страшного не происходит, видимо просто игнорируется</p></td><td>2024-11-20T08:56:11.713Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3208" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Это можно делать только с пониманием что ты делаешь.<br>
Есть такие фиксы, которые требуют измененных бинариков.<br>
Например, старый nfqws не запустится с multidisorder и маркерами, хотя блокчек будет упорно его в это тыкать</p>
</blockquote>
</aside>
<p>понял, значит теперь обновляюсь только с релизами</p></td><td>2024-11-20T09:27:23.426Z</td></tr><tr><td>bolvan</td><td><p>Попробовать можно, но гарантии нет.<br>
Бинарики принципиально меняются довольно редко<br>
Для надежности лучше самому собрать. Инструкции довольно подробно написаны, но, конечно, для чайника и это перебор</p></td><td>2024-11-20T09:30:34.387Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3214" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>для чайника и это перебор</p>
</blockquote>
</aside>
<p>вотвот)<br>
в целом понятно, для критичного фикса можно попробовать, но я думаю он не наступит, чтобы прям горело что надо обновиться</p></td><td>2024-11-20T09:32:18.355Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ок</p>
<p>жаль</p>
<p>но ты единственный кто хоть попробовал. спс.</p></td><td>2024-11-20T09:33:03.187Z</td></tr><tr><td>electrifying</td><td><p>А насчёт кинетика ещё вопрос если скрипт перенести в custom  надо ли ставить chmod +x или он автоматически инстант поднимет как скрипт дискорда?</p></td><td>2024-11-20T10:54:15.972Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="onebox githubissue" data-onebox-src="https://github.com/Aleksoid1978/MPC-BE/issues/630#issuecomment-2487244943">
  <header class="source">

      <a href="https://github.com/Aleksoid1978/MPC-BE/issues/630#issuecomment-2487244943" target="_blank" rel="noopener nofollow ugc">github.com/Aleksoid1978/MPC-BE</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Aleksoid1978/MPC-BE/issues/630#issuecomment-2487244943" target="_blank" rel="noopener nofollow ugc">крайне неуверенное открытие видео с youtube (не тормоза)</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-11-20" data-time="01:29:02" data-timezone="UTC">01:29AM - 20 Nov 24 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2024-11-20" data-time="09:38:38" data-timezone="UTC">09:38AM - 20 Nov 24 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/Quqas" target="_blank" rel="noopener nofollow ugc">
          <img alt="Quqas" src="zapret-обсуждение-726/7edb2b04f667a79b6af6fcd274f64b4c2a1c050e.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="A5DEE3">
          Quqas
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">не нашёл по /? как включить подробный лог\дебаг поэтому "на пальцах" объясню
лю<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">бой ролик с тытруба рандомно может 10+ раз подряд не открыть, ошибка: не удаётся воспроизвести файл
и точно также рандомно 10+ раз подряд открыть успешно.
такого чтоб через раз ошибка\успех не замечено. от того один и тот же ролик или разные тоже взаимосвязи не отмечено.
а главное нет "тормозов" при открытии ошибка либо сразу, либо сразу успех. проверил на 2х разных провайдерах.
т.е. нельзя подумать что "замедление" виновато. + у меня средства обхода настроены, но и они не влияют. и если уж открылось то и перемотка\ воспроизведение отлично без задержек и т.п. смена предпочитаемого формата - тоже мимо.
![image](https://github.com/user-attachments/assets/3f553c62-a38b-43b4-b3c8-b09bb9c7e5a4)

в чём может дело быть? может со стороны youtube "банят"?  тот же vlc как перестал открывать с youtube так и не смогли починить (так что респектую что хоть как-то открывает)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>такчто дело не в запрете а плеере как я и думал - просто проверь каким из 2х вариантов ты открываешь? если винда не 7 как у меня</p></td><td>2024-11-20T11:18:44.255Z</td></tr><tr><td>exz</td><td><p>Всё работает</p></td><td>2024-11-20T12:02:51.652Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Так там дело не в 'или', а и в том и в другом ...</summary>
<p>В идеальных условиях все работало великолепно. Но это было раньше. Теперь ggc стал камнем преткновения. После того, как я подобрал для себя подходящую стратегию именно для ggc, все заработало идеально. Причем не только в mpc-be, но и в <code>NewPipe</code> на андройде улучшилось — он тоже по-своему парсит ютубный веб в обход гугловых API.</p>
<p>В mpc-be настроены оба способа открытия и в приоритете встроенный парсер. Работает именно он, это видно как по списку процессов, так и по виду меню ПКМ в кадре, когда все откроется и можно переключать доступные форматы. Если возник тупняк, то именно из-за него. Для других видеосервисов, не поддерживаемых встроенным парсером, автоматически сработает yt-dlp.</p>
<p>В целом mpc-be в его текущем состоянии хорош еще и как test subject для стратегий, потому что если устойчиво заработало в нём, то будет работать достаточно хорошо или идеально везде.</p>
<p>Позиция разработчика mpc-be известна и понятна.</p>
</details></td><td>2024-11-20T12:16:06.791Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="3217" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>А насчёт кинетика ещё вопрос если скрипт перенести в custom надо ли ставить chmod +x или он автоматически инстант поднимет как скрипт дискорда?</p>
</blockquote>
</aside>
<p>все кастомы не требуют +x. они инклудятся , а не запускаются как программы</p></td><td>2024-11-20T12:31:26.027Z</td></tr><tr><td>electrifying</td><td><p>И последний вопрос --dpi-desync-split-seqovl=1 может замедлять загрузку веб  страниц я имею ввиду те что находятся в zapret-hosts-user и zapret-hosts-user-exclude?</p></td><td>2024-11-20T16:35:30.887Z</td></tr><tr><td>bolvan</td><td><p>Не может. Но может ломать совсем</p></td><td>2024-11-20T17:20:18.903Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="3223" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но может ломать совсем</p>
</blockquote>
</aside>
<p>Это касается только сайтов у которых нет настроенной ddos защиты как вы писали?</p></td><td>2024-11-20T17:26:36.657Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>вангую что нынешнее “идеальное” открытие плеера связано лишь с ip6 - и гугл на уровне алгоритмов не считает тебя “ботом”</p>
<p>+всё ещё считаю что ты путаешь совпавшую по времени, но никак не связанную между собой, смену api на тытрубе из-за которой в принципе парсер тупит и блокировки самого тытруба в эрэфии</p></td><td>2024-11-20T17:28:10.928Z</td></tr><tr><td>bolvan</td><td><p>Наоборот, голая ось в дефолтной настройке спокойно принимает out-of-window.<br>
Слом вызывают или какие-то мидлбоксы с защитой от ддос, или какие-то особые настройки, заставляющие ос отбрасывать все out-of window пакеты. Я о таких не знаю, но факт в том, что некоторые ломаются.<br>
А виндовс от дисордер с сековл ломается просто by design.</p></td><td>2024-11-20T17:31:45.490Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> сравнил ради интереса блокчек старой версии и 69ой для это форума. Заметил что с параметром wssize сейчас ничего не проверяется, это норм?</p></td><td>2024-11-20T17:34:27.864Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="easyone11" data-post="3227" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>сравнил ради интереса блокчек старой версии и 69ой для это форума. Заметил что с параметром wssize сейчас ничего не проверяется, это норм?</p>
</blockquote>
</aside>
<p>Да. В режиме standard не проверяется, если была найдена хоть одна вменяемая стратегия без wssize. Вменяемой считается любая без syndata<br>
Был редизайн , призванный выкинуть излишние чеки.<br>
Если работает что-то более базовое, то с ним другие варианты не проверяюся.<br>
Сработал чистый fake  ? Исключаем любые тесты fake,split fake,disorder<br>
Сработал чистый split ? Со сплитом больше ничего не тестим. Он и так в чистом виде пашет</p></td><td>2024-11-20T17:38:53.037Z</td></tr><tr><td>easyone11</td><td><p>теперь понятно что значит * blockcheck : переработка порядка тестирования стратегий</p>
<p>раньше ты развернутые Zapret: what’s new делал )</p></td><td>2024-11-20T17:52:18.465Z</td></tr><tr><td>KDS</td><td><p>Смотря сколько раз он сработал. Такое уже с гудбаем было - один запрос прошел (ура! “рабочая” стратегия!), остальные тут же блочатся. В итоге все работает через одно место непосредственно в браузере</p></td><td>2024-11-20T19:48:11.865Z</td></tr><tr><td>bolvan</td><td><p>Для “сколько раз”  есть множественные попытки.</p></td><td>2024-11-20T20:13:16.653Z</td></tr><tr><td>KDS</td><td><p>Да это понятно, но по умолчанию то она одна )</p></td><td>2024-11-20T20:17:27.005Z</td></tr><tr><td>bolvan</td><td><p>Если есть балансировка, то все стратегии могут быть потенциально нестабильны.<br>
От тестирования дополнительных не понять какие из них стабильны, а какие нет.</p>
<p>Раньше тоже был скип ненужных тестов, но сейчас он расширен.<br>
Чтобы ускорить процесс. Кому надо мощно приложиться есть force<br>
А еще чтобы поменьше было желающих wssize врубать</p></td><td>2024-11-20T20:19:08.537Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
А зачем ванговать? ...</summary>
<p>Я открыто об этом и пишу, что ipv6 в моей локации явился необходимым условием для применения выбранного мной десинка, но достаточным в целом он может и не являться. Стратегию-то я замысливал именно для того, чтобы с альтернативного софта и устройств по tcp доступаться до ближайших серверов ggc. Возможно, что их нахождение внутри провайдерского контура каким-то образом обеспечивает функционирование ипфраг2, которого <a class="mention" href="/u/bolvan">@bolvan</a> не считал перспективным для tcp. Это примечательно. Так или иначе надо подождать недельку и посмотреть как оно будет. А то тестирование само по себе иногда триггерит какую-то дрянь в “коробках” отчего кое что ломается дополнительно. И приходится ждать несколько часов или сутки пока все вернется к некой норме. А тем временем в браузере по tcp видео может работать вообще без стратегии для ggc, например. Такое уже было.</p>
</details></td><td>2024-11-20T20:24:16.715Z</td></tr><tr><td>Dur(Dur)</td><td><p><a href="http://archive.org" rel="noopener nofollow ugc">archive.org</a> заблочен? У пчёл со вчерашнего работает только через tor и byedpi.</p></td><td>2024-11-20T20:45:34.761Z</td></tr><tr><td>uwu(uwu)</td><td><p>как пчела пишу, что работает без обхода.<br>
судя по трассировке, трафик заходит в московский сервер cloudflare и дальше уже перенаправляется на сайт</p></td><td>2024-11-20T20:58:29.224Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>т.е. ты хочешь сказать что даже в браузере по ip4+tcp никак не можешь найти способ тытруба без тормозов? ip4+udp как я понял норм. в браузере.</p>
<div class="spoiler">
<p>а в случае с плеером всё упирается что по ip4 срабатывает чисто тытрубная защита от ботов а вовсе не чебурнилы</p>
</div></td><td>2024-11-20T21:19:56.637Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Картина такая:</summary>
<p>v4 после срывов подолгу не удавалось стабилизировать, бросил<br>
udp в браузерах работает давно и хорошо и 4 и 6, заботы не требует; система настроена на приоритет v6, поэтому не перепроверял v4 без необходимости.<br>
Но сейчас проверил и tcp4 в браузере — в моменте работает, открытие быстрое, перемотка почти не тупит. Добавил спец профиль для ggc под v4, пусть будет…<br>
Плеер mpc-be <strong>моментально</strong> завелся на tcp4! Но сколько бы он проработал, не известно<br>
Перешел превентивно на новый мультикромсатор, дотошных сравнительных тестов до и после не делал. Уже лень, <strong>не хочется становиться придатком блокчека и процесса тестирования как такового</strong>)<br>
Другие устройства по вайфаю и прочий софт перепроверю позже, нужно подготовить всё<br>
Насчет защиты от ботов — не уверен в этом, но и исключать не буду.</p>
<p>Надо пока посмотреть сколько проживет всё то, что было настроено ранее.</p>
</details>
<div class="spoiler">
<p>Про защиту от ботов что-нибудь интересное и м.б. неочевидное известно?</p>
</div></td><td>2024-11-20T22:45:31.341Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>всё просто. в инкогнито сразу открываешь тытруб ролик (не через главную) и смотришь не предлагает ли зайти в профиль из-за того что ты “бот”<br>
если нет тоже самое но с отметкой по времени в ролике.</p>
<p>т.к. у меня ip не белый а ip6 ваще не работает у прова - на тытрубе я и ещё стопицот рыл через прововский nat - постоянно вижу эту ботозащиту - и следовательно именно в этом и тупняк парсера в плеере - не ленись разраб и её можно было бы обойти - она на js завязана. надо лишь уметь в js</p></td><td>2024-11-20T23:03:57.934Z</td></tr><tr><td>i-no(...)</td><td><p>Ясно. С этой защитой лично не сталкивался ни разу. Вообще. Акка гуглового нет даже. Так что если что, то придется атомную бомбу скидывать.</p>
<p>Насчет разраба, ну он умеет в си обычные и плюсовые. Не считает нужным просто. Надо бы пошаркать или отпроксировать и посмотреть что оттуда приходит, но лень.</p></td><td>2024-11-20T23:08:20.213Z</td></tr><tr><td>zzr</td><td><p>балван красаучик <img src="https://ntc.party/images/emoji/twitter/nerd_face.png?v=12" title=":nerd_face:" class="emoji" alt=":nerd_face:" loading="lazy" width="20" height="20"> смарю переработал ридми теперь там всё чётко ясно и понятно, конкретно ядля себя отметил вот <a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D0%BA%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D0%BE%D0%B2-%D0%B4%D0%B5%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8" rel="noopener nofollow ugc">ето</a> место всё чётко и ясно например описано фаза 0 не работает с хотслистами ага смотрим кароч вот ети параметры такие как вссизе сундата и прочие и сразу становится понятн почему оно игонорирует хотслисты</p></td><td>2024-11-21T06:54:51.562Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="i-no" data-post="3220" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>но и в <code>NewPipe</code> на андройде улучшилось</p>
</blockquote>
</aside>
<p>У меня кстати с seqovl именно на телевизоре почему-то не работало и я долго не понимал почему если на всем остальном работало. Без этой опции телевизор наконец-то заработал. С newpipe правда есть какая-то мистика, бывает что видео тебя тупо “выкидывает” в менюшку. До блокироваок этого не было, но для сравнения smarttube рабоает более стабильно почему-то, наличие аккаунта может?</p></td><td>2024-11-21T07:01:43.298Z</td></tr><tr><td>bolvan</td><td><p>Телики лезут по TLS 1.2, что само по себе усложняет ситуевину, а так же могут требовать именно QUIC, могут задействовать сторонние домены, которых нет в броузере.<br>
Зависит от телика, если это android - от приложения.<br>
Стандартное гугловское youtube обычное и youtube tv - очень разные. Со вторым полная хрень.</p></td><td>2024-11-21T07:05:02.890Z</td></tr><tr><td>zzr</td><td><p>хз я телеки делал вот по етой <a href="https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%85%D0%BE%D0%B4-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-youtube-%D0%B4%D0%BB%D1%8F-%D0%BB%D1%8E%D0%B1%D1%8B%D1%85-smart-tv-%D1%81-goodbyedpi-v2ray-maradns/9425">инсрукции</a> сначала работало тока в браузере (на телеке) ав прилолжение не канало нов какой то момент оно даже начало работать, тока ето было ещё до изобретения гукчека поетому сраные задержки перед просмотром были щас то конечн <em>должно</em> быть всё збс</p></td><td>2024-11-21T07:14:46.267Z</td></tr><tr><td>abc555</td><td><p>Хотел спросить, а когда 2 заглушки стоят на 5 и 7 ttl то как правильно прописать ?<br>
–dpi-desync-ttl=5 --dpi-desync-autottl=2 так ?<br>
или<br>
–dpi-desync-ttl=5,7 или так ?</p></td><td>2024-11-21T09:59:19.704Z</td></tr><tr><td>bolvan</td><td><p>Максимум берется<br>
5,7 это непонятно как вообще может быть. TTL есть один в пакете. 2 не бывает и указания кому 5 , а кому 7 тоже</p></td><td>2024-11-21T10:49:50.122Z</td></tr><tr><td>i-no(...)</td><td><p>Из странного можно попробовать <code>--dpi-desync-autottl=2:5-7</code> и посмотреть что из этого получится.<br>
<a class="mention" href="/u/bolvan">@bolvan</a> Как autottl выбирает значение из диапазона?</p></td><td>2024-11-21T10:52:06.249Z</td></tr><tr><td>bolvan</td><td><p>В доке описано как</p>
<blockquote>
<ul>
<li><code>autottl</code>. Суть режима в автоматическом определении TTL, чтобы он почти наверняка прошел DPI и немного не дошел до сервера. Берутся базовые значения TTL 64,128,255, смотрится входящий пакет (да, требуется направить первый входящий пакет на nfqws !). Вычисляется длина пути, отнимается <code>delta</code> (1 по  умолчанию). Если TTL вне диапазона (min,max - 3,20 по умолчанию), то берутся значения min,max, чтобы вписаться в  диапазон. Если при этом полученный TTL больше длины пути, то автоматизм не сработал и берутся фиксированные значения  TTL для атаки. Техника позволяет решить вопрос, когда вся сеть перегорожена шлагбаумами (DPI, ТСПУ) везде где только  можно, включая магистралов. Но потенциально может давать сбои. Например, при асимметрии входящего и исходящего канала  до конкретного сервера. На каких-то провайдерах эта техника будет работать неплохо, на других доставит больше проблем,  чем пользы. Где-то может потребоваться тюнинг параметров. Лучше использовать с дополнительным ограничителем.</li>
</ul>
</blockquote></td><td>2024-11-21T10:57:35.166Z</td></tr><tr><td>abc555</td><td><p>А если сделать 2 одинаковых стратегий и указать --dpi-desync-autottl=2:5-5 и во второй --dpi-desync-autottl=2:7-7 так работать будет ?</p></td><td>2024-11-21T11:05:01.598Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="3250" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>2:7-7</p>
</blockquote>
</aside>
<p>Это абсолютно бессмысленный параметр.  Здесь TTL будет либо точно 7, либо будет тот, который указан в не-авто TTL. Проще сразу не авто сделать</p></td><td>2024-11-21T11:06:04.379Z</td></tr><tr><td>abc555</td><td><p>Ну да, тут надо ещё подумать. Я поставил с дуру ttl 8 и у моей перестал работать банк )) И ещё не исправил, так бедолага не может в него зайти, делал на быструю руку</p></td><td>2024-11-21T11:11:54.429Z</td></tr><tr><td>abc555</td><td><p>split2 это тоже самое что multisplit, то есть разницы между ними только split2 в 68 версии, а multisplit уже в 69, но принцип как я понял тот же, если не указывать никаких дополнительных параметров ?<br>
просто использую старую стратегию</p></td><td>2024-11-21T11:21:33.619Z</td></tr><tr><td>bolvan</td><td><p>да, сделано чтобы не упала совместимость<br>
но лучше переходить на новые параметры.<br>
однажды через годик могу и убрать</p></td><td>2024-11-21T11:24:05.407Z</td></tr><tr><td>abc555</td><td><p>я запускал блокчек и мою старую стратегию он мне не предложил, хотя работает она лучше из всего что он мне показал, упор больше идёт на badseq, хотя с badsum у меня работает намного лучше, так же в ней больше ставка на multidisorder, хотя с multisplit работает лучше</p></td><td>2024-11-21T11:27:29.171Z</td></tr><tr><td>bolvan</td><td><p>badsum тестируется наравне с другими ограничителями.<br>
скипа там нет, за исключением quick варианта</p></td><td>2024-11-21T11:29:12.922Z</td></tr><tr><td>abc555</td><td><p>Я тестирую только tls 2, проверял так же отдельно и 80 порт и он так же предложил варианты, они работают, но старый вариант стратегии намного лучше и быстрее, то есть на 80 порту небыло предложения --dpi-desync=fake,multisplit<br>
Вы сделали предложения на новые варианты по типу --dpi-desync=fake,multidisorder --dpi-desync-split-pos=midsld, но с ними работает намного хуже, надо добавить старые варианты в блок чек, по типу --dpi-desync=fake,multisplit --dpi-desync-fooling=md5sig,badsum</p></td><td>2024-11-21T11:34:00.394Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="3257" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>небыло предложения --dpi-desync=fake,multisplit</p>
</blockquote>
</aside>
<p>Скорее всего потому что fake без чего-либо сработал.<br>
Чтобы тестировать все надо включить force</p></td><td>2024-11-21T11:39:46.335Z</td></tr><tr><td>abc555</td><td><p>А я понял, я стандарт запускал и да, сработало просто на fake</p></td><td>2024-11-21T11:41:12.155Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
NewPipe</summary>
<p>Он еще повадился швырять эксепшены, вроде таких:</p>
<blockquote>
<p><code>["org.schabi.newpipe.player.mediasource.FailedMediaSource$StreamInfoLoadException: org.schabi.newpipe.extractor.exceptions.ExtractionException: IOS player response is not valid</code></p>
</blockquote>
<p><em>Синяя изолента</em> отклеилась, пришло время проапдейтить.</p>
</details></td><td>2024-11-21T11:42:18.254Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Доброго. А можно подробней на примере<br>
<a href="http://r1---sn-2gb7sn7r.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">r1---sn-2gb7sn7r.googlevideo.com</a><br>
host &gt; это r самая первая или gogle?<br>
endhost&gt; это com или video?<br>
sld &gt; это r самая первая?<br>
endsld &gt; это r перед google?<br>
midsld&gt;  это середина r1—sn-2gb7sn7r?<br>
sniext&gt;&gt;&gt;&gt;  сдесь начало?<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/c56708a65cf671a9bc9a80169e5879e2780d40e0.jpeg" data-download-href="https://ntc.party/uploads/default/c56708a65cf671a9bc9a80169e5879e2780d40e0" title="IMG_20241121_144705"><img src="zapret-обсуждение-726/c56708a65cf671a9bc9a80169e5879e2780d40e0_2_690x190.jpeg" alt="IMG_20241121_144705" data-base62-sha1="saiOfLigJofFXgB9uJDRU0A1m3m" width="690" height="190" srcset="zapret-обсуждение-726/c56708a65cf671a9bc9a80169e5879e2780d40e0_2_690x190.jpeg, zapret-обсуждение-726/c56708a65cf671a9bc9a80169e5879e2780d40e0_2_1035x285.jpeg 1.5x, zapret-обсуждение-726/c56708a65cf671a9bc9a80169e5879e2780d40e0.jpeg 2x" data-dominant-color="EDD6D6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241121_144705</span><span class="informations">1080×298 144 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-11-21T11:49:25.661Z</td></tr><tr><td>bolvan</td><td><p>В дебаг запустите на сплит на указанных частях. Оно хекс дампает</p></td><td>2024-11-21T11:53:13.564Z</td></tr><tr><td>i-no(...)</td><td><p>Ненене</p>
<p>host – это всё с начала<br>
endhost – это конец всего<br>
sld – это googlevideo<br>
endsld – это “o”,<br>
midsld – середина googlevideo<br>
sniext – это sniext, на срине его не видно, там должно быть читаемое sni – server name</p>
<p>Ридмик обновлён, см. <a href="https://github.com/bol-van/zapret?tab=readme-ov-file#tcp-%D1%81%D0%B5%D0%B3%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F" rel="noopener nofollow ugc">tcp сегментация</a></p></td><td>2024-11-21T12:06:03.460Z</td></tr><tr><td>toxae1(Toxa)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98.jpeg" data-download-href="https://ntc.party/uploads/default/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98" title="IMG_20241121_153005"><img src="zapret-обсуждение-726/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98_2_276x500.jpeg" alt="IMG_20241121_153005" data-base62-sha1="lprQKncw2zSzGSErm70wNUi0AzK" width="276" height="500" srcset="zapret-обсуждение-726/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98_2_276x500.jpeg, zapret-обсуждение-726/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98_2_414x750.jpeg 1.5x, zapret-обсуждение-726/960e1c1ee3daa1968d1f1e1f1fb46ac613cbad98_2_552x1000.jpeg 2x" data-dominant-color="F3E5E6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241121_153005</span><span class="informations">1080×1953 223 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600.jpeg" data-download-href="https://ntc.party/uploads/default/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600" title="IMG_20241121_153025"><img src="zapret-обсуждение-726/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600_2_690x206.jpeg" alt="IMG_20241121_153025" data-base62-sha1="eqmqrDsjElE6UEphT6pSXG0QvaU" width="690" height="206" srcset="zapret-обсуждение-726/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600_2_690x206.jpeg, zapret-обсуждение-726/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600_2_1035x309.jpeg 1.5x, zapret-обсуждение-726/65194c71eb7d6fcc52a17fefe1a63b9a0dc82600.jpeg 2x" data-dominant-color="E0E0F0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241121_153025</span><span class="informations">1080×324 124 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Прикольно нарезало. Кто отгадает домен. Но ете чет не понравилось.</p></td><td>2024-11-21T12:33:03.390Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="3263" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>endsld – это “o”,</p>
</blockquote>
</aside>
<p>Не совсем. Это следующий за ним байт. Точка выходит<br>
Все концы считаются так. Поэтому -1 значит отрезать последний кусок как 1 байт с конца</p></td><td>2024-11-21T12:41:06.998Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Спасибо а то я думал хост это гуглвидео<br>
А слд типо аброкадабра перед точкой. Теперь разобрался.</p></td><td>2024-11-21T13:05:49.630Z</td></tr><tr><td>neo(1eo1)</td><td><p>“sld” это “second level domain”</p></td><td>2024-11-21T13:23:56.378Z</td></tr><tr><td>minecrafter(Minecrafter)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> , подскажите, пожалуйста! Как мне сделать такой конфиг, чтобы весь tcp траффик на ВСЕХ портах завернуть в стратегию? Когда порты заранее неизвестны и могут быть какие угодно.</p></td><td>2024-11-21T14:26:39.920Z</td></tr><tr><td>i-no(...)</td><td><p>Я немного расширю контекст вопроса <a class="mention" href="/u/minecrafter">@minecrafter</a><br>
Как может проявляться то, когда <code>nfqws</code>/<code>tpws</code> захлебывается от избыточного трафика и что мы можем в таком случае сделать исходя из того, что ресурсов cpu в обрез, но хватает. Скажем, дедлоки на опенврт как могут выглядеть.</p></td><td>2024-11-21T14:38:22.387Z</td></tr><tr><td>bolvan</td><td><p>Можно написать 1-65535, но все-таки лучше выделить более узкий диапазон.<br>
Абы какие они вряд ли могут быть. Хотя бы нижние исключить до 1023 включительно</p></td><td>2024-11-21T14:39:03.418Z</td></tr><tr><td>bolvan</td><td><p>При дедлоках расхода ресурсов не будет. Но перестанет ходить трафик, перенаправленный на очередь.<br>
Процесс тупо отморозится, жрать ничего не будет.</p>
<p>В случае ограничения по connbytes перегрузка по cpu вряд ли случится. Там очень незначительная нагрузка. А если редиректнуть все с keepalive, то будет жрать под завязку на массивных выгрузках. Тормознется upload</p></td><td>2024-11-21T14:41:23.782Z</td></tr><tr><td>electrifying</td><td><p>А тут есть владельцы кинетиков с 69 версии запрета, вы тестили фикс upd который сделали болвану? Мне кажется что он не работает я проверил его и дискорд с одной и той же стратегией на 68 и 69 версии запрета и вот на 69 к голосовому каналу не подключает, на 68 если использовать только дискорд кастом скрипт исправив /opt/zapret/init.d/sysv/zapret внеся туда под секции do_start() do_stop() и restart-fw|restart_fw правила</p>
<pre><code class="lang-auto">for IFACE_N in $IFACE_WAN; do
    iptables -t nat -A POSTROUTING -o $IFACE_N -j MASQUERADE
 done
</code></pre>
<p>и</p>
<pre><code class="lang-auto">for IFACE_N in $IFACE_WAN; do
    iptables -t nat -D POSTROUTING -o $IFACE_N -j MASQUERADE 
done
</code></pre>
<p>То войс в дискорде работает на 68 версии, казалось бы в 69 все тоже самое должен делать фикс для кинетика но вот голосовой чат дискорда все равно не заводится. У кого-то есть с этим проблемы или в 69 дискорд и upd фикс кинетика норм у вас работают?</p></td><td>2024-11-21T14:45:21.846Z</td></tr><tr><td>bolvan</td><td><p>iptables -S -t nat<br>
что выдает с этим фиксом моим ?</p></td><td>2024-11-21T14:48:22.656Z</td></tr><tr><td>bokov333(Bokov333)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> можно ли совмещать --dpi-desync-ttl=3 с --dpi-desync-fooling=datanoack?</p></td><td>2024-11-21T16:17:08.435Z</td></tr><tr><td>bolvan</td><td><p>Можно, но обычно datanoack и так хватает.<br>
Но могут отдельные исключения быть, если сервер примет пакет с datanoack. Про yahoo что-то писали.<br>
Можно так fooling md5sig,datanoack</p></td><td>2024-11-21T16:28:06.755Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="3273" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>что выдает с этим фиксом моим ?</p>
</blockquote>
</aside>
<pre><code class="lang-auto">-P PREROUTING ACCEPT
-P INPUT ACCEPT
-P OUTPUT ACCEPT
-P POSTROUTING ACCEPT
-N _NDM_DNAT
-N _NDM_DNS_REDIRECT
-N _NDM_EZ_BYPASS
-N _NDM_EZ_DNAT
-N _NDM_HOTSPOT_DNSREDIR
-N _NDM_IPSEC_POSTROUTING_NAT
-N _NDM_MASQ
-N _NDM_MASQ_BYPASS
-N _NDM_SL_PRIVATE
-N _NDM_SNAT
-N _NDM_SNAT_MAPT
-N _NDM_STATIC_DNAT
-N _NDM_STATIC_LOOP
-N _NDM_STATIC_SNAT
-N _NDM_UPNP_REDIRECT_SYS
-A PREROUTING -j _NDM_DNAT
-A PREROUTING -j _NDM_DNS_REDIRECT
-A PREROUTING -j _NDM_EZ_BYPASS
-A PREROUTING -m ndmmark --ndmmark 0x0/0x8 -j _NDM_UPNP_REDIRECT_SYS
-A OUTPUT -j _NDM_DNAT
-A POSTROUTING -o ppp0 -j MASQUERADE
-A POSTROUTING -j _NDM_IPSEC_POSTROUTING_NAT
-A POSTROUTING -j _NDM_SNAT
-A POSTROUTING -j _NDM_SNAT_MAPT
-A POSTROUTING -j _NDM_MASQ
-A _NDM_DNAT -j _NDM_STATIC_DNAT
-A _NDM_DNS_REDIRECT -j _NDM_HOTSPOT_DNSREDIR
-A _NDM_EZ_BYPASS -d 192.168.1.1/32 -j ACCEPT
-A _NDM_MASQ -j _NDM_MASQ_BYPASS
-A _NDM_MASQ -s 192.168.1.0/24 ! -o br0 -m ndmmark --ndmmark 0x4/0x0 -j MASQUERA                                                                                                         DE
-A _NDM_MASQ_BYPASS -s 224.0.0.0/4 -j ACCEPT
-A _NDM_MASQ_BYPASS -d 224.0.0.0/4 -j ACCEPT
-A _NDM_SL_PRIVATE -i ra3 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i ra6 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i ra5 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i ra2 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i ra4 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i rai4 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i rai5 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i rai3 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i rai2 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i rai6 -j _NDM_EZ_DNAT
-A _NDM_SL_PRIVATE -i br0 -j _NDM_EZ_DNAT
-A _NDM_SNAT -j _NDM_STATIC_LOOP
-A _NDM_SNAT -o eth3 -j _NDM_STATIC_SNAT
-A _NDM_SNAT -o ppp0 -j _NDM_STATIC_SNAT
-A _NDM_STATIC_LOOP -s 192.168.1.0/24 -d 192.168.1.0/24 -o br0 -j SNAT --to-sour                                                                                                         ce 192.168.1.1
-A _NDM_STATIC_LOOP -s 192.168.1.0/24 -o br0 -m ndmmark --ndmmark 0x4/0x0 -j SNA                                                                                                         T --to-source 192.168.1.1
</code></pre></td><td>2024-11-21T16:43:47.548Z</td></tr><tr><td>zzr</td><td><aside class="quote no-group" data-username="bolvan" data-post="3254" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>могу и убрать</p>
</blockquote>
</aside>
<details>
<summary>
Summary</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd.jpeg" data-download-href="https://ntc.party/uploads/default/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd" title="d00c3cb54d44754297c8aca02e43aee8-251961624"><img src="zapret-обсуждение-726/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd_2_517x300.jpeg" alt="d00c3cb54d44754297c8aca02e43aee8-251961624" data-base62-sha1="eWr98oirdkHHlVuiCZFkqmtX3VH" width="517" height="300" srcset="zapret-обсуждение-726/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd_2_517x300.jpeg, zapret-обсуждение-726/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd_2_775x450.jpeg 1.5x, zapret-обсуждение-726/68b986fd7578715b6ac3e260d34a4fbc4a9c6cbd.jpeg 2x" data-dominant-color="443734"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">d00c3cb54d44754297c8aca02e43aee8-251961624</span><span class="informations">1000×582 121 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p><img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji only-emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-21T16:53:54.192Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>В <strong>zapret/common/ipt.sh</strong> дописать строчку:<br>
<code>ipt_add_del $1 _NDM_MASQ -t nat -o $i -p udp -m mark --mark $DESYNC_MARK/$DESYNC_MARK -j MASQUERADE</code><br>
Это точно рабочий вариант, уже давно так крутится на всех кинетиках. <a href="https://ntc.party/t/zapret-whats-new/61/71">На основе этого сделал</a></p>
<pre><code class="lang-auto">_fw_nfqws_post4()
{
	# $1 - 1 - add, 0 - del
	# $2 - iptable filter for ipv4
	# $3 - queue number
	# $4 - wan interface names space separated
	[ "$DISABLE_IPV4" = "1" -o -z "$2" ] || {
		local i

		ipt_print_op $1 "$2" "nfqws postrouting (qnum $3)"

		rule="-m mark ! --mark $DESYNC_MARK/$DESYNC_MARK $2 $IPSET_EXCLUDE dst -j NFQUEUE --queue-num $3 --queue-bypass"
		if [ -n "$4" ] ; then
			for i in $4; do
				ipt_add_del $1 POSTROUTING -t mangle -o $i $rule
                ipt_add_del $1 _NDM_MASQ -t nat -o $i -p udp -m mark --mark $DESYNC_MARK/$DESYNC_MARK -j MASQUERADE
			done
		else
			ipt_add_del $1 POSTROUTING -t mangle $rule
		fi
	}
}
</code></pre>
<p>P.S. кинетик дропает не родные правила в iptables поэтому нужно еще и в /opt/etc/ndm/netfilter.d правила дописать по zapret restart-fw</p></td><td>2024-11-21T17:08:00.452Z</td></tr><tr><td>bolvan</td><td><p>Понятно, но это не годится, тк вламывается в код, в который вламываться не нужно.</p>
<p>А такое добавить неплохо</p>
<pre><code class="lang-auto">-p udp -m mark --mark $DESYNC_MARK/$DESYNC_MARK
</code></pre>
<p>^^^<br>
У него появляется запись с MASQUERADE</p>
<p>мой вариант такой</p>
<pre><code class="lang-auto">zapret_custom_firewall()
{
	# $1 - 1 - add, 0 - stop

	local wan wanif rule

	[ "$DISABLE_IPV4" = "1" ] || {
		# use IFACE_WAN if defined. if not - search for interfaces with default route.
		wanif=${IFACE_WAN:-$(sed -nre 's/^([^\t]+)\t00000000\t[0-9A-F]{8}\t[0-9A-F]{4}\t[0-9]+\t[0-9]+\t[0-9]+\t00000000.*$/\1/p' /proc/net/route | sort -u | xargs)}
		for wan in $wanif; do
			rule="-o $wan -p udp -m mark --mark $DESYNC_MARK/$DESYNC_MARK"
			ipt_print_op $1 "$rule" "keenetic udp fix"
			ipt_add_del $1 POSTROUTING -t nat $rule -j MASQUERADE
		done
	}
}

</code></pre></td><td>2024-11-21T17:24:08.486Z</td></tr><tr><td>electrifying</td><td><p>Видимо, кто фикс делал не учел этот момент и он укатился в прод,но теперь все ок. Спасибо за правку теперь действительно работает как надо и еще такой вопрос есть стратегия --dpi-desync=multisplit --dpi-desync-split-pos=1,midsld - --dpi-desync-split-seqovl=1 seqovl ломает сайт hdrezka.ag при его заходе не распознает https соединение и перекидывает просто на http каким образом это можно пофиксить, остальные сайты нормально работают mtu 1500</p></td><td>2024-11-21T18:23:03.441Z</td></tr><tr><td>uwu(uwu)</td><td><p>у меня открылось, если добавить seqovl pattern</p></td><td>2024-11-21T18:33:28.954Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="uwu" data-post="3281" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>если добавить seqovl pattern</p>
</blockquote>
</aside>
<p>А что добавили в него, не могу в доке найти пример</p>
<p>UPD:А, туда фейки добавляются понял</p>
<p>Не сработало</p></td><td>2024-11-21T18:35:02.344Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="electrifying" data-post="3282" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>не могу в доке найти пример</p>
</blockquote>
</aside>
<p>я выше кидал пример своего конфига:<br>
<code>https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/3206</code></p>
<p>открылось после того , как перекинул из light в hard</p></td><td>2024-11-21T18:40:17.601Z</td></tr><tr><td>KDS</td><td><p>добавляете любой фейк tls и все работает. Можно еще ограничителей добавить - md5, badseq или ttl</p></td><td>2024-11-21T18:45:32.986Z</td></tr><tr><td>electrifying</td><td><p>Я думал теперь с новым multisplit нельзя перед началом fake использовать, а оказывается можно. Ну да, теперь все работает. Всем спасибо</p></td><td>2024-11-21T18:48:46.885Z</td></tr><tr><td>KDS</td><td><p>Скорее одним мультисплитом пробить этот сайт, а также абс.твимг.ком и линкедин.ком нельзя (в общем все на TLS 1.2). Поверьте, я пытался.</p></td><td>2024-11-21T18:54:01.108Z</td></tr><tr><td>electrifying</td><td><p>Получается что так, да. Хотя в случае fake,multisplit и указание seqovl pattern не понадобилось хватило просто seqovl</p></td><td>2024-11-21T18:58:49.785Z</td></tr><tr><td>KDS</td><td><p>А если поменять fake,multisplit на fakedsplit? А все остальное оставить</p>
<p>А нет, нефига, не работает (</p></td><td>2024-11-21T19:00:25.506Z</td></tr><tr><td>neo(1eo1)</td><td><p>запустил <strong>tpws</strong> на андроиде без рут с конфигом</p>
<blockquote>
<p>./tpws   --port 1111 --sock --debug 1 --filter-tcp=443 --hostlist-auto=“autohostlist.txt” --hostlist=“hosts.txt”  --hostlist-exclude=“exclude.txt” --tlsrec=sld+3</p>
</blockquote>
<p>затем запускаю</p>
<blockquote>
<p>curl -x socks5h://127.0.0.1:1111   <a href="https://www.gstatic.com" rel="noopener nofollow ugc">https://www.gstatic.com</a></p>
</blockquote>
<p>а оно режет SNI, даже  если включить хост в исключение!</p>
<details>
<summary>
LOG</summary>
<blockquote>
<p>Legs : local:1 remote:0<br>
Socket fd=7 (local) connected from [::ffff:127.0.0.1]:55680<br>
socks target for fd=7 is : 142.250.186.99:443<br>
desync profile search for tcp target=142.250.186.99:443 l7proto=unknown hostname=‘<a href="http://www.gstatic.com" rel="noopener nofollow ugc">www.gstatic.com</a>’<br>
desync profile 1 matches<br>
Legs : local:1 remote:1<br>
Socket fd=10 (remote) connected from : 192.168.72.201:51878<br>
tampering tcp segment with size 517 to 142.250.186.99:443<br>
using cached desync profile 1<br>
connection hostname: <a href="http://www.gstatic.com" rel="noopener nofollow ugc">www.gstatic.com</a><br>
Data block contains TLS ClientHello<br>
request hostname: <a href="http://www.gstatic.com" rel="noopener nofollow ugc">www.gstatic.com</a><br>
discovered l7 protocol<br>
desync profile search for tcp target=142.250.186.99:443 l7proto=tls hostname=‘<a href="http://www.gstatic.com" rel="noopener nofollow ugc">www.gstatic.com</a>’<br>
desync profile 1 matches<br>
making 2 TLS records at pos 160<br>
-2nd TLS record: 00 00 00 14 00 12 00 00 0F 77 77 77 2E 67 73 74 : …www.gst<br>
+2nd TLS record: 16 03 01 01 65 61 74 69 63 2E 63 6F 6D 00 0B 00 04 03 00 01 02 00 0A 00 16 00 14 00 1D 00 17 00 … : …eatic.com… …<br>
segment size changed: 517 → 522</p>
</blockquote>
</details>
<p>НО, если запустить</p>
<blockquote>
<p>curl -x <strong>socks5</strong>://127.0.0.1:1111   <a href="https://www.gstatic.com" rel="noopener nofollow ugc">https://www.gstatic.com</a></p>
</blockquote>
<p>без “h” в socks5h (предварительно резолвить) , то обрабатывает нормально<br>
Походу это баг<br>
Или я что-то делаю не так?!</p></td><td>2024-11-22T06:15:45.493Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/kds">@KDS</a> можешь еще по мультистратегии подсказать вот я после --new добавил еще одну стратегию и указал лист только с ютубом, но он почему-то не работает. Хотя сама стратегия верная если я ее буду использовать первой и одной до параметра --new че не так делаю</p>
<p>upd пофиксил</p></td><td>2024-11-22T07:00:24.901Z</td></tr><tr><td>Esto</td><td><p>2 вопроса.<br>
1)какие еще параметры можно сделать для quic чтобы по нему работали сервера гугл видео.квик есть, прогонял блокчек по разным сервереам, ничего не находит, если добавлять квикинитиалы из папки фейк тоже не находит и с записанным инитиал от гугл транслейт тоже не находит. ипв6 нет.<br>
2)вредно ли применять 1 стратегию для хттпс для всего, то есть без ограничения хостлиста? вроде все работает и репитов в стратегии нет.</p></td><td>2024-11-22T07:42:12.181Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Esto" data-post="3291" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/7ea924/48.png" class="avatar"> Esto:</div>
<blockquote>
<p>вредно ли применять 1 стратегию для хттпс для всего, то есть без ограничения хостлиста?</p>
</blockquote>
</aside>
<p>смотря что в стратегии используется, если какой-нибудь seqovl без фейка то есть большая вероятность сломать какой-нибудь сайт как хдрезку напримеру</p></td><td>2024-11-22T07:47:38.622Z</td></tr><tr><td>Esto</td><td><p>сековл без фейка хдрезка работает</p></td><td>2024-11-22T07:50:46.883Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="neo" data-post="3289" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/neo/48/2806_2.png" class="avatar"> neo:</div>
<blockquote>
<p>без “h” в socks5h (предварительно резолвить) , то обрабатывает нормально<br>
Походу это баг<br>
Или я что-то делаю не так?!</p>
</blockquote>
</aside>
<p>Да. это проблема. Исходники обновил. См релиз 69.1</p></td><td>2024-11-22T09:43:56.037Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="electrifying" data-post="3290" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>можешь еще по мультистратегии подсказать вот я после --new добавил еще одну стратегию и указал лист только с ютубом, но он почему-то не работает. Хотя сама стратегия верная если я ее буду использовать первой и одной до параметра --new че не так делаю</p>
</blockquote>
</aside>
<p>Порядок поиска с начала до конца до первого совпадения, а не сверка всех</p></td><td>2024-11-22T09:45:25.312Z</td></tr><tr><td>electrifying</td><td><p>А если основной хостлист большой с кучей адресов и весом в 2 мб, может ли это замедлить работу сайтов при работе мультистратегии? Ведь сначала будет опрошена одна стратегия и основной хотлист и потом ещё одна стратегия но с другим хотлистом</p></td><td>2024-11-22T10:43:36.366Z</td></tr><tr><td>bolvan</td><td><p>Размер листа не влияет линейным образом на скорость поиска.<br>
Там что-то типа селекта из таблицы базы данных по индексу.<br>
Память жрет, но работает быстро.<br>
Поэтому, кстати, и запрещены конструкции со звездочками. Так пришлось бы его линейно проходить</p></td><td>2024-11-22T11:11:49.875Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>А плануруется что-то подобное мультидисордера для quic?<br>
У меня tcp на одном мультидисордере нормально все  обходит без фейков. Вот для quic что-то такое же мощьное)<br>
Яб еще добавил бы рандом функцию для маркера, задаешь от и до<br>
Ps ну и может функцию нарезания пакета на определенное количество равных частей ну и тоже с рандомом количества частей.</p></td><td>2024-11-22T12:51:42.949Z</td></tr><tr><td>bolvan</td><td><p>udp невозможно порезать<br>
рандом приводит к такому же рандомному фейлу<br>
нарезка на равные тоже ничего не дает</p></td><td>2024-11-22T13:47:05.808Z</td></tr><tr><td>zzr</td><td><p>вот был раньше split2 и был fake а теперь ето комбо идёт fakedsplinter а может я хочу делать тока сплит2 без фейк или наоборот и какж быить теперь</p></td><td>2024-11-22T15:18:08.086Z</td></tr><tr><td>bolvan</td><td><p>split2 стал синонимом multisplit. с прежними параметрами ведет себя точно так же</p></td><td>2024-11-22T15:20:32.453Z</td></tr><tr><td>zzr</td><td><p>спасибо за информацию <span class="spoiler">продолжаем сидеть на старой версии ато развалютса все сратегии <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></span></p>
<p>кому интересн всё <a href="https://github.com/bol-van/zapret/releases/tag/v69" rel="noopener nofollow ugc">написано</a> в релиз нотесах (тока щас увидал))</p></td><td>2024-11-22T15:24:35.744Z</td></tr><tr><td>neo(1eo1)</td><td><p>Теперь работает нормально, спасибо</p>
<p>У меня небольшая просьба к вам. Мне нужна прога с автоматическим распознаванием заблокированного IP/domain похожую на ваш <a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D1%80%D0%B5%D0%B6%D0%B8%D0%BC-%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%D1%86%D0%B8%D0%B8-autohostlist" rel="noopener nofollow ugc"><strong>autohostlist</strong></a>  но дополнительно с функцией перенаправления/пpoксирования на coкс пpoкси если ресурс заблокирован. Вот <a href="https://ntc.party/t/%D0%B8%D1%89%D1%83-%D0%BF%D1%80%D0%BE%D0%B3%D1%83-%D0%B4%D0%BB%D1%8F-%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE-%D0%BE%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8-%D0%B2-%D1%84%D0%B0%D0%B9%D0%BB-%D0%B7%D0%B0%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE-ipdomain/13163">здесь</a> немного обсуждали про это. Не могли бы вы написать такую утилиту (было бы еще лучше если вы добавите это в <strong>zapret</strong>). Так как я не из Рoссии у нас много чего заблокировано и не хочется пропускать весь траффик через пpокси/Bпн и палить, и так у нас плохи дела с этим.<br>
Буду очень благодарен!</p></td><td>2024-11-22T15:32:33.638Z</td></tr><tr><td>bolvan</td><td><p>Писанина тут не такая и простая. Все-таки на C клепать - это не на питоне.<br>
Но есть другой вариант.<br>
Кто мешает подвесить nfqws с автолистом и пустой стратегией ? Он будет обновлять файл заблокированных доменов.<br>
Сделать какой-нибудь скрипт для  проверки изменения файла и перезагрузки xray или еще чего-нибудь, что способно считать оттуда список доменов и перенаправить на upstream proxy.<br>
inotifywait filename  будет ждать до изменения файла и выйдет.</p></td><td>2024-11-22T16:34:57.005Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Косметики ради.<br>
Нет смысла немного сократить длинну стратегии путём указание просто название фейка? Чтобы если путь не указан он сам понимал что надо брать из папки fake.</p>
<p>было<br>
–dpi-desync-fake-tls=\opt\zapret\files\fake\tls_clienthello_iana_org.bin<br>
стало<br>
–dpi-desync-fake-tls=tls_clienthello_iana_org.bin</p></td><td>2024-11-22T17:04:47.592Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="easyone11" data-post="3305" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>стало<br>
–dpi-desync-fake-tls=tls_clienthello_iana_org.bin</p>
</blockquote>
</aside>
<p>а как искать этот файл без полного указания пути? к тому же на разных системах вместо opt может быть какой-нибудь tmp. Красиво-то оно красиво, но без абсолютного пути бесполезно</p></td><td>2024-11-22T17:20:49.156Z</td></tr><tr><td>bolvan</td><td><p>nfqws ничего не знает о системе запуска и не должен знать<br>
не знает про /opt и что в нем дальше</p></td><td>2024-11-22T17:29:25.030Z</td></tr><tr><td>easyone11</td><td><p>а как она знает где искать листы по параметру &lt; HOSTLIST &gt; ? это не одно и тоже?</p></td><td>2024-11-22T17:30:26.714Z</td></tr><tr><td>bolvan</td><td><p>он получает полные пути, которые подсовывают скрипты запуска</p></td><td>2024-11-22T17:30:59.706Z</td></tr><tr><td>easyone11</td><td><p>ясно</p></td><td>2024-11-22T17:31:21.440Z</td></tr><tr><td>electrifying</td><td><p>А никто не сталкивался с тем, что на ютубе обычные ролики нормально работают и без проблем, а на прямых трансляциях идет множество запросов к одному и тому же ggc и спустя пару минут в девтулзе по крайней мере запрос к нему падает собственно как и сам стрим<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b.png" data-download-href="https://ntc.party/uploads/default/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b" title="image"><img src="zapret-обсуждение-726/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b_2_690x74.png" alt="image" data-base62-sha1="ldQ8gK81cN1MpbEmCUSWkBTpOLF" width="690" height="74" srcset="zapret-обсуждение-726/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b_2_690x74.png, zapret-обсуждение-726/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b_2_1035x111.png 1.5x, zapret-обсуждение-726/94be2f277fb53fbf6ca5d7361a3d7bf2b374255b_2_1380x148.png 2x" data-dominant-color="F0F1F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">3827×413 60.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-11-22T17:53:40.590Z</td></tr><tr><td>neo(1eo1)</td><td><p>Была такая идея. Придётся сделать так, хоть и не очень эффективно. Может кто нибудь напишет такую утилиту.</p>
<p>Заметил что если IP заблокирован то домен не добавляется в список.<br>
Кстати было бы здорово вести  список заблокированых IP тоже, как домены.</p></td><td>2024-11-22T18:08:00.601Z</td></tr><tr><td>easyone11</td><td><p>del</p></td><td>2024-11-22T18:23:01.562Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Забавно, заметил что если есть ошибка в пути hosts.txt или его имени в одной из стратегий, перестают работать все.<br>
Жаль конечно проверку не сделать, но почему не работают при этом остальные стратегии?</p></td><td>2024-11-22T18:23:41.529Z</td></tr><tr><td>bolvan</td><td><p>Так рассуждать это все равно что.</p>
<p>Ну вот написал я программу на C. Там 50 синтаксических ошибок в 20 функциях.<br>
Но ведь еще в 30 нет ! Почему компилятор не компилирует прогу чтобы она хоть частично работала</p></td><td>2024-11-22T18:24:47.614Z</td></tr><tr><td>easyone11</td><td><p>ничего мне это не сказало, кроме того что так и должно быть)</p></td><td>2024-11-22T18:25:39.988Z</td></tr><tr><td>bolvan</td><td><p>Если есть какие-то нерабочие параметры, дело проги ткнуть носом юзера, что он написал чушь.<br>
Любой нерабочий профиль может поменять смысл последующих</p></td><td>2024-11-22T18:26:57.579Z</td></tr><tr><td>i-no(...)</td><td><p>Может, какой-нибудь опциональный <code>workingdir</code> ему при запуске передавать, куда складывать листы, пейлоады, еще что-нибудь.</p>
<p>Но это так, к слову.</p></td><td>2024-11-22T18:29:01.209Z</td></tr><tr><td>gnus(gnus)</td><td><p>почему в стратегиях для udp с fake не используется ttl?</p></td><td>2024-11-22T18:29:49.331Z</td></tr><tr><td>bolvan</td><td><p>Он может быть там, но icmp expired от quic ломает хром</p></td><td>2024-11-22T18:30:33.689Z</td></tr><tr><td>bolvan</td><td><p>Он никаких листов не складывает, кроме тех, что ему указали.<br>
Пишет он только в ауто, а остальные только читает</p>
<p>Можно сменить текущую диру перед запуском процесса. Тогда без путей будет браться оттуда<br>
Сами процессы диру не меняют</p></td><td>2024-11-22T18:31:29.288Z</td></tr><tr><td>i-no(...)</td><td><p>Это понятно, что не он складывает. Юзер бы, может, сложил туда, а он бы считал.<br>
Я-то переживу и так. Даже хостлист из всего одной строки – это не проблема, т.е. <code>--host</code> не нужен.<br>
Немного не хватает какого-нибудь <code>--rem</code> чтобы временно отключить профиль, не убирая его совсем.</p></td><td>2024-11-22T18:35:17.726Z</td></tr><tr><td>bolvan</td><td><p>–rem можно сделать, это не сложно.<br>
на счет диры с листами тоже, конечно, можно. но там есть неоднозначные моменты.<br>
сейчас, если вдруг файл листа временно исчезает, удалили его, то данные остаются в памяти и используются , а если файл снова появился, и время модификации сменилось, то он перечитается при первом использовании.<br>
если дира, то там могут файлы появляться и исчезать. это потребует мониторинга диры на изменение и на лету добавление/удаление новых файлов. с добавлением еще понятно, но вот при удалении непонятно убирать ли из памяти данные из удаленного файла или нет</p></td><td>2024-11-22T18:43:20.413Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Добрый день!<br>
Вижу у вас МГТС МСК.<br>
Поделитесь вашим конфигом? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-22T21:22:47.414Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Ютуб без проблем запустился, все ок, а вот все остальные сервисы мертвые от слова совсем, 0 реакции.</p></td><td>2024-11-22T21:34:46.920Z</td></tr><tr><td>easyone11</td><td><p>–dpi-desync=fake,multisplit --dpi-desync-fooling=datanoack --dpi-desync-split-pos=1,midsld</p>
<p>лучше запускай блокчек для проблемных сайтов и ищи общие страты, если на найденой что то не работает</p></td><td>2024-11-23T04:31:18.145Z</td></tr><tr><td>0x7f</td><td><p>адрес какого сервера/серверов надо засовывать в блокчек чтобы голосовая и видеосвязь в дискорде заработала?<br>
я правильно понимаю что параметр обхода для голосовой связи дискорда должен начинаться с <code>--filter-udp=443</code>?</p></td><td>2024-11-23T07:31:19.826Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="0x7f" data-post="3327" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/0x7f/48/14192_2.png" class="avatar"> 0x7f:</div>
<blockquote>
<p>чтобы голосовая и видеосвязь в дискорде заработала?</p>
</blockquote>
</aside>
<p>Болван сделал скрипт для этого, можно его просто кинуть в custom и проверить</p></td><td>2024-11-23T10:11:48.429Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Спасибо!<br>
Я так понимаю вы про: <a href="https://ntc.party/t/dpi-blockcheck-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80%D0%B0-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B9-zapret/11856">DPI Blockcheck - скрипт для подбора конфигураций zapret</a><br>
Просто всегда пользовался гудчеком <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-23T11:08:42.545Z</td></tr><tr><td>easyone11</td><td><p>нет я про блокчек встроенный в zapret<br>
но может быть и не важно какой использовать</p></td><td>2024-11-23T11:10:33.040Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> а больше отката 69.2 не планируется? Я видел вы там раскатили а потом блокер нашли и пересобрали сборку</p></td><td>2024-11-23T12:52:08.125Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Я его смогу запустить если у меня запрет в люси?</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/092427c2b51ecbb7d3510833d13f3b6dd7270c4e.jpeg" data-download-href="https://ntc.party/uploads/default/092427c2b51ecbb7d3510833d13f3b6dd7270c4e" title="zapr"><img src="zapret-обсуждение-726/092427c2b51ecbb7d3510833d13f3b6dd7270c4e_2_630x500.jpeg" alt="zapr" data-base62-sha1="1iRL639OrcxMKsvonDrIDNatQWq" width="630" height="500" srcset="zapret-обсуждение-726/092427c2b51ecbb7d3510833d13f3b6dd7270c4e_2_630x500.jpeg, zapret-обсуждение-726/092427c2b51ecbb7d3510833d13f3b6dd7270c4e.jpeg 1.5x, zapret-обсуждение-726/092427c2b51ecbb7d3510833d13f3b6dd7270c4e.jpeg 2x" data-dominant-color="E2EFF4"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">zapr</span><span class="informations">864×685 78.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</div></td><td>2024-11-23T12:55:10.777Z</td></tr><tr><td>electrifying</td><td><p>есть сборка блокчека для виндовс, можете оттуда запустить</p></td><td>2024-11-23T12:57:22.694Z</td></tr><tr><td>bolvan</td><td><p>Да, вылет обнаружился. Больше не планируется</p></td><td>2024-11-23T13:05:41.888Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Не подскажите где взять?</p></td><td>2024-11-23T13:09:08.378Z</td></tr><tr><td>bolvan</td><td><aside class="onebox githubrepo" data-onebox-src="https://github.com/bol-van/zapret-win-bundle">
  <header class="source">

      <a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/7a75d9e4b8f709bcc8e2b33d73586734467298af_2_690x344.png" class="thumbnail" data-dominant-color="EEF4EE">

  <h3><a href="https://github.com/bol-van/zapret-win-bundle" target="_blank" rel="noopener">GitHub - bol-van/zapret-win-bundle: zapret and blockcheck binary bundle for windows</a></h3>

    <p><span class="github-repo-description">zapret and blockcheck binary bundle for windows</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-23T13:33:29.236Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Благодарю!!!</p></td><td>2024-11-23T13:38:59.006Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Какая логика блокчека при запуске проверок допустим 5 раз?<br>
если 4 из 5 раза стратегия сработала, она считается плохой? А хорошая только та что есть в 5 проверках?</p></td><td>2024-11-23T16:58:44.507Z</td></tr><tr><td>0x7f</td><td><p>имеется в виду этот скрипт? <a href="https://github.com/bol-van/zapret/blob/master/init.d/openwrt/custom.d.examples/50-discord" class="inline-onebox" rel="noopener nofollow ugc">zapret/init.d/openwrt/custom.d.examples/50-discord at master · bol-van/zapret · GitHub</a><br>
куда его тут кинуть чтобы он заработал?<br>
<img src="zapret-обсуждение-726/28eb957efca5dee69ec73e5df5c710e6f14fa777.png" alt="image" data-base62-sha1="5PZPMi5ErWsdiTJmwXwgpUKUIyH" width="236" height="420"></p></td><td>2024-11-23T17:01:46.816Z</td></tr><tr><td>bolvan</td><td><p>Успех только если все успешны</p></td><td>2024-11-23T17:03:43.832Z</td></tr><tr><td>easyone11</td><td><p>папка \init.d\openwrt<br>
50-discord из custom.d.examples в custom.d</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> спасибо</p></td><td>2024-11-23T17:07:00.114Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Привет!<br>
Не подскажешь конфиг от дом.ру? Голову уже сломал, все работает, но ютуб не запускается на телике и xbox, главное конечно телик.</p></td><td>2024-11-23T19:35:39.702Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Привет!<br>
Не подскажешь конфиг на дом.ру? Голову сломал…на телике ютуб не грузит, в остальном все работает.<br>
Писали про тебя “Не знаю, у меня на дом.ру все хорошо работает на сборке <a class="mention" href="/u/kds">@KDS</a>”</p></td><td>2024-11-23T19:37:07.060Z</td></tr><tr><td>style0092</td><td><p>Привет, речь была о конфиге на windows. на телик/xbox запрет хочешь настроить? Имеешь в виду на роутере?) конфиг этот не совсем подойдет на роутер, но в теории запихнуть можно. А так на openwrt есть билды, в паре с настройкой doh при помощи https-dns-proxy на дом.ру должно заработать, на кинетик хз, гайды на форуме были. микротик думаю будет сложнее)</p></td><td>2024-11-23T20:06:38.392Z</td></tr><tr><td>KDS</td><td><p>Не понимаю при чем тут телек и сборка? Она под винду. По идее, можно конфиг в роутер запихать, как сказано выше, но это точно не ко мне.<br>
На домру нужен DoH, так как они пойзонят DNS запросы</p></td><td>2024-11-23T20:19:47.852Z</td></tr><tr><td>anon9001(anon)</td><td><p>Убрать seqovl если был. У меня так телек заработал</p></td><td>2024-11-23T20:21:36.981Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Ааааааа, понял)))) да, мне на роутер.<br>
DoH такой?</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/b392cdc2592d5bde96c6230ed2fb65b4109a2716.jpeg" data-download-href="https://ntc.party/uploads/default/b392cdc2592d5bde96c6230ed2fb65b4109a2716" title="doh"><img src="zapret-обсуждение-726/b392cdc2592d5bde96c6230ed2fb65b4109a2716_2_690x353.jpeg" alt="doh" data-base62-sha1="pCzZyh07RkCarCtLlYnkaWss9sa" width="690" height="353" srcset="zapret-обсуждение-726/b392cdc2592d5bde96c6230ed2fb65b4109a2716_2_690x353.jpeg, zapret-обсуждение-726/b392cdc2592d5bde96c6230ed2fb65b4109a2716_2_1035x529.jpeg 1.5x, zapret-обсуждение-726/b392cdc2592d5bde96c6230ed2fb65b4109a2716.jpeg 2x" data-dominant-color="F0F7FA"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">doh</span><span class="informations">1304×669 93.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</div></td><td>2024-11-23T20:43:44.038Z</td></tr><tr><td>KDS</td><td><p>Да, такой. Или <code>https://1.1.1.1/dns-query</code></p></td><td>2024-11-23T20:46:23.484Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Оставить все тоже, только в параметр: <a href="https://1.1.1.1/dns-query" rel="noopener nofollow ugc">https://1.1.1.1/dns-query</a> ?<br>
А вместе их нельзя?</p></td><td>2024-11-23T20:52:54.442Z</td></tr><tr><td>KDS</td><td><p>Нельзя. Работает comss - оставляйте комсс. Если комсс глючит и лагает - меняйте на 4 единицы</p></td><td>2024-11-23T20:54:55.165Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Принял, спасибо!</p></td><td>2024-11-23T20:59:52.296Z</td></tr><tr><td>Albert77(Альберт)</td><td><p>Телевизор победил, DoH <a href="https://1.1.1.1/dns-query" rel="noopener nofollow ugc">https://1.1.1.1/dns-query</a><br>
–dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6<br>
Но вот ютуб на XBOX пока сопротивляется <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"> Буду рыть дальше)</p></td><td>2024-11-23T21:55:19.765Z</td></tr><tr><td>egor1ch</td><td><p>Привет, воспользовался твоими настройками, вроде все работает, но местами только, не все обложки подгружаются и не все видео грузятся, либо нужно долго ждать пока прогрузятся. Проблема в DOH или может что-то не прописал в zaprete?<br>
конфиг DOH:<br>
config https-dns-proxy ‘custom’<br>
option listen_addr ‘127.0.0.1’<br>
option listen_port ‘5055’<br>
option user ‘nobody’<br>
option group ‘nogroup’<br>
option bootstrap_dns ‘1.1.1.1’<br>
option resolver_url ‘<a href="https://1.1.1.1/dns-query" rel="noopener nofollow ugc">https://1.1.1.1/dns-query</a>’<br>
Конфиг запрета<br>
NFQWS_OPT="<br>
–filter-tcp=80 -–dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6  --new<br>
–filter-tcp=443 -–dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6  --new<br>
–filter-udp=443 –dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6 &lt;HOSTLIST_NOAUTO&gt;</p></td><td>2024-11-23T23:14:27.560Z</td></tr><tr><td>Cheeck</td><td><p>Насчёт остального не скажу, но как минимум для <code>udp</code> не подходит <code>split2</code>, там нужна другая стратегия.<br>
И да, у вас перед параметрами длинные тире, что ли, стоят?</p></td><td>2024-11-24T03:02:19.853Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
можно внедрить команду version или может быть её писать в конфиге?</p></td><td>2024-11-24T05:15:03.464Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="egor1ch" data-post="3353" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/7993a0/48.png" class="avatar"> egor1ch:</div>
<blockquote>
<p>Проблема в DOH или может что-то не прописал в zaprete?</p>
</blockquote>
</aside>
<p>Проблема в стратегии лучше использовать классику с фейком гугла и репитами с seqovl ютуб работает не очень стабильно. Либо можно оставить seqovl но добавив к spli2 фейк и фейк гугла</p></td><td>2024-11-24T07:42:31.010Z</td></tr><tr><td>egor1ch</td><td><p>Нет, стоит --, при копирование получилось тире почему-то</p></td><td>2024-11-24T08:20:01.004Z</td></tr><tr><td>egor1ch</td><td><p>-dpi-desync=split2,fake --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6</p>
<aside class="quote no-group" data-username="electrifying" data-post="3356" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Либо можно оставить seqovl но добавив к spli2 фейк и фейк гугла</p>
</blockquote>
</aside>
<p>Вот так?</p></td><td>2024-11-24T08:42:46.006Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="egor1ch" data-post="3358" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/e/7993a0/48.png" class="avatar"> egor1ch:</div>
<blockquote>
<p>Вот так?</p>
</blockquote>
</aside>
<p>Да, только сначала fake,split2</p></td><td>2024-11-24T08:45:55.232Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
version (косметика, низкий приоритет)</summary>
<aside class="quote no-group" data-username="easyone11" data-post="3355" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>можно внедрить команду version</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Или чтобы версия выводилась вместе со списком ключей, когда запуск без параметров. Совсем бы красиво было, чтобы при запуске без параметров была только версия, еще что-нибудь фундаментальное, и напоминалка про <code>--help</code></p>
</details></td><td>2024-11-24T09:37:00.032Z</td></tr><tr><td>IndeecFOX(IndeecFox)</td><td><p>Не форуме тему создали, там на гитхабе что-то вроде дурилки DPI с ИИ для подбора стратегий.<br>
Мб полезно будет для улучшения zapret. Мб просто кто-то пробовал и расскажет что за умная дурилка такая.</p><aside class="quote" data-post="1" data-topic="13338">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/c/ebca7d/48.png" class="avatar">
    <a href="https://ntc.party/t/government-censorship-system-and-bypass-strategies/13338">Government censorship system and bypass strategies</a> <a class="badge-category__wrapper " href="/c/censorship-research-publications/22"><span data-category-id="22" style="--category-badge-color: #231F20; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="Academic papers, researches, blog posts with useful information"><span class="badge-category__name">Censorship research &amp; publications</span></span></a>
  </div>
  <blockquote>
    Geneva is an artificial intelligence tool designed by researchers at the University of Maryland that defeats censorship by exploiting bugs in censors
  </blockquote>
</aside>
</td><td>2024-11-24T10:12:29.651Z</td></tr><tr><td>bolvan</td><td><p>в след релизе будет. и будут контрольные суммы всех файлов в binaries.<br>
чтобы вопросов потом не возникало что это за EXEшник такой<br>
пишет версию, пошел на гитхаб и сверил сумму<br>
чтобы не было вирусов</p></td><td>2024-11-24T10:21:00.878Z</td></tr><tr><td>bolvan</td><td><p>Этому уже несколько лет. Саму прогу мне не удалось завести, чтобы она сама искала, но полезные идеи из статьи подчерпнуты.<br>
И там не все стратегии, что есть в zapret. Нет и особых фейк пейлоадов<br>
Сделано на питоне, что само по себе уже монстрообразно</p></td><td>2024-11-24T10:31:03.389Z</td></tr><tr><td>abc555</td><td><p>А что означает --dpi-desync-autottl=1:3-20 интересует 1 в начале, то есть один запрос в интервале от 3 до 20 ? Если поставить --dpi-desync-autottl=3:3-20 это будет три запроса на пробивон ttl ?</p></td><td>2024-11-24T12:18:25.242Z</td></tr><tr><td>arinoki(Arinoki)</td><td><pre><code class="lang-auto">--dpi-desync-autottl=[&lt;delta&gt;[:&lt;min&gt;[-&lt;max&gt;]]]	; режим auto ttl для ipv4 и ipv6. по умолчанию: 1:3-20. delta=0 отключает функцию.
</code></pre>
<p><a href="https://github.com/bol-van/zapret" class="inline-onebox" rel="noopener nofollow ugc">GitHub - bol-van/zapret: DPI bypass multi platform</a> - тут же есть информация.<br>
Ну и если с математическими терминами немного плохо, то вот ещё - " Дельта — <em>обозначение конечной разности при изменении какого-то параметра</em> ."</p></td><td>2024-11-24T12:34:53.225Z</td></tr><tr><td>abc555</td><td><p>А можно без теорем, просто что означает delta, что за конечная разность, понятными словами</p></td><td>2024-11-24T12:43:11.589Z</td></tr><tr><td>bolvan</td><td><p>ttl = вычислить длину пути до сервера и отнять delta</p></td><td>2024-11-24T12:49:47.997Z</td></tr><tr><td>abc555</td><td><p>то есть если я в начале поставлю 5:6-10 то отчёт начнётся от 5 ttl с 6 по 10 или как ?</p></td><td>2024-11-24T12:51:45.159Z</td></tr><tr><td>bolvan</td><td><p>Для кого вообще дока писалась ? Там же все написано.<br>
Вычисляем ttl, дальше вписываем его в диапазон ОТ-ДО.<br>
Если полученное значение оказалось &gt;=длины пути, значит автоматизм обломался</p></td><td>2024-11-24T12:52:44.129Z</td></tr><tr><td>abc555</td><td><p>Не понял нифига. У меня на одном из прове заглушки стоят с 5 по 10 tll и как правильно тогда написать, покажите на примере<br>
–dpi-desync-autottl=3:5-10 на данный момент я поставил так и всё работает, но первая 3 я поставил от фонаря, я не понял что это<br>
может тогда надо поставить было так --dpi-desync-autottl=5:5-10 поэтому и спрашиваю</p></td><td>2024-11-24T12:54:52.614Z</td></tr><tr><td>bolvan</td><td><p>Например, трейс до рутракера 12 хопов.<br>
Если сделать delta=1, будет ttl=11<br>
Если сделать delta=2, будет ttl=10<br>
Если сделать delta=3, будет ttl=9<br>
…<br>
Если сделать delta=8, будет ttl=4</p>
<p>Если сделать 1:5-10, будет 10<br>
Если сделать 2:5-10, будет 10<br>
Если сделать 3:5-10, будет 9<br>
Если сделать 6:5-10, будет 6<br>
Если сделать 7:5-10, будет 5<br>
Если сделать 8:5-10, будет 5</p>
<p>Если сделать 8:12-15, будет 12, будет облом и возьмется --dpi-desync-ttl=X. если и его нет, будет взят TTL стандартный (64)</p></td><td>2024-11-24T13:00:33.632Z</td></tr><tr><td>abc555</td><td><p>Ну то есть если заглушки у меня стоят от 5 до 10 ttl, то 1:5-10 смело можно ставить ? Хотя я поставил 5:5-10 и сайт открывается, поставил 5:5-9 сайт перестал открываться<br>
или надо поставить так 7:5-10 ? чтоб с 5 начиналось, если честно не понял я<br>
–dpi-desync-ttl ставить обязательно ? вот это я тоже так и не понял<br>
к примеру --dpi-desync-ttl=5 а тогда как правильно –dpi-desync-autottl= поставить чтоб с 5 по 10 ttl оно юзало</p></td><td>2024-11-24T13:06:07.242Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="3372" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>1:5-10</p>
</blockquote>
</aside>
<p>Да, с этого и стоит начать.<br>
Надо чекнуть как можно больше доменов на разных delta в пределах от 1 до 5.<br>
И посмотреть где они все адекватно себя ведут.<br>
Если найдутся такие значения delta, то взять минимальное.<br>
Если нет, значит на провайдере эта техника не работает</p>
<p>Если не стоит фиксированный TTL, то надо добавлять фулинг, иначе в случае фейла autottl имеем 100% слом ресурса</p></td><td>2024-11-24T13:13:21.635Z</td></tr><tr><td>abc555</td><td><p>у этого прова стоит заглушки на 5, 7, 10, по началу я просто поставил --dpi-desync-ttl=10 и вроде всё работает, потом решил поставить –dpi-desync-autottl начал играться со значениями, поставил что 1:5-10 что 5:5-10 и без изменений и так и не понял убрать авто и поставить обратно --dpi-desync-ttl или оставить авто, работает одинаково что так, что так</p></td><td>2024-11-24T13:18:51.644Z</td></tr><tr><td>bolvan</td><td><p>Если работает , лучше использовать фиксированный ттл. И к нему фулинг накатить типа мд5</p></td><td>2024-11-24T13:20:26.666Z</td></tr><tr><td>abc555</td><td><p>ну так и стояло, я думал просто авто может круче, просто сосед говорит на телефоне у него не работает сайт, я и начал экспериментировать, на компе сказал работает, на телефоне нет.<br>
я решил всем выдать один ttl для всех устройств, добавить в  mangle_postrouting<br>
oifname “eth0.2” ip ttl { 10-62, 64-255 } ip ttl set 63<br>
то есть если --dpi-desync-ttl=10 то ttl не затрагивается, но если 11 то всем устройствам будет выдан 63 на выход, типа как будто одно устройство к роутеру подключено, посмотрю как так тогда будет работать<br>
на винде по умолчанию 128, на каком то из телефонах 68 и на разных устройствах у всех разное ttl, а так будет у всех одинаковое и если до 10 ttl то значение это меняться не будет и так работает, пока просто решил потестировать</p></td><td>2024-11-24T13:26:03.379Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> а можно ли просто снести установленный запрет через rm -r и потом накатить новый ? uninstall _easy.sh все равно на прошивках типо кинетика не отрабатывает или скрипт все равно надо прогнать?</p></td><td>2024-11-24T14:48:40.559Z</td></tr><tr><td>bolvan</td><td><p>на кинетиках при таком удалении может остаться crontab, указывающий в никуда<br>
в остальном ничего не должно остаться</p></td><td>2024-11-24T15:05:54.327Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="3378" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>на кинетиках при таком удалении может остаться crontab</p>
</blockquote>
</aside>
<p>Так там же изначально вообще нет крона, только если его вручную не поставить через opkg install cron</p></td><td>2024-11-24T15:17:16.393Z</td></tr><tr><td>easyone11</td><td><p>поставил 69.3, в Available commands не вижу команды для отображения версии, как то по другому смотреть?</p></td><td>2024-11-24T15:18:03.347Z</td></tr><tr><td>i-no(...)</td><td><p>Наверху же сама выводится.<br>
<code>nfqws|grep version</code><br>
<a class="mention" href="/u/bolvan">@bolvan</a> Спасибо! И вообще <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"></p>
<details>
<summary>
Единственное, что теперь логируется вот так:</summary>
<pre><code class="lang-auto">Sun Nov 24 18:41:48 2024 daemon.info nfqws[13900]: github version v69.3 (007cbe600b6cdf65f79166d905823b54b746c4e6)
Sun Nov 24 18:41:48 2024 daemon.info nfqws[13900]: &lt;тут пусто&gt;
</code></pre>
<p>Впрочем, это само по себе не так существенно.</p>
</details></td><td>2024-11-24T15:40:47.180Z</td></tr><tr><td>easyone11</td><td><p>хм, обычно я пользую /etc/init.d/zapret restart/stop/start и ничего на верху не показывается</p>
<p>просто nfqws у меня не пашет<br>
вот так работает /opt/zapret/binaries/aarch64/nfqws version<br>
для чайников не очень удобно, а вопросы про версию будут скорей от них, ну ладно, автору видней</p></td><td>2024-11-24T16:08:36.143Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
пустяки, дело житейское</summary>
<p><code>/etc/init.d/zapret restart/stop/start</code><br>
Туда при желании можно самостоятельно добавить греп версии. Чайнику подскажем как грепнуть, прирастет знанием.</p>
<blockquote>
<p><code>/opt/zapret/binaries/aarch64/nfqws version</code></p>
</blockquote>
<p>Да, ну хоть с путем полным. У меня просто в <code>/usr/bin</code> лежит.<br>
Вообще прекрасно, есть команда. Хотя она и после грепа ультимативно добавляет напоминание про номер очереди. Но не важно.</p>
</details></td><td>2024-11-24T16:10:32.706Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="easyone11" data-post="3382" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/easyone11/48/6759_2.png" class="avatar"> easyone11:</div>
<blockquote>
<p>а вопросы про версию будут скорей от них</p>
</blockquote>
</aside>
<p>Я думаю там либо батниками под винду пользуются, либо просто поставили один раз на роутер и больше никогда не трогают пока стратегия работает, то есть 99% все равно какая версия стоит лишь бы работала</p></td><td>2024-11-24T16:19:22.728Z</td></tr><tr><td>egor1ch</td><td><aside class="quote no-group" data-username="electrifying" data-post="3359" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>Да, только сначала fake,split2</p>
</blockquote>
</aside>
<p>В итоге с этими настройками вообще не пашет, вернулся к тем изначальным. На ПК ютуб работает нестабильно, но на тв и смартфоне более чем неплохо. Задача была запустить ютуб на ТВ, так что оставлю пока так</p></td><td>2024-11-24T23:46:14.016Z</td></tr><tr><td>KDS</td><td><p><code>--hostlist-domains=byaka-buca.ru, babayagaprotiv.com, cheburashkazhiv.ru</code></p>
<p>Это так должно работать или я опять не так все понял? <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p></td><td>2024-11-25T05:47:17.374Z</td></tr><tr><td>anon9001(anon)</td><td><p>Нормалфажи не знают о traceroute, а похоже это с точностью определяет ttl. Чувствую себя как дите в песочнице с придурковатой ухмылкой сейчас тк нашел стратегию с чистым фейком без сплитов для “всех сайтов” по трассировке. Суть ну очень проста: трассировать “любимые сайты” и нахоить один с максимальными хопами, а потом зырить где кончается чебурнет (можно по whois). ttl приземляется на загран сервер, он чаще всего после звездочек, а на сами звездочки лучше не приземляться, это как если приземлиться на минное поле у берлинской стены, может работать, а может и нет. Ну а если у сайта мало хопов, то прикрутить сигу в фулинг.</p></td><td>2024-11-25T07:18:03.969Z</td></tr><tr><td>easyone11</td><td><p>без пробелов пробовал?</p></td><td>2024-11-25T07:36:33.531Z</td></tr><tr><td>Mihey(Михаил)</td><td><p>Если бы было всё так просто…<br>
Например до Рутрекера 8 прыжков. 4 и 5 прыжки звёздочки. Какое ttl ставить?<br>
А до серваков Ютуба 21 прыжок. С 4 по 11 звёздочки, с 12 по 16 проходит и с 17 по 19 звёздочки, а с 20 по 21 опять проходит. И как тут быть? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-11-25T07:39:55.196Z</td></tr><tr><td>anon9001(anon)</td><td><p>Это скорее хорошо. Значит цензура как и 10 лет назад остается децентрализированой на практике с зоопарком разных дпи натыкаными как пластыри, где-то больше где-то меньше, хотя по закону они так сильно хотят центральное управление</p></td><td>2024-11-25T08:05:28.855Z</td></tr><tr><td>Mihey(Михаил)</td><td><p>Так какой TTL то понадобится? Ваш совет?</p></td><td>2024-11-25T09:22:18.660Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="KDS" data-post="3387" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p><code>--hostlist-domains=byaka-buca.ru, babayagaprotiv.com, cheburashkazhiv.ru</code></p>
<p>Это так должно работать или я опять не так все понял? <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p>
</blockquote>
</aside>
<p>Так, только без пробелов</p></td><td>2024-11-25T09:26:28.845Z</td></tr><tr><td>D4NICKY(D4NICKY)</td><td><p>А можно ли в Zapret реализовать dnsredir как это было в goodbyedpi? просто заметил что инста работает только с днс яндекса. Во всей системе не хочется менять днс</p></td><td>2024-11-25T10:29:49.367Z</td></tr><tr><td>bolvan</td><td><p>Можно, но не нужно.<br>
Есть другие решения.<br>
Если что-то можно сделать по-нормальному, то зачем делать ненормально ?</p>
<p>Если уж так приспичило, можно и гудбай запустить с днсредир и без параметров дурения.<br>
А на linux это вообще позор позоров хотеть такую функцию. Роспись в собственном абсолютном непонимании чего-либо дальше иксов и иконок на десктопе</p></td><td>2024-11-25T10:35:14.754Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Пропишите в хостс и не нужно мудрить с днс.</p></td><td>2024-11-25T11:13:55.953Z</td></tr><tr><td>D4NICKY(D4NICKY)</td><td><p>Кого именно прописать? Сайт не грузится с любым днс кроме яндекса</p></td><td>2024-11-25T12:48:43.929Z</td></tr><tr><td>easyone11</td><td><p>подними какой нибудь dns proxy и направляй нужные тебе сайты на нужные тебе DOHs</p></td><td>2024-11-25T13:10:27.910Z</td></tr><tr><td>electrifying</td><td><p>Посмотрите какой айпи отдается с днс яндекса для инстаграма и просто внесите их в хост</p></td><td>2024-11-25T13:30:08.249Z</td></tr><tr><td>TyroSpy</td><td><p>Перепробовал все нововведения со сплитами, все либо не работает, либо работает хуже чем обычный --dpi-desync-split-pos=2. Причем интересно, что pos=2 выдает 3 рабочих стратегии и pos=sniext+2 тоже 3 рабочих, но в комбинации: 2,sniext+2 получил только 1 рабочая стратегию. Вообще не понятно как их проверять, я тестил каждую по отдельности “sld midsld endsld sniext host endhost”, но это большой гимор, а результат нулевой, может я что недопонял, и автор вкладывал в эту идею что-то перспективное</p></td><td>2024-11-25T14:41:39.088Z</td></tr><tr><td>bolvan</td><td><p>Автор в это вкладывал прежде всего гибкость.<br>
Толчком послужила конкретная проблема.<br>
Некоторые провайдеры  стали тупо искать googlevideo в нескольких первых пакетах.<br>
Работают 2 сплита, 1 из которых порежет слово googlevideo.</p>
<p>Чекер в стандартном режиме скипает многие проверки для увеличения скорости.<br>
например, если найден сплит, то fake,split уже не будет<br>
Если пробивается камнем, не надо стрелять из пушки</p></td><td>2024-11-25T14:45:51.806Z</td></tr><tr><td>TyroSpy</td><td><p>Еще хотел спросить такой момент: когда прогоняешь блокчек с 1 попыткой, то стабильно выдает рабочую стратегию с autottl, но если поставить скажем 10 попыток, то ни одной стратегии с autottl не получаю. О чем это может говорить, о действительно нерабочей стратегии с autottl или тут есть какая-то заморочка с работой блокчек?</p></td><td>2024-11-25T14:46:22.945Z</td></tr><tr><td>bolvan</td><td><p>Это может говорит либо о нестабильности стратегии, либо о заморочках на стороне самого сайта.<br>
Не нравиться ему может дергание одного и того же</p></td><td>2024-11-25T14:47:29.631Z</td></tr><tr><td>TyroSpy</td><td><aside class="quote no-group" data-username="bolvan" data-post="3401" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Чекер в стандартном режиме скипает многие проверки для увеличения скорости.<br>
например, если найден сплит, то fake,split уже не будет<br>
Если пробивается камнем, не надо стрелять из пушки</p>
</blockquote>
</aside>
<p>Я ваш чекер модифицировал под себя, как вы и советовали, конкретно отобрал стратегии, которые у меня работают это fake,multidisorder и fake,fakeddisorder остальные мне не нужны, на них и проверял сплиты</p></td><td>2024-11-25T14:52:38.983Z</td></tr><tr><td>bolvan</td><td><p>На то оно и есть опен сорс, чтобы каждый могущий мог это сделать</p></td><td>2024-11-25T14:53:41.526Z</td></tr><tr><td>TyroSpy</td><td><p>Ну я о другом, почему эти работают:</p>
<pre><code class="lang-auto">--dpi-desync=fake,fakeddisorder --dpi-desync-ttl=11 --dpi-desync-split-pos=2
--dpi-desync=fake,fakeddisorder --dpi-desync-ttl=11 --dpi-desync-split-pos=sniext+2
</code></pre>
<p>а так не работает:</p>
<pre><code class="lang-auto">--dpi-desync=fake,fakeddisorder --dpi-desync-ttl=11 --dpi-desync-split-pos=2,sniext+2
</code></pre></td><td>2024-11-25T14:59:32.642Z</td></tr><tr><td>bolvan</td><td><p>fakeddisorder берет только одну позицию<br>
для TLS это будет snitext+2</p>
<p>если есть сомнения, всегда есть дебаг лог</p>
<p>блокчек - это не показатель. как означено выше может быть нестабильность или плохая реакция сайта на дятла</p>
<p>Кстати, нашел ошибку в чекере. Надо исключать из тестов множественные позиции для fakedsplit и fakeddisorder. Это бесполезная потеря времени</p></td><td>2024-11-25T15:00:45.468Z</td></tr><tr><td>TyroSpy</td><td><p>А почему это работает:</p>
<pre><code class="lang-auto">--dpi-desync=fake,fakeddisorder
</code></pre>
<p>А это нет:</p>
<pre><code class="lang-auto">--dpi-desync=fake,fakeddisorder --dpi-desync-fake-tls=0x00000000
</code></pre>
<p>fake же по умолчанию нулями заполняется какая разница с 0x00000000 ?</p></td><td>2024-11-25T15:26:27.765Z</td></tr><tr><td>bolvan</td><td><p>Нет, по умолчанию для tls  идет реальный tls hello с рандомизированными полями</p></td><td>2024-11-25T15:28:57.508Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Ip в хостс. Предварительно их нужно собрать для доменов и проверить на пинг</p></td><td>2024-11-25T22:59:52.992Z</td></tr><tr><td>gnus(gnus)</td><td><p>Приложение Youtube для Android TV использует протокол gQUIC Q046. Стратегия<br>
<em>–wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=4 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin”</em><br>
с ним не работает, фейки не отправляются. Пробовал  добавлять --dpi-desync-any-protocol, результат тот же. Кто нибудь победил его?</p></td><td>2024-11-25T23:20:56.179Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>в случае <em>zapret-win-bundle</em> как если вообще можно<br>
прописать для одного и того же порта 443 две разных стратегии в следующем виде:<br>
по умолчанию стратегия1 без каких либо листов, а если ошибка стратегия2 с занесением в автолист</p>
<ul>
<li>не понял по ридми в принципе в винде автолист норм работает или хуже линуха?</li>
<li>в каком порядке в --new вносить? т.е. чтобы в автолист не лезли те которые и с стратегией1 открываются, но если уж попал в лист чтоб сразу стратегия2</li>
<li>или стратегия1 тоже обязательно должна иметь фикс.лист но например пустой?</li>
</ul>
<p>автолист потому что заранее не известны хосты.</p></td><td>2024-11-25T23:25:24.475Z</td></tr><tr><td>Cheeck</td><td><p>По идее, если у вас первая стратегия будет без листа, то через неё будет гнаться весь трафик с этого порта и до второй дело никогда не дойдёт.</p></td><td>2024-11-26T01:15:21.351Z</td></tr><tr><td>bolvan</td><td><p>переключения профилей в зависимости от успешности применения нет<br>
стратегии пишет юзер и указывает условия применения для каждого профиля<br>
порядок поиска профиля от начала до конца до первого совпадения<br>
автолист на всех ос работает одинаково, но на бсд он не рекомендован</p></td><td>2024-11-26T08:42:10.417Z</td></tr><tr><td>abc555</td><td><p>v69.3 написано облегченный релиз для openwrt и прошивок<br>
я обрадовался, думал меньше будет весить, на одном из роутеров переустановил с 69 на 69.3, место свободного было на 69 версии 128 кб, стало свободного 80 ))<br>
если в будущем ещё будет больше весить, то не знаю уже что удалять, удалил всё что смог, некоторые темы которые были нужны, пожертвовал ими раньше ) останется только ставить какой нить wpad mini, но я ставил его раньше, плохо вафля тогда будет работать.<br>
Хостлистом я не пользуюсь, некуда его ставить, поэтому упор у меня на ttl, срабатывает на все подключения и нормально всё работает, главное правильно определить ttl<br>
а так хостлист только для ютуба, на нём просто другая стратегия, но весит он мало.<br>
Не увеличивайте больше размер хотя бы для nfqws, реально ставить будет некуда, а удалять doh или адблок как то не хочется</p></td><td>2024-11-26T11:35:44.383Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>т.е. для моего случая нереально? либо автолист будет заполнен хостами со стратегия2 даже если бы и стратегия1 их открывает, либо до него вообще недойдёт а всё только стратегия1 будет…</p>
<p>а сама ловля условия попадания в автолист - это только http 30*? или и https 35\28 тоже умеет? ведь 99+% случаев https + даже браузеры бывает автоматом подставляют https даже если вводишь http</p></td><td>2024-11-26T11:42:10.396Z</td></tr><tr><td>i-no(...)</td><td><p>Бинарники и так уже пожаты <code>upx</code>’ом. Насчет еще большего свободного места ловить нечего. Можно просто накатывать бинарник поверх старого вручную. Например, <code>nfqws</code> для <code>mips32r1-lsb</code> увеличился в размере на 5 кБ (пять КИЛОбайт) всего лишь.</p>
<details>
<summary>
21 век уже наступил</summary>
<p>Все таки в 21-веке в оборудовании такой категории биться за десятки килобайт — это недостойное занятие. Эффективнее продать роутер уже с настроенным “Запретом”, заявив это как его дополнительную ценность — что даже является правдой — и купить там же, где был продан, другой со стораджем большего объема, и не сходить с ума. Существует вторичка, там цены ниже многократно. Сверхмощное железо в роутерах не нужно. И пихать внутрь абсолютно все не нужно. И даже в условиях войны и разрухи люди еще и торговать умудряются. Вариантов сегодня достаточно.</p>
<p>Смотрю на старый Xiaomi MiWiFi Mini, через который в данный момент подключён, в нем флеш Winbond W25Q128FVSIG на 16 МБ. Свободно с учетом установленных на OpenWRT пакетов 7.7МБ</p>
<pre><code class="lang-auto">df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 3.3M      3.3M         0 100% /rom
tmpfs                    60.3M      1.2M     59.1M   2% /tmp
/dev/mtdblock6           10.4M      2.7M      7.7M  26% /overlay
overlayfs:/overlay       10.4M      2.7M      7.7M  26% /
tmpfs                   512.0K         0    512.0K   0% /dev
</code></pre>
<details>
<summary>
Потому, что ничего лишнего не было установлено:</summary>
<pre><code class="lang-auto">~# opkg list-installed
base-files - 1452-r16847-f8282da11e
busybox - 1.33.2-2
bwping - 2.2-1
ca-bundle - 20211016-1
cgi-io - 2022-08-10-901b0f04-21
curl - 7.83.1-4.1
dnsmasq - 2.85-9
dropbear - 2020.81-2
firewall - 2021-03-23-61db17ed-1.1
fstools - 2021-01-04-c53b1882-1
fwtool - 2019-11-12-8f7fe925-1
getrandom - 2020-10-25-9ef88681-2
hostapd-common - 2020-06-08-5a8b3662-41
https-dns-proxy - 2021-11-22-3
ip6tables - 1.8.7-1
ip6tables-extra - 1.8.7-1
ip6tables-mod-nat - 1.8.7-1
iperf3 - 3.10.1-1
iptables - 1.8.7-1
iptables-mod-conntrack-extra - 1.8.7-1
iptables-mod-extra - 1.8.7-1
iptables-mod-filter - 1.8.7-1
iptables-mod-ipopt - 1.8.7-1
iptables-mod-nfqueue - 1.8.7-1
iptables-mod-u32 - 1.8.7-1
iw - 5.9-8fab0c9e-3
iwinfo - 2022-08-19-0dad3e66-1
jshn - 2021-05-16-b14c4688-2
jsonfilter - 2018-02-04-c7e938d6-1
kernel - 5.4.238-1-0da76fec06cd5588cee86d873eb8f04b
kmod-cfg80211 - 5.4.238+5.10.168-1-1
kmod-gpio-button-hotplug - 5.4.238-3
kmod-ifb - 5.4.238-1
kmod-ip6tables - 5.4.238-1
kmod-ip6tables-extra - 5.4.238-1
kmod-ipt-conntrack - 5.4.238-1
kmod-ipt-conntrack-extra - 5.4.238-1
kmod-ipt-core - 5.4.238-1
kmod-ipt-extra - 5.4.238-1
kmod-ipt-filter - 5.4.238-1
kmod-ipt-ipopt - 5.4.238-1
kmod-ipt-nat - 5.4.238-1
kmod-ipt-nat6 - 5.4.238-1
kmod-ipt-nfqueue - 5.4.238-1
kmod-ipt-offload - 5.4.238-1
kmod-ipt-raw - 5.4.238-1
kmod-ipt-u32 - 5.4.238-1
kmod-leds-gpio - 5.4.238-1
kmod-lib-crc-ccitt - 5.4.238-1
kmod-lib-textsearch - 5.4.238-1
kmod-mac80211 - 5.4.238+5.10.168-1-1
kmod-mt76-core - 5.4.238+2021-12-03-678071ef-4
kmod-mt76x02-common - 5.4.238+2021-12-03-678071ef-4
kmod-mt76x2 - 5.4.238+2021-12-03-678071ef-4
kmod-mt76x2-common - 5.4.238+2021-12-03-678071ef-4
kmod-nf-conntrack - 5.4.238-1
kmod-nf-conntrack6 - 5.4.238-1
kmod-nf-flow - 5.4.238-1
kmod-nf-ipt - 5.4.238-1
kmod-nf-ipt6 - 5.4.238-1
kmod-nf-nat - 5.4.238-1
kmod-nf-nat6 - 5.4.238-1
kmod-nf-reject - 5.4.238-1
kmod-nf-reject6 - 5.4.238-1
kmod-nfnetlink - 5.4.238-1
kmod-nfnetlink-queue - 5.4.238-1
kmod-nls-base - 5.4.238-1
kmod-ppp - 5.4.238-1
kmod-pppoe - 5.4.238-1
kmod-pppox - 5.4.238-1
kmod-rt2800-lib - 5.4.238+5.10.168-1-1
kmod-rt2800-mmio - 5.4.238+5.10.168-1-1
kmod-rt2800-soc - 5.4.238+5.10.168-1-1
kmod-rt2x00-lib - 5.4.238+5.10.168-1-1
kmod-rt2x00-mmio - 5.4.238+5.10.168-1-1
kmod-sched-cake - 5.4.238-1
kmod-sched-core - 5.4.238-1
kmod-slhc - 5.4.238-1
kmod-usb-core - 5.4.238-1
kmod-usb-ehci - 5.4.238-1
kmod-usb-ledtrig-usbport - 5.4.238-1
kmod-usb-ohci - 5.4.238-1
kmod-usb-printer - 5.4.238-1
kmod-usb2 - 5.4.238-1
libblobmsg-json20210516 - 2021-05-16-b14c4688-2
libc - 1.1.24-3
libcares - 1.17.2-1
libcurl4 - 7.83.1-4.1
libev - 4.31-1
libevdev - 1.13.0-1
libgcc1 - 8.4.0-3
libip4tc2 - 1.8.7-1
libip6tc2 - 1.8.7-1
libiwinfo-data - 2022-08-19-0dad3e66-1
libiwinfo-lua - 2022-08-19-0dad3e66-1
libiwinfo20210430 - 2022-08-19-0dad3e66-1
libjson-c5 - 0.15-2
libjson-script20210516 - 2021-05-16-b14c4688-2
liblua5.1.5 - 5.1.5-9
liblucihttp-lua - 2021-06-11-3dc89af4-1
liblucihttp0 - 2021-06-11-3dc89af4-1
libmnl0 - 1.0.4-2
libncurses6 - 6.2-3
libnghttp2-14 - 1.43.0-1
libnl-tiny1 - 2020-08-05-c291088f-2
libpthread - 1.1.24-3
librt - 1.1.24-3
libubox20210516 - 2021-05-16-b14c4688-2
libubus-lua - 2021-06-30-4fc532c8-2
libubus20210630 - 2021-06-30-4fc532c8-2
libuci20130104 - 2021-04-14-4b3db117-5
libuclient20201210 - 2023-04-13-007d9454-1
libudev-zero - 1.0.1-1
libusb-1.0-0 - 1.0.24-4
libustream-wolfssl20201210 - 2022-01-16-868fd881-2
libwolfssl5.5.3.99a5b54a - 5.5.3-stable-1
libxtables12 - 1.8.7-1
logd - 2020-10-25-9ef88681-2
lua - 5.1.5-9
luci - git-20.074.84698-ead5e81
luci-app-firewall - git-22.089.67741-3856d50
luci-app-https-dns-proxy - 2021-09-27-3
luci-app-ledtrig-usbport - git-20.125.36164-91cee75
luci-app-opkg - git-22.273.29015-e01e38c
luci-app-p910nd - git-20.108.38431-8f34e10
luci-app-sqm - git-23.063.28871-64997d2
luci-base - git-23.093.57360-e98243e
luci-compat - git-22.046.85744-f08a0f6
luci-lib-base - git-20.232.39649-1f6dc29
luci-lib-ip - git-20.250.76529-62505bd
luci-lib-jsonc - git-22.097.61937-bc85ba5
luci-lib-nixio - git-20.234.06894-c4a4e43
luci-mod-admin-full - git-19.253.48496-3f93650
luci-mod-network - git-22.244.54918-77c916e
luci-mod-status - git-22.089.70019-d4f0b06
luci-mod-system - git-23.013.73129-aa7938d
luci-proto-ipv6 - git-21.148.49484-14511e5
luci-proto-ppp - git-21.163.64918-6c6559a
luci-ssl - git-20.244.36115-e10f954
luci-theme-bootstrap - git-22.288.45155-afd0012
mtd - 26
mtr - 0.94-1
netifd - 2021-10-30-8f82742c-1
nfqws-keenetic - 2.5.4
odhcp6c - 2021-01-09-53f07e90-16
odhcpd-ipv6only - 2021-07-18-bc9d317f-3
openwrt-keyring - 2021-02-20-49283916-2
opkg - 2021-06-13-1bf042dd-2
p910nd - 0.97-9
ppp - 2.4.8.git-2020-10-03-3
ppp-mod-pppoe - 2.4.8.git-2020-10-03-3
procd - 2021-03-08-2cfc26f8-2
px5g-wolfssl - 4.1
rpcd - 2022-02-19-8d26a1ba-1
rpcd-mod-file - 2022-02-19-8d26a1ba-1
rpcd-mod-iwinfo - 2022-02-19-8d26a1ba-1
rpcd-mod-luci - 20210614
rpcd-mod-rrdns - 20170710
sqm-scripts - 1.5.1-1
swconfig - 12
tc-mod-iptables - 5.11.0-3
tc-tiny - 5.11.0-3
terminfo - 6.2-3
ubox - 2020-10-25-9ef88681-2
ubus - 2021-06-30-4fc532c8-2
ubusd - 2021-06-30-4fc532c8-2
uci - 2021-04-14-4b3db117-5
uclient-fetch - 2023-04-13-007d9454-1
uhttpd - 2021-03-21-15346de8-2
uhttpd-mod-ubus - 2021-03-21-15346de8-2
urandom-seed - 3
urngd - 2020-01-21-c7f7b6b6-1
usbids - 0.359-1
usbutils - 013-2
usign - 2020-05-23-f1f65026-1
wireless-regdb - 2022.08.12-1
wpad-basic-wolfssl - 2020-06-08-5a8b3662-41
</code></pre>
</details>
</details></td><td>2024-11-26T11:58:38.064Z</td></tr><tr><td>abc555</td><td><p>У меня только 4 роутера, есть знакомые, то в целом надо менять их все. Спрашивается менять на что ? В продаже только фуфел, нормальный аппарат стоит дорого от 100 бакинских, не фуфел же покупать и даже ставя wrt на нормальный аппарат, как обычно начнутся свои косяки. 90% пользователей не смогут позволить купить себе нормальный роутер, отталкиваться не от цены нужно, а от качества, смотришь на качество, а потом только на ценник и тогда уже прикидываешь, осилишь или нет, если делать то с умом надо или не делать вообще и без вариантов.<br>
Я посматриваю на одну модель, стоит 300 американских рублей, так просто посматриваю, а если менять, то мне их нужно 4 штуки, вот умножьте, вот так вот для меня менять роутер 21 век )</p></td><td>2024-11-26T12:06:56.258Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="gnus" data-post="3411" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/7993a0/48.png" class="avatar"> gnus:</div>
<blockquote>
<p>Приложение Youtube для Android TV использует протокол gQUIC Q046.</p>
</blockquote>
</aside>
<p>Дропнуть на роутере 443 порт, либо если речь про андроид тв можно установить кастомный клиент</p></td><td>2024-11-26T12:28:03.333Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="i-no" data-post="3417" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Сверхмощное железо в роутерах не нужно</p>
</blockquote>
</aside>
<p>Это почему? А если на роутер накатить какой-нибудь vless+xray и ещё adguardhome с парой листов на суммарно 100к правил то 513 мегабайт озу как не было ну и нагрузка на процессор соотвествующая, поэтому если бы мощные роутеры не были нужны то и всякие ASUS ROG Rapture GT-AXE16000 никто бы не выпускал</p></td><td>2024-11-26T12:32:47.978Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, а каких скоростей вы хотите и для чего, это во-вторых. А во-первых, представьте, что весь зарубежный трафик будет делиться на дружественный и вражественный. Тогда где вы бы разместили свой влессы-иксреи и т.п.? В Иране? В Китае? В КНДР? И для чего, если евроатлантика уже сама запечатывает трубы со своей стороны.</p></td><td>2024-11-26T12:37:14.574Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>А не планируете<br>
–dpi-desync сократить/убрать из стратегий<br>
А то стратегии километровые.<br>
И исходя из тенденции с одним сайтом работают одни стратегии/фейки с другим другие<br>
заменить --new на отдельную стратегию?</p></td><td>2024-11-26T13:06:34.678Z</td></tr><tr><td>abc555</td><td><p>У меня 2 стратегии, одна для ютуба, вторая для всего остального, универсальная, чем их меньше, тем лучше</p></td><td>2024-11-26T13:23:20.566Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>А еслю сюда еще добавить quic</p></td><td>2024-11-26T13:30:03.971Z</td></tr><tr><td>abc555</td><td><p>Не обязательно прям для листов адблока нужен мощный роутер, мощный сам по себе работает очень быстро, меньше лагов, меньше задержка, ну это если сравнить к примеру одноядерный комп как раньше, с 4х ядерным, небо и земля или ssd с hdd, так же и роутер, люди себя просто всегда успокаивают, чтоб оправдать почему закроил на покупке, типа мощный роутер не нужен, зачем, работает ведь и его не переубедить. Почему купил жигу а не иномарку, та жига классная модель и запчастей полно, но никогда не скажет правду, что просто не было бабла, хотел купить, но не за х*й и со временем привыкаешь врать самому себе, не говоря про окружающих )</p></td><td>2024-11-26T13:34:34.221Z</td></tr><tr><td>abc555</td><td><aside class="quote no-group" data-username="toxae1" data-post="3424" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/toxae1/48/12007_2.png" class="avatar"> toxae1:</div>
<blockquote>
<p>quic</p>
</blockquote>
</aside>
<p>Ютуб лично у меня часто они бывают меняют стратегии и если ещё бороться с quic, я сделал проще, заблокировал порт udp 443 в роуторе, дискордом не пользуюсь, поэтому quic мне по барабану, та и дискорд по идее должен работать без quic, я не проверял, но так думаю</p></td><td>2024-11-26T13:40:25.136Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="abc555" data-post="3426" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>заблокировал порт udp 443</p>
</blockquote>
</aside>
<p>Ну повезло вам что работает нормально.<br>
Лично у меня при отключении quic все работает как то с небольшой задержкой но это аж бесит. А вот если quic подрубаешь все летает моментально.</p></td><td>2024-11-26T13:50:36.396Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="toxae1" data-post="3427" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/toxae1/48/12007_2.png" class="avatar"> toxae1:</div>
<blockquote>
<p>при отключении quic все работает как то с небольшой задержкой</p>
</blockquote>
</aside>
<p>Есть такое. Мне помогла добавка  <code>--wssize=1:6 --ipset=/etc/nfqws/google.txt</code> для стратегии в отдельный профиль под ютуб на tcp. Стало поплавнее и пошустрее. Ипсет как ограничетель для<br>
<code>--wssize</code>. Иплист можно взять, например, оттуда:<br>
<code>https://raw.githubusercontent.com/runetfreedom/russia-blocked-geoip/refs/heads/release/text/google.txt</code><br>
Для quic это не нужно, разумеется.</p></td><td>2024-11-26T14:04:54.629Z</td></tr><tr><td>uwu(uwu)</td><td><p>chrome с tcp как то очень тормознуто работает с ютубом, поэтому там лучше quic<br>
firefox же и так и так быстро. (я лично пользуюсь фф с отключенным quic)</p></td><td>2024-11-26T14:36:46.463Z</td></tr><tr><td>anon9001(anon)</td><td><details>
<summary>
тебе грех жаловаться</summary>
<pre><code class="lang-auto">df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                  576.0K    280.0K    296.0K  49% /
/dev/root                 2.3M      2.3M         0 100% /rom
tmpfs                    14.0M     76.0K     13.9M   1% /tmp
/dev/mtdblock3          576.0K    280.0K    296.0K  49% /overlay
overlayfs:/overlay      576.0K    280.0K    296.0K  49% /
tmpfs                   512.0K         0    512.0K   0% /dev
</code></pre>
</details>
<p>И я не перестаю повторять что если лишние деньги есть то лучше их тратить на лишние накопители. Эти ваши роутеры за цену почки не помогут когда запретят весь интернет.</p></td><td>2024-11-26T14:40:35.523Z</td></tr><tr><td>i-no(...)</td><td><p>Согласен.</p>
<details>
<summary>
И я ж не жалуюсь</summary>
<p>Я-то прихватил сяоми “окирпиченным”, по случаю. За 800 рублей, когда новые были за 2000+ что ли. Не помню. Восстановил чисто на интерес. Так что вторичка решает вопрос нехватки стораджа в роутерах. “Запрет” можно вкорячить даже на ржавое ведро, только не нужно уж настолько себя ограничивать.</p>
</details>
<p>Более важно, что ситуация в которой мы все оказались — часть общей картины, которая просматривалась более чем за 10 лет до.</p></td><td>2024-11-26T15:00:30.003Z</td></tr><tr><td>abc555</td><td><p>Что значит запретят ? Ещё не запретили, а вы уже с этим согласны ) Ведь всё зависит от вас, будете согласны, тогда запретят )</p></td><td>2024-11-26T15:22:44.832Z</td></tr><tr><td>abc555</td><td><p>Не хочется тут флудить, но ситуация в которой все оказались потому что все согласны )<br>
Я думал тут собрались не согласные, но как вижу я ошибался )</p></td><td>2024-11-26T15:29:32.056Z</td></tr><tr><td>exz</td><td><p>есть агрессивно послушное большинство, а есть молчаливо непослушное меньшинство. Что те, что другие - крепостные ).</p></td><td>2024-11-26T15:34:09.256Z</td></tr><tr><td>abc555</td><td><p>Ну я из тех, кто не с теми и не с другими. Умею подстраиваться, создать видимость, но делаю всегда так я хочу и запретить мне, такой вариант я даже не рассматриваю. Есть определённые правила которые нельзя нарушать, с этим я согласен, та и то, не со всеми. Никогда не настраивайте себя на плохое, так как вы сами создадите это плохое для себя же. Когда нет выхода, я вспоминаю мультик про менхаузена и выход сразу находится )</p></td><td>2024-11-26T15:43:07.613Z</td></tr><tr><td>bolvan</td><td><p>Облегчение касается только размера исходного архива.<br>
Если на роутере 64 рам, в /tmp может не хватить места на архив 6 + распак 10.<br>
Но в таких случаях надо еще качать курлом в stdout и пайпом tar</p></td><td>2024-11-26T16:53:05.283Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Может кто знает.<br>
Как может стратегия для tcp прибивать youtube android tv при том что на телефоне работает.<br>
Что там что там все одинаково. Ставлю другую стратегию работает и там и там. Думал что на телефоне работает с другими протоколами а нет. И там и там tcp+quic. Мистика для меня.</p></td><td>2024-11-26T17:42:58.459Z</td></tr><tr><td>gnus(gnus)</td><td><aside class="quote no-group" data-username="gnus" data-post="3411" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/7993a0/48.png" class="avatar"> gnus:</div>
<blockquote>
<p>Приложение Youtube для Android TV использует протокол gQUIC Q046.</p>
</blockquote>
</aside>
<p>–dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-unknown-udp=“%~dp0quic_pl_by_ori.bin”<br>
Такая стратегия работает, только жаль хостлист не подключить.</p></td><td>2024-11-26T22:04:00.394Z</td></tr><tr><td>javoroleg(Oleg)</td><td><p>Методом проб и ошибок, основные проблемы были с модулями для iptables они там почему-то автоматом не подгружаются.</p>
<p>Дистрибутив убунты</p>
<p>DietPi_OrangePiZero3-ARMv8-Bookworm.img<br>
С установкой запрета особых проблем нет с дистрибутивом линукса есть.</p>
<p>Все тоже самое на малинке на убунте 18 или 20 ставиться и настраивается гораздо приятнее …</p></td><td>2024-11-27T10:20:51.429Z</td></tr><tr><td>abc555</td><td><p>Та не, у меня стоит zram-swap, места полно, хватает с головой<br>
этот пакет из оперативки делает дополнительную память, в моём случаи +27 мгб, это что то типа файла подкачки, работает по этому принципу, для роутеров с 64 мгб оперативной памяти то что надо. А вот самой памяти флешь 8 мгб и места не осталось и увеличивая запрет, ставить будет некуда, файл подкачки уже не поможет, это только если чем то сжать и чтоб разжимала в оперативке, то есть чтоб работал запрет в оперативке, а не считывал с диска постоянно.<br>
Я не знаю как работает запрет, в оперативке или с диска, но если с диска, то лучше конечно чтоб в оперативку он выгружался при загрузке и работал в ней</p></td><td>2024-11-27T14:41:39.819Z</td></tr><tr><td>Jabronskiy</td><td><p>Появился такой вопрос: при запуске с <code>--debug=@%~dp0debug.txt</code> запрет запускается, профиля загружаются и даже в файл пишет, но при этом само дурение не работает. Если запускать с <code>--debug=1</code>, то все работает. Я так понимаю это как-то связано с тем, что он постоянно отвлекается на логирование и запись в файл? И с <code>--debug=1</code> происходит тоже что-то подробное, если держать ползунок в консоли.<br>
Собственно как лучше логировать в файл? Только через cygwin?</p></td><td>2024-11-27T15:45:28.588Z</td></tr><tr><td>bolvan</td><td><p>сложно представить как такое возможно<br>
в дебаг логе есть операции дурения ?</p></td><td>2024-11-27T16:15:57.679Z</td></tr><tr><td>bolvan</td><td><p>можно удалить files/<br>
безболезненно</p>
<p>но стоит задуматься о замене рутера если нет усб</p></td><td>2024-11-27T16:17:41.789Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>стоит задуматься о замене рутера <em>если нет усб</em></p>
</blockquote>
<p>Или хотя бы флешку сдуть и сменить на 128 мегабит (=16 мегабайт).</p></td><td>2024-11-27T16:39:33.427Z</td></tr><tr><td>Jabronskiy</td><td><aside class="quote no-group" data-username="bolvan" data-post="3442" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>в дебаг логе есть операции дурения ?</p>
</blockquote>
</aside>
<p>Да.</p>
<details>
<summary>
Summary</summary>
<pre><code class="lang-auto">packet: id=0 len=794 outbound IPv6=0 IPChecksum=1 TCPChecksum=0 UDPChecksum=1 IfIdx=15.0
IP4: 192.168.1.5 =&gt; 162.159.130.232 proto=tcp ttl=128 sport=5416 dport=443 flags=AP seq=1207631330 ack_seq=1492681972
TCP: 16 03 01 02 ED 01 00 02 E9 03 03 47 0F 2F 1B 1A 8E 1B 64 7E 4B 16 C7 C4 75 FA A1 28 C5 25 62 5B ... : ...........G./....d~K...u..(.%b[ ...
desync profile search for tcp target=162.159.130.232:443 l7proto=unknown hostname=''
desync profile 0 matches
packet contains full TLS ClientHello
hostname: images-ext-1.discordapp.net
discovered l7 protocol
discovered hostname
desync profile search for tcp target=162.159.130.232:443 l7proto=tls hostname='images-ext-1.discordapp.net'
* hostlist check for profile 3
[D:\Soft\zapret-win-bundle-master\zapret-winws\googlevideo.txt] include hostlist check for images-ext-1.discordapp.net : negative
hostlist check for discordapp.net : negative
hostlist check for net : negative
* hostlist check for profile 4
[D:\Soft\zapret-win-bundle-master\zapret-winws\list-discord.txt] include hostlist check for images-ext-1.discordapp.net : negative
hostlist check for discordapp.net : positive
desync profile 4 matches
desync profile changed by revealed l7 protocol or hostname !
dpi desync src=192.168.1.5:5416 dst=162.159.130.232:443
split pos 2
sending fake request : 16 03 01 02 93 01 00 02 8F 03 03 11 B1 0A 4D CE 17 05 66 51 5B AF 5E 0D 60 FF B3 1A 61 E2 36 DF ... : ..............M...fQ[.^.`...a.6. ...
sending 1st tcp segment 0-1 len=2 seqovl=0 : 16 03 : ..
sending 2nd tcp segment 2-753 len=752 : 01 02 ED 01 00 02 E9 03 03 47 0F 2F 1B 1A 8E 1B 64 7E 4B 16 C7 C4 75 FA A1 28 C5 25 62 5B 8F 15 ... : .........G./....d~K...u..(.%b[.. ...
packet: id=0 drop
</code></pre>
</details>
<p>Он, конечно, пишет <code>packet: id=0 drop</code>, хотя наверное должен писать что-то типа <code>pass modified</code>, но с <code>--debug=1</code> там тоже <code>drop</code> и все работает.</p></td><td>2024-11-27T16:51:21.926Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Кстати хотел спросить а почему install_easy при первой установке если на роутере допустим 256 мб озу, выдает предупреждение о малом количестве ram и о том что с nftables в таком случае могут возникнуть проблемы, хотя в репе написано что</p>
<blockquote>
<p>Проект нацелен прежде всего на маломощные embedded устройства</p>
</blockquote>
<p>В маломощных устройствах типо ставят больше 256 мб рам, хотя если ставить на устройства с 512 рам такого предупреждения уже нет, хотя кажется что и этого будет маловато для nftables. Просто интересно почему уведомление о малом количестве появляется только при 256 мб ram</p></td><td>2024-11-27T17:01:32.284Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Добрый вечер . У меня такая проблема. У меня роутер подключён. По Вайфаю . Смартфону . Оттуда раздаётся интернет В роутере . Настроен . Фиксированный TTL 65 . . Чтобы провайдер не блокировал . Раздачу . На роутер . В роутер установлен запрет . Когда я его включаю. Провайдер блокирует интернет . Хотя когда я . Отключаю флешку … И включаю на компьютере запрет. Всё работает . Все сайты открываются . Кто-нибудь сталкивался с такой проблемой. Можно как-то решить</p></td><td>2024-11-27T17:07:14.221Z</td></tr><tr><td>bolvan</td><td><p>в 512 могут загрузиться ип листы ркн<br>
у нфт большая проблема с памятью. см nftables.txt</p></td><td>2024-11-27T17:27:22.023Z</td></tr><tr><td>bolvan</td><td><p>drop  и должен быть<br>
надо в шарке смотреть результат дурения в обоих случаях</p></td><td>2024-11-27T17:28:34.208Z</td></tr><tr><td>bolvan</td><td><p>этого мало.<br>
может убут или ядро не принять<br>
и размеры партиций надо править в исходниках и пересобирать</p></td><td>2024-11-27T17:30:57.092Z</td></tr><tr><td>Jabronskiy</td><td><p>В шарк пока не лез, но выяснил еще две вещи: 1) с <code>--debug=@%~dp0debug.txt</code> как будто интернет вообще отваливается. Попытался открыть для примера реддит и получил timeout. 2) вопреки первому пункту, оно все таки “работает”. Ну, то есть через минуту-две дискорд открылся, что там дальше было я не стал проверять.</p>
<p>Вот такая вот странная хрень. Сам дебаг мне не слишком нужен, только ради интереса в него посмотреть, да и человеку хотел помочь, а то у него все кроме голоса в дискорде работает.</p></td><td>2024-11-27T18:51:58.095Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Доброго помогите разобраться.<br>
Nfqws<br>
на телефоне ютуб офиц клиент работает<br>
На андроид тв через youtube atv офиц. Не работает<br>
Все одно и тоже смотрел по пакетам.<br>
Единственное на телик приходит ответ с неполным адресом.<br>
Вся загвоздка в <a href="http://www.youtube.com" rel="noopener nofollow ugc">www.youtube.com</a><br>
Вот эти адреса в ответе без com<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ca1cfb2068729b8f43fd371686f23121d895379e.jpeg" data-download-href="https://ntc.party/uploads/default/ca1cfb2068729b8f43fd371686f23121d895379e" title="IMG_20241128_112951"><img src="zapret-обсуждение-726/ca1cfb2068729b8f43fd371686f23121d895379e_2_690x191.jpeg" alt="IMG_20241128_112951" data-base62-sha1="sPYxvwiPybk17VQ4KQQQUirW4wK" width="690" height="191" srcset="zapret-обсуждение-726/ca1cfb2068729b8f43fd371686f23121d895379e_2_690x191.jpeg, zapret-обсуждение-726/ca1cfb2068729b8f43fd371686f23121d895379e_2_1035x286.jpeg 1.5x, zapret-обсуждение-726/ca1cfb2068729b8f43fd371686f23121d895379e.jpeg 2x" data-dominant-color="CED6DA"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">IMG_20241128_112951</span><span class="informations">1080×299 60 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Ps может быть такое что если серверу приходит резаный пакет он не правельно отвечает?</p></td><td>2024-11-28T08:31:21.016Z</td></tr><tr><td>abc555</td><td><p>Если телик свежий, то он использует протокол tls 1.3, а телефон возможно старый который использует tls 1.2, поэтому на телефоне работает, а на телике нет, так же сам телик использует днс гугла и даже если прописать в ручную любой другой днс на телике, он всё равно будет юзать днс гугла, это хорошо видно если следить за подключением, в wrt это решается путём установки luci-app-https-dns-proxy и тогда будет не важно какой хочет использовать днс телик или телефон, работать будет тот, который вы поставите. Ну а решить проблему с tls 1.3 это только на уровне роутера, путём блокировки порта udp 443 и если правильно заблокировать, тогда уже будет неважно, включён у вас протокол tls 1,3 или нет, при блокировке порта, работать будет только на tls 1.2<br>
На старых операционных системах нет поддержки tls 1.3, включая 7 винду или старые андроиды, поэтому это нужно учитывать, если настраивать только tls 1.3, то и будет работать только на этом протоколе, но чтоб универсально было, чтоб работало на любом устройстве, тогда настраивать нужно только tls 1.2, а tls 1.3 это уже после того как настроил 1.2, причём квик он же tls 1.3 настаивать не обязательно, так как он может создать проблемы с другими сайтами</p></td><td>2024-11-28T12:47:23.189Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="abc555" data-post="3453" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>прописать в ручную любой другой днс на телике, он всё равно будет юзать днс гугла</p>
</blockquote>
</aside>
<p>У меня не юзает. Я как раз включал логирование своего днс чтобы добавить все говно на которое телек лезет в чс (в том числе ntp сервер, он мне не нужен был). Телек начал даже быстрее работать после этого лол</p>
<p>Там нужно оба днс поля прописать просто, иногда бывает что днс 2 который 8.8.4.4 по умолчанию может активироваться</p></td><td>2024-11-28T12:56:50.413Z</td></tr><tr><td>abc555</td><td><p>Никакое прописывание днс в телефоне или в телике вам не поможет, они всё равно используют то что в их программе, только на роуторе https-dns-proxy решает этот вопрос и не просто на роуторе, а только на openwrt, в обычном там скажем кинетике, нет такой функции, подмены днс и не было никогда и не будет<br>
То есть. вы можете прописать скажем днс 10.10.10.10, но работать будет только тот который вы включите в https-dns-proxy, не зависимо какой он там прописан у вас на устройстве, он не будет использоваться, в этом преимущество этой проги</p></td><td>2024-11-28T13:00:00.677Z</td></tr><tr><td>anon9001(anon)</td><td><p>Ну в openwrt у меня еще прописан адрес телека (и адреса всяких виндоус маших) в iptables чтобы все outgoing шли в аут. Сам девайс же потом шлепает через локальную прозрачную прокси мимо и только в приложениях которым можно доверять вроде браузера. <span class="spoiler">Я так давно делал на виндувсе потому что меня задолбала его слежка.</span> Поэтому если телек как-то сам автономно может пробить локальный файрвол который по сути имеет ип бан, то не знаю даже…</p></td><td>2024-11-28T13:07:39.152Z</td></tr><tr><td>abc555</td><td><p>Если у вас iptables на wrt, то это очень древняя прошивка, в новых версиях исправлены все косяки и уязвимости и новая работает на nftables, поэтому я бы на вашем месте пересмотрел и установил бы свежую версию прошивки для начала<br>
Все ваши команды через iptables станут не актуальными и вам нужно будет изучать уже nftables, я с него и начал, упустив iptables ))</p></td><td>2024-11-28T13:10:49.831Z</td></tr><tr><td>anon9001(anon)</td><td><p>Конечно древняя. Всего 512kb флаш <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
<p>Но она хотя бы не будет мешать всяким badsum проходить, болван писал что стоковые прошивки может не пропускать такое.</p></td><td>2024-11-28T13:16:57.530Z</td></tr><tr><td>abc555</td><td><p>Та этот ваш роутер нужно было выкинуть ещё 15 лет назад, фишка в чём, что покупая свежий и даже на обычной стандартной прошивке он работает быстрее, лучше намного, таких как у вас, у меня валяется штуки три, и выбросить жалко и подарить некому ))<br>
Хотя у них 4 мгб памяти, походу они даже лучше вашего )) Ну а ваш  получается нужно было выкинуть 25 лет тому назад )</p></td><td>2024-11-28T13:19:25.264Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>quic и tls 1.3 немного разные вещи<br>
и в офф приложениях гугла для ютуба везде quic используется, но некоторые служебные домены по https ходят и в старых дейвайсах по https с tls 1.2, а не 1.3</p></td><td>2024-11-28T13:22:14.302Z</td></tr><tr><td>abc555</td><td><p>Нет, quic это и есть tls 1.3, работает этот протокол совместно с tcp и udp, гугл придумал эту хрень</p></td><td>2024-11-28T13:23:54.331Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="abc555" data-post="3453" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Ну а решить проблему с tls 1.3 это только на уровне роутера, путём блокировки порта udp 443 и если правильно заблокировать, тогда уже будет неважно, включён у вас протокол tls 1,3 или нет, при блокировке порта, работать будет только на tls 1.2</p>
</blockquote>
</aside>
<p>Я конечно не эксперт, но каким образом блокировка udp 443 приведет к блокировке tls 1.3? Tls 1.3 встроен в quic, но это же не значит что заблокировав quic он у вас перестанет по tcp работать? Quic и udp - это просто транспортные протоколы.</p></td><td>2024-11-28T13:25:13.559Z</td></tr><tr><td>abc555</td><td><p>Именно перестанет работать, я лично провёл этот тест, заблокировав порт udp 443, включил в браузере quic и не одного пакета http/3 не пролетело, только http/2 и http/1<br>
Если вы заблокировали этот порт и пакеты http/3 пролетают, значит вы умеете правильно блокировать этот порт</p></td><td>2024-11-28T13:27:32.808Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Так вы же знаете, что http2 может быть с tls 1.2 и tls 1.3?<br>
А вот quic уже требует наличие tls 1.3 для работы и не работает с 1.2<br>
Так что quic и tls1.3 это разные вещи, одно связанно с другим, но это не одно и тоже</p></td><td>2024-11-28T13:30:11.929Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="abc555" data-post="3463" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>http/2</p>
</blockquote>
</aside>
<p>Вы путаете прикладной протокол (http), сеансовый протокол защиты (tls) и транспортный протокол (quic/udp/tcp).<br>
<a href="https://datatracker.ietf.org/doc/html/rfc7540">https://datatracker.ietf.org/doc/html/rfc7540</a><br>
<a href="https://datatracker.ietf.org/doc/html/rfc8446">https://datatracker.ietf.org/doc/html/rfc8446</a><br>
<a href="https://datatracker.ietf.org/doc/html/rfc9000">https://datatracker.ietf.org/doc/html/rfc9000</a><br>
<a href="https://datatracker.ietf.org/doc/html/rfc9001">https://datatracker.ietf.org/doc/html/rfc9001</a></p></td><td>2024-11-28T13:32:02.196Z</td></tr><tr><td>abc555</td><td><p>При блокировке udp 443 я заходил на разные сайты, не только на ютуб и ни одного пакета http3 не пролетело, хотя в браузере включено и сделал вывод что quic и tls 1.3 это одно и тоже, немного почитав и изучив этот протокол, я понял что это за хрень.<br>
Первый раз я плохо заблокировал этот порт и пакеты пролетали, но имея немного опыта, я всё же этот порт прибил наглухо и всё, все пакеты http3 ушли в туман )</p></td><td>2024-11-28T13:33:55.651Z</td></tr><tr><td>Ori</td><td><p>http/3 - это http-over-quic. То есть прикладной протокол через транспорт quic. Quic - это “модифицированная версия” udp, в которую, в том числе, встроено tls 1.3.</p>
<p>Понятное дело, что заблокировав udp 443 вы перестанете видеть http/3, т.к. вы заблочили quic. Однако это не значит что tls1.3 по tcp перестал использоваться.</p>
<p>Не говоря уже о том, что tls1.3 и до quic использовался.</p></td><td>2024-11-28T13:36:47.273Z</td></tr><tr><td>abc555</td><td><p>Именно так и есть, работают они совместно udp и tcp, но если заблокировать udp, то и tcp 1.3 работать не будет</p></td><td>2024-11-28T13:38:56.499Z</td></tr><tr><td>Ori</td><td><p>Бро, запусти курл с verbose да посмотри <img src="https://ntc.party/images/emoji/twitter/face_exhaling.png?v=12" title=":face_exhaling:" class="emoji" alt=":face_exhaling:" loading="lazy" width="20" height="20"></p></td><td>2024-11-28T13:40:27.582Z</td></tr><tr><td>abc555</td><td><p>Ещё раз повторяю, если плохо заблокировать, то пакет всё равно будет проходить, я тоже сначала не понял кого он проходит, но добил его до конца )</p></td><td>2024-11-28T13:41:58.776Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="abc555" data-post="3455" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>а только на openwrt, в обычном там скажем кинетике, нет такой функции</p>
</blockquote>
</aside>
<p>Вы опять не знаете о чем говорите, все там есть.</p></td><td>2024-11-28T13:43:25.167Z</td></tr><tr><td>abc555</td><td><p>Давайте тему засорять не будем, нет там такого, вы просто не видели и не понимаете о чём я.<br>
А я даже бывает пишу что нить этому кренделю который поддерживает эту прогу, он катается на доме на колёсах где то в штатах, короче мозг, в очках такой )</p></td><td>2024-11-28T13:44:16.035Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="abc555" data-post="3472" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>вы просто не видели и не понимаете о чём я</p>
</blockquote>
</aside>
<p>Давайте не будем, сразу же после того как вы перестанете вводить пользователей в заблуждения</p>
<p>Вот все что делает https-dns-proxy</p>
<blockquote>
<p>It receives regular (UDP) DNS requests and resolves them via DoH resolver</p>
</blockquote>
<p>То есть я просто могу игнорировать любые днс прописав кастомные doh/dot к которым и будут обращения. А волшебный https-dns-proxy сюрприз, сюрприз при разворачивании entware так же легко ставится на кинетик как и любой волшебный пакет из openwrt неудобно получилось,да?</p></td><td>2024-11-28T13:49:21.730Z</td></tr><tr><td>abc555</td><td><p>Я особо в кинетик не вникаю, для меня любой роутер со стандартной прошивкой это вражеский роутер, я не знаю что они туда засунули, но некоторые модели я находил бэктор лично, юзая стандартную прошивку, в неё внедрён ip с которого могут зайти в роутер, причём не важно какие у вас настройки, этот ip имеет полный доступ и зная это, то спрашивается надо оно вам или нет.<br>
Чтоб вы знали, с 15 года это я точно знаю, во все процессоры внедрён бектор и если у вас стандартная прошивка, то кому то достаточно нажать одну кнопку и ваше устройство потухнет и не важно какое, телефон это или телевизор )</p></td><td>2024-11-28T13:52:52.878Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Да одно и тоже везде https + quic.<br>
На роутере стоит dnsmasq так что ходят на один сервер.<br>
Это не на телике а на приставке.<br>
При этом на телефоне и пк в хроме что с quic что без него все работает.<br>
Если сменить стратегию на эту</p>
<pre><code class="lang-auto">--dpi-desync=fake,multisplit --dpi-desync-split-pos=1,midsld --dpi-desync-ttl=0 --dpi-desync-repeats=16 --dpi-desync-fooling=badseq,md5sig --dpi-desync-fake-tls=/opt/etc/nfqws/tls_clienthello.bin"
</code></pre>
<p>то все работает для quic стратегия прежняя.<br>
А со стратегией чисто на мультидесордер без фейка работает на пк и телефоне а атв не хочет</p></td><td>2024-11-28T14:18:32.944Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="anon9001" data-post="3454" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> anon9001:</div>
<blockquote>
<p>Там нужно оба днс поля прописать</p>
</blockquote>
</aside>
<p>У меня прописан 192.168.1.1 и 127.0.0.1 как раз на них слушает dnsmasq</p></td><td>2024-11-28T14:21:54.272Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="abc555" data-post="3455" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>в обычном там скажем кинетике, нет такой функции, подмены днс и не было никогда и не будет</p>
</blockquote>
</aside>
<p>Там отключается полность днс и используется например dnsmasq или adguard home</p></td><td>2024-11-28T14:23:46.241Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>а атв не хочет</p>
</blockquote>
</aside>
<p>А <code>--wssize</code> тестово именно для атв не помогает?</p></td><td>2024-11-28T14:29:14.416Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="abc555" data-post="3474" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>этот ip имеет полный доступ и зная это</p>
</blockquote>
</aside>
<p>Да видел я в правилах один ip которому разрешено из вне ходить. Это ip сервака для keendns</p></td><td>2024-11-28T14:32:46.496Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group quote-modified" data-username="i-no" data-post="3478" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>–wssize</p>
</blockquote>
</aside>
<p>Да читал что не советуют ее использовать, только если больше ничего не помогает. Тут дело не в том что не работает. А дело почему так не работает. Сделаю скрины наверное для понимания.</p></td><td>2024-11-28T14:35:40.005Z</td></tr><tr><td>toxae1(Toxa)</td><td><p>Насчет quic вообще не советую его отключать, лично у меня намного медленнее работает без него.</p></td><td>2024-11-28T14:36:59.829Z</td></tr><tr><td>i-no(...)</td><td><p>Я к тому, что если помогло, то можно его дополнительно ограничить списками айпи сетей гугла и отдельно тех GGC что ATV использует. Под GGC придется самостоятельно подобрать, но это нетрудно. И тогда “токсичность”<code> --wssize</code> нейтрализуется.</p>
<p>quic если хорошо работает, то пусть работает, конечно.</p></td><td>2024-11-28T14:38:25.171Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Потестировал командный файл preset_russia_autohostlist.cmd, вроде как все сайты открываются нормально. Скопировал все пресеты в service_create.cmd, но создание службы стопорится на ошибке “не является внутренней или внешней командой, исполняемой программой или пакетным файлом”.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/9642cc8ef6ed5722827af001c1a51e0934e86edf.png" data-download-href="https://ntc.party/uploads/default/9642cc8ef6ed5722827af001c1a51e0934e86edf" title="image"><img src="zapret-обсуждение-726/9642cc8ef6ed5722827af001c1a51e0934e86edf.png" alt="image" data-base62-sha1="lrgJGAw2CT2pBer536iWiYCgu2b" width="690" height="360" data-dominant-color="1B1B1C"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">979×512 16.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Есть у кого-нибудь готовый командный файл для установки службы?</p></td><td>2024-11-29T09:13:03.852Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Вы мне можете ответить. Как заставить. Работать. Запрет. Фиксированным ttl 65 Запрет Установлен. На роутер entware keenetic peak К нему подключён Смартфон. Через Wireless ISP В этом меню… Зафиксирован ttl 65 На отправку. И на приём. Провайдер Мобильный. Интернет летай Таттелеком. Когда я включаю Запрет. . Интернет полностью блокируется Браузер пишет Соединение сброшено Когда я отключаю запрет… И отключаю флешку Интернет начинает работать Запускаю на компьютере Запрет YTDisBystro_v2.4. Все сайты открываются Интернет не блокируется Как решить эту проблему</p></td><td>2024-11-29T09:53:36.584Z</td></tr><tr><td>abc555</td><td><p>Смотря что вы добавили, покажите вашу стратегию в роуторе</p></td><td>2024-11-29T12:19:22.945Z</td></tr><tr><td>abc</td><td><p>Добрый день.</p>
<p>Подскажите, есть стратегия:<br>
–dpi-desync=fake,udplen --dpi-desync-udplen-increment=2 --dpi-desync-cutoff=n3 --dpi-desync-repeats=2<br>
с --dpi-desync-fake-quic</p>
<p>Для Firefox работает:<br>
<img src="zapret-обсуждение-726/fd2cd21e93f67a903066b0e6d61338b204df41f3.png" alt="2024-11-29_151532" data-base62-sha1="A7GPldoDPmhQ9Q6HHhxJnGQt2n1" width="415" height="215"></p>
<p>Для TVIP нет:<br>
<img src="zapret-обсуждение-726/fa768965a4fa642c4aa356a56c77d6b12d8f85e5.png" alt="2024-11-29_151700" data-base62-sha1="zJHkxEHghXhbiyMsmi6iJ5rAGJD" width="481" height="203"></p>
<p>Видно, что с железки идёт модифицированный quick, в котором SNI виден:<br>
<img src="zapret-обсуждение-726/4e3824cf9688a7e15644259f668c9042c2526226.png" alt="2024-11-29_151838" data-base62-sha1="b9XwS9gCsQdvPw2KMZNsRsUSamq" width="634" height="373"></p>
<p>Что-нибудь с этим можно сделать с помощью dvtws?</p></td><td>2024-11-29T12:20:41.128Z</td></tr><tr><td>abc555</td><td><p>Я только сегодня на 2х разных провах тестировал quic, результат фиговый, поэтому заблокировал обратно порт udp 443, без quic хоть и медленней открывается, зато стабильно</p></td><td>2024-11-29T12:23:40.914Z</td></tr><tr><td>abc</td><td><blockquote>
<p>поэтому заблокировал обратно порт udp 443</p>
</blockquote>
<p>Там то ли железка туповата - блокировка порта не приводит к переходу на TCP. Возможно, надо что-то ещё кроме порта блокировать.</p></td><td>2024-11-29T12:29:59.660Z</td></tr><tr><td>abc555</td><td><p>Я не знаю можно ли заблокировать порт если не wrt стоит. В wrt я заблокировал в файрволе через люси на вход, выход и перенаправление, так же дополнительно заблокировал в raw_prerouting и в raw_output через PuTTY и тогда он перестал работать<br>
Так же в запрете отключил udp443 в трёх местах, я на nfqws</p></td><td>2024-11-29T12:38:05.116Z</td></tr><tr><td>abc</td><td><blockquote>
<p>Я не знаю можно ли заблокировать порт если не wrt стоит.</p>
</blockquote>
<p>Нет проблем - выше правила заворота в dvtws ipfw (в моём случае) add N reset udp from XXX to any 443.<br>
Однако, спустя пару пакетов TCP TLSv1 опять наблюдаются пакеты с GQUIC на этот же IP. Вот и подумалось, что несмотря на --dpi-desync-fake-quic SNI в этих пакетах не меняются по причине различий в протоколах.</p></td><td>2024-11-29T12:46:30.993Z</td></tr><tr><td>abc555</td><td><p>Я раньше уже говорил, если правильно заблокировать порт, то не важно включён у вас quic на устройстве или нет, значения не имеет, он не будет работать, http3 пакеты пролетать не будут. Устройство если quic включён будет отправлять этот пакет, но дальше роутера он не уйдёт. У меня к примеру сетевой стёк настроен, я изменил многое чего через sysctl причём очень давно, поэтому у меня всё нормально работает, роутер под полным моим контролем. Последнее что я сделал до установки запрета, заблокировал icmp, igmp я заблокировал намного раньше, я полностью настроил роутер в ручную и споры были по поводу icmp, но я остался при своём мнении, переубедить меня не смогли на одном из форумов, хотя идею никто не поддержал</p></td><td>2024-11-29T12:58:55.108Z</td></tr><tr><td>i-no(...)</td><td><p>Не надо навязывать всем свои методики как единственно верные. Задача не переубедить отказаться от quic, а попытаться сделать так, чтобы он заработал не только в FF.</p>
<aside class="quote no-group" data-username="abc" data-post="3490" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/2bfe46/48.png" class="avatar"> abc:</div>
<blockquote>
<p>SNI в этих пакетах не меняются по причине различий в протоколах.</p>
</blockquote>
</aside>
<p>Может включить <code>--dpi-desync-any-protocol=1</code> и подсунуть пейлоад в<br>
<code>--dpi-desync-fake-unknown-udp=ваш_пейлоад</code> ?<br>
<a class="attachment" href="zapret-обсуждение-726/vuyeKDepy9MIgyBqRIM8sGhwJIM.bin">quic.bin</a> (144 байта)</p>
<p><img src="https://ntc.party/images/emoji/twitter/point_down.png?v=12" title=":point_down:" class="emoji only-emoji" alt=":point_down:" loading="lazy" width="20" height="20"></p></td><td>2024-11-29T13:02:57.658Z</td></tr><tr><td>gnus(gnus)</td><td><aside class="quote no-group" data-username="abc" data-post="3486" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/2bfe46/48.png" class="avatar"> abc:</div>
<blockquote>
<p>Видно, что с железки идёт модифицированный quick</p>
</blockquote>
</aside>
<p>zapret не распознает протокол GQUIC Q046, нужно использовать  --dpi-desync-any-protocol<br>
у меня работает стратегия:<br>
<em>–filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-fake-unknown-udp=“%~dp0quic_pl_by_ori.bin”</em><br>
Только wireshark после ее применения начинает GQUIC обозначать как просто QUIC</p></td><td>2024-11-29T13:04:21.926Z</td></tr><tr><td>abc555</td><td><p>Та в том то и дело, разные устройства, разные варианты, на одном работать будет, на другом нет<br>
К примеру на вин 7 quic работает не так как на вин 10, так как на 7 поддержки tls 1,3 нет, так же и на старых устройствах, её тоже нет, поэтому если много устройств и все они разные, то quic лучше исключить вообще из стратегии, если у вас 2 устройства, ну как вариант можно попробовать подобрать.<br>
Я уверен что многие понятия не имеют, поддерживает ли его устройство tls 1.3 или нет и не путайте с браузером, поддержка должна быть на уровне операционки</p></td><td>2024-11-29T13:11:39.235Z</td></tr><tr><td>gnus(gnus)</td><td><aside class="quote no-group" data-username="abc555" data-post="3494" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>К примеру на вин 7 quic работает не так как на вин 10</p>
</blockquote>
</aside>
<p>А как? Не по UDP?</p></td><td>2024-11-29T13:39:25.542Z</td></tr><tr><td>bolvan</td><td><p>rem  это защита от деток<br>
кто не шаря жмет на все подряд, и потом не знает как удалить<br>
полез в батник - должен знать rem</p></td><td>2024-11-29T14:05:31.421Z</td></tr><tr><td>abc555</td><td><p>Я это не говорил, сказал что немного по другому, скажем настраивая запрет под десятку, не факт что будет работать на 7 или ещё на чём не будь, а настраивая на семёрке, вероятность что на всех остальных устройствах будет всё работать, включая и десятку. На семёрке было последнее обновление tls 1.2, там 2 штуки их, вот оно добавляет поддержку этого протокола на уровне операционки, в десятку уже встроенный протокол tls 1.3 изначально, для семёрки его не сделали, он работает в новых браузерах на семёрке, но не так как на десятке. на ней получше он будет работать, так как совместим браузер с операционкой. Поэтому на старых устройствах, телефонах или планшетах, телевизоров или приставок. QUIC и будет работать если приложение или браузер поддерживает, но не стабильно, а даже наоборот, будет вызывать проблемы. Сам QUIC придумал гугл, чтоб быстрее загружать что нить, так как для udp рукопожатие не нужно и соответственно быстрее работает, но легко зато блокируемый этот протокол, говорят что он якобы безопасней чем tls 1.2, но у меня на счёт этого большие сомнения, верить на слово, тем более гуглу я бы не стал )<br>
Чтоб с эмитировать на десятке так же как на семёрке нужна утилита IISCrypto, я только не знаю, поддерживает она протокол 1.3 или нет, так как на десятке ни разу её не запускал, вот через неё можно включать и отключать протоколы. То есть выключить на десятке протокол 1.3 и будет работать точно так же как на семёрке, может и даже лучше работать начнёт в чём то, я не проверял</p></td><td>2024-11-29T14:28:48.421Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="abc555" data-post="3494" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>на 7 поддержки tls 1,3</p>
</blockquote>
</aside>
<p>с чегобы это?<br>
1 работает<br>
2 вообще от браузера зависит а не от оси</p></td><td>2024-11-29T15:21:27.457Z</td></tr><tr><td>berkut116(D#)</td><td><p>На Билайн (Татарстан)<br>
Чет перестали работать DoT сервера</p>
<p>У всех так?</p></td><td>2024-11-29T15:30:47.321Z</td></tr><tr><td>Jakensik</td><td><p>Вот мой рабочий пример: (внимание на символы <code>\</code> и <code>" </code>)</p>
<details>
<summary>
Пример service</summary>
<pre><code class="lang-auto">set ARGS=^
--wf-tcp=443 --wf-udp=50000-50090 ^
--filter-udp=50000-50090 --ipset=\"%~dp0ipset-discord.txt\" --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2 --dpi-desync-repeats=1 --new ^
--filter-udp=50000-50090 --new ^
--filter-tcp=443 --hostlist=\"%~dp0list-youtube.txt\" --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=\"%~dp0tls_clienthello_www_google_com.bin\" --new ^
--filter-tcp=443 --dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist-auto=\"%~dp0autohostlist.txt\"
call :srvinst WinwsZapret
goto :eof

:srvinst
net stop %1
sc delete %1
sc create %1 binPath= "\"%~dp0winws.exe\" %ARGS%" DisplayName= "Zapret DPI bypass : %1" start= auto
sc description %1 "zapret DPI bypass software"
sc start %1
</code></pre>
</details></td><td>2024-11-29T15:36:09.171Z</td></tr><tr><td>abc</td><td><blockquote>
<p>zapret не распознает протокол GQUIC Q046</p>
</blockquote>
<p>Понятно. Убрал --hostlist из стратегии, добавил эни-протокол. Однако с тем же fake.bin почему то не распознаётся поток:<br>
<img src="zapret-обсуждение-726/c33dd9ca5dcf73007d1ddb5ee10aed6179edf5a6.png" alt="2024-11-29_182924" data-base62-sha1="rRbCws4C3bW22RMuBW7qW3Hd3dc" width="494" height="169"></p>
<p>Из FF парсился:<br>
<img src="zapret-обсуждение-726/95b57b3ed055db92fd305420585d117629c127c5.png" alt="2024-11-29_183007" data-base62-sha1="lmnXQsQ0sJV6JbbzJPijpKEIrpH" width="510" height="148"></p>
<blockquote>
<p>Только wireshark после ее применения начинает GQUIC обозначать как просто QUIC</p>
</blockquote>
<p>Конечно, версия же меняется.<br>
До запрета:<br>
<img src="zapret-обсуждение-726/0abf2474792ba6dda89fae67f1f6635129d1e6f8.png" alt="2024-11-29_183222" data-base62-sha1="1x4ijz5TWmYxWHy2eSV1LIz97WE" width="345" height="54"><br>
После:<br>
<img src="zapret-обсуждение-726/800fb6119684bc3af40b04652c39a43e45c4454c.png" alt="2024-11-29_183322" data-base62-sha1="igSMc1jwLMgNpzMiPuM1kDt3grG" width="381" height="155"></p></td><td>2024-11-29T15:36:50.123Z</td></tr><tr><td>abc555</td><td><p>До недавнего времени я тоже так думал что зависит не от оси, но понял что я ошибался и я наверно даже так не думал, просто проверить было не на чем, поэтому отложил этот момент, но вот недавно на практике я это понял, а так походу наверное никто и не знает или не придают этому значения.<br>
Я не теоретик, я практик, у меня сначала практика, а только потом теория, поэтому если я что то и рассказываю, вы просто об этом слышите первый раз и вам кажется что это всё фигня, ведь инфы больше такой нету и поверить на слово не каждый может отличить, где правда, а где нет.<br>
Когда в коментах 10 человек что то похвалили и только один написал негативный комент, вот я всегда читаю только этот один, на остальные даже не обращаю внимание и отталкиваюсь от этого комента, так как он для меня будет в приоритете и я легко отличаю где правда а где нет</p></td><td>2024-11-29T15:48:13.033Z</td></tr><tr><td>i-no(...)</td><td><p>Нет, нам не кажется, что это всё фигня, просто ваши авторские <strong>расширительные</strong> толкования практикой же и не подтверждаются. Нашей. Очень многолетней.</p></td><td>2024-11-29T16:00:47.798Z</td></tr><tr><td>abc555</td><td><p>Дело в том что ваши знания на уровне как вас научили и вы от этого отталкиваетесь, а меня никто не учил, любой гасконец с детства академик, таков мой девиз )</p></td><td>2024-11-29T16:02:52.156Z</td></tr><tr><td>i-no(...)</td><td><p>У меня нет высшего образования. Формально. Так что не переживайте об этом)<br>
И мы тоже пратикуем. Чтобы отвлечься, запустите какой-нибудь супермиум на икспи, буде вам и TLS.</p></td><td>2024-11-29T16:03:27.295Z</td></tr><tr><td>abc555</td><td><p>Это когда вам 10 лет и у вас паяльник и отвёртка и больше ничего нет, ни интернета и спросить не у кого и вам надо починить телевизор, так как телемастер просто з@ебал своими разводами по три раза в месяц и знаний ноль, но есть желание сделать и когда сделал, нашел заводской косяк и он перестал ломаться от слова совсем, вот тогда понимаешь, что этот телемастер занимается не своим делом, так же и в любой сфере деятельности, реальных скажем айтишников я никогда не видел в живую, тут вот на форуме, там где нить, а так нет, это очень редкие люди, один может на 100 тысяч примерно, а то и больше, айтишником не становятся, ими рождаются. нельзя научить обезьяну выполнять сложные задачи, так же и научить стать айтишником это не возможно, можно примитивным только каким то манипуляциям, но реальным чтоб он стал, не научить никогда, это только дано от рождения, наверно ген какой то особый, не такой как у всех и зная эту рациональную истину меня всегда тянуло к этим редким людям, так как только у них можно чему то научится и ни один профессор вас так не научит, так как он не входит в эти редкие люди, он такой же бестолковый как и все кто не шарит. Смотришь какой то серьёзный хакер, умеет то что не умеешь ты, у меня сразу, вот молодец, я с огромным уважением всегда к таким людям )</p></td><td>2024-11-29T16:12:16.350Z</td></tr><tr><td>gnus(gnus)</td><td><aside class="quote no-group" data-username="abc" data-post="3501" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/2bfe46/48.png" class="avatar"> abc:</div>
<blockquote>
<p>Конечно, версия же меняется.</p>
</blockquote>
</aside>
<p>Это скрин фейкового пакета или пакета самого приложения из ТВ?</p></td><td>2024-11-29T16:13:39.979Z</td></tr><tr><td>vlads</td><td><aside class="quote no-group" data-username="i-no" data-post="3428" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Иплист можно взять, например, оттуда:<br>
<code>https://raw.githubusercontent.com/runetfreedom/russia-blocked-geoip/refs/heads/release/text/google.txt</code></p>
</blockquote>
</aside>
<p>Подскажите, есть такой же для ютуб?</p></td><td>2024-11-29T17:25:23.658Z</td></tr><tr><td>i-no(...)</td><td><p>Вот прямо этот должен подойти.</p>
<p>За исключением серверов GGC (<code>googlevideo.com</code>), которые непосредственно отдают медиапотоки — это надо подобрать самостоятельно исходя из того, что доступно на вашем провайдере. Условно говоря, даже на федеральном большом провайдере для Калининграда и Владивостока GGC будут наверняка разные. Проще, пожалуй, посканировать с помощью yt-dlp на любом большом плейлисте в режиме симуляции, без скачивания, и насобирать их в файл. Потом обработать.</p></td><td>2024-11-29T17:48:06.198Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>то что системные процессы действительно не умеют в 1.3 никак не влияет на 1.3 в браузере</p>
<p>доказать обратное вполне по силам если  знаешь общедоступный сайт на котором есть 1.3 но нет 1.2 - я таких не знаю</p></td><td>2024-11-29T18:08:23.021Z</td></tr><tr><td>i-no(...)</td><td><p>Можно попробовать какой-нибудь сайт-тестер, типа <code>https://tls13.akamai.io</code><br>
Он вроде бы безошибочно показывает через что на/в него зашли.</p></td><td>2024-11-29T18:10:41.799Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>есть и другие тестеры<br>
типа <a href="https://www.ssllabs.com/ssltest/index.html" class="inline-onebox" rel="noopener nofollow ugc">SSL Server Test (Powered by Qualys SSL Labs)</a><br>
тока сайтов таких нет<br>
1.3+<br>
1.2-</p></td><td>2024-11-29T18:12:17.294Z</td></tr><tr><td>i-no(...)</td><td><p>Все таки предполагаю, что должно что-нибудь быть, я просто тоже не знаю.</p></td><td>2024-11-29T18:14:21.332Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>куча обратных примеров типа хдрезки 1.2 без 1.3 от чего не работает банальный disorder2 безо всего</p>
<p>а те у которых 1.3 и который видать первоочерёдный с таким простым обходом открывает</p></td><td>2024-11-29T18:23:16.220Z</td></tr><tr><td>i-no(...)</td><td><p>Довольно естественно, что это именно так, иначе как обеспечивать общедоступность. Среди специальных каких-то тестилок скорее всего найдется v1.3 only. Если кто найдет или уже знает, может поделятся.</p></td><td>2024-11-29T18:28:30.199Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>no compatible binaries found<br>
Вот решил обновиться. И как быть. Что делать</p></td><td>2024-11-29T18:30:01.223Z</td></tr><tr><td>Ori</td><td><p>В лисе есть параметр <code>security.tls.version.min</code> - если поставить в значение 4, то будет использоваться только tls 1.3. Но, конечно, всё что максимум tls 1.2 - отвалится.</p>
<p>Ещё через курл, опять-таки, можно проверить <code>curl -v --tlsv1.3 https://rezka.ag/</code></p>
<blockquote>
<p>Проще, пожалуй, посканировать с помощью yt-dlp на любом большом плейлисте в режиме симуляции, без скачивания, и насобирать их в файл. Потом обработать.</p>
</blockquote>
<p>Удобнее всего через шарк, как тут кто-то советовал. Юзаете ютуб какое-то время, потом фильтруете пакеты <code>tls.handshake.extensions_server_name contains "googlevideo.com"</code></p></td><td>2024-11-29T18:30:33.024Z</td></tr><tr><td>i-no(...)</td><td><p>Это да. Тут yt-dlp просто чтобы рутину автоматизировать и чтобы данных побольше накопилось. Из некоторых пулов ggc выпрытивает намного реже, может там другие подсети. Ну плюс еще <code>cap/npcap</code> будет не так много весить без фактической доставки медиаконтента.</p></td><td>2024-11-29T18:33:54.706Z</td></tr><tr><td>bolvan</td><td><p>для начала не засорять тему логами распаковки или помещать в спойлер<br>
а затем взять релиз  бинарями<br>
в репе их нет</p></td><td>2024-11-29T18:43:30.417Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Где их взять</p></td><td>2024-11-29T18:45:11.864Z</td></tr><tr><td>i-no(...)</td><td><p>Не говорите ему пока не спрячет лог под спойлер)</p></td><td>2024-11-29T18:47:51.106Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Какой спойлер. . Вы мне Объясните. Сперва. А потом уже говорите</p></td><td>2024-11-29T18:52:10.090Z</td></tr><tr><td>i-no(...)</td><td><p>Говорю: сперва карандашом отредактируйте свой лог, выделите его АККУРАТНО, затем шестеренка и “Скрыть под спойлер”.</p>
<details>
<summary>
Вот такой спойлер</summary>
<p>Чтобы простыня ваша тут не болталась.</p>
</details></td><td>2024-11-29T18:54:12.915Z</td></tr><tr><td>vlads</td><td><p>А <a href="https://github.com/touhidurrr/iplist-youtube" data-bbcode="true" rel="noopener nofollow ugc">отсюда</a> не пойдёт?</p></td><td>2024-11-29T19:55:37.422Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Глянул поверхностно:</summary>
<p>$ cat cidr6.txt | wc -l<br>
611<br>
$ cat cidr4.txt | wc -l<br>
484</p>
<p>Всего 1095 CIDR-записей. В “моем” - 780. Разница может быть вызвана тем, что не все ресурсы попали под действия наших регуляторов. Глубже не проверял. Можно просто попробовать применить как есть, ничего страшного в данном случае не произойдет. Объединять в один не обязательно.</p>
</details></td><td>2024-11-29T20:47:56.591Z</td></tr><tr><td>electrifying</td><td><p>На. Гитхабе. Раздел. Релизы.</p></td><td>2024-11-29T21:01:43.585Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>А как их скачать. Прямо в роутер entware в Папку zapret</p></td><td>2024-11-30T06:33:13.498Z</td></tr><tr><td>bolvan</td><td><p>если это кинетик, там скачивания будет мало<br>
к нему особая прикрутка , не поддерживаемая автором</p></td><td>2024-11-30T07:35:15.454Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>И что мне делать.Будете советовать . Новый роутер брать  Ну вы даёте Если вы таким делом занимаетесь. Типа помогаете людям Надо знать . Разносторонний прошивки Не у всех. Роутеры openwrt</p></td><td>2024-11-30T08:45:17.056Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="3529" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>И что мне делать</p>
</blockquote>
</aside>
<p>Научить пользоваться гуглом, где уже миллион гайдов сделали как ставить запрет на кинетик</p>
<aside class="quote no-group" data-username="ivanixa333" data-post="3529" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>Типа помогаете людям</p>
</blockquote>
</aside>
<p>Так он и помогает, на все вопросы по работе программы всегда отвечает, а про кинетик bolvan не раз писал что не поддерживает их</p>
<p>А вообще если у вас специфичная проблема есть форум кинетик идите туда и создавайте топик, либо можете просто в тех.поддержку обратиться</p></td><td>2024-11-30T08:47:51.112Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Я например. Не могу поставить openwrt . Потому что  у меня роутер Keenetic Pic</p></td><td>2024-11-30T08:50:25.391Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Как вы знаете. У нас в России запрещено. Официально, озвучивает, обходы Блокировок. Там . Всё поудаляли. На такую тему</p></td><td>2024-11-30T08:53:25.172Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="3532" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>Всё поудаляли.</p>
</blockquote>
</aside>
<p>github забыли значит? Там сейчас больше всего инструкций и с даже исходными кодами для самых разных впн, бери и собирай</p></td><td>2024-11-30T08:56:09.083Z</td></tr><tr><td>anon9001(anon)</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="3529" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>Разносторонний прошивки Не у всех. Роутеры openwrt</p>
</blockquote>
</aside>
<p>zapret ставится на любую машину с линуксом. У меня он тоже не на роутере стоит, однако можно все настроить через прозрачное проксирование, у самого zapret даже есть своя прозрачная сокс прокси</p></td><td>2024-11-30T09:08:20.688Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Перестанешь ная@вать опсоса подменой TTL - zapret заработает как надо.<br>
Так что самое время выбрать что более нужно - продолжить ная@вать опсоса и как следствие чахнуть без запрещёнки или перестать ная@вать опсоса и как следствие начать не чахнуть без запрещёнки.</p></td><td>2024-11-30T09:10:05.927Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>А что всё вместе никак нельзя</p></td><td>2024-11-30T09:13:38.308Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Единственный дельный совет о том, что <em>теоретически_можно_попробовать</em>, был дан в другой теме еще 4 дня назад.<br>
Так понимаю, он был благополучно незамечен/проигнорирован.</p></td><td>2024-11-30T09:31:11.252Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Да я уже пробовал. Отключать стратегии пробовал в запрете ттл 65 Бесполезно запрет . Всё равно. Отправляет.оператору Не фиксированный ттл Единственный Квик . Не отправляет. . . Не фиксированный TTL . Работает а http и https tcp . Отправляет. Не фиксированный TTL</p></td><td>2024-11-30T09:47:06.339Z</td></tr><tr><td>Ranma</td><td><p>Сорри, если это нубский вопрос, есть ли в nfqws или tpws аналоги --disoob и --drop-sack из byedpi? Если конкретнее, нужен аналог вот этой строки:</p>
<p>ciadpi -s1 -q1 -Y -a2</p></td><td>2024-11-30T10:07:14.256Z</td></tr><tr><td>woww</td><td><p>Здравствуйте. Использую конфиг <a href="https://github.com/bol-van/zapret-win-bundle/blob/master/zapret-winws/preset_russia.cmd" class="inline-onebox" rel="noopener nofollow ugc">zapret-win-bundle/zapret-winws/preset_russia.cmd at master · bol-van/zapret-win-bundle · GitHub</a><br>
Решил его доработать под себя, так как насколько я понимаю, что он гонит в том числе весь https трафик через себя и если я знаю конкретные мне хосты, то лучше их добавить,снизить нагрузку и не “ломать” просто так весь трафик?<br>
2 отдельных хостлиста, 1 для ютуба, другой для всего остального. Все что не попадает в хостлист идет мимо в неизменяемом виде.</p>
<pre><code class="lang-auto">start "zapret: http,https,quic" /min "%~dp0winws.exe" ^
--wf-tcp=80,443 --wf-udp=443 ^
--filter-tcp=80 --hostlist="%~dp0list-general.txt" --dpi-desync=fake,fakedsplit --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-udp=443 --hostlist="%~dp0list-youtube.txt" --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=443 --hostlist="%~dp0list-general.txt" --dpi-desync=fake --dpi-desync-repeats=11 --new ^
--filter-tcp=443 --hostlist="%~dp0list-general.txt" --dpi-desync=fake,multidisorder --dpi-desync-split-pos=midsld --dpi-desync-repeats=6 --dpi-desync-fooling=badseq,md5sig --new ^
--filter-tcp=443 --hostlist="%~dp0list-youtube.txt" --dpi-desync=fake,multidisorder --dpi-desync-split-pos=1,midsld --dpi-desync-repeats=11 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin"
</code></pre>
<p>Нормальный конфиг или я что-то не понимаю?</p></td><td>2024-11-30T13:31:00.025Z</td></tr><tr><td>bolvan</td><td><p>все вместе это так<br>
модем в роутер<br>
на модеме выкл фиксацию ттл<br>
на рутере</p>
<h1><a name="p-69986-ttl-fix-1" class="anchor" href="#p-69986-ttl-fix-1"></a>ttl fix</h1>
<p>iptables -I POSTROUTING -t mangle -o  wan -m ttl --ttl-gt 62 -j TTL --ttl-set 65</p></td><td>2024-11-30T14:14:52.140Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/eef71cd1a34a6698c5b154302139ce7e5da4f42c.png" data-download-href="https://ntc.party/uploads/default/eef71cd1a34a6698c5b154302139ce7e5da4f42c" title="image"><img src="zapret-обсуждение-726/eef71cd1a34a6698c5b154302139ce7e5da4f42c_2_690x353.png" alt="image" data-base62-sha1="y5Z4Bhp7BNPH8qUrWZ5nbEZCGf2" width="690" height="353" srcset="zapret-обсуждение-726/eef71cd1a34a6698c5b154302139ce7e5da4f42c_2_690x353.png, zapret-обсуждение-726/eef71cd1a34a6698c5b154302139ce7e5da4f42c_2_1035x529.png 1.5x, zapret-обсуждение-726/eef71cd1a34a6698c5b154302139ce7e5da4f42c_2_1380x706.png 2x" data-dominant-color="1F2837"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">3839×1965 311 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/023a985ed414e4a75ca40deece6c43fc868ec781.png" data-download-href="https://ntc.party/uploads/default/023a985ed414e4a75ca40deece6c43fc868ec781" title="image"><img src="zapret-обсуждение-726/023a985ed414e4a75ca40deece6c43fc868ec781_2_690x357.png" alt="image" data-base62-sha1="jIuF8drCYLV811PPrXj5RZoPzb" width="690" height="357" srcset="zapret-обсуждение-726/023a985ed414e4a75ca40deece6c43fc868ec781_2_690x357.png, zapret-обсуждение-726/023a985ed414e4a75ca40deece6c43fc868ec781_2_1035x535.png 1.5x, zapret-обсуждение-726/023a985ed414e4a75ca40deece6c43fc868ec781_2_1380x714.png 2x" data-dominant-color="1D2636"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">3821×1977 207 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>Не помогает . У меня вот Такое подключение</p></td><td>2024-11-30T18:07:23.182Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>Всем добрый день, может кто поделиться ссылкой на способы реализации запрета на древних роутерах, где памяти раз-два-четыре всё?<br>
Есть в наличии tp link wr-840; wr-741ND ver 4.25; Asus rt-n300 b1, D-link 615 E4, openwrt поставить могу, но не до конца понимаю, как без вебморды сделать конфиг и после залить запрет. Да и в целом - без вебморды сложновато будет, т.к. хочу отдать потом роутер родителям для приложений на телефонах.<br>
У себя реализовал запрет на xiaomi 4 giga CN, встало всё без проблем по простейшей инструкции.</p></td><td>2024-11-30T18:36:46.146Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Lisandr" data-post="3543" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/a183cd/48.png" class="avatar"> Lisandr:</div>
<blockquote>
<p>на древних роутерах, где памяти раз-два-четыре всё?</p>
</blockquote>
</aside>
<aside class="onebox githubfolder" data-onebox-src="https://github.com/bol-van/zapret/tree/master/init.d/openwrt-minimal">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/bol-van/zapret/tree/master/init.d/openwrt-minimal" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h3><a href="https://github.com/bol-van/zapret/tree/master/init.d/openwrt-minimal" target="_blank" rel="noopener">zapret/init.d/openwrt-minimal at master · bol-van/zapret</a></h3>


  <p><span class="label1">DPI bypass multi platform. Contribute to bol-van/zapret development by creating an account on GitHub.</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/master/docs/quick_start.md">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.md" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.md" target="_blank" rel="noopener">bol-van/zapret/blob/master/docs/quick_start.md</a></h4>


      <pre><code class="lang-md"># Быстрая настройка Linux/OpenWrt

&gt; [!CAUTION]  
&gt; Не пишите в issue вопросы типа "как скопировать файл", "как скачать", "как
&gt; запустить", ... То есть все , что касается базовых навыков обращения с ОС
&gt; linux. Эти вопросы будут закрывать сразу. Если у вас подобные вопросы
&gt; возникают, рекомендую не использовать данный софт или искать помощь где-то в
&gt; другом месте. То же самое могу сказать тем, кто хочет нажать 1 кнопку, чтобы
&gt; все заработало, и совсем не хочет читать и изучать. Увы, такое не подвезли и
&gt; не подвезут. Ищите другие более простые методы обхода. Этот метод **не для
&gt; рядового пользователя**.


## Вступление
Специально для тех, кто хочет побыстрее начать, но не хочет слишком углубляться
в простыню [readme.md](readme.md).

Обход DPI является хакерской методикой. Под этим словом понимается метод,
которому сопротивляется окружающая среда, которому автоматически не
гарантирована работоспособность в любых условиях и на любых ресурсах, требуется
</code></pre>



  This file has been truncated. <a href="https://github.com/bol-van/zapret/blob/master/docs/quick_start.md" target="_blank" rel="noopener">show original</a>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-11-30T18:54:14.026Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Если есть место под бинарник tpws - a это ~132КБ для версии 69.3 (+ с десяток КБ на iptables-mod-extra и конфиги), то по инструкции “<a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BD%D0%B0-openwrt-%D0%B2-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5-%D0%BE%D1%81%D1%82%D1%80%D0%BE%D0%B9-%D0%BD%D0%B5%D1%85%D0%B2%D0%B0%D1%82%D0%BA%D0%B8-%D0%BC%D0%B5%D1%81%D1%82%D0%B0-%D0%BD%D0%B0-%D0%B4%D0%B8%D1%81%D0%BA%D0%B5" rel="noopener nofollow ugc">Установка на openwrt в режиме острой нехватки места на диске</a>”.<br>
Но в wr-741ND 18.06 их скорее всего даже близко не будет (к примеру в “стандартном” TL-WR740N 18.06.9 свободными есть только 84КБ), придётся автоматически подтягивать бинарник каждый раз после перезагрузки с какого нибудь доступного ресурса.<br>
И придётся учиться пользоваться WinSCP и PuTTY (ибо Win way я так понимаю).</p>
<p>Как вариант можно наавитить каких нибудь SNR-CPE-W4N (rev.M) рублей по 300, там хотя бы 8/64, свободными будет пара метров места флэша, можно уже шиковать (в меру конечно же, полный лист в 100K+ записей не нужен никому, в оперативку упрётся).</p></td><td>2024-11-30T19:17:13.875Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>WinSCP - не проблема, уже с ним заливал прошивку, как раз на wr840 с ним и закидывал.<br>
Завтра буду пробовать, постараюсь написать итоги, вдруг кому полезно будет, если получится.</p></td><td>2024-11-30T20:40:20.179Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="Lisandr" data-post="3543" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/a183cd/48.png" class="avatar"> Lisandr:</div>
<blockquote>
<p>Asus rt-n300 b1</p>
</blockquote>
</aside>
<p>На этот, если не ошибаюсь, падаван накатывался. Недавно в форке padavan-ng прикрутили nfqws.</p></td><td>2024-12-01T05:05:38.476Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>С флэшем 8МБ (и 23.05 соответственно) и так еще можно:</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/remittor/zapret-openwrt">
  <header class="source">

      <a href="https://github.com/remittor/zapret-openwrt" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="zapret-обсуждение-726/d6392dcc781aaa10c198fde2faa692c605e5470e_2_690x344.png" class="thumbnail" data-dominant-color="F4F3EF">

  <h3><a href="https://github.com/remittor/zapret-openwrt" target="_blank" rel="noopener nofollow ugc">GitHub - remittor/zapret-openwrt: OpenWrt packages of...</a></h3>

    <p><span class="github-repo-description">OpenWrt packages of https://github.com/bol-van/zapret</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-01T08:04:05.590Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Добрый день. Спасибо всем. . Я всё-таки заставил работать Запрет. Фиксированным ttl . Пришлось переустановить entware И все пакеты которые не . Хватали . И нормально . Установить запрет . Как положено</p></td><td>2024-12-01T09:10:33.510Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>У меня только один вопрос. Как отменить это. Выключит это действие iptables -t mangle -A POSTROUTING -j TTL --ttl-set 65</p></td><td>2024-12-01T09:18:08.725Z</td></tr><tr><td>bolvan</td><td><p>-D или ребутнуть<br>
убрать из автостарта разумеется</p></td><td>2024-12-01T09:57:12.959Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>сомневаюсь, что на 32/8 залезет последние openwrt</p></td><td>2024-12-01T15:57:22.994Z</td></tr><tr><td>anon9001(anon)</td><td><p>Обычный --dpi-desync=fake разблокировывает <a href="http://viber.com" rel="noopener nofollow ugc">viber.com</a>, а вот мясо вроде <a href="http://clients-content.viber.com" rel="noopener nofollow ugc">clients-content.viber.com</a> уже серьезнее блокируется, простой фейк не помогает.</p>
<p>Оно и понятно, сама морда не используется в call’ах самого приложения</p></td><td>2024-12-01T16:16:14.874Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет! Провайдер Мультистрим, думаю о таком и не слышали, он наш местный.<br>
Поставил запрет самую актуальную версию, по итогу все работает, но именно ютуб показывает 10 секунд и потом просто останавливается и грузит, соответственно смотреть невозможно.<br>
Подскажите куда копать? <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p></td><td>2024-12-01T16:17:26.854Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>Опробую, но только когда смогу роутер у родителей забрать, он у них сейчас стоит основным. Спасибо!</p></td><td>2024-12-01T16:29:05.556Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>дорвался я тут до ipv6 и обескуражен - чем он <em>более-лучше</em> для dpi и прочих чебурнил?</p>
<p>а ведь были времена когда его советовали как неконтролируемый…</p>
<p>а сейчас в v6 тупо не работает то что работает в ip4</p>
<p>стратегии резко усложнились (для 80) а <strong>для tls1.2</strong> их тупо вообще не находит blockchek</p>
<p>спасает лишь tls1.3 и то что в отличие от ip4 сайтов не встречал чтоб ipv6+1.2 без 1.3</p></td><td>2024-12-02T00:07:22.801Z</td></tr><tr><td>abc555</td><td><p>Некоторые провы включают самостоятельно ютуб чтоб не терять клиентуру, но делают это через одно место, чтоб проверить включили или нет, надо в браузере включить quic, если не работает, то на примере Firefox включить ещё sni в настройках приватность и защита в самом низу на повышенную защиту на Cloudflare по умолчанию. Провы когда включают сами ютуб, то потом запрет не помогает, по началу даже не поймёшь что происходит, поэтому пробуйте варианты.<br>
Прикол в том, что когда включить sni то половина сайтов перестаёт работать, у меня так на одном прове, постоянно включаешь и выключаешь sni, спрашивается, вот нафига было это делать, работало нормально с запретом, нет бл*, включили ютуб. Нет чтоб пригласить спеца, дать ему денег, а то самостоятельно делают, не понимая что.<br>
И на tls 1.2 вот на нём ютуб не работает и мне пока не удалось никак его починить, работает без обхода только на quic и ещё и с sni в придачу, на телефоне включается и работает, на компе целый процесс включения</p></td><td>2024-12-02T11:02:36.810Z</td></tr><tr><td>easyone11</td><td><h3><a name="p-70350-zapret-v694-1" class="anchor" href="#p-70350-zapret-v694-1"></a>zapret v69.4</h3>
<ol>
<li>nfqws: обрамление фейками обоих сегментов в fakedsplit/fakeddisorder</li>
<li>nfqws: задание содержимого фейков в fakedsplit/fakeddisorder через --dpi-desync-fakedsplit-pattern</li>
<li>багфиксы</li>
</ol></td><td>2024-12-02T19:07:44.928Z</td></tr><tr><td>easyone11</td><td><p>Теперь поддерживает и как то можно собрать curl по проще?<br>
<a href="https://openwrt.org/releases/24.10/notes-24.10.0-rc1" class="onebox" target="_blank" rel="noopener">https://openwrt.org/releases/24.10/notes-24.10.0-rc1</a></p>
<h4><a name="p-70366-general-changes-1" class="anchor" href="#p-70366-general-changes-1"></a>General changes</h4>
<ul>
<li>
<p>TLS 1.3 support in default images</p>
<ul>
<li>mbedtls was updated to version 3.6 which includes support for TLS 1.3</li>
</ul>
</li>
<li>
<p>Activate POSIX Access Control Lists and file system security attributes for all file systems on devices with big flash sizes. This is needed by docker nowadays.</p>
</li>
<li>
<p>Activate kernel support for Multipath TCP on devices with big flash sizes.</p>
</li>
</ul></td><td>2024-12-03T05:03:34.634Z</td></tr><tr><td>bolvan</td><td><p>можно проверить на снапшоте в виртуалке</p></td><td>2024-12-03T06:30:43.215Z</td></tr><tr><td>exz</td><td><p>Ого!   --dpi-desync-fakedsplit-pattern творит чудеса!</p></td><td>2024-12-03T07:06:22.953Z</td></tr><tr><td>bolvan</td><td><p>Без паттерна не творит ?<br>
Тут на теле2 проверял нифига fakedsplit не работал, пока оба сегмента не облепил фейками. fakeddisorder работал</p></td><td>2024-12-03T07:28:53.926Z</td></tr><tr><td>i-no(...)</td><td><p>Как оказалось, этот чудотворный <code>fakedsplit</code> как-то очень ускорил открытие клаудфлерных ECH сайтов даже без кастомного паттерна.</p></td><td>2024-12-03T08:56:00.137Z</td></tr><tr><td>abc555</td><td><p>То есть можно заменить dpi-desync-fake-tls к примеру на dpi-desync-fakedsplit-pattern=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin ?<br>
Я просто не понял что это за новый параметр<br>
Покажите на примере --dpi-desync=fake,multisplit --dpi-desync-fakedsplit-pattern= ??? как должно быть или только влияет на --dpi-desync=fake,fakedsplit этот новый параметр ?<br>
А то вчера поставил 69.4 версию, но ещё не разбирался, просто поставил и старую стратегию оставил</p></td><td>2024-12-03T09:09:07.941Z</td></tr><tr><td>bolvan</td><td><p>паттерн относится только к факед сплиту и факед дисордеру<br>
если их нет ни на что не влияет<br>
факе тлс относится только к факе<br>
не влияет если факе нет</p>
<p>причем паттерн режется параллельно с оригиналом и отсылаются куски с аналогичным смещением</p></td><td>2024-12-03T09:27:02.395Z</td></tr><tr><td>abc555</td><td><p>А блокчек я смотрю вы уже обновили, то есть в него уже заложены новые варианты ? Попробую поюзать вечером, а та на старой стратегии как то притормаживает, с задержкой открываются страницы в последнее время<br>
А ютуб на одном прове на tls 1.2 я до сих пор не смог завести, работает только на tls 1.3, возможно в этот раз мне повезёт, не знаю ещё )<br>
У меня 4 разных прова, есть на чём проводить тестирование, на 3х вроде всё нормально, а вот на одном они там воду мутят постоянно )</p></td><td>2024-12-03T09:33:41.702Z</td></tr><tr><td>bolvan</td><td><p>1.2  можно завести только фейком или вссайз<br>
в чекере не менялось ничего</p></td><td>2024-12-03T09:44:17.897Z</td></tr><tr><td>tinker</td><td><p>Перед запуском блокчека обязательно отключать запрет?</p></td><td>2024-12-03T10:14:23.479Z</td></tr><tr><td>bolvan</td><td><p>обязательно</p></td><td>2024-12-03T10:17:22.702Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>На билайне факедсплит без паттерна не заводится, если в паттерн кормить набор рандомных байт, то тоже не заводится. Если в паттерн скормить фейк, то заводится</p></td><td>2024-12-03T10:22:43.686Z</td></tr><tr><td>uwu(uwu)</td><td><p>del<br>
не работает так<br>
p,s проверил, fakedsplit-pattern hex от client hello работает в контексте обычных заблокированных сайтов, например ntc, но нужно все равно добавлять fake+fakedsplit<br>
в случае ютуба - не работает. (правда я особо не тестил)</p></td><td>2024-12-03T10:30:35.940Z</td></tr><tr><td>abc555</td><td><p>В dpi-desync-fakedsplit-pattern какой вы туда фейк гугла поставили или пофиг какой ? Вечером хочу провести эксперимент, уже наверно месяц не могу никак одного прова победить</p></td><td>2024-12-03T10:36:15.622Z</td></tr><tr><td>bolvan</td><td><p>попробуйте 0x1603010203</p>
<p>добавление фейк тлс хело в паттерн<br>
создает ситуацию, когда замешаны 2 разных тлс в соседних сегментах и сложно сказать какой настоящий</p></td><td>2024-12-03T10:45:32.120Z</td></tr><tr><td>wigeance(Wigeance)</td><td><div class="md-table">
<table>
<thead>
<tr>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
<th>Column 4</th>
</tr>
</thead>
<tbody>
<tr>
<td>AS8402 Beeline tls1.3 test</td>
<td><a href="http://rr3---sn-n8v7kn7k.googlevideo.com">rr3---sn-n8v7kn7k.googlevideo.com</a></td>
<td><a href="http://instagram.com">instagram.com</a></td>
<td><a href="http://windscribe.net">windscribe.net</a></td>
</tr>
<tr>
<td>random hex data</td>
<td>fail</td>
<td>ok</td>
<td>fail</td>
</tr>
<tr>
<td>0x1603010203</td>
<td>fail</td>
<td>ok</td>
<td>fail (50/50)</td>
</tr>
<tr>
<td>tls_clienthello_with_erased_sni</td>
<td>ok</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>tls_clienthello_with_valid_googleservices_sni</td>
<td>ok</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>0x00 (Default)</td>
<td>fail</td>
<td>ok</td>
<td>fail (50/50)</td>
</tr>
</tbody>
</table>
</div><p>Как-то так у меня вышло, с 0x1603010203 <a href="https://imgur.com/a/k1sLbWe">замирает курл на гуглвидео</a></p></td><td>2024-12-03T11:17:26.377Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
есть очередная глупая идея для защиты от дураков<br>
возможно ли при запуске zapret проверять строчки конфига на синтаксические ошибки?<br>
например:<br>
кол-во <code>--</code> в <code>-dpi-desync-fakedsplit-pattern</code><br>
лишние пробелы либо их отсутствие <code>--dpi-desync=fake --dpi-desync-fooling=badseq--dpi-desync=syndata</code> <code>--dpi-desync=fake --dpi-desync-fooling=badseq ___ --dpi-desync=syndata</code><br>
ошибки в напасании каких то параметров <code>&lt;HOStLIST&gt;</code></p>
<p>вариантов наверно слишком много как можно ошибиться, может быть сделать какой то минимум и то что не сложно, но в целом наверно я передал суть</p></td><td>2024-12-03T11:34:40.544Z</td></tr><tr><td>bolvan</td><td><p>есть подозрение, что на части ресурсов<br>
включают схему рубилки по “я не понял что это было”.  проходит обмен начальный, он тему не сечет и рубит</p></td><td>2024-12-03T11:55:19.762Z</td></tr><tr><td>bolvan</td><td><p>там слишком много вариантов ошибки<br>
дублирующий алгоритм на шелле - не вариант<br>
только если сделать параметр --dry-run  и анализировать экзит коде<br>
идея неплохая , может сделаю</p></td><td>2024-12-03T12:02:38.750Z</td></tr><tr><td>abc555</td><td><p>Что то я упустил, заметил что госуслуги не работают )) А есть куда добавить домен в исключение или только по ip это можно делать ?<br>
Понижение ttl результата не дало, останавливаешь запрет начинает работать.<br>
Я просто не использую список доменов, срабатывает на все сайты, ограничил через ttl и если бы мне не сказали что этот сайт не работает, то и не узнал бы )) Но как сказали пофиг что он не работает, главное что всё остальное работает, но хотелось бы его починить )</p></td><td>2024-12-03T14:04:01.747Z</td></tr><tr><td>uwu(uwu)</td><td><pre><code class="lang-auto">--hostlist-exclude=&lt;filename&gt;	
</code></pre>
<p>?</p>
<p>в идеале бы вообще все гос сайты закинуть в исключения (как это делают владельцы vpn)<br>
но удобнее конечно использовать обычные хостлисты для заблокированных сайтов</p></td><td>2024-12-03T14:15:17.115Z</td></tr><tr><td>BubaMuba(BubaMuba)</td><td><p>В файл /opt/zapret/ipset/zapret-hosts-user-exclude.txt напишите<br>
<a href="http://gosuslugi.ru" class="onebox" target="_blank" rel="noopener nofollow ugc">gosuslugi.ru</a></p></td><td>2024-12-03T14:17:48.584Z</td></tr><tr><td>abc555</td><td><p>Пробовал, не работает.<br>
Так же добавил параметр в стратегию --hostlist-exclude-domains= и создал файл /opt/zapret/ipset/zapret-hosts-user-123.txt и вообще запрет перестал работать.<br>
Ещё раз попробую в zapret-hosts-user-exclude.txt и добавлю путь в --hostlist-exclude-domains=</p></td><td>2024-12-03T14:26:20.529Z</td></tr><tr><td>abc555</td><td><p>Не, не работает, добавил даже домен сюда /opt/zapret/ipset/zapret-hosts-user-exclude.txt.default и пох, если добавляю параметр --hostlist-exclude-domains, то эта стратегия просто перестаёт работать, так как у меня нет списка хост<br>
У меня просто стратегия без списка заблокированных доменов, ограничил её ttl и она срабатывает на всё и вроде всё и работает и работает нормально, вот только этот сайт почему то не хочет, наверно какой то особенный ))</p></td><td>2024-12-03T14:38:22.274Z</td></tr><tr><td>abc555</td><td><p>Было бы классно если прикрутить hostlist-exclude-domains по умолчанию в /opt/zapret/ipset/ и добавлять туда домены, без параметра  --hostlist-exclude-domains, чтоб не добавлять его в стратегию, а просто добавил в  /opt/zapret/ipset/hostlist-exclude-domains нужный домен и чтоб на него реагировала по умолчанию или даже с параметром --hostlist-exclude-domains, но если нет списка хостлист, чтоб продолжала работать</p></td><td>2024-12-03T14:45:31.783Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="abc555" data-post="3583" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Было бы классно если прикрутить hostlist-exclude-domains по умолчанию в /opt/zapret/ipset/ и добавлять туда домены, без параметра --hostlist-exclude-domains</p>
</blockquote>
</aside>
<p>у меня так и работает, да я думаю и у всех выше написавших тоже так работает<br>
только файл <a href="https://github.com/bol-van/zapret/blob/master/ipset/zapret-hosts-user-exclude.txt.default">zapret-hosts-user-exclude.txt</a></p></td><td>2024-12-03T14:46:48.718Z</td></tr><tr><td>abc555</td><td><p>Этот файл на ip настраивается а не на домены, сам ip я ещё не пробовал туда добавлять, поэтому у вас не правильно настроено</p></td><td>2024-12-03T14:49:01.714Z</td></tr><tr><td>easyone11</td><td><p>попробуй ридмишку читать, вроде бывалый на форуме.</p>
<p><strong>СИСТЕМА ИСКЛЮЧЕНИЯ IP</strong>. Все скрипты ресолвят файл <code>zapret-hosts-user-exclude.txt</code>, создавая <code>zapret-ip-exclude.txt</code> и <code>zapret-ip-exclude6.txt</code>. Они загоняются в ipset-ы nozapret и nozapret6. Все правила, создаваемые init скриптами, создаются с учетом этих ipset. Помещенные в них IP не участвуют в процессе. <code>zapret-hosts-user-exclude.txt</code> <strong>может содержать домены</strong>, ipv4 и ipv6 адреса или подсети.</p></td><td>2024-12-03T14:52:26.898Z</td></tr><tr><td>uwu(uwu)</td><td><p>а почему мой вариант проигнорил?)<br>
я даже специально для тебя проверил у себя (на винде правда, но на роутере должно быть также), все работает после добавления ссылки на файл</p>
<p>кстати госуслуги не ломаются от seqovl в том числе с pattern</p></td><td>2024-12-03T14:53:13.890Z</td></tr><tr><td>abc555</td><td><p>С pattern я ещё не пробовал, но добавил диапазон ip в /opt/zapret/ipset/zapret-hosts-user-exclude.txt и не помогло, правда параметр --hostlist-exclude-domains  в стратегию не добавлял, так как перестаёт работать полностью.<br>
Попробую надыбать новую стратегию сегодня, но у меня 4 разных прова и у всех всё по разному работает )<br>
и я так понял что zapret-hosts-user-exclude.txt не будет работать если не добавить параметр --hostlist-exclude-domains в стратегию, это если смотреть на примере этих услуг</p></td><td>2024-12-03T14:57:49.177Z</td></tr><tr><td>abc555</td><td><p>О !! Спасибо помогло, я просто провтыкал )<br>
Добавил параметр в стратегию --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt<br>
и в сам файл zapret-hosts-user-exclude.txt добавил домен и заработала</p></td><td>2024-12-03T15:12:49.759Z</td></tr><tr><td>bolvan</td><td><p>Чтобы завести вариант только exclude  хостлиста, надо выбрать MODE_FILTER=hostlist, отказаться от скачивания листа (или закоментировать GETLIST в конфиге), вычистить скачиваемые листы из ipset через clear_lists.sh, сделать ipset/zapret-hosts-user.txt пустым и вносить записи в ipset/zapret-hosts-user-exclude.txt</p></td><td>2024-12-03T15:47:05.565Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="3589" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Добавил параметр в стратегию --hostlist-exclude=/opt/zapret/ipset/zapret-hosts-user-exclude.txt</p>
</blockquote>
</aside>
<p>Это плохой вариант, так не стоит делать</p></td><td>2024-12-03T15:49:09.062Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="uwu" data-post="3579" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>в идеале бы вообще все гос сайты закинуть в исключения</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/bolvan">@bolvan</a> Может и правда дефолтный лист какой-то комплектовать на будущее.</p>
<details>
<summary>
Хотя бы федерального масштаба, в регионах там отсебятина какая-то может быть</summary>
<pre><code class="lang-auto">gosuslugi.ru
gov.ru
nalog.ru
spb.ru
mos.ru
ya.ru
yandex.ru
yandex.net
vk.ru
vk.com
userapi.com
ok.ru
mycdn.me
okcdn.ru
odkl.ru
openwrt.org
...
</code></pre>
</details>
<p>Сейчас в сислог не пишется, что все ок, мол, столько-то профайлов. Вместо этого красивая вершн стринг и затем одна пустая.</p>
<p>И еще насчет <code>--dry-run</code> <code>(validate)</code><br>
Есть ли смысл в примерно такой конструкции:<br>
<code>nfqws validate [@]/tmp/zapret/test/nfqws.conf</code><br>
чтобы провалидировалось содержимое конфига.</p>
<p><img src="https://ntc.party/images/emoji/twitter/exclamation.png?v=12" title=":exclamation:" class="emoji" alt=":exclamation:" loading="lazy" width="20" height="20"> Еще одна мыслишка насчет стратегий без хостлистов. Возможно, что это плохая практика еще и потому, что так вы палите свои обходы и помогаете автоматам с той стороны собирать статистически значимые данные для тренировки своей регуляторики.</p></td><td>2024-12-03T16:10:00.796Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="i-no" data-post="3592" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Сейчас в сислог не пишется, что все ок, мол, столько-то профайлов. Вместо этого красивая вершн стринг и затем одна пустая.</p>
</blockquote>
</aside>
<details>
<summary>
у меня норм</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/fc777c2a8dff26db9538e972fb40262d56f1e1f9.png" data-download-href="https://ntc.party/uploads/default/fc777c2a8dff26db9538e972fb40262d56f1e1f9" title="image"><img src="zapret-обсуждение-726/fc777c2a8dff26db9538e972fb40262d56f1e1f9.png" alt="image" data-base62-sha1="A1qjIx9SgFx7tfvAN1H4X5uNZTX" width="690" height="105" data-dominant-color="E8E8E8"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">847×130 3.74 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-12-03T18:01:01.278Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3577" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>только если сделать параметр --dry-run и анализировать экзит коде<br>
идея неплохая , может сделаю</p>
</blockquote>
</aside>
<p>а можно для далёких в 2ух словах объяснить как это работает?<br>
почитал что это так скажем самопроверка кода, но не понятно а как узнать результат этой самопроверки если проблем.<br>
поэкспериментировал, вижу что нарушения части кода теперь не приводит к обвалу всего запрета, что то еще есть полезное для анализа проблем с ним?</p></td><td>2024-12-03T18:02:37.951Z</td></tr><tr><td>i-no(...)</td><td><p>А если глянуть в  <code>ps ww|grep nfqws</code><br>
то с как настроенным логированием запущено?</p></td><td>2024-12-03T18:10:00.558Z</td></tr><tr><td>easyone11</td><td><p>root@RT-AX59U:~# ps ww|grep nfqws<br>
7650 daemon     648 S    /opt/zapret/nfq/nfqws --qnum=200 --user=daemon --dpi-desync-fwmark=0x40000000 --filter-tcp=80,443 --debug=syslog --debug=syslog --dpi-desync=fake mul…</p></td><td>2024-12-03T18:18:18.431Z</td></tr><tr><td>i-no(...)</td><td><p>Ясно, спасибо. Так-то, конечно, все будет в логе.</p>
<div class="spoiler">
<p>Примечательно, что <code>--debug</code> дважды указан, и не самым первым. Хотя это не должно вызывать никаких проблем.</p>
</div></td><td>2024-12-03T18:20:31.263Z</td></tr><tr><td>easyone11</td><td><p>а как надо в конфиге указать чтобы была проблема как у тебя?<br>
мб 2 раза потому что 80,443? не разбираюсь</p></td><td>2024-12-03T18:22:19.221Z</td></tr><tr><td>i-no(...)</td><td><p>Ненене, это даже не проблема. Ничего не сломается. Просто на, кажется, до 69.2 включительно было так, что если лог не настраивать спецом, то когда все ок пишется нечто такое<br>
<code>Mon Dec  2 19:19:08 2024 daemon.info nfqws[23064]: we have 9 user defined desync profile(s) and default low priority profile 0</code></p>
<p>Чтобы было как у меня можно попробовать убрать <code>--debug=syslog</code></p>
<p>Как я сам себя только что понял, <img src="https://ntc.party/images/emoji/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"> мне не хотелось заспамливать сислог дебагом, сислог же транкейтится. Дебаг нужен не всегда, а в основном при рестарте достаточно было той строки, которая кратко докладывает обстановку. Знаю, что дебаг можно в отдельный файл, но тогда он же без временнЫх отметок?</p></td><td>2024-12-03T18:26:13.832Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="i-no" data-post="3599" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Знаю, что дебаг можно в отдельный файл, но тогда он же без временнЫх отметок?</p>
</blockquote>
</aside>
<p>да и без nfqws[****]</p></td><td>2024-12-03T18:42:26.418Z</td></tr><tr><td>abc555</td><td><p>Параметр  --hostlist-exclude из стратегии удалил и работает, возможно надо было просто добавить домен в /opt/zapret/ipset/zapret-hosts-user-exclude.txt и перезагрузить роутер и у меня так и стоит MODE_FILTER=hostlist, файл zapret-hosts-user.txt у меня пустой, для ютуба я создал отдельный лист.<br>
Если бы вы не написали, так бы наверно и использовал параметр  --hostlist-exclude в стратегии ))</p></td><td>2024-12-04T10:59:20.129Z</td></tr><tr><td>abc555</td><td><p>Может есть у кого идеи, один сумасшедший пров включил ютуб только через QUIC, а за протокол tls 1.2 он забыл и жесть, мне чтоб включить ютуб, нужно зайти в браузер, включить QUIC, затем включить ecn и только тогда он начинает хреново работать, затем нужно всё это выключить чтоб нормально работали остальные сайты и так постоянно, нервов уже не хватает и мне достаточно просто включить игровой сервер у себя на компе и начнётся дос атака на мой сервер, в итоге ляжет сам пров, может тогда он поумнеет, это называется выключить прова чужими руками и я вроде как и не приделах и не предъявишь мне даже, та и никто нехрена не поймёт что происходит. Включил он ютуб чтоб клиентов не потерять, включу я сервер, потеряет тогда всех своих клинтов ))<br>
А так пинг проходит на гугл видео но завести видео через tls 1.2 не удаётся, может есть какие не будь мысли у кого то, дать прову ещё один шанс, до того как станет ему очень весело )<br>
Я им звонил. базарил с ними, они мычат как всегда, там отморозки одни работают</p></td><td>2024-12-04T11:17:27.481Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>Может есть у кого идеи</p>
</blockquote>
</aside>
<p>Исходя из описанного, нужно же решение вообще, а не именно настройка nfqws. Значит, отдельный портабл браузер с настройками под ютуб, или отдельный профайл браузера для YT.<br>
Тем временем можно спокойно подумать, подобрать что-нибудь как-нибудь.</p>
<details>
<summary>
Пока с nfqws работает вот так:</summary>
<p><code>--filter-udp=443 --hostlist=/etc/nfqws/youtube.list --hostlist-domains=googlevideo.com --dpi-desync-fake-quic=/etc/nfqws/quic.bin</code><br>
<a class="attachment" href="zapret-обсуждение-726/vuyeKDepy9MIgyBqRIM8sGhwJIM.bin">quic.bin</a> (144 байта)<br>
<a class="attachment" href="zapret-обсуждение-726/2LUtVfld4Iwo6XECAaUzYlnfcAl.list">youtube.list</a> (338 байтов)</p>
<p>Можно превентивно подкрутить повторов и др.:<br>
<code>--filter-udp=443 --hostlist=/etc/nfqws/youtube.list --hostlist-domains=googlevideo.com --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-any-protocol=1 --dpi-desync-cutoff=n3 --dpi-desync-fake-quic=/etc/nfqws/quic.bin</code></p>
</details></td><td>2024-12-04T14:10:20.653Z</td></tr><tr><td>abc555</td><td><p>Та можно конечно сделать отдельный профиль для ютуба, отдельный ярлык, можно и рен тв смотреть и верить всему что там говорят, а если я не хочу, почему я должен подстраиваться, я на это не подписывался.<br>
И никакая стратегия не прокатывает, блокчеком я юзал всевозможные варианты.<br>
Я просто подожду когда моё терпение закончится и осталось уже не долго</p></td><td>2024-12-04T14:23:48.130Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>И никакая стратегия не прокатывает, блокчеком я юзал всевозможные варианты</p>
</blockquote>
<p>Вероятнее, что не все возможные варианты проюзаны. Значит, надо импровизировать! Блокчек не всесилен. Я не так уж часто его использую. Кстати, верно рекомендуется отключать zapret во время тестирования, но бывают случаи, когда надо оставить включенным, например, только для ECH на клаудфлере, изолированно, и т.п. чтобы зависимости не блочились.</p></td><td>2024-12-04T14:39:31.353Z</td></tr><tr><td>i-no(...)</td><td><p>Есть еще одна вещь, которая, возможно, кое где поможет проковыряться. Склейка нескольких пейлоадов в один, и подсовывания их через nfqws в трафик. Предположу, что есть смысл попробовать пробить так, когда коробки в несколько эшелонов. Склейка обычная, в винде через <code>copy /b</code><br>
Последовательность в склейке может иметь, а может и не иметь значение. Надо опираться на имеющийся  накопленный опыт.</p></td><td>2024-12-04T15:04:49.408Z</td></tr><tr><td>abc555</td><td><p>Вышла новая версия wrt 24.10 может кто то захочет обновится, я ещё сам её не юзал, приду поставлю.<br>
У кого обычная динамика или статика, можно смело удалить из сборки эти 2 пакета ppp ppp-mod-pppoe, освободите немного места у кого его мало.<br>
Если у вас pppoe подключение, то удалять их не надо )<br>
Минимальные пакеты для запрета установить надо эти, сразу в сборку, так же с экономит место<br>
unzip kmod-nfnetlink-queue kmod-nft-queue gzip curl<br>
Это для 8ми мгб с памятью роутеров<br>
и место остаётся ещё для doh и эдблок, с запретом впритык становится</p></td><td>2024-12-04T15:36:44.221Z</td></tr><tr><td>abc555</td><td><p>Подскажите, а можно из запрета удалить при установке файлы из папки fake ?<br>
Я всё равно ими не пользуюсь, а это с экономит 100 кб или вообще можно всё удалить из папки files, вы говорили, но я так и не понял можно или нет, тогда 132 кб с экономит, это я на 69.4 посмотрел и будущее что ещё можно удалить если я пользуюсь только nfqws</p></td><td>2024-12-04T15:57:27.349Z</td></tr><tr><td>bolvan</td><td><p>unzip и gzip лишние</p></td><td>2024-12-04T16:02:51.565Z</td></tr><tr><td>bolvan</td><td><p>fake можно удалить если не надо</p></td><td>2024-12-04T16:03:50.068Z</td></tr><tr><td>abc555</td><td><p>без unzip и gzip я не могу архив открыть, а папку как перетащить я не знаю, стандартного ничего вроде нет</p></td><td>2024-12-04T16:04:33.883Z</td></tr><tr><td>bolvan</td><td><p>gzip есть в busybox</p>
<p>curl -Lo - URL EMBEDED |  tar -zxvf -</p></td><td>2024-12-04T16:06:05.203Z</td></tr><tr><td>abc555</td><td><p>команды нет чтоб скопировать папку с компа в темп на wrt ? я искал и ничего не нашел<br>
я по старинке через hfs закидываю, но никак, только архивом можно, поэтому пришлось ставить эти 2 пакета, может есть какой то другой способ, но я не вкурсе и юсб нет</p></td><td>2024-12-04T16:07:24.732Z</td></tr><tr><td>bolvan</td><td><p>курлом прямо с рутера в стдоут</p></td><td>2024-12-04T16:10:35.485Z</td></tr><tr><td>abc555</td><td><p>так курл не умеет архивы раскрывать, а как папку, каким образом, прошивка стандартная, без лишнего, кроме курла ничего нет, то есть с гитхаба прям указать на папку ?<br>
А как, какая команда, покажите на примере</p></td><td>2024-12-04T16:13:04.288Z</td></tr><tr><td>bolvan</td><td><p>я же привел пример<br>
курл качает в стдоут<br>
пайпом направляется в стдин тара</p></td><td>2024-12-04T16:14:58.795Z</td></tr><tr><td>i-no(...)</td><td><p><a href="https://ntc.party/t//726/2326">Неткат</a>. Есть в опенврт и есть в cygwin в вин бундле</p></td><td>2024-12-04T16:15:36.601Z</td></tr><tr><td>abc555</td><td><p>Но вот курл качает <a href="https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5.zip</a> он же zip качает, а дальше, скачал я его и чем я его открою балалайкой ?</p></td><td>2024-12-04T16:19:03.672Z</td></tr><tr><td>i-no(...)</td><td><p>Перепаковать балалайкой в tar / gzip под виндой, с помощью 7-zip. Итп.</p></td><td>2024-12-04T16:20:33.447Z</td></tr><tr><td>bolvan</td><td><p>нафига зип<br>
там есть ембеддед тар гз</p></td><td>2024-12-04T16:21:54.804Z</td></tr><tr><td>abc555</td><td><p>Пробовал и нифига без unzip и gzip никак я смог распаковать</p></td><td>2024-12-04T16:22:15.177Z</td></tr><tr><td>i-no(...)</td><td><p>Ну, обсуждали же. Можно по scp через winscp / far manager / total commander</p>
<p>Это, на мой взгляд, один из <strong>простейших</strong> способов для виндузятника.</p></td><td>2024-12-04T16:25:03.643Z</td></tr><tr><td>abc555</td><td><p>Вы хотите сказать что можно перепаковать в тар ? Ну я пробовал и без этих пакетов никак, может в другой какой нить формат можно за архивировать, но я не знаю в какой и не знаю команды как потом через PuTTY скопировать и разархивировать<br>
Просто эти 2 пакета меньше всех весят, поэтому я их и поставил</p></td><td>2024-12-04T16:25:21.807Z</td></tr><tr><td>i-no(...)</td><td><p>Тару ничего особенного не надо же, он просто есть:</p>
<pre><code class="lang-auto">root@OpenWrt:~# which tar
/bin/tar
root@OpenWrt:~# ldd /bin/tar
        /lib/ld-musl-mipsel-sf.so.1 (0x77e3b000)
        libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x77e17000)
        libc.so =&gt; /lib/ld-musl-mipsel-sf.so.1 (0x77e3b000)
root@OpenWrt:~#
</code></pre></td><td>2024-12-04T16:28:22.153Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>накуя, если можно просто:<br>
<code> curl -Lo - https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz | tar -zxvf -</code></p></td><td>2024-12-04T16:28:43.682Z</td></tr><tr><td>bolvan</td><td><p>в релизах есть готовый минимальный тар для опенврт</p></td><td>2024-12-04T16:29:07.202Z</td></tr><tr><td>abc555</td><td><p>Пакет tar весит много, больше чем унзип<br>
Я долго парился, выбирал пакеты и это что я смог нарыть самые минимальные</p></td><td>2024-12-04T16:30:03.294Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>zapret-v69.5-openwrt-embedded.tar.gz    <strong>2.58 MB</strong></p>
</blockquote>
<p>Предусмотрительнейший разработчик <strong>всё</strong> предусмотрел.</p></td><td>2024-12-04T16:32:19.033Z</td></tr><tr><td>abc555</td><td><p>И что ? У меня нет пакета тар, его устанавливать надо дополнительно и тогда только, а весит он дох*я, поэтому я унзип поставил, он в 2 раза меньше весит</p></td><td>2024-12-04T16:33:56.524Z</td></tr><tr><td>bolvan</td><td><p>зачем столько слов если можно попробовать</p></td><td>2024-12-04T16:35:23.007Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>а <code>tar --help</code> что говорит?</p></td><td>2024-12-04T16:35:56.531Z</td></tr><tr><td>abc555</td><td><p>Так я пробовал, надо ставить тар, которого нет )</p></td><td>2024-12-04T16:36:12.111Z</td></tr><tr><td>bolvan</td><td><p>он в бизибоксе по умолчанию</p></td><td>2024-12-04T16:36:43.326Z</td></tr><tr><td>abc555</td><td><p>По умолчанию нету, сама прошивка в .bin, это если только сжать в .bin и возможно тогда, но я не знаю как<br>
Возможно для роутеров с 16 мгб памяти встроенный тар, я не знаю, но там где 8 мгб его нету<br>
отдельно установить можно, есть такой пакет, но весит он много</p></td><td>2024-12-04T16:39:12.814Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>Значит, на пользу физике пойдёт одна планета.</p></td><td>2024-12-04T16:40:08.154Z</td></tr><tr><td>bolvan</td><td><p>busybox tar<br>
пишет что нет такого апплета ?</p></td><td>2024-12-04T16:42:47.821Z</td></tr><tr><td>abc555</td><td><p>С час проверю</p></td><td>2024-12-04T16:43:11.384Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> а нет ли в скрипте дискорда ошибки <a href="https://github.com/bol-van/zapret/blob/master/init.d/sysv/custom.d.examples/50-discord" class="inline-onebox">zapret/init.d/sysv/custom.d.examples/50-discord at master · bol-van/zapret · GitHub</a> в частности NFQWS_OPT_DESYNC_DISCORD: стратегия начинается с тремя тире - - -dpi-desync так задумано или все таки должно быть две тире и это просто опечатка?</p></td><td>2024-12-04T16:49:33.276Z</td></tr><tr><td>abc555</td><td><p>Есть просто busybox и весит он 210.05 KiB<br>
есть tar и весит он 163.32 KiB и в сумме почти 400<br>
а unzip и gzip весят в 2 раза меньше, унзип там не помню что то 130 и гзип 30 всего вроде</p></td><td>2024-12-04T16:50:03.293Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>руками набери в строке буквы с помощью кнопок клавиатуры и нажми ентер (тоже на клавиатуре):<br>
<code>busybox tar</code><br>
вывод сюда</p></td><td>2024-12-04T16:52:10.150Z</td></tr><tr><td>bolvan</td><td><p>нет ошибки<br>
это посикс дефолт валуе</p>
<p>${var:-default}</p></td><td>2024-12-04T16:52:18.776Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="MayanKoyote" data-post="3626" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mayankoyote/48/10518_2.png" class="avatar"> MayanKoyote:</div>
<blockquote>
<p>накуя, если можно просто:<br>
<code>curl -Lo -</code></p>
</blockquote>
</aside>
<p>Для этого даже wget достаточно, возможно и того что в busybox</p></td><td>2024-12-04T16:52:58.634Z</td></tr><tr><td>i-no(...)</td><td><p>uclient-fetch который? а его может не быть?</p></td><td>2024-12-04T16:53:55.154Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>достаточно, но мы же не ищем лёгких путей!</p></td><td>2024-12-04T16:54:11.656Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
а можно для далёких в 2ух словах объяснить как работает dry-run внедренный?<br>
почитал что это так скажем самопроверка кода, но не понятно, а как узнать результат этой самопроверки если проблема.<br>
поэкспериментировал, вижу что нарушения части кода теперь не приводит к обвалу всего запрета, что то еще есть полезное для анализа проблем с ним?</p></td><td>2024-12-04T16:55:59.948Z</td></tr><tr><td>abc555</td><td><p>BusyBox v1.36.1 (2024-10-29 20:36:11 UTC) multi-call binary.</p>
<p>Usage: tar c|x|t [-zahvokO] [-f TARFILE] [-C DIR] [-T FILE] [-X FILE] [FILE]…</p>
<p>Create, extract, or list files from a tar file</p>
<pre><code>    c       Create
    x       Extract
    t       List
    -f FILE Name of TARFILE ('-' for stdin/out)
    -C DIR  Change to DIR before operation
    -v      Verbose
    -O      Extract to stdout
    -o      Don't restore user:group
    -k      Don't replace existing files
    -z      (De)compress using gzip
    -a      (De)compress based on extension
    -h      Follow symlinks
    -T FILE File with names to include
    -X FILE File with glob patterns to exclude
</code></pre></td><td>2024-12-04T16:57:03.959Z</td></tr><tr><td>i-no(...)</td><td><p>Ну так и в чем проблема-то? Бизибокс новее, чем у меня. Там все должно быть.</p></td><td>2024-12-04T16:57:39.023Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>вот, это называется бузибоксовский тар<br>
далее можешь дерзать далее</p></td><td>2024-12-04T16:58:04.629Z</td></tr><tr><td>bolvan</td><td><p>process exit code 0 в случае успеха<br>
не 0 иначе</p>
<p>работает просто<br>
после проверки параметров вместо запуска выходит</p></td><td>2024-12-04T16:58:22.572Z</td></tr><tr><td>abc555</td><td><p>Каким макаром ?</p></td><td>2024-12-04T16:59:08.828Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>как то так наверное:</p><aside class="quote" data-post="3626" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/mayankoyote/48/10518_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/3626">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    накуя, если можно просто: 
 curl -Lo - https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz | tar -zxvf -
  </blockquote>
</aside>
</td><td>2024-12-04T17:00:15.044Z</td></tr><tr><td>abc555</td><td><p>я так не пробовал, а дальше как команды до ./install_easy.sh<br>
Я так ставлю<br>
wget -O “/tmp/zapret-v69.zip” <a href="https://github.com/bol-van/zapret/releases/download/v69/zapret-v69.zip" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/releases/download/v69/zapret-v69.zip</a><br>
cd /tmp<br>
unzip zapret-v69.zip<br>
cd /tmp/zapret-v69/<br>
./install_easy.sh<br>
Подскажите как, я не силён в этом<br>
Если без доп пакетов, то было бы вообще круто, инфы я ни разу не видел нигде<br>
А линукс я только на роуторе вижу )<br>
Я ввёл  curl -Lo - <a href="https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz</a> | tar -zxvf - и оно даже распаковала куда то )</p></td><td>2024-12-04T17:02:05.724Z</td></tr><tr><td>easyone11</td><td><p>хм, тоже так думал, но когда делал спецом ошибки, не видел чтобы что то особенное писалось<br>
потом еще попробую</p></td><td>2024-12-04T17:03:19.549Z</td></tr><tr><td>bolvan</td><td><p>не все есть ошибка<br>
что-то будет проигнорено<br>
смысл что нет никакой отдельной проверки<br>
есть лишь прерывание перед запуском движка</p></td><td>2024-12-04T17:06:41.644Z</td></tr><tr><td>abc555</td><td><p>curl -Lo - <a href="https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz" rel="noopener nofollow ugc">https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz</a> | tar -zxvf -<br>
Куда оно распаковывает ? В какую директорию ? Или как в темп направить что туда залетала ?<br>
Путь куда распаковалась просто к примеру zapret-v69.5/blockcheck.sh</p></td><td>2024-12-04T17:15:57.437Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3655" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>не все есть ошибка</p>
</blockquote>
</aside>
<p>жалко, хотелось чтобы синтаксические ошибки показывал<br>
пробовал пробел убирать, стирать - в --, reapeat писать а не repeats, это для него всё не ошибка</p></td><td>2024-12-04T17:16:09.434Z</td></tr><tr><td>bolvan</td><td><p>он  валится только если бы свалился при обычном запуске</p></td><td>2024-12-04T17:19:03.964Z</td></tr><tr><td>bolvan</td><td><p>в текущую<br>
надо cd /tmp</p></td><td>2024-12-04T17:19:47.117Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><p>да то же самое:<br>
<code>wget -qO - https://github.com/bol-van/zapret/releases/download/v69.5/zapret-v69.5-openwrt-embedded.tar.gz | tar -C /tmp/ -zxvf -</code><br>
<code>cd /tmp/zapret-v69.5/</code><br>
<code>./install_easy.sh</code></p></td><td>2024-12-04T17:20:29.409Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="abc555" data-post="3653" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>Подскажите как, я не силён в этом<br>
Если без доп пакетов, то было бы вообще круто, инфы я ни разу не видел нигде<br>
А линукс я только на роуторе вижу )</p>
</blockquote>
</aside>
<p>Блин. Да купите роутер с 128MB флешем и поставьте туда OpenWrt с LuCI. Жизнь станет проще!</p></td><td>2024-12-04T17:21:31.768Z</td></tr><tr><td>i-no(...)</td><td><p>Она не станет, чел не освоил базовые вещи. Вот когда освоит, то да.</p>
<p><a class="mention" href="/u/abc555">@abc555</a><br>
<code>find -type d -name zapret*</code><br>
Найдите куда оно скачалось. Надо смотреть, видеть, читать, понимать. По трезвяку лучше всего!</p></td><td>2024-12-04T17:24:12.608Z</td></tr><tr><td>abc555</td><td><p>Спасибо братан !!! Чётко</p></td><td>2024-12-04T17:30:33.445Z</td></tr><tr><td>i-no(...)</td><td><p>А обо что dpi-desync-fooling=<strong>ts</strong> ?</p>
<details>
<summary>
Проект же в 1ую очередь образовательный, поэтому я...</summary>
<p>…из-за своей опечаточки поймал<br>
<code>daemon.err nfqws[6820]: dpi-desync-fooling allowed values: none,md5sig,ts,badseq,badsum,datanoack,hopbyhop,hopbyhop2</code></p>
<p>Полез, грешный я ни разу не программер, в код посмотреть, может хоть какой намёчек уловлю, и да. Доискался до <code>FOOL_TS</code>, timestamps и до <code>if ((fooling &amp; &lt;mark&gt;FOOL_TS&lt;/mark&gt;) || timestamps) t+=10;</code>. Какой дарк мэджик <img src="https://ntc.party/images/emoji/twitter/japanese_ogre.png?v=12" title=":japanese_ogre:" class="emoji" alt=":japanese_ogre:" loading="lazy" width="20" height="20"> получается с таймштампами, если увеличить t скачком на 10? Есть какие-то рекомендации зачем лучше применить?</p>
</details></td><td>2024-12-04T22:11:26.656Z</td></tr><tr><td>bolvan</td><td><p>была идея таймштамп тцп опшинс крутить<br>
но не выгорела. код не убран</p></td><td>2024-12-05T01:43:21.112Z</td></tr><tr><td>tinker</td><td><p>В новом релизе OpenWrt завезли поддержку TLS 1.3, что это меняет для запрета?</p></td><td>2024-12-05T05:44:11.545Z</td></tr><tr><td>bolvan</td><td><p>блокчек может тестить 1.3 с местным курлом<br>
больше ничего</p></td><td>2024-12-05T05:56:17.690Z</td></tr><tr><td>tinker</td><td><p>То есть вот такого сообщения больше не будет?</p>
<pre><code class="lang-auto">installed curl version does not support TLS 1.3 . tests disabled.
</code></pre></td><td>2024-12-05T06:33:07.553Z</td></tr><tr><td>bolvan</td><td><p>не проверял. но не должно</p></td><td>2024-12-05T06:56:48.733Z</td></tr><tr><td>toxae1(Toxa)</td><td><aside class="quote no-group" data-username="abc555" data-post="3624" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>как потом через PuTTY скопировать и разархивировать</p>
</blockquote>
</aside>
<p>Не мучайся. Установи mobaxterm. Там можно и папки загружать при открытой сесии ссш</p></td><td>2024-12-05T08:42:30.789Z</td></tr><tr><td>fray(Aleksey)</td><td><blockquote>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> curl_test_http : tpws --hostdot<br>
ipv4 <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> curl_test_http : nfqws not working<br>
ipv4 <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> curl_test_https_tls12 : tpws not working<br>
ipv4 <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> curl_test_https_tls12 : nfqws not working</li>
</ul>
</blockquote>
<p>Мелкий провайдер на юге МСК. Есть идеи каким образом такое?)</p></td><td>2024-12-05T09:33:32.641Z</td></tr><tr><td>Chatlanin</td><td><aside class="onebox githubissue" data-onebox-src="https://github.com/bol-van/zapret/issues/199">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/issues/199" target="_blank" rel="noopener nofollow ugc">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/issues/199" target="_blank" rel="noopener nofollow ugc">Не помогает обходить ограничение скорост на googlevideo.com</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-08-01" data-time="06:51:57" data-timezone="UTC">06:51AM - 01 Aug 24 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2024-08-04" data-time="05:13:37" data-timezone="UTC">05:13AM - 04 Aug 24 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/userosos" target="_blank" rel="noopener nofollow ugc">
          <img alt="userosos" src="zapret-обсуждение-726/33ff14f3b543ce239fec9de3fad40b951a32de3b.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="B0C5E3">
          userosos
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Приветствую.
После сканирования получаю:
* SUMMARY
ipv4 googlevideo.com curl_<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">test_http : tpws --hostdot
ipv4 googlevideo.com curl_test_http : nfqws not working
ipv4 googlevideo.com curl_test_https_tls12 : tpws not working
ipv4 googlevideo.com curl_test_https_tls12 : nfqws not working

Выставляю необходимые параметры в конфиге, но скорость все-равно крайне низкая.
![изображение](https://github.com/user-attachments/assets/d03d14f2-d43a-46f9-abd1-067aeb3bb895)
Запускал даже глубокое сканирование - результаты не поменялись.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-05T09:53:45.442Z</td></tr><tr><td>easyone11</td><td><p>а при тесте конкретного сервера тоже самое? например <a href="https://rr12---sn-n8v7znzl.googlevideo.com">https://rr12---sn-n8v7znzl.googlevideo.com</a></p></td><td>2024-12-05T09:54:16.767Z</td></tr><tr><td>bolvan</td><td><p>2 уровня домен тестить не имеет смысла</p></td><td>2024-12-05T10:22:08.534Z</td></tr><tr><td>electrifying</td><td><p>Судя по возникающим иссусам в популярном репозитории запрета с батниками для windows они потихоньку у некоторых на их провайдерах перестают работать,о чем болван  и говорил</p></td><td>2024-12-05T11:21:15.553Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
Спойлер</summary>
<p>возникающие исусы и пророк болван ))</p>
</details></td><td>2024-12-05T11:24:12.909Z</td></tr><tr><td>electrifying</td><td><p>При чем в репу болвана бывает тоже набегают, но он теперь тикеты закрывает сразу</p></td><td>2024-12-05T11:26:26.936Z</td></tr><tr><td>abc555</td><td><p>Так если на винде перестают работать, то блок чек в теории может тоже косячить если на винде его запускать ? И тогда может кто нить подскажет как его запустить на wrt правильно ? Я ни разу не запускал, какую команду надо для запуска, покажите кто нить на примере</p></td><td>2024-12-05T11:59:39.693Z</td></tr><tr><td>uwu(uwu)</td><td><p>сомнительно<br>
я пока видел примеры только где провайдер просто блокирует основной маршрут трафика до ggc при этом все остальные ggc остаются доступны<br>
если есть пример, где недоступен ни один ggc было бы интересно посмотреть</p></td><td>2024-12-05T12:01:09.658Z</td></tr><tr><td>abc555</td><td><p>У меня на чужие ggc всё проходит нормально на одном прове, но на те что выделяется для него, он что то намутил и пинг вроде и проходит, но пакет если отправить, просто уходит в туман без ответа</p></td><td>2024-12-05T12:05:08.565Z</td></tr><tr><td>uwu(uwu)</td><td><p>ну это уже сто раз обсуждалось на форуме, есть различные варианты исключения их из выдачи ютубом<br>
хостс, адблок или прокси</p></td><td>2024-12-05T12:05:51.353Z</td></tr><tr><td>abc555</td><td><p>хост не прокатывает, адблок каким макаром на уровне роутера, а прокси, это уже перебор</p></td><td>2024-12-05T12:07:09.620Z</td></tr><tr><td>uwu(uwu)</td><td><p>на роутерах должна быть ручная маршрутизация какая нибудь. с одного ggc на другой перенаправлять, не? я не сильно знаком с устройством роутеров, сорри<br>
Я так у себя в хостс прописывал айпи от другого пула ggc и у меня видео на другой перекидывалось<br>
НО это работает только в том случае если заблокирован например, местный, а магистральный - обходится запретом. т.е те, которые прописаны в videoplayback изначально<br>
если указать какой нибудь левый, то он будет 403 отдавать</p></td><td>2024-12-05T12:08:39.176Z</td></tr><tr><td>abc555</td><td><p>я пробовал разные варианты и компе и на роуторе, но результата не дало, днс подкидывал с другой стороны планеты и пофиг, для каждого ggc свой ip и я проверял он везде одинаковый, и на европе и в штатах везде один и тот же ип, определяется по месту положения, всегда один и тот же регион и город<br>
Можете проверить сами</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.reg.ru/web-tools/checkip">
  <header class="source">
      <img src="zapret-обсуждение-726/82c8e13130b824bfd47447ae8cefd7d34c00d092.png" class="site-icon" data-dominant-color="3755FA" width="16" height="16">

      <a href="https://www.reg.ru/web-tools/checkip" target="_blank" rel="noopener nofollow ugc">reg.ru</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.reg.ru/web-tools/checkip" target="_blank" rel="noopener nofollow ugc">Узнать IP-адрес сайта | Определение IP по домену
        |
        Рег.ру</a></h3>

  <p>Узнать IP адрес сайта или доменного имени. Определение домена по IP адресу.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.nslookup.io/">
  <header class="source">
      <img src="zapret-обсуждение-726/6f2e36f4a7770070b48b0a17306a5c8a4fca1df5.png" class="site-icon" data-dominant-color="390261" width="32" height="32">

      <a href="https://www.nslookup.io/" target="_blank" rel="noopener nofollow ugc">NsLookup.io</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="zapret-обсуждение-726/0a6e9c120ac98f62c97e001539a447f99d84a541_2_690x362.png" class="thumbnail" data-dominant-color="EEEBEF" width="690" height="362"></div>

<h3><a href="https://www.nslookup.io/" target="_blank" rel="noopener nofollow ugc">DNS Lookup</a></h3>

  <p>Find all DNS records for a domain name with this online tool. Nslookup shows A, AAAA, CNAME, TXT, MX, SPF, NS, SOA and more.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
<p>
ип везде одинаковый<br>
днс если хотите проверить, то самый нормальный этот сайт</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.dnscheck.tools/">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/e/e4d8dc52c78e583d6d49ca45e0744800e4022ded.svg" class="site-icon" data-dominant-color="" width="256" height="256">

      <a href="https://www.dnscheck.tools/" target="_blank" rel="noopener nofollow ugc">dnscheck.tools</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.dnscheck.tools/" target="_blank" rel="noopener nofollow ugc">dnscheck.tools - check your dns resolvers</a></h3>

  <p>A tool to test for DNS leaks, DNSSEC validation, and more</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-05T12:12:19.502Z</td></tr><tr><td>uwu(uwu)</td><td><p>я не это имел ввиду<br>
в любом случае без каких либо конкретных примеров (типа с такой то стратегией не работает такой то пул ggc) не вижу смысла продолжать диалог)</p></td><td>2024-12-05T12:20:40.164Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>адблок каким макаром на уровне роутера</p>
</blockquote>
<p>Надо выделить паттерн ggc из первого эшелона и добавить фильтр в адблок. Тогда веб-плеер по их недоступности попытается подключиться к другим. То есть, если вылезают в основном, <strong>например</strong>, вот такие ggc</p>
<pre><code class="lang-auto">rr6---sn-n8v7kn7r.googlevideo.com
rr1---sn-n8v7znze.googlevideo.com
rr11---sn-n8v7znz7.googlevideo.com
</code></pre>
<p>то для них общй паттерн это<br>
<code>---sn-n8v7</code><br>
и, <strong>как пример</strong>, в расширение юблок для браузера в “мои фильры” добавляется фильтр<br>
<code>||r*---sn-n8v7*.googlevideo.com</code><br>
Для роутерного адблока надо синтаксис уточнить. Может быть прямо такой подойдет.</p>
<p>Если эшелонов несколько, и все неподходящие, то надо повторить для всех. Может быть так, что придется потрудиться чтобы исключить все лишние ggc и вынудить веб-плеер конектиться к подходящим ggc из других подсетей.</p>
<p>Вообще тут использовать браузерный блок, на мой взгляд, лучше потому что тогда веб-плеер очень быстро отработает эту ситуацию, не придется ждать сетевых таймаутов.</p></td><td>2024-12-05T12:21:58.029Z</td></tr><tr><td>abc555</td><td><p>вы имеете введу просто добавить в адблок все адреса которые в бане от прова по типу <a href="http://rr6---sn-n8v7kn7r.googlevideo.com" rel="noopener nofollow ugc">rr6---sn-n8v7kn7r.googlevideo.com</a> и что это даст ? ну не прошел пакет, роутер его откинул и что дальше, такой вариант не прокатит )</p></td><td>2024-12-05T12:29:26.334Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="i-no" data-post="3686" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Если эшелонов несколько, и все неподходящие, то надо повторить для всех. Может быть так, что придется потрудиться чтобы исключить все лишние ggc <strong>и вынудить веб-плеер конектиться к подходящим ggc из других подсетей</strong>.</p>
</blockquote>
</aside>
<p>^^^</p></td><td>2024-12-05T12:31:04.094Z</td></tr><tr><td>abc555</td><td><p>там всего 2 варианта домена, только в начале rr1 rr2 меняется, а так только 2 домена с разными в начале rr и ип у всех одинаковый в любой точке планеты если проверять, они видят с какого ип я зашел и переключают меня автоматом на один и тот же ggc и никакой там адблок не прокатывает.<br>
Я не проверял как на динамике, возможно там вариантов больше, у меня статика</p></td><td>2024-12-05T12:34:13.051Z</td></tr><tr><td>i-no(...)</td><td><p>Могут быть фокусы местных провайдеров по указке чтобы они не получили по башке, возможно, все популярные пулы завернули на один айпи адрес и по нему уже заблочили. Это надо выяснять. Если они такие тупые, как вы о них пишете, то можно попытаться выйти на другие пулы, которые они на этот айпи еще не завернули. Пробуйте делать подмены самостоятельно. Если найдется рабочий вариант, то радуйтесь, вы их победили и далее по схеме. Напомню, что тут браузерный адблок удобнее рутерного, с браузерным быстрее будет работать или быстрее станет понятно, что не работает и перспектив у этой схемы нет.</p>
<p><strong>В целом концептуально неудобства нам создают не для того, чтобы их было удобно преодолевать.</strong></p></td><td>2024-12-05T12:39:50.080Z</td></tr><tr><td>abc555</td><td><p>Комп не вариант, я только в роуторе делаю ветер.<br>
Скажите лучше как запустить блок чек на wrt, это меня интересует и желательно чтоб роутер не завис, так как он у меня стоит очень далеко и ходить туда перезагружать это целое дело.<br>
Есть конечно подопытный роутер, но все же нужна точная инструкция, чтоб я долго не думал, а просто смог повторить, если не знаете, тогда не пишите, всё равно не пойму<br>
Такие как Y или N  это я понимаю, интересуют команды как его запустить</p></td><td>2024-12-05T12:46:24.126Z</td></tr><tr><td>i-no(...)</td><td><p>Если так приспичило именно на wrt, то блокчек входит в состав <code>zapret-vXX.X-openwrt-embedded.tar.gz</code> который вы вчера устанавливали. Запускается как и виндовый без всяких инструкций стандартно через blockсheck.sh. Если свой велосипед не изобретается совсем, то предлагаю забить и забыть.</p></td><td>2024-12-05T12:56:08.893Z</td></tr><tr><td>abc555</td><td><p>Ну и зная путь к blockсheck.sh команда какая для старта, как должна выгладить строка целиком, чтоб скопировал и вставил и всё, больше ничего лишнего не нужно<br>
И куда оно будет записывать, как посмотреть, я вот это не догоняю<br>
Как остановить, нужна инструкция, которой нет, так же может есть косяки и лучше так не включать, ну мало ли. подробная нужна инструкция, на компе я догадывался как её включить, включил помню с 25 попытки и то случайно получилось, нет нормальной инструкции, где подробно и в точности будет описание, причём без лишних слов и коротко. В любой инструкции слова должны быть такими, чтоб понятно было для всех, умными словами писать её не нужно, потому что никто не поймёт, нужно ставить себя на место любого человека, понимать что у него в голове и писать так, что понял даже ребёнок и тогда не нужно будет спрашивать и так всё будет понятно</p></td><td>2024-12-05T12:58:15.093Z</td></tr><tr><td>wigeance(Wigeance)</td><td><blockquote>
<p>Ну и зная путь к blockсheck.sh команда какая для старта, как должна выгладить строка целиком, чтоб скопировал и вставил и всё, больше ничего лишнего не нужно<br>
И куда оно будет записывать, как посмотреть, я вот это не догоняю</p>
</blockquote>
<p>в ридми запрета все эти вопросы описаны.</p>
<p>Если не знаете пути до файла ставите на роутер mc и там обычный файловый проводник открывается, можно спокойно и красиво все пути увидеть и будет вам почти как на винде</p></td><td>2024-12-05T13:07:59.280Z</td></tr><tr><td>abc555</td><td><p>Та там нихрена не понятно написано в ридми, возможно вы там закончили 5 институтов и нобелевскую получили и вам всё понятно, но в 98% это не поймёт никто<br>
Я по своей фишке людям на пальцах показываю, настолько всё подробно объясняю, показываю визуально и большая половина из них не догоняет вообще</p></td><td>2024-12-05T13:10:08.675Z</td></tr><tr><td>i-no(...)</td><td><p>cd туда, затем<br>
<code>.\blockcheck.sh</code><br>
Если что, оснанов по Ctrl+C<br>
Я глянул в скрипт, там есть trap на sigint (с зачисткой)<br>
Всё должно быть нормально при останове. Пробуйте и не мандражируйте.<br>
Короче, доверяйте разработчику, он предусмотрительный и все нужное предоставил.</p></td><td>2024-12-05T13:11:11.422Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p><a href="https://github.com/bol-van/zapret#:~:text=%D0%A1%D0%BB%D0%B5%D0%B4%D1%83%D0%B5%D1%82%20%D0%BF%D1%80%D0%BE%D0%B3%D0%BD%D0%B0%D1%82%D1%8C%20blockcheck,blockcheck.txt.">Что здесь непонятного??</a><br>
Команда полностью написана для вас</p></td><td>2024-12-05T13:11:35.500Z</td></tr><tr><td>astolfobestgirl</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Возможно, здесь опечатка. Имелся ввиду метод “CONNECT”?</p><aside class="onebox githubblob" data-onebox-src="https://github.com/bol-van/zapret/blob/c4f53549b1a9de6f902d89ec8277a7c505c20c3a/nfq/protocol.c#L154">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/blob/c4f53549b1a9de6f902d89ec8277a7c505c20c3a/nfq/protocol.c#L154" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/bol-van/zapret/blob/c4f53549b1a9de6f902d89ec8277a7c505c20c3a/nfq/protocol.c#L154" target="_blank" rel="noopener nofollow ugc">bol-van/zapret/blob/c4f53549b1a9de6f902d89ec8277a7c505c20c3a/nfq/protocol.c#L154</a></h4>



    <pre class="onebox"><code class="lang-c">
      <ol class="start lines" start="144" style="counter-reset: li-counter 143 ;">
          <li>	{</li>
          <li>		pos[j] = ResolvePos(data,sz,l7proto,splits+i);</li>
          <li>		if (pos[j]) j++;</li>
          <li>	}</li>
          <li>	qsort_size_t(pos, j);</li>
          <li>	j=unique_size_t(pos, j);</li>
          <li>	*pos_count=j;</li>
          <li>}</li>
          <li></li>
          <li></li>
          <li class="selected">const char *http_methods[] = { "GET /","POST /","HEAD /","OPTIONS /","PUT /","DELETE /","CONNECT /","TRACE /",NULL };</li>
          <li>const char *HttpMethod(const uint8_t *data, size_t len)</li>
          <li>{</li>
          <li>	const char **method;</li>
          <li>	size_t method_len;</li>
          <li>	for (method = http_methods; *method; method++)</li>
          <li>	{</li>
          <li>		method_len = strlen(*method);</li>
          <li>		if (method_len &lt;= len &amp;&amp; !memcmp(data, *method, method_len))</li>
          <li>			return *method;</li>
          <li>	}</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-05T16:02:21.054Z</td></tr><tr><td>bolvan</td><td><p>Да, он и имелся в виду. Слэш, действительно, лишний, тк там слэша нет в запросах, а есть хост</p></td><td>2024-12-05T16:20:59.414Z</td></tr><tr><td>i-no(...)</td><td><p>Как думаете, могло бы пригодиться такое, чтобы при указании <strong>любого</strong> листа с каким-нибудь значком, например  так</p>
<pre><code class="lang-auto">--hostlist-domains=$/your/path/domains.txt
--ipset=$/your/path/ipset.txt
</code></pre>
<p>профиль, его содержащий, при его удалении отключался бы безвозвратно и целиком до перезапуска. При запуске то же: стартуем без ошибок, скромный нотифай в логе. Без значка — по-обычному как сейчас.</p>
<p>Подумалось в связи с тем, что скачка какого-нибудь полезного и актуализируемого регулярно ограничительного айпи листа может зафейлиться.</p></td><td>2024-12-06T00:59:20.864Z</td></tr><tr><td>bolvan</td><td><p>Все мои скрипты раcсчитаны на фейл.<br>
Они не уничтожают старый лист, если что-то пошло не так со скачиванием.<br>
Они в том числе проверяют длину скачанного файла на случай, если там вместо листа идет какой-то HTML с ошибкой.</p>
<p>Другие должны писать свои скрипты точно так же</p>
<p>Усложнять логику hostlist смысла не вижу</p></td><td>2024-12-06T06:12:44.323Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>поясните за udp<br>
если один сайт только с  --dpi-desync=fake --dpi-desync-repeats=20  тест проходит<br>
а другой и с  --dpi-desync=fake --dpi-desync-repeats=20 и всеми вариантами ipfrag2  - это что значит?</p>
<p>т.е. сам по себе сайт ipfrag2 не переваривает? или dpi разные по разному блочит\ищет\т.п.?</p>
<p>а то пока на кавказе напрочь “иносранный” инет отрубили в остальной эрэфии(спб) http3 по новой переделали. всегда просто fake хватало а теперь этого мало</p>
<p>а главное даже с якобы работающей стратегией из http3 сваливаются на tcp сами сайты. и что характерно разные по разному в хроме и файрфоксе.<br>
а буквально вчера все одинаково норм по h3 пахали</p></td><td>2024-12-06T22:40:25.149Z</td></tr><tr><td>i-no(...)</td><td><p>Похоже, что ситуация опять “задышала” туда-сюда, это не самое удачное время для тестирования. Субъективно, считаю упор в лимит по повторам — признак неидеально работающей стратегии, либо как таковой, либо условия ухудшились (нечему удивляться). У себя заметил, что сама вебовская часть сайта YT сейчас немного подтупывает, хотя в ней везде H3. И видео отдается нормально, но по http1.1</p>
<details>
<summary>
при вот этом</summary>
<p><code>--filter-udp=443 --hostlist=/etc/nfqws/youtube.list --hostlist-domains=googlevideo.com --dpi-desync=fake --dpi-desync-fake-quic=/etc/nfqws/quic.bin</code><br>
Это действующий профиль, повторы не используются</p>
</details>
<p>Забавно, что если зафорсить по TCP, то в сравнении стало даже получше, хотя еще ранее пришлось повозиться и повыкатывать артиллерию (мультикромсатор, wssize, seqovl). И mpc-be <a href="https://disk.yandex.ru/d/dEsP_jSyP5GwxA" rel="noopener nofollow ugc">обновленный</a> вновь летает.</p>
<details>
<summary>
при вот таком</summary>
<pre><code class="lang-auto">--filter-tcp=443 --filter-l3=ipv6 --hostlist-domains=googlevideo.com --dpi-desync=multidisorder --wssize=1:6 --ipset-ip=мои_подсети_для_ggc_N1 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1,host+1,sld+2,sld+5,sniext+1,endhost-2 --dpi-desync-fooling=md5sig --dpi-desync-repeats=4 --dpi-desync-ttl=1 --dpi-desync-autottl=1:1-10 --new
--filter-tcp=443 --filter-l3=ipv6 --hostlist-domains=googlevideo.com --dpi-desync=multidisorder --wssize=1:6 --ipset-ip=мои_подсети_для_ggc_N2 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1,host+1,sld+2,sld+5,sniext+1,endhost-2 --dpi-desync-fooling=md5sig --dpi-desync-repeats=4 --dpi-desync-ttl=12 --dpi-desync-autottl=2:12-24 --new
--filter-tcp=* --hostlist=/etc/nfqws/youtube.list --dpi-desync=fake,fakedsplit --dpi-desync-split-seqovl=1 --dpi-desync-repeats=2 --wssize=1:6 --ipset=/var/tmp/zapret/goog-cidr6.txt --ipset=/var/tmp/zapret/goog-cidr4.txt --dpi-desync-fooling=md5sig --dpi-desync-ttl=12 --new
&lt;...&gt;
</code></pre>
<p>ютубные иплисты:</p>
<pre><code class="lang-auto">https://raw.githubusercontent.com/touhidurrr/iplist-youtube/main/cidr6.txt
https://raw.githubusercontent.com/touhidurrr/iplist-youtube/main/cidr4.txt
</code></pre>
</details>
<p>ipfrag2 работает тоже, но немного вязко</p>
<p>Пока не до масштабных перепроверок. Но вероятно, придется как-то еще дробить стратегию для udp и что-то докручивать.</p></td><td>2024-12-07T01:33:27.536Z</td></tr><tr><td>bolvan</td><td><p>Читаем раздел редме по поводу ip фрагментации</p></td><td>2024-12-07T08:22:06.854Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="zzzombie1989" data-post="3721" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/zzzombie1989/48/10205_2.png" class="avatar"> zzzombie1989:</div>
<blockquote>
<p>repeats=99</p>
</blockquote>
</aside>
<p>Не на релизном</p>
<blockquote>
<p>daemon.err nfqws[#####]: dpi-desync-repeats must be within 1…20</p>
</blockquote>
<p>Кратно 20 по схеме nfqws + winws и т. п.</p></td><td>2024-12-07T13:33:13.516Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>на винде CURL_MAX_TIME=0.4 какнибудь можно указать? (и\или любые другие переменные)<br>
<span class="bbcode-s">вместе с cmd игнор<br>
в blog.sh если править либо вовсе не стартует либо игнор. либо не понимаю как вписать</span></p>
<p>и даже если cygwin.cmd запустить - казалось бы… но тоже игнор и 2001ms таймаут<br>
это несчитая того что копипаста из винды там не работает и ручонками писать нада.  может от регистра зависит?</p></td><td>2024-12-08T04:10:18.385Z</td></tr><tr><td>easyone11</td><td><p>-m</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/b3c87c3f772c7b9c43dec8573cf37b79f9d2cf59.png" data-download-href="https://ntc.party/uploads/default/b3c87c3f772c7b9c43dec8573cf37b79f9d2cf59" title="image"><img src="zapret-обсуждение-726/b3c87c3f772c7b9c43dec8573cf37b79f9d2cf59.png" alt="image" data-base62-sha1="pEr0jw8EN0frxeXrZLLdhhig08F" width="690" height="178" data-dominant-color="171717"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">743×192 6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-12-08T05:41:30.396Z</td></tr><tr><td>i-no(...)</td><td><p>Прямо так и запустить из <strong>подадминского</strong> cygwin:<br>
<code>CURL_MAX_TIME=0.4 ./blockcheck.sh</code><br>
Из-под неадминского будет пермишн денайд для winws.</p>
<details>
<summary>
скрин</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/8659b59fd3beac2bd16a1a4fbccb6b89f8f0b150.png" data-download-href="https://ntc.party/uploads/default/8659b59fd3beac2bd16a1a4fbccb6b89f8f0b150" title="curl400ms_blockcheck_cygwin"><img src="zapret-обсуждение-726/8659b59fd3beac2bd16a1a4fbccb6b89f8f0b150.png" alt="curl400ms_blockcheck_cygwin" data-base62-sha1="jawbkgV2tYUxul1vWx8YgcX3rQQ" width="345" height="140" data-dominant-color="202A53"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">curl400ms_blockcheck_cygwin</span><span class="informations">779×318 14.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<blockquote>
<p>копипаста из винды там не работает</p>
</blockquote>
<p>Должна. Только не ПКМ в окне, а через меню ПКМ на тайтлбаре и оно же ЛКМ на иконке в левом верхнем углу.</p>
<p>Дополнительно к этому, можно снабдить <code>cygwin</code> “терминалкой” <code>mintty</code> которую bolvan не включил в набор. Тогда будет традиционная копипаста и настройка отображения, шрифты, цвета, ресайз + рефлоу и прочее.</p></td><td>2024-12-08T05:48:46.385Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>так и то с алиасом никак не работает</p>
<p>сначала надо догадаться как в каталог попасть чтоб sh непосредственно пустить…</p>
<p>но хоть копипаста через изврат работает - mintty чтоб не сорцы не нашёл</p></td><td>2024-12-08T17:37:18.557Z</td></tr><tr><td>i-no(...)</td><td><p>…</p>
<details>
<summary>
Тут вот что можно сделать</summary>
<p>Можно в эксплорерное ПКМ меню запускалку сделать для cygwin чтобы прямо в нужном каталоге открываться.<br>
<a class="attachment" href="zapret-обсуждение-726/p1edNOYxIznQ9fXS9FjxK9dRgLS.zip">cygwin_here_exp.zip</a> (1,2 КБ)<br>
Сваял несколько .reg-файлов, пути только подправить. Там где bash это, понятно, не mintty. Рекомендовал бы <code>cygwin_here_bg_folder</code><br>
Взять сам экзешник можно <a href="https://github.com/mintty/wsltty/releases" rel="noopener nofollow ugc">из их гитхаба</a>, например из .cab его вынуть и в <code>bin</code> положить.</p>
<blockquote>
<p>сначала надо догадаться как в каталог попасть чтоб sh непосредственно пустить…</p>
</blockquote>
<p>Там же bolvan алиасы добавил, см. при запуске cygwin наверху. То есть, попав в cygwin надо указать переменную, затем пробел и затем <code>blockcheck</code><br>
Путь нужный уже предусмотрительно автодобавлен в алиас. И все работает с учетом указанной переменной.</p>
<p>Можно просто сделать <code>ls /</code> чтобы понять струкруту каталогов. Перемещение по <code>cd</code><br>
Самый корень в <code>cygdrive</code></p>
</details></td><td>2024-12-08T17:50:30.109Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>экзешник то разве не для десяты с её wsl?<br>
у меня 7 - отсюда и сорцы не скомпилить - как понял тоже тока в десяте</p>
<hr>
<p>с другой стороны бохсним - как добиться 0.4 сек понял<br>
просто чуть извратней чем хотелось</p></td><td>2024-12-08T18:34:52.643Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Там под WSL целая кучерявая конструкция</summary>
<p>…WSL-bridge, обвязка. 7 под рукой нет, попробовал mintty заюзать на 8-ке. Работает. Я не пишу о том, что не работает. Если предполагаю, то так и пишу. Ну и попробовать — руки ж не отвалятся. Я и сам тоже экзешник отдельный сразу не нашел и полез копать. Совсем по-правильному если, то поставить cygwin с его сайта, добавить нужных пакетов, mintty вроде уже входит сразу в комплект.</p>
</details>
<p>Но это не обязательно, мне и bolvan’овского дистра вполне хватает. Его можно использовать не только для блокчека же.</p></td><td>2024-12-08T18:38:11.798Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>сам mintty.exe в 7 заработал - зря боялся</p>
<p>переминовать в bash не получилось - там не те ключи. поэтому готовые cmd не аллё</p>
<p>но поклал как mintty.exe в туже папку - алиасы подхватились</p>
<p>а главное CURL_MAX_TIME=0.4 если <em><strong>перед</strong></em> blockchek писать - как алиас работает</p>
<p>для меня неочевидно совсем что ключ перед командой а не после</p>
<p>копипаста мышой тоже подхватилась – но слишком “умный” лишнего пытается вставить. надо сначала “чистый” текст в буфере получить, т.е. без оформления и т.п.</p></td><td>2024-12-08T18:47:54.751Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>для меня неочевидно совсем что ключ перед командой</p>
</blockquote>
</aside>
<p>Да. Но это не ключ, это переменная. В реадме даже описано. Еще можно глянуть какую-нибудь книженцию типа “Linux. Командная строка” 2023, в pdf 4 МБ лежит в известных местах. Заодно станет понятно, что полезность приданного к болкчеку cygwin выходит <strong>ДАЛЕКО</strong> за пределы только блокчека.</p>
<blockquote>
<p>переминовать в bash не получилось - там не те ключи. поэтому готовые cmd не аллё</p>
</blockquote>
<p>Также см. рег файлы выше, там ключи. И поисковик. И книги.</p></td><td>2024-12-08T18:51:40.746Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="i-no" data-post="3731" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>это не ключ, это переменная</p>
</blockquote>
</aside>
<p>но тогда чтож её в туже строку надо?<br>
наконецто получилось  blog.sh добавить в нужном месте<br>
как отдельная строка =игнор<br>
внутри кавычек тоже, или ошибка</p></td><td>2024-12-08T19:11:43.818Z</td></tr><tr><td>bolvan</td><td><p>Шелл синтаксис такой.<br>
VAR1=value1 VAR2=value2 … VARN=valueN command<br>
Запустить команду с этими переменными : fork, setenv, exec<br>
Соответственно следующая команда в скрипте никак не видит присваивания этих переменных. Все остается в форке.</p>
<p>Такой синтаксис</p>
<p>VAR1=value<br>
command</p>
<p>Изменит переменную для текущего процесса шелла, но не передаст env команде. Переданы будут только экспортированные переменные.</p>
<p>export VAR1=value1<br>
command</p>
<p>или</p>
<p>VAR1=value1<br>
export VAR1<br>
command</p>
<p>Этот вариант устанавливает переменную для текущего шелл процесса и для дочерних</p>
<p>Если хочется все время короткий таймаут, чтобы не насиловать код, можно вписать<br>
export CURL_MAX_TIME=0.5<br>
в <code>cygwin/home/&lt;USERNAME&gt;/.bashrc</code></p>
<p>Но все-же рекомендую тогда еще сделать<br>
export CURL_MAX_TIME_QUIC=1.5</p></td><td>2024-12-09T11:23:23.583Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Ничего не понимаю. Запускаю программу и… ничего не происходит.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ed3760a2d7529f98ad2f0f6df915ae0ce849e9a4.png" data-download-href="https://ntc.party/uploads/default/ed3760a2d7529f98ad2f0f6df915ae0ce849e9a4" title="image"><img src="zapret-обсуждение-726/ed3760a2d7529f98ad2f0f6df915ae0ce849e9a4.png" alt="image" data-base62-sha1="xQvNZ4uKczLYhiLnMbPhLkzqwNC" width="690" height="388" data-dominant-color="101010"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1115×628 9.59 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-12-09T11:49:25.949Z</td></tr><tr><td>abc555</td><td><p>Вы добавили бантник для вин 7 в zapret-win-bundle-master и у меня не заработала, поставил свой WinDivert и стало норм</p></td><td>2024-12-09T11:51:38.526Z</td></tr><tr><td>bolvan</td><td><p>win7/install_win7.cmd написал, что скопировал файлы ?<br>
Какой версии windivert заработал ?</p></td><td>2024-12-09T12:04:00.587Z</td></tr><tr><td>bolvan</td><td><p>Скорее всего CMD не под админом. Запускается процесс элевации привилегий, окно открывается и тут же закрывается. Там ошибка отсутствия фильтра windivert</p></td><td>2024-12-09T12:05:11.336Z</td></tr><tr><td>abc555</td><td><p>WinDivert64.sys версия 2.2, а WinDivert.dll не написано в свойствах, но вроде 2.0, как было у Валдикса в гудбае<br>
WinDivert64.sys версия 2.2 это я уже сам поставил, с ним лучше работает, комп не виснет</p></td><td>2024-12-09T12:20:38.130Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Да, точно, мой косяк. Запустил строку от админа - теперь запускается. Хотя сайт все равно не открывается. Хм-м… blockcheck мог ошибиться и неверную стратегию предложить? Тестирую на rutor.info и <a href="http://xhamster.com" rel="noopener nofollow ugc">xhamster.com</a> - почему-то именно эти два сайта мой провайдер блочит просто лютейшим образом.</p></td><td>2024-12-09T12:20:47.681Z</td></tr><tr><td>tinker</td><td><p>куда в актуальной версии закидывать скрипты?</p></td><td>2024-12-09T12:24:11.190Z</td></tr><tr><td>bolvan</td><td><p>Туда же, где и раньше</p></td><td>2024-12-09T12:24:32.444Z</td></tr><tr><td>tinker</td><td><p>init.d/openwrt/custom.d ?</p></td><td>2024-12-09T12:34:17.128Z</td></tr><tr><td>easyone11</td><td><p>да</p></td><td>2024-12-09T12:35:19.157Z</td></tr><tr><td>tinker</td><td><p>Чет всеравно проблемки с подключением к голосовым каналам, очень долго подключается, примерно минуту</p>
<p><img src="zapret-обсуждение-726/4d73d67df3c4b9560659419f14f927c426d58dd7.png" alt="image" data-base62-sha1="b3aWH5C7rb0dxepsi7TVjXBjEj5" width="543" height="95"><br>
<img src="zapret-обсуждение-726/03e5242e1f543adaee751d453ef9e9ac29620dc1.png" alt="image" data-base62-sha1="ysmELyxoe8PMGB3YUoIvfxSr8B" width="372" height="224"></p></td><td>2024-12-09T12:39:34.759Z</td></tr><tr><td>bolvan</td><td><p>Гарантий никто не давал.<br>
Рассмотрю только если на предыдущей версии работало тоже самое, а на этой нет</p></td><td>2024-12-09T12:42:42.671Z</td></tr><tr><td>easyone11</td><td><p>Подозреваю что пытается лезть на адрес которого нет в скрипте и возможно перебором в итоге попадает на ту подсеть которая есть.<br>
По хорошему надо бы посмотреть debug в проблемный момент, посмотреть проблемный адрес.<br>
Подсети можешь глянуть в скрипте DISCORD_SUBNETS="${DISCORD_SUBNETS</p></td><td>2024-12-09T12:51:53.684Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Avatar-Lion" data-post="3739" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avatar-lion/48/8372_2.png" class="avatar"> Avatar-Lion:</div>
<blockquote>
<p>почему-то именно эти два сайта мой провайдер блочит просто лютейшим образом.</p>
</blockquote>
</aside>
<p>ну у вас стратегия немного странная<br>
дефолтный фейк + 20 повторов. сомневаюсь, что таким образом нормально пробьется</p></td><td>2024-12-09T12:54:20.395Z</td></tr><tr><td>bolvan</td><td><p>По хорошему надо чтобы шарящие разбирались что там не так и постили готовую информацию, чтобы я обновлял скрипт.<br>
Там 2 этапа. Веб часть и udp 50000+ часть.<br>
Надо чтобы шарящий разбирался доходит ли до части 2. Может там блок веб адресов.<br>
А если доходит, то на какие IP лезет.<br>
Тогда это было бы полезно</p></td><td>2024-12-09T12:55:12.093Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3748" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>По хорошему надо чтобы шарящие разбирались</p>
</blockquote>
</aside>
<p>“Не в бровь, а в глаз”, но тебе приходится обсуждать вопросы с нами))</p></td><td>2024-12-09T13:00:48.929Z</td></tr><tr><td>bolvan</td><td><p>Я замучаюсь “все ставить” и все исследовать. Кроме того у меня нет всех провайдеров под боком</p></td><td>2024-12-09T13:01:24.431Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="bolvan" data-post="3748" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Там 2 этапа. Веб часть и udp 50000+ часть.</p>
</blockquote>
</aside>
<p>а разве если провалился и дошёл до этапа входа в голосовой режим это не означает что веб часть пройдена?<br>
видимо сам себе отвечу, вроде бы у меня была ситуация, когда доходило до голоса но не заходило совсем (вот не помню был уже тогда скрипт или просто в стратегиях были прописаны порты дискорда) пока не сменил стратегию дурения tcp, но было это давно и могу ошибаться.</p></td><td>2024-12-09T13:02:24.523Z</td></tr><tr><td>bolvan</td><td><p>Я не знаю. Никогда не пользоваться дискордом. Все делалось со слов других.<br>
У кого-то сразу заводится с кастомом, у кого-то не работает</p></td><td>2024-12-09T13:06:13.459Z</td></tr><tr><td>tinker</td><td><p>Можешь чуть более детально шаги расписать?</p></td><td>2024-12-09T13:06:26.638Z</td></tr><tr><td>easyone11</td><td><p>да это понятно, адекватные люди не требуют у тебя чтобы всякое ПО заболоченное работало, ну а те кто требует явно что то путают</p></td><td>2024-12-09T13:06:37.766Z</td></tr><tr><td>easyone11</td><td><p>в ридмишки глянь <code>--debug</code>, собери лог в файл и посмотри куда идёт обращение, по подсетям там будет легко понять скорей всего, а вот если там проблема с tcp частью, наверно будет сложней.<br>
ps<br>
я так не делал с диском поэтому может и ошибаюсь, но хз как еще диагностировать</p></td><td>2024-12-09T13:10:00.717Z</td></tr><tr><td>bolvan</td><td><p>У него не будет ничего в debug логе по udp части, которая вылезает за ipset<br>
В ядре фильтруется<br>
пусть добавит временно в ipset discord 0.0.0.0/0</p></td><td>2024-12-09T13:11:48.426Z</td></tr><tr><td>bolvan</td><td><p>Специально поставил в виртуалке какую-то сборку вин7 2020 года с ннм-клуба. Без ESU патчей.<br>
windivert 2.2.0-C и D работают. A, B не работают.<br>
В bundle в win7 находится 2.2.0-C.<br>
Батник сработал, после него winws запустился</p></td><td>2024-12-09T13:28:23.344Z</td></tr><tr><td>tinker</td><td><p>Добавил в скрипте в конец листа DISCORD_SUBNETS="${DISCORD_SUBNETS</p>
<p>А где лог должен лежать?<br>
И --debug нужно в стратегиях писать или в другом месте?<br>
<img src="zapret-обсуждение-726/d02733728dc85657201112b59d7fd77ef1fe167b.png" alt="image" data-base62-sha1="tHpiH6LeouoKUbi7rzXysm8CBm3" width="477" height="122"></p></td><td>2024-12-09T13:40:46.692Z</td></tr><tr><td>bolvan</td><td><p>В NFQWS_OPT<br>
–debug=@/tmp/log.txt<br>
перезапустить zapret<br>
потом воспроизвести проблему<br>
остановить zapret</p>
<p>долго под логом держать нельзя. закончится место в /tmp</p></td><td>2024-12-09T13:47:39.697Z</td></tr><tr><td>tinker</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://pastebin.com/VgwGShkq">
  <header class="source">
      <img src="zapret-обсуждение-726/fac288f37307d850a73adb915953f07485f9f464.png" class="site-icon" data-dominant-color="B4B6B9" width="16" height="16">

      <a href="https://pastebin.com/VgwGShkq" target="_blank" rel="noopener nofollow ugc">Pastebin</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://pastebin.com/VgwGShkq" target="_blank" rel="noopener nofollow ugc">log.txt - Pastebin.com</a></h3>

  <p>Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-09T14:41:56.716Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Avatar-Lion" data-post="3739" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avatar-lion/48/8372_2.png" class="avatar"> Avatar-Lion:</div>
<blockquote>
<p>rutor</p>
</blockquote>
</aside>
<details>
<summary>
Должен работать по идее</summary>
<p>Оба его домена <code>.info</code> и <code>.is</code> нормально вскрываются <code>--dpi-desync=fake,multisplit</code> или <code>--dpi-desync=fake,fakedsplit</code><br>
Если не использовать дурение <code>badseq</code>, то работает 80 порт тоже.</p>
<details>
<summary>
подробнее</summary>
<pre><code class="lang-auto">--hostlist=/etc/nfqws/user.list --dpi-desync=fake,multisplit --dpi-desync-repeats=2 --dpi-desync-split-pos=1,midsld+1,sniext+1,endhost-2,-10 --dpi-desync-fooling=md5sig

--hostlist=/etc/nfqws/user2.list --dpi-desync=fake,fakedsplit --dpi-desync-split-seqovl=1 --dpi-desync-repeats=1 --dpi-desync-split-pos=1,host+2,midsld+1,sniext+1,endhost-2 --dpi-desync-fooling=md5sig
</code></pre>
</details>
<p><code>6tor.org</code> на ipv6, и уже очень давно работает просто так</p>
</details></td><td>2024-12-09T14:46:32.424Z</td></tr><tr><td>bolvan</td><td><p>Все udp на порт 443<br>
Если действительно в ipset было добавлено 0.0.0.0/0, то до 50-discord дело не доходит.<br>
udp 443 нацелено на cloudflare и google cloud</p>
<p>большую часть лога по russia5644.discord.media ничего не делалось<br>
потом ближе к концу он добавился в аутохостлист<br>
auto hostlist (profile 2) : adding russia5644.discord.media to /opt/zapret/ipset/zapret-hosts-auto.txt<br>
надо добавлять целиком discord.media руками, тк поддоменов может быть много</p>
<p>стратегия чистый fake не факт, что срабатывает</p></td><td>2024-12-09T14:53:10.149Z</td></tr><tr><td>tinker</td><td><aside class="quote no-group" data-username="bolvan" data-post="3762" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>auto hostlist (profile 2) : adding russia5644.discord.media to /opt/zapret/ipset/zapret-hosts-auto.txt<br>
надо добавлять целиком discord.media руками, тк поддоменов может быть много</p>
</blockquote>
</aside>
<p>сделал, теперь подключается моментально</p></td><td>2024-12-09T15:02:43.073Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Не хочет. Сделал так:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/af2540ae48f5cbfca283b03beacc26a722467b6c.png" data-download-href="https://ntc.party/uploads/default/af2540ae48f5cbfca283b03beacc26a722467b6c" title="image"><img src="zapret-обсуждение-726/af2540ae48f5cbfca283b03beacc26a722467b6c.png" alt="image" data-base62-sha1="oZpmZi1eBNsS5009qSupwq5eccQ" width="690" height="35" data-dominant-color="212121"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">977×50 3.32 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Все равно rutor не открывается. ipv6 у моего провайдера нет.</p></td><td>2024-12-09T15:23:16.525Z</td></tr><tr><td>bolvan</td><td><p>Почему --wf-udp=80 ?</p></td><td>2024-12-09T16:05:37.841Z</td></tr><tr><td>bolvan</td><td><p>0.0.0.0/0 не забудьте убрать из ipset</p></td><td>2024-12-09T16:06:00.235Z</td></tr><tr><td>abc555</td><td><p>Установил новую прошивку wrt, запрет пятой версии вроде работает нормально, так особо не заметил изменений в этой прошивке, но добавили в дисманг функцию удалять мас адреса из запросов днс и локальные ип тоже, функция прикольная, а так вроде всё как было, ничего не изменилось во всяком случаи визуально, но пока ещё тестирую<br>
У меня doh, не знаю отправлял он мас адреса в днс или нет, но обычный роутер походу отправляет, палит контору ))</p></td><td>2024-12-09T16:14:36.688Z</td></tr><tr><td>bolvan</td><td><p>mac адреса - принадлежность уровня L2. Они не уходят дальше 1 хопа.<br>
Могут палиться через ipv6 при использовании SLAAC конфигурации, но это уже давно вылечено в большинстве ОС.</p></td><td>2024-12-09T16:56:19.787Z</td></tr><tr><td>abc555</td><td><p>Я даже не знаю, возможно так и есть, ни разу не проверял, но на всякий случай галки поставил )</p></td><td>2024-12-09T17:25:20.454Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Выше товарищ написал, что на 80 порту тоже должно работать. Но не работает, по крайне мере, у меня. Я без понятия даже что все эти параметры обозначают. <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p>Вообще, результаты blockcheck крайне неоднозначные: те параметры, которые он почему-то считает рабочими, по факту ничего не дают, во всяком случае, в браузере тот же Рутор не открывается, просто бесконечно крутит индикатор загрузки. Но стоит запустить какое-то другое средство по типу готового файла 2_any_country из папки GoodbyeDPI - и тут же все открывается.</p>
<p>Я бы и оставил GoodbyeDPI, но, во-первых, с ним некоторые сайты не открываются (включая Ютуб), а во-вторых, мне кажется неправильной сама идея - вмешиваться абсолютно в весь трафик на ПК. Хотелось бы все же как-то настроить Zapret на работу с нужными мне ресурсами. Только непонятно как это сделать.</p></td><td>2024-12-09T19:28:59.307Z</td></tr><tr><td>bolvan</td><td><p>пусть на 80, но почему udp ?<br>
какое отношение plain http имеет к udp ?<br>
с таким фильтром параметры полностью неработоспособны</p>
<p>blockcheck проверяет отдельный домен отдельно по протоколам : http,https,quic. сайт может состоять из нескольких доменов. броузер F12 вкладка сеть, добавить поле “протокол”</p></td><td>2024-12-09T20:41:00.451Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>мне кажется неправильной сама идея - вмешиваться абсолютно в весь трафик на ПК</p>
</blockquote>
</aside>
<p>Поддерживаю. Однако, на скрине не заметно использования хостлистов. Для тестов - ок. Потом добавьте rutor и прочее нужное, реально используемое.</p></td><td>2024-12-09T21:14:54.893Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Вот смотрите, blockcheck выдал мне три рабочие стратегии:<br>
–wf-l3=ipv4 --wf-tcp=80 --methodeol<br>
–wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fakedsplit --dpi-desync-ttl=6 --dpi-desync-split-pos=method+2<br>
–wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=6</p>
<p>По факту: вариант 1 и 2 работает, вариант 3 - Рутор бесконечно крутится и не открывается. Ладно, ОК, два варианта есть, уже хорошо. Но остается вопрос: как включить Zapret только для этого сайта. Я вот создал mylist.txt, вписал туда адрес Рутора. Пробую создать службу - получаю это:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/5524131f155da04263e1257bb07caa917885d83b.png" data-download-href="https://ntc.party/uploads/default/5524131f155da04263e1257bb07caa917885d83b" title="image"><img src="zapret-обсуждение-726/5524131f155da04263e1257bb07caa917885d83b.png" alt="image" data-base62-sha1="c9bSecl9X0kQSSw2yFjDFyM2eDx" width="690" height="360" data-dominant-color="111112"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">979×512 11.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Командный файл по созданию службы имеет такое содержимое:</p>
<blockquote>
<p>rem set ARGS=^<br>
–wf-l3=ipv4 --wf-tcp=80 --methodeol --hostlist="%~dp0mylist.txt"<br>
rem call :srvinst winws1<br>
goto :eof</p>
<p>:srvinst<br>
net stop %1<br>
sc delete %1<br>
sc create %1 binPath= “"%~dp0winws.exe" %ARGS%” DisplayName= “zapret DPI bypass : %1” start= auto<br>
sc description %1 “zapret DPI bypass software”<br>
sc start %1</p>
</blockquote></td><td>2024-12-10T12:44:58.809Z</td></tr><tr><td>bolvan</td><td><p>Если отталкиваться только от копипасты без понимания, далеко не уедешь.<br>
В данном батнике обходится только http. https не обходится.<br>
Стратегии надо конструировать а не копипастить</p>
<p>Так же надо разбираться в батниках. Хотя бы знать что такое rem.<br>
И начинать надо не со службы, а с простого запуска winws с параметрами</p></td><td>2024-12-10T12:54:30.735Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="Avatar-Lion" data-post="3773" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avatar-lion/48/8372_2.png" class="avatar"> Avatar-Lion:</div>
<blockquote>
<p>вариант 3 - Рутор бесконечно крутится</p>
</blockquote>
</aside>
<p>Не удивительно. Он теперь скорее всего ни у кого не вскроется одним только <code>--dpi-desync=fake</code> потому что фейк — это самое лайтовое вскрытие для везунчиков. Чаще нужны более весомые аргументы. Что касается <code>--wf</code> — это не часть стратегии, а глобальное подключение к трафику для winws, можно всегда указывать<br>
<code>--wf-tcp=80,443 --wf-udp=443</code><br>
и для обычного веба эта часть будет константой (udp тут на всякий случай для h3/quic, в частности для youtube, под который по-хорошему будут свои отдельные профили).<br>
Можно вообще не указывать <code>--wf-l3=ipv4</code> раз провайдер пока не дает ipv6</p>
<p>Предложил бы начать с изготовления своего батника на основе <code>preset_russia.cmd</code> <strong>АККУРАТНО</strong> убрав оттуда лишнее.</p></td><td>2024-12-10T13:33:34.701Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Так а нахрена тогда blockcheck предлагает мне эти нерабочие параметры? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-12-10T13:56:18.978Z</td></tr><tr><td>uwu(uwu)</td><td><p>так вы сначала определитесь, у вас сайт по http работает или по https</p></td><td>2024-12-10T14:03:29.246Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>По HTTP РуТор не открывается, только по HTTPS. Но не суть. Главное, что я подобрал, наконец, правильные ключи для создания службы:<br>
<strong>SC Create “Zapret Service” BinPath= “D:\Software\Zapret\zapret-winws\winws.exe --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=6 --hostlist=D:\Software\Zapret\zapret-winws\mylist.txt” DisplayName= “Zapret Service” Type= Own Start= Auto</strong></p>
<p>В общем-то, все ОК, служба запускается и работает, Рутор открывается. Но я ее пока удалил, т.к. теперь надо разобраться с Рутрекером.</p>
<p>blockcheck для Рутрекера выдал следующие результаты:<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=3<br>
ipv4 <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=20</p>
<p>С обоими сайт не открывается. В связи с чем вопрос: как, наконец, вправить мозги blockcheck’у, чтобы он выдавал только реально рабочие варианты?</p></td><td>2024-12-10T14:31:49.997Z</td></tr><tr><td>uwu(uwu)</td><td><p>рутрекер работает через cloudlfare encrypted client hello<br>
поэтому помимо самого рутрекера вам нужно добавить обход для<code> cloudflare-ech.com</code>  который не так давно был заблокирован  (курл в данном случае идет мимо CF)</p>
<p>сейчас уже нет случаев, когда ты нажал на кнопку и оно все заработало само=)</p></td><td>2024-12-10T14:34:29.456Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Что-то я не улавливаю… А что тогда blockcheck делает? Ведь по идее, он должен вообще ни одного рабочего варианта не выдать. А он выдал два. Оба неверные, правда, но он-то с какого-то перепугу посчитал что они рабочие. Вот что раздражает: инструмент для проверки блокировки не умеет определять блокировку. Или я чего-то не понимаю?</p></td><td>2024-12-10T14:39:26.840Z</td></tr><tr><td>uwu(uwu)</td><td><p>в браузерах используется принудительная работа ECH<br>
в блокчеке ее нет</p></td><td>2024-12-10T14:40:17.397Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>И как добавить ее? Хотя я не уверен есть ли в этом смысл. Вот вывод проверки <a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a>:<br>
ipv4 <a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a> curl_test_http3 : working without bypass</p></td><td>2024-12-10T14:41:34.173Z</td></tr><tr><td>uwu(uwu)</td><td><p>сам сайт не заблокирован, блокируется только в том случае если идет в составе client hello<br>
через блокчек нужную стратегию для этого не подобрать<br>
либо подбираете альтернативным способом, либо используете различные сборки или советы с форума<br>
например:<br>
<code>--wf-tcp=443 --filter-tcp=443 --dpi-desync=multisplit --dpi-desync-split-seqovl=1</code>  и прикрутить к этому хостлист с cloudflare-ech</p></td><td>2024-12-10T14:42:42.407Z</td></tr><tr><td>ravn</td><td><p>Добрый вечер.</p>
<p>Zapret помогает на большинстве сайтов куда лучше, чем GoodbyeDPI, но для некоторых доменов не получается подобрать ни одну стратегию для Zapret, хотя имею рабочую для GoodbyeDPI.</p>
<p>Прогонял Гудчек часами и пытался перевести вручную, с 0 успешных попыток. Помогите, пожалуйста, сконвертировать, если это возможно. Для GoodbyeDPI стратегия выглядит так:</p>
<blockquote>
<p><code>-f2 -e2 -q -s -r -m --native-frag --frag-by-sni --wrong-chksum --set-ttl 7 --fake-with-sni fonts.google.com --fake-from-hex 160303</code></p>
</blockquote>
<p>Мои нерабочая попытка конвертации:</p>
<blockquote>
<p><code>--hostspell=hoSt --domcase --hostnospace --dpi-desync=fake,split --dpi-desync-split-pos=sni --dpi-desync-fooling=badsum --dpi-desync-ttl=7 --dpi-desync-fake-tls=0x16030301</code></p>
</blockquote></td><td>2024-12-10T14:46:27.584Z</td></tr><tr><td>bolvan</td><td><p>TLS ClientHello с <a href="http://fonts.google.com">fonts.google.com</a> придется записать отдельно через шарк или netcat+curl<br>
в первом приближении, неточно, но хоть как-то<br>
–dpi-desync=fake,fakedsplit --dpi-desync-split-pos=midsld --dpi-desync-fooling=badsum --dpi-desync-ttl=7 --dpi-desync-fake-tls=/path/to/tls_clienthello_fonts_google_com.bin --dpi-desync-fakedsplit-pattern=0x160303</p>
<p>вся мишура с http смысла не имеет на https</p></td><td>2024-12-10T14:53:20.218Z</td></tr><tr><td>abc555</td><td><aside class="quote no-group" data-username="bolvan" data-post="3785" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ttl=7</p>
</blockquote>
</aside>
<p>попробуй увеличить, точнее пока подбираешь вообще его убери, как начнёт всё работать, тогда подбери нужное значение, можно методом тыка</p></td><td>2024-12-10T14:55:30.302Z</td></tr><tr><td>bolvan</td><td><p>Блокчек гонит curl без ECH, броузер гонит с ECH.<br>
Блокчек находит рабочие варианты для curl, на броузере может быть другое, но это надо себе мозги вправить, чтобы догнать</p>
<p>Как говорит блокчек, я не делатель волшебных пиллюль. Я нашел что нашел, дальше сам думай</p></td><td>2024-12-10T14:57:35.157Z</td></tr><tr><td>abc555</td><td><p>а можно ли в новой версии добавить новый параметр --dpi-desync-multisplit-pattern ?<br>
У меня хорошо работает на --dpi-desync=fake,multisplit и не знаю поможет ли сделать лучше с multisplit-pattern, но было бы прикольно</p></td><td>2024-12-10T15:02:43.600Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p><a class="mention" href="/u/avatar-lion">@Avatar-Lion</a> можете попробовать мой вариант. Пути к файлам, очевидно, поправьте под свои. Конфиг не менял уже месяца три =)<br>
Отдельно ещё использую бесплатный vpn от okno.digital (не реклама) через клиент nekobox в качестве прокси, указанного конкретно в настройках нужного софта, для обхода регион-лока ряда сайтов (навроде midjourney/chatgpt) и для обхода блокировки торрент-серверов - ибо запретом у меня не получилось пробить их у рутрекера/лостфильма (как мне объяснили - запрет тут и не должен помогать).</p>
<p><code>C:\Soft\zapret\zapret-winws\winws.exe --wf-l3=ipv4 --wf-tcp=443 --wf-udp=443,50000-50050 --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-any-protocol --new --filter-tcp=443 --hostlist=C:\Soft\zapret\zapret-winws\googlevideo.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --dpi-desync-repeats=10 --new --filter-tcp=443 --hostlist-auto=C:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --new --filter-udp=443 --dpi-desync=fake --dpi-desync-fake-quic=C:\Soft\zapret\my_fakes\quic_pl_by_ori.bin</code><br>
<a class="attachment" href="zapret-обсуждение-726/pLX6H1oGoZOouCSN0ZeepHPVTVy.txt">googlevideo.txt</a> (16 байтов)<br>
<a class="attachment" href="zapret-обсуждение-726/qRWO7ltlGpKMOLasGg1Jk3Kqf1b.bin">tls_clienthello_drive_google_com.bin</a> (316 байтов)<br>
<a class="attachment" href="zapret-обсуждение-726/ksqKXXbdz1PHKh6h8Nt78XOWVLm.txt">blocked.txt</a> (2,2 МБ)<br>
<a class="attachment" href="zapret-обсуждение-726/v7HriP1fQ8QRE90ZCskenJQOCE5.bin">quic_initial_drive_google_com_2024_10_29_squeezed.bin</a> (136 байтов)</p>
<details>
<summary>
примерные настройки в nekobox</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/6d8cedea90900d901bb83f9795be6fc8201c8fe4.png" data-download-href="https://ntc.party/uploads/default/6d8cedea90900d901bb83f9795be6fc8201c8fe4" title="image"><img src="zapret-обсуждение-726/6d8cedea90900d901bb83f9795be6fc8201c8fe4.png" alt="image" data-base62-sha1="fD7Z0EygcXzTnU9msCJ1btHU2SU" width="634" height="500" data-dominant-color="434242"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">802×632 17.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2024-12-10T15:10:44.096Z</td></tr><tr><td>bolvan</td><td><p>pattern относится к фейкам. multisplit не включает отсылку фейков</p></td><td>2024-12-10T15:17:45.104Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Охренеть. Круто! Большое спасибо, и впрямь, все работает - и Рутор, и Рутрекер, и все остальное. Только он первый раз выдал could not read quic_pl_by_ori.bin - посмотрел, и впрямь, нет такого файла. Запустил пока без этого параметра. Ничего страшного?</p></td><td>2024-12-10T15:25:42.751Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Почему-то название файла при заливке поменялось - переименуйте просто то что начинается с <code>quic</code> в тот, что указан в конфиге =)</p></td><td>2024-12-10T15:33:45.825Z</td></tr><tr><td>ravn</td><td><p>Огромное спасибо, с <code>fake,fakedsplit</code> всё получилось!</p></td><td>2024-12-10T15:46:42.024Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Благодарю. Все получилось. Еще раз большое спасибо.</p></td><td>2024-12-10T16:49:11.447Z</td></tr><tr><td>KDS</td><td><p>Оно не “почему-то поменялось” ) С каким именем было изначально “вам” скинуто, с тем и заливается. 2 раза файл с одним и тем же хешем на форум не заливаются, я так понял, для экономии места</p>
<p><a class="mention" href="/u/avatar-lion">@Avatar-Lion</a> Страшного ничего, ну не будет квик на гугле работать, но кому он там нужен )</p></td><td>2024-12-10T17:29:43.078Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Интересно, не знал о такой особенности этого форума. Ну в целом грамотно <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-12-10T17:37:14.866Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>вся мишура с http смысла не имеет на https</p>
</blockquote>
</aside>
<p>Бывают сервер сайд редиректы через 80 порт. Если легко вскрывается, то почему бы и не иметь это в профилях чтобы не ловить тупняк.</p>
<aside class="quote no-group" data-username="Avatar-Lion" data-post="3791" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avatar-lion/48/8372_2.png" class="avatar"> Avatar-Lion:</div>
<blockquote>
<p>нет такого файла</p>
</blockquote>
</aside>
<p>Не проблема.<br>
<a class="attachment" href="zapret-обсуждение-726/vuyeKDepy9MIgyBqRIM8sGhwJIM.bin">quic.bin</a> (144 байта)<br>
Может пригодиться для youtube или еще чего-нибудь.</p></td><td>2024-12-10T18:11:36.172Z</td></tr><tr><td>bolvan</td><td><p>hostcase domcase не работают в RU<br>
только methodeol</p></td><td>2024-12-10T18:35:08.927Z</td></tr><tr><td>i-no(...)</td><td><p>Думал, что уже ничего из этого не работает и даже не проверял.</p>
<p>Обращаю на http внимание прежде всего тех, кто настраивает всё не себе, а кому-то другому.</p></td><td>2024-12-10T19:43:35.019Z</td></tr><tr><td>tinker</td><td><p>Как правильно настроить связь хоста с запретом на виртуалке?</p></td><td>2024-12-11T10:32:50.622Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="uwu" data-post="3779" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>помимо самого рутрекера вам нужно добавить обход для<code> cloudflare-ech.com</code> который не так давно был заблокирован</p>
</blockquote>
</aside>
<details>
<summary>
похоже что cloudflare-ech.com может блокироваться как-то динамически ...</summary>
<p>…если регуляторной аппаратуре удается скоррелировать его с трафиком на какие-нибудь реально мразотные сайты, против истребления которых никто бы не возражал. Есть еще какие-то периоды “остывания” и даже автодеблокирования, с чем конкретно связанные сразу точно не скажешь. Может есть какие-то статистические рисковые модели, которые кормятся сводной цифрой из трафика всех клиентов или больших сегментов.</p>
<p>По идее вскрывается легко по</p>
<p><code>--hostlist-domains=cloudflare-ech.com --dpi-desync=fake,fakedsplit --dpi-desync-fooling=ВАШ_ФУЛИНГ</code></p>
<p>Эту конструкцию без внедрения в хостлисты я бы добавлял в конец (в низ) всей мультистратегии. По ipv4 пинг преимущественно очень низкий, по ipv6 в районе ~21, из-за этой разницы не подберешь какой-то константный TTL, поэтому понадобится какой-нибудь фулинг, и хорошо зарекомендовали себя hopbyhop и md5sig. Можно указать их оба через запятую. Без фулинга не вскроется т.к. сидит на куче разных айпи. Обнаружил разницу из-за примененного фулинга в скорости реакции сайта, но она очень маленькая, в районе десятой доли секунды.</p>
</details></td><td>2024-12-11T11:04:31.594Z</td></tr><tr><td>bolvan</td><td><p>В виртуалке создать 2 интерфейса. 1 из них подцепить мостом к сетевухе с инетом. Это будет WAN.<br>
На хосте снять привязку всех IP протоколов с сетевухи с инетом.<br>
2-й интерфейс на виртуалке сделать host-only. Это будет LAN.<br>
Ответную часть LAN на хосте настроить обычным образом<br>
По желанию отказ от NAT в виртуалке с прописью статического маршрута на основном роутере до подсети за виртуалкой.</p></td><td>2024-12-11T11:05:56.365Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="3801" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>По ipv4 пинг преимущественно очень низкий, по ipv6 в районе ~21, из-за этой разницы не подберешь какой-то константный TTL</p>
</blockquote>
</aside>
<p>Есть отдельные TTL для 4 и 6</p></td><td>2024-12-11T11:07:48.470Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>Есть отдельные TTL для 4 и 6</p>
</blockquote>
<p>К счастью. Тогда профиль дробится на два и для ipv6 тут можно вместо фулинга задействовать TTL. А по ipv4 сервер как будто в соседнем доме через улицу, вместе с вплотную приклеенной к нему регуляторикой.</p></td><td>2024-12-11T11:15:56.363Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="i-no" data-post="3801" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>поэтому понадобится какой-нибудь фулинг</p>
</blockquote>
</aside>
<p>Использую <code>badseq</code> по сути с самого начала как стал пользоваться zapret’ом. Конфиг не менял уже месяца три - так что проблему с cloudflare внезапно даже и не заметил. Только вот на ntc читал <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-12-11T11:28:04.759Z</td></tr><tr><td>i-no(...)</td><td><p><code>badseq</code> если и не ломает, то хорошо, но может чуть-чуть замедлять<br>
впрочем, это не всегда заметно и мешает</p></td><td>2024-12-11T11:52:38.160Z</td></tr><tr><td>uwu(uwu)</td><td><p>меня больше беспокоят динамические блокировки, когда тспу вместо дропа пакетов включает блок по ip<br>
на билайне сайт <code>https://dnsleaktest.com/</code><br>
я пока что заметил следующую логику:</p>
<ol>
<li>если зайти с откл. запретом, сайт не открывается, затем включается блок (который ничем не пробить), через 15 минут он сбрасывается.</li>
<li>если зайти с включенным запретом, то сайт открывается.</li>
<li>если на сайте выполнить тест dns (который правда просто зависает) - то он опять улетает в блок (вероятно трафик уходит на какой то другой домен и тспу опять видит и вместо дропа делает блок)</li>
</ol>
<p>возможно это некая защита у тспу от автохостлиста запрета хз<br>
либо я неправильно читаю лог шарка -_-</p></td><td>2024-12-11T11:58:13.669Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="i-no" data-post="3806" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>впрочем, это не всегда заметно и мешает</p>
</blockquote>
</aside>
<p>Меня просто смущает немного, что <code>md5sig</code> работает только/преимущественно с linux-серверами. Я знаю, что их большинство в сети, но всё же как часта в реальной жизни ситуация, когда он может вызвать проблемы?<br>
<strong>upd.</strong> поменял у себя в конфиге на <code>md5sig</code>, посмотрю как оно будет в плане совместимости. Но вроде чуть шустрее сайты открываются.</p>
<aside class="quote no-group" data-username="uwu" data-post="3807" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>если зайти с включенным запретом, то сайт открывается.</p>
</blockquote>
</aside>
<p>У меня он и с включённым zapret’ом не открылся. Довольно неожиданно.</p></td><td>2024-12-11T12:17:19.288Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="uwu" data-post="3807" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>меня больше беспокоят динамические блокировки</p>
</blockquote>
</aside>
<p>Подлая вещь. Там и сям время от времени подобное всплывает. Может, кто-то найдет в себе силы немного систематизировать и в отдельную темку собрать наблюдения, или хотя бы почаще подмечать и протоколировать. Типа, подключишься куда-то в обычное место но “не тем” инструментом, и отваливается ssh, хорошо если только на нестандартных портах. Или посканишь блокчеком или чем-то еще со злыми кастомными параметрами, и отваливается куча разных публичных dns серверов, обычных, не DoH, в том числе яндексовые, на запросах от почтового клиента (DKIM и прочее).</p>
<aside class="quote no-group quote-modified" data-username="arinoki" data-post="3808" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p><code>md5sig</code> &lt;…&gt; может вызвать проблемы?</p>
</blockquote>
</aside>
<p>Это, насколько я понимаю, не такая фундаментальная вещь, как контрольная сумма пакета или сиквенс нумерация. По моим наблюдениям косвенного влияния именно на регуляторику пока не замечаю. В отличие от badseq, seqovl (хотя это все полезные вещи).</p>
<blockquote>
<p><strong>upd</strong> Но вроде чуть шустрее сайты открываются.</p>
</blockquote>
<p>Вот-вот.</p>
<aside class="quote no-group" data-username="uwu" data-post="3807" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p><code>https://dnsleaktest.com/</code></p>
</blockquote>
</aside>
<details>
<summary>
Вот такое может сработать</summary>
<p><code>--dpi-desync=fake,multisplit --dpi-desync-repeats=2 --dpi-desync-split-pos=1,midsld+1,sniext+1,endhost-2,-10 --dpi-desync-fooling=md5sig</code></p>
</details>
<p>Добавил в лист, после этого открылся, протестировал разок — перестал открываться. Набычился типа)</p>
<blockquote>
<p>после этого</p>
</blockquote>
<p>Хотя, после не значит в следствие.</p></td><td>2024-12-11T12:32:52.460Z</td></tr><tr><td>bolvan</td><td><p>На dnsleak тесте вряд ли есть блок.<br>
У меня на нескольких провайдерах норм, на одном виснет после конекта при любых SNI.<br>
<a href="http://dnsleaktest.com">dnsleaktest.com</a> на других IP не вызывает зависания.<br>
Что-то с сервером. Он сам набычился. Защищается от дос атак<br>
На рутракере однажды было похожее. само прошло на след день</p></td><td>2024-12-11T12:43:54.604Z</td></tr><tr><td>bolvan</td><td><blockquote>
<p>Меня просто смущает немного, что <code>md5sig</code> работает только/преимущественно с linux-серверами. Я знаю, что их большинство в сети, но всё же как часта в реальной жизни ситуация, когда он может вызвать проблемы?</p>
</blockquote>
<p>Достаточно часто, чтобы 1 из 20 сломался</p></td><td>2024-12-11T12:45:27.101Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3810" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Что-то с сервером. Он сам набычился. Защищается от дос атак</p>
</blockquote>
</aside>
<p>понятно, правда получается, что запрет частично пробивает его ddos защиту, потому что после снятия блока по стандартному конфигу для tls1.3 <code> --dpi-desync=multisplit --dpi-desync-split-seqovl=1</code> на сайт заходит и там можно тыкать все, кроме теста<br>
а без запрета сразу же блок прилетает</p></td><td>2024-12-11T13:00:26.537Z</td></tr><tr><td>tinker</td><td><p>Вот допустим выпал мне нормальный рабочий айпи для сайта, на винде нужно закинуть его в хост, а как тоже самое сделать на уровне роутера?</p></td><td>2024-12-11T14:50:14.643Z</td></tr><tr><td>bolvan</td><td><p>Если openwrt, то</p>
<p>/etc/hosts<br>
или /etc/config/dhcp</p>
<p>service dnsmasq restart</p></td><td>2024-12-11T15:02:36.959Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="bolvan" data-post="3811" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Достаточно часто, чтобы 1 из 20 сломался</p>
</blockquote>
</aside>
<p>Хм, то есть в принципе как workaround можно сделать отдельный hostlist, куда добавлять ручками несовместимые с <code>md5sig</code> хосты.</p>
<p><code>--new --filter-tcp=443 --hostlist=C:\Soft\zapret\zapret-winws\blocked-badseq.txt --dpi-desync=fake,split --dpi-desync-fooling=badseq --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --new --filter-tcp=443 --hostlist-auto=C:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin</code></p></td><td>2024-12-12T01:58:35.638Z</td></tr><tr><td>bolvan</td><td><p>Прежде чем плодить крокодилов, лучше несколько раз подумать как это можно приравнять к общему знаменателю.<br>
Обычно вариант находится.</p>
<p>Можно все их на badseq повесить. Можно сделать badseq,md5sig. Двойной фулинг</p></td><td>2024-12-12T06:17:59.168Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Доброе утроУ меня вот такие ошибки Вылазиют. Когда я Включаю<br>
Запрет но сам запрет работает Как это исправить</p>
<details>
<summary>
Спойлер</summary>
<p>seccomp: Invalid argument<br>
recv: errno 105<br>
recv: No buffer space available</p>
</details></td><td>2024-12-12T06:47:34.141Z</td></tr><tr><td>bolvan</td><td><p>Кинетик ? Исправлял это в 69.6<br>
seccomp это нормально для кинетика<br>
В целом даже на старой версии если это случается не сплошной простыней, а иногда, если процесс не выходит, то это нормальная процедура восстановления из стандартной для NFQUEUE ошибки ENOBUFS</p></td><td>2024-12-12T07:08:35.784Z</td></tr><tr><td>easyone11</td><td><details>
<summary>
оффтопик про обфускацию</summary>
<p>Задам глупый вопрос тем кто разбирается, может как то лакончино можно будет ответить).<br>
VPN которые еще работают у нас используют, как я читал “обфускацию”, это же тоже дурения трафика на сколько я понял или нет?<br>
Если да, то нельзя такой же метод использовать в запрете? или это совсем другое и связи никакой нет?</p>
</details></td><td>2024-12-12T07:41:37.579Z</td></tr><tr><td>bolvan</td><td><p>Нет связи. Чтобы что-то обфусцировать, о  методе обфускации должны знать оба конца.<br>
Очевидно , стандартные сервера не знают что ты там себе решил придумать</p></td><td>2024-12-12T08:02:34.857Z</td></tr><tr><td>rkn-chan</td><td><details>
<summary>
ответ про обфускацию</summary>
<p>обфускация это не дурение и там отчетливо видны паттерны и определяется весь этот мусорный траффик как… мусор. раз определяется значит дурения нету. сегодня можно сказать что обфускация как технология устарела, и скорее наоборот делает тебя более уязвимым потому что траффику нужен узнаваемый стандарт <span class="spoiler">по госту</span></p>
</details></td><td>2024-12-12T08:20:49.041Z</td></tr><tr><td>KDS</td><td><details>
<summary>
Еще ответ</summary>
<p>Можно. Надо заставить коробку думать, что твой коннект - это не условный опенвпн. Порт впна, фейк и десинкэни с репитами в руки. У меня так работает опенвпн по udp безо всяких обфускаций.</p>
</details></td><td>2024-12-12T08:25:39.102Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>У меня прошивка. 4.2.3. Роутер Keenetic peak</p></td><td>2024-12-12T08:27:53.866Z</td></tr><tr><td>easyone11</td><td><p>всем спасибо)</p></td><td>2024-12-12T08:27:59.574Z</td></tr><tr><td>GAME-OVER-op(Game Over Op)</td><td><aside class="quote no-group" data-username="uwu" data-post="3807" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>если на сайте выполнить</p>
</blockquote>
</aside>
<p>Кстати по этому поводу<br>
Сайт открылся под dpi tunnel cli<br>
Тест идёт по показывает нули, это нормально?</p></td><td>2024-12-12T08:45:50.693Z</td></tr><tr><td>rkn-chan</td><td><p>можно ли защитить запретом рукопожатие ssh протокола от спуфа например по ipset через какой нибудь syndata? и если да то как понять защитилось ли? с обычными сайтами все понятно, если пробивает то работает, а тут как будет и какая стратегия нужна чтобы наверняка?</p>
<p>здесь в соседних тредах говорят что чистый ssh может выдать ip для dpi и он нахрен заблочит ip целиком как в иране, а у меня появилась возможность покапаться у друга на домашнем пай сервере в свободной стране, резиденские ip как мана божья насколько я понимаю, но я сильно ссыкую подключаться не подготовившись</p></td><td>2024-12-12T13:21:41.026Z</td></tr><tr><td>bolvan</td><td><p>zapret дурит DPI. Что делает DPI - блокирует сайт или IP или трафик шейпит или сливает инфу маркетологам - ему все равно.<br>
Для дурения произвольных протоколов есть --dpi-desync-any-protocol, но при этом важно помнить про ограничители по connbytes или --dpi-desync-start/–dpi-desync-cutoff, чтобы не создать  флуд трэш конфигурацию.<br>
В данном случае в отличие от веб сайта результат сразу может быть не очевиден, тк неясно как проверять. Прям сразу может и не заблокировать. Только время может показывать</p></td><td>2024-12-12T14:05:18.983Z</td></tr><tr><td>i-no(...)</td><td><p>Я бы такое лучше затуннелировал. Любым способом.</p>
<details>
<summary>
. . .</summary>
<p>Точка выхода примерно там же где и SSH. Туннель уже обложить бы превентивно задурами, на которые zapret технически способен.</p>
<p>SSH может быть и не трогали бы вовсе, но он и сам по себе может быть применен для обхода. Хотя, в краткосрочной перспективе не предвижу, что у высокого начальства появится воля всё и всем сломать. Динамика, как понимаю, направлена прежде всего на то, чтобы усложнить анализ и подбор обходных техник. Пока не произошла социальная катастрофа, не сменилось начальство и людям не стало не до интернетов, ничего очень кардинально не поменяется.</p>
</details></td><td>2024-12-12T14:07:56.831Z</td></tr><tr><td>Avatar-Lion(Avatar Lion)</td><td><p>Вопрос: а при каких условиях сайт попадет в autohostlist.txt? Поигрался с preset_russia_autohostlist - в том плане поигрался, что начал тестировать его на различной запрещенке. В итоге в текстовый файлик попали такие ресурсы как rutor.info, <a href="http://cloudflare-ech.com" rel="noopener nofollow ugc">cloudflare-ech.com</a>, ntc.party - но вот <a href="http://instagram.com" rel="noopener nofollow ugc">instagram.com</a> упорно не желает прописываться в autohostlist.txt - почему так? Уже минут 10 долблю его обновлением страницы через F5, но воз и ныне там.</p></td><td>2024-12-12T15:02:57.094Z</td></tr><tr><td>easyone11</td><td><p>3 неудачных ответа от сайта если не ошибаюсь, и тогда попадает в autohostlist<br>
по инсте может быть связано с блокировкой по IP, обсуждение тут <a href="https://ntc.party/t/%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D1%8B-instagram-%D0%B8-facebook/11822" class="inline-onebox">Домены instagram и facebook</a></p></td><td>2024-12-12T15:19:30.431Z</td></tr><tr><td>bolvan</td><td><p>У инсты могут быть заблочены отдельные IP.<br>
В этом случае реакции zapret не будет.<br>
Алгоритм подробно расписан в доке</p></td><td>2024-12-12T15:21:21.909Z</td></tr><tr><td>easyone11</td><td><p>Как то давно на гитхабе предлагал сделать режим работы для autohostlist другим, чтобы туда попадали сайты которые удачно дурятся, а не все что недоступны, если не ошибаюсь ты отвечал что это возможно, но сложно и вроде бы не до этого.<br>
В итоге нет в планах такое реализовать?</p></td><td>2024-12-12T15:29:29.900Z</td></tr><tr><td>bolvan</td><td><p>Да, это довольно сложно кодить. Пока нет в планах</p></td><td>2024-12-12T15:44:58.433Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Прописал данные домены в “zapret-hosts-user-ipban.txt”. Загрузка не проходит. WG поднят.</p></td><td>2024-12-12T17:34:11.759Z</td></tr><tr><td>easyone11</td><td><p>не очень понимаю в чём суть действий</p></td><td>2024-12-12T17:52:58.832Z</td></tr><tr><td>MAMBA(Samatov)</td><td><p>Трафик на ntc успешно уходит в туленль. На инсту открывается только логотип.</p></td><td>2024-12-12T18:03:52.188Z</td></tr><tr><td>abc555</td><td><p>На трёх разных провах ютуб работает минуту и видео останавливается, кучу вариантов перепробовал, гонял блок чеком и результата ноль, на четвёртом прове пока что работает.<br>
Пробовал много вариантов и днс и многое чего и квик и всё равно не покатило, нет идей куда смотреть ?</p></td><td>2024-12-13T08:53:45.757Z</td></tr><tr><td>exz</td><td><p>проксируйте *.googleapis.com</p></td><td>2024-12-13T10:25:59.505Z</td></tr><tr><td>easyone11</td><td><h4><a name="p-72473-nfqws-trash-flood-checkhttpsgithubcombol-vanzapretcommitdcf78a76e52571c127cb87030a16000e6b380add-1" class="anchor" href="#p-72473-nfqws-trash-flood-checkhttpsgithubcombol-vanzapretcommitdcf78a76e52571c127cb87030a16000e6b380add-1"></a><a href="https://github.com/bol-van/zapret/commit/dcf78a76e52571c127cb87030a16000e6b380add">nfqws: trash flood check</a></h4>
<p>устал )</p></td><td>2024-12-13T13:04:31.996Z</td></tr><tr><td>ButtBeware(Pavel)</td><td><p>здоровья тебе побольше, сутки мучался с подбором конфига, добавления по советам с реддита домена в хостс. ща докинул в хомяка этот домен в списки проксируемых и все сразу завелось</p></td><td>2024-12-13T13:36:10.776Z</td></tr><tr><td>bolvan</td><td><p>Это только варнинг. Громкий крик. Авось обратят внимание.<br>
Но есть и правда нормальные случаи такой конфигурации.<br>
Только на винде это недоступно чайникам. Надо писать свой --wf-raw фильтр</p></td><td>2024-12-13T13:38:16.274Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="3841" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>–wf-raw</p>
</blockquote>
</aside>
<p>Есть какой-нибудь хитрый кейс под рукой в качестве примера?</p></td><td>2024-12-13T17:45:22.857Z</td></tr><tr><td>bolvan</td><td><p>winws --wf-tcp=80,443 --wf-udp=443 --wf-save=default_filter.txt<br>
на основе его и руководствуясь докой по windivert фильтрам</p>
<p>но для начала надо определиться с целью зачем это надо</p></td><td>2024-12-13T18:05:49.501Z</td></tr><tr><td>electrifying</td><td><p>А в кастомных скриптах в имён файлах за что отвечают цифры, почему одни начинаются с 50, другие 10, а ещё какие-то 20. Ну мне просто интересно это какая-то логика работы и наименование скриптов должно начинаться с определенной цифры или это просто так сделано?</p></td><td>2024-12-13T18:31:08.676Z</td></tr><tr><td>bolvan</td><td><p>алфавитный порядок запуска. стандартная схема в unix-ах в .d директориях</p></td><td>2024-12-13T18:51:07.174Z</td></tr><tr><td>TyroSpy</td><td><p>Смотрю автор изменил нумерацию версий, а чего v69.4 не вынесли в мажорную, в ней значимое изменение, по обрамлению фейками. Или может ввести триадную нумерацию xx.xx.xx?</p></td><td>2024-12-14T06:27:01.516Z</td></tr><tr><td>TyroSpy</td><td><aside class="quote no-group" data-username="gnus" data-post="3493" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/7993a0/48.png" class="avatar"> gnus:</div>
<blockquote>
<p>quic_pl_by_ori.bin</p>
</blockquote>
</aside>
<p>А что у вас внутри этого файлика? И какого он размера?<br>
Еще интересно поведение nfqws, если указан параметр --dpi-desync-any-protocol и фильтр в виде hostlist, но nfqws не может опознать протокол (GQUIC), что будет в этом случае, это профиль не будет применятся?</p></td><td>2024-12-14T07:14:58.049Z</td></tr><tr><td>bolvan</td><td><p>Там по капле добавлялось что-то. В мажоре целый список всего.</p></td><td>2024-12-14T07:57:11.744Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote no-group" data-username="TyroSpy" data-post="3849" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/tyrospy/48/13410_2.png" class="avatar"> TyroSpy:</div>
<blockquote>
<p>А что у вас внутри этого файлика? И какого он размера?</p>
</blockquote>
</aside>
<p>Вот, можете глянуть =)<br>
<a class="attachment" href="zapret-обсуждение-726/v7HriP1fQ8QRE90ZCskenJQOCE5.bin">quic_pl_by_ori.bin</a> (136 байтов)</p></td><td>2024-12-14T08:20:07.030Z</td></tr><tr><td>TyroSpy</td><td><aside class="quote no-group" data-username="gnus" data-post="3493" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/g/7993a0/48.png" class="avatar"> gnus:</div>
<blockquote>
<p>quic_pl_by_ori.bin</p>
</blockquote>
</aside>
<p>Спасибо. С вашим файликом работает, как в прочем у меня и работает стандартный метод без --dpi-desync-any-protocol. Вообще HTTP3 это стандарт я не понимаю чем QUIC от Гугла может отличаться. Может у вас совсем древний андроид и какая-то начальная реализация квика?</p></td><td>2024-12-14T08:54:32.396Z</td></tr><tr><td>bolvan</td><td><p>у QUIC есть множество подверсий.<br>
IETF quic и большинство драфтов работают с TLS<br>
GQUIC работает с проприетарным крипто от гугола.<br>
там содержимое совсем другое под шифром.<br>
и обмен ключами другой.<br>
этот протокол уже deprecated, но в гугловских прогах как видно сохранился. не стали переделывать</p></td><td>2024-12-14T11:26:23.511Z</td></tr><tr><td>mike7</td><td><aside class="quote no-group" data-username="bolvan" data-post="3853" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>GQUIC работает с проприетарным крипто от гугола.<br>
там содержимое совсем другое под шифром.<br>
и обмен ключами другой.<br>
этот протокол уже deprecated, но в гугловских прогах как видно сохранился. не стали переделывать</p>
</blockquote>
</aside>
<p>Но ТСПУ видать его сечет <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p></td><td>2024-12-14T12:15:59.659Z</td></tr><tr><td>bolvan</td><td><p>Да, может и сечет. Но вряд ли по имени хоста, которое оно оттуда как-то вытащило.<br>
Даже шарк не может.<br>
Потому по самому факту протокола и по IP диапазонам только</p></td><td>2024-12-14T12:39:01.639Z</td></tr><tr><td>mike7</td><td><p>Может можно сам факт протокола определить? Тогда можно <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/3493">такой обход</a> использовать. Понимаю, что это только с ipset нормально работать будет, но может кому пригодится</p></td><td>2024-12-14T12:50:17.083Z</td></tr><tr><td>bolvan</td><td><p>А что это меняет ? Даже если я сделаю распознавание протокола, то хостлисты будет не прикрутить.<br>
Будет как с wireguard</p></td><td>2024-12-14T13:49:36.422Z</td></tr><tr><td>abc</td><td><p>Извиняюсь, что встреваю. Речь про GQUICK? SNI в шарке видны:</p>
<details>
<summary>
shark</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/209f036f373f480fe131bcc77113d178f463ad3c.png" data-download-href="https://ntc.party/uploads/default/209f036f373f480fe131bcc77113d178f463ad3c" title="image"><img src="zapret-обсуждение-726/209f036f373f480fe131bcc77113d178f463ad3c.png" alt="image" data-base62-sha1="4EzXKyZAlYAnQt6aYmQADb17QC0" width="690" height="401" data-dominant-color="EDEEEF"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1035×602 23.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>Тоже с таким случаем пока не решил вопрос: всё нормально на ютуб ходит (и через TCP, и через QUICK), а вот tvbox один на каком-то не самом свежем Chromium, видимо, не хочет. Через туннель нормально, а через запрет стопорится. Причём как-то странно, что через туннель box устанавливает соединения по TLSv1.2, а через запрет идёт почему то TLSv1.</p></td><td>2024-12-14T14:32:34.903Z</td></tr><tr><td>bolvan</td><td><p>Он вроде переконективается с запомненными ключами и уже без открытой части.<br>
Но мне не на чем проверять. На эмуляторе ATV не идет</p>
<blockquote>
<p>через запрет идёт почему то TLSv1.</p>
</blockquote>
<p>Мог быть подсунут левый фейк типа 0x160303, и потом шарк стал интерпретировать протокол как какой-то TLS</p></td><td>2024-12-14T14:56:29.394Z</td></tr><tr><td>abc</td><td><aside class="quote no-group" data-username="bolvan" data-post="3859" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Мог быть подсунут левый фейк типа 0x160303, и потом шарк стал интерпретировать протокол как какой-то TLS</p>
</blockquote>
</aside>
<p>Глянул лог ещё раз: v1 появляется ещё до входа в запрет.</p></td><td>2024-12-14T18:25:35.397Z</td></tr><tr><td>abc</td><td><aside class="quote no-group" data-username="bolvan" data-post="3859" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Но мне не на чем проверять. На эмуляторе ATV не идет</p>
</blockquote>
</aside>
<p>Возможно, на железке не самая новая версия Chromium. Если я правильно понимаю, TLSv1/TLSv1.1 deprecated начиная с версии 72. Скачал <a href="https://github.com/macchrome/winchrome/releases/tag/v68.0.3403.0-r552589-Win64" rel="noopener nofollow ugc">Chromium v68.0.3403.0-r552589-Win64</a> , получил похожее с железкой поведение: на <a href="http://google.ru" rel="noopener nofollow ugc">google.ru</a> Хром идёт по TLSv1.2, на ютуб через TLSv1, как будто на этапе SYN, ACK что-то отсекается. Есть какие-то особенности для работы TLSv1 через dvtws? Декодируется через:</p>
<details>
<summary>
Summary</summary>
<p>–hostlist=russia-youtube.txt --dpi-desync=multisplit --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=midsld+1</p>
</details></td><td>2024-12-16T12:23:13.295Z</td></tr><tr><td>bolvan</td><td><p>Я говорил про приложение ATV. Под genymotion оно у меня не грузило даже через VPN в NL.<br>
Дальше не стал копать.</p>
<p>Чтобы посмотреть видит ли он TLS надо дебаг глянуть. Если есть “packet contains TLS ClientHello” и видит hostname, значит все нормально</p></td><td>2024-12-16T13:04:21.769Z</td></tr><tr><td>abc</td><td><aside class="quote no-group" data-username="bolvan" data-post="3862" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Чтобы посмотреть видит ли он TLS надо дебаг глянуть</p>
</blockquote>
</aside>
<p>Починилось дропом udp/443 и:</p>
<details>
<summary>
Summary</summary>
<p>–dpi-desync=fake,multisplit --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=midsld-1 --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=tls_clienthello_4.bin --dpi-desync-autottl</p>
</details>
<p>Видимо, есть особенности работы у этой железки, отличающиеся от свежих десктопных версий браузеров. Спасибо!</p></td><td>2024-12-16T13:39:31.112Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>теоретический вопрос: может ли SSL handshake failed Error code 525 клаудфлара быть последствием dpi или zapret ?</p>
<p>сайт <a href="http://animejoy.ru" rel="noopener nofollow ugc">animejoy.ru</a> - всегда без тупняков открывался, но как заблочили = стало 50на50 525 или нормальное открытие</p>
<p>причём именно на 443 траблы. по 80 100из100 с запретом доходит до 301 на https и после этого 50на50</p>
<p>и  как ни стараюсь на своём прове - не найти стратегии чтоб блокчек 15из15 попыток поимел успех. но на другом прове при простом fake с ttl 15из15 гут</p></td><td>2024-12-16T13:56:51.950Z</td></tr><tr><td>bolvan</td><td><p>Если код http, то не может быть. Скорее это проблема между фронт и бэкэндом самого сайта</p></td><td>2024-12-16T14:33:00.403Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>просто как говорят в зомбиящеге - Совпадение? -Не думаю</p>
<p>аккурат как чебурнилы заблочили началось…<br>
и на другом прове опять же норм с обходом… единственная мысль что ddos у сайта бажит… но тоже так себе теория.</p></td><td>2024-12-16T14:58:39.520Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>У меня сейчас так. hostlist - любой ваш хостлист, который со временем накапливается.<br>
<code>--filter-tcp=443 --hostlist-auto=C:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,split --dpi-desync-fooling=md5sig,badseq --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --dpi-desync-repeats=10</code><br>
update. что-то вечером тож стал глючить этот сайт. но, у них зеркало есть - animejoy.site - с ним проблем по крайней мере пока нет.</p></td><td>2024-12-16T15:00:33.097Z</td></tr><tr><td>spv82</td><td><p>На OpenWrt 21.02 для запуска скрипта <code>50-wg4all</code> не может найти модуль u32, хотя я его доустановил (kmod-ipt-u32):</p>
<pre><code class="lang-auto">Inserting iptables rule for nfqws postrouting (qnum 65400) : -p udp -m u32 --u32 0&gt;&gt;22&amp;0x3C@4&gt;&gt;16=0x9c&amp;&amp;0&gt;&gt;22&amp;0x3C@8=0x01000000
iptables v1.8.7 (legacy): Couldn't load match `u32':No such file or directory
</code></pre>
<pre><code class="lang-auto"># modinfo xt_u32
module:   /lib/modules/5.4.188/xt_u32.ko
alias:    ip6t_u32
alias:    ipt_u32
license:  GPL
depends:  x_tables
intree:   Y
name:   xt_u32
vermagic: 5.4.188 SMP mod_unload MIPS32_R2 32BIT
</code></pre>
<p>Что-то еще упустил?</p></td><td>2024-12-17T10:03:49.479Z</td></tr><tr><td>abc555</td><td><p>А обновить версию wrt никак, древний агрегат ?</p></td><td>2024-12-17T10:24:36.139Z</td></tr><tr><td>spv82</td><td><p>Обновить чтобы что? И так должно работать по идее. На “взрослом” линуксе работает.</p></td><td>2024-12-17T10:35:42.407Z</td></tr><tr><td>abc555</td><td><p>Ну чтоб работал новый функционал, в старой версии и curl дырявый, та просто древняя )<br>
23.05 хотя бы поставьте, нравится iptables, там есть пакеты, можно поставить<br>
Просто скоро выключат поддержку 23.05 и генератор прошивок возможно не будет работать на эту версию, устанавливать пакеты придётся только через opkg, ну или придётся самому как то ваять )<br>
А с 24.10 я откатился обратно на 23.05, у меня глюканул роутер с новой прошивкой )</p></td><td>2024-12-17T10:40:02.782Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
По u32</summary>
<p>По идее, если модуль загружен и виден по <code>lsmod</code> то если скомандовать<br>
<code>insmod xt_u32</code><br>
то должно же быть так<br>
<code>module is already loaded - xt_u32</code><br>
и далее, если проверочно скомандовать<br>
<code>iptables -m u32</code><br>
то ответ<br>
<code>iptables v1.8.7 (legacy): u32: option "--u32" must be specified</code><br>
означает, что iptables сможет работать с u32</p>
<p>Ну и в <code>/etc/modules.d</code> должен быть <code>ipt-u32</code> для автозагрузки</p>
</details></td><td>2024-12-17T11:21:32.248Z</td></tr><tr><td>censorliber</td><td><p>Кому насалили сборки запрета что их решили внести в списки адблокера?</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/a116dd1a01eaf90e1e2a5e8b7ca14c4a371f7087.png" data-download-href="https://ntc.party/uploads/default/a116dd1a01eaf90e1e2a5e8b7ca14c4a371f7087" title="image"><img src="zapret-обсуждение-726/a116dd1a01eaf90e1e2a5e8b7ca14c4a371f7087.png" alt="image" data-base62-sha1="mZ3RbWICx3av7Kv5i9jLzGu6H8X" width="690" height="107" data-dominant-color="222223"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">839×131 14.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.com/malware-filter/urlhaus-filter">
  <header class="source">
      <img src="zapret-обсуждение-726/1b9ed5c9db3047a561e2ca4cbcbc8a1623700ed9.png" class="site-icon" data-dominant-color="EE5C28" width="32" height="32">

      <a href="https://gitlab.com/malware-filter/urlhaus-filter" target="_blank" rel="noopener nofollow ugc">GitLab</a>
  </header>

  <article class="onebox-body">
    <img width="64" height="64" src="zapret-обсуждение-726/3197daf5565c6657f1af4758d2a9b3178181cfa5_2_64x64.jpeg" class="thumbnail onebox-avatar" data-dominant-color="F4C4BB">

<h3><a href="https://gitlab.com/malware-filter/urlhaus-filter" target="_blank" rel="noopener nofollow ugc">malware-filter / urlhaus-filter · GitLab</a></h3>

  <p>Malicious URL blocklist for uBlock Origin (uBO), AdGuard, Vivaldi, Pi-hole, Hosts file, Dnsmasq, BIND, Unbound, Snort and Suricata.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p><a href="https://malware-filter.gitlab.io/malware-filter/urlhaus-filter-online.txt" class="onebox" target="_blank" rel="noopener nofollow ugc">https://malware-filter.gitlab.io/malware-filter/urlhaus-filter-online.txt</a></p></td><td>2024-12-17T11:58:45.312Z</td></tr><tr><td>spv82</td><td><p>Забыл установить саму либу libxt_u32.so (iptables-mod-u32)</p></td><td>2024-12-17T12:05:16.931Z</td></tr><tr><td>bolvan</td><td><p>Для iptables нужно синхронно ставить и модуль ядра, и плагин (.so) для программы iptables.<br>
opkg install iptables-mod-u32<br>
он подтянет и kmod</p></td><td>2024-12-17T12:17:36.704Z</td></tr><tr><td>electrifying</td><td><p>Malicious URL blocklist ни включен по умолчанию ни в одном адблокере, список просто подтягивает правила  с URLhaus если был детект на вирусы пусть даже и ложный</p></td><td>2024-12-17T12:33:17.827Z</td></tr><tr><td>censorliber</td><td><p>В Ublock включён по умолчанию</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66.png" data-download-href="https://ntc.party/uploads/default/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66" title="image"><img src="zapret-обсуждение-726/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66_2_324x500.png" alt="image" data-base62-sha1="ebpPiHluu5Zl0Fsi53Qyn5aURU2" width="324" height="500" srcset="zapret-обсуждение-726/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66_2_324x500.png, zapret-обсуждение-726/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66_2_486x750.png 1.5x, zapret-обсуждение-726/6368cfc6a62fb60672d663fce22f9fe7dfe4fa66_2_648x1000.png 2x" data-dominant-color="22222A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">671×1035 75.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-12-17T13:29:07.743Z</td></tr><tr><td>uwu(uwu)</td><td><p>ну там в блоке только версия 1.1.1 с тем самым any protocol без ограничений, на который ругается Bol-van<br>
в 1.3 это уже пофикшено вроде</p></td><td>2024-12-17T13:39:39.848Z</td></tr><tr><td>bolvan</td><td><p>То есть кто-то пометил ТРЭШ ФЛУД как малварь  именно из-за флуда ?<br>
В последних версиях winws будет громко кричать на трэш флуд, но не запрещать , тк может умный кто-то сделал свой wf-raw фильтр</p></td><td>2024-12-17T13:45:54.890Z</td></tr><tr><td>uwu(uwu)</td><td><p>скорее всего нет)<br>
просто сейчас в ublock списке 2 ссылки на запрет сторонние гитхабы и в обоих случаях any protocol без ограничений.<br>
тогда с версией 1.1.1 насколько помню был поддельный flowseal на который много попалось народу. скорее с этим связано<br>
<code>https://ntc.party/t/%E2%9A%A0%EF%B8%8F-%D1%84%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2%D1%8B%D0%B9-zapret-discord-youtube/11560</code></p></td><td>2024-12-17T13:50:05.797Z</td></tr><tr><td>abc555</td><td><p>Та расширение ublock вообще фонарь. не знаю кто им пользуется, я это понял ещё 80 лет назад как только поставил, luci-app-adblock на wrt вот это тема нормальная, всё остальное все эти расширения не знаю на кого рассчитаны</p></td><td>2024-12-17T14:20:08.110Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Хз, никаких проблем с ublock’ом нет с комьюнити-конфигом с ruboard. Возможно, настройки по-умолчанию неоптимальны, но уж точно некорректно говорить про расширение в целом.</p></td><td>2024-12-17T14:28:46.902Z</td></tr><tr><td>bolvan</td><td><p>На роутере не может быть  хорошего блокиратора рекламы, потому что все что он может - заблокировать отдельные домены по DNS. К URL он доступ не может иметь в принципе. Скорее всего не работает, если в броузере DoH</p></td><td>2024-12-17T14:30:39.130Z</td></tr><tr><td>abc555</td><td><p>Не, он doh не обходит если включён в браузере, может обойти фильтрующий днс в браузере дох, но на роуторе не сможет, я наверно изучил уже все возможные фильтры, выбрал для себя оптимальные, немного пропускает рекламу, но очень редко, я не стал её полностью глушить, так как сказывается потом на некоторых сайтах, плюс сами сайты не видят что стоит адблок и не пишут что типа отключи его ))) А когда он стоит в браузере, постоянно мне писали и не давали что нить скачать )</p></td><td>2024-12-17T14:48:01.913Z</td></tr><tr><td>MayanKoyote(Mayan Koyote)</td><td><aside class="quote no-group" data-username="abc555" data-post="3884" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>постоянно мне писали и не давали что нить скачать</p>
</blockquote>
</aside>
<p>надо было их шантажировать</p></td><td>2024-12-17T14:55:19.638Z</td></tr><tr><td>mastezont</td><td><p><a href="https://forum.ru-board.com/topic.cgi?forum=5&amp;topic=51141&amp;start=0&amp;limit=1&amp;m=3#1" rel="noopener nofollow ugc">Правильная настройка фильтров</a> uBlock Origin.</p></td><td>2024-12-17T17:03:13.572Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>Скорее всего не работает, если в броузере DoH</p>
</blockquote>
</aside>
<p>DoH — но как? uBlock же выше этого)</p>
<details>
<summary>
Там в целом все хорошо</summary>
<p>Проблемы могут кое где возникать только если 1) в uBlock бездумно насовали листов и кривых кастомных фильтров и 2) кое где возможны затыки если открыто <strong>запредельно гигантское</strong> кол-во табов, могут быть browser build specific issues. В остальном и в целом все ок — компьютерщикам очень заходит ибо шустро и гибко, а домохозяйкам кто-нибудь другой настроит.</p>
</details></td><td>2024-12-17T18:51:00.764Z</td></tr><tr><td>bolvan</td><td><p>ublock - это расширение броузера, а я говорил про adblock на роутере</p></td><td>2024-12-17T19:08:01.561Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Если кому-то зачем-то надо adblock именно на роутере + DoH ...</summary>
<blockquote>
<p>Скорее всего не работает, если в броузере DoH</p>
</blockquote>
<p>Наверное сработает, если DoH в руторе через <code>https-dns-proxy</code>, к которому даже есть luci-app. В броузере отключить придется, видимо. Не пробовал, как не пробовал и новый<br>
<code>luci-app-https-dns-proxy</code>. В старом же через гуишку давали использовать только дохи из предопределенного набора. Но добавить свои всё таки можно, элементарно редактируя его lua-файлы. Лишние можно потом прибить, чтобы не мельтешили перед глазами.</p>
<p>Ну и совсем уж хорошо донастроить dnsmasq так, чтобы через DoH шли только свои списочные домены, а не только всё или ничего.</p>
</details></td><td>2024-12-17T20:22:16.930Z</td></tr><tr><td>i-no(...)</td><td><p>И к хорошим новостям:</p>
<details>
<summary>
не для дискуссий, но чтобы иметь в виду</summary>
<p>Горяченький зоголовок сформулирован так:<br>
РКН перепишет пользователей занимающихся спуфингом ТСПУ</p>
<p>В реальности сейчас происходит не перепись спуферов, а только “оценка регулирующего воздействия”.</p>
<p>Ссылки через <code>href.li</code></p>
<p><code>via roem.ru</code></p>
<hr>
<p>Издание “Ведомости” опубликовало <a href="https://href.li/?https://www.vedomosti.ru/technology/articles/2024/12/18/1082164-roskomnadzor-nameren-kontrolirovat-vse-popitki-obhoda-blokirovok" rel="noopener nofollow ugc">заметку</a> о том, что “РКН сможет получить информацию об интернет-пользователях, которые заходят на заблокированные в России интернет-сайты”, что следует из готовящегося приказа ведомства.</p>
<p>Данное положение более подробно раскрывается в самом <a href="https://href.li/?https://regulation.gov.ru/Regulation/Npa/PublicView?npaID=153276#" rel="noopener nofollow ugc">нормотворчестве “Роскомнадзора”</a> , основной задачей законопроекта является:</p>
<blockquote>
<p>“Снижение случаев доступа к информации, распространение которой на территории Российской Федерации ограничено, с помощью получения от операторов связи информации, позволяющей идентифицировать средства связи и пользовательское оборудование (оконечное оборудование) в сети «Интернет» на территории Российской Федерации, территории субъекта Российской Федерации или части территории субъекта Российской Федерации”</p>
</blockquote>
<p>Если в августе Роскомнадзор требовал от провайдеров не заниматься спуфингом трафика к Youtube, то сейчас речь идёт уже о клиентах провайдеров, трафик которых не проходит через ТСПУ. Очевидно, что надзорное ведомство намерено не только считать число пользователей утилит маскирующих трафик, но и модернизировать ТСПУ, чтобы средства обхода блокировок переставали у них работать, что и приведёт к снижению числа случаев доступа к запрещённой к распространению в РФ информации.</p>
<hr>
<p>ТАСС <a href="https://href.li/?https://tass.ru/ekonomika/22710255" rel="noopener nofollow ugc">сообщил</a>, что РКН опроверг.</p>
</details></td><td>2024-12-18T20:07:36.794Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>РТК. 50-discord отвалился. Перестало подключаться к голосовым каналам.<br>
edit: в целом дс отвалился.</p></td><td>2024-12-18T20:10:35.080Z</td></tr><tr><td>Umi1</td><td><p>А подскажите, есть ли какие-то автоподбиралки конфигов под запрет? Типо как есть такие под GoodbyeDPI.</p></td><td>2024-12-18T20:27:34.075Z</td></tr><tr><td>Cheeck</td><td><p>Blockcheck, Goodcheck.</p></td><td>2024-12-18T21:00:36.219Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Подтверждаю, дискорд на РТК перестал работать несколько часов назад</p></td><td>2024-12-19T04:23:10.339Z</td></tr><tr><td>easyone11</td><td><p>у меня работает (мгтс мск)</p></td><td>2024-12-19T04:51:13.044Z</td></tr><tr><td>wullikam(wullikam)</td><td><p>edit2: добавив домены дискорда к стратегии для ютуба - завелось…</p></td><td>2024-12-19T07:07:44.727Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>каким алгоритмом отловить промежуточный dpi ?</p>
<p>нестабильно открывает нужный хост</p>
<p>3из10 пытается лезть заглушка билайна хотя у меня даже не билайн</p>
<p>сам сайт на 11 хопе по пингплоттеру а  билайновской хери на 15м  … т.е. может само страница то и там но перехват гдето раньше но опять же врядли раньше 8го хопа которые точно мой пров и у него своя заглушка</p>
<p>а главное специально изза этого ttl в стратегиях не использую но давно уже не видел попыток на заглушку кинуть…</p>
<p>или может ли дурение  badseq,badsum резаться гдето ещё до сайта?<br>
ну и главное – 7из10 таки открывает норм…</p>
<p>мистика</p></td><td>2024-12-19T19:06:40.226Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>а curl эту тему вообще не ловит<br>
тока в хроме в реальном такое<br>
blockcheck допустим 15 попыток подряд если не может успех то всегда 28я а не 35я ошибка<br>
хотя 307 на страницу моего прова норм ловит (но это сразу а не в комбинации с успехом)</p></td><td>2024-12-19T19:18:44.685Z</td></tr><tr><td>i-no(...)</td><td><p>Если тестово попробовать вот так:</p>
<p><code>--hostlist-domains=нужный.домен --dpi-desync=fake,multidisorder --dpi-desync-split-pos=1,sld+2,sld+5,sniext+1,endhost-1 --dpi-desync-split-seqovl=1 --dpi-desync-fooling=md5sig</code></p>
<p>И нарезку помельче сделать, слегка подвигав маркеры.</p>
<p>Поскольку провайдер, видимо, не самый крупный и аплинкается от билайна, то еще может помочь подсовывание патернов в разные места, примерно так<br>
<code>--dpi-desync-split-seqovl-pattern=путь\файл</code></p>
<p>Потом повторов докинуть.</p>
<p>Получается что-нибудь?</p></td><td>2024-12-19T19:25:48.233Z</td></tr><tr><td>Dhogzhenya</td><td><p>Тупой вопрос. Насколько сложно перевести настройки запрета в iptables? Возможно ли манипулировать пакетами таким же образом как эта программа, но без этой программы?</p></td><td>2024-12-19T22:59:54.384Z</td></tr><tr><td>bolvan</td><td><p>В доке описано прямо в начале</p></td><td>2024-12-20T06:51:20.536Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>по тому что вижу скорее сайт на мощностях билайна хостится хоть при этом и клаудфлар хостер</p>
<p>и дело то не в стратегии самой по себе а в нестабильности</p>
<p>при одной и той же как бэ успешной 50на50 результат. успех или неуспех. единственно вроде опять подобрал что заглушки нет, но есть ошибабка от клауда 520</p>
<p>т.е. я изначально правильно подозревал что както с запретом vs dpi связано а не с тупняком сайта</p>
<p>весь вопрос как найти разницу когда успех а когда нет?</p>
<p>ip4 две штуки. принудительный выбор в hosts не влияет. tracert в обоих случаях 11й хоп, но разные 10е<br>
но опять же будь дело в 10м - помогла бы фиксация ip4</p></td><td>2024-12-20T09:09:43.779Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>найти разницу когда успех а когда нет?</p>
</blockquote>
<details>
<summary>
Да тут как обычно, надо пробовать так и сяк</summary>
<p>Может быть ассиметрия канала, динамическая балансировка, постоянно перещелкивающаяся туда-сюда, какой-нибудь анти ддос, который то работает, то нет. И т. п. Плюс к этому несколько шлакбаумов дипиайных, один проковыряли, а еще что-то осталось. Тогда упорно поклевать дятлом по интуиции, или по парадоксу, подкручивая стратегию. Бывают упрямые ситуации, когда только прокси/туннель сработает.</p>
<p>Я чаще всего даже не блокчекаю, а применяю более пробивные техники по нарастающей, комбинирую, подсовываю паттерны во все щели, и еще провоцирую фрагментацию серверного ответа с помощью wssize и ограничительных айпилистов, чтобы wssize не терял берега. Иногда стабилизировать удается уввеличением repeats, но bolvan не просто так их ограничил сверху 20 штуками, это дополнительный аргумент. Где-то может помочь склейка нескольких пейлоадов.</p>
<p>В прицнипе, очень быстро все подстроить удается. Основа выработана и месяцами не трогается. Ну и не стесняться ридмишку перечитывать иногда.</p>
</details>
<p>Попробовать временно отказаться от явного указывания ttl. Если применяются фейки, то побочку нейтрализовывать подбором рабочего фулинга.</p></td><td>2024-12-20T11:29:41.111Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>“причину” удалось выяснить<br>
а вот “решение” нет<br>
дело в quic\h3<br>
и в особо мудацком dpi пчелайна так и неясно на каком хопе<br>
без h3 таки нормально открывает как будто всегда… но если по h3 50yf50 лезет билайн ублюдский<br>
и самое мерзкое ни fake ни ipfrag2 его не берёт<br>
т.е. не берёт со 146% надёжностью<br>
может открыть а может послать</p>
<p>а блокчек ipfrag 25 из 25 считает доступен но fake только desync-repeats=20  и то не все 25 попыток - часть 28я но не 35!!!</p></td><td>2024-12-20T13:28:02.406Z</td></tr><tr><td>Simple_logic</td><td><p>ту же самую картину наблюдал через тор на одном сайте, пока не отключил ech. Также местный провайдер сидит на билайне.</p></td><td>2024-12-20T13:35:29.096Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>самое скотское что пров с билайном никак не связан</p>
<p>у него свой dpi.  без запрета его собственная заглушка лезет</p>
<p>и учитывая что тытрубный кэш прямо в его сети - довольно крупный</p></td><td>2024-12-20T14:00:10.677Z</td></tr><tr><td>uwu(uwu)</td><td><p>что за сайт то? может он сам по себе нестабильно работает, и когда не работает ,то у тебя браузер лезет на http и видит заглушку</p></td><td>2024-12-20T14:08:57.092Z</td></tr><tr><td>Quqas(Quqas)</td><td><p><a href="http://animejoy.ru/" class="onebox" target="_blank" rel="noopener nofollow ugc">http://animejoy.ru/</a></p>
<p>дело не в самом сайте тем более что и зеркал уже наклепали а в принципе</p>
<p>т.е. что за мудни и как палят. да так что и не обойти (причём не по ip) ибо сёдня этот а завтра и остальные</p></td><td>2024-12-20T14:14:44.915Z</td></tr><tr><td>uwu(uwu)</td><td><p>а зачем ты http хочешь, когда судя по всему сайт на https?<br>
у меня на билайне сайт отлично открывается для https tls 1.2 конфига  (причем без каких либо ограничителей, потому что нет фейка)</p>
<p>крч зафиксируй в хостс 104хх айпишник , тогда не будет заглушки</p></td><td>2024-12-20T14:21:21.906Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>неа<br>
не в 104 дело - проверено</p>
<p>другое дело и не в квике</p>
<p>в ie11 тоже самое</p>
<p>10 раз отрываешь в новой вкладке с уже открытого = 2-3 заглушка билайна 2-3 тупняк клауда 5-7 норм открытие</p></td><td>2024-12-20T15:42:36.424Z</td></tr><tr><td>uwu(uwu)</td><td><p>del<br>
крч я не знаю, в чем причина тогда)<br>
но заглушку с закрепленным ip я пока не видел ни разу, понаблюдаю еще<br>
ошибок клауда не видел тоже ни разу</p></td><td>2024-12-20T15:50:41.049Z</td></tr><tr><td>Simple_logic</td><td><p>Скорее всего с сайтом проблема. Клауд отовсюду выдает ошибку 520. <a href="https://animakima.ru" rel="noopener nofollow ugc">https://animakima.ru</a> по той же схеме огорожен и нормально открывается.</p></td><td>2024-12-20T15:57:27.697Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>с самим сайтом не исключено что баги - но начались с момента блока</p>
<p>520 не всегда<br>
иногда 525<br>
а иногда билайн<br>
а иногда и норм открытие <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
<p>реклама то тьфу - 20+ лет как начиная с admuncher к ublock пришёл - иначе этоже нереально…</p>
<p>у меня схема такая<br>
сначала всегда 301 с http на https и только после 3 пути<br>
либо 302 на пчелайн<br>
либо тупняк до 52* клауда<br>
либо норм</p>
<p>от ip не зависит. и от стратегии тоже <img src="https://ntc.party/images/emoji/twitter/frowning.png?v=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p></td><td>2024-12-20T16:02:38.228Z</td></tr><tr><td>Simple_logic</td><td><p>На анимакиме было то же самое некоторое время после блока, потом починили. Советую забить и пользоваться зеркалами.</p></td><td>2024-12-20T16:07:14.452Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Quqas" data-post="3913" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>от ip не зависит.</p>
</blockquote>
</aside>
<p>у сайта по какой то причине постоянно гуляет айпишник в трассировке, я такое редко вижу.<br>
но если без закрепленного айпи, я за 30 минут где-то 3 раза увидел заглушку, то после того как добавил в hosts , больше не вижу.<br>
при этом у меня 0 ошибок от клауда</p></td><td>2024-12-20T16:15:32.277Z</td></tr><tr><td>i-no(...)</td><td><p>Крч проковырял по https, и заглушку пчелайна перестал показывать:</p>
<p><code>--hostlist-domains=animejoy.ru --dpi-desync=fake,fakedsplit --dpi-desync-repeats=1 --wssize=1:6 --dpi-desync-split-seqovl=1 --dpi-desync-split-seqovl-pattern=/etc/nfqws/tls_goog.bin --dpi-desync-split-pos=1,sld+2,sld+6,sniext+1,endhost-1 --dpi-desync-fooling=hopbyhop,badsum</code></p>
<p>Подолбил его Ctrl+F5 — открывается. На все про все и 2х минут не ушло. Даже не курлил и не блокчекал. Повторов всего 1 шт. По идее еще надо wssize иплистом ограничить и дело закрыто.</p></td><td>2024-12-20T16:23:56.425Z</td></tr><tr><td>Simple_logic</td><td><p>Клауд еще надо настраивать, чтобы через тор пускал, например.</p></td><td>2024-12-20T16:27:12.894Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>что это за зубодробительный ахтунг?</p>
<p>точноли прям всё нужно? + по хопбайхоп это про ip6 а хотелосьбы ip4 …</p>
<ul>
<li>не вижу про tcp это или quic?</li>
</ul>
<p>(впрочем на счёт quic х.з. ie11 его точно неможет и пчелайн лезет а хром без quic наеборот не видит заглушки – но учитывая кэши и т.п. уверенности нет)</p></td><td>2024-12-20T16:46:59.585Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>зубодробительный ахтунг</p>
</blockquote>
</aside>
<p>Мне понравилось это определение <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"></p>
<p>Нет, не все нужно. Хопбайхоп можно наверняка убрать.</p>
<blockquote>
<p>про tcp это или quic</p>
</blockquote>
<p>Ща гляну.<br>
Не, не гляну. От долбежки триггернулась всякая хрень и пошли выкрутасы. Пока продолжает открываться <strong>без</strong> quic, пока не могу сравнить. Понаблюдаю еще позже когда остынет.</p></td><td>2024-12-20T16:49:17.457Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>в хроме без понту проверять</p>
<p>у него кэш неубиваемый</p>
<p>если выдало заглушку хоть усрись а будет она в этом сеансе\окне\закладке  и наеборот</p>
<p>а в ie11 норм в том смысле что 20 закладок из 1й открываешь и разные резальты – учитывая что сайт tls1.2 ie11 его могёт</p></td><td>2024-12-20T17:14:56.245Z</td></tr><tr><td>i-no(...)</td><td><p>Насчет кеша, даже не знаю. Именно гуглового хрома у меня нет, но в яндексовом, в опере вроде все ок, то есть я даже не делая Ctrl+Shift+Del (очистка выборочно или всё) и т.п. просто пастил после заглушки и всё взлетало. В IE11, однако, бывают тупняки и заглушка. Сейчас вот параллельно с написанием этого текста потыкиваюсь в опере с вырубленным квиком и открывается. Надо попробовать и файрфокс, нет его под рукой. Позже. Будет новый подопытный кролег.</p></td><td>2024-12-20T17:19:47.210Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>речь про ssl кэш а палят именно tls так хром и иже с ними раз ssl схавав из кэша его и берёт вплоть до того что после выкл. запрета продолжает открывать<br>
или неоткрывать<br>
поэтому рандомность заглушки в нём не поймать. а в ie11 гут</p>
<p>но всё равно сама эта рандомность вымораживает… бох сним с клаудовой ошибабкой - почему пчелайн вклинивается? но не не всегда…</p></td><td>2024-12-20T18:21:29.350Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>рандомность  вымораживает<br>
почему пчелайн вклинивается? но не не всегда…</p>
</blockquote>
<details>
<summary>
Предлагаю попытаться забить на это обстоятельство ...</summary>
<p>все его айпишники CFные</p>
<p><code>2606:4700:3031::ac43:ce50</code><br>
<code>2606:4700:3033::6815:229e</code><br>
<code>172.67.206.80</code><br>
<code>104.21.34.158</code></p>
<p>Когда работают всякие хитрые балансировщики, защитные сервисы, клаудфлеры как тут и т.п., возможно, несколько зеркал, и плюс к этому еще и несколько дипиаев, то может быть любая рандомность. На мой субъективный взгляд, сам zapret (nfqws) отработал по предназначению прекрасно. Будем считать что сайт модельный. Кое-что подкрутив, можно использовать такую балалайку уж как есть, через небольшую пень-колоду, и не беда лишний раз после заглушки ткнуть back и затем в номер страницы и т. п. Теоретически, можно туннелироваться с точкой выхода именно в билайне и посмотреть будет ли разница. Возможно, будет примерно как <a class="mention" href="/u/uwu">@uwu</a> выше пишет. В бытовом смысле оно того не стоит, разве что для тестирования.</p>
</details></td><td>2024-12-20T20:51:29.563Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>точто сам сайт того не стоит я и не спорил<br>
но упирал на сам принцип<br>
ибо вот модель чебурнету даже не по ип а просто dpi крыто нахер</p></td><td>2024-12-20T20:55:40.456Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>мысль что обратный маршрут какимто бесом рандомен а мудаки с пчелайну смотрят не клиентхелло (который якобы задурен) а серверхелло и т.к. тока tls1.2 то отсос. а отчего обратный маршрут рандомайз- х.з.<br>
но уже важно что нетольколишь уменя а всех провов именно билайн вклинивается</p>
<p>т.е. все кто сагрился видели именно его заглушку</p></td><td>2024-12-20T20:59:50.484Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>вот щас и вовсе <em>обидно</em>…  за запрет</p>
<p>ибо с gbd который уж забросил автор (и здесь тоже не светится давненько)  = наиболее стабильный результат</p>
<pre><code class="lang-auto"> -p  -f 1 -e 1 --reverse-frag --set-ttl 9
</code></pre>
<p>всего 1 раз видел её и то будем считать что случайно</p>
<p>и даже клауд перестал тупить</p>
<p>такчто болвану т.н. “вызов”  - видимо чебурнилы научились из 4х пакетов запрета собирать лучше чем всего из 2х как gbd</p></td><td>2024-12-20T22:08:38.203Z</td></tr><tr><td>GlowPem</td><td><p>20-21.12.24 СПб, ЭР-Телеком (Дом ру).<br>
Отвалились видео на ютуб после дня “техработ” (начало в 0:00). Были выключения по несколько часов, однако со скрипом всё работало. После окончания работ (в 20:00 по мск) перестали загружаться видео (превью и поиск работает).<br>
Kyber (вкл/выкл), все варианты general, а также opera/mozilla/chrome - везде результат один.<br>
Однако при включении VPN и смене локации на любой другой регион (по России тоже) - спокойно грузит.</p></td><td>2024-12-20T23:03:09.753Z</td></tr><tr><td>uwu(uwu)</td><td><p>хмм, ктонибудь более опытный сможет объяснить?<br>
есть некоторые сервера googlevideo , которые не пробиваются запретом. я заметил некоторые различия в wiresharke но мне не хватает навыков их интерпретировать</p>
<p>если например открывать ggc, который пробивается: то ситуация следующая<br>
выполняется tcp : [syn], [syn,ack],[ack]<br>
выполняется tls1.3  : [client&gt;server tls 1.3 client hello], [server&gt;client tls1.3 client hello]</p>
<p>если открывать ggc, который не пробивается:<br>
выполняется tcp : [syn], [syn,ack],[ack]<br>
выполняется пакет который называется ssl [client&gt;server] и на этом все, с той стороны больше ничего кроме ack не приходит. пакетов с названием протокола tls впринципе нет. client hello тоже нет</p>
<p>не подскажете в какую сторону в настройках запрета копать? вообще имеет смысл в таком случае смотреть в сторону настройки sni?<br>
самое забавное, что если принудительно указать ttl например =1 до тспу, то ничего не меняется (в первом случае по прежнему есть tls1.3, только блочится на уровне sni)</p>
<p>могу только дать подсказку, что во втором случае предположительно 2 коробки тспу разных провайдеров (в первом 1)<br>
у меня ютуб работает, это скорее я на будущее уточняю</p></td><td>2024-12-20T23:14:46.597Z</td></tr><tr><td>sashalomaetdpi</td><td><p>У меня вопрос скорее в пространство, чем к кому-то конкретно. Я часто читаю, как люди пытаются “пробить” какие-то сервера. И вот вопрос. Вы вообще в курсе как работает ггц? Не в теории, а на практике. Что настраивает провайдер, что настраивает гугл, как должны вести себя кэши при многоногом провайдере, как провайдеры могут заставлять при многоножие выбирать ггц те сервера, аплинк через которого они берутся приоритетнее, “трехуровневый бэкап”. И все вот эти вещи, которые вы не видите по кнопке ф12. Я к тому, может те сервера, которые вы пытаетесь “пробить”, прописать в хост файлах, и прочие извращения, может они вообще не должны “пробиваться” в данный момент времени, и не тспу причина, а настройки ггц? При динамическом ип каждая /24 сеть вообще может смотреть в свой ггц, и сменив ип вы можете пытаться “пробить” сервера, работающие по вайтлисту с вашим прошлым диапазоном ип. Еще до блокировок заставить ггц работать так, как нужно, было той еще задачей, с гуглом переписывались месяцами. Вы хотя бы проверяете, какой пул серверов выдает вам ггц в тот промежуток времени, в который вы пытаетесь что-то пробить? Может там вообще балансировка на три ноги, и на каждой по тспу?</p></td><td>2024-12-21T05:38:43.545Z</td></tr><tr><td>bolvan</td><td><p>Так напишите аналогичную схему для zapret, и будет тоже самое<br>
Для надежности проверить шарк GDPI и zapret и сравнить<br>
–dpi-desync=fake,multidisorder --dpi-desync-split-pos=1 --dpi-desync-ttl=9<br>
Разница может быть в фейк пейлоаде. Его можно попробовать скопировать из шарка после GDPI и всунуть в --dpi-desync-fake-tls</p>
<p>Всегда в таких случаях надо брать шарк и разбираться. Но юзера тычат, не понимают, а потом говорят, что не работает. Поэтому я практически не реагирую на подобные вопросы типа “перестало”, а issue закрываю или перемещаю в дискуссии (зависит от степени содержательности)</p></td><td>2024-12-21T07:33:23.231Z</td></tr><tr><td>x2i3u</td><td><p>Я пробовал в gbdpi разбивал на 3 фрагмента пакет, разницы особо не заметил, скорость открытия страниц только немного уменьшилась.</p></td><td>2024-12-21T07:43:48.151Z</td></tr><tr><td>bolvan</td><td><p>На первый отсыл данных клиентом по TLS zapret никак не может влиять. Если есть 3-way handshake. Что показывает шарк - это его интерпретация. У него есть функция decode as, чтобы выбрать диссектор вручную, если автоматика не срабатывает правильно.</p>
<p>Что касается дальнейшего виса. Стандартная схема блокировки по исходящему пакету такова, что после него больше не приходит ничего, даже ACK в ответ на него. Полный глухарь по туплам.<br>
Но пути блокировок неисповедимы. Разный зоопарк на разных провайдерах может что угодно преподнести. В таких случаях надо гнать тот же трафик на любой другой неблокированный сервер и сравнивать. Неважно, что будет ругань. Важно отличие что приходит</p></td><td>2024-12-21T07:44:00.188Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="sashalomaetdpi" data-post="3929" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/b5e925/48.png" class="avatar"> sashalomaetdpi:</div>
<blockquote>
<p>У меня вопрос скорее в пространство, чем к кому-то конкретно.</p>
</blockquote>
</aside>
<p>все чаще возникают ситуации, когда не пробиваются именно те сервера, которые указаны на роутере ggc  (а все остальные доступны)</p>
<aside class="quote no-group" data-username="bolvan" data-post="3933" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Разный зоопарк на разных провайдерах может что угодно преподнести.</p>
</blockquote>
</aside>
<p>изредко в таких случаях помогает именно datanoack. пойду дальше wireshark изучать…</p></td><td>2024-12-21T08:50:26.195Z</td></tr><tr><td>bolvan</td><td><p>Решил еще раз поднять тему ATV youtube.<br>
Еще раз запустил эмулятор genymotion. И схватил все ту же проблему.<br>
На GQUIC ответа нет никакого.<br>
Фейки не помогают.<br>
Если заредиректить udp:443 на VPS, тоже нет ничего в ответ.<br>
Если слать пакеты GQUIC на VPS, они приходят.<br>
Создается впечатление, что сами сервера не отвечают на GQUIC.<br>
Приложение выпадает в ошибку вскоре после клика на видео.</p>
<p>У кого оно работает можете посмотреть в шарке что там происходит ? Отвечают ли на GQUIC ?<br>
Я это к тому, что имеет ли смысл делать поддержку GQUIC протокола, или это бессмысленно</p></td><td>2024-12-21T09:08:06.371Z</td></tr><tr><td>Xunlei</td><td><aside class="quote" data-post="117" data-topic="8055">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-youtube-%D0%B2-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/8055/117">Замедление/блокировка YouTube в России</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    Посидел пару часов со сниффером и интрументом веб разработчика: 
Если запрос rr*---sn-********.googlevideo.com идёт на IP локального GGC или московского, то кроме первого пакета SYN ACK в ответ ничего не приходит, даже RST, соединение рубится по таймауту. Если через варп туда же запрос идёт, то приходит 1 Кб ответ (что явно не содержит видео) и браузер сразу же запрашивает с американского сервера уже многобегабайтный кусок видео.
  </blockquote>
</aside>
<p>
Для исключения этих GGC использовал</p><aside class="quote quote-modified" data-post="1" data-topic="8673">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-tdns-%D0%B4%D0%BB%D1%8F-%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D1%8B%D1%85-ggc/8673">Плагин TDNS для фильтрации недоступных GGC</a> <a class="badge-category__wrapper " href="/c/community-software/27"><span data-category-id="27" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="Anti-censorship software of our community developers"><span class="badge-category__name">Community software</span></span></a>
  </div>
  <blockquote>
    Написал плагин для <a href="https://technitium.com/dns/" rel="noopener nofollow ugc">Technitium DNS Server</a> для фильтрации недоступных сетей GGC в РФ: <a class="attachment" href="zapret-обсуждение-726/8RHEIAb4sTw2DDOnOsaDYUUZS1G.zip">Filter Network.zip</a> (7.6 KB) 
Алгоритм работы: 

Проверка запроса на тип A или AAAA
Проверка имени ответа на содержание фильтруемой зоны
Проверка на вхождения адреса в RDATA в фильтруемую сеть
Исключение A и AAAA отфильтрованных записей из результата, если записей не осталось возврат NX DOMAIN.

Использование: 

Скачать архив и установить его во вкладке Apps веб-морды сервера

Нажать Config и вписать для домена go…
  </blockquote>
</aside>
<p>
Но две-три недели назад ютуб у меня разблокировался и заработали местные GGC.</p></td><td>2024-12-21T09:13:03.216Z</td></tr><tr><td>thao</td><td><p>Уже много раз писали, но ответа так и нет. Ютуб грузит только до 00:59.  Инкогнито, отключение адблока не помогают. После изменения темы на светлую\тёмную грузит ещё минуту.<br>
С впн работает без проблем. Локация - Крым.</p></td><td>2024-12-21T09:56:29.240Z</td></tr><tr><td>thao</td><td><p>Уже много раз писали, но ответа так и нет. Ютуб грузит только до 00:59.  Инкогнито, отключение адблока не помогают. После изменения темы на светлую\тёмную грузит ещё минуту.<br>
С впн работает без проблем. Локация - Крым.</p></td><td>2024-12-21T10:03:33.822Z</td></tr><tr><td>Xunlei</td><td><p>Это с запретом скорее всего не связано, есть отдельная тема, которую пока не удалили:</p><aside class="quote" data-post="1" data-topic="13529">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivr/48/14014_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BD%D0%B5-%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D0%BD%D0%B0-%D1%8E%D1%82%D1%83%D0%B1%D0%B5/13529">Не грузит видео на ютубе</a> 
  </div>
  <blockquote>
    С 3 декабря перестали грузиться видео на ютубе, максимум 1 минуту и перестает. Выходил с профиля ютуб и заходил на другой, в гостевом режиме и с другого профиля все грузит нормально, без проблем. В поддержку ютуб писал, они молчат. Кто-нибудь сталкивался с этой проблемой?
  </blockquote>
</aside>

<aside class="quote no-group" data-username="thao" data-post="3937" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/f08c70/48.png" class="avatar"> thao:</div>
<blockquote>
<p>С впн работает без проблем</p>
</blockquote>
</aside>
<p>Похоже, что напрямую обращение к <code>jnn-pa.googleapis.com</code> не работает или возвращает 403/CORS Failed, а через прокси работает, можно посмотреть разницу в инструментах разработчика в браузере.</p></td><td>2024-12-21T10:04:11.954Z</td></tr><tr><td>SimplyYurii(Юрий )</td><td><aside class="quote" data-post="2274" data-topic="10173">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/simplyyurii/48/11254_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D1%83%D0%B4%D0%B1%D0%B0%D0%B9%D0%B4%D0%B8%D0%BF%D0%B8%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9-%D1%84%D0%BB%D1%83%D0%B4/10173/2274">Окологудбайдипиайный флуд</a> <a class="badge-category__wrapper " href="/c/community-software/goodbyedpi/8"><span data-category-id="8" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="GoodbyeDPI Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">GoodbyeDPI</span></span></a>
  </div>
  <blockquote>
    Решение из соседней ветки форума:  Установить расширение Censor Tracker в браузер, в настройках выбрать страну Россия, но лучше выключить галку “Открывать сайты из реестра”, чтоб не прогонять весь лист. В список проксируемых сайтов добавить <a href="http://jnn-pa.googleapis.com/" rel="noopener nofollow ugc">jnn-pa.googleapis.com </a>, далее почистить куки и кэш в браузере (но может и не обязательно).
  </blockquote>
</aside>
</td><td>2024-12-21T10:14:09.084Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>На билайне уже давно полностью зарезан tls 1.2. На каждое соединение проверяется ответ сервера, независимо от наличия sni в clienthello и неважно что за sni, все равно идет проверка server hello. Пока такое в РФ только на билайне, на других не видел</p></td><td>2024-12-21T11:42:02.646Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Записать шарком трафик с тв во время работы ютуба?</p></td><td>2024-12-21T11:42:55.209Z</td></tr><tr><td>bolvan</td><td><p>Ответ сервера тоже реассемблят ? wssize не работает ?</p></td><td>2024-12-21T11:48:36.808Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Ответ сервера не реассемблит, wssize или mss работают. Но никакие фейки не пробивают 1.2 (от курла, от фокса, от хрома без кибера и тд). Разные sni тоже пробовал и 100% отечественные и импортные, все равно ждет serverhello</p>
<p>UPD: по GQUIC  сейчас тестовый стенд соберу и будет дамп</p></td><td>2024-12-21T11:52:43.888Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>У вас в лс дамп с gquic</p></td><td>2024-12-21T12:28:40.546Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="wigeance" data-post="3944" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Но никакие фейки не пробивают 1.2</p>
</blockquote>
</aside>
<p>вроде бы это не считается фейком, но у меня на билайне все 1.2 работают через <code>--dpi-desync-split-seqovl-pattern=</code>tls фейк<br>
или та же сборка от kds c -<code>-dpi-desync-fake-tls=</code> , тоже 1.2 открываются</p>
<aside class="quote no-group" data-username="Xunlei" data-post="3936" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/8e7dd6/48.png" class="avatar"> Xunlei:</div>
<blockquote>
<p>Для исключения этих GGC использовал</p>
</blockquote>
</aside>
<p>спасибо ^ _ ^ я посмотрю</p></td><td>2024-12-21T14:20:27.339Z</td></tr><tr><td>KDS</td><td><p>Поддержу предыдущего оратора. Обход этой ситуации с помощью фейка применяется еще со времен предпоследней версии GDPI. Емнип, Валдик специально делал фейк для линкедин и т.п.</p></td><td>2024-12-21T15:21:30.493Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Именно на билайне оно не пробивается фейком, я миллион разных фейков перепробовал<br>
Все равно идет проверка сервер хеллоу<br>
Точно такие же параметры в той же локе но на ТТК пробивают тлс 1.2 фейком</p></td><td>2024-12-21T15:30:11.084Z</td></tr><tr><td>KDS</td><td><p>А мобильный билайн для теста сойдет? Могу проверить на теле, как там с такими сайтами</p></td><td>2024-12-21T15:36:07.639Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>У себя проверял и провод и мобилу, и там и там зарезан 1.2, только wssize пробивает<br>
Я из вашей сборки тоже стратегии без wssize смотрел, не пробивает<br>
Как минимум в 2х городах тестил билайн, результат одинаковый</p></td><td>2024-12-21T15:43:02.053Z</td></tr><tr><td>abc</td><td><aside class="quote no-group" data-username="bolvan" data-post="3935" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>У кого оно работает можете посмотреть в шарке что там происходит ? Отвечают ли на GQUIC ?</p>
</blockquote>
</aside>
<p>Могу дамп показать, если будет интерес. Ну и потестить в меру возможностей.</p></td><td>2024-12-21T16:11:01.854Z</td></tr><tr><td>abc555</td><td><p>Просто хочу сказать Вам спасибо. Круто, базара нет. Прикольно наверно чувствовать себя когда ты смог изменить реальность и судьбы людей, возможно даже и не стремясь к этому. Имею введу что то изменить и не просто изменить, а к лучшему.<br>
Так же спасибо Валдиксу за то то создал этот форум, я давненько слежу за его темами, всё думал на кого он работает, но вроде как свой и даже не важно на кого )<br>
Пацаны реально, без Вас всего этого бы не было, вы дали надежду, надежду на что то лучшее, пусть мы и заговариваем на разных языках, думаем по другому, но в целом вы делаете добро, а те кто на стороне добра всегда будут на вашей стороне и всегда удача Вас будет преследовать. та и вообще, на вашей стороне будут все и тёмные и светлые</p></td><td>2024-12-21T16:38:54.175Z</td></tr><tr><td>KDS</td><td><p>Забыл, что у меня на теле нет фейка для TLS ( Тест отменяется</p>
<p><a class="mention" href="/u/bolvan">@bolvan</a> А можно немного развернуть - что это и с чем его едят? И что за conntrack на винде?</p>
<aside class="quote no-group" data-username="bolvan" data-post="175" data-topic="61">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"><a href="https://ntc.party/t/zapret-whats-new/61/175">Zapret: what's new</a></div>
<blockquote>
<p>winws: обработка пустых исходящих TCP с FIN или RST в --wf-tcp для нужд conntrack</p>
</blockquote>
</aside></td><td>2024-12-21T16:40:03.367Z</td></tr><tr><td>Halahad</td><td><p>Есть тут те, у кого успешно работает дискорд в xbox под zapret на open-wrt? Все работает как надо на всех устройствах, кроме голосового чата дискорда в xbox. Поделитесь рабочим конфигом, если не сложно.</p></td><td>2024-12-21T16:45:33.338Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="wigeance" data-post="3950" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>У себя проверял и провод и мобилу</p>
</blockquote>
</aside>
<p>подключил ради интереса мобильный билайн. кроме ttl=6 для ютуба ничего не пришлось менять, тот же твиттер на tls 1.2 медиа по-прежнему открывается. (и остальные 1.2 сайты тоже)<br>
советую проверить такое:<br>
<code>--dpi-desync=split2 --dpi-desync-split-seqovl=308 --dpi-desync-split-seqovl-pattern=</code>tls_clienthello_vk_com.bin<br>
фейк взять из запрета</p></td><td>2024-12-21T16:49:47.421Z</td></tr><tr><td>KDS</td><td><p>Порты 50000-50090<br>
Стратегия, например такая:</p>
<details>
<summary>
Спойлер</summary>
<p><code>--dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6</code></p>
</details></td><td>2024-12-21T16:54:34.627Z</td></tr><tr><td>abc555</td><td><p>не знаю что вы там мутите, но попробуйте --dpi-desync-autottl=2<br>
возможно вы упустили кое что, не берёте во внимание, но, ведь вы думаете что по вашему будет правильней не так ли ?</p></td><td>2024-12-21T16:57:53.473Z</td></tr><tr><td>Halahad</td><td><p>Стратегию попробовал - не работает. Порты выставлены.<br>
Список серверов грузится на xbox, но не подключается к голосовому каналу.</p></td><td>2024-12-21T17:02:39.045Z</td></tr><tr><td>KDS</td><td><p>Там нужно 2 стратегии - одна отвечает за коннект к серваку, который роутит вас на нужный IP, он на TLS, <code>*.discord.media</code><br>
А потом уже то, что я указал применяется.<br>
На каком этапе у вас виснет - непонятно.</p></td><td>2024-12-21T17:06:29.963Z</td></tr><tr><td>bolvan</td><td><p>Это коннтрак внутри nfq/dvt/win ws, который позволяет работать с длящейся десинхронизацией не только на основании отдельно выдернутого пакета. То есть дает stateful обработку.<br>
Подробнее в доке описано</p></td><td>2024-12-21T17:10:59.173Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>приятно думать что я про это умозрительно догадался.<br>
за вычетом того - как пчелайн вклинивается между мной и сайтом? у меня п.а.к.т. а сервак всего на 3хопа дальше последнего хопа моего прова. 11 и 8</p>
<pre><code class="lang-auto"> --dpi-desync=disorder2 --wssize 1:6 --dpi-desync-split-pos=1
</code></pre>
<p>такая простая конструкция позволяет убрать редирект на заглушку но продолжаю считать что 520я ошибка от клауда - это всёже dpi а не тупняк самого сайта</p>
<p>а главное  --wssize 1:6 убивает <a href="http://esia.gosuslugi.ru" rel="noopener nofollow ugc">esia.gosuslugi.ru</a> и я непонимаю как можно “улучшить”?  в описании - даже листом ограничить нельзя</p>
<p>но может можно сами цифры правильно изменить или некую добавку сделать чтоб <a href="http://esia.gosuslugi.ru" rel="noopener nofollow ugc">esia.gosuslugi.ru</a> не дропали коннект</p></td><td>2024-12-21T17:11:12.169Z</td></tr><tr><td>bolvan</td><td><p>Да, пожалуйста. Только у меня никогда не было цели дать всем таблетку.<br>
В идеале я вижу это как сотрудничество и обмен опытом.<br>
И чтобы каждый сам нес свою часть ответственности за собственный выбор.</p></td><td>2024-12-21T17:12:30.385Z</td></tr><tr><td>Halahad</td><td><p>Ну по сути так и происходит сейчас. Проверял на пк, телефоне, ноуте - все отлично конектит при работающем zapret на openwrt. Проблема наблюдается только с Xbox и только с голосовой связью дискорда в xbox (ютуб и текстовый чат отлично работают). Причем изначально когда ставил (примерно в начале октября) все было отлично и на xbox тоже. В конце октября- начале ноября дискорд на xbox тупо отвалился (на всех остальных устройствах все норм). Ничего не менял.<br>
DoH включил, ipv6 вырубил. Без hostlist пытался запускать - тоже 0 эффекта.</p>
<p>P.S. Может я могу какие-нибудь данные скинуть? О том что, как и куда коннектится. Может поможет…</p></td><td>2024-12-21T17:14:35.969Z</td></tr><tr><td>bolvan</td><td><p>Если IP не скачет, то можно внести в hosts-exclude. Они работают и по ipset в том числе при любом режиме фильтрации, даже none. Услуги вроде не на CDN, легко внести.<br>
Вносить можно прямо домены, они будут отресолвлены</p></td><td>2024-12-21T17:16:36.006Z</td></tr><tr><td>KDS</td><td><p>Ну, возможно на xbox какие-то другие сервера и запрет их просто не обрабатывает, т.к. их нет в хостлист-ипсет</p>
<p>Кидайте конечно, если есть</p></td><td>2024-12-21T17:17:31.218Z</td></tr><tr><td>Halahad</td><td><p>А что можно скинуть конкретно и как это добыть? Я просто совсем зеленый в этом)</p></td><td>2024-12-21T17:18:18.660Z</td></tr><tr><td>Gromily4(Gromily4)</td><td><p>использую Launcher for zapret, что странно, kemono работал при включенном запрете нормально 19 и 20 декабря, а сегодня опять не работает, кто-нибудь знает что это было?</p></td><td>2024-12-21T17:20:48.233Z</td></tr><tr><td>KDS</td><td><p>Да и я не краснее )<br>
Куда коннектится при звонке (адреса, порты, протокол) и на чем именно зависает - только так, в общих словах ( Как добыть это с роутера - вообще не знаю</p>
<p><a class="mention" href="/u/gromily4">@Gromily4</a> Кимона давно у всех по IP забанена, видимо и до вас дошло, наконец. А что работала - ну перенастраивали что-нибудь, потом бан вернули на место</p></td><td>2024-12-21T17:21:33.739Z</td></tr><tr><td>Gromily4(Gromily4)</td><td><p>Не, он и не работал до 19 на запрете, через VPN приходилось ходить, но вдруг у многих заработал, и 21 снова прекратил.</p></td><td>2024-12-21T17:24:51.802Z</td></tr><tr><td>Halahad</td><td><p>Единственное что смог достать это вот это:</p>
<details>
<summary>
Спойлер</summary>
<p>17:32:26.496425 IP 192.168.1.101.50424 &gt; 20.54.37.73.443: Flags [P.], seq 3146332153:3146332258, ack 3379362332, win 2047, length 105<br>
17:32:26.576057 IP 20.54.37.73.443 &gt; 192.168.1.101.50424: Flags [P.], seq 1:176, ack 105, win 6827, length 175<br>
17:32:26.618657 IP 192.168.1.101.50424 &gt; 20.54.37.73.443: Flags [.], ack 176, win 2047, length 0<br>
17:32:26.744273 IP 199.46.35.128.443 &gt; 192.168.1.101.51604: Flags [P.], seq 3243984781:3243984805, ack 2880411018, win 365, length 24<br>
17:32:26.744916 IP 192.168.1.101.51604 &gt; 199.46.35.128.443: Flags [.], ack 24, win 1021, length 0<br>
17:32:27.315810 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [P.], seq 3407376126:3407376156, ack 3824099732, win 251, length 30<br>
17:32:27.318811 IP 192.168.1.101.52085 &gt; 162.159.137.232.443: Flags [P.], seq 2567310371:2567310413, ack 1969775410, win 1022, length 42<br>
17:32:27.319103 IP 192.168.1.101.52085 &gt; 162.159.137.232.443: Flags [P.], seq 42:514, ack 1, win 1022, length 472<br>
17:32:27.319118 IP 192.168.1.101.52085 &gt; 162.159.137.232.443: Flags [P.], seq 514:545, ack 1, win 1022, length 31<br>
17:32:27.338684 IP 162.159.134.234.443 &gt; 192.168.1.101.52082: Flags [.], ack 30, win 10, length 0<br>
17:32:27.339673 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [P.], seq 30:294, ack 1, win 251, length 264<br>
17:32:27.342479 IP 162.159.137.232.443 &gt; 192.168.1.101.52085: Flags [.], ack 42, win 8, length 0<br>
17:32:27.342625 IP 162.159.137.232.443 &gt; 192.168.1.101.52085: Flags [.], ack 514, win 8, length 0<br>
17:32:27.342634 IP 162.159.137.232.443 &gt; 192.168.1.101.52085: Flags [.], ack 545, win 8, length 0<br>
17:32:27.362868 IP 162.159.134.234.443 &gt; 192.168.1.101.52082: Flags [.], ack 294, win 10, length 0<br>
17:32:27.507012 IP 162.159.137.232.443 &gt; 192.168.1.101.52085: Flags [P.], seq 1:293, ack 545, win 8, length 292<br>
17:32:27.507823 IP 192.168.1.101.52085 &gt; 162.159.137.232.443: Flags [.], ack 293, win 1021, length 0<br>
17:32:31.011755 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [P.], seq 294:322, ack 1, win 251, length 28<br>
17:32:31.034661 IP 162.159.134.234.443 &gt; 192.168.1.101.52082: Flags [.], ack 322, win 10, length 0<br>
17:32:31.035386 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [P.], seq 322:359, ack 1, win 251, length 37<br>
17:32:31.058272 IP 162.159.134.234.443 &gt; 192.168.1.101.52082: Flags [.], ack 359, win 10, length 0<br>
17:32:31.168633 IP 192.168.1.101.3074 &gt; 40.74.11.34.3544: UDP, length 61<br>
17:32:31.198682 IP 162.159.134.234.443 &gt; 192.168.1.101.52082: Flags [P.], seq 1:61, ack 359, win 10, length 60<br>
17:32:31.235845 IP 40.74.11.34.3544 &gt; 192.168.1.101.3074: UDP, length 109<br>
17:32:31.240503 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [.], ack 61, win 251, length 0</p>
</details>
<p>Тут из интересного только то, что почему то тут между запросами проходит 4 сек:<br>
17:32:27.507823 IP 192.168.1.101.52085 &gt; 162.159.137.232.443: Flags [.], ack 293, win 1021, length 0<br>
17:32:31.011755 IP 192.168.1.101.52082 &gt; 162.159.134.234.443: Flags [P.], seq 294:322, ack 1, win 251, length 28</p>
<p>Ну и еще 20.54.37.73.443 видимо майкрософтовский айпишник, мб из-за него что-то не так.</p></td><td>2024-12-21T18:09:33.265Z</td></tr><tr><td>bolvan</td><td><p>Это разные соединения. Порты разные и dest ip</p></td><td>2024-12-21T18:28:38.999Z</td></tr><tr><td>gnus(gnus)</td><td><p>есть скрипт на powershell, который отправляет сохраненный  начальный пакет gQUIC и получает ответ</p></td><td>2024-12-21T18:46:25.330Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Приветствую хочу сообщить о непонятном мне явлении в Линукс с zapret на Ютубе. Ситуация следующая что например популярные ролики грузятся нормально. А когда натыкаюсь на видео где меньше 100к просмотров то запрет не может их загрузить. Попробывал bye dpi он вроде все видео грузит. Подскажите может нужно какие-то параметры добавить?</p></td><td>2024-12-21T19:39:27.767Z</td></tr><tr><td>bolvan</td><td><p>Смотреть в броузере по F12 на каких GGC затык и находить общую стратегию для всех GGC</p></td><td>2024-12-21T19:43:01.803Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Меня эта мысль тоже посещала. Я это пробывал увы результата не дало. Я даже больше скажу что та стратегия которую выдал blockcheck не сработала мне пришлось ее додумывать самому грубо говоря блокчек говорит split2 а работает только когда fake, split2</p></td><td>2024-12-21T19:47:25.703Z</td></tr><tr><td>bolvan</td><td><p>Блокчек вызывает curl для определенного домена по определенному протоколу и выдает его результат. На этом его функция закончена. Если в броузере что-то другое, надо сравнивать параметры вышеозначенного между curl и броузером. Почему один цепляет , а другой нет.</p></td><td>2024-12-21T19:49:37.989Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>А вы какие то изменения вносили в блокчек за последний месяц просто я запрет ставил около месяца назад может даже больше. Может нужно обновить запрет?</p></td><td>2024-12-21T19:52:52.402Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Я хз, вы бы хоть показали с какими параметрами у вас сейчас запускается zapret. Тогда, возможно, что-то и посоветовать можно.</p></td><td>2024-12-21T20:16:29.361Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>К сожалению сейчас скинуть не могу но если по памяти там что то типо</p>
<pre><code class="lang-auto">--dpi-desync=fake,split2 --dpi-desync-ttl=5
--dpi-desync-split-pos=5 md5sig и fake google bin
</code></pre></td><td>2024-12-21T20:31:45.161Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group">
<blockquote>
<p>–wssize 1:6 убивает <code>esia.gosuslugi.ru</code> и я непонимаю как можно “улучшить”?</p>
</blockquote>
</aside>
<p>Добавить в это подсеть, где живет ЕСИА<br>
<code>--ipset-exclude-ip=109.207.0.0/20</code><br>
выводя ее таким образом из-под действия профиля</p>
<p>Или ограничить действие этого профиля с wssize только теми подсетями или адресами, где wssize реально нужен. В основном именно такой подход и применяю, поэтому не сталкивался с отвалом ЕСИА или чего-то, на что не хочу чтобы распространялось действие профиля. Сейчас перепроверил, и с экслюдом открывается. Возможно, что для каких-то кусков госуслуг понадобится добавить еще эксклюд.</p></td><td>2024-12-21T20:36:34.202Z</td></tr><tr><td>KDS</td><td><p>Хм и какие же подсети всех GGC России и зарубежа, например? Так что да - проще вывести из-под его действия проблемные сайты</p></td><td>2024-12-21T20:41:50.759Z</td></tr><tr><td>i-no(...)</td><td><p>Вот мне тоже интересен этот вопрос. Где бы можно было утянуть что-то правдоподобное, актуальное, примерно так, как гугл выкладывает свои ip ranges. Пока приходится самостоятельно конструировать cidr под ggc по ситуации. Что и не трудно, к слову. Если люди из разных регионов скинули бы свои подсети, то можно было бы сделать сводный лист, куда-нибудь в репку на гитхаб его, и дергать простейшим скриптом прямо в рутере для автоапдейта.</p></td><td>2024-12-21T20:43:03.231Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ну на самом деле безсмыслено ибо и wssize не помог<br>
если ты не видал заглушки - мало тестил<br>
а что вместо 1и6 подставить х.з. - но рандомно от 2 до 12 не влияют</p></td><td>2024-12-22T12:56:56.392Z</td></tr><tr><td>i-no(...)</td><td><p>Удалось ни разу ее не увидеть в IE11, прокликивая next page по одной до 441, в верхнем ряду.</p>
<details>
<summary>
Профиль под эту чушь вот такой:</summary>
<p><code>--hostlist-domains=animejoy.ru</code><br>
<code>--wssize=1:6</code><br>
<code>--ipset-ip=2606:4700:3033::6815:229e,2606:4700:3031::ac43:ce50,104.21.34.158,172.67.206.80</code><br>
<code>--dpi-desync=fake,fakeddisorder --dpi-desync-split-seqovl=1</code><br>
<code>--dpi-desync-split-seqovl-pattern=/etc/nfqws/tlsmix1.bin</code><br>
<code>--dpi-desync-repeats=12 --dpi-desync-split-pos=1,sld+3,sld+6,sniext+1</code><br>
<code>--dpi-desync-fake-tls=/etc/nfqws/tlsmix1.bin</code><br>
<code>--dpi-desync-fakedsplit-pattern=/etc/nfqws/tlsmix1.bin</code><br>
<code>--dpi-desync-fooling=md5sig</code></p>
<p><a class="attachment" href="zapret-обсуждение-726/vrcsRuimkShPa2F5BUSengbQwDE.bin">tlsmix1.bin</a> (1,0 КБ)<br>
Склеил кастомный пейлоад из 3х частей. И repeats увеличил до 12.</p>
</details>
<p>Мало, конечно, тестил. Сорямба.</p>
<details>
<summary>
Курление примерно вот такое</summary>
<pre><code class="lang-auto">~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
                                &lt;a href="http://beeline.ru" class="logo"&gt;&lt;img src="i/logo.png"/&gt;&lt;/a&gt;

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
                                &lt;a href="http://beeline.ru" class="logo"&gt;&lt;img src="i/logo.png"/&gt;&lt;/a&gt;

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
                                &lt;a href="http://beeline.ru" class="logo"&gt;&lt;img src="i/logo.png"/&gt;&lt;/a&gt;

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
                                &lt;a href="http://beeline.ru" class="logo"&gt;&lt;img src="i/logo.png"/&gt;&lt;/a&gt;

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
                                &lt;a href="http://beeline.ru" class="logo"&gt;&lt;img src="i/logo.png"/&gt;&lt;/a&gt;

~
$ curl --http1.1 --connect-timeout 1 -m 0.7 -skL -o - animejoy.ru | grep -i -m 1 "cloudflare\|beeline"
</code></pre>
<p>И т. д. Т.е. глушняк иногда вылезает.</p>
</details>
<p>Но контент мы все таки не через курл, а через браузер получаем. Как только браузер зацепился нормально, то можно юзать.</p></td><td>2024-12-22T13:39:31.897Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ну с точки зрения пробития - “туда” куда проще можно обойтись банальным disorder2<br>
вкупе с wssize<br>
который одновременно должен пробивать “сюда” но не пробивает.<br>
т.е. безпонту “улучшать” часть “туда”, надо както замодить ту часть что “сюда”</p>
<p>и да. я тоже обратил вниманье что уже зайдя на сайт можно словить блок тупо лазя по закладкам</p>
<p>казалосьбы как??? по сниферу нет повторных hello обеих типов<br>
и вся суть tls что шифрованно должно быть. но эти ублюдки както умудряются</p></td><td>2024-12-22T14:59:48.993Z</td></tr><tr><td>uwu(uwu)</td><td><p>с моей стратегией и айпи в hosts у вас тоже заглушка появляется?<br>
ок)))</p></td><td>2024-12-22T15:09:59.739Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>казалосьбы как???</p>
</blockquote>
<p>Не ясно, что там за стеной CF происходит. Может, владельцы сайта как-то антианатомически пытались противодействовать блокировке.</p>
<aside class="quote no-group" data-username="uwu">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/12233_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>с моей стратегией и айпи в hosts</p>
</blockquote>
</aside>
<p><code>188.114.96.100</code></p>
<p>С вот этим в хостс тоже заглушки нет в данный момент. Подтупывает совсем чуток изредка, icmp ping может теряться даже. Курление почти чистое, заглушка вылезает в десятки раз реже. Подсеть CF 188.114.96.0/22 именно этого входного айпишника от зеркала, домен которого не заблочен. Похоже, что методика найдена!)</p></td><td>2024-12-22T15:58:21.436Z</td></tr><tr><td>kelr0nd</td><td><p>Добрый вечер!<br>
Прошу подсказать насчет работы zapret<br>
Удалось накатить его на роутер, blockcheck выдал рабочую стратегию</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC="--dpi-desync=split2 --dpi-desync-split-seqovl=3 --dpi-desync-split-pos=4 --wssize 1:6"
</code></pre>
<p>Она прекрасно показывает себя на Windows, Android и Android TV, но почему-то пару дней назад отвалилась на iOS и MacOS, там YouTube теперь не грузится</p>
<p>Прогнал опять blockcheck, попробовал еще несколько стратегий</p>
<pre><code class="lang-auto">--dpi-desync=fake,disorder2 --dpi-desync-ttl=3
--dpi-desync=split2 --dpi-desync-split-seqovl=49 --dpi-desync-split-pos=50
--dpi-desync=fake --dpi-desync-ttl=1 --dpi-desync-autottl=5 --dpi-desync-fake-tls=0x00000000
</code></pre>
<p>Но с ними YouTube перестает работать и на остальных устройствах<br>
Есть идеи, что можно исправить?<br>
Провайдер Ростелеком</p></td><td>2024-12-22T18:26:59.052Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="i-no" data-post="3987" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Похоже, что методика найдена!)</p>
</blockquote>
</aside>
<p>откуда ты этот ип вынул?</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">C:\Users\DeN&gt;nslookup animejoy.site
╤хЁтхЁ:  one.one.one.one
Address:  1.1.1.1

Не заслуживающий доверия ответ:
╚ь :     animejoy.site
Addresses:  2606:4700:3032::6815:2a6b
          2606:4700:3034::ac43:cd40
          104.21.42.107
          172.67.205.64


C:\Users\DeN&gt;nslookup animejoy.ru
╤хЁтхЁ:  one.one.one.one
Address:  1.1.1.1

Не заслуживающий доверия ответ:
╚ь :     animejoy.ru
Addresses:  2606:4700:3031::ac43:ce50
          2606:4700:3033::6815:229e
          172.67.206.80
          104.21.34.158


C:\Users\DeN&gt;nslookup anime-joy.online
╤хЁтхЁ:  one.one.one.one
Address:  1.1.1.1

Не заслуживающий доверия ответ:
╚ь :     anime-joy.online
Addresses:  2606:4700:3037::ac43:8126
          2606:4700:3032::6815:16a
          172.67.129.38
          104.21.1.106
</code></pre>
</details>
<p>всё что не ру и без костыля в хостс отрывает<br>
хотя казалосьбы…<br>
т.е. уж проще на зеркало идти чем хостс корёжить</p></td><td>2024-12-22T19:41:23.716Z</td></tr><tr><td>i-no(...)</td><td><p>По F12 глянул — статика идет с <code>anime-joy.online</code> (по h3) который тоже заклаудфлеренный. И который отдельно тоже работает. Там другая подсеть, сначала ессно попробовал то, что выдал nslookup в <strong>тот</strong> момент, <a href="https://info.addr.tools/188.114.96.1" rel="noopener nofollow ugc">уточнил</a>, затем полурандомно указал в хостс свой другой адрес из этой подсети. Можно с тем же узбеком взять какой-нить .111 (работает тоже)<br>
Подправил --ipset-ip и всё.</p>
<blockquote>
<p>т.е. уж проще на зеркало идти чем хостс корёжить</p>
</blockquote>
<p>Да. Нуэтсамое, мы же тестим, делаем выводы. Подредактировать — это корёжить? Ну камон, хостс не настолько свят)</p>
<p>Скажи пожалуйста, с другим-то айпишником у тебя улучшилось, или та же ерунда?</p></td><td>2024-12-22T21:09:58.303Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="i-no" data-post="3990" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>хостс не настолько свят)</p>
</blockquote>
</aside>
<p>Скажите это всем популярным антивирусам, ага )</p></td><td>2024-12-22T21:18:58.077Z</td></tr><tr><td>i-no(...)</td><td><p>Коллега, я забыл об этом подумать, каюсь. Не использую антивирусы. Хотя не буду никому рекомендовать делать как я в этом смысле.</p>
<p>А что, в популярных современных антивирусах никак этот момент не обойти? Т.е. мне, дураку, не дозволено самому редактировать мой хостс?</p></td><td>2024-12-22T21:22:26.392Z</td></tr><tr><td>KDS</td><td><p>В Защитнике обходится выбором Разрешить на устройстве после первой правки. За остальные не знаю - не пользуюсь уже давно.</p></td><td>2024-12-22T21:23:32.708Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="i-no" data-post="3990" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>улучшилось</p>
</blockquote>
</aside>
<p>если честно даже не стал - ибо видел твоё продолжение что не пропала а просто реже стала</p>
<p>у меня и без wssize ситуация что подряд либо много раз заглушка либо много раз открытие, а так чтоб через раз перестало, хотя без смены стратегий так было ещё вчера-позавчера</p>
<p>в хроме как ты правильно заметил стабильней в том плане что присосавшись раз он на h3 переходит - и его уже не пропалить</p>
<p>а в ie11 может блокнуть даже без нового открытия головной а просто лазя по страницам - правда в отличии от прошлого разу в этот - заметил что зачемто повторно hello обменивается, просто в сокращённой форме</p>
<p>я б даже дамп  CAP снял <code>ProtocolName == "TLS" AND (Source == "104.21.34.158" OR Destination == "104.21.34.158" OR Source == "172.67.206.80" OR Destination == "172.67.206.80")</code> но там по минимуму за тыщу пакетов чтоб все варианты попали<br>
сам проаналить не умею - но банального rst нету<br>
а кто готов 1000+ смотреть х.з.</p></td><td>2024-12-22T23:08:08.004Z</td></tr><tr><td>meadow_seed</td><td><aside class="quote no-group" data-username="i-no" data-post="3992" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>в популярных современных антивирусах никак этот момент не обойти? Т.е. мне, дураку, не дозволено самому редактировать мой хостс?</p>
</blockquote>
</aside>
<p>Касперский не мешает пользователю редактировать <code>C:\Windows\System32\drivers\etc\hosts</code>.<br>
Единственный раз он ругался и заменял hosts на дефолтный когда мне захотелось добавить туда его адрес <code>ipm-klca.kaspersky.com</code> через который идут надоедливые рекламные предложения касперского.<br>
В итоге решил использовать функцию <a href="https://github.com/DNSCrypt/dnscrypt-proxy/wiki/Filters" rel="noopener nofollow ugc">фильтрации</a> в dnscrypt. В нём также есть альтернатива файлу hosts <a href="https://github.com/DNSCrypt/dnscrypt-proxy/wiki/Cloaking" class="inline-onebox" rel="noopener nofollow ugc">Cloaking · DNSCrypt/dnscrypt-proxy Wiki · GitHub</a>. Если есть адреса которые нужно резолвить через провайдерский или какой-то другой днс <a href="https://github.com/DNSCrypt/dnscrypt-proxy/wiki/Forwarding" class="inline-onebox" rel="noopener nofollow ugc">Forwarding · DNSCrypt/dnscrypt-proxy Wiki · GitHub</a>.</p></td><td>2024-12-23T03:14:21.295Z</td></tr><tr><td>easyone11</td><td><p>а что проверяешь блокчеком для ютуба? надеюсь ggc сервер</p></td><td>2024-12-23T04:39:53.983Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="kelr0nd" data-post="3988" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kelr0nd/48/8126_2.png" class="avatar"> kelr0nd:</div>
<blockquote>
<p>blockcheck выдал рабочую стратегию</p>
</blockquote>
</aside>
<p>Это старый блокчек</p></td><td>2024-12-23T08:50:12.754Z</td></tr><tr><td>TheThar</td><td><p>Добрый день.<br>
Может кто подсказать направление действий?<br>
Ситуация: zapret win-bundle использую для ютуба и дискорда с конца сентября, пользуюсь preset_russia, он из коробки работал отлично, версию запрета обновлял в середине декабря. С конца ноября на ютубе для загрузки видео теперь требуется страницу перезагружать по разу-два чтоб начало проигрываться. Ublock показывает что видео пытается грузить с адресов rr*—sn-n8v7****.googlevideo.com, которые у меня все недоступны. Я сделал фильтр ublock на них, после этого все нормально стало загружаться, хотя все равно время от времени через фильтр проскакивает.<br>
С дискордом проблем не было ни разу пока что.<br>
Надо новые стратегии для ютуба и дискорда на zapret искать получается? Я просто до этого всего один раз через goodcheck только для goodbyedpi подбирал в начале октября со списком гугловских адресов которые кто-то запостил тогда, пока на zapret не перешел. В список адресов надо для goodcheck загружать рабочие или нерабочие rr*—sn-n8v7****.googlevideo.com?</p></td><td>2024-12-23T14:23:53.217Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="TheThar" data-post="3998" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/d9b06d/48.png" class="avatar"> TheThar:</div>
<blockquote>
<p>rr*—sn-n8v7****.googlevideo.com</p>
</blockquote>
</aside>
<p>Если будет время и желание, попробуйте добавить ближе к началу вот такой профиль специально для этих ggc (не для quic, только tcp), рестартнуть winws и временно отключить ваш кастомный фильтр в uBlock:</p>
<p><code>--filter-tcp=443 --hostlist-domains=googlevideo.com --dpi-desync=multidisorder --wssize=1:6 --ipset-ip=2a00:1450:4011::/56 --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1,host+2,sld+2,sld+5,sniext+1,sniext+2,endhost-2</code></p>
<p><s>–dpi-desync-repeats=3</s></p></td><td>2024-12-23T14:58:48.906Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>а что в этой пасте делают 3 репитса?</p></td><td>2024-12-23T15:36:10.482Z</td></tr><tr><td>i-no(...)</td><td><p>Ничего, это рудимент.</p></td><td>2024-12-23T15:38:57.082Z</td></tr><tr><td>TheThar</td><td><p>Сработало, благодарю.</p></td><td>2024-12-23T16:11:09.626Z</td></tr><tr><td>Dur(Dur)</td><td><p>"Роскомнадзор включил в реестр организаторов распространения информации (ОРИ) 12 новых мессенджеров.</p>
<p>В реестр были включены - WhatsApp, Skype, Wire, Element, KakaoTalk, Session, Crypvyser, DUST, Pinngle, Status, Keybase и Trillian."</p>
<p>В общем скоро и WhatsApp заблочат, депусраты уже в открытую заявляют. И остальной список тоже скорее всего.</p></td><td>2024-12-23T16:43:21.113Z</td></tr><tr><td>kelr0nd</td><td><p>Проверял <code>rr2---sn-aigl6ney.googlevideo.com</code><br>
Ну или что-то типа того</p></td><td>2024-12-23T18:41:36.321Z</td></tr><tr><td>kelr0nd</td><td><p>Имеет смысл новый блокчек попробовать? Там что-то новое было добавлено?<br>
Просто очень не хочется заново на роутер все перенакатывать, если оно по большей части и так работает</p></td><td>2024-12-23T18:42:57.077Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="kelr0nd" data-post="4005" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kelr0nd/48/8126_2.png" class="avatar"> kelr0nd:</div>
<blockquote>
<p>Просто очень не хочется заново на роутер все перенакатывать</p>
</blockquote>
</aside>
<p>А зачем с роутера проверять если есть блокчек для винды?</p></td><td>2024-12-23T18:51:43.052Z</td></tr><tr><td>kelr0nd</td><td><p>Я на винде и смотрю<br>
Я имел в виду, не надо ли вместе с новым блокчеком заодно и новую версию запрета накатывать на роутер</p></td><td>2024-12-23T18:51:57.622Z</td></tr><tr><td>oprichnik(Oprichnik)</td><td><p>Я вот одного не пойму, а на кой черт ютуб продолжает запрашивать трафик с российских llc 212.188.0.0/17</p></td><td>2024-12-23T19:02:56.357Z</td></tr><tr><td>i-no(...)</td><td><p><a class="mention" href="/u/kelr0nd">@kelr0nd</a></p>
<details>
<summary>
Вроде ничего в целом пока не поменялось</summary>
<blockquote>
<p>обновлять / не обновлять</p>
</blockquote>
<p>Рядом же хороший <a href="https://ntc.party/t/61"><em>What’s new</em></a> в котором история изменений. Жизненно важные фичи появляются не каждый день. Если лень читать, то просто скачать свежее и всё.</p>
<blockquote>
<p>Проверял <code>rr2---sn-aigl6ney.googlevideo.com</code></p>
</blockquote>
<p>По поводу YT можно за основу брать <code>preset_russia.cmd</code> и в него добавить вскрытие, которое на указанном провайдере себя хорошо показало. Для ближайших GGC с самым низким пингом,<br>
по <a href="https://ntc.party/t//726/3999">образцу выше</a>, только подсеть примерно такая <code>2a0:1450:49:11::/120</code><br>
Если слишком узко, то можно не парясь взять весь крайний квартет по /112<br>
Точнее подсобрать в списочек то, что реально на вашем подключении в вашем регионе выдается в браузере, и отрезольвить айпишники оптом. Возможно, понадобится профиль для второго эшелона, если такое имеет место быть.</p>
<p>QUIC вскрывается без wssize и подсетей:<br>
<code>--filter-udp=443 --hostlist-domains=googlevideo.com --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic="%~dp0quic.bin"</code></p>
<p><code>--filter-udp=443 --hostlist="%~dp0list-youtube.txt" --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic="%~dp0quic.bin"</code></p>
<p><a class="attachment" href="zapret-обсуждение-726/vuyeKDepy9MIgyBqRIM8sGhwJIM.bin">quic.bin</a> (144 байта)</p>
<p>Веб и api YT — так, как сделано в комплектном <code>russia_preset.cmd</code>. Можно помельче нашинковать.</p>
</details>
<hr>
<p>Кстати, “дичайше опасный для малолетних” <a href="https://quic.nginx.org/quic.html" class="inline-onebox" rel="noopener nofollow ugc">NGINX QUIC Sandbox</a> подвергается динамической частичной блокировке. Часть запросов при тестировании там “красная” и, видимо, если регуляторы детектят попытки анализировать сеть, что-то тестировать, сканировать, то там умирает избирательно QUIC. Совсем. Лечится простейшим фейком:</p>
<pre><code class="lang-auto">--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=2
</code></pre>
<p>который самый крайний в мультистратегии у меня</p></td><td>2024-12-23T23:27:11.761Z</td></tr><tr><td>zzr</td><td><p>Сдарова все<span class="spoiler">м</span>! Давноя тут не был у вас <span class="spoiler">нейрокум затягивает what can i say <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></span>. Ну так вот чё я тут вылез то -<br>
Пытаюсь вкатиться в етот ваш Запрет, у меня конкретый юзеркейс пытаюсь прикрутить ето всё к распери пи кароч поднять там запрет, а чтоб все усройсва в сети через его проходили и чтоб всё было збс, нашёл значитса <a href="https://www.youtube.com/watch?v=8f29GB5bdgI" rel="noopener nofollow ugc">видос</a>, но чтоб вам не страдать от его просмотра (автор там рефлексирует 40 минут)) выпишу сдесь ключевые поинты</p>
<p>Первойе (на распереи пи ето всё делается) надо включил форвардинк пакетов <code>net.ipv4.ip_forward=1</code></p>
<p>Потом значится прикручиваем маскарат: <code>sudo iptables -t nat -A POSTROUTING -s 192.168.0.0/24 ! -d 192.168.0.0/24 -j MASQUERADE</code></p>
<details>
<summary>
Summary</summary>
<blockquote>
<p>[sudo] password for pipirka:<br>
Generated by iptables-save v1.8.9 (nf_tables) on Mon Dec 23 19:57:35 2024<br>
*nat<br>
:PREROUTING ACCEPT [0:0]<br>
:INPUT ACCEPT [0:0]<br>
:OUTPUT ACCEPT [0:0]<br>
:POSTROUTING ACCEPT [0:0]<br>
-A POSTROUTING -s 192.168.0.0/24 ! -d 192.168.0.0/24 -j MASQUERADE<br>
COMMIT<br>
Completed on Mon Dec 23 19:57:35 2024</p>
</blockquote>
</details>
<p>Потом прописал на усройсвах шлюз распери пи (он не шлюз на самом деле дальше идёт всё на роутер) инет через распери пи появился</p>
<p>Потом дальше я уже не повидосу шол потому что он устарел уже на сегоднешний день, а запрет прикручивал сомостоятельно, а именно прогнал блокчеком нашлись сратегии всё збс казалось бы, и нихуа не работает кароч ни я перетыкал много сратегий из тех которые оно нашло и чёт не канает ваще, вот думайю можит ето маскарад виноват (ноу автора видева всё работает, правда там сратегии другие (устаревшие)) или я криво вписал в конфиг (не исключено))</p>
<p>Я кароч использую nfwqwCSBSVNNQ, выпилил 80 порт --filter-tcp-80 или как он там, потому что нах он нужон всё бы в 25 году ходили через плэин хттп какабы</p>
<p>Кароч прикладываю все конфиг и набор сратегий</p>
<p><a class="attachment" href="zapret-обсуждение-726/3fJ4WjvWQCTZDczhXAzvGyZy8fl.txt">drugieSasaiti.txt</a> (18.4 KB)<br>
<a class="attachment" href="zapret-обсуждение-726/z5Tz8F3eLkCkz0bFedoMoGqvjoA.txt">gcc.txt</a> (12.9 KB)<br>
<a class="attachment" href="zapret-обсуждение-726/2lYSPlMurTaierzpQNS91IAvyT0.txt">configZapreta.txt</a> (5.3 KB)</p>
<p>я хз кароч инет есь а запрет не запретит</p>
<p>ps<br>
wsssize куда убрали?! ето самая навороченая сратегия была btw</p></td><td>2024-12-24T06:18:12.352Z</td></tr><tr><td>zzr</td><td><p>добавлю: хотслисты я не использую (filtering:none) потому что чтобы случайно не напороца на сратегию которая их не понтдерживает (см <a href="https://github.com/bol-van/zapret?tab=readme-ov-file#%D0%BA%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D0%BE%D0%B2-%D0%B4%D0%B5%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8" rel="noopener nofollow ugc">здесь</a>) то есть по идее должон оборобатываться весь трафек но чёт не оборобатывается, свои стратегии я не сую так как в их не шарю, а беру чисто из того что нашёл блолкчек, никакой самодеятельности</p></td><td>2024-12-24T06:27:17.166Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>Спасибо! Взял как и рекомендовали SNR-CPE-W4N (rev.M) за 300 рубликов, на него всё встало.</p></td><td>2024-12-24T08:14:17.169Z</td></tr><tr><td>zzr</td><td><p>возможно связано с етим <span class="spoiler">над подумать</span><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/bb75525c56c251d9b3a06d9cb2a9a618512dd8de.jpeg" data-download-href="https://ntc.party/uploads/default/bb75525c56c251d9b3a06d9cb2a9a618512dd8de" title="Screenshot 2024-12-24 113523"><img src="zapret-обсуждение-726/bb75525c56c251d9b3a06d9cb2a9a618512dd8de_2_690x91.jpeg" alt="Screenshot 2024-12-24 113523" data-base62-sha1="qKkE9nVeG6Ta1d1OLJte3fM8Jv8" width="690" height="91" srcset="zapret-обсуждение-726/bb75525c56c251d9b3a06d9cb2a9a618512dd8de_2_690x91.jpeg, zapret-обсуждение-726/bb75525c56c251d9b3a06d9cb2a9a618512dd8de_2_1035x136.jpeg 1.5x, zapret-обсуждение-726/bb75525c56c251d9b3a06d9cb2a9a618512dd8de.jpeg 2x" data-dominant-color="E9E7E9"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot 2024-12-24 113523</span><span class="informations">1113×147 55.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-12-24T08:36:21.638Z</td></tr><tr><td>bolvan</td><td><p>Стоит еще прочитать для какого случая это описано. Весьма специфического</p></td><td>2024-12-24T10:51:40.729Z</td></tr><tr><td>electrifying</td><td><p>а параметр dpi-desync-split-pos всегда должен идти как<br>
marker+N|marker-N или можно указывать как в примерах в документации N,marker?</p></td><td>2024-12-24T13:55:02.129Z</td></tr><tr><td>bolvan</td><td><p>символ <code>|</code> обычно означает ИЛИ<br>
a|b|c  - а ИЛИ b ИЛИ c</p></td><td>2024-12-24T14:28:41.723Z</td></tr><tr><td>electrifying</td><td><p>Но в документации указаны только вот такие возможные или</p>
<pre><code class="lang-auto">--dpi-desync-split-pos=N|-N|marker+N|marker-N
</code></pre>
<p>То есть без N,marker хотя ниже в примерах такая конфигурация предусмотрена</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a.png" data-download-href="https://ntc.party/uploads/default/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a" title="image"><img src="zapret-обсуждение-726/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a_2_690x140.png" alt="image" data-base62-sha1="2fTDF0LIJhcKJZlEZQz7FpUgWIq" width="690" height="140" srcset="zapret-обсуждение-726/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a_2_690x140.png, zapret-обсуждение-726/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a_2_1035x210.png 1.5x, zapret-обсуждение-726/0fd0645555f8d5896d6fceb9065dbe6fd2619b4a.png 2x" data-dominant-color="23282F"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1302×265 18.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-12-24T16:05:51.718Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Просто апеллируйте к здравому смыслу</summary>
<pre><code class="lang-auto">--dpi-desync-split-pos=1,host+2,sld+2,sld+5,sniext+1,sniext+2,endhost-2,-10
</code></pre>
<p>N,marker+N,marker+N,marker+N,marker+N,marker+N,marker-N,-N</p>
<p><img src="https://ntc.party/images/emoji/twitter/point_up.png?v=12" title=":point_up:" class="emoji" alt=":point_up:" loading="lazy" width="20" height="20"> Пусть будет 8 мест разреза, описание мест разреза (ОМР) разделены запятой, формат ОМР, названия и значения маркеров в ридми.</p>
<p>Тут подвоха нет. Но есть умный разбор (парсинг). Если повесить незакрытую запятую в качестве опечатки, то поперхнется:<br>
<code>could not parse split pos list or too much positions (before parsing - 0, max - 64)</code><br>
Знаем меру, она указана.</p>
<hr>
<p>Всегда ли надо так мелко шинковать? Наверное, нет. Пока это скорее превентивный шаг.</p>
<div class="spoiler">
<p>Если резко погас свет, что-то бахнуло, земля задрожала, с потолка посыпался песок и запахло гарью, то значит переборщили. Тогда уж можно ничего не убирать, пусть остается)</p>
</div>
</details></td><td>2024-12-24T17:11:41.256Z</td></tr><tr><td>electrifying</td><td><p>То есть если я оставлю конструкцию вида 5,midsld она все равно по итогу будет валидной?</p></td><td>2024-12-24T17:24:42.822Z</td></tr><tr><td>i-no(...)</td><td><p>Быстрее всего скормите любую вашу конструкцию nfqws/winws и посмотрите. Худшее, что произойдет — это незагруз и ошибка в логе. Я кое где <img src="https://ntc.party/images/emoji/twitter/point_up.png?v=12" title=":point_up:" class="emoji" alt=":point_up:" loading="lazy" width="20" height="20"> использую более длинные конструкции и все ок.</p></td><td>2024-12-24T17:41:35.149Z</td></tr><tr><td>bolvan</td><td><p>midsld+0 = midsld</p></td><td>2024-12-24T17:44:05.419Z</td></tr><tr><td>i-no(...)</td><td><blockquote>
<p>midsld+0 = midsld</p>
</blockquote>
<p>Где бы такое пригодилось… Для универсальности, если скриптовать с применением каких-то других утилит, что-то анализировать и динамически двигать смещения?</p>
<aside class="quote no-group" data-username="electrifying" data-post="4019" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/electrifying/48/5915_2.png" class="avatar"> electrifying:</div>
<blockquote>
<p>5,midsld</p>
</blockquote>
</aside>
<p>Вообще вполне реально, если числовая позиция совпадет с midsld или любым другим относительным маркером. Тогда, я подозреваю, произойдет нарез в одном месте. Это слишком простая вещь, чтобы ее не предусмотреть.</p></td><td>2024-12-24T17:47:58.503Z</td></tr><tr><td>bolvan</td><td><p>Да. Ресолвинг, сортировка, дедупликация</p></td><td>2024-12-24T18:12:51.555Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="i-no" data-post="4020" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p>Быстрее всего скормите любую вашу конструкцию nfqws/winws и посмотрите. Худшее, что произойдет — это незагруз и ошибка в логе.</p>
</blockquote>
</aside>
<p>Ну вот как раз если использовать midsld+1 то ролики на ютубе отдает через раз а если 5,midsld то все ок. Похоже все таки N,marker работает как и указано в примерах</p></td><td>2024-12-24T18:22:24.430Z</td></tr><tr><td>i-no(...)</td><td><p>Наверное дело-то не в примерах, а в том, что регуляторское оборудование не смогло найти подстроки, за которыми охотится. Ну, этого можно добиться и вообще не используя midsld, как некую универсалию для примерно всех <em>каких-нибудь</em> доменов, а резать конкретно sld помельче, примерно так, как я выше показал, с учетом одного из подобранных в данном случае под YT профилей. Еще и от начала хоста тоже отрезать что-то. Однострочная, короткая и очень обобщенная мультистратегия везде хорошо работать не будет. Менять уже хорошо работающее я не предлагаю. Это так, к слову. Одного и того же эффекта нередко можно добиться несколькими техниками (возможно, с какими-то несколько отличающимися побочными эффектами).</p></td><td>2024-12-24T18:43:20.857Z</td></tr><tr><td>zzr</td><td><p>уобщем после того как я проверил что на самом распери пи все опходы работают, а на усройсвах, которые через его идут не работают опходы (но инет есть), стал копать кароч надо делать вот такой маскарад на интерфейс ане только лиш на понтсеть <span class="spoiler">чтобы ето не значило</span></p>
<blockquote>
<p>sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</p>
</blockquote></td><td>2024-12-24T19:23:11.532Z</td></tr><tr><td>bolvan</td><td><p>Иначе обратный трафик пойдет мимо.<br>
И еще надо отключать icmp redirect</p></td><td>2024-12-24T19:24:34.486Z</td></tr><tr><td>zzr</td><td><p>нуна пинги то мне насрать, пускай куда хотят идут или не идут вовсе</p></td><td>2024-12-24T19:35:30.773Z</td></tr><tr><td>Shaper4x(Дмитрий)</td><td><p>Мб кому-то пригодиться “мой” конфиг. Оператор TTK.</p>
<pre><code class="lang-auto">--wf-tcp=80,443 --wf-udp=443,50000-50099 ^
--filter-tcp=80 --dpi-desync=fakeddisorder --dpi-desync-ttl=1 --dpi-desync-autottl=2 --dpi-desync-split-pos=method+2 --new ^
--filter-tcp=443 --hostlist="%~dp0unblock.txt" --dpi-desync=fake,multidisorder --dpi-desync-split-pos=1,midsld --dpi-desync-repeats=11 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^
--filter-tcp=443 --dpi-desync=fake,multidisorder --dpi-desync-split-pos=midsld --dpi-desync-repeats=6 --dpi-desync-fooling=badseq,md5sig --new ^
--filter-udp=443 --hostlist="%~dp0unblock.txt" --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 ^ --new ^
--filter-udp=50000-50099 --ipset="%~dp0ipset-discord.txt" --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-any-protocol --dpi-desync-cutoff=n4
</code></pre>
<p>unblock.txt заменить на ваш файл со списком разблокируемых сайтов.</p></td><td>2024-12-24T20:54:56.183Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>А почему не заменить там, где <code>unblock.txt</code> - <code>--hostlist</code> на <code>--hostlist-auto</code> ?</p></td><td>2024-12-24T20:57:36.733Z</td></tr><tr><td>bolvan</td><td><p>icmp - не только пинги.<br>
icmp redirect сообщает, что нужно использовать другой гейтвей<br>
это сделано для предотвращения бессмысленного роутинга внутри L2 сегмента</p></td><td>2024-12-25T07:16:21.658Z</td></tr><tr><td>abc555</td><td><p>А нельзя ли добавить чтоб при заходе в /opt/zapret/config в самом верху писало версию проги ?<br>
Просто куча роутеров и не помню где какая стоит версия, хоть бери и самому записывай )<br>
По типу <span class="hashtag-raw">#запрет</span> версия такая то, в самом верху чтоб бросалась в глаза когда заходишь что нить изменить. Глянул на гихаб, смотришь старая стоит, взял и обновил, нормальная тема )</p></td><td>2024-12-25T09:52:12.045Z</td></tr><tr><td>bolvan</td><td><p>Версии в данный момент принадлежат только исполняемым прогам. nfqws,tpws,ip2net,mdig.<br>
Скрипты версий не имеют.<br>
/opt/zapret/nfq/nfqws | head<br>
В конфиг нельзя. Это текстовик, который сохраняется.</p></td><td>2024-12-25T10:07:56.976Z</td></tr><tr><td>i-no(...)</td><td><p>Можно сделать <code>alias</code>, наример <code>zver</code></p>
<pre><code class="lang-auto">~# alias zver='/opt/zapret/nfq/nfqws | head -n 1'
~# zver
github version v69.7 (594e613fcb3669e377d1f564873e15459dc5f229)
~#
</code></pre>
<p>И чтобы никогда не забыть, можно под варнинг добавить, чтобы при логине однократно отображалось</p>
<p><img src="zapret-обсуждение-726/30f9d055c161ca480b00b0f3e41b7d1a87941110.png" alt="putty-warning-zapret" data-base62-sha1="6Zg8OBJOW8Oiw8CN53GhqZbkihW" width="408" height="252"></p>
<details>
<summary>
В моем случае в /etc/profile</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/48996511c1b80ece8f2d2dcb575a41b841dda1d5.png" data-download-href="https://ntc.party/uploads/default/48996511c1b80ece8f2d2dcb575a41b841dda1d5" title="winscp-edit-etc-profile"><img src="zapret-обсуждение-726/48996511c1b80ece8f2d2dcb575a41b841dda1d5.png" alt="winscp-edit-etc-profile" data-base62-sha1="amf1x1xXhOwbNzjr11NcBQAvGlf" width="690" height="334" data-dominant-color="273288"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">winscp-edit-etc-profile</span><span class="informations">776×376 16.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Только с вашим путем, в нормальном случае <code>/opt/zapret/nfq/nfqws</code></p>
<p><code>cut</code> убирает часть текста для компактизации</p>
</details></td><td>2024-12-25T10:52:31.904Z</td></tr><tr><td>disappointed</td><td><p>get_reestr_hostlist.sh тут 404 ошибка гитхаба<br>
Не вам, случайно ткнул. Для bolvan.</p></td><td>2024-12-25T15:59:56.132Z</td></tr><tr><td>i-no(...)</td><td><p>del</p></td><td>2024-12-25T16:17:08.132Z</td></tr><tr><td>zzr</td><td><p>спасибо за информацию!</p>
<p>ps<br>
кстать оборотил вниманийе что blockcheck.эсаш улучшил ся в последнее время, гараздо бысрей работает настандартном пресете и в конце пишит если не все то уже гараздо больше сратегий раньше приходилолсь делать <code>блолкчек | tee /хоум/фаел</code> потому что он мало выписывал в суммари</p>
<aside class="quote no-group" data-username="Shaper4x" data-post="4029" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/shaper4x/48/12427_2.png" class="avatar"> Shaper4x:</div>
<blockquote>
<p>Мб кому-то пригодиться “мой” конфиг. Оператор TTK.</p>
</blockquote>
</aside>
<p>бро i appreciate the effort but ето ты зря выписал сюда тут наверняка ркновцы шарятся здесь, времена куниверсальных стратегий в прошлом теперь каждый ищит себе рабочий варикант и хранит его как того прелесть <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-12-25T16:32:43.754Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="disappointed" data-post="4035" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>get_reestr_hostlist.sh тут 404 ошибка гитхаба<br>
Не вам, случайно ткнул. Для bolvan.</p>
</blockquote>
</aside>
<p>Это исправлено в master branch. Там перестали выкладывать dump.csv и заменили на dump.gz</p></td><td>2024-12-25T18:08:28.892Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Извиняюсь, если не совсем в тему. Но может раз уж в целом этот sh-скрипт называется на английском, то и <code>reestr</code> надо поменять на <code>registry</code>? <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2024-12-25T18:59:53.389Z</td></tr><tr><td>bolvan</td><td><p>Там и antizapret тоже есть<br>
anti-prohibition что ли теперь называть ?<br>
Тут все построено на исконно русских названиях, которые нельзя писать кириллицей</p></td><td>2024-12-25T19:24:44.337Z</td></tr><tr><td>tequiero</td><td><p>Здравствуйте, товарищи.<br>
Подскажите, как корректно записывать параметры nqfs.</p>
<ol>
<li>В каком случае использовать ключ --new? Для всех стратегий фильтра, кроме первой?</li>
<li>Как правильно записывать стратегии для разных хост листов:<br>
в одну строчку фильтра, как ниже</li>
</ol>
<pre><code class="lang-auto">--filter-tcp=80 --dpi-desync=fakedsplit --dpi-desync-ttl=1 --dpi-desync-split-pos=midsld --dpi-desync-fooling=md5sig --hostlist=/opt/zapret/ipset/hostlist1 --dpi-desync=multisplit --dpi-desync-split-pos=2 --hostlist=/opt/zapret/ipset/hostlist2 --new
</code></pre>
<p>или в разные:</p>
<pre><code class="lang-auto">--filter-tcp=80 --dpi-desync=fakedsplit --dpi-desync-ttl=1 --dpi-desync-split-pos=midsld --dpi-desync-fooling=md5sig --hostlist=/opt/zapret/ipset/hostlist1
--filter-tcp=80 --dpi-desync=multisplit --dpi-desync-split-pos=2 --hostlist=/opt/zapret/ipset/hostlist2 --new
</code></pre>
<ol start="3">
<li>Ну и заодно, есть ли возможность использовать перенос строки для длинной стратегии? Какой символ использовать? "", как в баше?</li>
</ol>
<p>Спасибо за подсказки.</p></td><td>2024-12-26T13:26:15.594Z</td></tr><tr><td>i-no(...)</td><td><p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/122d73f1513e0a28315c4200b8b9c0b3748d4b55.png" data-download-href="https://ntc.party/uploads/default/122d73f1513e0a28315c4200b8b9c0b3748d4b55" title="config-default"><img src="zapret-обсуждение-726/122d73f1513e0a28315c4200b8b9c0b3748d4b55.png" alt="config-default" data-base62-sha1="2ANYz2ULSfO5yXzYzaXJJxRYUTj" width="690" height="111" data-dominant-color="242738"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">config-default</span><span class="informations">1131×182 5.03 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Дорогой товарищ, не стесняясь заглядывайте в zip. И в <a href="https://github.com/bol-van/zapret/tree/master/docs" rel="noopener nofollow ugc">доки</a>!</p></td><td>2024-12-26T14:04:17.461Z</td></tr><tr><td>meeeeeh</td><td><p>Вопрос уточняющий, поскольку с порога я не нашёл ответа гуглежом.</p>
<p>Я покрутил тут blockcheck из последнего виндового бандла на машине с Win11 и некоторым местечковым провайдером. После нескольких часов полного перебора всех стратегий я остался без какого-то положительного результата, со стеной сообщений о том что winws не отработал - на абсолютно всех попытках. При этом в принципе провайдер на месте опытов прошивается со свистом даже стратегиями из популярных батник-бандлов так что дело здесь точно не в ТСПУ.</p>
<p>У меня из догадок с порога только то, что что-то в самой ОС не даёт winws и\или windivert нормально работать. Что тут могло пойти не так, при условии что запуск блокчека делался от администратора?</p>
<p>Я бы с удовольствием не возился со всем этим на винде, однако конкретно на той локации человек линукса не имеет, не знает, и знать не хочет - так что из доступного мне оборудования там есть только виндовый лаптоп. Подключение по воздуху, однако там настолько древний роутер, что hardware offload’ом там и не пахнет.</p></td><td>2024-12-26T14:18:17.999Z</td></tr><tr><td>disappointed</td><td><p>Подскажите, кто-то смог разобраться с проблемой зависания на 19-ой секунде в браузере?<br>
Я  перепробовал множество стратегий, нет никакого эффекта на это поведение, не могу понять, что является причиной. Всё работает отлично, но встаёт иногда на втором чанке. При этом, если взять этот непрогружаемый в ммоенте домен .googlevideo.com и открыть тут же в другой вкладе рядом - он прекрасно открывается. Почему же он таймаутит когда с него грузит скрипт фронтэнда ютуба? И почему это проявляется только на втором сегменте?</p></td><td>2024-12-26T15:37:05.913Z</td></tr><tr><td>i-no(...)</td><td><p>Видимо, стабильной стратегии подобрать пока не удалось. Возможно, что именно так сделано специально, из вредности, чтобы нервы потрепать. Я иногда сталкиваюсь с тем, как низовые кусочки государства, исполнители, ведут себя гаденько, недостойненько, глупейше врут и т. п. Но если вернуться к GGC, то предложил бы применять multidisorder и <a href="https://ntc.party/t/726/3999">прицельно</a> фрагментировать серверные ответы с помощью wssize. Вероятно, это добавит некоторой вязкости, плюс полусекундную задержку если используете winws. На nfqws я такого не наблюдаю, там все шустро. Свою мультистратегию вы не показываете, так что гадать можно долго.</p></td><td>2024-12-26T15:49:07.103Z</td></tr><tr><td>disappointed</td><td><p>У меня работает множество вариантов, даже самые простейшие дисордер (ранее фейк+дисордер) + ограничение по ттл или по badseq, но вопрос в том, что никакие вносимые изменения не влияют на вероятность получить таймаут на втором чанке на 19 секунде.<br>
Ещё больше удивляет, что этот урл всегда “пробиваем”, если проверить его в другой вкладке. Я вижу, что на это многие жаловались но так никто и не отдебажил истинную причину, так и продолжают давить ф5.</p></td><td>2024-12-26T15:58:32.853Z</td></tr><tr><td>uwu(uwu)</td><td><p>скорее всего проблема с одним из двух пулов, которые у вас прописаны в mn= в videoplayback (через запятую)<br>
нужно убедиться, что открываются оба пула ggc (а не только один из них)<br>
если открываются оба с первого client hello, значит серверу/тспу не нравится ваш фейк</p></td><td>2024-12-26T16:01:29.830Z</td></tr><tr><td>disappointed</td><td><p>Если присмотреться, то действительно, зависают только те хосты, которые начинаются на один и тот же префикс.Тогда вопрос - каким образом они открываются тут же на второй вкладке? Без малейших проблем, и при этом в консоли с ютубом в то же самое время стоит в (Ожидание), потом он таймаутится и снова его пытается скрипт прогрузить без всякого успеха.</p></td><td>2024-12-26T16:21:35.996Z</td></tr><tr><td>uwu(uwu)</td><td><p>такое скорее всего ggc, которые находятся в сети РТК<br>
там если стратегия подобрана неправильно, то при первом clienthello сервер молчит, при повторном устанавливает соединение. (это если открывать напрямую). вы можете это проверить через wireshark</p>
<p>я помоему тестил несколько стратегий, где сервер начинал работать нормально (но проверить их корректность не смогу, потому что это левые сервера, у меня пров другие использует)</p>
<p>либо если описанное выше не подходит , то видео не может прогрузиться из-за фейка.</p>
<p>если понажимать f5 раз 10 на самом ggc : он все разы открывает страницу без таймаутов?</p></td><td>2024-12-26T16:24:39.051Z</td></tr><tr><td>disappointed</td><td><p>Судя по всему у меня ещё дуалстэк с ipv6 накладывает что-то, по v4 всё чётко… по v6 иногда действительно висит как будто там правило drop на client hello с какой-то вероятностью</p></td><td>2024-12-26T16:29:04.319Z</td></tr><tr><td>tequiero</td><td><p>Я не задавал бы эти вопросы, если бы в доке был бы на них ответ или ответ был однозначный.<br>
К слову, в Вашем сообщении вовсе нет ответа ни на один вопрос.<br>
Проще, наверное, будет в дебаг лог залезть.<br>
p.s. В моем третьем вопросе в кавычках обратный слэш должен был быть, но вырезан сайтом)</p></td><td>2024-12-26T16:43:09.275Z</td></tr><tr><td>i-no(...)</td><td><p>Кое какой ответ там все таки есть, в визуальном виде)</p>
<p><code>--new</code> используется для создания мультистратегии, как разделитель. Используется для всех, кроме последней. Если с картиночки ответ никак не воспринимается, то… поможет ли дебаг лог? Может, дебажить пока рано. Может, заглянете в <code>preset_russia.cmd</code> из винбандла в качестве примера. Там присутствует шесть профилей, все они вместе и составляют мультистратегию.</p>
<p>Если нажать в здешнем редакторе кнопку <code>&lt;/&gt;</code> то можно ввести и обратный слеш <code>"\"</code></p></td><td>2024-12-26T17:00:04.235Z</td></tr><tr><td>bolvan</td><td><p>Лог надо приложить.<br>
Проходной оффлоад на роутере это даже хорошо. Обычно он не рубит ничего, что рубит linux</p></td><td>2024-12-26T17:27:03.358Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group quote-modified" data-username="tequiero" data-post="4041" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/8baadc/48.png" class="avatar"> tequiero:</div>
<blockquote>
<ol>
<li>В каком случае использовать ключ --new? Для всех стратегий фильтра, кроме первой?</li>
<li>Как правильно записывать стратегии для разных хост листов:<br>
в одну строчку фильтра, как ниже</li>
<li>Ну и заодно, есть ли возможность использовать перенос строки для длинной стратегии? Какой символ использовать? “”, как в баше?</li>
</ol>
</blockquote>
</aside>
<p>–new - это разделитель профилей. отделяет один от другого. разделителей на 1 меньше, чем профилей<br>
переносы строк поддерживаются и служат только для удобства восприятия. при передаче nfqws они заменяются на пробелы. см config.default</p></td><td>2024-12-26T17:32:13.042Z</td></tr><tr><td>tequiero</td><td><p>Уже в логах разные варианты посмотрел как работают, разобрался.<br>
В виндовые пресеты не додумался заглянуть, т.к. linux.</p>
<p>Спасибо i-no &amp; bolvan за ответы.</p></td><td>2024-12-26T17:39:29.137Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a></p>
<blockquote>
<p>nfqws: применение относительных маркеров к частичному TLS ClientHello (ретрансмиссии, без reasm)</p>
</blockquote>
<p>это на что влияет?</p></td><td>2024-12-27T07:15:07.095Z</td></tr><tr><td>disappointed</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> Можно уточнить, чем отличаются --dpi-desync-fakedsplit-pattern от --dpi-desync-fake-tls, и что берёт из этих параметров на вход стратегия, к примеру fakedsplit?</p></td><td>2024-12-27T08:33:39.976Z</td></tr><tr><td>bolvan</td><td><p>частично решает этот вопрос</p><aside class="onebox githubissue" data-onebox-src="https://github.com/bol-van/zapret/issues/992">
  <header class="source">

      <a href="https://github.com/bol-van/zapret/issues/992" target="_blank" rel="noopener">github.com/bol-van/zapret</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/bol-van/zapret/issues/992" target="_blank" rel="noopener">Winws multidisorder - нет разбиения по маркерам при ретрансмиссии</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2024-12-25" data-time="10:54:26" data-timezone="UTC">10:54AM - 25 Dec 24 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2024-12-25" data-time="19:52:56" data-timezone="UTC">07:52PM - 25 Dec 24 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/Pavel4e5" target="_blank" rel="noopener">
          <img alt="Pavel4e5" src="zapret-обсуждение-726/e5943dce4c99499d830e58402dd7ee227ba46bb2.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="E1EABA">
          Pavel4e5
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Иногда при использовании multidisorder сервер присылает в ответ 3 SACK подряд, ч<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">то приводит к ретрансмиссии частей обработанного multidisorder-ом пакета, при этом передаваемый снова пакет по абсолютным числовым маркерам разбивается, а по относительным (host, midsld) - нет. 
Обратил на это внимание, когда заметил что иногда (редко) при обращении к youtube.com срабатывает блокировка, причем всегда срабатывает только если есть ретрансмиссия и срабатывает после ретрансмиссии - т.е. сервер успевает прислать SACK и ACK, затем идет ретрансмиссия и стоп.
Возможно лучшим решением будет как-нибудь избавиться от ретрансмиссии в этом случае.
Проверялось на Windows 10, winws 69.8 , Firefox 133.0.3 параметры запуска: `winws --wf-tcp=443 --filter-tcp=443 --dpi-desync=fake,multidisorder --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin --dpi-desync-split-pos=1,midsld`
Файл захвата такого случая приложен.
[mdis_block_retrans.zip](https://github.com/user-attachments/files/18245521/mdis_block_retrans.zip)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-12-27T08:42:32.605Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="disappointed" data-post="4057" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/disappointed/48/8275_2.png" class="avatar"> disappointed:</div>
<blockquote>
<p>Можно уточнить, чем отличаются --dpi-desync-fakedsplit-pattern от --dpi-desync-fake-tls, и что берёт из этих параметров на вход стратегия, к примеру fakedsplit?</p>
</blockquote>
</aside>
<p>fake-tls берет --dpi-desync=fake<br>
fakedsplit-pattern берут  fakedsplit и fakeddisorder</p>
<p>паттерн отличается от фейка тем, что фейк имеет фиксированный размер, а паттерн это как повторяющийся рисунок на обоях. может множиться до бесконечности. применяется в тех случаях, когда размер необходимого пейлоада может быть произвольным</p></td><td>2024-12-27T08:43:53.969Z</td></tr><tr><td>disappointed</td><td><p>Паттерн фейка получается это заполнение пейлоада внепротокольным шумом и можно пихать что угодно?</p></td><td>2024-12-27T08:52:24.361Z</td></tr><tr><td>bolvan</td><td><p>Почитайте доку. Там описано как они работают. Для fakedsplit/fakeddisorder фейк куски косят под реал и имеют тот же размер.<br>
Но разбиться может в любом месте, если относительный маркер. Поэтому размер пейлоада известен только после анализа содержимого. Нужная растяжка по паттерну</p></td><td>2024-12-27T09:07:34.248Z</td></tr><tr><td>i-no(...)</td><td><p>Кое какие мелочи, можно не тратить время на ответ.<br>
Под mips32r1-lsb не проапдейчен version у nfqws, mdig и ip2net в норме.<br>
Может, отнесётесь к добавке когда-нибудь потом в mdig реверс лукапа иплиста через stdin, может, по отд. свичу.</p></td><td>2024-12-27T17:36:37.562Z</td></tr><tr><td>bolvan</td><td><p>Невозможно это. Собирается на гитхабе.<br>
Скорее всего по какой-то причине что-то не дало переписать nfqws поверх старого.<br>
Он мог быть запущен отдельно</p>
<p>Реверс лукап большой ценности не имеет, поскольку в PTR можно написать хоть привет дед морозу</p></td><td>2024-12-27T19:19:50.669Z</td></tr><tr><td>i-no(...)</td><td><details>
<summary>
Ладно...</summary>
<blockquote>
<p>что-то не дало переписать nfqws поверх старого</p>
</blockquote>
<p>Взял по 3-му разу уже из <code>zapret-v69.9-openwrt-embedded.tar.gz</code></p>
<pre><code class="lang-auto">~# service nfqws stop
Stopping NFQWS service...
~# service nfqws status
Service NFQWS is stopped
~# ps | grep nfqws
30970 root      1248 S    grep nfqws
~# ll /bin/nfqws
-rwxr-xr-x    1 root     root        127368 Dec 26 22:05 /bin/nfqws*

~# sha256sum &lt; /bin/nfqws
b6d8ce19426dd760fcdd6b31f82baa2bc8ae21fa9591df5b61dbf2881c9aa73e  -
</code></pre>
<p>Сумма как в архиве, получается — переписалась</p>
<pre><code class="lang-auto">~# nfqws version
github version v69.7 (594e613fcb3669e377d1f564873e15459dc5f229)

Need queue number (--qnum)
~# nfqws | head -n 1
github version v69.7 (594e613fcb3669e377d1f564873e15459dc5f229)
~#
</code></pre>
<p>Однако, пишет про себя, что 69.7</p>
<p>Ладно, закинул в tmp</p>
<pre><code class="lang-auto">~# cd /var/tmp/zapret
/tmp/tmp/zapret# chmod +x nfqws

/tmp/tmp/zapret# sha256sum &lt; nfqws
b6d8ce19426dd760fcdd6b31f82baa2bc8ae21fa9591df5b61dbf2881c9aa73e  -
/tmp/tmp/zapret# nfqws version
github version v69.7 (594e613fcb3669e377d1f564873e15459dc5f229)

Need queue number (--qnum)
/tmp/tmp/zapret#
</code></pre>
<details>
<summary>
Скрин из 7-zip в норме</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/64168c5c3d4f67ecaaf7fd7008bd0767502f6d06.png" data-download-href="https://ntc.party/uploads/default/64168c5c3d4f67ecaaf7fd7008bd0767502f6d06" title="nfqws-sha256-7zip"><img src="zapret-обсуждение-726/64168c5c3d4f67ecaaf7fd7008bd0767502f6d06.png" alt="nfqws-sha256-7zip" data-base62-sha1="ehq3vfEkY29MWDx7bwTDlYaRsma" width="690" height="433" data-dominant-color="F1F4F6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">nfqws-sha256-7zip</span><span class="informations">1152×724 14.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<pre><code class="lang-auto">$ curl -sL https://github.com/bol-van/zapret/releases/download/v69.9/sha256sum.txt | grep "mips32r1-lsb/nfqws"
b6d8ce19426dd760fcdd6b31f82baa2bc8ae21fa9591df5b61dbf2881c9aa73e  zapret-v69.9/binaries/mips32r1-lsb/nfqws
</code></pre>
<p>Файловая чексумма совпала, а принтящийся вершн стринг как бы нет.<br>
Разницу между хешем файла и <a href="https://github.com/bol-van/zapret/commit/594e613fcb3669e377d1f564873e15459dc5f229" rel="noopener nofollow ugc">коммита</a> я понимаю.<br>
Гитхаб что ли сломался или я или мы оба.</p>
<hr>
<p>Ладно, не важно. Работает — это главное.</p>
</details></td><td>2024-12-27T20:40:04.739Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="i-no" data-post="4064" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/i-no/48/15261_2.png" class="avatar"> i-no:</div>
<blockquote>
<p><code>/tmp/tmp/zapret# nfqws version</code></p>
</blockquote>
</aside>
<p>Linux не запускает EXEшники из текущей директории как винда<br>
надо ./nfqws<br>
у вас запускается другой nfqws, лежащий в $PATH, и он стар</p></td><td>2024-12-28T06:48:20.285Z</td></tr><tr><td>rkn-chan</td><td><p>меня то ли плющит то ли совпадение, но после разговоров про “оконечное оборудование абонента” мне захотелось ежедневно генерировать рандомный mac на wan порту из /dev/urandom и теперь внезапно стратегия которая работала только для ютуба с фейк тлс от гугла теперь пробивает вообще все, даже ech который раньше только с disorder2 пробивался и точно ломался с фейками от гугла</p>
<p>с чего бы это</p></td><td>2024-12-28T16:11:38.256Z</td></tr><tr><td>abc555</td><td><p>А смысл генерировать mac на wan ? Что это даёт ? Лишний раз только привлекать внимание.<br>
Его можно на какой нить, чтоб не смогли пробить что это за оборудование, так как обычно по маку определяют и смотрят какие у него есть уязвимости и используют их для чего то там, но мак видит только пров, если конечно не сливает его сам роутер в днс или ваше устройство подключённое к роутеру может сливать всё что подключено к роутеру, все вай фай в радиусе, все маки и локальные ип адреса, имена устройств, скажем стандартная 10 винда, если не вырезано из неё всё это или ваш айфон или андроид или телевизор. Надо начинать с устройств, а потом уже только заканчивать роутером )</p></td><td>2024-12-29T11:35:01.017Z</td></tr><tr><td>Avac-blip(Avac Blip)</td><td><p>С ходу что-то нигде больше не увидел инфы; пардон, если ошибся темой<br>
Есть какой-то старенький zapret (от Flowseal чтоли), с минимальными изменениями от стандартного конфига, ютуб ворочается - и ладно, желания (точнее, необходимости) обновлять и что-то менять не возникало, оставил так.<br>
Тут обнаружил, что буквально на днях ещё живой Вайбер вдруг уже не алё, сайт не открывается, приложение не может подключиться.<br>
Если просто добавить в список адресов <a href="http://viber.com" rel="noopener nofollow ugc">viber.com</a> - прокатит? Точнее, не вылезет ли каких подводных камней? Или всё сложнее?</p></td><td>2024-12-29T12:31:42.373Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Avac-blip" data-post="4068" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avac-blip/48/10883_2.png" class="avatar"> Avac-blip:</div>
<blockquote>
<p>Если просто добавить в список адресов <a href="http://viber.com">viber.com</a> - прокатит?</p>
</blockquote>
</aside>
<p>Возможно, что да. А возможно что нет. Тут надо брать ваершарк и смотреть на какие адреса идут запросы и все добавлять</p></td><td>2024-12-29T12:41:51.296Z</td></tr><tr><td>Avac-blip(Avac Blip)</td><td><p>Понял. Ну да, логично<br>
Ок, тут как раз более подходящее обсуждение обнаружилось, укачусь туда.</p></td><td>2024-12-29T17:33:27.925Z</td></tr><tr><td>g4jCbms</td><td><p>Первый раз попробовал собрать кастомный конфиг, используя blockcheck для поиска стратегий и у меня получилось!</p>
<pre><code class="lang-auto">--wf-tcp=443
--dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld
</code></pre>
<p>Конфиг совсем простенький, фильтрует только https и используется всего одна стратегия, но ютуб работает как раньше. Запрет - круто <img src="https://ntc.party/images/emoji/twitter/fire.png?v=12" title=":fire:" class="emoji" alt=":fire:" loading="lazy" width="20" height="20"></p></td><td>2024-12-30T17:51:22.968Z</td></tr><tr><td>P4H</td><td><p>добавил эти строчки в в etc/hosts, все грузит, но сообщения в инсте не хочет, как только переходит на страницу, то не подгружает</p></td><td>2024-12-30T22:04:14.538Z</td></tr><tr><td>Katrovsky(Kirill K.)</td><td><aside class="quote no-group" data-username="Avac-blip" data-post="4068" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/avac-blip/48/10883_2.png" class="avatar"> Avac-blip:</div>
<blockquote>
<p>Есть какой-то старенький zapret (от Flowseal чтоли)</p>
</blockquote>
</aside>
<p>Это звучит как периодическая таблица элементов от Ахматовой. Есть только один zapret, от bol-van, а Flowseal лишь придумал ряд конфигов к нему.</p></td><td>2024-12-31T05:06:55.462Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>Всем добрый день, кто может помочь - есть 2 роутера, на первый поступает интернет, второй с openwrt и запретом. После подключения роутера 2 - на ПК появился наконец Ютуб, но, при этом перестало открывать одноклассники, а дед только на этих сайтах в основном и сидит.<br>
Также если кто может помочь настроить IPTV также в купе с запретом чтоб стоял, было б здорово, если кто-то знает как это реализовать. Я пока так и не понял, как можно настроить и IPTV и обычный интернет с запретом на Android телевизор. На данный момент на первом роутере стабильно работает IPTV и все сайты, но нет ютуба, на втором не встаёт IPTV и не работают одноклассники, но есть Ютуб.</p>
<p>PS, этот сайт тоже не хочет открывать на 2-м роутере, только на первом, с учетом запуска дополнительного обходчика с ноутбука</p></td><td>2024-12-31T09:40:46.427Z</td></tr><tr><td>bolvan</td><td><p>Судя по описанию вы  не читали доку, не поняли, что это не однокнопочное решение, а сделали по какой-то упрощенной пошаговой инструкции из инета или по умолчанию. Так это не работает. Или работает, но плохо</p></td><td>2024-12-31T09:44:56.253Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>сделал простую установку из коробки без изменения конфигов. Всё так. Однокнопочных решений тут в принципе не существует, учитывая, что вчера пришлось заново накатывать openwrt на этот роутер.<br>
Есть возможность убрать 1-й роутер, но тогда останется проблема с iptv, а с ним я пока ещё не смог разобраться как можно это решить. Насколько я правильно понял - надо сделать мост, но в целом этот вопрос тут обсуждать думаю не стоит, не про то обсуждение.<br>
Мой изначальный вопрос - почему блочит одноклассники и как это решить. По консоли ip одноклассников - 5.61.23.11:443 (что как раз входит в диапазон 5.61.20.0 - 5.61.23.255). Возможно я не до конца понял принцип почему именно их сайт не открывает, когда стоит Zapret, но хотелось бы услышать возможный вариант решения.</p></td><td>2024-12-31T10:16:51.422Z</td></tr><tr><td>bolvan</td><td><p>Стратегии могут ломать незаблокированные сайты.<br>
Потому надо крутить стратегию так, чтобы она ломала как можно меньше, а что не выходит исправить - заносить в исключения<br>
Прочитайте для начала quick_start</p></td><td>2024-12-31T10:21:02.641Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>С наступающим Вас, спасибо, завтра буду пробовать подбирать. В целом до этого тоже были проблемы с ютубом - из коробки не работал, сейчас заработал, спустя 2 месяца, сам.</p></td><td>2024-12-31T11:56:41.058Z</td></tr><tr><td>easyone11</td><td><p>Всех с наступающим! болавана отдельно )<br>
Приехал на дачу, тут до сих пор с лета пашет fake,disorder2, пробивает всё, в мск бы так)</p></td><td>2024-12-31T12:00:29.181Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>А может ещё кто подсказать, по второй проблеме - как можно на openwrt совместить и iptv и запрет на одном роутере, вдруг кто знает или может подсказать где посмотреть?</p></td><td>2024-12-31T12:19:37.971Z</td></tr><tr><td>bolvan</td><td><p>iptv может даваться по разным технологиям<br>
это может быть отдельный VLAN, multicast udp или http<br>
если multicast, достаточно установить igmpproxy<br>
если VLAN, тут есть 2 варианта. Если в роутере 2 ethernet адаптера физических, придется сделать мост с выводом на отдельный порт свитча для приставки или телека. Если все сделано только на одном свитче, достаточно лишь настроить VLANы на свитче, чтобы на какой-то порт шел определенный VLAN untagged. DSA конфигурация свитча максимально смазывает эти различия, в обоих случаях будет выглядеть как мост. А если старый интерфейс управления свитчом swconfig, то там другая настройка<br>
а если http, то ничего делать не надо</p></td><td>2024-12-31T12:42:48.798Z</td></tr><tr><td>abc555</td><td><p>Так он даже не сказал какое iptv )) Может с нэта, а может от прова. У меня пров вещает iptv, но я эту шляпу заблокировал, причём не просто, в весь диапазон 224.0.0.0/4 на вход и выход, чтоб не входил и не выходил, не хватало, чтоб я ещё использовал iptv от провайдера )) У меня с нэта и 2000 выборочных каналов, отсеял наверно 6к каналов это точно, всякую шляпу что посчитал не нужным, плюс запрет помогает некоторые источники разблокировать и вообще работает всё ровно, так что огромнейшее спасибо</p></td><td>2024-12-31T12:57:08.737Z</td></tr><tr><td>bolvan</td><td><p>multicast не ходит без присоединения к мультикаст группе. это параноя блокировать 224</p></td><td>2024-12-31T13:04:52.227Z</td></tr><tr><td>W1T</td><td><p>Всем Доброе Утро с Новым Годом! Хочу спросить можно ли сделать как то zapret на андроид? У меня уже просто давно стоит скрипт zapret  на компе и прекрасно работает и для ютуб и для дискорд.</p></td><td>2025-01-01T09:34:00.211Z</td></tr><tr><td>bolvan</td><td><p>Можно. Но только с рутом и все делать самому. Приложения нет</p></td><td>2025-01-01T09:39:58.483Z</td></tr><tr><td>W1T</td><td><p>Можно какую то инструкцию? Я просто не очень шарю в этом.</p></td><td>2025-01-01T10:30:46.196Z</td></tr><tr><td>bolvan</td><td><p>Тут кто-то что-то подобное делает</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/bol-van/zapret/discussions/872">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/bol-van/zapret/discussions/872" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/4c081f4fdee4207d794bda9888dac272a8ab17e2_2_690x345.png" class="thumbnail" data-dominant-color="ECEEED" width="690" height="345"></div>

<h3><a href="https://github.com/bol-van/zapret/discussions/872" target="_blank" rel="noopener">Скрипт простого запуска zapret/nfqws (Android и урезанные прошивки) ·...</a></h3>

  <p>Работает на Android также поддерживает OpenWRT и некоторые урезанные прошивки Версия 3.4 Готовый zip под андроид AntiDPI.zip ставиться через TWRP или Magisk, внутри архива есть readme.txt с инструк...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2025-01-01T10:35:10.549Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>от провайдера (ITNET г.Ковров), основа такая:<br>
есть ПК по кабелю и 2 ТВ, один из них по WiFi, другой - кабель. На всех устройствах смотрят ютуб, плюс на обоих ТВ - IPTV от провайдера. Роутер с openwrt - SNR-CPE-W4N(rev.M), сейчас на нём поставлен запрет. Скорее всего завтра буду подбирать конфигурацию в нём, чтоб работали одноклассники, т.к. на данный момент из коробки не работают, а дед ими пользуется.</p></td><td>2025-01-01T11:28:53.124Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>По итогу: посмотрел выше работающие схемы, взял оттуда<br>
–wssize=1:6<br>
Одноклассники заработали, Ютуб также остался рабочим.<br>
Осталось решить вопрос с IPTV</p></td><td>2025-01-01T13:08:28.872Z</td></tr><tr><td>Lisandr(Алекс)</td><td><p>Спустя пару часов они снова отвалились - решил почитать Readme, на основе чего добавил сайт <a href="http://ok.ru" rel="noopener nofollow ugc">ok.ru</a> в exclude в настройках, после чего всё заработало. Понял, насколько я оказался туп и надо было изначально почитать <strong>СИСТЕМА ИСКЛЮЧЕНИЯ IP</strong></p></td><td>2025-01-01T19:23:10.879Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>кто подскажет что сделать с zapret или dnscrypt, веб версия долго висит на загрузке так но всё таки прогружает потом<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/c4cfba0292eb23cb94836bbad1a167c4933591ac.png" data-download-href="https://ntc.party/uploads/default/c4cfba0292eb23cb94836bbad1a167c4933591ac" title="image"><img src="zapret-обсуждение-726/c4cfba0292eb23cb94836bbad1a167c4933591ac_2_625x500.png" alt="image" data-base62-sha1="s54DsjSEmSpkgKzwTLe7EwTmgpu" width="625" height="500" srcset="zapret-обсуждение-726/c4cfba0292eb23cb94836bbad1a167c4933591ac_2_625x500.png, zapret-обсуждение-726/c4cfba0292eb23cb94836bbad1a167c4933591ac_2_937x750.png 1.5x, zapret-обсуждение-726/c4cfba0292eb23cb94836bbad1a167c4933591ac_2_1250x1000.png 2x" data-dominant-color="2C2E32"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1280×1024 63.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2025-01-01T19:43:48.612Z</td></tr><tr><td>Dessert</td><td><p>Подскажите пожалуйста, что делать, если blockcheck выдаёт нерабочие конфигурации (или грузит 144p первые 5 секунд, или нет соединения). При quick ничего не выдаёт, при standart нужно ждать 20-30 минут и все конфиги нерабочие, при force сразу выдаёт кучу нерабочих конфигов. При этом конфиги, работавшие в прошлой проверке, могут не работать в последующей или вовсе может ничего не выдать.</p></td><td>2025-01-01T20:11:18.534Z</td></tr><tr><td>easyone11</td><td><p>искать рабочую страту для дискорда?</p></td><td>2025-01-01T20:11:49.205Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="Dessert" data-post="4092" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/b5e925/48.png" class="avatar"> Dessert:</div>
<blockquote>
<p>при standart нужно ждать 20-30 минут и все конфиги нерабочие</p>
</blockquote>
</aside>
<p>мб блок ip? другие заблоченные сайты попробуй</p></td><td>2025-01-01T20:14:31.363Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>ставь dnscrypt + zapret</p></td><td>2025-01-01T20:18:51.765Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>не понял тебя, замену?</p></td><td>2025-01-01T20:20:43.804Z</td></tr><tr><td>uwu(uwu)</td><td><p>а что вы прогоняете через блокчек?</p></td><td>2025-01-01T20:22:10.569Z</td></tr><tr><td>Dessert</td><td><p><a href="http://rr1---sn-4g5ednds.googlevideo.com" class="onebox" target="_blank" rel="noopener nofollow ugc">rr1---sn-4g5ednds.googlevideo.com</a></p></td><td>2025-01-01T20:33:48.424Z</td></tr><tr><td>Dessert</td><td><p>Выдаёт при запуске это:<br>
system DNS is working<br>
no working public DNS was found. looks like public DNS blocked.<br>
checking resolved IP uniqueness for : <a href="http://pornhub.com" rel="noopener nofollow ugc">pornhub.com</a> ntc.party <a href="http://rutracker.org" rel="noopener nofollow ugc">rutracker.org</a> <a href="http://www.torproject.org" rel="noopener nofollow ugc">www.torproject.org</a> <a href="http://bbc.com" rel="noopener nofollow ugc">bbc.com</a><br>
censor’s DNS can return equal result for multiple blocked domains.<br>
all resolved IPs are unique</p></td><td>2025-01-01T20:40:51.513Z</td></tr><tr><td>easyone11</td><td><p>del</p></td><td>2025-01-01T20:46:14.824Z</td></tr><tr><td>easyone11</td><td><p>настраивай doh\dot</p></td><td>2025-01-01T20:46:41.700Z</td></tr><tr><td>easyone11</td><td><p>блокчеком попробуй найти другую страту для дискорда, должна найтись которая будет стабильней работать</p></td><td>2025-01-01T20:49:12.451Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>просто всё остальное работает кроме диса)</p></td><td>2025-01-01T20:49:43.918Z</td></tr><tr><td>uwu(uwu)</td><td><p>интересный у вас основной сервер, из франкфурта.</p>
<p>блокчек не очень подходит в стандартном виде для ютуба, как минимум нужно фэйки заменять на гугловские (или свои)<br>
+там особенность, что даже если сервер выдает 404 не означает, что он будет отдавать видео.<br>
пробуйте сначала рабочую сборку<br>
<code>https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D0%B4%D0%BB%D1%8F-windows-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/13251/584</code></p>
<p>и еще момент, что для ютуба используется пара пулов ggc, а не один. и нужно, чтобы они оба были доступны (они перечислены в заголовке videoplayback в mn=), так что лучше оба в блокчек закидывать</p></td><td>2025-01-01T20:58:59.899Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>вот моя сборка ток дискорд не работает)<br>
<a class="attachment" href="zapret-обсуждение-726/hE28RqVZp4DgMQ8HoL0BzpsDddG.zip">Архив ZIP - WinRAR.zip</a> (1,7 МБ)<br>
ютуб летает</p></td><td>2025-01-01T21:03:24.035Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="zxcn" data-post="4105" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/bc8723/48.png" class="avatar"> zxcn:</div>
<blockquote>
<p>вот моя сборка ток дискорд не работает)</p>
</blockquote>
</aside>
<p>я не любитель скачивать сторонние архивы, извини) напиши текстом стратегию</p></td><td>2025-01-01T21:05:14.772Z</td></tr><tr><td>easyone11</td><td><p>ок, но не вижу тут других вариантов</p></td><td>2025-01-01T21:21:00.652Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>через вирус тотал проверь или виртуалку либо sanboxie на крайняк через телефон распакуй</p></td><td>2025-01-01T22:16:43.086Z</td></tr><tr><td>micle7(Micle7)</td><td><p>Парни, такое дело, 1 января враги заблокировали мне ютуб, до этого с каждым разом было все хуже и хуже, так что приходилось менять стратегию чуть-ли не каждые 3 дня, а с 1 января, все, не получается ничего подобрать:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/64baefc9c94c1defc786d5cf6e548b8537c1350b.jpeg" data-download-href="https://ntc.party/uploads/default/64baefc9c94c1defc786d5cf6e548b8537c1350b" title="33"><img src="zapret-обсуждение-726/64baefc9c94c1defc786d5cf6e548b8537c1350b_2_345x245.jpeg" alt="33" data-base62-sha1="en6fVYRDKGWiqEOMW9ecAhlpV35" width="345" height="245" srcset="zapret-обсуждение-726/64baefc9c94c1defc786d5cf6e548b8537c1350b_2_345x245.jpeg, zapret-обсуждение-726/64baefc9c94c1defc786d5cf6e548b8537c1350b_2_517x367.jpeg 1.5x, zapret-обсуждение-726/64baefc9c94c1defc786d5cf6e548b8537c1350b_2_690x490.jpeg 2x" data-dominant-color="F2EFF1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">33</span><span class="informations">862×614 191 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<pre><code class="lang-auto">clearing nfqws redirection

* SUMMARY
ipv4 rr8---sn-ug5onuxaxjvh-n8v6.googlevideo.com curl_test_https_tls12 : tpws not working
ipv4 rr8---sn-ug5onuxaxjvh-n8v6.googlevideo.com curl_test_https_tls12 : nfqws not working

Please note this SUMMARY does not guarantee a magic pill for you to copy/paste and be happy.

</code></pre>
<p>31 декабря из последней стратегии работала эта:</p>
<pre><code class="lang-auto">NFQWS_OPT="
--hostlist=/opt/zapret/youtube.txt
--dpi-desync=fakedsplit --dpi-desync-ttl=4 --dpi-desync-split-pos=midsld
--new
 "

</code></pre>
<p>ipv4 <a href="http://rr1---sn-j5caxvox-n5ql.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-j5caxvox-n5ql.googlevideo.com</a> curl_test_https_tls12 : nfqws --dpi-desync=fakedsplit --dpi-desync-ttl=4 --dpi-desync-split-pos=midsld</p>
<p>Doh стоит. Работает все кроме ютуба. Как починить?</p></td><td>2025-01-01T22:38:50.576Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="micle7" data-post="4109" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/micle7/48/7988_2.png" class="avatar"> micle7:</div>
<blockquote>
<p>Работает все кроме ютуба. Как починить?</p>
</blockquote>
</aside>
<p>попробовать запуск блокчека с переменной PKTWS_EXTRA=“–dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin”<br>
если блок по ip, вроде можно попробовать блокинуть адреса чтобы перебрасывало на другие</p></td><td>2025-01-02T06:22:04.427Z</td></tr><tr><td>micle7(Micle7)</td><td><p>Нашел причину с чем связана “блокировка”, если присваивается внешний ip из одной подсети, то наглухо ничего не работает, ребутнул интерфейс пока не получил внешний ip из другой подсети, и тогда пробивается все. Я было подумал что какая-то интеллектуальная блокировка появилась <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"><br>
Похоже просто периодически не на тот ip попадаю. У провайдера видать разные маршруты для разных подсетей.<br>
Ну то, что наглухо бывает не работает интересно конечно.<br>
Вариант с clienthello попробую, спасибо.</p></td><td>2025-01-02T09:46:43.075Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Dns адрес смени.</p></td><td>2025-01-02T10:25:29.029Z</td></tr><tr><td>Dessert</td><td><p>C YTDisBystro youtube заработал, спасибо!</p></td><td>2025-01-02T13:26:28.196Z</td></tr><tr><td>micle7(Micle7)</td><td><p>Dns не при чем, у меня doh. Ну, если что, менял.</p></td><td>2025-01-02T14:17:12.298Z</td></tr><tr><td>Misanthrop</td><td><p>Всем привет. Просьба, подсказать решение проблемы обхода блокировки на смартфоне с Андроид.</p></td><td>2025-01-03T11:25:05.316Z</td></tr><tr><td>easyone11</td><td><aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/bol-van/zapret/discussions/872">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/b/bad3e5f9ad67c1ddf145107ce7032ac1d7b22563.svg" class="site-icon" data-dominant-color="" width="32" height="32">

      <a href="https://github.com/bol-van/zapret/discussions/872" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/344;"><img src="zapret-обсуждение-726/9a05cd93e0e8187499d78acea67d3f98fc2bd563_2_690x345.png" class="thumbnail" data-dominant-color="ECEEED" width="690" height="345"></div>

<h3><a href="https://github.com/bol-van/zapret/discussions/872" target="_blank" rel="noopener">Скрипт простого запуска zapret/nfqws (Android и урезанные прошивки) ·...</a></h3>

  <p>Работает на Android также поддерживает OpenWRT и некоторые урезанные прошивки Версия 3.4 Готовый zip под андроид AntiDPI.zip ставиться через TWRP или Magisk, внутри архива есть readme.txt с инструк...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2025-01-03T13:33:18.759Z</td></tr><tr><td>ech0brav0</td><td><p>=closed=</p></td><td>2025-01-03T22:13:10.858Z</td></tr><tr><td>electrifying</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> а когда примерно 70 релиз будет?</p></td><td>2025-01-04T07:43:06.229Z</td></tr><tr><td>bolvan</td><td><p>Когда накопится достаточно нововведений.<br>
Но пока что нет в планах делать что-либо значительное</p></td><td>2025-01-04T10:25:24.341Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Можно ли как-то. Заблокировать отдельный порты.Чтобы запрет. Эти пoрты не трогал на http</p></td><td>2025-01-04T12:40:37.994Z</td></tr><tr><td>bolvan</td><td><p>Он трогает лишь то, что на него перенаправлено.<br>
В винде --wf-tcp/–wf-udp  , в linux переменные в конфиге или самостоятельные настройки ip/nf tables</p></td><td>2025-01-04T13:31:18.848Z</td></tr><tr><td>Mr.White</td><td><p>Ребят, чет новенькое на ютубе. <strong>Некоторые</strong> видосы не загружаются. Раньше бывала блокировка по ip от некоторых западных каналов, ютуб прямо писал об этом, что в вашей стране это низя показывать. А сейчас страница ролика открывается, но идет бесконечная загрузка. При этом наши каналы прекрасно работают. Западные тоже не все заблочены, некоторые работают, но некоторые нет. А вот если подключить ВПН, то все работает.<br>
Да, это явный блок по IP/региону. Обычно я юзаю проксю Антизапрета, попробовал отключить и сразу увидел послание на ютуб. Типа низя это смотреть или это видео не существует. То есть ютуб несмотря на прокси все равно видит, что я из РФ.<br>
Юзаю Launcher for Zapret, если что.</p></td><td>2025-01-05T11:10:05.378Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>То же с этим сталкивался. Тут два способа либо искать новую стратегию blockcheck ом либо пробывать обходить с помощью bye dpi</p></td><td>2025-01-07T03:18:12.498Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>Здравствуйте. В алгоритме установки zapret на OpenWrt в режиме острой нехватки места на диске указан пункт “закинуть бинарник нужной архитектуры в /usr/bin/tpws”. То что бинарник называется tpws я понял. Где его взять? Архитектура mips 74 kc v5.0   роутер tp link archer c6 v2. Бинарник получается в результате компиляции или как? Ещё вопрос, на системе Виндовс можно ли как-то блокчек прогнать? Я прогонял из архива для установки винды который цмдшный но понятно там ни tpws ни nfqws</p></td><td>2025-01-07T09:18:36.958Z</td></tr><tr><td>bolvan</td><td><p>Бинари берутся из релиза, но можно и самому собрать при желании в openwrt SDK.<br>
Блокчек лучше всего использовать через win bundle. Там все для этого готово<br>
Речь идет только о оригинале, если сборка - все вопросы сборщику</p></td><td>2025-01-07T09:22:47.825Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>release директория в смысле или что вы имеете в виду? Я понятия не имею что такое бинарь, лазил по коду смотрел откуда компуктер берёт нужные файлы, так и не нашёл строчки кода где он закидывает это всё в /usr/bin/tpws</p></td><td>2025-01-07T09:41:50.040Z</td></tr><tr><td>bolvan</td><td><p>Релиз на гитхабе. В разделе релизов.<br>
Бинарь это EXEшник другими словами. Только в linux расширения EXE нет. Исполняемый код.<br>
Если надо для компа, берем сразу win bundle и не мучаемся</p></td><td>2025-01-07T09:54:48.829Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>И ещё вопрос, в blockcheck прогоняю домен <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> - редирект на <a href="http://video.google.com" rel="noopener nofollow ugc">video.google.com</a>, прогоняю его - редирект на <a href="http://google.com/videohp" class="inline-onebox" rel="noopener nofollow ugc">Google Видео</a>. Какие домены прогонять в blockcheck?</p></td><td>2025-01-07T09:56:39.821Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>уяснил, нашёл, спасибо</p></td><td>2025-01-07T09:58:40.576Z</td></tr><tr><td>bolvan</td><td><p>домен 2-го уровня <a href="http://googlevideo.com">googlevideo.com</a> не используется. Там нет правильного сертификата<br>
Нужно чекать GGC , возможно, с кастомными фейками от <a href="http://google.com">google.com</a></p></td><td>2025-01-07T10:06:35.953Z</td></tr><tr><td>easyone11</td><td><p><a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/10060">тут подробно</a></p></td><td>2025-01-07T10:10:02.507Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>запускаю blockcheck.cmd уже исправленный и пишет нет elevator.vbs</p></td><td>2025-01-07T10:19:02.338Z</td></tr><tr><td>bolvan</td><td><p>Скачайте последний win bundle и не занимайтесь комбинаторикой файлов старых и новых версий</p></td><td>2025-01-07T10:41:44.893Z</td></tr><tr><td>rkn-chan</td><td><p>можно <a href="http://manifest.googlevideo.com" rel="noopener nofollow ugc">manifest.googlevideo.com</a> прогнать. он чаще всего так же заблочен как и все остальные только для него не нужно ловить местный кэш</p></td><td>2025-01-07T10:42:35.875Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>хорошо, я уже прогоняю, но, я вижу параметры лишь для nfqws в winbundle пока что. Он использует tpws или нет? я не смогу поставить параметры nfqws в урезанной установке на openwrt</p></td><td>2025-01-07T10:45:26.389Z</td></tr><tr><td>bolvan</td><td><p>tpws в виндовс не поддерживается<br>
если нужен именно он, комп придется загрузить в любую поддерживаемую nix систему<br>
перенос параметров на linux достаточно прозрачен, если понимаешь как оно работает<br>
только убрать --wf*, а дальше конструировать мультистратегию. при переносе на роутер TTL уменьшается на 1</p></td><td>2025-01-07T10:56:02.272Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>–dpi-desync=fake --dpi-desync-fooling=badseq<br>
–dpi-desync=fake --dpi-desync-fooling=badsum<br>
–dpi-desync=fake --dpi-desync-ttl=3<br>
–dpi-desync=fake --dpi-desync-fooling=md5sig<br>
вот такие параметры выдал blockcheck. Как бы это выглядело для tpws? подскажите пожалуйста (ttl здесь ещё не изменен под роутер)</p></td><td>2025-01-07T11:06:38.815Z</td></tr><tr><td>bolvan</td><td><p>tpws не поддерживает fake. Если никак без fake, можно пользоваться byedpi</p></td><td>2025-01-07T11:07:23.484Z</td></tr><tr><td>UNIXOVI4(Unixovi4)</td><td><p>–dpi-desync=syndata,multisplit --dpi-desync-split-pos=1 а такое под tpws пойдёт?</p></td><td>2025-01-07T11:09:20.694Z</td></tr><tr><td>bolvan</td><td><p>Нет. Чтобы не гадать, надо пустить под linux, Как вариант - виртуалка в режиме bridge, не NAT</p></td><td>2025-01-07T11:10:05.852Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>В последние две-три недели появился такой странный эффект на Ютубе при использовании Запрета: видео тормозит как-то нетипично, начинаются помехи звука и как будто идут микроскопические задержки/торможения, которые на звуке и отражаются. При этом белая полоска загрузки в видео бежит далеко — затем бац, видео останавливается, хотя до этого загрузка ушла далеко. Менял DNS, но бесполезно. В стратегиях вроде все хорошо, остальные сайты пробиваются, на Резке видео идет без подобных помех, и в целом мои стратегии уже не получается улучшить или усилить.<br>
Ну и традиционно - видео на Ютубе часто нужно второй раз перезагружать, после чего полоска загрузки шустро бежит.<br>
Видимо, все это связано с манипуляциями против сторонних DNS?</p></td><td>2025-01-07T17:59:28.715Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>хз на счёт dns у меня используется ещё dnscrypt, а dns используется там от comms<br>
всё летает кроме дискорда) я выше оставлял свою сборку можешь поставить её</p><aside class="quote" data-post="4105" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/bc8723/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/4105">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    вот моя сборка ток дискорд не работает) 
<a class="attachment" href="zapret-обсуждение-726/hE28RqVZp4DgMQ8HoL0BzpsDddG.zip">Архив ZIP - WinRAR.zip</a> (1,7 МБ) 
ютуб летает
  </blockquote>
</aside>
</td><td>2025-01-07T18:38:19.798Z</td></tr><tr><td>Shima</td><td><p>Привет!<br>
Подскажите пожалуйста, как эти 2 стратегии объединить?</p>
<details>
<summary>
Спойлер</summary>
<p>Например стратегия для сайта А:</p>
<pre><code class="lang-auto">NFQWS_OPT="
--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new

--filter-tcp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new

--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin &lt;HOSTLIST&gt;
"
</code></pre>
<p>Для сайта Б:</p>
<pre><code class="lang-auto">NFQWS_OPT="
--filter-tcp=80 --dpi-desync=split2 &lt;HOSTLIST&gt; --new

--filter-tcp=443 --dpi-desync= split2  &lt;HOSTLIST&gt; --new

--filter-udp=443 --dpi-desync=split2  &lt;HOSTLIST&gt;
"
</code></pre>
<p>Попытался это сделать через --хостлист, вынеся при этом домены сайта Б в отдельный файлик /opt/B.txt</p>
<pre><code class="lang-auto">NFQWS_OPT="
--filter-tcp=80  --hostlist=/opt/B.txt  --dpi-desync=split2 --new

--filter-tcp=443   --hostlist=/opt/B.txt --dpi-desync= split2 --new

--filter-udp=443   --hostlist=/opt/B.txt --dpi-desync=split2 --new

--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig &lt;HOSTLIST&gt; --new

--filter-tcp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new

--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin &lt;HOSTLIST&gt;
"
</code></pre>
<p>При этом сайт А продолжает работать, а Б - нет.</p>
</details></td><td>2025-01-07T21:40:33.102Z</td></tr><tr><td>KDS</td><td><p>Хватит всем уже тыкать “свою” старую YTDisBystro, да еще и с бинарниками в архиве, на который Защитник орет.<br>
Актуальная версия сборки <a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D0%B4%D0%BB%D1%8F-windows-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/13251">здесь</a>, если кому надо.</p>
<p><a class="mention" href="/u/zanoni">@Zanoni</a> Можете там же посмотреть, по вашему вопросу про “потолок”</p></td><td>2025-01-07T21:50:47.536Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group quote-modified" data-username="Shima" data-post="4143" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/3ab097/48.png" class="avatar"> Shima:</div>
<blockquote>
<p>–filter-tcp=443   --hostlist=/opt/B.txt --dpi-desync= split2 --new</p>
</blockquote>
</aside>
<p>а что за пробел --dpi-desync= split2</p></td><td>2025-01-08T07:31:11.882Z</td></tr><tr><td>bolvan</td><td><p>В вашем варианте сделано методом копипасты абсолютно без понимания.<br>
Все неверно.</p>
<pre><code class="lang-auto">--filter-tcp=80,443 --dpi-desync=fake,multisplit --dpi-desync-autottl=2 --dpi-desync-ttl=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin &lt;HOSTLIST_NOAUTO&gt;
</code></pre>
<p>либо если автоттл плохо работает</p>
<pre><code class="lang-auto">--filter-tcp=80,443 --dpi-desync=fake,multisplit --dpi-desync-fooling=md5sig --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin &lt;HOSTLIST&gt; --new
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin &lt;HOSTLIST_NOAUTO&gt;
</code></pre>
<p>можно другой фулинг или фиксированный ттл под провайдера. все их надо проверять индивидуально</p></td><td>2025-01-08T07:33:12.266Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Я посмотрел Вашу сборку. Простите, но у моего провайдера моя конфигурация работает быстрее на Ютубе. Люблю оригинальные решения, а не кастомные. Ваша конфигурация хороша своей универсальностью для тех, кто не хочет лезть в настройки и документацию.<br>
А мне бы хотелось как-то улучшить или усилить мою конфигурацию.</p></td><td>2025-01-08T08:43:51.917Z</td></tr><tr><td>Shima</td><td><p>Спасибо!<br>
Однако остался следующий вопрос: что делать, если я хочу применить отдельную стратегию на определённые домены, которые лежат в отдельном файле (не в zapret-hosts-user.txt). К примеру я создал файл по пути /opt/a.txt. Далее к основному конфигу я должен дописать следующую конструкцию.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">--filter-tcp=80,443 --hostlist=/opt/a.txt --param_1 --param_i --new
--filter-udp=443 --hostlist=/opt/a.txt --param_1 --param_i --new
#Дальше идёт Ваш исправленный конфиг
#param_1 и param_i - просто для примера
</code></pre>
</details>
<p>Правильно ли я её записал?</p></td><td>2025-01-08T18:44:54.726Z</td></tr><tr><td>bolvan</td><td><p>Правильно, но важен еще порядок.<br>
Специализации выносятся наверх, тк поиск профиля идет от начала к концу</p></td><td>2025-01-08T19:33:28.360Z</td></tr><tr><td>abc555</td><td><p>Самое последнее в стратегии  --new, то что в самом низу надо убрать, bolvan я правильно понял, чтоб не было циркуляции ? Это я заметил при загрузке сайтов, если стоит --new, то сайт продолжает грузится, а если убрать, то сразу  крутится загрузка перестаёт</p></td><td>2025-01-08T19:45:31.907Z</td></tr><tr><td>bolvan</td><td><p>Последний --new создает пустой профиль. Он и так есть с номером 0<br>
Так что он не нужен</p></td><td>2025-01-08T19:54:08.977Z</td></tr><tr><td>abc555</td><td><p>Кто то спрашивал на других форумах, как сделать через nf, так вот<br>
в raw_prerouting надо добавить<br>
iifname “eth0.2” tcp sport 80 tcp flags &amp; (rst) == rst counter drop<br>
iifname “eth0.2” tcp sport 443 tcp flags &amp; (rst) == rst counter drop<br>
и это реально работает с запретом. я пробовал удалять, но некоторые сайты начинали работать плохо, в итоге так у меня и осталось )</p></td><td>2025-01-08T19:56:24.418Z</td></tr><tr><td>abc555</td><td><p>Я забил в браузер кучу сайтов, просто для проверки, разных вариантов и клацаю и смотрю на задержку, на работу,  я на этих сайтах даже никогда не бываю, просто для проверки. Любое изменение вижу сразу, например косяк у прова, а может где то там на линии, то есть пройтись по всем сайтам что забиты, я чётко определяю где косяк и куда смотреть, времени занимает 30-40 секунд чтоб понять где лажа. Я чисто визуально проверяю, а это ускоряет любой процесс в миллионы раз быстрее если подходить к этому логически и я понимаю что наверно не каждому дано, но всё же как вариант и вариант рабочий<br>
Ну то есть если подходить с логикой, то это займёт много времени и можно сбиться со счёту, где то лохануться, в итоге всё пойдёт неправильно, а если смотреть визуально, то ответ будет сразу и даже не надо будет думать, просто вот он ответ на любой вопрос, что ускоряет время на месяцы или годы.<br>
Жаль наверно мне не дано шарить как bolvan, а так бы бедолаги со своими блокировками просто не успевали бы за мной )) В этом наверно их фора</p></td><td>2025-01-08T20:12:22.970Z</td></tr><tr><td>abc555</td><td><p>bolvan<br>
Ваша тема сильная, разговора нет, мне пришлось потрать 2 дня чтоб понять что к чему для начала, для меня это как я помню было очень сложно, так как в этом я был полный ноль, мне на первый взгляд казалось это нереальным, наверно просто невозможным как я думал, даже не знаю что толкнуло меня на этот шаг, наверно просто любопытство, к чему я, просто чтоб вы примерно понимали и я так же могу понять людей которые хотят через это пройти ))<br>
Я почти каждый день слежу за обновлениями, читаю коменты, переживаю за Вас чтоб не случилось что нить, так же переживаю за этот форум, за всех участников, за создателей, за модераторов, думаю об этом постоянно. не так как за себя, а как больше за всех, вот такой я, но а не хороших людей, которые хотят всем навредить, хочу предупредить, лучше не стоит даже думать об этом, для них, смотрели сайлент хилл, вот что вас ожидает ))</p></td><td>2025-01-08T20:35:28.819Z</td></tr><tr><td>Shima</td><td><div class="spoiler">
<p>Извините, не совсем понял, т.к. не владею терминологией. Простым языком: сначала должна идти общая стратегия для zapret-hosts-user.txt, а затем только для каких-то конкретных случаев. И как сказал пользователь abc555, на самой последней строчке нужно убрать разделитель --new, т.к. пустой профиль уже есть. Верно ли я понял логику? Ещё раз благодарю за ответы. </p>
</div></td><td>2025-01-08T20:36:28.266Z</td></tr><tr><td>easyone11</td><td><p>сначала идут страты под определённые домены, в конце общая</p></td><td>2025-01-09T04:23:18.880Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="abc555" data-post="4152" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/abc555/48/9998_2.png" class="avatar"> abc555:</div>
<blockquote>
<p>iifname “eth0.2” tcp sport 80 tcp flags &amp; (rst) == rst counter drop<br>
iifname “eth0.2” tcp sport 443 tcp flags &amp; (rst) == rst counter drop<br>
и это реально работает с запретом. я пробовал удалять, но некоторые сайты начинали работать плохо, в итоге так у меня и осталось )</p>
</blockquote>
</aside>
<p>Это могло работать лет 5 назад в случае с пассивным DPI. Но сейчас не будет.<br>
Будет только вызывать иногда подвисания страниц, потому что рубится легальный RST от сервера, и тем самым нарушается правильная работа TCP</p>
<p>Сейчас кое-где еще могли остаться рудименты старых DPI, и даже возможно дроп RST от них помогает, но это лишь означает недостаток стратегии zapret, который не обходит эти старые DPI</p></td><td>2025-01-09T07:18:22.309Z</td></tr><tr><td>bolvan</td><td><p>Сначала идет более частное, потом более общее. Поиск идет до первого совпадения с начала до конца. Если вы сделаете сначала общее, потом частное, то частное будет поглощено общим, и никогда не сработает. --new создает новый профиль, в этом его назначение. Все, что после, относится к этому новому профилю до следующего --new или до конца, если его нет. В конце неявно добавляется “–new” и присваивается номер профиля ноль.<br>
Поймите алгоритм, и станет все ясно.</p></td><td>2025-01-09T07:26:32.446Z</td></tr><tr><td>fatyzzz(Иван)</td><td><p>пересобрал список айпи дискорда<br>
подобавлял подсетей отсюда <a href="https://bgp.tools/as/49544#prefixes" class="inline-onebox" rel="noopener nofollow ugc">AS49544 i3D.net B.V - bgp.tools</a> (почти все что без владельца, т.е прочерк - это дискорд)<br>
предлагаю потестить у кого желание есть<br>
<a href="https://github.com/fatyzzz/ipset-discord/blob/main/discord.txt" class="inline-onebox" rel="noopener nofollow ugc">ipset-discord/discord.txt at main · fatyzzz/ipset-discord · GitHub</a></p></td><td>2025-01-09T15:51:58.477Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>во пасиб за список, дис заработал нормально теперь, всё ок)) а то сайт порой загружался но не логинился, либо вообще недоступен был, главное на телефоне с параметрами старыми работает)</p></td><td>2025-01-09T22:12:59.695Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Подскажите, пожалуйста, нужно ли обязательно писать в начале строки <code>"--filter-tcp=80 или 443"</code> или без нее будет флуд в сети или какие-то другие неприятные последствия? Я так понимаю, 80 предназначено для дурения http, а 443 для https?<br>
Или достаточно такой раскладки?:<br>
<code>--какой-то hostlist</code>, <code>--какое-то дурение</code> и т.д. Закрываем все <code>--new ^</code>  и достаточно.</p></td><td>2025-01-10T05:30:02.754Z</td></tr><tr><td>KDS</td><td><p>Не обязательно. Ограничение по портам делается лишь для того, чтобы не дурилось не то, что надо. Но если в хостлисте будут только домены, на которых кроме http/https ничего и нет, не имеет смысла указывать порт.<br>
Но тут можно нарваться на одну неприятность - стратегия для http и https это ни одно и то же и дурятся они обычно по-разному</p></td><td>2025-01-10T05:42:02.497Z</td></tr><tr><td>Aleksandr75ru</td><td><p>Большое спасибо! Разобрался с этим вопросом.</p></td><td>2025-01-10T05:55:08.521Z</td></tr><tr><td>KDS</td><td><p>Потестил, дискорд даже не запустился, ибо не хватает <code>34.126.226.51</code> - это один из серверов с апдейтами. <a href="https://ntc.party/t/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-ytdisbystro-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-zapret-%D0%B4%D0%BB%D1%8F-windows-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/13251/410">Еще тут</a> об этом писал.<br>
На браузер-версии не тестил, ибо не пользуюсь</p></td><td>2025-01-10T05:55:18.498Z</td></tr><tr><td>wowik98(Wowik98)</td><td><p>добрый день!<br>
Подскажите есть роутер keenetic на нем настроен zapret и работает<br>
возникла  необходимость в во втором провайдере как настройн zapret на 2 провайдера первый провайдер в wan второй  в lan1 как правельно настройт подскажите оба по PPPoE подключины<br>
настройки такие</p>
<details>
<summary>
Спойлер</summary>
<h1><a name="p-78452-this-file-is-included-from-init-scripts-1" class="anchor" href="#p-78452-this-file-is-included-from-init-scripts-1"></a>this file is included from init scripts</h1>
<h1><a name="p-78452-change-values-here-2" class="anchor" href="#p-78452-change-values-here-2"></a>change values here</h1>
<h1><a name="p-78452-can-help-in-case-tmp-has-not-enough-space-3" class="anchor" href="#p-78452-can-help-in-case-tmp-has-not-enough-space-3"></a>can help in case /tmp has not enough space</h1>
<p>#TMPDIR=/opt/zapret/tmp</p>
<h1><a name="p-78452-redefine-user-for-zapret-daemons-required-on-keenetic-4" class="anchor" href="#p-78452-redefine-user-for-zapret-daemons-required-on-keenetic-4"></a>redefine user for zapret daemons. required on Keenetic</h1>
<p>#WS_USER=nobody</p>
<h1><a name="p-78452-override-firewall-type-iptablesnftablesipfw-5" class="anchor" href="#p-78452-override-firewall-type-iptablesnftablesipfw-5"></a>override firewall type : iptables,nftables,ipfw</h1>
<p>FWTYPE=iptables</p>
<h1><a name="p-78452-nftables-only-set-this-to-0-to-use-pre-nat-mode-default-is-post-nat-6" class="anchor" href="#p-78452-nftables-only-set-this-to-0-to-use-pre-nat-mode-default-is-post-nat-6"></a>nftables only : set this to 0 to use pre-nat mode. default is post-nat.</h1>
<h1><a name="p-78452-pre-nat-mode-disables-some-bypass-techniques-for-forwarded-traffic-but-allows-to-see-client-ip-addresses-in-debug-log-7" class="anchor" href="#p-78452-pre-nat-mode-disables-some-bypass-techniques-for-forwarded-traffic-but-allows-to-see-client-ip-addresses-in-debug-log-7"></a>pre-nat mode disables some bypass techniques for forwarded traffic but allows to see client IP addresses in debug log</h1>
<p>#POSTNAT=0</p>
<h1><a name="p-78452-options-for-ipsets-8" class="anchor" href="#p-78452-options-for-ipsets-8"></a>options for ipsets</h1>
<h1><a name="p-78452-maximum-number-of-elements-in-sets-also-used-for-nft-sets-9" class="anchor" href="#p-78452-maximum-number-of-elements-in-sets-also-used-for-nft-sets-9"></a>maximum number of elements in sets. also used for nft sets</h1>
<p>SET_MAXELEM=522288</p>
<h1><a name="p-78452-too-low-hashsize-can-cause-memory-allocation-errors-on-low-ram-systems-even-if-ram-is-enough-10" class="anchor" href="#p-78452-too-low-hashsize-can-cause-memory-allocation-errors-on-low-ram-systems-even-if-ram-is-enough-10"></a>too low hashsize can cause memory allocation errors on low RAM systems , even if RAM is enough</h1>
<h1><a name="p-78452-too-large-hashsize-will-waste-lots-of-ram-11" class="anchor" href="#p-78452-too-large-hashsize-will-waste-lots-of-ram-11"></a>too large hashsize will waste lots of RAM</h1>
<p>IPSET_OPT=“hashsize 262144 maxelem $SET_MAXELEM”</p>
<h1><a name="p-78452-dynamically-generate-additional-ip-1-ipsetnfsettable-name-12" class="anchor" href="#p-78452-dynamically-generate-additional-ip-1-ipsetnfsettable-name-12"></a>dynamically generate additional ip. $1 = ipset/nfset/table name</h1>
<p>#IPSET_HOOK=“/etc/zapret.ipset.hook”</p>
<h1><a name="p-78452-options-for-ip2net-4-or-6-auto-added-by-ipset-create-script-13" class="anchor" href="#p-78452-options-for-ip2net-4-or-6-auto-added-by-ipset-create-script-13"></a>options for ip2net. “-4” or “-6” auto added by ipset create script</h1>
<p>IP2NET_OPT4=“–prefix-length=22-30 --v4-threshold=3/4”<br>
IP2NET_OPT6=“–prefix-length=56-64 --v6-threshold=5”</p>
<h1><a name="p-78452-options-for-auto-hostlist-14" class="anchor" href="#p-78452-options-for-auto-hostlist-14"></a>options for auto hostlist</h1>
<p>AUTOHOSTLIST_RETRANS_THRESHOLD=3<br>
AUTOHOSTLIST_FAIL_THRESHOLD=3<br>
AUTOHOSTLIST_FAIL_TIME=60</p>
<h1><a name="p-78452-h-1-debug-autohostlist-positives-to-ipsetzapret-hosts-auto-debuglog-15" class="anchor" href="#p-78452-h-1-debug-autohostlist-positives-to-ipsetzapret-hosts-auto-debuglog-15"></a>1 = debug autohostlist positives to ipset/zapret-hosts-auto-debug.log</h1>
<p>AUTOHOSTLIST_DEBUGLOG=0</p>
<h1><a name="p-78452-number-of-parallel-threads-for-domain-list-resolves-16" class="anchor" href="#p-78452-number-of-parallel-threads-for-domain-list-resolves-16"></a>number of parallel threads for domain list resolves</h1>
<p>MDIG_THREADS=30</p>
<h1><a name="p-78452-ipsetsh-can-compress-large-lists-17" class="anchor" href="#p-78452-ipsetsh-can-compress-large-lists-17"></a>ipset/*.sh can compress large lists</h1>
<p>GZIP_LISTS=1</p>
<h1><a name="p-78452-command-to-reload-iphost-lists-after-update-18" class="anchor" href="#p-78452-command-to-reload-iphost-lists-after-update-18"></a>command to reload ip/host lists after update</h1>
<h1><a name="p-78452-comment-or-leave-empty-for-auto-backend-selection-ipset-or-ipfw-if-present-19" class="anchor" href="#p-78452-comment-or-leave-empty-for-auto-backend-selection-ipset-or-ipfw-if-present-19"></a>comment or leave empty for auto backend selection : ipset or ipfw if present</h1>
<h1><a name="p-78452-on-bsd-systems-with-pf-no-auto-reloading-happens-you-must-provide-your-own-command-20" class="anchor" href="#p-78452-on-bsd-systems-with-pf-no-auto-reloading-happens-you-must-provide-your-own-command-20"></a>on BSD systems with PF no auto reloading happens. you must provide your own command</h1>
<h1><a name="p-78452-set-to-to-disable-reload-21" class="anchor" href="#p-78452-set-to-to-disable-reload-21"></a>set to “-” to disable reload</h1>
<p>#LISTS_RELOAD=“pfctl -f /etc/pf.conf”</p>
<h1><a name="p-78452-mark-bit-used-by-nfqws-to-prevent-loop-22" class="anchor" href="#p-78452-mark-bit-used-by-nfqws-to-prevent-loop-22"></a>mark bit used by nfqws to prevent loop</h1>
<p>DESYNC_MARK=0x40000000<br>
DESYNC_MARK_POSTNAT=0x20000000</p>
<p>TPWS_SOCKS_ENABLE=0</p>
<h1><a name="p-78452-tpws-socks-listens-on-this-port-on-localhost-and-lan-interfaces-23" class="anchor" href="#p-78452-tpws-socks-listens-on-this-port-on-localhost-and-lan-interfaces-23"></a>tpws socks listens on this port on localhost and LAN interfaces</h1>
<p>TPPORT_SOCKS=987</p>
<h1><a name="p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-24" class="anchor" href="#p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-24"></a>use  and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir</h1>
<h1><a name="p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-25" class="anchor" href="#p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-25"></a>hostlist markers are replaced to empty string if MODE_FILTER does not satisfy</h1>
<h1><a name="p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-26" class="anchor" href="#p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-26"></a>&lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list</h1>
<p>TPWS_SOCKS_OPT="<br>
–filter-tcp=80 --methodeol  --new<br>
–filter-tcp=443 --split-tls=sni --disorder <br>
"</p>
<p>TPWS_ENABLE=0<br>
TPWS_PORTS=80,443</p>
<h1><a name="p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-27" class="anchor" href="#p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-27"></a>use  and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir</h1>
<h1><a name="p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-28" class="anchor" href="#p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-28"></a>hostlist markers are replaced to empty string if MODE_FILTER does not satisfy</h1>
<h1><a name="p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-29" class="anchor" href="#p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-29"></a>&lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list</h1>
<p>TPWS_OPT="<br>
–filter-tcp=80 --methodeol  --new<br>
–filter-tcp=443 --split-tls=sni --disorder <br>
"</p>
<p>NFQWS_ENABLE=1</p>
<h1><a name="p-78452-redirect-outgoing-traffic-with-connbytes-limiter-applied-in-both-directions-30" class="anchor" href="#p-78452-redirect-outgoing-traffic-with-connbytes-limiter-applied-in-both-directions-30"></a>redirect outgoing traffic with connbytes limiter applied in both directions.</h1>
<p>NFQWS_PORTS_TCP=80,443<br>
NFQWS_PORTS_UDP=443,80</p>
<h1><a name="p-78452-pkt_out-means-connbytes-dir-original-31" class="anchor" href="#p-78452-pkt_out-means-connbytes-dir-original-31"></a>PKT_OUT means connbytes dir original</h1>
<h1><a name="p-78452-pkt_in-means-connbytes-dir-reply-32" class="anchor" href="#p-78452-pkt_in-means-connbytes-dir-reply-32"></a>PKT_IN means connbytes dir reply</h1>
<h1><a name="p-78452-this-is-dpi-desync-cutoffnx-kernel-mode-implementation-for-linux-it-saves-a-lot-of-cpu-33" class="anchor" href="#p-78452-this-is-dpi-desync-cutoffnx-kernel-mode-implementation-for-linux-it-saves-a-lot-of-cpu-33"></a>this is --dpi-desync-cutoff=nX kernel mode implementation for linux. it saves a lot of CPU.</h1>
<p>NFQWS_TCP_PKT_OUT=$((6+$AUTOHOSTLIST_RETRANS_THRESHOLD))<br>
NFQWS_TCP_PKT_IN=3<br>
NFQWS_UDP_PKT_OUT=$((6+$AUTOHOSTLIST_RETRANS_THRESHOLD))<br>
NFQWS_UDP_PKT_IN=0</p>
<h1><a name="p-78452-redirect-outgoing-traffic-without-connbytes-limiter-and-incoming-with-connbytes-limiter-34" class="anchor" href="#p-78452-redirect-outgoing-traffic-without-connbytes-limiter-and-incoming-with-connbytes-limiter-34"></a>redirect outgoing traffic without connbytes limiter and incoming with connbytes limiter</h1>
<h1><a name="p-78452-normally-its-needed-only-for-stateless-dpi-that-matches-every-packet-in-a-single-tcp-session-35" class="anchor" href="#p-78452-normally-its-needed-only-for-stateless-dpi-that-matches-every-packet-in-a-single-tcp-session-35"></a>normally it’s needed only for stateless DPI that matches every packet in a single TCP session</h1>
<h1><a name="p-78452-typical-example-are-plain-http-keep-alives-36" class="anchor" href="#p-78452-typical-example-are-plain-http-keep-alives-36"></a>typical example are plain HTTP keep alives</h1>
<h1><a name="p-78452-this-mode-can-be-very-cpu-consuming-enable-with-care-37" class="anchor" href="#p-78452-this-mode-can-be-very-cpu-consuming-enable-with-care-37"></a>this mode can be very CPU consuming. enable with care !</h1>
<p>#NFQWS_PORTS_TCP_KEEPALIVE=80<br>
#NFQWS_PORTS_UDP_KEEPALIVE=</p>
<h1><a name="p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-38" class="anchor" href="#p-78452-use-hostlist-and-hostlist_noauto-placeholders-to-engage-standard-hostlists-and-autohostlist-in-ipset-dir-38"></a>use  and &lt;HOSTLIST_NOAUTO&gt; placeholders to engage standard hostlists and autohostlist in ipset dir</h1>
<h1><a name="p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-39" class="anchor" href="#p-78452-hostlist-markers-are-replaced-to-empty-string-if-mode_filter-does-not-satisfy-39"></a>hostlist markers are replaced to empty string if MODE_FILTER does not satisfy</h1>
<h1><a name="p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-40" class="anchor" href="#p-78452-hostlist_noauto-appends-ipsetzapret-hosts-autotxt-as-normal-list-40"></a>&lt;HOSTLIST_NOAUTO&gt; appends ipset/zapret-hosts-auto.txt as normal list</h1>
<p>NFQWS_OPT="<br>
–filter-udp=443,80 --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=“/opt/zapret/files/fake/quic_initial_www_google_com.bin”<br>
–filter-tcp=80,443 --dpi-desync=fake,disorder2 --dpi-desync-repeats=11 --dpi-desync-ttl=3 --dpi-desync-fooling=md5sig,badsum --dpi-desync-fake-tls=“/opt/zapret/files/fake/tls_clienthello_www_google_com.bin” --new<br>
"</p>
<h1><a name="p-78452-noneipsethostlistautohostlist-41" class="anchor" href="#p-78452-noneipsethostlistautohostlist-41"></a>none,ipset,hostlist,autohostlist</h1>
<p>MODE_FILTER=none</p>
<h1><a name="p-78452-openwrt-only-donttouchnonesoftwarehardware-42" class="anchor" href="#p-78452-openwrt-only-donttouchnonesoftwarehardware-42"></a>openwrt only : donttouch,none,software,hardware</h1>
<p>FLOWOFFLOAD=donttouch</p>
<h1><a name="p-78452-openwrt-specify-networks-to-be-treated-as-lan-default-is-lan-43" class="anchor" href="#p-78452-openwrt-specify-networks-to-be-treated-as-lan-default-is-lan-43"></a>openwrt: specify networks to be treated as LAN. default is “lan”</h1>
<p>#OPENWRT_LAN=“lan lan2 lan3”</p>
<h1><a name="p-78452-openwrt-specify-networks-to-be-treated-as-wan-default-wans-are-interfaces-with-default-route-44" class="anchor" href="#p-78452-openwrt-specify-networks-to-be-treated-as-wan-default-wans-are-interfaces-with-default-route-44"></a>openwrt: specify networks to be treated as WAN. default wans are interfaces with default route</h1>
<p>#OPENWRT_WAN4=“wan vpn”<br>
#OPENWRT_WAN6=“wan6 vpn6”</p>
<h1><a name="p-78452-for-routers-based-on-desktop-linux-and-macos-has-no-effect-in-openwrt-45" class="anchor" href="#p-78452-for-routers-based-on-desktop-linux-and-macos-has-no-effect-in-openwrt-45"></a>for routers based on desktop linux and macos. has no effect in openwrt.</h1>
<h1><a name="p-78452-choose-lan-and-optinally-wanwan6-network-interfaces-46" class="anchor" href="#p-78452-choose-lan-and-optinally-wanwan6-network-interfaces-46"></a>CHOOSE LAN and optinally WAN/WAN6 NETWORK INTERFACES</h1>
<h1><a name="p-78452-or-leave-them-commented-if-its-not-router-47" class="anchor" href="#p-78452-or-leave-them-commented-if-its-not-router-47"></a>or leave them commented if its not router</h1>
<h1><a name="p-78452-its-possible-to-specify-multiple-interfaces-like-this-iface_laneth0-eth1-eth2-48" class="anchor" href="#p-78452-its-possible-to-specify-multiple-interfaces-like-this-iface_laneth0-eth1-eth2-48"></a>it’s possible to specify multiple interfaces like this : IFACE_LAN=“eth0 eth1 eth2”</h1>
<h1><a name="p-78452-if-iface_wan6-is-not-defined-it-take-the-value-of-iface_wan-49" class="anchor" href="#p-78452-if-iface_wan6-is-not-defined-it-take-the-value-of-iface_wan-49"></a>if IFACE_WAN6 is not defined it take the value of IFACE_WAN</h1>
<p>#IFACE_WAN6=“ipsec0 wireguard0 he_net”</p>
<h1><a name="p-78452-should-startstop-command-of-init-scripts-apply-firewall-rules-50" class="anchor" href="#p-78452-should-startstop-command-of-init-scripts-apply-firewall-rules-50"></a>should start/stop command of init scripts apply firewall rules ?</h1>
<h1><a name="p-78452-not-applicable-to-openwrt-with-firewall3iptables-51" class="anchor" href="#p-78452-not-applicable-to-openwrt-with-firewall3iptables-51"></a>not applicable to openwrt with firewall3+iptables</h1>
<p>INIT_APPLY_FW=1</p>
<h1><a name="p-78452-firewall-apply-hooks-52" class="anchor" href="#p-78452-firewall-apply-hooks-52"></a>firewall apply hooks</h1>
<p>#INIT_FW_PRE_UP_HOOK=“/etc/firewall.zapret.hook.pre_up”<br>
#INIT_FW_POST_UP_HOOK=“/etc/firewall.zapret.hook.post_up”<br>
#INIT_FW_PRE_DOWN_HOOK=“/etc/firewall.zapret.hook.pre_down”<br>
#INIT_FW_POST_DOWN_HOOK=“/etc/firewall.zapret.hook.post_down”</p>
<h1><a name="p-78452-do-not-work-with-ipv4-53" class="anchor" href="#p-78452-do-not-work-with-ipv4-53"></a>do not work with ipv4</h1>
<p>#DISABLE_IPV4=1</p>
<h1><a name="p-78452-do-not-work-with-ipv6-54" class="anchor" href="#p-78452-do-not-work-with-ipv6-54"></a>do not work with ipv6</h1>
<p>DISABLE_IPV6=0</p>
<h1><a name="p-78452-select-which-init-script-will-be-used-to-get-ip-or-host-list-55" class="anchor" href="#p-78452-select-which-init-script-will-be-used-to-get-ip-or-host-list-55"></a>select which init script will be used to get ip or host list</h1>
<h1><a name="p-78452-possible-values-get_usersh-get_antizapretsh-get_combinedsh-get_reestrsh-get_hostlistsh-56" class="anchor" href="#p-78452-possible-values-get_usersh-get_antizapretsh-get_combinedsh-get_reestrsh-get_hostlistsh-56"></a>possible values : get_user.sh get_antizapret.sh get_combined.sh get_reestr.sh get_hostlist.sh</h1>
<h1><a name="p-78452-comment-if-not-required-57" class="anchor" href="#p-78452-comment-if-not-required-57"></a>comment if not required</h1>
<p>#GETLIST=<br>
IFACE_WAN=ppp0<br>
#IFACE_LAN=</p>
</details></td><td>2025-01-10T09:20:10.391Z</td></tr><tr><td>bolvan</td><td><p>Если стратегия одна, то можно засунуть в IFACE_WAN и IFACE_WAN6 имена интерфейсов с инетом.<br>
Если разная, то это не предусмотрено в скриптах запуска, и требуется отказ от них с ручной настройкой правил и запуска демонов, либо  писать custom script</p></td><td>2025-01-10T09:22:26.689Z</td></tr><tr><td>wowik98(Wowik98)</td><td><p>да стратегия одна проверил по отдельности работала<br>
прописал IFACE_WAN=ppp0   IFACE_WAN6=ppp1 но увы на одном работает на другом нет</p></td><td>2025-01-10T09:59:39.141Z</td></tr><tr><td>bolvan</td><td><p>IFACE_WAN=“ppp0 ppp1”<br>
IFACE_WAN6 только для ipv6</p></td><td>2025-01-10T10:14:09.647Z</td></tr><tr><td>Ngesso</td><td><p>Имеет-ли смысл настраивать Zapret на IP-адрес VPN-сервера, для усложнения потенциального анализа траффика??</p>
<p>Может-ли вообще Zapret как-то усложнить потенциальную детекцию разных VPN-протоколов и прочего?</p></td><td>2025-01-10T10:23:49.949Z</td></tr><tr><td>bolvan</td><td><p>Может. Но тут будет недостаточно раз два нажал и поехало.<br>
Надо перехват делать соответствующих портов, писать стратегию</p></td><td>2025-01-10T10:45:23.639Z</td></tr><tr><td>Ngesso</td><td><p>Есть какие-то готовые стратегии под такое уже? Или это пока-что никто так не делает?</p></td><td>2025-01-10T10:47:24.696Z</td></tr><tr><td>bolvan</td><td><p>Для udp вариантов немного. Фейки с репитами, ipfrag2 для своих серверов и внешнего IP адреса<br>
Для tcp можно как угодно сплитать, дисордерить, фейковать. С --dpi-desync-any-protocol и ограничителем на connbytes или cutoff</p></td><td>2025-01-10T10:48:40.814Z</td></tr><tr><td>Ngesso</td><td><p>Можете скинуть какой-нибудь понятный гайд, как это делать? Желательно на русском.</p></td><td>2025-01-10T10:55:40.730Z</td></tr><tr><td>bolvan</td><td><p>Я не пишу гайды для новичков, но может кто-то еще подскажет</p></td><td>2025-01-10T10:57:09.607Z</td></tr><tr><td>spv82</td><td><aside class="quote no-group" data-username="Ngesso" data-post="4169" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/n/ce7236/48.png" class="avatar"> Ngesso:</div>
<blockquote>
<p>Имеет-ли смысл настраивать Zapret на IP-адрес VPN-сервера, для усложнения потенциального анализа траффика??</p>
</blockquote>
</aside>
<p>Может и имеет, но ркн при желании тоже может это обойти посмотрев ответ сервера. Хотя бы пишите что за протокол.</p></td><td>2025-01-10T11:16:50.893Z</td></tr><tr><td>Ngesso</td><td><p>Протокол Software Ethernet</p></td><td>2025-01-10T11:18:46.952Z</td></tr><tr><td>wigeance(Wigeance)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4172" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>ipfrag2 для своих серверов и внешнего IP адреса</p>
</blockquote>
</aside>
<p>Мегафоновский нат кстати не только datanoack пропускает, но и ip фрагменты (что довольно странно, но видимо ТСПУ до ната)</p></td><td>2025-01-10T11:45:47.551Z</td></tr><tr><td>bolvan</td><td><p>Это не протокол, а наверно название софта SoftEther. Насколько я понимаю, это комбайн различных протоколов. L2TP, openvpn, ipsec и прочее. И все зависит от того, какой именно будет использоваться</p></td><td>2025-01-10T11:59:46.042Z</td></tr><tr><td>bolvan</td><td><p>Проход NAT ип фрагментами это отдельная тема для исследования.<br>
По идее там может быть ряд ситуаций, представляющих сложность для NAT.<br>
Например, что будет, если будет disorder ? Что он будет транслировать, если во 2-м куске даже нет tcp/udp header ?<br>
Мое наблюдение , что linux может по своему желанию собирать эти куски при прохождении NAT, если может.<br>
На BSD есть даже отдельная операция scrub</p>
<p>Что-то гарантировать может только внешний IP и отсутствие NAT</p></td><td>2025-01-10T12:03:51.890Z</td></tr><tr><td>wowik98(Wowik98)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4168" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>IFACE_WAN=“ppp0 ppp1”</p>
</blockquote>
</aside>
<p>да именно так и прописывал но тоже не работал на 2 провайдере</p></td><td>2025-01-10T12:26:06.362Z</td></tr><tr><td>wowik98(Wowik98)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4168" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>IFACE_WAN=“ppp0 ppp1”<br>
IFACE_WAN6 только для ipv6</p>
</blockquote>
</aside>
<p>может лог чем поможет</p>
<details>
<summary>
Спойлер</summary>
<p>initializing conntrack with timeouts tcp=60:300:60 udp=60<br>
opening library handle<br>
unbinding existing nf_queue handler for AF_INET (if any)<br>
binding nfnetlink_queue as nf_queue handler for AF_INET<br>
binding this socket to queue ‘200’<br>
setting copy_packet mode<br>
initializing raw sockets bind-fix4=0 bind-fix6=0<br>
set_socket_buffers fd=4 rcvbuf=2048 sndbuf=32768<br>
fd=4 SO_RCVBUF=4096<br>
fd=4 SO_SNDBUF=65536<br>
set_socket_buffers fd=5 rcvbuf=2048 sndbuf=32768<br>
fd=5 SO_RCVBUF=4096<br>
fd=5 SO_SNDBUF=65536<br>
seccomp: Invalid argument<br>
seccomp: this can be safely ignored if kernel does not support seccomp<br>
Running as UID=65534 GID=65534<br>
set_socket_buffers fd=3 rcvbuf=65536 sndbuf=32768<br>
fd=3 SO_RCVBUF=131072<br>
fd=3 SO_SNDBUF=65536<br>
packet: id=1 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=S seq=3090842023 ack_seq=0<br>
packet: id=1 pass unmodified<br>
packet: id=2 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=A seq=3090842024 ack_seq=1614145841<br>
packet: id=2 pass unmodified<br>
packet: id=3 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=AP seq=3090842024 ack_seq=1614145841<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 FA E5 9A 64 3B 6D A8 3A C9 89 8F BC 4F FE 00 E9 BF BB 2A D2 67 … : …d;m.:…O…<em>.g …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 3090842024-3090842540<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55567 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=3 pass unmodified<br>
packet: id=4 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=AP seq=3090842024 ack_seq=1614145841<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 FA E5 9A 64 3B 6D A8 3A C9 89 8F BC 4F FE 00 E9 BF BB 2A D2 67 … : …d;m.:…O…</em>.g …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55567 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=4 drop<br>
packet: id=5 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=AP seq=3090842024 ack_seq=1614145841<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 FA E5 9A 64 3B 6D A8 3A C9 89 8F BC 4F FE 00 E9 BF BB 2A D2 67 … : …d;m.:…O…<em>.g …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55567 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=5 drop<br>
packet: id=6 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55567 dport=443 flags=AP seq=3090842024 ack_seq=1614145841<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 FA E5 9A 64 3B 6D A8 3A C9 89 8F BC 4F FE 00 E9 BF BB 2A D2 67 … : …d;m.:…O…</em>.g …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55567 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=6 drop<br>
packet: id=7 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 62.128.100.252 proto=tcp ttl=127 sport=55559 dport=443 flags=AF seq=4226481216 ack_seq=3277573411<br>
packet: id=7 pass unmodified<br>
packet: id=8 len=60 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60746 dport=80 flags=S seq=3600033095 ack_seq=0<br>
packet: id=8 pass unmodified<br>
packet: id=9 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60746 dport=80 flags=A seq=3600033096 ack_seq=1896571047<br>
packet: id=9 pass unmodified<br>
packet: id=10 len=103 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60746 dport=80 flags=AP seq=3600033096 ack_seq=1896571047<br>
TCP: 48 45 41 44 20 2F 63 68 65 63 6B 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 63 61 70 74 … : HEAD /check HTTP/1.1…Host: capt …<br>
packet contains HTTP request<br>
req retrans : tcp seq interval 3600033096-3600033146<br>
dpi desync src=100.120.87.198:60746 dst=95.213.212.51:80<br>
split pos 2<br>
sending fake request : 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 69 61 6E 61 2E 6F … : GET / HTTP/1.1…Host: www.iana.o …<br>
reinjecting original packet. len=103 len_payload=51<br>
packet: id=10 drop<br>
packet: id=11 len=236 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=59 sport=80 dport=60746 flags=AP seq=1896571047 ack_seq=3600033147<br>
TCP: 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D 0A 53 65 72 76 65 72 3A 20 6E 67 69 6E 78 0D 0A … : HTTP/1.1 200 OK…Server: nginx… …<br>
packet: id=11 pass unmodified<br>
packet: id=12 len=52 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=59 sport=80 dport=60746 flags=AF seq=1896571231 ack_seq=3600033147<br>
packet: id=12 pass unmodified<br>
packet: id=13 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60746 dport=80 flags=A seq=3600033147 ack_seq=1896571231<br>
packet: id=13 pass unmodified<br>
packet: id=14 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 195.122.177.190 proto=tcp ttl=127 sport=55563 dport=443 flags=AF seq=2194387144 ack_seq=1981830576<br>
packet: id=14 pass unmodified<br>
packet: id=15 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=S seq=364003295 ack_seq=0<br>
packet: id=15 pass unmodified<br>
packet: id=16 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=A seq=364003296 ack_seq=394516371<br>
packet: id=16 pass unmodified<br>
packet: id=17 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=AP seq=364003296 ack_seq=394516371<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 67 8F 2B 28 D1 87 BE B8 E5 4C B3 80 E8 07 E0 89 E1 AC 01 FB E9 … : …g.+(…L… …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 364003296-364003812<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55568 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=17 pass unmodified<br>
packet: id=18 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=AP seq=364003296 ack_seq=394516371<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 67 8F 2B 28 D1 87 BE B8 E5 4C B3 80 E8 07 E0 89 E1 AC 01 FB E9 … : …g.+(…L… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55568 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=18 drop<br>
packet: id=19 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=AP seq=364003296 ack_seq=394516371<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 67 8F 2B 28 D1 87 BE B8 E5 4C B3 80 E8 07 E0 89 E1 AC 01 FB E9 … : …g.+(…L… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55568 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=19 drop<br>
packet: id=20 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55568 dport=443 flags=AP seq=364003296 ack_seq=394516371<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 67 8F 2B 28 D1 87 BE B8 E5 4C B3 80 E8 07 E0 89 E1 AC 01 FB E9 … : …g.+(…L… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55568 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=20 drop<br>
packet: id=21 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 46.8.206.102 proto=tcp ttl=127 sport=55566 dport=443 flags=AF seq=812272676 ack_seq=1606382845<br>
packet: id=21 pass unmodified<br>
packet: id=22 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=S seq=1453781481 ack_seq=0<br>
packet: id=22 pass unmodified<br>
packet: id=23 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=A seq=1453781482 ack_seq=3809911992<br>
packet: id=23 pass unmodified<br>
packet: id=24 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=AP seq=1453781482 ack_seq=3809911992<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 51 0A D4 F3 AC CE 5C C9 C7 95 6D 18 44 11 79 23 A6 33 D8 AE B7 … : …Q….…m.D.y#.3… …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 1453781482-1453781998<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55569 dst=217.69.139.202:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=24 pass unmodified<br>
packet: id=25 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=AP seq=1453781482 ack_seq=3809911992<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 51 0A D4 F3 AC CE 5C C9 C7 95 6D 18 44 11 79 23 A6 33 D8 AE B7 … : …Q….…m.D.y#.3… …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55569 dst=217.69.139.202:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=25 drop<br>
packet: id=26 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=AP seq=1453781482 ack_seq=3809911992<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 51 0A D4 F3 AC CE 5C C9 C7 95 6D 18 44 11 79 23 A6 33 D8 AE B7 … : …Q….…m.D.y#.3… …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55569 dst=217.69.139.202:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=26 drop<br>
packet: id=27 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.202 proto=tcp ttl=127 sport=55569 dport=443 flags=AP seq=1453781482 ack_seq=3809911992<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 51 0A D4 F3 AC CE 5C C9 C7 95 6D 18 44 11 79 23 A6 33 D8 AE B7 … : …Q….…m.D.y#.3… …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55569 dst=217.69.139.202:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=27 drop<br>
packet: id=28 len=60 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60760 dport=80 flags=S seq=2079849284 ack_seq=0<br>
packet: id=28 pass unmodified<br>
packet: id=29 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60760 dport=80 flags=A seq=2079849285 ack_seq=996207854<br>
packet: id=29 pass unmodified<br>
packet: id=30 len=103 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60760 dport=80 flags=AP seq=2079849285 ack_seq=996207854<br>
TCP: 48 45 41 44 20 2F 63 68 65 63 6B 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 63 61 70 74 … : HEAD /check HTTP/1.1…Host: capt …<br>
packet contains HTTP request<br>
req retrans : tcp seq interval 2079849285-2079849335<br>
dpi desync src=100.120.87.198:60760 dst=95.213.212.51:80<br>
split pos 2<br>
sending fake request : 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 69 61 6E 61 2E 6F … : GET / HTTP/1.1…Host: www.iana.o …<br>
reinjecting original packet. len=103 len_payload=51<br>
packet: id=30 drop<br>
packet: id=31 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60760 dport=80 flags=A seq=2079849336 ack_seq=996208038<br>
packet: id=31 pass unmodified<br>
packet: id=32 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=S seq=4292954029 ack_seq=0<br>
packet: id=32 pass unmodified<br>
packet: id=33 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=A seq=4292954030 ack_seq=2230576104<br>
packet: id=33 pass unmodified<br>
packet: id=34 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=AP seq=4292954030 ack_seq=2230576104<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F6 25 F4 E0 2F 01 E2 35 0E E7 8C 9C 92 FE 0A 65 7A 42 AD E5 C6 … : …%…/…5…ezB… …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 4292954030-4292954546<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55570 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=34 pass unmodified<br>
packet: id=35 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=AP seq=4292954030 ack_seq=2230576104<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F6 25 F4 E0 2F 01 E2 35 0E E7 8C 9C 92 FE 0A 65 7A 42 AD E5 C6 … : …%…/…5…ezB… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55570 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=35 drop<br>
packet: id=36 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=AP seq=4292954030 ack_seq=2230576104<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F6 25 F4 E0 2F 01 E2 35 0E E7 8C 9C 92 FE 0A 65 7A 42 AD E5 C6 … : …%…/…5…ezB… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55570 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=36 drop<br>
packet: id=37 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55570 dport=443 flags=AP seq=4292954030 ack_seq=2230576104<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F6 25 F4 E0 2F 01 E2 35 0E E7 8C 9C 92 FE 0A 65 7A 42 AD E5 C6 … : …%…/…5…ezB… …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55570 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=37 drop<br>
packet: id=38 len=60 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60770 dport=80 flags=S seq=1477173190 ack_seq=0<br>
packet: id=38 pass unmodified<br>
packet: id=39 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60770 dport=80 flags=A seq=1477173191 ack_seq=598613237<br>
packet: id=39 pass unmodified<br>
packet: id=40 len=103 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60770 dport=80 flags=AP seq=1477173191 ack_seq=598613237<br>
TCP: 48 45 41 44 20 2F 63 68 65 63 6B 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 63 61 70 74 … : HEAD /check HTTP/1.1…Host: capt …<br>
packet contains HTTP request<br>
req retrans : tcp seq interval 1477173191-1477173241<br>
dpi desync src=100.120.87.198:60770 dst=95.213.212.51:80<br>
split pos 2<br>
sending fake request : 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 69 61 6E 61 2E 6F … : GET / HTTP/1.1…Host: www.iana.o …<br>
reinjecting original packet. len=103 len_payload=51<br>
packet: id=40 drop<br>
packet: id=41 len=236 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=60 sport=80 dport=60770 flags=AP seq=598613237 ack_seq=1477173242<br>
TCP: 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D 0A 53 65 72 76 65 72 3A 20 6E 67 69 6E 78 0D 0A … : HTTP/1.1 200 OK…Server: nginx… …<br>
packet: id=41 pass unmodified<br>
packet: id=42 len=52 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=60 sport=80 dport=60770 flags=AF seq=598613421 ack_seq=1477173242<br>
packet: id=42 pass unmodified<br>
packet: id=43 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60770 dport=80 flags=A seq=1477173242 ack_seq=598613421<br>
packet: id=43 pass unmodified<br>
packet: id=44 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=S seq=3822802805 ack_seq=0<br>
packet: id=44 pass unmodified<br>
packet: id=45 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=A seq=3822802806 ack_seq=4040221001<br>
packet: id=45 pass unmodified<br>
packet: id=46 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=AP seq=3822802806 ack_seq=4040221001<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F3 0C 00 D3 56 A4 BF 2F 26 A8 DE 9C 04 65 11 D6 04 4E 02 4B BF … : …V…/&amp;…e…N.K. …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 3822802806-3822803322<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55571 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=46 pass unmodified<br>
packet: id=47 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=AP seq=3822802806 ack_seq=4040221001<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F3 0C 00 D3 56 A4 BF 2F 26 A8 DE 9C 04 65 11 D6 04 4E 02 4B BF … : …V…/&amp;…e…N.K. …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55571 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=47 drop<br>
packet: id=48 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=AP seq=3822802806 ack_seq=4040221001<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F3 0C 00 D3 56 A4 BF 2F 26 A8 DE 9C 04 65 11 D6 04 4E 02 4B BF … : …V…/&amp;…e…N.K. …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55571 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=48 drop<br>
packet: id=49 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 217.69.139.200 proto=tcp ttl=127 sport=55571 dport=443 flags=AP seq=3822802806 ack_seq=4040221001<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 F3 0C 00 D3 56 A4 BF 2F 26 A8 DE 9C 04 65 11 D6 04 4E 02 4B BF … : …V…/&amp;…e…N.K. …<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://mail.ru" rel="noopener nofollow ugc">mail.ru</a><br>
dpi desync src=192.168.1.34:55571 dst=217.69.139.200:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=49 drop<br>
packet: id=50 len=52 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=S seq=1149355692 ack_seq=0<br>
packet: id=50 pass unmodified<br>
packet: id=51 len=40 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=A seq=1149355693 ack_seq=3111673898<br>
packet: id=51 pass unmodified<br>
packet: id=52 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=AP seq=1149355693 ack_seq=3111673898<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 D9 70 63 EE CD B3 0A 77 D9 FF E4 23 8D EF 74 42 2C 4D 01 2D A5 … : …pc…w…#…tB,M.-. …<br>
packet contains full TLS ClientHello<br>
req retrans : seq interval 1149355693-1149356209<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55572 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
rawsend: sendto: Operation not permitted<br>
packet: id=52 pass unmodified<br>
packet: id=53 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=AP seq=1149355693 ack_seq=3111673898<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 D9 70 63 EE CD B3 0A 77 D9 FF E4 23 8D EF 74 42 2C 4D 01 2D A5 … : …pc…w…#…tB,M.-. …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55572 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=53 drop<br>
packet: id=54 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=AP seq=1149355693 ack_seq=3111673898<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 D9 70 63 EE CD B3 0A 77 D9 FF E4 23 8D EF 74 42 2C 4D 01 2D A5 … : …pc…w…#…tB,M.-. …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55572 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=54 drop<br>
packet: id=55 len=557 mark=0FFFFAAA<br>
IP4: 192.168.1.34 =&gt; 130.255.77.28 proto=tcp ttl=127 sport=55572 dport=443 flags=AP seq=1149355693 ack_seq=3111673898<br>
TCP: 16 03 01 02 00 01 00 01 FC 03 03 D9 70 63 EE CD B3 0A 77 D9 FF E4 23 8D EF 74 42 2C 4D 01 2D A5 … : …pc…w…#…tB,M.-. …<br>
packet contains full TLS ClientHello<br>
hostname: ntc.party<br>
dpi desync src=192.168.1.34:55572 dst=130.255.77.28:443<br>
split pos 2<br>
sending fake request : 16 03 01 02 00 01 00 01 FC 03 03 6F 0B B6 85 58 28 59 D5 0D 6C 78 39 7F 2B 0B 45 A3 71 4F 49 D6 … : …o…X(Y…lx+.E.qOI. …<br>
reinjecting original packet. len=557 len_payload=517<br>
packet: id=55 drop<br>
packet: id=56 len=60 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60780 dport=80 flags=S seq=4053319156 ack_seq=0<br>
packet: id=56 pass unmodified<br>
packet: id=57 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60780 dport=80 flags=A seq=4053319157 ack_seq=3378629152<br>
packet: id=57 pass unmodified<br>
packet: id=58 len=103 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60780 dport=80 flags=AP seq=4053319157 ack_seq=3378629152<br>
TCP: 48 45 41 44 20 2F 63 68 65 63 6B 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 63 61 70 74 … : HEAD /check HTTP/1.1…Host: capt …<br>
packet contains HTTP request<br>
req retrans : tcp seq interval 4053319157-4053319207<br>
dpi desync src=100.120.87.198:60780 dst=95.213.212.51:80<br>
split pos 2<br>
sending fake request : 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 69 61 6E 61 2E 6F … : GET / HTTP/1.1…Host: www.iana.o …<br>
reinjecting original packet. len=103 len_payload=51<br>
packet: id=58 drop<br>
packet: id=59 len=236 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=59 sport=80 dport=60780 flags=AP seq=3378629152 ack_seq=4053319208<br>
TCP: 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D 0A 53 65 72 76 65 72 3A 20 6E 67 69 6E 78 0D 0A … : HTTP/1.1 200 OK…Server: nginx… …<br>
packet: id=59 pass unmodified<br>
packet: id=60 len=52 mark=00000000<br>
IP4: 95.213.212.51 =&gt; 100.120.87.198 proto=tcp ttl=59 sport=80 dport=60780 flags=AF seq=3378629336 ack_seq=4053319208<br>
packet: id=60 pass unmodified<br>
packet: id=61 len=52 mark=00000000<br>
IP4: 100.120.87.198 =&gt; 95.213.212.51 proto=tcp ttl=64 sport=60780 dport=80 flags=A seq=4053319208 ack_seq=3378629336<br>
packet: id=61 pass unmodified</p>
</details></td><td>2025-01-10T13:29:46.471Z</td></tr><tr><td>KSEONCH1kk(Kseonch1kk)</td><td><p>А что делать людям с МГТС? Zapret полностью отвалился, как я понял заблокировали cloudflare полностью. Т.е ютуб - работает, а например Discord - нет.</p></td><td>2025-01-10T13:33:35.895Z</td></tr><tr><td>KSEONCH1kk(Kseonch1kk)</td><td><p>Всё, решено, попробывал ещё раз, заработало, спасибо за программу!</p></td><td>2025-01-10T13:42:43.428Z</td></tr><tr><td>bolvan</td><td><p>rawsend: sendto: Operation not permitted</p>
<p>В этом, наверно, проблема.<br>
Можно попробовать опцию --bind-fix4</p>
<p>Кинетики при адвансед настройках могут портить марк своими правилами.<br>
Надо бы посмотреть<br>
ip addr<br>
ip rule<br>
ip route<br>
iptables -S<br>
Если есть ссылки на какие-то доп таблицы в ip rule, ip route show table XXX</p></td><td>2025-01-10T14:02:54.494Z</td></tr><tr><td>NgessoANTILIMIT</td><td><p>А как узнать, какой в конкретном случаи протокол применяется. (Параметры подключения там разные смотрел, там не написано).</p>
<p>*Ну по идее OpenVPN применяться не должен, он же вообще заблокирован уже наглухо вроде-как.</p></td><td>2025-01-10T14:21:51.801Z</td></tr><tr><td>bolvan</td><td><p>Надо разбираться в софте. Я им не пользовался, так что сказать не могу</p></td><td>2025-01-10T14:26:07.351Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Особо не разбирался, но у кинетика по ощущениям срабатывает какой-то жесткий блок на отправку любых пакетов на соединение которое сейчас не является default gw. На оврт даже с iptables такого нет</p></td><td>2025-01-10T14:27:30.131Z</td></tr><tr><td>bolvan</td><td><p>Это давно известная проблема с raw сокетами в linux.<br>
Они не проходят адекватно схему ip rule и могут улетать с другого интерфейса, если не принять ряд специальных мер. bind to ip, bind to device.  Для этого и служат --bind-fix4 и --bind-fix6<br>
Они берут из NFQUEUE исходящий интерфейс пакета и биндают сокет на этот интерфейс при каждой отправке<br>
Ошибку denied может вызывать какое-то из правил iptables в цепочке OUTPUT, призванное не допустить leak чужого для интерфейса ip</p></td><td>2025-01-10T14:33:54.668Z</td></tr><tr><td>wowik98(Wowik98)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4184" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>rawsend: sendto: Operation not permitted</p>
<p>В этом, наверно, проблема.<br>
Можно попробовать опцию --bind-fix4</p>
<p>Кинетики при адвансед настройках могут портить марк своими правилами.<br>
Надо бы посмотреть<br>
ip addr<br>
ip rule<br>
ip route<br>
iptables -S<br>
Если есть ссылки на какие-то доп таблицы в ip rule, ip route show table XXX</p>
</blockquote>
</aside>
<p>УРАААААА вот это --bind-fix4 сработала спасибо за программу!</p></td><td>2025-01-10T14:39:26.313Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>случайно)</p></td><td>2025-01-10T20:14:46.401Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>возможно ли запрет для android сделать вне рут доступа, создавая прокси сервер и через bromite пользоваться запретом?</p>
<p>наверное проще на виртуалку поставить линукс накатить zapret и сделать прокси?</p></td><td>2025-01-10T20:31:06.978Z</td></tr><tr><td>bolvan</td><td><p>Без рута только tpws --socks.<br>
Но для него нет приложения.<br>
Есть byedpi, и у него больше возможностей + приложение</p></td><td>2025-01-10T20:33:26.770Z</td></tr><tr><td>zxcn(zxcn)</td><td><p>byedpi не интересен</p></td><td>2025-01-10T20:42:40.621Z</td></tr><tr><td>bolvan</td><td><p>для iptables и nfqws нужны cap_net_admin и cap_net_raw<br>
без рута их получить невозможно<br>
еще терки с selinux</p></td><td>2025-01-11T07:25:09.826Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Может быть есть смысл сделать файл предупреждение? по типу \ipset!!!DO NOT PUT YOUR FILES HERE!!!.txt<br>
Понимаю что надо читать мануал и там написано, но почему бы не сделать какой нибудь похожий файл на который бы люди обратили внимание?<br>
и еще идея добавить предупреждение при запуске блокчека, ему же можно дать понимания какие файлы должны быть в папке ipset, если есть другие то добавить предупреждение?</p></td><td>2025-01-11T19:22:40.430Z</td></tr><tr><td>bolvan</td><td><p>Блокчек забивать не относящимся к нему функционалом не буду.<br>
Предупреждение в виде файлов можно, но как-то не очень оно будет смотреться для грамотных людей. Что нас за идиотов считают ? Везде сюда ходи туда не ходи кирпич упадет.<br>
А проверка файлов в коде - значит надо все время знать какие должны быть, какие нет. С версиями меняется.<br>
Нафиг. Будут учиться на собственных граблях. Если все устраивает, переписать после установки заново несложно, то и пусть</p></td><td>2025-01-12T07:51:04.562Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>у меня на новых прошивках начал переодически отваливаться 10-keenetic-udp-fix : лечащая добавка для кинетика против отсутствия маскарада без ndmmark иногда через пять минут иногда через 20 минут пока не перезапустишь запрет не одно приложение опен впн варгуарт не работает по udp есть какие нибудь предположение почему так происходит и что с этим делать при этом в роутере опенвпн и варгуарт прекрасно работают по udp</p></td><td>2025-01-12T09:27:21.907Z</td></tr><tr><td>bolvan</td><td><p>лечилка делает вот что<br>
-o $wan -p udp -m mark --mark $DESYNC_MARK/$DESYNC_MARK -j MASQUERADE<br>
desync_mark - это бит 0x40000000, которым помечает nfqws все сгенерированные им пакеты<br>
проверьте не создает ли прошивка правила, выставляющие этот бит ?</p>
<p>iptables -vL</p>
<p>что в counter выдает по этому правилу ?</p>
<p>Если без лечилки, все работает ?</p></td><td>2025-01-12T09:58:13.680Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>вот что показывает</p>
<details>
<summary>
Спойлер</summary>
<p>Chain INPUT (policy DROP 0 packets, 0 bytes)<br>
pkts bytes target     prot opt in     out     source               destination<br>
323  110K _NDM_MULTICAST_INPUT  udp  –  any    any     anywhere             <a href="http://base-address.mcast.net/4" class="inline-onebox-loading" rel="noopener nofollow ugc">base-address.mcast.net/4</a><br>
6   192 ACCEPT     igmp –  any    any     anywhere             anywhere<br>
1369  120K _NDM_ACL_IN_EXCEPTIONS  all  –  any    any     anywhere             anywhere<br>
1078  102K ACCEPT     all  –  any    any     anywhere             anywhere             state RELATED,ESTABLISHED<br>
37  2489 ACCEPT     all  –  lo     any     anywhere             anywhere<br>
164 10788 _NDM_BFD_INPUT  all  –  any    any     anywhere             anywhere<br>
164 10788 _NDM_ACL_IN  all  –  any    any     anywhere             anywhere<br>
164 10788 _NDM_IPSEC_INPUT_FILTER  all  –  any    any     anywhere             anywhere<br>
164 10788 _NDM_TUNNELS_INPUT  all  –  any    any     anywhere             anywhere<br>
0     0 DROP       all  –  any    any     anywhere             anywhere             state INVALID<br>
0     0 ACCEPT     all  –  any    any     anywhere             anywhere             ctstate DNAT<br>
164 10788 _NDM_INPUT  all  –  any    any     anywhere             anywhere<br>
119  7658 _NDM_SL_PRIVATE  all  –  any    any     anywhere             anywhere</p>
<p>Chain FORWARD (policy DROP 0 packets, 0 bytes)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 _NDM_MULTICAST_INPUT  udp  –  any    any     anywhere             <a href="http://base-address.mcast.net/4" class="inline-onebox-loading" rel="noopener nofollow ugc">base-address.mcast.net/4</a><br>
849  330K ACCEPT     all  –  any    any     anywhere             anywhere             state RELATED,ESTABLISHED<br>
243 26860 _NDM_ACL_IN  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_ACL_OUT  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_IPSEC_FORWARD  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_VPN_FORWARD  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_FORWARD  all  –  any    any     anywhere             anywhere<br>
12   480 DROP       all  –  any    any     anywhere             anywhere             state INVALID<br>
0     0 ACCEPT     all  –  any    any     anywhere             anywhere             ctstate DNAT<br>
231 26380 _NDM_SL_FORWARD  all  –  any    any     anywhere             anywhere<br>
0     0 ACCEPT     all  –  lo     any     anywhere             anywhere<br>
0     0 ACCEPT     all  –  br0    br0     anywhere             anywhere<br>
0     0 ACCEPT     all  –  br1    br1     anywhere             anywhere</p>
<p>Chain OUTPUT (policy ACCEPT 2279 packets, 765K bytes)<br>
pkts bytes target     prot opt in     out     source               destination<br>
2279  765K _NDM_BFD_OUTPUT  all  –  any    any     anywhere             anywhere<br>
2279  765K _NDM_ACL_OUT  all  –  any    any     anywhere             anywhere<br>
2279  765K _NDM_IPSEC_OUTPUT_FILTER  all  –  any    any     anywhere             anywhere<br>
2279  765K _NDM_OUTPUT  all  –  any    any     anywhere             anywhere<br>
2279  765K _NDM_IKE1SRVVPN_OUT  all  –  any    any     anywhere             anywhere<br>
2279  765K _NDM_IKE2SRVVPN_OUT  all  –  any    any     anywhere             anywhere</p>
<p>Chain <span class="mention">@Bridge0</span> (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain <span class="mention">@PPPoE0</span> (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain <span class="mention">@WifiMaster0</span>/WifiStation0 (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain CLOUD_UDP_SERVICE_NF_CHAIN_ (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     udp  –  any    any     <a href="http://ndns111.omni.ru" rel="noopener nofollow ugc">ndns111.omni.ru</a>      10.181.214.251       udp spt:4044 dpt:4043</p>
<p>Chain COALAGENT_NF_CHAIN_ (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
90  4350 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:55092</p>
<p>Chain Ftp_IN (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp dpt:ftp-data match-set _NDM_BFD_Ftp4 src return-nomatch ! update-counters ! update-subcounters<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp dpt:ftp match-set _NDM_BFD_Ftp4 src return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain Ftp_OUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp spt:ftp-data match-set _NDM_BFD_Ftp4 dst return-nomatch ! update-counters ! update-subcounters<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp spt:ftp match-set _NDM_BFD_Ftp4 dst return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain Http_IN (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp dpt:http match-set _NDM_BFD_Http4 src return-nomatch ! update-counters ! update-subcounters<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp dpt:https match-set _NDM_BFD_Http4 src return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain Http_OUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp spt:http match-set _NDM_BFD_Http4 dst return-nomatch ! update-counters ! update-subcounters<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp spt:https match-set _NDM_BFD_Http4 dst return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain NDM_FORWARD_ACL (0 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain Telnet_IN (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp dpt:2022 match-set _NDM_BFD_Telnet4 src return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain Telnet_OUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 DROP       tcp  –  any    any     anywhere             anywhere             tcp spt:2022 match-set _NDM_BFD_Telnet4 dst return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain _NDM_ACL_IN (2 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 <span class="mention">@WifiMaster0</span>/WifiStation0  all  –  apcli0 any     anywhere             anywhere<br>
407 37648 <span class="mention">@Bridge0</span>   all  –  br0    any     anywhere             anywhere<br>
0     0 <span class="mention">@PPPoE0</span>    all  –  ppp0   any     anywhere             anywhere</p>
<p>Chain <em>NDM_ACL_IN_EXCEPTIONS (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
1369  120K COALAGENT_NF_CHAIN</em>  all  –  any    any     anywhere             anywhere<br>
1279  115K CLOUD_UDP_SERVICE_NF_CHAIN_  all  –  any    any     anywhere             anywhere</p>
<p>Chain _NDM_ACL_OUT (2 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_BFD_INPUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
164 10788 Telnet_IN  all  –  any    any     anywhere             anywhere<br>
164 10788 Http_IN    all  –  any    any     anywhere             anywhere<br>
164 10788 Ftp_IN     all  –  any    any     anywhere             anywhere</p>
<p>Chain _NDM_BFD_OUTPUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
2279  765K Telnet_OUT  all  –  any    any     anywhere             anywhere<br>
2279  765K Http_OUT   all  –  any    any     anywhere             anywhere<br>
2279  765K Ftp_OUT    all  –  any    any     anywhere             anywhere</p>
<p>Chain _NDM_FORWARD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
243 26860 _NDM_HOTSPOT_FWD  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_UPNP_FORWARD_SYS  all  –  any    any     anywhere             anywhere             ndmmark match 0x0/0x8</p>
<p>Chain _NDM_HOTSPOT_FWD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             slin ! 3 (public) slout ! 3 (public)<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC 9C:30:5B:51:C1:C3<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC AE:1B:B4:29:0C:A8<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC D2:CC:16:C1:16:F4<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC 26:2C:73:4E:D5:F3<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC 66:B7:1D:6A:7D:1A<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC D4:38:9C:85:35:D9<br>
243 26860 RETURN     all  –  any    any     anywhere             anywhere             MAC D8:5E:D3:54:3E:D3<br>
0     0 RETURN     all  –  any    br0     anywhere             192.168.40.35<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC FC:03:9F:1D:4A:90<br>
0     0 RETURN     all  –  ra6    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra2    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra3    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra1    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra0    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra5    any     anywhere             anywhere<br>
0     0 RETURN     all  –  ra4    any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai6   any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai5   any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai4   any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai3   any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai2   any     anywhere             anywhere<br>
0     0 RETURN     all  –  rai1   any     anywhere             anywhere<br>
0     0 RETURN     all  –  br0    any     anywhere             anywhere<br>
0     0 RETURN     all  –  br1    any     anywhere             anywhere<br>
0     0 RETURN     all  –  any    any     anywhere             anywhere             MAC 94:17:00:3F:BF:AE</p>
<p>Chain _NDM_IKE1SRVVPN_FWD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  xfrms1 br0     anywhere             anywhere<br>
0     0 ACCEPT     all  –  br0    xfrms1  anywhere             anywhere<br>
0     0 ACCEPT     all  –  xfrms1 xfrms1  anywhere             anywhere<br>
0     0 ACCEPT     all  –  xfrms1 ppp0    anywhere             anywhere<br>
0     0 ACCEPT     all  –  ppp0   xfrms1  anywhere             anywhere<br>
0     0 ACCEPT     all  –  vpn+   xfrms1  anywhere             anywhere             match-set _NDM_SRV_IKE1SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  sstp+  xfrms1  anywhere             anywhere             match-set _NDM_SRV_IKE1SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  l2tp+  xfrms1  anywhere             anywhere             match-set _NDM_SRV_IKE1SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  oc+    xfrms1  anywhere             anywhere             match-set _NDM_SRV_IKE1SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  xfrms2 xfrms1  anywhere             anywhere             match-set _NDM_SRV_IKE1SRVVPN src return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain _NDM_IKE1SRVVPN_IN (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  xfrms1 any     anywhere             192.168.40.1<br>
0     0 ACCEPT     udp  –  xfrms1 any     anywhere             anywhere             udp dpt:bootps</p>
<p>Chain _NDM_IKE1SRVVPN_OUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  any    xfrms1  192.168.40.1         anywhere</p>
<p>Chain _NDM_IKE2SRVVPN_FWD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  xfrms2 br0     anywhere             anywhere<br>
0     0 ACCEPT     all  –  br0    xfrms2  anywhere             anywhere<br>
0     0 ACCEPT     all  –  xfrms2 xfrms2  anywhere             anywhere<br>
0     0 ACCEPT     all  –  xfrms2 ppp0    anywhere             anywhere<br>
0     0 ACCEPT     all  –  ppp0   xfrms2  anywhere             anywhere<br>
0     0 ACCEPT     all  –  vpn+   xfrms2  anywhere             anywhere             match-set _NDM_SRV_IKE2SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  sstp+  xfrms2  anywhere             anywhere             match-set _NDM_SRV_IKE2SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  l2tp+  xfrms2  anywhere             anywhere             match-set _NDM_SRV_IKE2SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  oc+    xfrms2  anywhere             anywhere             match-set _NDM_SRV_IKE2SRVVPN src return-nomatch ! update-counters ! update-subcounters<br>
0     0 ACCEPT     all  –  xfrms1 xfrms2  anywhere             anywhere             match-set _NDM_SRV_IKE2SRVVPN src return-nomatch ! update-counters ! update-subcounters</p>
<p>Chain _NDM_IKE2SRVVPN_IN (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  xfrms2 any     anywhere             192.168.40.1<br>
0     0 ACCEPT     udp  –  xfrms2 any     anywhere             anywhere             udp dpt:bootps</p>
<p>Chain _NDM_IKE2SRVVPN_OUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  any    xfrms2  192.168.40.1         anywhere</p>
<p>Chain _NDM_INPUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp spt:bootps dpt:bootpc<br>
0     0 _NDM_SL_PROTECT  udp  –  any    any     anywhere             anywhere             udp spts:bootps:bootpc dpts:bootps:bootpc<br>
0     0 _NDM_IP_PUBLIC  all  –  eth3   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PRIVATE  all  –  ra6    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  ra2    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  ra3    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  ra5    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  ra4    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PUBLIC  all  –  apcli0 any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PRIVATE  all  –  rai6   any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  rai5   any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  rai4   any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  rai3   any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PRIVATE  all  –  rai2   any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PUBLIC  all  –  apclii0 any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_SL_PROTECT  tcp  –  any    any     anywhere             anywhere             tcp dpt:3517<br>
0     0 _NDM_SL_PROTECT  udp  –  any    any     anywhere             anywhere             udp dpt:3517<br>
6   456 _NDM_SL_PROTECT  udp  –  any    any     anywhere             anywhere             udp dpt:3518<br>
158 10332 _NDM_IKE1SRVVPN_IN  all  –  any    any     anywhere             anywhere<br>
158 10332 _NDM_IKE2SRVVPN_IN  all  –  any    any     anywhere             anywhere<br>
158 10332 _NDM_IP_PRIVATE  all  –  br0    any     anywhere             anywhere             slin 1 (private)<br>
0     0 _NDM_IP_PROTECT  all  –  br1    any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 2 (protected)<br>
0     0 _NDM_IP_PUBLIC  all  –  ppp0   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  ppp1   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  ppp2   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  ppp3   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  ovpn_br0 any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  nwg0   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  nwg1   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  nwg2   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  ovpn_br1 any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)<br>
0     0 _NDM_IP_PUBLIC  all  –  nwg3   any     anywhere            !<a href="http://my.keenetic.net" rel="noopener nofollow ugc">my.keenetic.net</a>      slin 3 (public)</p>
<p>Chain _NDM_IPSEC_FORWARD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_IPSEC_INPUT_FILTER (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_IPSEC_INPUT_FLT_BPS (0 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_IPSEC_OUTPUT_FILTER (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_IPSEC_OUTPUT_FLT_BPS (0 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_IP_PRIVATE (11 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
158 10332 _NDM_IP_PROTECT  all  –  any    any     anywhere             anywhere</p>
<p>Chain _NDM_IP_PROTECT (2 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
158 10332 _NDM_IP_PUBLIC  all  –  any    any     anywhere             anywhere<br>
39  2674 _NDM_SL_PROTECT  udp  –  any    any     anywhere             anywhere             udp dpt:domain<br>
0     0 _NDM_SL_PROTECT  tcp  –  any    any     anywhere             anywhere             tcp dpt:domain</p>
<p>Chain _NDM_IP_PUBLIC (14 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:isakmp<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:4500<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:44852<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:43077<br>
0     0 ACCEPT     tcp  –  any    any     anywhere             anywhere             tcp dpt:2022<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:42716<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:42442<br>
0     0 ACCEPT     udp  –  any    any     anywhere             anywhere             udp dpt:44171</p>
<p>Chain _NDM_MULTICAST_INPUT (2 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
323  110K ACCEPT     all  –  any    any     anywhere             anywhere</p>
<p>Chain _NDM_OUTPUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination</p>
<p>Chain _NDM_SL_FORWARD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 _NDM_SL_PROTECT  all  –  any    eth3    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    apcli0  anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    apclii0  anywhere             anywhere             state NEW<br>
231 26380 _NDM_SL_PROTECT  all  –  any    ppp0    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    ppp1    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    ppp2    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    ppp3    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    ovpn_br0  anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    nwg0    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    nwg1    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    nwg2    anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    ovpn_br1  anywhere             anywhere             state NEW<br>
0     0 _NDM_SL_PROTECT  all  –  any    nwg3    anywhere             anywhere             state NEW</p>
<p>Chain _NDM_SL_PRIVATE (2 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     all  –  ra6    any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  ra2    any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  ra3    any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  ra5    any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  ra4    any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  rai6   any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  rai5   any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  rai4   any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  rai3   any     anywhere             anywhere             state NEW<br>
0     0 ACCEPT     all  –  rai2   any     anywhere             anywhere             state NEW<br>
395 37168 ACCEPT     all  –  br0    any     anywhere             anywhere             state NEW</p>
<p>Chain _NDM_SL_PROTECT (19 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
276 29510 _NDM_SL_PRIVATE  all  –  any    any     anywhere             anywhere<br>
0     0 ACCEPT     all  –  br1    any     anywhere             anywhere             state NEW</p>
<p>Chain _NDM_TUNNELS_INPUT (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     ipv6-crypt--  any    any     anywhere             anywhere<br>
0     0 ACCEPT     gre  –  any    any     anywhere             anywhere<br>
0     0 ACCEPT     ipencap--  any    any     anywhere             anywhere</p>
<p>Chain _NDM_UPNP_FORWARD_SYS (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
0     0 ACCEPT     udp  –  any    any     anywhere             192.168.40.35        match-set _UPNP_SYS src,src udp dpt:13688</p>
<p>Chain _NDM_VPN_FORWARD (1 references)<br>
pkts bytes target     prot opt in     out     source               destination<br>
243 26860 _NDM_IKE1SRVVPN_FWD  all  –  any    any     anywhere             anywhere<br>
243 26860 _NDM_IKE2SRVVPN_FWD  all  –  any    any     anywhere             anywhere</p>
</details></td><td>2025-01-12T10:11:35.583Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4198" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если без лечилки, все работает</p>
</blockquote>
</aside>
<p>без лечилки вообще не работает с лечилкой временно работает 5 20 минут иногда до часу работает а потом глохнет пока не перезапустишь запрет</p></td><td>2025-01-12T10:32:01.161Z</td></tr><tr><td>bolvan</td><td><p>Тогда не в правилах проблема, а в том, что кинетиковская прошивка сносит чужие для нее правила периодически. Там нужен хук, чтобы их восстанавливать. Может он перестал работать, они что-то поменяли. Я не знаю, это надо к кинетиководам идти спрашивать или самому разобрать<br>
С новой версией zapret , которая отказалась от MODE=  , там и хук тоже надо переделать под нее. Если в хуке проверяется $MODE - это оно</p></td><td>2025-01-12T10:33:12.276Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>извините а будет ли когда нибудь прошивка openwrt для keenetic peak хотел бы поставит но у них ее нету</p></td><td>2025-01-12T10:43:56.664Z</td></tr><tr><td>bolvan</td><td><p>Это надо на форуме openwrt спрашивать, а не здесь.<br>
В общем случае главных препятствий обычно всего несколько.<br>
Отсутствие свободных драйверов, слабость железа, секуре бут и прочая верификация прошивок, недостаток ресурсов разработчиков</p></td><td>2025-01-12T11:14:57.348Z</td></tr><tr><td>rem</td><td><aside class="quote no-group" data-username="ivanixa333" data-post="4202" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ivanixa333/48/2766_2.png" class="avatar"> ivanixa333:</div>
<blockquote>
<p>извините а будет ли когда нибудь прошивка openwrt для keenetic peak хотел бы поставит но у них ее нету</p>
</blockquote>
</aside>
<p>Это вам нужно обращаться к Linaro1985. Он в этом спец.</p>
<p>Так же попробуйте это: <a href="https://github.com/Anonym-tsk/nfqws-keenetic" class="inline-onebox" rel="noopener nofollow ugc">GitHub - Anonym-tsk/nfqws-keenetic</a><br>
Вот свежий видос по установке всего этого дела на кинетики: <a href="https://www.youtube.com/watch?v=NNdGX3dUMoc" rel="noopener nofollow ugc">https://www.youtube.com/watch?v=NNdGX3dUMoc</a></p>
<p>Свежий видос по установке на OpenWrt тоже гуглится: <a href="https://www.youtube.com/watch?v=OEaibYyCyn0" rel="noopener nofollow ugc">https://www.youtube.com/watch?v=OEaibYyCyn0</a></p>
<p>Вывод из видосов: устанавливать значительно проще на OpenWrt</p></td><td>2025-01-12T11:27:34.462Z</td></tr><tr><td>ivanixa333(Ivanixa333)</td><td><p>Благодарю вас Это решение адекватно работает по udp на кинетике</p></td><td>2025-01-12T18:49:37.181Z</td></tr><tr><td>easyone11</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Люди спрашивают как версию посмотреть.<br>
Может добавить в талмуд как это сделать? или я слепой cntrk+f на нашёл</p></td><td>2025-01-13T04:28:21.298Z</td></tr><tr><td>bolvan</td><td><p>У комплекта zapret по-прежнему нет версии.<br>
Версия есть только у EXEшников, и они ее выводят всегда при запуске.</p></td><td>2025-01-13T07:00:54.021Z</td></tr><tr><td>fatyzzz(Иван)</td><td><p>юзаю в связке с доменами, поэтому не задело<br>
но сейчас добавлю</p></td><td>2025-01-14T18:22:23.582Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a><br>
Is <code>--dpi-desync-fooling=ts</code> broken or uncompleted? The TSVal generated by <code>dpi_desync_tcp_packet_play()</code> is likely too large  ( equal to the TSVal of the TCP segment triggering <code>prepare_tcp_segment()</code>  ), why not copy the TSVal of the <code>&lt;SYN&gt;</code> segment or the TSecr of the <code>&lt;SYN,ACK&gt;</code> segment?</p></td><td>2025-01-15T03:13:48.449Z</td></tr><tr><td>bolvan</td><td><p>Idea with ts is not working and code going to be removed</p></td><td>2025-01-15T06:22:18.155Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>One-line PoC:</p>
<pre><code class="lang-auto">--- a/nfq/darkmagic.c
+++ b/nfq/darkmagic.c
@@ -131,7 +131,7 @@
 		tcpopt[t] = 8; // kind
 		tcpopt[t+1] = 10; // len
 		// forge only TSecr if orig timestamp is present
-		*(uint32_t*)(tcpopt+t+2) = timestamps ? timestamps[0] : -1;
+		*(uint32_t*)(tcpopt+t+2) = timestamps ? htonl(ntohl(timestamps[0])-10000) : -1;
 		*(uint32_t*)(tcpopt+t+6) = (timestamps &amp;&amp; !(fooling &amp; FOOL_TS)) ? timestamps[1] : -1;
 		t+=10;
 	}
</code></pre></td><td>2025-01-15T08:28:26.741Z</td></tr><tr><td>lord_iu(Space Bar)</td><td><p>сегодня ркн чтото сделал, запрет вообще не может никак осилить конфиг подобрать</p>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_http : tpws not working<br>
ipv4 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_http : nfqws not working<br>
ipv4 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_https_tls12 : tpws not working<br>
ipv4 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_https_tls12 : nfqws not working<br>
ipv4 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_http3 : nfqws not working<br>
ipv6 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_http : test aborted, no reason to continue. curl code 6: could not resolve host<br>
ipv6 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_https_tls12 : test aborted, no reason to continue. curl code 6: could not resolve host<br>
ipv6 <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a> curl_test_http3 : test aborted, no reason to continue. curl code 6: could not resolve host</li>
</ul>
<p>DoH исправно работает на роутере, гарантированно</p>
<p>есть идеи?</p>
<p>UPD: перепроверено, запрет не может подобрать конфиги</p>
<p>UPD2 ожило само, мб маршруты или еще ччто не так было</p></td><td>2025-01-15T16:15:46.510Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Всем доброго. Вопрос по линуксу.</p>
<ol>
<li>Почему могут не загружаться приложения в терминале при запущенном запрете? Как только отключаю запрет проги грузят.</li>
<li>возможно ли раздать интернет с компьютера на Линукс на другие устройства то есть сделать маршрутизатор с запретом.</li>
</ol></td><td>2025-01-15T16:35:36.109Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>Why did you only test TLS 1.2? As far as I know, TLS 1.3 is not blocked in Russia, and upstream curl doesn’t support encrypted client hello, the HTTPS DNS record (type 65) of <code>discord.com</code> doesn’t even contain an <strong>ech</strong> field.</p>
<aside class="quote quote-modified" data-post="1" data-topic="12837">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/valdikss/48/2_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-encrypted-clienthello-ech-%D0%BD%D0%B0-cloudflare/12837">Блокировка Encrypted ClientHello (ECH) на Cloudflare</a> <a class="badge-category__wrapper " href="/c/internet-censorship-all-around-the-world/russia/12"><span data-category-id="12" style="--category-badge-color: #BF1E2E; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #0088CC;" data-parent-category-id="10" data-drop-close="true" class="badge-category --has-parent" title="Информация и обсуждение блокировок ресурсов в Российской Федерации"><span class="badge-category__name">Russia</span></span></a>
  </div>
  <blockquote>
    Только релевантная информация. Без обсуждений, мнений, оценочных суждений. Обсуждение: <a href="https://ntc.party/t/%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B7%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-ech-cloudflare/12732" class="inline-onebox">Обсуждение: Блокировка (замедление) ECH Cloudflare</a> 
5 ноября произошла блокировка соединений, использующих TLS Encrypted ClientHello (ECH). 
Cloudflare использует один и тот же внешний (скрывающий SNI) домен cloudflare-ech.com для всех сайтов, которые включили поддержку ECH. 
Блокировка осуществляется, если в пакете ClientHello установлен SNI = cloudflare-ech.com и есть ECH extension 
Только лишь SNI = cloudfl…
  </blockquote>
</aside>

<p>Moreover, I would rather use Zapret or other similar tools for all websites than disable encrypted client hello.<br>
Could you try</p>
<pre><code class="lang-auto">nfqws --qnum 0 --dpi-desync=fakeddisorder --dpi-desync-autottl=1:1-10 --dpi-desync-autottl6=1:1-10 \
--dpi-desync-fooling=md5sig --dpi-desync-split-pos=2 \
--dpi-desync-fakedsplit-pattern=0x474554202f20485454502f312e310d0a486f73743a2031302e302e302e310d0a0d0a
</code></pre>
<p>Lastly, I think “fakeddisorder” mode can be simpler:<br>
<code>fake 2nd segment, 2nd segment, fake 2nd segment, fake 1st segment, 1st segment, fake 1st segment</code><br>
----&gt;<br>
<code>fake 1st segment, 2nd segment, 1st segment</code> <em>or</em> <code>fake 1st segment, fake 2nd segment, 2nd segment, 1st segment</code></p></td><td>2025-01-16T09:28:19.461Z</td></tr><tr><td>lord_iu(Space Bar)</td><td><p>it wasnt Zapret’s fault, it was something else wrong with route or with bgp or with something else, none of possible tests was working, it was more like it was blocked by IP or even whole subnets</p></td><td>2025-01-16T13:12:55.205Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><p>The next time this thing happens, please  test other SNIs as well as <code>discord.com</code> :<br>
<code>curl --connect-to '::discord.com:' https://cdnjs.cloudflare.com -v -I</code></p></td><td>2025-01-17T06:31:37.376Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Datura_metel" data-post="4215" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ecb155/48.png" class="avatar"> Datura_metel:</div>
<blockquote>
<p>Lastly, I think “fakeddisorder” mode can be simpler:<br>
<code>fake 2nd segment, 2nd segment, fake 2nd segment, fake 1st segment, 1st segment, fake 1st segment</code><br>
----&gt;<br>
<code>fake 1st segment, 2nd segment, 1st segment</code> <em>or</em> <code>fake 1st segment, fake 2nd segment, 2nd segment, 1st segment</code></p>
</blockquote>
</aside>
<p>It doesn’t look simplier. Current version is tested against russian DPI.<br>
Previous variation “2nd, fake first, first, fake first” stopped working on some ISPs</p></td><td>2025-01-17T07:06:30.618Z</td></tr><tr><td>Datura_metel(Datura metel)</td><td><h1>I mean</h1>
"<i>fake 1st segment, 2nd segment, 1st segment</i>"
<h1>or</h1>
"<i>fake 1st segment, fake 2nd segment, 2nd segment, 1st segment</i>"</td><td>2025-01-17T07:22:47.282Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>а вот теоретический вопрос про дурение с badsum которое нето линух не то рутер не должен пропускать…</p>
<p>сам запрет на компе. на роутере его пока не получается</p>
<p>но суть = если к роутеру по проводу то стратегия с badsum не работает - нет ошибки бесконечный белый экран в хроме на блоченных сайтах (неблоченные норм)</p>
<p>а стого же компа к томуже роутеру но по вайвай и опять всё работает</p>
<p>подозреваю разница что wifi через bridge прикручен а провод “просто” switch и в этом и разница но что более другое может влиять? и может есть идеи что по ssh на рутере подкрутить чтоб одинаково стало?</p></td><td>2025-01-17T11:06:41.234Z</td></tr><tr><td>bolvan</td><td><p>некоторые ethernet адаптеры режут сами бэдсум через оффлоад<br>
и не везде это отключается<br>
типичный пример - медиатек<br>
генерить бадсум можно, а на прием режет железка</p></td><td>2025-01-17T11:33:31.027Z</td></tr><tr><td>Jnsjdd4(34)</td><td><p>Здравствуйте, подскажите может есть где-то понятная инструкция по тому как перенести хорошую стратегию Запрета на OpenWrt.<br>
Где-то тут или на гитхабе находил сборку запрета под винду с готовыми стратегиями, одна из них “30. Ультимейт конфиг ZL (разблокирует любые сайты, любые провайдеры)” показала себя отлично. Только с ней у меня завелся голосовой чат дискорда и вообще все сайты (кроме тех что по ip локнуты) поехали. Но на все устройства отдельно нет возможности запускать это вручную. Поставил на роутер прошивку wrt и на него дефолтный запрет (по инструкции <a href="https://github.com/remittor/zapret-openwrt/wiki/Installing-zapret%E2%80%90openwrt-package" class="inline-onebox" rel="noopener nofollow ugc">Installing zapret‐openwrt package · remittor/zapret-openwrt Wiki · GitHub</a>), с ним только ютаб отлично работает, дискорд без голосовухи и остальные сайты вообще не пашут.<br>
Вот бы стратегию со сборки перенести… Но как это сделать?</p>
<pre><code class="lang-auto">"30" {
            Invoke-ZapretStrategy -StrategyName "Ultimate Config ZL" -Arguments "--wf-tcp=80,443 --wf-udp=443,50000-50099 --filter-udp=443 --hostlist=""$LISTS\youtubeQ.txt"" --dpi-desync=fake --dpi-desync-fake-quic=""$BIN\quic_1.bin"" --dpi-desync-repeats=4 --new --filter-tcp=443 --hostlist=""$LISTS\youtubeGV.txt"" --dpi-desync=fakedsplit --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new --filter-tcp=443 --hostlist=""$LISTS\youtube.txt"" --dpi-desync=fake,multisplit --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=""$BIN\tls_clienthello_2.bin"" --dpi-desync-ttl=3 --new --filter-tcp=80 --hostlist=""$LISTS\other.txt"" --dpi-desync=fake,multisplit --dpi-desync-fooling=md5sig --new --filter-tcp=443 --hostlist=""$LISTS\other.txt"" --dpi-desync=fake,multisplit --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=""$BIN\tls_clienthello_2.bin"" --dpi-desync-ttl=5 --new --filter-tcp=443 --hostlist=""$LISTS\discord.txt"" --dpi-desync=fakedsplit --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new --filter-udp=443 --hostlist=""$LISTS\discord.txt"" --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=""$BIN\quic_2.bin"" --dpi-desync-repeats=8 --dpi-desync-cutoff=n2 --new --filter-udp=50000-50099 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=""$BIN\quic_1.bin"""
        }
</code></pre>
<p>Или может есть что-то подобное (готовая ультимативная стратегия) под wrt и инструкция с картинками?</p></td><td>2025-01-18T17:02:20.460Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Непонятно где в инструкции редактирование конфига? Если по классике ставить, то должен быть файл /opt/zapret/config . В нем редактируешь строчку NFQWS_OPT=“…” и туда переносишь свою стратегию без вот этих опций “–wf-tcp= --wf-udp=”<br>
И эти все пути “–dpi-desync-fake-quic=”“$BIN\quic_1.bin”“”" тоже нужно написать полностью в юникс стиле:<br>
–dpi-desync-fake-quic=/полный/путь/до/файла/quic_1.bin</p></td><td>2025-01-18T19:18:24.751Z</td></tr><tr><td>BlackRain(BlackRain)</td><td><p>Возможно уже обсуждалось, но извините, перечитывать много-тысяч-сообщений крыша поедет.<br>
Домены типа <code>rr1---sn-ug5onuxaxjvh-n8vs.googlevideo.com</code>, <code>rr2---sn-gvnuxaxjvh-ov1e.googlevideo.com</code> пробиваются.<br>
Домены типа <code>rr11---sn-n8v7znz7.googlevideo.com</code>, <code>rr12---sn-n8v7znly.googlevideo.com</code> не пробиваются.<br>
С одних редиректит на другие и в результате не работает. Есть ли способы пробить?<br>
windows 11</p></td><td>2025-01-19T05:55:54.640Z</td></tr><tr><td>TikTak(TikTak)</td><td><aside class="quote no-group" data-username="BlackRain" data-post="4224" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/blackrain/48/5384_2.png" class="avatar"> BlackRain:</div>
<blockquote>
<p>sn-gvnuxa</p>
</blockquote>
</aside>
<p>вот кстати помнится мне, что среди тысяч сообщений где то на форуме уже писали про конкретно этот пул серверов. что с этими “говнюхами” какая-то отдельная большая проблема есть</p></td><td>2025-01-19T09:14:00.938Z</td></tr><tr><td>Jnsjdd4(34)</td><td><p>Не, я понятия не имею как там с файлами работать. В настройках запрета есть пунк NFQWS options со строчками, где можно поменять значения и далее область для ввода остальных настроек “NFQWS_OPT”.<br>
Может есть где-то готовые стратегии под этот openwrt? Сам я не переведу с китайского на арабский, или какой там язык.</p></td><td>2025-01-19T10:35:24.877Z</td></tr><tr><td>BlackRain(BlackRain)</td><td><aside class="quote no-group" data-username="TikTak" data-post="4225" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/t/cc9497/48.png" class="avatar"> TikTak:</div>
<blockquote>
<p>с этими “говнюхами” какая-то отдельная большая проблема есть</p>
</blockquote>
</aside>
<p>У меня легко пробился. Пробиваются те, у которых есть “минус” и 4 символа после него. А другие не пойму как пробить.</p></td><td>2025-01-19T11:26:51.977Z</td></tr><tr><td>Taf-21(Anton)</td><td><pre><code class="lang-auto">--filter-udp=443 --hostlist=/opt/zapret/ipset/youtubeQ.txt --dpi-desync=fake --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --dpi-desync-repeats=4 --new 
--filter-tcp=443 --hostlist=/opt/zapret/ipset/youtubeGV.txt --dpi-desync=fakedsplit --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-ttl=4 --new 
--filter-tcp=443 --hostlist=/opt/zapret/ipset/youtube.txt --dpi-desync=fake,multisplit --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=3 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=3 --new 
--filter-tcp=80 --hostlist=/opt/zapret/ipset/other.txt --dpi-desync=fake,multisplit --dpi-desync-fooling=md5sig --new 
--filter-tcp=443 --hostlist=/opt/zapret/ipset/other.txt --dpi-desync=fake,multisplit --dpi-desync-split-seqovl=1 --dpi-desync-split-pos=1 --dpi-desync-fake-tls=/opt/zapret/files/fake/tls_clienthello_www_google_com.bin --dpi-desync-ttl=5 --new 
--filter-tcp=443 --hostlist=/opt/zapret/ipset/discord.txt --dpi-desync=fakedsplit --dpi-desync-split-pos=1 --dpi-desync-fooling=badseq --dpi-desync-repeats=10 --dpi-desync-autottl --new 
--filter-udp=443 --hostlist=/opt/zapret/ipset/discord.txt --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin --dpi-desync-repeats=8 --dpi-desync-cutoff=n2 --new 
--filter-udp=50000-50099 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --dpi-desync-fake-quic=/opt/zapret/files/fake/quic_initial_www_google_com.bin
</code></pre>
<p>Пробуйте. При этом учитывайте то, что файлы youtubeQ.txt, youtubeGV.txt, youtube.txt, other.txt и discord.txt вам необходимо поместить  по пути /opt/zapret/ipset/   . Взять их наверное можно там же где брали стратегию, или, если я правильно понимаю, они у вас и так есть и применялись в zapret под windows. В будущем данные файлы лучше хранить вообще не в папке zapret, чтобы при обновлении их не копировать снова на роутер.</p></td><td>2025-01-19T11:32:34.920Z</td></tr><tr><td>tehkos(TConst)</td><td><p>С файлами можно через программу WinSCP работать. Все равно тебе надо файлы загружать со всеми этими фейками и списками: quic_1.bin, youtubeQ.txt и прочими</p></td><td>2025-01-19T16:39:49.543Z</td></tr><tr><td>0x7f</td><td><p>есть ли возможность менять пакеты для домена, но не менять пакеты для поддомена того же домена?</p></td><td>2025-01-19T18:40:49.443Z</td></tr><tr><td>uwu(uwu)</td><td><p>заметил что datanoack не работает вместе с wi-fi<br>
по крайней мере на двух разных компах/провайдерах повторилось</p>
<p>при этом при подключении по проводу на другом пк пробивается (с роутерским nat), но может и совпадение… переподключать с беспровода на провод не было возможности(</p>
<p>а блин это написано в документации, извините пожалуйста)</p></td><td>2025-01-19T19:27:43.851Z</td></tr><tr><td>TikTak(TikTak)</td><td><p>Кстати, тут стало интересно, а в Китае 3апрет помогает против гфв? Может кто ездил в чайну или есть связь с нефритовыми товарищами.</p></td><td>2025-01-19T20:33:42.186Z</td></tr><tr><td>easyone11</td><td><p>В исключение поддомен добавь до проверь, на сколько помню по дебаглогу он проверяет в листах сначала сайт куда идёт запрос, постепенно опускаясь до верх.домена.<br>
Мне кажется так можно.</p></td><td>2025-01-20T05:04:49.647Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>по поводу ридми на гитхабе</p>
<p>в принципе нету про</p>
<pre><code class="lang-auto">NFQWS_OPT_DESYNC_HTTP=""
NFQWS_OPT_DESYNC_HTTPS=""
NFQWS_OPT_DESYNC_HTTP6=""
NFQWS_OPT_DESYNC_HTTPS6=""
</code></pre>
<p>и даже NFQWS_OPT_DESYNC превратился в NFQWS_OPT  это значит что старое неработает? или обратная оставлена совместимость но считается что вот эти зубодробительные строки с кучей new и filter <em>более-лучше</em>? вот для пониманья таки нет…</p>
<p>а ещё про ридми - про кинетик и\или keenetic тоже поудалялось (не ищется) отдано на откуп nfqws-keenetic?<br>
это к тому что не понимаю в упор как он из родных бинарников полностью несовместимый конфиг слепил? и /opt/zapret тоже нету, насколько понимаю чисто за счёт init.d всё работает… силён…<br>
но обратил внимание потому что там, тоже самому надо в 1 строку http и https умудриться разделить  = не для средних умов</p></td><td>2025-01-20T06:00:03.363Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="uwu" data-post="4231" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>заметил что datanoack не работает вместе с wi-fi<br>
по крайней мере на двух разных компах/провайдерах</p>
</blockquote>
</aside>
<p>вероятно на роутере аппаратный оффлоад<br>
по проводу он работает, по вафле нет. а линух режет</p></td><td>2025-01-20T06:11:55.590Z</td></tr><tr><td>bolvan</td><td><p>да, старое ушло<br>
новое более гибко<br>
и приближено к сути и к виндовой версии<br>
старым злоупотребляли, суя в куик дискорд</p>
<p>кинетики не поддерживаю, но на практике прикручивается с небольшими плясками</p></td><td>2025-01-20T06:14:05.225Z</td></tr><tr><td>bolvan</td><td><p>нет. хостлисты включают все поддомены без вариантов<br>
только если конкретные поддомены указать в эксклуд листе</p></td><td>2025-01-20T06:18:05.090Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>хммм</p>
<p>а наеборот думал чтоб в винду в виде файлу в томже каталоге придти <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"> но разные подходы…</p>
<p>с кинетиком , таки осилил 90% пролитого пота ушло на добычу нужной прошивки. а потом оказия = в дурном линухе тире на канает а нужно двоеточие в портах – попило это крови при переносе с винды</p></td><td>2025-01-20T06:23:28.209Z</td></tr><tr><td>bolvan</td><td><p>в другой теме на днях китаец отписался<br>
помогает против сни блокировок<br>
но у них есть еще ипбаны, в тч динамические</p></td><td>2025-01-20T08:17:36.473Z</td></tr><tr><td>0x7f</td><td><p>где сейчас брать курл с поддержкой тлс1,3 и квика? у меня курл 8.7.1-r1 для версии прошивки 23.05.5 и блокчек пишет он этот курл не поддерживает такое. я скачал даже курл <a href="https://github.com/sbwml/openwrt-curl-prebuilt/releases/tag/8.7.1" rel="noopener nofollow ugc">отсюда</a> но опенврт не даёт установить пакет из локального файла и всё равно скачивает из репы.</p></td><td>2025-01-21T10:39:10.002Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Если память есть на роутере, можешь статичный курл скачать, загрузить на роутер в любое место и использовать оттуда. А не статичный он линкуется к тому, что есть на опенврт, и поддержка квика зависит от библиотек на прошивке.</p></td><td>2025-01-21T12:30:20.088Z</td></tr><tr><td>0x7f</td><td><p>я не могу такой нагуглить, подскажи где его брать?</p></td><td>2025-01-21T14:18:09.645Z</td></tr><tr><td>tehkos(TConst)</td><td><p>Можешь здесь- <a href="https://github.com/stunnel/static-curl/releases/tag/8.11.1" class="inline-onebox">Release 8.11.1 · stunnel/static-curl · GitHub</a><br>
Сначала узнай архитектуру процессора своего роутера, потом выбери бинарник</p></td><td>2025-01-21T14:20:53.588Z</td></tr><tr><td>mihrutkin</td><td><p>Помогите, пожалуйста, переделать команду из Zapret windows под openwrt. Спасибо</p>
<p>start “zapret: general” /min “%BIN%winws.exe” --wf-tcp=80,443 --wf-udp=443,50000-50100 ^<br>
–filter-udp=443 --hostlist=“list-general.txt” --dpi-desync=fake --dpi-desync-repeats=6 --dpi-desync-fake-quic=“%BIN%quic_initial_www_google_com.bin” --new ^<br>
–filter-udp=50000-50100 --ipset=“ipset-discord.txt” --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d3 --dpi-desync-repeats=6 --new ^<br>
–filter-tcp=80 --hostlist=“list-general.txt” --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^<br>
–filter-tcp=443 --hostlist=“list-general.txt” --dpi-desync=fake,split --dpi-desync-autottl=2 --dpi-desync-repeats=6 --dpi-desync-fooling=badseq --dpi-desync-fake-tls=“%BIN%tls_clienthello_www_google_com.bin”</p></td><td>2025-01-21T17:36:30.107Z</td></tr><tr><td>0x7f</td><td><p>спасибо, даже странно что по запросу “curl with http3 tls 1.3 support” не удалось ничего найти.</p></td><td>2025-01-21T18:53:39.552Z</td></tr><tr><td>zxcn(zxcn)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> есть ли нормальная стратегия под tpws-socks или tpws для всего?<br>
в виртуалке ubuntu под qemu никак не могу осилить(мало знаний и то с ботом ai пытаюсь что-т сделать) направление трафика zapret по nfqws в polipo прокси сервер, он только подключается к dnscrypt минуя zapret либо подскажите по этому пожалуйста</p></td><td>2025-01-21T22:33:49.493Z</td></tr><tr><td>abc555</td><td><p>Хотел спросить. Замечаю что не которые делают так<br>
–filter-udp=443 --dpi-desync=fake --dpi-desync-ttl=2<br>
но разве udp использует ttl ? Ну то есть будет работать --dpi-desync-ttl или --dpi-desync-autottl если добавить для --filter-udp= ?</p></td><td>2025-01-22T08:06:40.027Z</td></tr><tr><td>bolvan</td><td><p>ttl относится к уровню л3. то есть ип</p></td><td>2025-01-22T11:39:42.356Z</td></tr><tr><td>zxcn(zxcn)</td><td><aside class="quote" data-post="4246" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/bc8723/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/4246">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    <a class="mention" href="/u/bolvan">@bolvan</a> есть ли нормальная стратегия под tpws-socks или tpws для всего? 
в виртуалке ubuntu под qemu никак не могу осилить(мало знаний и то с ботом ai пытаюсь что-т сделать) направление трафика zapret по nfqws в polipo прокси сервер, он только подключается к dnscrypt минуя zapret либо подскажите по этому пожалуйста
  </blockquote>
</aside>

<p>? ответ могу подождать если что) просто ответьте что нибудь)</p></td><td>2025-01-22T13:25:16.068Z</td></tr><tr><td>bolvan</td><td><p>Я не предоставляю стратегии</p></td><td>2025-01-22T16:22:21.969Z</td></tr><tr><td>abc555</td><td><p>Понял, спасибо. а я думал что для udp не нужен ttl, ну по типу подтверждение для него не нужно, рукопожатия нет, но всегда лучше спросить, так как в udp пакет толком вообще никогда не вникал.<br>
Ну а так всё работает на отлично, замечаний нет, огромнейшее спасибо, человек, который один на сколько там, на 8 миллиардов замутил такую тему для wrt ))</p></td><td>2025-01-22T16:48:09.722Z</td></tr><tr><td>uwu(uwu)</td><td><p>там даже с any protocol можно ttl ставить</p></td><td>2025-01-22T17:03:13.429Z</td></tr><tr><td>bolvan</td><td><p>Не 1, по крайней мере есть еще byedpi.</p>
<p><a href="https://upload.wikimedia.org/wikipedia/commons/6/60/IPv4_Packet-en.svg">https://upload.wikimedia.org/wikipedia/commons/6/60/IPv4_Packet-en.svg</a></p>
<p>udp прост как 2 копейки<br>
<a href="https://www.techtarget.com/rms/onlineimages/networking-udp.png">https://www.techtarget.com/rms/onlineimages/networking-udp.png</a></p></td><td>2025-01-22T17:04:51.134Z</td></tr><tr><td>abc555</td><td><p>ну пусть 3 человека, включая Валдикса на 8 миллиардов ))<br>
пиндосы потихоньку изучают вашу прогу, идут у них там обсуждения, я особо в них не лезу, просто читаю, но некоторым помогло из них, некоторым я кинул ссылку на вашу прогу, не на сборку не понятно от кого, не знаю, вообще можно ссылки давать ? просто я стараюсь чтоб не подставить, ну мало ли на всякий случай спрашиваю, а то ещё разрекламию и как полезут со всей планеты ))<br>
а на фоне всяких разных сборок вы не видимы<br>
а я на многих форумах, в разных частях планеты и они знают меня давно и я как доверенное лицо там, к моему мнению они прислушиваются</p></td><td>2025-01-22T17:24:54.196Z</td></tr><tr><td>bolvan</td><td><p>У пиндосов вроде ничего не блокируют.<br>
Прога свободная, любой может нагуглить, но излишне рекламировать я бы не стал.<br>
Кто найдет - пусть найдет, а нагонять народ точно не надо</p></td><td>2025-01-22T17:47:07.506Z</td></tr><tr><td>abc555</td><td><p>Понял, поэтому и спросил, просто они натыкаются на сборки, проходят мимо и думают что тот чел он и создатель. Многие из пиндосов, вообще боятся если видят ру язык, сразу губы надувают, я часто с ними кусался по этому поводу, но победа всегда была на моей стороне, хоть их там и 20 против меня одного, по итогу все сливались, сказать им было нечего, мои аргументы были не оспоримые, просто к чему я спросил, может данаты они кинут, всё таки пиндосы с капустой, а так будут кидать сборщикам. которые поразитируют на Вашей теме, а это я считаю не правильно, но повторюсь, без Вашего одобрения не буду рекламировать на всякий случай, может так невзначай, чтоб никто ничего не понял, я так обычно делаю</p></td><td>2025-01-22T17:59:19.388Z</td></tr><tr><td>Quqas(Quqas)</td><td><aside class="quote no-group" data-username="bolvan" data-post="4221" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>некоторые ethernet адаптеры режут сами бэдсум через оффлоад<br>
и не везде это отключается<br>
типичный пример - медиатек<br>
генерить бадсум можно, а на прием режет железка</p>
</blockquote>
</aside>
<p>у меня как раз ралинк-медиатек рутер<br>
но что странно - когда таки накатил на сам рутер по проводу как и по вайваю стало открываться хоть в  стратегиях <a href="https://github.com/Anonym-tsk/nfqws-keenetic" rel="noopener nofollow ugc">nfqws-keenetic</a> те же badsum (с компа скопировано) но это если на компе выключать winws. а с включенным на компе всё также не открывает - хотя казалось бы…</p></td><td>2025-01-23T05:18:09.316Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="Quqas" data-post="4258" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>стратегиях <a href="https://github.com/Anonym-tsk/nfqws-keenetic">nfqws-keenetic</a></p>
</blockquote>
</aside>
<p>Судя по репозиторий там нет стратегий, это что-то типо однокнопочного решения с gui. Где все запускается и прописывается автоматически, стратегия просто ищется через блокчек и не факт, что она подойдёт везде. Лучше уж просто из основного репозитория тогда запрет на кинетик развернуть</p></td><td>2025-01-23T06:43:39.288Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>ну во первых стратегии там есть<br>
конфиг не пустой<br>
а во вторых они и не нужны. мне. у меня свои есть на компе. осталось после мучительной установки на рутер их скопировать<br>
ну и таки кинетиковский варик удобней. всё автоматом, запрет даже для openwrt тока руками - и чистить ещё потом от лишнего</p></td><td>2025-01-23T07:21:39.194Z</td></tr><tr><td>bolvan</td><td><p>Ключевое слово - “на прием”. На передачу badsum не режется. Поэтому с роутера будет работать, за ним - нет.</p></td><td>2025-01-23T07:28:12.143Z</td></tr><tr><td>litev</td><td><p>Начал настраивать новый роутер, а запрет опять поменялся.<br>
Пока настраиваю, столкнулся со странной работой обхода. На ноуте всё стало работать как положено, с телефона же работает только ютуб, сайты заглушку не выдают, но и не грузятся.<br>
Из особенностей только залоченный на 65ттл в роутере<br>
В чем может быть проблема?</p></td><td>2025-01-24T05:09:22.619Z</td></tr><tr><td>rkn-chan</td><td><aside class="quote no-group" data-username="bolvan" data-post="4239" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>в тч динамические</p>
</blockquote>
</aside>
<p>если речь идет про этот пост, то zapret по идеи должен предотврощать динамические ip блоки? ситуация с hetzner это тоже подтверждала, а теперь еще с уст самого китайца</p>
<aside class="quote no-group" data-username="xijinping" data-post="19" data-topic="14566">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/x/977dab/48.png" class="avatar"><a href="https://ntc.party/t/github-%D0%B2%D1%81%D1%91-%D1%81-vpn-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82/14566/19">GitHub всё? С VPN работает</a></div>
<blockquote>
<p>GFW has three corresponding solutions for different websites. The first is DNS pollution, the second is SNI blocking, and the third is IP black hole.</p>
<p>In addition to these three conventional processing solutions, it will also perform refined processing on some special websites, such as github steam, which is widely used by everyone. Directly blocking SNI will cause a great response.</p>
<p><strong>They hope to create the illusion that the website can be accessed but is stuck and disconnected. It is a line problem, and put the blame on the website. It will use this method: SNI intermittent packet loss.</strong></p>
</blockquote>
</aside>
<p>жирным шрифтом у меня точно такая же проблема была с гитхабом где он временно блочился по ip, а если засунуть его в hostlist то проблема исчезала</p></td><td>2025-01-24T08:42:36.734Z</td></tr><tr><td>bolvan</td><td><p>zapret лишь создает аномалии трафика.<br>
Какой будет на это реакция блокирующей системы зависит от нее самой.<br>
При удачном раскладе предотвратит, но это все зависит от алгоритма на той стороне</p></td><td>2025-01-24T09:24:28.146Z</td></tr><tr><td>yatolkosprosit</td><td><p>Подскажите, возможно ли настроить нормальную работу yt-dlp и zapret? Zapret использую еще старой версии по принципу “если работает - не лезь”. Ютуб работает в браузере отлично. Но вот с yt-dlp - проблема. Получаю примерно такие разультаты:</p>
<blockquote>
<p>HTTPSConnectionPool(host=‘<a href="http://rr5---sn-8ph2xajvh-8v1l.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-8ph2xajvh-8v1l.googlevideo.com</a>’, port=443): Read timed out. (read timeout=20.0)</p>
</blockquote>
<p>или</p>
<blockquote>
<p>Requested format is not available. Use --list-formats for a list of available formats</p>
</blockquote>
<p>Но этот формат там есть. Это видно из результатов команды yt-dlp -F<br>
Приходилось запускать yt-dlp по 5-10 раз, чтобы скачать видео. Но в последнее время даже так не получается.<br>
Есть какое-то решение проблемы?</p></td><td>2025-01-24T17:19:46.095Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="4265" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Приходилось запускать yt-dlp по 5-10 раз</p>
</blockquote>
</aside>
<p>использую</p>
<details>
<summary>
media-downloader</summary>
<p><a href="https://github.com/mhogomchungu/media-downloader" class="inline-onebox">GitHub - mhogomchungu/media-downloader: Media Downloader is a Qt/C++ front end to yt-dlp, youtube-dl, gallery-dl, lux, you-get, svtplay-dl, aria2c, wget and safari books..</a></p>
</details>
<p>он тоже юзает yt-dlp, но сам запускает дозакачку, не надо тыкаться в ручном режиме<br>
PS<br>
и при запуске он сам обновляет yt-dlp до актуальной</p></td><td>2025-01-24T17:28:49.371Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>тытруб активно, сам по себе без всяких чебурнил блочит просмотры из плееров и прочие даунлодеры и даже в браузере до кровавого поноса хочет чтоб ты в акк зашёл. так что дело может быть в этом</p></td><td>2025-01-24T18:54:23.547Z</td></tr><tr><td>rkn-chan</td><td><aside class="quote no-group" data-username="yatolkosprosit" data-post="4265" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>Requested format is not available. Use --list-formats for a list of available formats</p>
</blockquote>
</aside>
<p>это проблема парсера, на стороне ютуба. yt-dlp часто обновлять нужно, у них свои кошки-мышки</p>
<aside class="quote no-group quote-modified" data-username="yatolkosprosit" data-post="4265" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/y/aca169/48.png" class="avatar"> yatolkosprosit:</div>
<blockquote>
<p>HTTPSConnectionPool(host=‘<a href="http://rr5---sn-8ph2xajvh-8v1l.googlevideo.com" rel="noopener nofollow ugc">rr5—sn-8ph2xajvh-8v1l.googlevideo.com</a>’, port=443): Read timed out. (read timeout=20.0)</p>
</blockquote>
</aside>
<p>такое у меня лечилось увеличением репитов. можно через while true do curl проверить <span class="spoiler">(может кто-то лучше что нибудь посоветует кроме этой нубятины)</span> чтобы наверняка выяснить есть ли просидание, а просидал он у меня на</p>
<blockquote>
<p>&gt; accept: */*</p>
</blockquote>
<p>в loop с короткими sleep виднее сколько репитов нужно</p></td><td>2025-01-24T19:34:17.911Z</td></tr><tr><td>i-no(...)</td><td><aside class="quote no-group" data-username="rkn-chan">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/rkn-chan/48/13863_2.png" class="avatar"> rkn-chan:</div>
<blockquote>
<p>может кто-то лучше что нибудь посоветует</p>
</blockquote>
</aside>
<p>Лучше или нет — трудно сказать, но из списка делаю примерно так:</p>
<p><code>cat ggc6.txt | tr -d '\r' | while read hhh; do echo $hhh; curl -A "$UA" -ksLIm4 "https://$hhh" -w 'Timings:%{time_connect},%{time_appconnect},%{time_total}\n' 2&gt;&amp;1 | grep "^HTTP\|^Timings" ; done</code></p>
<details>
<summary>
Простыня</summary>
<pre><code class="lang-auto">rr1---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.027522,0.059996,0.080473
rr2---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.026556,0.058089,0.078283
rr3---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.026323,0.058395,0.078253
rr4---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.025825,0.057387,0.077740
rr5---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.025694,0.057009,0.077050
rr6---sn-8ph2xajvh-8v1l.googlevideo.com
HTTP/1.1 404 Not Found
Timings:0.026838,0.059086,0.079772
rr7---sn-8ph2xajvh-8v1l.googlevideo.com
Timings:0.000000,0.000000,4.001115
rr8---sn-8ph2xajvh-8v1l.googlevideo.com
Timings:0.000000,0.000000,4.001628
</code></pre>
</details>
<p>С большим кол-вом попыток можно даже графики распределения построить ))</p>
<p>Можно поклевать неткатом:</p>
<p><code>cat ggc6.txt | tr -d '\r' | while read hhh; do nc -uzw1 $hhh 443; done</code></p>
<p>Выводится простыночка из строк вида</p>
<p><code>Connection to rr1---sn-8ph2xajvh-8v1l.googlevideo.com (2a00:1248:4182:4::c) 443 port [udp/https] succeeded!</code></p>
<p>и по динамике генерации этих строк можно попытаться что-то понять. Для tcp соответственно без <code>u</code><br>
Если интересен какой-то один хост, то можно в цикле поклевать так</p>
<p><code>for((i=100;i--;)); do nc -zw1 rr1---sn-8ph2xajvh-8v1l.googlevideo.com 443 2&gt;&amp;1 | grep succeed; done | wc -l</code></p>
<p>чтобы понять, что хост бодрый, что кол-во попыток совпадает с тем, что насчитал <code>wc</code><br>
При необходимости использую <code>time</code><br>
Такой себе простецкий tcping или udping.</p>
<p>Этим же методом отделяем ответившие хосты или айпи от мертвых, редиректя радостные вскрикивания нетката в файл или для передачи другому дятлу.</p>
<p>У кого линуксов нет, все прекрасно делается в cygwin из винбандла.</p></td><td>2025-01-26T09:38:09.206Z</td></tr><tr><td>AnyWay(Иван)</td><td><p>Всем привет! После включения Программного flow offloading у меня хорошая скорость, примерно 500 Мбит, а без примерно 350 Мбит, разница большая. Но из-за него на компе не грузит превью видео на Ютубе (если его отключить, то все отлично), на других устройствах все супер. Может кто знает как это исправить?</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/cfce96cf7af494780203f9cc224e33dd71deb8aa.jpeg" data-download-href="https://ntc.party/uploads/default/cfce96cf7af494780203f9cc224e33dd71deb8aa" title="flow"><img src="zapret-обсуждение-726/cfce96cf7af494780203f9cc224e33dd71deb8aa_2_670x500.jpeg" alt="flow" data-base62-sha1="tElrZy3EsmhGZVlLUVv1ZO0WizU" width="670" height="500" srcset="zapret-обсуждение-726/cfce96cf7af494780203f9cc224e33dd71deb8aa_2_670x500.jpeg, zapret-обсуждение-726/cfce96cf7af494780203f9cc224e33dd71deb8aa_2_1005x750.jpeg 1.5x, zapret-обсуждение-726/cfce96cf7af494780203f9cc224e33dd71deb8aa.jpeg 2x" data-dominant-color="F3F3F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">flow</span><span class="informations">1158×863 161 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</div>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ed3bf0b0276c05b5bd6d9b006291526849e65189.jpeg" data-download-href="https://ntc.party/uploads/default/ed3bf0b0276c05b5bd6d9b006291526849e65189" title="yt"><img src="zapret-обсуждение-726/ed3bf0b0276c05b5bd6d9b006291526849e65189_2_690x231.jpeg" alt="yt" data-base62-sha1="xQFA4gUMOsEt9W8IfDrdCj1ksgF" width="690" height="231" srcset="zapret-обсуждение-726/ed3bf0b0276c05b5bd6d9b006291526849e65189_2_690x231.jpeg, zapret-обсуждение-726/ed3bf0b0276c05b5bd6d9b006291526849e65189_2_1035x346.jpeg 1.5x, zapret-обсуждение-726/ed3bf0b0276c05b5bd6d9b006291526849e65189_2_1380x462.jpeg 2x" data-dominant-color="2C2C2C"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">yt</span><span class="informations">2518×845 253 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</div></td><td>2025-01-26T20:02:27.079Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="AnyWay" data-post="4280" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/a/47e85d/48.png" class="avatar"> AnyWay:</div>
<blockquote>
<p>Может кто знает как это исправить?</p>
</blockquote>
</aside>
<p>выключить на роутере и переустановить запрет, при переустановки через install_easy.sh он спросит включать ли оффлоадинг, вот там включай.</p></td><td>2025-01-27T03:30:11.951Z</td></tr><tr><td>bolvan</td><td><p>В настройках интерфейса luci нельзя включать. Нужно в самом запрете</p></td><td>2025-01-27T07:30:25.893Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>В последнюю неделю снова столкнулся с проблемой, что на моей конфигурации Запрета ролики начинают работать после двух-трех перезагрузок, идет белая полоска загрузки, сбрасывается и появляется кружок загрузки. Идей больше нет, как можно усилить или улучшить профили применительно к Ютубу.<br>
У кого Ютуб работает на Запрете без проблем - пожалуйста, поделитесь своими профилями Запрета применительно к Ютубу.</p>
<hr>
<p>У меня такие профили:</p>
<pre><code class="lang-auto">--filter-tcp=443 --hostlist="%~dp0files\list-youtube.txt" --dpi-desync=fake,multisplit --dpi-desync-split-pos=1,midsld --dpi-desync-repeats=11 --dpi-desync-fooling=datanoack --dpi-desync-fake-tls="%~dp0files\tls_clienthello_www_google_com.bin" --new ^

--filter-udp=443 --hostlist="%~dp0files\list-youtube.txt" --dpi-desync=fake --dpi-desync-repeats=7 --dpi-desync-fake-quic="%~dp0files\quic_initial_www_google_com.bin" --new ^
</code></pre>
<p>Пробовал играть с repeats - бесполезно. Пробовал заменить datanoack на другие дурилки - тоже бесполезно.</p></td><td>2025-03-09T06:24:36.693Z</td></tr><tr><td>easyone11</td><td><p>list-youtube.txt<br>
покажи что там<br>
PS<br>
вообще самый лучший способ понять, включить дебаглог и посмотреть куда там ломится, когда проблема</p></td><td>2025-03-09T06:49:15.810Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">youtube.com
googlevideo.com
youtu.be
ytimg.com
ggpht.com
googleusercontent.com
googleapis.com
i.ytimg.com
yt3.ggpht.com
youtubei.googleapis.com
yt4.ggpht.com
ytimg.l.google.com
nhacmp3youtube.com
jnn-pa.googleapis.com
gvt1.com
play.google.com
yt.be
youtube-ui.l.google.com
youtubeembeddedplayer.googleapis.com
youtube-nocookie.com
youtube-ui.l.google.com
yt-video-upload.l.google.com
wide-youtube.l.google.com
yt4.ggpht.com

</code></pre>
</details></td><td>2025-03-09T07:02:43.737Z</td></tr><tr><td>easyone11</td><td><p>попробуй такой, но лучше дебагом посомтри</p>
<details>
<summary>
Спойлер</summary>
<p><a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a><br>
<a href="http://google.com" rel="noopener nofollow ugc">google.com</a><br>
<a href="http://googleapis.com" rel="noopener nofollow ugc">googleapis.com</a><br>
<a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a><br>
youtu.be<br>
<a href="http://ytimg.com" rel="noopener nofollow ugc">ytimg.com</a><br>
<a href="http://ggpht.com" rel="noopener nofollow ugc">ggpht.com</a><br>
<a href="http://googleusercontent.com" rel="noopener nofollow ugc">googleusercontent.com</a><br>
<a href="http://gvt1.com" rel="noopener nofollow ugc">gvt1.com</a><br>
<a href="http://youtube-nocookie.com" rel="noopener nofollow ugc">youtube-nocookie.com</a><br>
<a href="http://youtubeeducation.com" rel="noopener nofollow ugc">youtubeeducation.com</a><br>
<a href="http://youtubekids.com" rel="noopener nofollow ugc">youtubekids.com</a><br>
yt.be<br>
<a href="http://gstatic.com" rel="noopener nofollow ugc">gstatic.com</a></p>
</details></td><td>2025-03-09T07:12:48.036Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Тут ещё вопрос, есть ли смысл домен вынести отдельно:<br>
–filter-tcp=443 --hostlist-domains=<a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> --dpi-desync=multidisorder --dpi-desync-split-seqovl=1 --dpi-desync-split pos=1,host+2,sld+2,sld+5,sniext+1,sniext+2,endhost-2 --dpi-desync-fooling=none</p>
<p>У меня почему-то после этого профиля остальные не подключаются.</p></td><td>2025-03-09T07:34:32.349Z</td></tr><tr><td>easyone11</td><td><p>Не особо понимаю что ты имеешь ввиду и зачем это делать, в 3ий раз говорю что дебаглог поможет, попробуй его посмотреть, по профилям он тоже даст  информацию.</p>
<p>В целом запрет смотрит есть ли сайт для дурения в списке сверху вниз по строкам стратегий, поэтому сначала (сверху) идут специфические профили (дерения только для ютуба или только для дискорда и тд) потом идут общие стратегии на остальных сайтов.<br>
Последняя строчка должна быть без --new, тем самым обозначив что дальше профилей нет, если у тебя нет --new после 1го профиля то на сколько понимаю другие и не будут работать.</p>
<p>Если у тебя в первой стратегии tcp есть <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a>, то для других профилей tcp он применяться не будет, но будут другие сайты которых нет в первой строке стратегии.<br>
PS<br>
могу где то ошибаться, на 100% знает всё только болван</p></td><td>2025-03-09T07:58:26.601Z</td></tr><tr><td>Ori</td><td><p>На гуглвидео же вроде stateless давно включен, есть ли там смысл в отправке фейка? У меня вот так, например:</p>
<pre><code class="lang-auto">--filter-tcp=443 --hostlist-domains=googlevideo.com --dpi-desync=multisplit --dpi-desync-split-pos=1,midsld --dpi-desync-split-seqovl=1 --new ^
</code></pre>
<p>А все остальные домены ютуба в основном хостлисте.</p></td><td>2025-03-09T20:03:27.914Z</td></tr><tr><td>kulickol</td><td><p>У меня такой работает в PBR на Openwrt для ютубчика:<br>
<a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> <a href="http://google.com" rel="noopener nofollow ugc">google.com</a> <a href="http://googlevideo.com" rel="noopener nofollow ugc">googlevideo.com</a> <a href="http://googleapis.com" rel="noopener nofollow ugc">googleapis.com</a> <a href="http://gstatic.com" rel="noopener nofollow ugc">gstatic.com</a> <a href="http://ggpht.com" rel="noopener nofollow ugc">ggpht.com</a> <a href="http://ytimg.com" rel="noopener nofollow ugc">ytimg.com</a></p></td><td>2025-03-09T20:14:22.722Z</td></tr><tr><td>kulickol</td><td><p>А это режу:<br>
/crashlyticsreports-pa.googleapis.com/firebaseinstallations.googleapis.com/firebaseremoteconfig.googleapis.com/firebaselogging.googleapis.com/firebaselogging-pa.googleapis.com/notifications-pa.googleapis.com/footprints-pa.googleapis.com/prod-lt-playstoregatewayadapter-pa.googleapis.com/androidtvwatsonfe-pa.googleapis.com/geller-pa.googleapis.com/optimizationguide-pa.googleapis.com/playatoms-pa.googleapis.com/content-autofill.googleapis.com/</p></td><td>2025-03-09T20:16:47.752Z</td></tr><tr><td>uwu(uwu)</td><td><aside class="quote no-group" data-username="Zanoni" data-post="4283" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p><code>--filter-udp=443 --hostlist="%~dp0files\list-youtube.txt"</code></p>
</blockquote>
</aside>
<p>а у кого-нибудь впринципе quic работает корректно с ggc?</p>
<p>я у себя проверил, через curl --http3-only сервер пробивается (и в вайршарке все хорошо)<br>
но если заходить через браузер, то , судя по вайршарку, там даже попыток лезть через quic нет, он сразу стартует с tcp и при неудачных попытках продолжает по нему долбиться. одинаково что в хроме, что в лисе</p>
<p>т.е даже первичного запроса по udp из браузера нет, как будто на самом ggc quic програмно выключен.<br>
при этом весь остальной интерфейс ютуба, основной сайт, картинки итд работает по quic (но оно впринципе не фильтруется на тспу по h3)</p>
<details>
<summary>
Спойлер</summary>
<p>если это не так, и у остальных работает, то единственное предположение, то что у меня с самого начала блокировок был quic отключен принудительно и гугло-система это запомнила</p>
</details>
<p>потестил немного:<br>
с пиринговых серверов отдает по quic видео, с местных нет. но возможно, так и должно быть.</p></td><td>2025-03-09T20:43:06.641Z</td></tr><tr><td>kulickol</td><td><p>у меня quic отлично работает и через warp и через proton</p></td><td>2025-03-09T21:41:46.820Z</td></tr><tr><td>uwu(uwu)</td><td><p>обратись вот к этому серверу через свой божественный vpn по quic любым доступным тебе способом в браузере</p>
<p><code>https://rr1---sn-8ph2xajvh-3hfl.googlevideo.com</code><br>
если например в запрете убрать tcp, то ggc не будет открываться</p>
<p>предполагаю, что есть сервера, которые впринципе не отдают видео через quic (и это не блокировка на тспу, а особенность самого сервера)</p></td><td>2025-03-09T22:30:54.880Z</td></tr><tr><td>Ori</td><td><p>У меня работает.</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/bb205cc1ed441d1261a68df13b592265eb4ddb37.png" data-download-href="https://ntc.party/uploads/default/bb205cc1ed441d1261a68df13b592265eb4ddb37" title="55555"><img src="zapret-обсуждение-726/bb205cc1ed441d1261a68df13b592265eb4ddb37.png" alt="55555" data-base62-sha1="qHoCCDC92aKBaVLwJY29ngFci6b" width="690" height="479" data-dominant-color="181818"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">55555</span><span class="informations">979×680 21.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/925ef82ae1d968d18ae62c83f55b61ba1fb24b42.png" data-download-href="https://ntc.party/uploads/default/925ef82ae1d968d18ae62c83f55b61ba1fb24b42" title="66"><img src="zapret-обсуждение-726/925ef82ae1d968d18ae62c83f55b61ba1fb24b42_2_690x58.png" alt="66" data-base62-sha1="kSRbgrei7Ouprfl0COYXae8IgQa" width="690" height="58" srcset="zapret-обсуждение-726/925ef82ae1d968d18ae62c83f55b61ba1fb24b42_2_690x58.png, zapret-обсуждение-726/925ef82ae1d968d18ae62c83f55b61ba1fb24b42_2_1035x87.png 1.5x, zapret-обсуждение-726/925ef82ae1d968d18ae62c83f55b61ba1fb24b42_2_1380x116.png 2x" data-dominant-color="2A2A2E"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">66</span><span class="informations">1737×148 10.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2025-03-10T01:14:56.851Z</td></tr><tr><td>spv82</td><td><p>Хмм…</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a.png" data-download-href="https://ntc.party/uploads/default/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a" title="pngout"><img src="zapret-обсуждение-726/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a_2_673x500.png" alt="pngout" data-base62-sha1="bWvQb4RQU3xxfxxnH8ooDWVRsOC" width="673" height="500" srcset="zapret-обсуждение-726/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a_2_673x500.png, zapret-обсуждение-726/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a_2_1009x750.png 1.5x, zapret-обсуждение-726/53b53248bbe9c3b8d40ebed2ffd325ddbe7d041a.png 2x" data-dominant-color="314049"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">pngout</span><span class="informations">1045×776 145 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details></td><td>2025-03-10T04:59:08.060Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Спасибо, Ори, Ваш вариант лучше для гуглвидео!</p></td><td>2025-03-10T05:35:57.614Z</td></tr><tr><td>easyone11</td><td><p>со стратой Ори ушла проблема?<br>
у меня через фейк проблем нет, но видимо  как обычно это индивидуально</p></td><td>2025-03-10T05:58:05.277Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="uwu" data-post="4292" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>а у кого-нибудь впринципе quic работает корректно с ggc?</p>
</blockquote>
</aside>
<p>Работает. Но не на всех провайдерах.</p>
<p><img src="zapret-обсуждение-726/be025f5e430dd2397f03d8cdc5cbfe0859cc3d5a_2_690x12.jpeg" alt="aaa" data-base62-sha1="r6TNKR2Dxn49mAOPZpj2bLrarMe" width="690" height="12" srcset="zapret-обсуждение-726/be025f5e430dd2397f03d8cdc5cbfe0859cc3d5a_2_690x12.jpeg, zapret-обсуждение-726/be025f5e430dd2397f03d8cdc5cbfe0859cc3d5a_2_1035x18.jpeg 1.5x, zapret-обсуждение-726/be025f5e430dd2397f03d8cdc5cbfe0859cc3d5a.jpeg 2x" data-dominant-color="E5E5E5"></p></td><td>2025-03-10T06:24:34.000Z</td></tr><tr><td>Zanoni(Zanoni)</td><td><p>Пока работает. Но утром всегда почему-то лучше Ютуб работает. Надо вечером проверять.</p></td><td>2025-03-10T06:52:56.451Z</td></tr><tr><td>uwu(uwu)</td><td><p>хмм тогда у меня нет идей, почему проходя через один и тот же тспу на местных у меня quic не работает, а на пиринговых в мск - работает (правда при прямом переходе тоже сваливается на tcp)<br>
протестил из под виртуалки тоже самое, и что самое забавное из под vpn тоже самое. тоже форсится tcp, проверил на 10 разных стратегиях для quic, для которых curl проходит.</p>
<p>как будет свободное время, потыкаю еще запрет, но может тут что-то глобально оффнуто.</p>
<aside class="quote no-group" data-username="Zanoni" data-post="4300" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/z/e99b99/48.png" class="avatar"> Zanoni:</div>
<blockquote>
<p>Пока работает. Но утром всегда почему-то лучше Ютуб работает. Надо вечером проверять.</p>
</blockquote>
</aside>
<p>можешь еще мою стратегию с фейком проверить, она (у меня по крайней мере) работает быстро:<br>
<code>--filter-tcp=443 --hostlist="%~dp0\youtube.txt" --dpi-desync=fake,fakedsplit --dpi-desync-split-pos=1 --dpi-desync-fake-tls=0x16030102920100028e03035672ea15594162966e8a144297c497ddace5d546af7a4a0414a946fa52023cf720b0220c217abb1db321abbf01985cf3d07c61367c2ba5eff307b0f6f042448077 --dpi-desync-ttl=4</code><br>
ttl тебе нужно подобрать самому минимальный, хостлист для yt и ggc тут общий</p></td><td>2025-03-10T07:06:05.501Z</td></tr><tr><td>uwu(uwu)</td><td><p>напишу наблюдения с quic<br>
единственный вариант при котором работает quic - если например хром запустить с параметром запуска:<br>
<code> --origin-to-force-quic-on=rr1---sn-8ph2xajvh-3hfl.googlevideo.com:443,rr2---sn-8ph2xajvh-3hfl.googlevideo.com:443</code>  ( обращаю внимание, что тогда tcp для них будет полностью выключен)</p>
<p>в этом случае по консоли и вайршарку вижу, что quic с перечисленными ggc работает</p>
<p>но есть некоторые странности:</p>
<ol>
<li>при прямой ссылке по ggc quic не работает</li>
<li>такое ощущение, что во всех случаях, где quic не работает (например пункт1) некорректно работает запрет, потому что если указать <code>--dpi-desync-repeats=15</code> , то я не вижу в шарке 15 отправленных пакетов</li>
</ol>
<p>15 отправленных пакетов появляются например при curl или во время обычного просмотра видео</p>
<p>немного скринов:</p>
<ul>
<li>не срабатывание повторов в запрете при прямом переходе на ggc:</li>
</ul>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/ce74b3e0723d93f31ecbc52869979dde85c52e02.png" data-download-href="https://ntc.party/uploads/default/ce74b3e0723d93f31ecbc52869979dde85c52e02" title="изображение"><img src="zapret-обсуждение-726/ce74b3e0723d93f31ecbc52869979dde85c52e02.png" alt="изображение" data-base62-sha1="tsoonma65q7fpg2ZSIxoMOkOgT0" width="642" height="248"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">642×248 7.95 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>шарк:</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/f43b407bb664874c651a34d1f42edd2ff3f82df2.png" data-download-href="https://ntc.party/uploads/default/f43b407bb664874c651a34d1f42edd2ff3f82df2" title="изображение"><img src="zapret-обсуждение-726/f43b407bb664874c651a34d1f42edd2ff3f82df2.png" alt="изображение" data-base62-sha1="yQzrRohPk1T4OXWptH76xmKB0nE" width="690" height="86" data-dominant-color="CFE1F0"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1645×206 7.92 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<ul>
<li>обычное воспроизведение видео:</li>
</ul>
<details>
<summary>
Спойлер</summary>
<p><img src="zapret-обсуждение-726/e380d501f47dcc0aa833487685421d0741d3076e.png" alt="изображение" data-base62-sha1="wsApfjuU5rZTUFHvUmxN9h8JBSe" width="556" height="89"></p>
</details>
<p>тут повторы есть</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/4349dfc57239b307bee1681650f73565f94f1822.png" data-download-href="https://ntc.party/uploads/default/4349dfc57239b307bee1681650f73565f94f1822" title="изображение"><img src="zapret-обсуждение-726/4349dfc57239b307bee1681650f73565f94f1822.png" alt="изображение" data-base62-sha1="9BggqU1Ly7J0NruyNyIClHgKp9w" width="690" height="159" data-dominant-color="CCDAEA"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1601×370 12.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<ul>
<li>срабатывание повторов в команде curl</li>
</ul>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/99f8e2ff94a703b9cb087b24298078773b6df01f.png" data-download-href="https://ntc.party/uploads/default/99f8e2ff94a703b9cb087b24298078773b6df01f" title="изображение"><img src="zapret-обсуждение-726/99f8e2ff94a703b9cb087b24298078773b6df01f.png" alt="изображение" data-base62-sha1="lY6hZUM0tVyGjasYx0BCjEzH02b" width="690" height="148" data-dominant-color="CFE3F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">1677×361 9.46 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>фейк можно любой подкидывать, поведение одинаковое, что на гугло-фейке. что на вконтакте<br>
если подскажете, как сохранить debug в файл, буду признателен, а то из cmd смотреть не удобно, но там тоже замечал что-то странное<br>
как зафорсить лису на quic пока не знаю, в ней совсем не работает</p></td><td>2025-03-14T22:49:27.749Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="uwu" data-post="4302" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>как сохранить debug в файл</p>
</blockquote>
</aside>
<p><code>--debug</code> позволяет выводить подробный лог действий на консоль, в <strong>SYSLOG</strong> или в указанный файл через <code>--debug=@/opt/zapret/log.txt</code>. Может быть важен порядок следования опций. <code>--debug</code> лучше всего указывать в самом начале.</p></td><td>2025-03-15T04:27:09.082Z</td></tr><tr><td>uwu(uwu)</td><td><p>а на винде?<br>
я попробовал указать --debug=@путь к файлу, дебаг пишется в текстовый файл, но все сайты перестают открываться dns probe<br>
в логах шарка куча syn ack,  fin ack на любой сайт</p>
<p>в самом debug при этом вижу множество обращений к doh<br>
убираю --debug=@ и все сайты чудесным образом начинают открываться</p>
<p>крч стало открываться только после того, как убрал пустой wf tcp443</p>
<p>в логах следующее:<br>
при curl хост попадает в профиль1</p>
<details>
<summary>
Спойлер</summary>
<p>IP4: 192.168.1.101 =&gt; 89.113.122.76 proto=udp ttl=128 sport=60609 dport=443<br>
UDP: len=1200 : CC 00 00 00 01 14 21 63 90 D1 9D F9 2C 04 77 DF AC 57 65 6D 32 CA 48 D1 08 13 14 0A 1E CE 19 EF … : …!c…,.w…Wem2.H… …<br>
desync profile search for udp target=89.113.122.76:443 l7proto=unknown hostname=‘’<br>
desync profile 0 matches<br>
packet contains QUIC initial<br>
packet contains full TLS ClientHello<br>
hostname: <a href="http://rr1---sn-8ph2xajvh-3hfl.googlevideo.com">rr1---sn-8ph2xajvh-3hfl.googlevideo.com</a><br>
discovered l7 protocol<br>
discovered hostname<br>
desync profile search for udp target=89.113.122.76:443 l7proto=quic hostname=‘<a href="http://rr1---sn-8ph2xajvh-3hfl.googlevideo.com">rr1---sn-8ph2xajvh-3hfl.googlevideo.com</a>’</p>
<ul>
<li>hostlist check for profile 1</li>
</ul>
</details>
<p>при открытии страницы с ggc хост не попадает в профиль:</p>
<details>
<summary>
Спойлер</summary>
<p>packet: id=25 len=1278 outbound IPv6=0 IPChecksum=1 TCPChecksum=1 UDPChecksum=0 IfIdx=17.0<br>
IP4: 192.168.1.101 =&gt; 89.113.122.76 proto=udp ttl=128 sport=63495 dport=443<br>
UDP: len=1250 : C1 00 00 00 01 08 D7 05 8D D3 07 A0 BB 74 00 00 44 D0 D9 3D 97 A1 80 FE B1 9C DA 8C B3 1A 56 9D … : …t…D…=…V. …<br>
using cached desync profile 0<br>
packet contains QUIC initial<br>
packet contains full TLS ClientHello<br>
not applying tampering to QUIC ClientHello without hostname in the SNI</p>
</details>
<p>попробовал указать через ipset , тогда в шарке все корректно, фейки отправляются, но страница с ggc все равно не открывается, но кстати через ипсет +только wf-udp443 видео прям очень быстро стало открываться на ютубе. вообщем вывод quic можно заставить работать, но работает он через одно место на билайне (ну и + не совсем понятно поведение запрета и не понятно, почему этой же проблеме подвержен warp)</p></td><td>2025-03-15T07:42:19.709Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="uwu" data-post="4304" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p>а на винде?</p>
</blockquote>
</aside>
<p>хз, не читал и не использовал</p></td><td>2025-03-15T11:16:20.648Z</td></tr><tr><td>bolvan</td><td><p>Надо снять в шарке тот QUIC initial, на который идет сообщение “not applying tampering to QUIC ClientHello without hostname in the SNI”. Раскрыть crypto и посмотреть есть ли там SNI.<br>
Если есть, то переслать этот дамп мне для изучения</p></td><td>2025-03-15T12:13:57.775Z</td></tr><tr><td>uwu(uwu)</td><td><p>как можно сопоставить пакет из дебага и из шарка? я не вижу совпадений кроме айпишников и порта<br>
в шарке все пакеты имеют длину 1292 в дебаге вижу только packet len1278, udp len 1250</p>
<p>не против , если полные логи шарка и дебага скину в лс?) или например второй исх. пакет в шарке = второму пакету в debug?</p></td><td>2025-03-15T15:51:22.533Z</td></tr><tr><td>bolvan</td><td><p>source port можно сопоставить<br>
Дамп+дебаг лог</p></td><td>2025-03-15T16:08:18.665Z</td></tr><tr><td>uwu(uwu)</td><td><p>ок, я попробую посмотреть чуть позднее на неделе. сейчас уже голова трещит. в это достаточно тяжело вникать с нуля</p></td><td>2025-03-15T16:09:47.684Z</td></tr><tr><td>printf_ck</td><td><p>Вечер добрый!</p>
<p>Обратил внимание что zapret начал довольно обильно спамить в журнал последнее время:</p>
<pre data-code-wrap="bash"><code class="lang-bash">zapret[14916]: rawsend: sendto: Message too long
</code></pre>
<p>Машина с Arch Linux, версия актуальный git.<br>
Судя по поиску это что-то связанное с UDP, есть рецепты что с этим делать?</p></td><td>2025-03-15T19:51:58.202Z</td></tr><tr><td>bolvan</td><td><p>Какие параметры запуска ?<br>
Если откуда-то скопипастенное udplen, то это очень логично</p></td><td>2025-03-16T05:49:20.992Z</td></tr><tr><td>printf_ck</td><td><p>Ах да, совсем забыл прикрепить.</p>
<pre><code class="lang-auto">nfqws --qnum=200 --filter-udp=443 --hostlist=/opt/zapret/lists/ru-youtube-video.txt --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic=/opt/zapret/fake/quic_initial_www_google_com.bin --new --filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 --new --filter-tcp=80 --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld --new --filter-tcp=443 --hostlist=/opt/zapret/lists/ru-youtube.txt --hostlist=/opt/zapret/lists/ru-youtube-video.txt --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld --dpi-desync-repeats=11 --new --hostlist=/opt/zapret/lists/ru-blacklist.txt --hostlist=/opt/zapret/lists/ru-custom.txt --dpi-desync=fake fakeddisorder --dpi-desync-autottl=1:1-20 --dpi-desync-fooling=md5sig
</code></pre>
<p>Ничего такого не видно, параметры довольно классические.</p></td><td>2025-03-16T07:09:17.982Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="printf_ck" data-post="4312" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p><code>quic_initial_www_google_com.bin</code></p>
</blockquote>
</aside>
<p>Какого он размера ? Он должен быть таким, чтобы не превышать MTU.<br>
Максимальный размер фейка - 1472 байта, что для ipv4 соответствует MTU 1500. Больше прога не даст ввести. Будет молча обрезано. Но если MTU&lt;1500 или используется ipv6, то может превысить<br>
Лог нужен вокруг сообщения. В процессе чего он отсылает то, что не влезает в MTU</p></td><td>2025-03-16T08:36:51.114Z</td></tr><tr><td>printf_ck</td><td><p><code>quic_initial_www_google_com.bin</code>  что по умолчанию прилагается, 1200 байт.</p>
<aside class="quote no-group" data-username="bolvan" data-post="4313" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Лог нужен вокруг сообщения.</p>
</blockquote>
</aside>
<p>Ничего другого вокруг от <code>zapret</code> или по теме нет, по крайней мере в <code>journalctl</code> выстреливают 3 таких сообщения разом без контекста, примерно каждые 2-3 минуты.</p>
<p>Сейчас сделаю прогон с <code>--debug=1</code></p>
<hr>
<p>Есть ощущение что это чаще происходит если youtube включать одновременно в двух вкладках, например музыку в одной слушать на фоне, а в другой смотреть видео.</p>
<p>Скорее всего совпадение, но хоть что-то.</p></td><td>2025-03-16T10:05:21.922Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="printf_ck" data-post="4314" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>Сейчас сделаю прогон с <code>--debug=1</code></p>
</blockquote>
</aside>
<p>Поймал для примера<code>rawsend</code>, как-то не густо.</p>
<pre data-code-wrap="bash"><code class="lang-bash">мар 13 13:28:00 user zapret[63736]: packet: id=135 len=60 mark=00000000
мар 13 13:28:00 user zapret[63736]: IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=S seq=3658885761 ack_seq=0
мар 13 13:28:00 user zapret[63736]: desync profile search for tcp target=CENSORED_IP_2:443 l7proto=unknown hostname=''
мар 13 13:28:00 user zapret[63736]: desync profile 0 matches
мар 13 13:28:00 user zapret[63736]: packet: id=135 pass unmodified
мар 13 13:28:00 user zapret[63736]: packet: id=136 len=52 mark=00000000
мар 13 13:28:00 user zapret[63736]: IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=A seq=3658885762 ack_seq=899314698
мар 13 13:28:00 user zapret[63736]: using cached desync profile 0
мар 13 13:28:00 user zapret[63736]: packet: id=136 pass unmodified
мар 13 13:28:00 user zapret[63736]: packet: id=137 len=1500 mark=00000000
мар 13 13:28:00 user zapret[63736]: IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=A seq=3658885762 ack_seq=899314698
мар 13 13:28:00 user zapret[63736]: TCP: len=1448 : 16 03 01 07 61 01 00 07 5D 03 03 E2 90 DE 35 F0 20 32 E2 26 18 47 67 AE D3 08 9A 81 28 D6 18 79 ... : ....a...].....5. 2.&amp;.Gg.....(..y ...
мар 13 13:28:00 user zapret[63736]: using cached desync profile 0
мар 13 13:28:00 user zapret[63736]: packet contains partial TLS ClientHello
мар 13 13:28:00 user zapret[63736]: starting reassemble. now we have 1448/1894
мар 13 13:28:00 user zapret[63736]: req retrans : seq interval 3658885762-3658887209
мар 13 13:28:00 user zapret[63736]: DELAY desync until reasm is complete (#1)
мар 13 13:28:00 user zapret[63736]: packet: id=137 drop
мар 13 13:28:00 user zapret[63736]: packet: id=138 len=498 mark=00000000
мар 13 13:28:00 user zapret[63736]: IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=AP seq=3658887210 ack_seq=899314698
мар 13 13:28:00 user zapret[63736]: TCP: len=446 : 2E D2 8D D0 6B E6 0F 04 CA 04 60 88 28 66 E7 0A 4C 0F 08 59 5E 40 4E C3 0F 87 72 EC 2B CF 28 1C ... : ....k.....`.(f..L..Y^@N...r.+.(. ...
мар 13 13:28:00 user zapret[63736]: using cached desync profile 0
мар 13 13:28:00 user zapret[63736]: reassemble : feeding data payload size=446. now we have 1894/1894
мар 13 13:28:00 user zapret[63736]: packet contains full TLS ClientHello
мар 13 13:28:00 user zapret[63736]: req retrans : seq interval 3658885762-3658887655
мар 13 13:28:00 user zapret[63736]: DELAY desync until reasm is complete (#2)
мар 13 13:28:00 user zapret[63736]: REPLAYING delayed packet #1 offset 0
мар 13 13:28:00 user zapret[63736]: REPLAY IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=A seq=3658885762 ack_seq=899314698
мар 13 13:28:00 user zapret[63736]: TCP: len=1448 : 16 03 01 07 61 01 00 07 5D 03 03 E2 90 DE 35 F0 20 32 E2 26 18 47 67 AE D3 08 9A 81 28 D6 18 79 ... : ....a...].....5. 2.&amp;.Gg.....(..y ...
мар 13 13:28:00 user zapret[63736]: using cached desync profile 0
мар 13 13:28:00 user zapret[63736]: packet contains full TLS ClientHello
мар 13 13:28:00 user zapret[63736]: hostname: ntc.party
мар 13 13:28:00 user zapret[63736]: discovered l7 protocol
мар 13 13:28:00 user zapret[63736]: discovered hostname
мар 13 13:28:00 user zapret[63736]: desync profile search for tcp target=CENSORED_IP_2:443 l7proto=tls hostname='ntc.party'
мар 13 13:28:00 user zapret[63736]: * hostlist check for profile 4
мар 13 13:28:00 user zapret[63736]: [/opt/zapret/lists/ru-youtube-video.txt] include hostlist check for ntc.party : negative
мар 13 13:28:00 user zapret[63736]: hostlist check for party : negative
мар 13 13:28:00 user zapret[63736]: [/opt/zapret/lists/ru-youtube.txt] include hostlist check for ntc.party : negative
мар 13 13:28:00 user zapret[63736]: hostlist check for party : negative
мар 13 13:28:00 user zapret[63736]: * hostlist check for profile 5
мар 13 13:28:00 user zapret[63736]: [/opt/zapret/lists/ru-custom.txt] include hostlist check for ntc.party : negative
мар 13 13:28:00 user zapret[63736]: hostlist check for party : negative
мар 13 13:28:00 user zapret[63736]: [/opt/zapret/lists/ru-blacklist.txt] include hostlist check for ntc.party : positive
мар 13 13:28:00 user zapret[63736]: desync profile 5 matches
мар 13 13:28:00 user zapret[63736]: desync profile changed by revealed l7 protocol or hostname !
мар 13 13:28:00 user zapret[63736]: dpi desync src=CENSORED_IP_1:45004 dst=CENSORED_IP_2:443
мар 13 13:28:00 user zapret[63736]: regular split pos: 2
мар 13 13:28:00 user zapret[63736]: normalized regular split pos : 2
мар 13 13:28:00 user zapret[63736]: [153B blob data]
мар 13 13:28:00 user zapret[63736]: sending fake(1) 2nd out-of-order tcp segment 2-1447 len=1446 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... : ................................ ...
мар 13 13:28:00 user zapret[63736]: rawsend: sendto: Message too long
мар 13 13:28:00 user zapret[63736]: SENDING delayed packet #1 unmodified
мар 13 13:28:00 user zapret[63736]: REPLAYING delayed packet #2 offset 1448
мар 13 13:28:00 user zapret[63736]: REPLAY IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=45004 dport=443 flags=AP seq=3658887210 ack_seq=899314698
мар 13 13:28:00 user zapret[63736]: TCP: len=446 : 2E D2 8D D0 6B E6 0F 04 CA 04 60 88 28 66 E7 0A 4C 0F 08 59 5E 40 4E C3 0F 87 72 EC 2B CF 28 1C ... : ....k.....`.(f..L..Y^@N...r.+.(. ...
мар 13 13:28:00 user zapret[63736]: using cached desync profile 5
мар 13 13:28:00 user zapret[63736]: packet contains full TLS ClientHello
мар 13 13:28:00 user zapret[63736]: hostname: ntc.party
мар 13 13:28:00 user zapret[63736]: dpi desync src=CENSORED_IP_1:45004 dst=CENSORED_IP_2:443
мар 13 13:28:00 user zapret[63736]: regular split pos: 2
мар 13 13:28:00 user zapret[63736]: regular split pos is outside of this packet
мар 13 13:28:00 user zapret[63736]: SENDING delayed packet #2 unmodified
мар 13 13:28:00 user zapret[63736]: reassemble session finished
мар 13 13:28:00 user zapret[63736]: packet: id=138 drop
мар 13 13:28:01 user zapret[63736]: packet: id=139 len=60 mark=00000000
мар 13 13:28:01 user zapret[63736]: IP4: CENSORED_IP_1 =&gt; CENSORED_IP_3 proto=tcp ttl=64 sport=51906 dport=443 flags=S seq=3675059095 ack_seq=0
</code></pre></td><td>2025-03-16T10:42:10.543Z</td></tr><tr><td>bolvan</td><td><p>Здесь он пытался отослать кусок TCP   длиной 1446 , и sendto вернул ошибку<br>
Есть ли какие-то правила iptables/nftables , кроме zapret-овских ?<br>
Пакет проходной, система работает как рутер или как воркстанция и пакет исходил с самой системы ?<br>
Какие интерфейсы в системе ? Есть ли VPN, особенные ip rules, возможность ухода пакетов с разных интерфейсов ? (policy routing, например)<br>
Если хоть что-то есть из перечисленного, можно попробовать --bind-fix4 / --bind-fix6</p></td><td>2025-03-16T11:32:39.651Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="bolvan" data-post="4316" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Есть ли какие-то правила iptables/nftables , кроме zapret-овских ?</p>
</blockquote>
</aside>
<p>Нет, только под zapret.</p>
<p><code>iptables -nL</code></p>
<pre><code class="lang-auto">Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
NFQUEUE    6    --  0.0.0.0/0            0.0.0.0/0            tcp dpt:443 connbytes 1:6 connbytes mode packets connbytes direction original mark match ! 0x40000000/0x40000000 NFQUEUE num 200 bypass
</code></pre>
<p><code>ip6tables -nL</code></p>
<pre><code class="lang-auto">Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
NFQUEUE    6    --  ::/0                 ::/0                 tcp dpt:443 connbytes 1:6 connbytes mode packets connbytes direction original mark match ! 0x40000000/0x40000000 NFQUEUE num 200 bypass
</code></pre>
<ul>
<li>Обычный ПК, так что исходил с самой системы.</li>
<li>Интерфейс Ethernet, подключён напрямую из роутера.</li>
<li>VPN нет</li>
<li><code>ip rules</code> насколько мне известно нет, по крайней мере ничего на эту тему вручную не делалось.</li>
<li>Policy routing та же история, насколько мне известно нет и вручную не делалось.</li>
</ul>
<aside class="quote no-group" data-username="bolvan" data-post="4316" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если хоть что-то есть из перечисленного, можно попробовать --bind-fix4 / --bind-fix6</p>
</blockquote>
</aside>
<p>Ознакомлюсь в readme и попробую на всякий случай, чем чёрт не шутит.</p></td><td>2025-03-16T11:43:09.290Z</td></tr><tr><td>bolvan</td><td><p>Да, это простейший случай, bind-fix вряд ли поможет.<br>
Еще скажите rawsend каждый раз при сплите такое возвращает или хаотично ?<br>
Есть ли в этот момент какая-то мощная выгрузка в сеть ?<br>
Может быть множество запросов валится на nfqws ?<br>
Если поменять сплит позицию, чтобы куски стали поменьше (в пределах 1400), что-то меняется ?</p>
<p>У меня на виртуалке на убунте</p>
<pre><code class="lang-auto">multisplit pos: 2 
normalized multisplit pos: 2 
sending multisplit part 2 2-1447 len=1446 seqovl=0 : 01 07 5E 01 00 07 5A 03 03 5A 53 5A C2 7E D5 E6 7F 30 BC 53 75 A2 79 99 11 73 A0 ED 1B 68 7A 33 ... : ..^...Z..ZSZ.~..^?0.Su.y..s...hz3 ...
sending multisplit part 1 0-1 len=2 seqovl=0 : 16 03 : ..
DROPPING delayed packet #1
..........
regular split pos: 2
normalized regular split pos : 2
sending fake(1) 2nd out-of-order tcp segment 2-1447 len=1446 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... : ................................ ...
sending 2nd out-of-order tcp segment 2-1447 len=1446 seqovl=0 : 01 07 5D 01 00 07 59 03 03 D9 00 12 5B DB 1E 05 8D 66 F7 B5 98 14 3D 3D 8E 80 74 79 F0 43 7A EE ... : ..]...Y.....[....f....==..ty.Cz. ...
sending fake(2) 2nd out-of-order tcp segment 2-1447 len=1446 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... : ................................ ...
sending fake(1) 1st out-of-order tcp segment 0-1 len=2 : 00 00 : ..
sending 1st out-of-order tcp segment 0-1 len=2 : 16 03 : ..
sending fake(2) 1st out-of-order tcp segment 0-1 len=2 : 00 00 : ..
</code></pre></td><td>2025-03-16T11:49:14.916Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="bolvan" data-post="4318" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Да, это простейший случай, bind-fix вряд ли поможет.</p>
</blockquote>
</aside>
<p>Верно, добавил <code>--bind-fix4 --bind-fix6</code>, не помогло.</p>
<aside class="quote no-group" data-username="bolvan" data-post="4318" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Еще скажите rawsend каждый раз при сплите такое возвращает или хаотично ?</p>
</blockquote>
</aside>
<p>Проверю, отпишусь.</p>
<aside class="quote no-group" data-username="bolvan" data-post="4318" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Есть ли в этот момент какая-то мощная выгрузка в сеть ?<br>
Может быть множество запросов валится на nfqws ?</p>
</blockquote>
</aside>
<p>Не подскажете как лучше эти моменты отловить и что именно имеется ввиду под мощной выгрузкой в сеть?<br>
На глаз по графикам в системном мониторе сеть ведёт себя как обычно.</p>
<aside class="quote no-group" data-username="bolvan" data-post="4318" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если поменять сплит позицию, чтобы куски стали поменьше (в пределах 1400), что-то меняется ?</p>
</blockquote>
</aside>
<p>Правильно понимаю, в моём случае для youtube <code>--filter-tcp=80</code> и <code>--filter-tcp=443</code> <code>--dpi-desync-split-pos=2,midsld</code> пойдёт для теста?</p></td><td>2025-03-16T12:38:18.349Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="printf_ck" data-post="4319" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>что именно имеется ввиду под мощной выгрузкой в сеть?</p>
</blockquote>
</aside>
<ol>
<li>Общая загрузка канала на upload велика</li>
<li>Много отдельных пакетов, которые валятся на nfqws</li>
</ol>
<p>Внутренности ядра сложны, поэтому рассматриваю даже потенциальные варианты с переполнением каких-то очередей</p>
<aside class="quote no-group" data-username="printf_ck" data-post="4319" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>Правильно понимаю, в моём случае для youtube <code>--filter-tcp=80</code> и <code>--filter-tcp=443</code> <code>--dpi-desync-split-pos=2,midsld</code> пойдёт для теста?</p>
</blockquote>
</aside>
<p>Нет, сделайте --dpi-desync-split-pos=1400<br>
И крутите его вверх, наблюдая есть ли взаимосвязь с размером отсылаемого пакета. Если есть , найдите точку, после которой начинается.<br>
У провайдера какой MTU ?</p>
<p>Проблем с MTU по идее не должно быть. Если сама система шлет TCP пакет длиной 1448, значит она выполнила PMTU discovery, был согласован MSS. Пакеты меньше не должны вызывать проблем с MTU.<br>
1448 скорее всего означает, что у провайдера 1500</p></td><td>2025-03-16T12:42:17.827Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="bolvan" data-post="4320" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>У провайдера какой MTU ?</p>
</blockquote>
</aside>
<p><code>ip link show dev eno1</code> показывает 1500<br>
Ростелеком</p></td><td>2025-03-16T12:48:08.110Z</td></tr><tr><td>lighting</td><td><p>Ростелеком по IPoE (DHCP)? Обычно же у них PPPoE, а MTU тогда должен быть ≤1492</p></td><td>2025-03-16T12:52:26.503Z</td></tr><tr><td>printf_ck</td><td><aside class="quote no-group" data-username="lighting" data-post="4322" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/l/aeb1de/48.png" class="avatar"> lighting:</div>
<blockquote>
<p>Ростелеком по IPoE (DHCP)?</p>
</blockquote>
</aside>
<p>Видимо да, в роутере WAN connection type - Dynamic IP<br>
Правда изначально это был онлайм, увы ростелеком их выкупил…возможно пережитки прошлого.</p></td><td>2025-03-16T12:54:15.304Z</td></tr><tr><td>bolvan</td><td><p>В последних исходниках сделал вывод фактического параметра length, передаваемого sendto(), в случае ошибки. Мало ли из-за бага туда передается что-то большое. Соберите, так будет более информативно</p></td><td>2025-03-16T12:58:26.733Z</td></tr><tr><td>printf_ck</td><td><p>Благодарю, сейчас опробую!</p></td><td>2025-03-16T12:58:54.996Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Приветствую. Использую такой профиль, в целом всё работает нормально, но заметил, что при upload’e чего-либо в телеграм - подскакивает использование cpu от winws. При этом в условном qBittorrent’e - всё нормально. Это связано с неоптимальными правилами, или, возможно, с тем, что телега разбивает файл на кучу частей при отправке и поэтому много соединений?</p>
<details>
<summary>
профиль winws</summary>
<p><code>C:\Soft\zapret\zapret-winws\winws.exe --wf-l3=ipv4 --wf-tcp=80,443 --wf-udp=443,50000-50050 --filter-tcp=80 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new --filter-udp=50000-50050 --dpi-desync=fake --dpi-desync-cutoff=d2 --dpi-desync-any-protocol --dpi-desync-repeats=3 --new --filter-tcp=443 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=multidisorder --dpi-desync-split-pos=1,midsld --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --new --filter-udp=443 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic=C:\Soft\zapret\my_fakes\quic_pl_by_ori.bin</code></p>
</details></td><td>2025-03-16T13:29:38.413Z</td></tr><tr><td>printf_ck</td><td><pre data-code-wrap="bash"><code class="lang-bash">мар 13 13:26:34 user zapret[79717]: desync profile 5 matches
мар 13 13:26:34 user zapret[79717]: desync profile changed by revealed l7 protocol or hostname !
мар 13 13:26:34 user zapret[79717]: dpi desync src=CENSORED_IP_1:59120 dst=CENSORED_IP_2:443
мар 13 13:26:34 user zapret[79717]: regular split pos: 2
мар 13 13:26:34 user zapret[79717]: normalized regular split pos : 2
мар 13 13:26:34 user zapret[79717]: [153B blob data]
мар 13 13:26:34 user zapret[79717]: sending fake(1) 2nd out-of-order tcp segment 2-1447 len=1446 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... : ................................ ...
мар 13 13:26:34 user zapret[79717]: rawsend: sendto (1514): Message too long
мар 13 13:26:34 user zapret[79717]: SENDING delayed packet #1 unmodified
мар 13 13:26:34 user zapret[79717]: REPLAYING delayed packet #2 offset 1448
мар 13 13:26:34 user zapret[79717]: REPLAY IP4: CENSORED_IP_1 =&gt; CENSORED_IP_2 proto=tcp ttl=64 sport=59120 dport=443 flags=AP seq=4208103237 ack_seq=439631969
мар 13 13:26:34 user zapret[79717]: [153B blob data]
мар 13 13:26:34 user zapret[79717]: using cached desync profile 5
мар 13 13:26:34 user zapret[79717]: packet contains full TLS ClientHello
мар 13 13:26:34 user zapret[79717]: hostname: ntc.party
</code></pre>
<blockquote>
<p>Еще скажите rawsend каждый раз при сплите такое возвращает или хаотично ?</p>
</blockquote>
<p>Похоже всё таки каждый.</p></td><td>2025-03-16T13:32:23.557Z</td></tr><tr><td>bolvan</td><td><p>1514 это ненормально. буду думать</p></td><td>2025-03-16T13:37:56.252Z</td></tr><tr><td>printf_ck</td><td><p>Спасибо!</p>
<p>Пока могу лишь от себя добавить, что это появилось не так давно, вероятно в каких-то из последних версий.</p></td><td>2025-03-16T13:39:05.260Z</td></tr><tr><td>bolvan</td><td><p>Было бы здорово сдампить то, что вызывает проблему.<br>
Двойной пакет kyber hello или отдельно куски от него</p></td><td>2025-03-16T13:45:05.503Z</td></tr><tr><td>printf_ck</td><td><p>Wireshark знаю посредственно, опишите процедуру.</p></td><td>2025-03-16T13:46:58.315Z</td></tr><tr><td>bolvan</td><td><p>Вероятно все просто. Причина в md5sig.<br>
md5sig может плохо работать с kyber и сплитом на мелких позициях<br>
Потому что первый сегмент полный под MTU, md5sig добавляет tcp option, она требует существенный размер<br>
Надо наращивать сплит позицию или отказываться от md5sig или убирать кибер.<br>
nfqws не умеет перераспределять данные между оригинальными tcp сегментами</p>
<p>Или надо отказываться от fakedsplit,fakeddisorder. Только в них генерятся фейки размером с оригинал</p></td><td>2025-03-16T13:49:52.088Z</td></tr><tr><td>printf_ck</td><td><p>Вот как…неочевидный момент.<br>
Пока попробую с <code>datanoack</code> погонять, посмотрю как пойдёт, это самый простой способ проверить.</p>
<p>А с <code>md5sig,badsum</code> или <code>md5sig,badseq</code> получится или тоже завалится?</p>
<aside class="quote no-group" data-username="bolvan" data-post="4332" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Или надо отказываться от fakedsplit,fakeddisorder.</p>
</blockquote>
</aside>
<p>Ни за что!<br>
Эти двое - произведение искусства.</p></td><td>2025-03-16T14:12:23.494Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="printf_ck" data-post="4333" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/printf_ck/48/13060_2.png" class="avatar"> printf_ck:</div>
<blockquote>
<p>А с <code>md5sig,badsum</code> или <code>md5sig,badseq</code> получится или тоже завалится?</p>
</blockquote>
</aside>
<p>Без разницы. Если добавляется md5, то это требует места в пакете.<br>
Остальные фулинги ничего не добавляют</p></td><td>2025-03-16T14:18:36.249Z</td></tr><tr><td>printf_ck</td><td><p>Благодарю за помощь, это действительно <code>md5sig</code>…<br>
И без него к сожалению кое что перестаёт работать.</p>
<p>Что ж, пожалуй откажусь от QUIC, всё равно ростелеком его у youtube рубит…а жаль, с ним работало быстрее.</p>
<p>Спасибо что readme обновили, надеюсь кому-то поможет.</p></td><td>2025-03-16T14:27:11.080Z</td></tr><tr><td>bolvan</td><td><p>а QUIC то здесь причем ?   md5 относится к tcp</p></td><td>2025-03-16T14:31:12.172Z</td></tr><tr><td>printf_ck</td><td><p>А разве QUIC без kyber будет работать?<br>
Он и с ним то уже не работает здесь.</p></td><td>2025-03-16T14:32:05.944Z</td></tr><tr><td>bolvan</td><td><p>Конечно будет. Сам по себе quic не требует kyber.<br>
kyber это лишь один из способов key agreement, требующий передачи значительного количество информации, что и раздувает handshake до нескольких пакетов<br>
В фоксе кибер отдельно управляется для tls и quic<br>
Но как на кибер и некибер реагирует конкретный DPI - это отдельный вопрос</p></td><td>2025-03-16T14:34:28.693Z</td></tr><tr><td>lighting</td><td><aside class="quote no-group" data-username="bolvan" data-post="4332" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>nfqws не умеет перераспределять данные между оригинальными tcp сегментами</p>
</blockquote>
</aside>
<p>Теоретически возможно ли научить nfqws этому? Если да, то планируется ли в будущем появление данной фичи?</p></td><td>2025-03-16T20:50:49.022Z</td></tr><tr><td>bolvan</td><td><p>Это непросто обыграть и требуется только для одного единственного случая.<br>
Так что нет, не планируется</p></td><td>2025-03-17T06:29:19.284Z</td></tr><tr><td>GAME-OVER-op(Game Over Op)</td><td><p>Здравствуйте, не совсем понимаю работу tpws<br>
С nfqws разобрался.<br>
Есть такой конфиг</p>
<details>
<summary>
Спойлер</summary>
<p>–filter-tcp=80 --hostlist=/data/adb/modules/ZDT-D/working_folder/bin/general.txt --dpi-desync=fake,split2 --dpi-desync-autottl=6 --dpi-desync-fooling=md5sig <br>
–new <br>
–filter-tcp=443 --hostlist=/data/adb/modules/ZDT-D/working_folder/bin/general.txt --dpi-desync=split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-autottl <br>
–new <br>
–filter-tcp=443 --hostlist=/data/adb/modules/ZDT-D/working_folder/bin/russia-youtube.txt --dpi-desync=fake,split2 --dpi-desync-split-seqovl=2 --dpi-desync-split-pos=2 --dpi-desync-fake-tls=/data/adb/modules/ZDT-D/working_folder/bin/tls_clienthello_www_google_com.bin --dpi-desync-autottl --dpi-desync-repeats=10 <br>
–new <br>
–filter-tcp=443 --hostlist=/data/adb/modules/ZDT-D/working_folder/bin/russia-discord.txt --dpi-desync=fake,disorder2 --dpi-desync-fake-tls=/data/adb/modules/ZDT-D/working_folder/bin/tls_clienthello_www_google_com.bin --dpi-desync-split-pos=3 --dpi-desync-fooling=md5sig --dpi-desync-repeats=12 --dpi-desync-autottl <br>
–new <br>
–filter-udp=443 --hostlist=/data/adb/modules/ZDT-D/working_folder/bin/general.txt --dpi-desync=fake --dpi-desync-repeats=8 --dpi-desync-fake-quic=/data/adb/modules/ZDT-D/working_folder/bin/quic_initial_www_google_com.bin</p>
</details>
<p>Можете пожалуйста помочь переписать его под tpws?</p></td><td>2025-03-17T14:45:33.206Z</td></tr><tr><td>bolvan</td><td><p>tpws и nfqws не эквивалентны.<br>
nfqws работает на уровне пакетов, tpws на уровне потока через стандартные tcp сокеты<br>
поэтому сделать точно такой же конфиг нельзя</p></td><td>2025-03-17T14:53:02.687Z</td></tr><tr><td>GAME-OVER-op(Game Over Op)</td><td><p>Спасибо, но тогда вопрос:<br>
Можно ли использовать tpws просто как прокси<br>
То есть запустить nfqws допустим на порту 210<br>
tpws на порт 9990<br>
И с помощью iptables гонять трафик tpws через nfqws?</p></td><td>2025-03-17T15:00:48.009Z</td></tr><tr><td>bolvan</td><td><p>nfqws не работает на порту. Он слушает очереди NFQUEUE.<br>
tpws можно запустить без параметров дурения как --socks.<br>
iptables для этого не нужны</p></td><td>2025-03-17T17:21:28.113Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>кто-нибудь ещё сталкивался с новым видом блокировок когда ERR_CONNECTION_TIMED_OUT вместо привычного reset?</p>
<p>ситуация неясная. с одной стороны только на одном провайдере, а с другой стороны только для одного ресурса, хоть и на разных ip и частично разных маршрутах</p>
<p>а именно hdrezka.in и rezka.ag слишком часто не открываются по таймауту чтобы подумать что трабл на их стороне, тем более что на других провайдерах сколько не тестил - в эти же моменты всегда доступны.<br>
более того и на проблемном прове, тот же icmp всегда идёт без потерь и трабл лишь на 443<br>
и в завершении всего сам трабл 50на50 т.е. то открывает нормально, то таймаут.</p>
<p>а главное нет даже мыслей как именно “доказать” что это чебурнилы гадят? в данном случае как понимаю никакой сниффер не спасёт. нету ни от кого пакета с rst. и понять какой из промежуточных хопов блочит нельзя. или есть у кого идеи?</p></td><td>2025-03-17T21:11:09.236Z</td></tr><tr><td>uwu(uwu)</td><td><p>нужно убедиться, что твоя стратегия пробивает TLS1.2, проверь на других таких же сайтах.<br>
<img src="zapret-обсуждение-726/0b168e3b37b1176886ab5dd888f9559104f89b4d.png" alt="изображение" data-base62-sha1="1A5zNab1BJ3OoSz4oCRkvcRFJSZ" width="316" height="60"></p>
<p>если другие заблокированные tls1.2 сайты открываются корректно, то убери всю автоматику по типу autottl для проверки и вместо этого укажи ttl вручную.</p>
<aside class="quote no-group" data-username="Quqas" data-post="4345" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>и понять какой из промежуточных хопов блочит нельзя.</p>
</blockquote>
</aside>
<p>если используется фейк, то берешь ttl и понижаешь по единице до тех пор пока сайт не перестанет открываться, ну либо потом повышаешь, если считаешь, что у тебя стоит несколько тспу (но это сомнительно)</p></td><td>2025-03-17T22:48:05.795Z</td></tr><tr><td>Quqas(Quqas)</td><td><p>советы прочёл. оценил. ни листов ни ttl в своих стратегиях не юзаю. 1.2 действительно сложней дырявить чем 1.3 но тотже <a href="http://animejoy.ru" rel="noopener nofollow ugc">animejoy.ru</a> и без quic открывает с теми параметрами что есть. а blockchek для резки не может подобрать чтоб 10из10 успех</p>
<p>тут что ещё странно -  если с запретом зайти на любой блоченный сайт - то после сам запрет можно выключить и некоторое время по страницам сайта лазить нормально. пока tls не обновиться. т.е. после первого clienthello уже всё идёт шифрованным и чебурнилы сосут<br>
а с резкой беда - даже если заходит на главную - не обновляя страницу можно схватить таймаут на первый же клик в рамках того же сайта - т.е. tls не должен ещё обновляться - а каким-то бесом рвётся связь… крайне неприятный симптом, если эти ублюдки внедрят такое на более широкий спектр адресов…</p></td><td>2025-03-18T02:20:14.905Z</td></tr><tr><td>uwu(uwu)</td><td><p>не ты ли писал, что animejoy у тебя то открывается, то нет?)<br>
я в прошлый раз предлагал стратегии для tls1.2 но их так никто и не использовал…</p>
<aside class="quote no-group" data-username="Quqas" data-post="4347" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/quqas/48/1133_2.png" class="avatar"> Quqas:</div>
<blockquote>
<p>а blockchek для резки не может подобрать чтоб 10из10 успех</p>
</blockquote>
</aside>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="zapret-обсуждение-726/a67a763a0e0ab7786bd54d84c95edd6e14c688da.png" data-download-href="https://ntc.party/uploads/default/a67a763a0e0ab7786bd54d84c95edd6e14c688da" title="изображение"><img src="zapret-обсуждение-726/a67a763a0e0ab7786bd54d84c95edd6e14c688da.png" alt="изображение" data-base62-sha1="nKJDgyTzLelZWQOvFEyJyefvDgC" width="370" height="500" data-dominant-color="151515"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">изображение</span><span class="informations">575×775 16.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>сомневаюсь, что тут что-то решится без перевода на хостлисты<br>
например, недавно опытным путем выяснил, что смайликам на твиче 7tv не нравится split , они начинают тупить и иногда не прогружаться (и иногда даже выдавать какой-то split error). решилось просто вывести в отдельную стратегию с обычным fake<br>
как ты все сайты с одной tcp443 стратегией используешь я хз</p></td><td>2025-03-18T02:39:23.208Z</td></tr><tr><td>RandomBroo(Random Broo)</td><td><p>Всем ку, в новой версии запрета как сделать, чтобы не висело окно в винде? Раньше можно было General.bat запустить и забыть, тут же не понятно ничего, пытался вникнуть в эту килотонну текста, что написан в гайде на самом гитхабе, в итоге вообще не понял эту ахинею, какие то пути обхода, какие то стратегии, хрен поймешь. Сейчас запускаю через preset_russia.cmd, Все остальные таски и сервисы не работают, запускал от админа, при перезагрузке приходится снова это окно врубать preset_russia.cmd</p></td><td>2025-03-18T19:19:02.287Z</td></tr><tr><td>bolvan</td><td><p>В батнике установки службы специально сделана защита против нубов.<br>
Нубы ткнут, потом орут, что интернет пропал, и не знают как починить<br>
Оригинал проекта на нубов не рассчитан. Это к сборщикам, обсуждать сборки у самих сборщиков<br>
general.bat - из сборки какой-то</p></td><td>2025-03-18T19:35:12.276Z</td></tr><tr><td>RandomBroo(Random Broo)</td><td><aside class="quote no-group" data-username="RandomBroo" data-post="4349" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/randombroo/48/15412_2.png" class="avatar"> RandomBroo:</div>
<blockquote>
<p>Gener</p>
</blockquote>
</aside>
<p>А, всё, понял, спс, я даже не знал, что какие-то ещё сборки бывают. У меня раньше была zapret от flowseal, оказывается. Вот, сейчас скачал, 2 кнопки нажал и готово, не нужно тратить время на непонятно написанные километровые текста, информация из которых по жизни не пригодится никогда 99% пользователям</p></td><td>2025-03-18T20:50:22.720Z</td></tr><tr><td>easyone11</td><td><blockquote>
<h3>zapret v70.4</h3>
<ul>
<li>nfqws,tpws: префикс “^” перед доменом в хостлистах исключает поддомены из проверки</li>
<li>nfqws,tpws: сборка через “make systemd” для поддержки явного оповещения systemd о старте юнита (Type=notify)</li>
<li>systemd: шаблоны юнитов systemd для отдельного запуска nfqws и tpws без скриптов</li>
<li>nfqws,tpws: отделение кода сброса UID/GID от дропа linux capabilities. Позволяет использовать минимальные ambient caps в systemd юнитах и запуск не от рута.</li>
<li>tpws: детектирование WSL 1 и предупреждение о проблемах при использовании некоторых параметров</li>
<li>blockcheck: предупреждение о проблемах md5sig с fakedsplit/fakeddisorder , когда применяется многосегментный TLS (kyber) и указана низкая сплит-позиция</li>
</ul>
</blockquote></td><td>2025-03-19T13:56:20.950Z</td></tr><tr><td>sodassd</td><td><p>добрый день. при использовании утилиты blockcheck, могу ли я пытаться достучаться до конкретного айпишника? вчера пытался починить себе дискорд, через wireshark смог вытащить конкретный айпи их сервера, к которому не получается достучаться, но не смог понять, на какой домен стоит пытаться пробиться, так как при использовании успешных стратегий из blockcheck и goodcheck для доменов дискорда:</p>
<details>
<summary>
Спойлер</summary>
<p><a href="http://updates.discord.com" rel="noopener nofollow ugc">updates.discord.com</a><br>
<a href="http://discord-attachments-uploads-prd.storage.googleapis.com" rel="noopener nofollow ugc">discord-attachments-uploads-prd.storage.googleapis.com</a><br>
<a href="http://cdn.discordapp.com" rel="noopener nofollow ugc">cdn.discordapp.com</a><br>
discord.gg</p>
</details>
<p>в комбинации с другими важными для меня доменами (в т.ч. этого форума и cloudflare), мне обе утилиты выдавали успешные стратегии, гудчек так вообще выдал несколько, где 12 из 12 доменов в используемом списке успешно заработали. тем не менее, почему-то дискорд с ними не завелся, я в итоге методом тыка перебирал стратегии, получилось завести его через syndata, но тогда все остальные сайты не работали, пришлось вытащить решение в отдельный профиль. хочу узнать на будущее, как поступить в такой ситуации, чтобы не пытаться искать решения методом тыка, ломая существующие, и что я сделал не так, потому что по ридми и этому форуму я могу ориентироваться успешно и настроить утилиту сам, но дальше этого у меня ноль познаний в нетворкинге, да и вообще в компьютерах.</p></td><td>2025-03-21T15:43:51.994Z</td></tr><tr><td>bolvan</td><td><p>blockcheck работает по доменам, а не IP адресам.<br>
zapret не может обойти блокировку по IP</p>
<p>у дискорда есть веб часть и не-веб часть udp на верхних портах<br>
они обходятся по-разному<br>
веб дурится обычным образом для сайтов, а наверху разве что фейки прокатят в разном количестве (repeats). и блокчек для верхов бесполезен. он работает только по веб</p>
<p>чтобы понять где затык надо сначала сниффануть есть ли обращения на порты udp 50000-50099. если нет, то до media даже не доходит</p></td><td>2025-03-22T07:30:39.212Z</td></tr><tr><td>arinoki(Arinoki)</td><td><aside class="quote" data-post="4326" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/4326">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Приветствую. Использую такой профиль, в целом всё работает нормально, но заметил, что при upload’e чего-либо в телеграм - подскакивает использование cpu от winws. При этом в условном qBittorrent’e - всё нормально. Это связано с неоптимальными правилами, или, возможно, с тем, что телега разбивает файл на кучу частей при отправке и поэтому много соединений? 
<img width="20" height="20" src="https://ntc.party/images/emoji/twitter/arrow_forward.png?v=12" title="arrow_forward" alt="arrow_forward" class="emoji"> 
профиль winws
  </blockquote>
</aside>
<p>
может всё же кто-то подсказать?</p></td><td>2025-03-23T01:53:14.674Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="arinoki" data-post="4355" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>может всё же кто-то подсказать?</p>
</blockquote>
</aside>
<p>попробуй убери порты 50000-50050 c udp и проверь останется ли проблема</p>
<p>если в этом хз как на вин приложении запрета решать проблему с войсами через ограничение по спискам ip, на роутере это реализуется через скрипт для дискорда где как раз прописано к каким ip применять дарение по этим портам</p></td><td>2025-03-23T05:07:55.609Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Убрал, проблема осталась. Вообще, отправка файлов в tg идёт по tcp же. На всякий случай почистил файл с хостами, оставил только от ютуба - тоже без изменений.</p>
<details>
<summary>
текущие настройки</summary>
<p><code>C:\Soft\zapret\zapret-winws\winws.exe --wf-l3=ipv4 --wf-tcp=80,443 --wf-udp=443  --filter-tcp=80 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --dpi-desync-autottl --new --filter-tcp=443 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake,fakedsplit --dpi-desync-fooling=datanoack --dpi-desync-split-pos=1 --dpi-desync-fake-tls=C:\Soft\zapret\my_fakes\tls_clienthello_drive_google_com.bin --new --filter-udp=443 --hostlist-auto=c:\Soft\zapret\zapret-winws\blocked.txt --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic=C:\Soft\zapret\my_fakes\quic_pl_by_ori.bin</code></p>
</details></td><td>2025-03-23T05:49:20.696Z</td></tr><tr><td>3a9LL(3a9LL)</td><td><p>Попробуй число репитов увеличить на 10 или 20</p></td><td>2025-03-23T06:17:42.705Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group" data-username="arinoki" data-post="4357" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/arinoki/48/8248_2.png" class="avatar"> arinoki:</div>
<blockquote>
<p>tg идёт по tcp же</p>
</blockquote>
</aside>
<p>проверил, действительно) не знаю почему всегда считал что udp<br>
PS<br>
батька пояснил ниже в чём проблема)</p></td><td>2025-03-23T06:26:36.370Z</td></tr><tr><td>easyone11</td><td><p>повторы там на UDP, так что тоже бестолку</p></td><td>2025-03-23T06:29:55.132Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Zapret: обсуждение" data-post="4326" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
 Zapret: обсуждение:</div>
<blockquote>
<p>upload’e чего-либо в телеграм - подскакивает использование cpu от winws</p>
</blockquote>
</aside>
<p>От этого никуда не уйти. Перехват пакетов и пересылка их из ядра в user mode процесс - штука затратная. Если в linux есть ограничитель в ядре connbytes, то в windivert его нет, поэтому весь отсылаемый трафик по фильтру идет в winws. В последних версиях предприняты меры для смягчения этой проблемы - пустые ACK не пересылаются. Но при upload пакеты не пустые, они пойдут все.  На достаточно мощном проце со скоростями &lt;100 мбит это практически незаметно. Если проц слаб, а линк толст, то будет жрать вплоть до целого ядра.<br>
Только в телеграм, а не битторрент, потому что обычно ставится фильтр windivert --wf-tcp=443.  Телега работает по 443 порту. В броузере при аплоаде будет тоже самое.<br>
Возможное решение - перенос zapret на роутер.</p></td><td>2025-03-23T06:31:43.465Z</td></tr><tr><td>arinoki(Arinoki)</td><td><p>Большое спасибо за ответ <img src="https://ntc.party/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p></td><td>2025-03-23T06:39:12.217Z</td></tr><tr><td>electrifying</td><td><aside class="quote no-group" data-username="bolvan" data-post="4361" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>На достаточно мощном проце</p>
</blockquote>
</aside>
<p>А что вы считаете за мощный процессор в данном контексте, вот есть какой-нибудь Ryzen 7800x3d, он мощный для игр, но мощный ли он для той задачи что вы описали или надо какой-нибудь 9950x 16 ядерный непонятно, можете внести ясность от какого процессора надо считать мощность</p></td><td>2025-03-23T06:40:03.229Z</td></tr><tr><td>bolvan</td><td><p>На core i7 12 поколения 650 mbit вызывает загрузку половины одного performance ядра.<br>
При этом более 90% приходится на kernel mode, тк сам winws практически ничего не ест. Тяжела сама пересылка из windivert. На NFQUEUE или ipdivert та же картина, это by design. Но в linux есть connbytes. В BSD будет та же самая проблема</p>
<p>При 100 мбит будет &lt;10% одного ядра, а ядер более десяти и еще потоки. Даже не заметите. Причем это только на мощном upload и только в прогах на 443 порту</p></td><td>2025-03-23T06:48:23.510Z</td></tr><tr><td>bolvan</td><td><p>Если проц intel до 8-10 поколения (точно не знаю), рекомендую отключить митигацию от meltdown. Импортнуть рег файл и ребутнуться.<br>
Это может немного охладить проц. Поскольку часто идет переключение kernel&lt;&gt;user<br>
Если проц новее, рег файл на скорость не повлияет. Узнать подвержен ли проц уязвимости можно через powershell. См хабр</p>
<pre><code class="lang-auto">Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management]
"FeatureSettingsOverride"=dword:02000003
"FeatureSettingsOverrideMask"=dword:02000003
</code></pre>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://habr.com/ru/articles/357452/">
  <header class="source">
      <img src="zapret-обсуждение-726/93d28c0d6b4c54846972900bb55f60082a9a3817.png" class="site-icon" data-dominant-color="97BFD2" width="16" height="16">

      <a href="https://habr.com/ru/articles/357452/" target="_blank" rel="noopener">Хабр</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/361;"><img src="zapret-обсуждение-726/e115481399b7eca55231561591a3cb1736b23fb5.png" class="thumbnail" data-dominant-color="425867" width="690" height="362"></div>

<h3><a href="https://habr.com/ru/articles/357452/" target="_blank" rel="noopener">Отключение фикса Meltdown и Spectre в Windows</a></h3>

  <p>На сайте майкрософт размещена информация о том, как можно проверить подвержена ли ОС атакам meltdown. Там же имеется информация, как можно отключить последнее исправление. Учитывая, что в интернете не...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2025-03-23T09:12:48.493Z</td></tr><tr><td>easyone11</td><td><aside class="quote no-group quote-modified" data-username="bolvan" data-post="4366" data-topic="726">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>Если проц не слишком новый, рекомендую отключить митигацию от meltdown. Импортнуть рег файл и ребутнуться.</p>
</blockquote>
</aside>
<p>такую прогу юзал когда на интеле сидел, inSpectre. Там вроде 2 патча отключает которые тормозят проц, либо реестром.</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://www.comss.ru/page.php?id=4777">
  <header class="source">
      <img src="https://ntc.party/uploads/default/original/2X/a/a9ca86863ec0c2f530a383e992fd7bf924d6642d.svg" class="site-icon" data-dominant-color="" width="500" height="500">

      <a href="https://www.comss.ru/page.php?id=4777" target="_blank" rel="noopener nofollow ugc" title="12:00AM - 27 February 2024">comss.ru – 27 Feb 24</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://www.comss.ru/page.php?id=4777" target="_blank" rel="noopener nofollow ugc">inSpectre</a></h3>

  <p>inSpectre  áåñïëàòíàÿ óòèëèòà, êîòîðàÿ ïðîâåðÿåò êîìïüþòåðû Windows íà íàëè÷èå óÿçâèìîñòåé Meltdown è Spectre. Êðîìå ïðîâåðêè óÿçâèìîñòè ñèñòåìû, èíñòðóìåíò òàêæå óìååò îáíàðóæèâàòü, áûëà ëè ñíèæåíà ïðîèçâîäèòåëüíîñòü êîìïüþòåðà</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2025-03-23T10:01:56.722Z</td></tr><tr><td>bunkerfox(bunkerfox)</td><td><p>Это ничего не даст уже, на современных системах от этого с погрешности разница, лучше уж 24h2/2025 поставить, где все на sse4.2 перекомпилированно с поддержкой netadaptercx для разгрузки проца</p></td><td>2025-03-23T23:07:24.066Z</td></tr><tr><td>sodassd</td><td><p>спасибо за разъяснение! когда тыкался и смог завести дискорд, то после прогрузки самого приложения, медия и голосовой чат без проблем грузились, видимо, моя udp стратегия еще рабочая, на крайний случай всегда есть vpn. но пользоваться запретом все равно нравится больше, банально удобнее, да и самому решать проблемы всегда интереснее, пускай даже за помощью иногда приходится обращаться к другим, так что еще раз спасибо за отзывчивость, в следующий раз попробую посмотреть, что там на udp происходит</p></td><td>2025-03-24T01:57:07.840Z</td></tr><tr><td>bolvan</td><td><p>Разницы не будет на системах, не подверженных атаке meltdown, поскольку ОС обнаруживает такие системы и не включает митигацию.<br>
На подверженных будет значительная разница, когда идет частое переключение колец защиты, тк митигация сбрасывает при этом кэш в проце. Любой сисколл - сброс кэша. Падение будет до 30%</p></td><td>2025-03-24T05:56:33.959Z</td></tr><tr><td>Acindaz(Acindaz)</td><td><p><a class="mention" href="/u/bolvan">@bolvan</a> спасибо за v70.5, теперь в хроме по h3 YT стал с первой попытки подключаться.</p></td><td>2025-03-24T13:18:02.146Z</td></tr><tr><td>uwu(uwu)</td><td><p>возвращаясь к теме с quic<br>
да. теперь не обязательно указывать --origin-to-force-quic-on чтобы видео грузилось по h3<br>
правда напрямую ggc так и не открывается)</p>
<p>множественные фейки - это имеется ввиду?<br>
<code>--dpi-desync-fake-quic="%~dp0fake\quic_3.bin" --dpi-desync-fake-quic="%~dp0fake\quic_2.bin" --dpi-desync-fake-quic="%~dp0fake\quic_1.bin"</code></p></td><td>2025-03-24T14:03:26.942Z</td></tr><tr><td>bolvan</td><td><p>Как-то так. Порядок отсылки слева направо.<br>
Запрос был на эту функцию по TCP TLS. Там у кого-то работало из гудбай отсылка большого фейка, потом 160301</p></td><td>2025-03-24T15:42:21.159Z</td></tr><tr><td>tinker</td><td><p>Дискорд не проходит апдейт чек, сайт не открывается, из сессии выкидывает.<br>
Помогите разобраться пожалуйста<br>
<a href="https://pastecode.io/s/ay5ndwvd" class="onebox" target="_blank" rel="noopener nofollow ugc">https://pastecode.io/s/ay5ndwvd</a></p>
<p>Скрипт лежит естественно<br>
<img src="zapret-обсуждение-726/cb5661c9183432f5b8711d6f3fa36236f9eb6485.png" alt="image" data-base62-sha1="t0NZWgrI4D1mpvVPHMR41TCfmZv" width="484" height="38"></p></td><td>2025-03-24T18:06:31.065Z</td></tr><tr><td>easyone11</td><td><p>как сделать при аутохотслисте чтобы <a href="http://google.com" rel="noopener nofollow ugc">google.com</a> не попадал в листы дурения, но попадали его поддомены?<br>
в zapret-hosts-user-exclude ^<a href="http://google.com" rel="noopener nofollow ugc">google.com</a>?</p></td><td>2025-03-24T18:12:47.831Z</td></tr><tr><td>easyone11</td><td><p>если не проходит апдейт чек надо искать дурение для его доменов (блокчекать <a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a>)<br>
скрипт для работы войса</p>
<details>
<summary>
если захочешь сделать отдельную страту то его домены</summary>
<p><a href="http://discord.com" rel="noopener nofollow ugc">discord.com</a><br>
<a href="http://discord-attachments-uploads-prd.storage.googleapis.com" rel="noopener nofollow ugc">discord-attachments-uploads-prd.storage.googleapis.com</a><br>
dis.gd<br>
<a href="http://discord.co" rel="noopener nofollow ugc">discord.co</a><br>
discord.design<br>
discord.dev<br>
discord.gg<br>
discord.gift<br>
discord.gifts<br>
discord.media<br>
discord.new<br>
discord.store<br>
discord.tools<br>
<a href="http://discordapp.com" rel="noopener nofollow ugc">discordapp.com</a><br>
<a href="http://discordapp.net" rel="noopener nofollow ugc">discordapp.net</a><br>
<a href="http://discordmerch.com" rel="noopener nofollow ugc">discordmerch.com</a><br>
<a href="http://discordpartygames.com" rel="noopener nofollow ugc">discordpartygames.com</a><br>
<a href="http://discord-activities.com" rel="noopener nofollow ugc">discord-activities.com</a><br>
<a href="http://discordactivities.com" rel="noopener nofollow ugc">discordactivities.com</a><br>
<a href="http://discordsays.com" rel="noopener nofollow ugc">discordsays.com</a><br>
<a href="http://comdiscord.com" rel="noopener nofollow ugc">comdiscord.com</a><br>
<a href="http://discordapp.io" rel="noopener nofollow ugc">discordapp.io</a></p>
</details></td><td>2025-03-24T18:14:07.274Z</td></tr><tr><td>bolvan</td><td><p>именно так</p></td><td>2025-03-24T18:51:09.694Z</td></tr><tr><td>lighting</td><td><p>Допустим сделали множественные фейки, как сделал</p>
<aside class="quote no-group" data-username="uwu" data-post="4372" data-topic="726" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/uwu/48/15300_2.png" class="avatar"> uwu:</div>
<blockquote>
<p><code>--dpi-desync-fake-quic="%~dp0fake\quic_3.bin" --dpi-desync-fake-quic="%~dp0fake\quic_2.bin" --dpi-desync-fake-quic="%~dp0fake\quic_1.bin"</code></p>
</blockquote>
</aside>
<p>И добавим к примеру --dpi-desync-fake-quic=0x12345678<br>
Хотелось бы это всё вместить в одну команду --dpi-desync-fake-x, чтобы получилось <code>--dpi-desync-fake-quic="%~dp0fake\quic_3.bin","%~dp0fake\quic_2.bin","%~dp0fake\quic_1.bin",0x12345678</code>. Нынче стратегии достаточно крупные по размерам, читать будет намного легче<br>
Возможно ли это?</p></td><td>2025-03-25T10:30:47.059Z</td></tr><tr><td>bolvan</td><td><p>Кавычки не передаются процессу, ими рулит шелл.<br>
Запятая может быть частью файла.<br>
Неоднозначность возникает.</p></td><td>2025-03-25T10:49:11.679Z</td></tr>
    </table>
      </body>
    </html>