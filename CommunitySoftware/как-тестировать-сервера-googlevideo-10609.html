
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>как-тестировать-сервера-googlevideo-10609</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>sfs56819(sfs56819)</td><td><p>Допустим есть сервер <code>https://rr1---sn-n8v7znsk.googlevideo.com</code>, с которого приходит <code>(failed) net::ERR_CONNECTION_RESET</code>.<br>
Как конкретно под него подобрать параметры обхода DPI?</p></td><td>2024-09-22T19:10:24.582Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Так: <a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck/">https://ntc.party/t/подбор-рабочего-конфига-для-ggc-ютуба-через-blockcheck/</a><br>
Только когда</p>
<blockquote>
<p>Скрипт спросит check https tls 1.3 (default : N) (Y/N) ?</p>
</blockquote>
<p>нажать Y и enter</p></td><td>2024-09-22T19:20:30.157Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>а как QUIC проверить?</p></td><td>2024-09-22T19:23:59.988Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="2" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>нажать Y и enter</p>
</blockquote>
</aside>
<p>Если так сделать, тогда не будет стратегий обхода http 1.1 и http 2</p></td><td>2024-09-22T19:24:14.200Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Почему не будет? Разве не это дополнение к tls 1.2 ?</p></td><td>2024-09-22T19:25:32.037Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="Keksimus" data-post="3" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>а как QUIC проверить?</p>
</blockquote>
</aside>
<p>В браузере F12 вкладка network, добавить столбик protocol. <code>h3</code> в этом столбике значит <code>quic</code>.</p></td><td>2024-09-22T19:25:55.314Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="Keksimus" data-post="3" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>а как QUIC проверить?</p>
</blockquote>
</aside>
<p>Оно по умолчанию проверяется, если вы про блокчек</p></td><td>2024-09-22T19:27:16.092Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>tls 1.3 не обратно совместима с tls 1.2 и tls 1.1.<br>
Стратегии, совместимые с tls 1.2 будут работать на tls 1.3, но не наоборот.</p></td><td>2024-09-22T19:27:53.544Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ну значит, проверить для tls 1.2, если ничего не найдется, то еще раз для tls 1.3 - так правильно ?</p></td><td>2024-09-22T19:31:26.863Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Имеется ввиду как проверить QUIC в blockchek т.к. по умолчанию blockcheck его не проверяет.</p>
<blockquote>
<p>clearing winws redirection</p>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_http3 : winws not working</li>
</ul>
</blockquote></td><td>2024-09-22T19:32:48.361Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Проверяет. У вас либо не находится стратегия обхода, либо по каким-то причинам не работает winws или windivert не стартовал. Система случайно не win7 или x32? На x32 zapret не работает из коробки, а на win7 нужно брать файлы WinDivert.dll и WinDivert64.sys из папки gdpi goodbyedpi-0.2.3rc3-2\x86_64\ причем менять в 2 местах: blockcheck\zapret\nfq\ и zapret-winws\</p></td><td>2024-09-22T19:34:14.949Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>для tls 1.3 думаю не обязательно, достаточно tls 1.2.</p>
<aside class="quote no-group" data-username="Keksimus" data-post="10" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>Имеется ввиду как проверить QUIC в blockchek т.к. по умолчанию blockcheck его не проверяет.</p>
</blockquote>
</aside>
<p>Поставьте в этом вопросе Y, будет проверять <code>quic</code><br>
<code>check https tls 1.3 (default : N) (Y/N) ?</code></p></td><td>2024-09-22T19:38:59.155Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Win 10x64</p>
<blockquote>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_https_tls13 : working without bypass<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_http3 : winws not working</li>
</ul>
</blockquote>
<p>Все кроме QUIC проверяет.<br>
Ркн перестал блокировать ggc что ли ? <img src="https://ntc.party/images/emoji/twitter/thinking.png?v=12" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p></td><td>2024-09-22T19:41:13.985Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Про quic же в другом месте спрашивают</p>
<blockquote>
<p>check http3 QUIC (default : Y) (Y/N) ?</p>
</blockquote>
<p>Вы не путаете http3 (quic) и tls 1.3 (протокол https)?</p></td><td>2024-09-22T19:41:43.038Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Покажите плс результат команды в командной строке <code>sc qc WinDivert</code></p></td><td>2024-09-22T19:42:36.131Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Вообще забавно, да, у вас по идее без обхода должно работать)</p></td><td>2024-09-22T19:44:09.562Z</td></tr><tr><td>Keksimus(Tony)</td><td><blockquote>
<p>[SC] QueryServiceConfig: успех</p>
<p>Имя_службы: WinDivert<br>
Тип                  : 1  KERNEL_DRIVER<br>
Тип_запуска          : 4   DISABLED<br>
Управление_ошибками  : 1   NORMAL<br>
Имя_двоичного_файла  : ??\C:\Users\User\Downloads\zapret-win-bundle-master\blockcheck\zapret\nfq\WinDivert64.sys<br>
Группа_запуска       :<br>
Тег                  : 0<br>
Выводимое_имя        : WinDivert<br>
Зависимости          :<br>
Начальное_имя_службы :</p>
</blockquote></td><td>2024-09-22T19:45:03.088Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="1" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p><code>ERR_CONNECTION_RESET</code></p>
</blockquote>
</aside>
<p>Кстати, в gdpi можно попробовать добавить в конфиг для ютуба <code>-p</code></p></td><td>2024-09-22T19:45:29.944Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Как вы работоспособность стратегии проверяете?</p></td><td>2024-09-22T19:48:09.262Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>ну значит, если верить блочеку, quic у вас не работает, зато работает по https без обхода</p></td><td>2024-09-22T19:49:32.579Z</td></tr><tr><td>Ori</td><td><p>Для quic нужен свой пэйлоад от гугла (quic initial или его кусок), по другому там не проходит. Потому и блокчек ничего не находит.</p>
<pre><code class="lang-auto">--dpi-desync=fake --dpi-desync-repeats=2 --dpi-desync-fake-quic="quic_ietf_google_com_2.bin"
</code></pre>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/8xEj769Eb5WrhZpM1zhCSEGkHR.bin">quic_ietf_google_com_2.bin</a> (1,2 КБ)</p>
<p>Проверять так:</p>
<pre><code class="lang-auto">curl -svo NUL --http3-only https://rr....
</code></pre>
<p>Может понадобиться обновленный курл. Не знаю есть ли в дефолтном виндоусовском поддержка http3.</p></td><td>2024-09-22T19:50:36.399Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Что-то провайдер, вернее ркн с настройками играется сильно часто, утром еще блочилось а сейчас уже нет, запущу еще раз проверку…</p></td><td>2024-09-22T19:52:40.742Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Благодарю!</p></td><td>2024-09-22T19:53:13.185Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Можете запустить _CMD_ADMIN.cmd из папки zapret-winws, вставьте туда свою стратегию, проверьте ютуб ( к стратегии можно еще добавить<code> --dpi-desync-fake-tls=tls_clienthello_www_google_com.bin</code>, файл tls_clienthello_www_google_com.bin должен лежать в той же папке)</p></td><td>2024-09-22T19:53:33.028Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Нет, не путаю.<br>
HTTP/3, который использует транспортный протокол QUIC, работает тоже по HTTPS.</p></td><td>2024-09-22T19:56:44.511Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Это так себе метод. В консоли как проверить?</p></td><td>2024-09-22T19:57:38.322Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А причем тут quic, который по udp и tls 1.3, который по tcp?</p></td><td>2024-09-22T20:03:01.974Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Что-то не догоняю вопроса) Это же и есть консоль. Какую вам zapret выдал стратегию?</p></td><td>2024-09-22T20:04:02.348Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Проверять работоспособность в консоли как? Открывать браузер и проверять глазами так себе метод.</p></td><td>2024-09-22T20:06:19.243Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Так вам не ютуб нужен? А метод проверки из консоли? Ну через curl тогда видимо. Как выше написали</p>
<pre><code class="lang-auto">curl -kv -o NUL https://rrбла-бла.googlevideo.com
</code></pre>
<p>А для чего, если не секрет?</p></td><td>2024-09-22T20:09:31.100Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Ютуб нужен. Для достоверного тестирования работоспособности. Хочу скрипт написать, который будет сразу работоспособную стратегию применять.<br>
<code>curl -kv -o NUL https://rrбла-бла.googlevideo.com</code> не позволяет достоверно определить работоспособность.</p></td><td>2024-09-22T20:15:17.875Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="31" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p><code>curl -kv -o NUL https://rrбла-бла.googlevideo.com</code> не позволяет достоверно определить работоспособность.</p>
</blockquote>
</aside>
<p>Значит, самое достоверное - это таки</p>
<aside class="quote no-group" data-username="sfs56819" data-post="29" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>Открывать браузер и проверять глазами </p>
</blockquote>
</aside>
<p>))<br>
А в скрипт вы можете просто вставить копирование в .cmd рабочей стратегии из лога блокчека и запуск. Или перебор стратегий, если их несколько.</p></td><td>2024-09-22T20:18:41.896Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="sfs56819" data-post="31" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p><code>curl -kv -o NUL https://rrбла-бла.googlevideo.com</code> не позволяет достоверно определить работоспособность.</p>
</blockquote>
</aside>
<p>С чего бы это не позволяет? Разве что -k убрать на всякий случай. Можете ещё -X POST прикрутить, если боитесь ошибок 403. Хотя смысла 0, имхо.</p></td><td>2024-09-22T20:19:40.664Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="Ori" data-post="33" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>С чего бы это не позволяет? Разве что -k убрать на всякий случай. Можете ещё -X POST прикрутить, если боитесь ошибок 403. Хотя смысла 0, имхо.</p>
</blockquote>
</aside>
<p>Попробуйте подольше потестировать, Сколько раз наблюдал, видео в браузере не грузится, запросы в network красные, а curl проходит.</p></td><td>2024-09-22T20:26:03.845Z</td></tr><tr><td>Ori</td><td><p>Никогда с таким не сталкивался. А тестировал я очень много. Вы точно https:// не забывали указывать в курле? Единственные 2 исключения: ошибки 403 и провайдерские сервера. С 403 понятно, а с провайдерскими серверами проблема не на канале между клиентом и сервером, а между сервером и внешней сетью. Поэтому эта проблема со стороны клиента неразрешима. Только блочить такие сервера.</p></td><td>2024-09-22T20:27:13.677Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="Ori" data-post="35" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Вы точно https:// не забывали указывать в курле?</p>
</blockquote>
</aside>
<p>Конечно указывал.</p></td><td>2024-09-22T20:33:39.725Z</td></tr><tr><td>Ori</td><td><p>Ну не знаю. Как правило ТСПУ останавливает на хэндшейке. Если он проходит, то дальше и проблем нет.<br>
Не встречался с ситуациями чтобы в браузере не работал сервер, а в курле работал.</p>
<p>Разве что с самим сервером проблемы.</p></td><td>2024-09-22T20:47:15.317Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Один раз curl проходит, через секунду нет, просто висит и таймер тикает<br>
<img src="как-тестировать-сервера-googlevideo-10609/afa59b06d25fc558ff61bddd8559d4cb8418d882.png" alt="image" data-base62-sha1="p3QmFulScqGDanyuVvJcrdubsL8" width="640" height="147"></p></td><td>2024-09-23T01:08:55.050Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Также есть сервера <code>googlevideo</code>, которые возвращают статус 200, но делают это с задержкой 5-10 секунд, что фактически говорит о том, что GoodbyeDPI на этот сервер не работает должным образом и блокировку не обходит.<br>
Как такие тестировать?</p></td><td>2024-09-23T02:17:24.329Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>А как этот пэйлоад к блокчеку прикрутить, чтобы он начал его использовать?</p></td><td>2024-09-23T06:10:21.423Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Подождем ответа от автора запрета <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/886" class="inline-onebox">Zapret: обсуждение - #886 by TesterTi</a></p></td><td>2024-09-23T10:25:29.910Z</td></tr><tr><td>KDS</td><td><p>Пейлоад должен быть в формате файла .bin<br>
Прикрутить к конфигу его можно с помощью параметра <code>--dpi-desync-fake-tls=&lt;filename&gt;</code> где указать этот самый *.bin.<br>
Например <code>--dpi-desync-fake-tls=tls_clienthello_gosuslugi_ru.bin</code><br>
Файл класть в ту же папку, где лежит winws.exe</p>
<p>Если хочется длинную строку, как в GDPI то просто в эту же команду вместо имени файла вставляем строку, добавив спереди 0x<br>
<code>--dpi-desync-fake-tls=0x160301FFFF01FFFFFF0303594F5552204144564552544953454D454E542048455245202D202431302F6D6F000000000009000000050003000000</code></p></td><td>2024-09-23T10:35:36.580Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Тут вопрос так понимаю, был именно про блокчек, как туда добавить, т.е. при поиске стратегий.</p></td><td>2024-09-23T11:03:23.111Z</td></tr><tr><td>KDS</td><td><p>Блин, действительно. Почему-то блокчек прочел как запрет <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"> Там фейк есть, но из нескольких нулей<br>
А вообще - в блокчеке и так есть куча фейков (целая папка blockcheck\zapret\files\fake) так что вряд ли туда что-то надо дополнительно прикручивать.<br>
Но можно положить свой bin в эту папку и блокчек его подхватит при проверке, если я правильно понял строчку<br>
<code>pktws_curl_test_update_vary $1 $2 $3 $desync --dpi-desync-fake-syndata="$ZAPRET_BASE/files/fake/$s" $e &amp;&amp; [ "$SCANLEVEL" = quick ] &amp;&amp; return</code><br>
в баше</p></td><td>2024-09-23T11:18:04.171Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А я так понимаю, что подхватит, только если самому вписать. Ну исходя из того, что bolvan написал. Но наберемся терпения и  дождемся его уточнения)</p></td><td>2024-09-23T11:21:09.649Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Keksimus" data-post="40" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>как этот пэйлоад к блокчеку прикрутить, чтобы он начал его использовать</p>
</blockquote>
</aside>
<p>К блокчеку - хз, автора спрашивать надо.</p>
<aside class="quote no-group" data-username="sfs56819" data-post="38" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>Один раз curl проходит, через секунду нет, просто висит и таймер тикает</p>
</blockquote>
</aside>
<p>Я сам с таким никогда не сталкивался. Можете сказать что у вас за стратегия?</p>
<p>Может ли эта проблема быть следствием популяризовавшейся нынче --fake-gen 13 и выше? Возможно, с такой стратегией, тут не столько “маскировка” трафика, сколько заваливание ТСПУ потоком мусора, пока он не сглючит и не пропустит? Отсюда и нестабильность работы?</p>
<p>Но если у вас более “цивильная” стратегия, то хз чем это может быть вызвано.</p>
<p>Энивей, на почве данной проблемы, я написал батник - и для вас, и для себя, и для всех желающих. Он там ряд тестов курлом проводит, чтобы руками этим не заниматься постоянно.<br>
Могут быть баги.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">::by Ori
@echo off
title Connection and Bandwidth Test

for /F "tokens=1,2 delims= " %%i in ('curl -V') do (if "%%i"=="curl" set version=%%j)
for /F "tokens=1,2 delims=." %%i in ("%version%") do (set MajorVersion=%%i &amp;&amp; set MinorVersion=%%j)
if %MajorVersion% LSS 8 (goto OUTDATED)
if %MinorVersion% LSS 10 (goto OUTDATED)

set "connect_to_url=speedtest.selectel.ru"
set volume_to_transfer=10
set attempts=10

set /A time_to_transfer=%volume_to_transfer%/2

:USERINPUT
cls
echo.
set /P url="Input URL to test: "
if not defined url (goto USERINPUT)

set "url=%url:https://=%"
set "url=%url:http://=%"
for /F "tokens=1 delims=/" %%n in ("%url%") do set url=%%n
set "url=https://%url%"

cls

echo.
echo ^&gt; Testing connectivity with %url%
echo.
curl -sSo NUL -m 2 -w "\nRemote IP: %%{remote_ip}\nRedirect URL: %%{redirect_url}\n\nHTTP version: %%{http_version}\n\nTime - DNS Lookup:\t%%{time_namelookup}\nTime - Connection:\t%%{time_connect}\nTime - Handshake:\t%%{time_appconnect}\n\nTime - Total:\t\t%%{time_total}\n\nBytes received in header: %%{size_header}\n\n" %url%
if %ERRORLEVEL%==0 (echo Test passed) else (echo Test failed)
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing QUIC connectivity with %url%
echo.
curl -sSo NUL -m 2 --http3-only -w "\nRemote IP: %%{remote_ip}\nRedirect URL: %%{redirect_url}\n\nHTTP version: %%{http_version}\n\nTime - DNS Lookup:\t%%{time_namelookup}\nTime - Connection:\t%%{time_connect}\nTime - Handshake:\t%%{time_appconnect}\n\nTime - Total:\t\t%%{time_total}\n\nBytes received in header: %%{size_header}\n\n" %url%
if %ERRORLEVEL%==0 (echo Test passed) else (if %ERRORLEVEL%==95 (echo Test passed) else (echo Test failed))
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing channel bandwidth using %connect_to_url% and SNI of %url%; volume to transfer: %volume_to_transfer%MB
echo.
set speed=0
for /F %%i in ('curl -ko NUL -m %time_to_transfer% --connect-to ::%connect_to_url% %url%/%volume_to_transfer%MB -w "%%{speed_download}\n\n"') do set speed=%%i
set /A speed=%speed%/1024
echo.
echo Average channel bandwidth estimated by curl: %speed%KB/s
set speed=
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing connection stability with %url%, %attempts% attempts
echo.
set successes=0
set counter=%attempts%
:LOOP
for /F %%g in ('curl -so NUL -m 1 %url% -w "%%{response_code}\n"') do set code=%%g
echo Response code: %code%
if not %code%==000 (set /A successes=%successes%+1)
set /A counter=%counter%-1
if not %counter%==0 (goto LOOP)
echo.
echo Succesful connections: %successes% out of %attempts%
set successes=
set counter=
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing QUIC connection stability with %url%, %attempts% attempts
echo.
set successes=0
set counter=%attempts%
:LOOP_QUIC
for /F %%g in ('curl -so NUL --http3-only -m 1 %url% -w "%%{response_code}\n"') do set code=%%g
echo Response code: %code%
if not %code%==000 (set /A successes=%successes%+1)
set /A counter=%counter%-1
if not %counter%==0 (goto LOOP_QUIC)
echo.
echo Succesful connections: %successes% out of %attempts%
set successes=
set counter=
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing connection stability with %url%, 10 attempts in parallel
echo.
curl -sSZm 3 --parallel-immediate --parallel-max 10 %url% %url% %url% %url% %url% %url% %url% %url% %url% %url% &gt; NUL
echo.
if %ERRORLEVEL%==0 (echo Test passed) else (echo Test failed)
echo.

echo ------------------------------------------
echo.
echo ^&gt; Testing QUIC connection stability with %url%, 10 attempts in parallel
echo.
curl -sSZm 3 --http3-only --parallel-immediate --parallel-max 10 %url% %url% %url% %url% %url% %url% %url% %url% %url% %url% &gt; NUL
echo.
if %ERRORLEVEL%==0 (echo Test passed) else (if %ERRORLEVEL%==95 (echo Test passed) else (echo Test failed))
echo.

echo ------------------------------------------
echo.
set url=
choice /C YN /M "Another test?"
if %ERRORLEVEL%==1 (goto USERINPUT)

:EOF
set version=
set MajorVersion=
set MinorVersion=
set connect_to_url=
set volume_to_transfer=
set time_to_transfer=
set attempts=
exit /b

:OUTDATED
set version=
set MajorVersion=
set MinorVersion=
echo.
echo Curl outdated.
echo Obtain actual version at https://curl.se/
echo.
echo Press any button to exit...
pause&gt;NUL
exit /b
</code></pre>
</details>
<p>Обновил скрипт еще раз, добавил тесты для quic + более очевидный вывод курла.<br>
И ещё раз. Теперь ситуации когда соединение повисает после хэндшейка видны по кол-ву полученных байт.</p></td><td>2024-09-23T14:53:17.699Z</td></tr><tr><td>KDS</td><td><p>Я тут, как мамкин ЛОХализатор, немного подсуетился ))<br>
<a class="attachment" href="как-тестировать-сервера-googlevideo-10609/mPFiGCte6Kl2SFxQbqQyIgwhdYe.cmd">ConnTest.cmd</a> (2,4 КБ)</p>
<p>И что-то виндовый (Windows 11) курл плохо подходит, надо кидать в папку со скачанным.</p></td><td>2024-09-23T15:19:59.426Z</td></tr><tr><td>Ori</td><td><p>Блин, с виндоусовским я не пробовал, ща посмотрю в чем там проблема.</p>
<p>Не, виндоусовский это параша. Я даже не буду думать как это починить. Можно попробовать проверку версии прикрутить, но мне впадлу.</p></td><td>2024-09-23T15:22:10.359Z</td></tr><tr><td>Keksimus(Tony)</td><td><pre><code class="lang-auto">Testing QUIC connectivity with https://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com

curl: option --http3-only: the installed libcurl version doesn't support this
</code></pre>
<p>Нас тут таких много наверно, кто под виндой сидит).<br>
Как обновить встроенный в винду curl тоже не ясно<br>
Нужно наверно отдельную тему создать для “нубских вопросов”)</p></td><td>2024-09-23T15:42:20.855Z</td></tr><tr><td>Ori</td><td><p>Добавил проверку версии курла. В качестве минимума поставил 8.10.</p></td><td>2024-09-23T16:19:08.791Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ух ты, круто!</p></td><td>2024-09-23T16:44:18.063Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Обновил curl, теперь заработало</p>
<pre><code class="lang-auto">&gt; Testing QUIC connectivity with https://rr8---sn-ov8vuxaxjvh-v8ce.googlevideo.com

curl: (95) HTTP/3 stream 0 reset by server
Lookup time:    0.003132
Connect time:   0.003644
AppCon time:    0.003644
Redirect time:  0.000000
PreXfer time:   0.013022
StartXfer time: 0.014052

Total time:     0.014353
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" href="как-тестировать-сервера-googlevideo-10609/55bed8923d76cb44c3ad461f4625704cea31de69.png" data-download-href="https://ntc.party/uploads/default/55bed8923d76cb44c3ad461f4625704cea31de69" title="Screenshot 2024-09-23 235410"><img src="как-тестировать-сервера-googlevideo-10609/55bed8923d76cb44c3ad461f4625704cea31de69.png" alt="Screenshot 2024-09-23 235410" data-base62-sha1="cextb3mEBcwc2dSwv0w0HYRUvO1" width="690" height="161" data-dominant-color="503D3D"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screenshot 2024-09-23 235410</span><span class="informations">1247×291 8.54 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Теперь надо пэйлоад в конфиг дописать если я правильно понимаю<br>
<code>NFQWS_OPT_DESYNC="--dpi-desync=fake --dpi-desync-ttl=4 --dpi-desync-fake-tls=tls_clienthello_gosuslugi_ru.bin"</code><br>
Эта рабочая конструкция? Путь до фейков  нужно полностью прописывать или так оставить?</p></td><td>2024-09-23T17:11:25.691Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>У вас на роутере запрет стоит что ли?</p></td><td>2024-09-23T17:14:08.733Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>zapret на роутере, но блокчек использую из под винды</p></td><td>2024-09-23T17:15:10.737Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ясно. Насколько понимаю, путь нужен полный, либо в той же папке лежать фейк.</p></td><td>2024-09-23T17:18:11.212Z</td></tr><tr><td>Ori</td><td><p>Про фейк вам уже выше сказали, но лучше использовать фейк от гугла, а не от госуслуг.<br>
Ещё у меня quic работает только с добавлением --dpi-desync-repeats, но у вас, видимо, и так ок.</p>
<p>Скрипт я там ещё немного обновил, btw. Вообще, надо туда, наверное, еще тестов квика напихать побольше, но потом уже.</p></td><td>2024-09-23T17:42:07.081Z</td></tr><tr><td>username1(name1)</td><td><aside class="quote no-group" data-username="Ori" data-post="56" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Ещё у меня quic работает только с добавлением --dpi-desync-repeats</p>
</blockquote>
</aside>
<p>А у меня quic так и продолжает отваливаться через какое-то время. Сначала всё идёт нормально, но в конечном итоге снова переходит на h/1.1, даже с вашим конфигом. Иногда просто само по себе слетает с h/3 до h/1.1, иногда после ошибки, иногда после перезагрузки страницы. Хотя видео конечно и так работают, а это самое главное.</p>
<p><img src="как-тестировать-сервера-googlevideo-10609/3a4a148786e1f5c7b4a17e0ae6b13f8ad47aeb68.jpeg" alt="1" data-base62-sha1="8jEpnBJOo5sUWEWA0FIyb1eQDsA" width="671" height="356"></p></td><td>2024-09-23T18:00:17.127Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Нашел более менее рабочий способ фильтровать неработающие сервера. Меняем в файле <code>blockcheck.sh</code> 2 секунды на 0.5<br>
<code>CURL_MAX_TIME=${CURL_MAX_TIME:-0.5}</code><br>
И ставим количество тестов 5 или больше. Большинство неработающих стратегий отваливаются уже на тестировании. Плюс тестирование идет значительно быстрее.</p></td><td>2024-09-23T18:00:31.276Z</td></tr><tr><td>Ori</td><td><p>Ну фиг знает. Попробуйте может свой собственный фейк записать, прям со своего браузера. Может лучше будет. Или наоброт мусорный мини-фейк использовать. У меня от такая хрень работала, 144 байта. С 2 повторами, или с 11.<br>
<a class="attachment" href="как-тестировать-сервера-googlevideo-10609/mNFZ94NBT0ZmaoowEtoJJVanii0.bin">quic_test_FF.bin</a> (144 байта)</p></td><td>2024-09-23T18:06:35.737Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Я вот тут подумал, если ли способ вычислять ближайшие ggc сервера? То есть не через бровзер, а через какой-нибудь api, к примеру.</p></td><td>2024-09-24T10:45:36.955Z</td></tr><tr><td>Ori</td><td><p>А зачем? Всё равно же нельзя ютуб заставить тащить видео с какого-то конкретного сервера, даже если его адрес знаешь. В ytdlp тоже такого функционала нет.</p></td><td>2024-09-24T11:26:46.666Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Просто мысль.<br>
Я там вчера ковырял старый скрипт блокчека от Валдика, пришел к выводу, что  особого смысла в нем нет, там придется половину дописывать, по сути повторять блокчек запрета. В общем, еще один велосипед. Но было бы круто прикрутить к этому велосипеду чек ближайших к пользователю ggc, чтобы уже на основе их искать стратегию. Не все могут нажать f12 и посмотреть videoplayback, тем более найти в нем нужный адрес.</p></td><td>2024-09-24T12:03:54.946Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А у ютуба есть открытое api  и документация по нему? Или у них закрытый код? Что-то мне подсказывает, что второе…</p></td><td>2024-09-24T12:21:04.722Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Там есть API, но оно для юзеринтерфейсов, типа как инвидоус. Большего там не получить.</p></td><td>2024-09-24T12:36:17.592Z</td></tr><tr><td>Ori</td><td><p>Можно вытащить идентификатор кластера из <a href="https://redirector.googlevideo.com/report_mapping?di=no" rel="noopener nofollow ugc">https://redirector.googlevideo.com/report_mapping?di=no</a> скриптом, потом найти айпишники <code>rr1.идентификатор.googlevideo.com</code> и тестить по айпи, подсовывая SNI <code>googlevideo.com</code>, чтобы коробка активизировалась. Но это даст только провайдерские кэши, а не все ближайшие.</p>
<p>Получится что-то типа <code>curl https://googlevideo.com --connect-to ::айпишник</code></p></td><td>2024-09-24T13:06:55.695Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="Ori" data-post="65" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Но это даст только провайдерские кэши, а не все ближайшие.</p>
</blockquote>
</aside>
<p>А в чем разница? <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p></td><td>2024-09-24T13:08:28.116Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Вот это как раз то самое, что искал. Спасибо. Будем думать по поводу реализации. <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"><br>
По сути, нужны как раз провайдерские кеши, потому как труба в первую очередь ломится в них. Автоматизировать перебор дальше по сети нет смысла, их тысячи, там уже вручную.</p></td><td>2024-09-24T13:45:55.079Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Если курлить предложенным конфигом там ошибка SEC_E_WRONG_PRINCIPAL.<br>
А вот на хухел реагирует, возвращает 301.<br>
На ютуб вообще не курлится.</p>
<p>По сути любой ответ годен, кроме 403. А вот как чекать рабочее замедление? Наверное только так<br>
curl -k -o NUL <a href="https://qwe.googlevideo.com/10MB" rel="noopener nofollow ugc">https://qwe.googlevideo.com/10MB</a> --connect-to ::ip<br>
И как-то смотреть на деградацию скорости. У меня, к примеру, по нулям сходу. Курл возвращает 35.<br>
Собственно, вот и методика.</p></td><td>2024-09-24T14:08:53.150Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Это хороший метод, но не универсальный. К примеру, у меня за всеми новыми видео, которых еще нет в кеше у провайдера, гугл шлет на зарубежные ip (ну или наши, на 2 разных сайтах по этим ip были разные результаты). А их этим методом не вычислишь. Без них видео не играет. И для них нужны другие настройки, не как для ggc провайдера</p></td><td>2024-09-24T14:38:26.052Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="Ori" data-post="65" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Можно вытащить идентификатор кластера из <a href="https://redirector.googlevideo.com/report_mapping?di=no" rel="noopener nofollow ugc">https://redirector.googlevideo.com/report_mapping?di=no</a> скриптом, потом найти айпишники <code>rr1.идентификатор.googlevideo.com</code> и тестить по айпи, подсовывая SNI <code>googlevideo.com</code>, чтобы коробка активизировалась. Но это даст только провайдерские кэши, а не все ближайшие</p>
</blockquote>
</aside>
<p>Короче, переделал свой скрипт для курления, чтобы он автоматом тестил провайдерские сервера. Версия очень сырая + мне не нравится как он результаты выводит. Надо все переделать. Но работать вроде работает.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">::by Ori
chcp 1251
@echo off
title Connection and Bandwidth Test
cls

::Checking Curl version
for /F "tokens=1,2 delims= " %%i in ('curl -V') do (if "%%i"=="curl" set version=%%j)
for /F "tokens=1,2 delims=." %%i in ("%version%") do (set MajorVersion=%%i &amp;&amp; set MinorVersion=%%j)
if %MajorVersion% LSS 8 (goto OUTDATED)
if %MinorVersion% LSS 10 (goto OUTDATED)

::Setting variables
set "connect_to_url=speedtest.selectel.ru"
set volume_to_transfer=10
set attempts=10

set /A time_to_transfer=%volume_to_transfer%/2

::Parsing claster codename
echo.
for /F "tokens=3 delims= " %%i in ('curl -sSm 2 "https://redirector.googlevideo.com/report_mapping?di=no"') do (set claster=%%i)
if not %ERRORLEVEL%==0 (echo Failed!)
echo ^&gt; Claster codename: %claster%

::Testing loop
set ggcCounter=1
:GGCLOOP
::FAILLEVEL 0=allgreen;1=QUIC fail;2=total fail
set FAILLEVEL=0

::Forming URL
echo.
echo ------------------------------------------
echo.

set ggcURL=https://rr%ggcCounter%.%claster%.googlevideo.com
echo ^&gt; Cache Server %ggcCounter%: %ggcURL%
set /A ggcCounter=%ggcCounter%+1

::Parsing IP address, not needed?
::for /F %%i in ('curl -sSkm 2 -o NUL -w "%%{remote_ip}" %ggcURL%') do (set ggcIP=%%i)
::echo ^&gt; Cache Server IP: %ggcIP%

echo.
echo --------------------
echo.

echo ^&gt; Testing connectivity...
echo.
curl -sSko NUL -m 2 -w "DNS_T: %%{time_namelookup} µs  - Connection_T: %%{time_connect} µs  - Handshake_T: %%{time_appconnect} µs  - Total_T: %%{time_total} µs  - Header: %%{size_header} bytes\n\n" %ggcURL%
if not %ERRORLEVEL%==0 (set FAILLEVEL=2)
if %FAILLEVEL%==2 ((echo Test failed) &amp;&amp; (goto END))
echo Test passed

echo.
echo --------------------
echo.

echo ^&gt; Testing QUIC connectivity...
echo.
curl -sSko NUL -m 2 --http3-only -w "DNS_T:%%{time_namelookup} µs - Connection_T: %%{time_connect} µs - Handshake_T: %%{time_appconnect} µs - Total_T: %%{time_total} µs - Header: %%{size_header} bytes\n\n" %ggcURL%
if %ERRORLEVEL%==0 (echo Test passed) else (if %ERRORLEVEL%==95 (echo Test passed) else ((set FAILLEVEL=1) &amp;&amp; (echo Test failed)))

echo.
echo --------------------
echo.

echo ^&gt; Testing channel bandwidth using %connect_to_url%, %volume_to_transfer%MB
echo.
set speed=0
for /F %%i in ('curl -sko NUL -m %time_to_transfer% --connect-to ::%connect_to_url% %ggcURL%/%volume_to_transfer%MB -w "%%{speed_download}"') do set speed=%%i
set /A speed=%speed%/1024
echo Average channel bandwidth estimated by curl: %speed%KB/s
set speed=

echo.
echo --------------------
echo.

echo ^&gt; Testing connection stability, %attempts% attempts
echo.
set successes=0
set counter=%attempts%
:LOOP
for /F %%g in ('curl -sko NUL -m 1 %ggcURL% -w "%%{response_code}"') do set code=%%g
::echo Response code: %code%
if not %code%==000 (set /A successes=%successes%+1)
set /A counter=%counter%-1
if not %counter%==0 (goto LOOP)
echo Succesful connections: %successes% out of %attempts%
set successes=
set counter=

if %FAILLEVEL%==1 (goto SKIPQUIC)

echo.
echo --------------------
echo.

echo ^&gt; Testing QUIC connection stability, %attempts% attempts
echo.
set successes=0
set counter=%attempts%
:LOOP_QUIC
for /F %%g in ('curl -sko NUL --http3-only -m 1 %ggcURL% -w "%%{response_code}"') do set code=%%g
::echo Response code: %code%
if not %code%==000 (set /A successes=%successes%+1)
set /A counter=%counter%-1
if not %counter%==0 (goto LOOP_QUIC)
echo Succesful connections: %successes% out of %attempts%
set successes=
set counter=

:SKIPQUIC1

echo.
echo --------------------
echo.

echo ^&gt; Testing connection stability, 10 attempts in parallel
echo.
curl -skZm 3 --parallel-immediate --parallel-max 10 %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% &gt; NUL
if %ERRORLEVEL%==0 (echo Test passed) else (echo Test failed)

if %FAILLEVEL%==1 (goto END)

echo.
echo --------------------
echo.

echo ^&gt; Testing QUIC connection stability, 10 attempts in parallel
echo.
curl -skZm 3 --http3-only --parallel-immediate --parallel-max 10 %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% %ggcURL% &gt; NUL
if %ERRORLEVEL%==0 (echo Test passed) else (if %ERRORLEVEL%==95 (echo Test passed) else (echo Test failed))

:END

echo.
echo --------------------
echo.

pause

goto GGCLOOP

:EOF
set version=
set MajorVersion=
set MinorVersion=
set connect_to_url=
set volume_to_transfer=
set time_to_transfer=
set attempts=
exit /b

:OUTDATED
set version=
set MajorVersion=
set MinorVersion=
echo.
echo Curl outdated.
echo Obtain actual version at https://curl.se/
echo.
echo Press any button to exit...
pause&gt;NUL
exit /b
</code></pre>
</details></td><td>2024-09-24T15:04:14.691Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Скрипт надежный как швейцарские часы <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"><br>
<img src="как-тестировать-сервера-googlevideo-10609/61de0102116e8e8ee9654d8344ba3cfef02a5358.png" alt="image" data-base62-sha1="dXLXgoaVd7Xkvr7VrpoN3qm8GPS" width="344" height="124"><br>
Чисто для шарящих. Простой юзер пройдет мимо. <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"></p></td><td>2024-09-24T15:12:26.260Z</td></tr><tr><td>Ori</td><td><p>Не ну а че, в виндоусовской версии даже http3 нет.</p></td><td>2024-09-24T15:13:11.637Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Ну вот и я о том же.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="как-тестировать-сервера-googlevideo-10609/297f237dc3560118fa3e2d380709b5f881ecf9d3.png" data-download-href="https://ntc.party/uploads/default/297f237dc3560118fa3e2d380709b5f881ecf9d3" title="image"><img src="как-тестировать-сервера-googlevideo-10609/297f237dc3560118fa3e2d380709b5f881ecf9d3.png" alt="image" data-base62-sha1="5V5Y708axjA9ZrCkPs1wDqJ6JoL" width="690" height="269" data-dominant-color="202020"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">978×382 10.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2024-09-24T15:14:05.358Z</td></tr><tr><td>Ori</td><td><p>Блин, там еще и кодировка поехала я смотрю. Не надо было букву мю для микросекунд вставлять.</p></td><td>2024-09-24T15:14:56.517Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Да вообще скрипт не отлажен.<br>
<img src="как-тестировать-сервера-googlevideo-10609/df9533c73512a791331402ce1e948a57517cf6a3.png" alt="image" data-base62-sha1="vTU8Hdlja4y3IEP4iK4tFymPqwP" width="558" height="172"></p></td><td>2024-09-24T15:20:30.843Z</td></tr><tr><td>Ori</td><td><p>Ну я и говорю сырой.</p></td><td>2024-09-24T15:22:38.149Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Сейчас выяснил интересную штуку. Если парсить блокчеком адрес <a href="http://rr1.xn--80apjdpy6f.googlevideo.com" rel="noopener nofollow ugc">rr1.имяпула.googlevideo.com</a>, то методов обхода не будет. А вот если <a href="http://rr1.xn--80aaadacnfhb0afsv0aalc1bm22a.googlevideo.com" rel="noopener nofollow ugc">rr1.кодированнаябелиберда.googlevideo.com</a>, тогда стратегия найдется. В общем, эти домены походу настроены на разные протоколы, пока не проверял.<br>
Так что способ с получением зоны всё же не работает.<br>
Когда-то давно я встречал где-то объяснение, как декодировать пул, а вот где - уже не помню.</p>
<p>ЗЫ. Вспомнил. И нашел.<br>
Алгоритм моноалфавитной перестановки.</p>
<p>0123456789abcdefghijklmnopqrstuvwxyz - берем позицию<br>
uzpkfa50vqlgb61wrmhc72xsnid83ytoje94  - берем значение на позиции из верхней строки</p>
<p>В обе стороны работает. Поэтому после получения из репорт-маппинга нужно преобразовать строку. То бишь у нас ссылки вида rr1.—sn-<strong>пул</strong>.googlevideo.com</p>
<p>Подробно <a href="https://lafibre.info/peering-google/ggc-google-global-cache-chez-sfr/msg239012/#msg239012" rel="noopener nofollow ugc">у французов</a>.</p></td><td>2024-09-24T16:16:25.037Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ничего себе, круть!</p></td><td>2024-09-24T16:46:17.012Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>У кого-нибудь получилось с помощью dpi вернуть работоспособность ютубу полностью, т.е. чтобы работал как обычно без малейших подтормазиваний при загрузке видео и перемотке? Напишите с какими настройками если такое получилось.</p></td><td>2024-09-24T16:51:55.046Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>У каждого провайдера свои настройки. Подбери алгоритм блокчеком и переведи настройки в gdpi. Там вряд ли получится полноценный аналог, но будет база от которой можно подбирать дальше.</p></td><td>2024-09-24T16:57:31.673Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Подбирать, конечно, можно. Так у вас получилось полностью восстановить работоспособность до того уровня, что был раньше? Или сейчас работает, но хуже?</p></td><td>2024-09-24T17:01:03.657Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Ну вот сегодня снова кинул чек, поменял стратегию, работает быстрее, чем до блокировки <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"><br>
Хотя я gdpi давно не пользуюсь, у меня zapret. Но настройки в моем случае имеют полноценные аналоги и в gdpi, и в byedpi - на смартфоне.</p></td><td>2024-09-24T17:02:49.049Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Какие у вас настройки, можете показать?</p></td><td>2024-09-24T17:04:10.795Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Cейчас у меня -e 2 --native-frag --fake-gen 1</p></td><td>2024-09-24T17:05:55.535Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>А в запрете это как выглядит у вас?</p></td><td>2024-09-24T17:08:19.639Z</td></tr><tr><td>KDS</td><td><p>Блин, дожили. Кидаешь настройки GDPI - просят запрет. Кидаешь запрет - просят GDPI <img src="https://ntc.party/images/emoji/twitter/rofl.png?v=12" title=":rofl:" class="emoji" alt=":rofl:" loading="lazy" width="20" height="20"></p>
<p>Как-то так, наверное <code>--dpi-desync=split2 --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin"</code></p></td><td>2024-09-24T17:10:00.577Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Просто хочется подобрать такие настройки, которые не придется завтра переделывать.</p></td><td>2024-09-24T17:11:52.310Z</td></tr><tr><td>KDS</td><td><p>А если fake-gen убрать?</p></td><td>2024-09-24T17:14:47.812Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Придется.<br>
РКН постоянно что-то крутят. Настройки могут слететь в любой момент, через минуту или через месяц, не угадать.<br>
Вот например у меня сейчас походу начали замедлять сам сайт ютуба. Потому что на приложухе в смарте летает будто бы я в офисе гугла сижу. А на десктопе едва загружается. Зато если прогрузит, то видео работает отлично.</p>
<p>ЗЫ. Так и есть, сайт ютуба теперь висит на сплите. При чем вообще пофиг, что на h2, что на h3.</p></td><td>2024-09-24T17:26:13.375Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Что-то у меня совсем перестал работать блокчек. Только <code>http</code> есть даже в режиме <code>force</code>.</p>
<pre><code class="lang-auto">ipv4 rr8---sn-n8v7kn7s.googlevideo.com curl_test_http : working without bypass
ipv4 rr8---sn-n8v7kn7s.googlevideo.com curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --hostcase
ipv4 rr8---sn-n8v7kn7s.googlevideo.com curl_test_https_tls12 : winws not working
ipv4 rr8---sn-n8v7kn7s.googlevideo.com curl_test_http3 : winws not working
</code></pre></td><td>2024-09-24T17:39:05.668Z</td></tr><tr><td>KDS</td><td><p>Сервак, наверное, охренел, от дрочки и по http и по https и по квику ) Зачем это все? Нужно только HTTPS TLS 1.3 и квик. Все.</p></td><td>2024-09-24T17:42:10.580Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Может, попробовать по совету автора запрета ?</p>
<blockquote>
<p>Кстати, стратегию можно искать блокчеком на каком-нибудь домене GGC, который не загружается через curl без обхода блокировок. При этом параллельно надо запустить<br>
<code>winws --wf-tcp=443 --wsize 1500.</code></p>
</blockquote></td><td>2024-09-24T17:42:55.196Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="KDS" data-post="91" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Сервак, наверное, охренел, от дрочки и по http и по https и по квику ) Зачем это все? Нужно только HTTPS TLS 1.3 и квик. Все.</p>
</blockquote>
</aside>
<p>Там у всех <code>Connection timed out</code></p></td><td>2024-09-24T17:58:48.496Z</td></tr><tr><td>KDS</td><td><p>На любом сервере? Или все на одном?<br>
Если там у всех - то или рабочих стратегий нет (заблочили покруче) или может виндиверт устал или еще чего… Может комп перезагрузить?<br>
Понимаю, что последний совет типа “выйти и зайти”, но все же</p></td><td>2024-09-24T18:01:32.969Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group quote-modified" data-username="TesterTi" data-post="92" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Может, попробовать по совету автора запрета ?</p>
<blockquote>
<p>Кстати, стратегию можно искать блокчеком на каком-нибудь домене GGC, который не загружается через curl без обхода блокировок.</p>
</blockquote>
</blockquote>
</aside>
<p>Я так и делаю, результат <a href="https://ntc.party/t/%D0%BA%D0%B0%D0%BA-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0-googlevideo/10609/90">тут</a></p>
<aside class="quote no-group quote-modified" data-username="TesterTi" data-post="92" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Может, попробовать по совету автора запрета ?</p>
<blockquote>
<p>При этом параллельно надо запустить<br>
<code>winws --wf-tcp=443 --wsize 1500.</code></p>
</blockquote>
</blockquote>
</aside>
<p>Зачем параллельно запускать?</p></td><td>2024-09-24T18:03:06.301Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="95" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>Зачем параллельно запускать?</p>
</blockquote>
</aside>
<aside class="quote" data-post="826" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/826">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Наоборот ! надо избавляться от window size от провайдера ! 
–wsize=1500 во все профили с tcp без хостлиста или с автолистом 
Если таковых нет, удовлетворяющих фильтру tcp, надо создать. 
Не знаю , может пров и не шлет wsize на не-443 портах. Надо бы проверить. 
И тогда лучше wsize не применять к другим портам
  </blockquote>
</aside>
</td><td>2024-09-24T18:05:16.041Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Еще пару дней назад работало, а сейчас что-то поломалось. Уже и curl обновил до 8.10.1. И запрет заново с гитхаба скачал. Думаю что-то с виндивертом случилось.</p></td><td>2024-09-24T18:05:57.649Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Нужно всё.<br>
Вот у меня, например, работает только tls2. Прямо вот с сейчас <img src="https://ntc.party/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"><br>
Tls3 видится, чекается, но не работает.</p>
<p>Снова что-то подкрутили. Теперь у меня сайт ютуба уехал в блокировку к остальным.</p></td><td>2024-09-24T18:07:36.884Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Что-то я совсем запутался как правильно блокчек запускать?</p></td><td>2024-09-24T18:08:12.258Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p><a href="https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck">https://ntc.party/t/%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%B4%D0%BB%D1%8F-ggc-%D1%8E%D1%82%D1%83%D0%B1%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-blockcheck</a><br>
Я делаю так) Но вот bolvan писал, что некоторые провайдеры желая починить ютуб, меняют wsize . Можно проверить, все равно вам терять нечего)</p></td><td>2024-09-24T18:09:58.907Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>У меня на всем кроме <code>http</code> выдает <code>winws not working</code>. Как это исправить?</p></td><td>2024-09-24T18:20:00.475Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group quote-modified" data-username="Keksimus" data-post="10" data-topic="10609" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>Имеется ввиду как проверить QUIC в blockchek т.к. по умолчанию blockcheck его не проверяет.</p>
<blockquote>
<p>clearing winws redirection</p>
<ul>
<li>SUMMARY<br>
ipv4 <a href="http://rr1---sn-ov8vuxaxjvh-v8cs.googlevideo.com" rel="noopener nofollow ugc">rr1—sn-ov8vuxaxjvh-v8cs.googlevideo.com</a> curl_test_http3 : winws not working</li>
</ul>
</blockquote>
</blockquote>
</aside>
<p>Вы как это исправили?</p>
<pre><code class="lang-auto">sc qc WinDivert
[SC] QueryServiceConfig SUCCESS

SERVICE_NAME: WinDivert
        TYPE               : 1  KERNEL_DRIVER
        START_TYPE         : 4   DISABLED
        ERROR_CONTROL      : 1   NORMAL
        BINARY_PATH_NAME   : \??\C:\Users\aajr\Downloads\zapret-win-bundle-master\blockcheck\zapret\nfq\WinDivert64.sys
        LOAD_ORDER_GROUP   :
        TAG                : 0
        DISPLAY_NAME       : WinDivert
        DEPENDENCIES       :
        SERVICE_START_NAME :
</code></pre></td><td>2024-09-24T18:21:35.778Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>С <code>winws --wf-tcp=443 --wsize 1500</code> блокчек выдает то же самое?</p></td><td>2024-09-24T18:26:53.547Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Может я как-то его не правильно запускаю. Вы как эту строчку запускаете?</p></td><td>2024-09-24T18:31:40.878Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Вторым экземпляром.<br>
То бишь сначала отдельно winws.exe --wf-tcp=443 --wsize 1500<br>
Потом блокчек.</p></td><td>2024-09-24T18:34:36.816Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="103" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p><code>winws --wf-tcp=443 --wsize 1500</code></p>
</blockquote>
</aside>
<p>Через _CMD_ADMIN.cmd можно<br>
<img src="как-тестировать-сервера-googlevideo-10609/fc22e628161a82487eb159791d2c5f9478dc0c8a.png" alt="cm" data-base62-sha1="zYv5N6SxMiqi2BVr7ruh2WVjmD8" width="675" height="339"></p></td><td>2024-09-24T18:34:40.146Z</td></tr><tr><td>KDS</td><td><p>Исправляется это просто - <code>sc delete windivert</code><br>
У вас служба задисейблилась почему-то<br>
А она при остановке должна вообще удаляться</p></td><td>2024-09-24T19:01:39.740Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Да в общем то ни как не исправил. Вставил правила от <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a>, на веру так сказать <img src="https://ntc.party/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:" loading="lazy" width="20" height="20"><br>
–dpi-desync=fake --dpi-desync-repeats=x</p>
<pre><code class="lang-auto">* SUMMARY
ipv4 rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com curl_test_https_tls12 : working without bypass
ipv4 rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com curl_test_https_tls13 : working without bypass
ipv4 rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com curl_test_http3 : winws not working
</code></pre>
<p>Интереснее что сейчас blockcheck вобще пишет что googlevideo работает без обхода, но если убрать googlevideo из хост листа то через какое то время появляются подвисания.</p>
<p>Может там правила уже автоматически по таймеру меняются <img src="https://ntc.party/images/emoji/twitter/melting_face.png?v=12" title=":melting_face:" class="emoji" alt=":melting_face:" loading="lazy" width="20" height="20"><br>
Буду дальше наблюдать.</p></td><td>2024-09-24T19:04:17.569Z</td></tr><tr><td>KDS</td><td><p>У меня это было так: Сначала стало грузится все, даже убитые 100 лет назад аватарки, причем безо всяких расширений по их возвращению. Не грузилось только видео. Потом заработало и оно. А так как я никогда модсет -9  и -q не использовал и QUIC в браузере не отрубал, внезапно я обнаружил, что пол-интерфейса и видео у меня работают по QUIC. Вернулся старый ютуб, так сказать. Блэклист ютуба я вообще убрал. С тех пор так и работает, уже больше недели. Может и у вас что-то подобное началось?</p></td><td>2024-09-24T19:22:22.274Z</td></tr><tr><td>Ori</td><td><p>Мама, я сделяль~<br>
Выкладываю файлом, а не текстом, иначе поедут кодировки.</p>
<p>Работает 3 способами.</p>
<ul>
<li>Запускаем, нажимаем enter - проверяется провайдер.</li>
<li>Запускаем, вводим ссылку на гуглвидео (типа такого <code>https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code>), проверяется соответствующий ggc.</li>
<li>Вызываем из командной строки с аргументом <code>GGCtest https://rr2---sn-gvnuxaxjvh-o8ge.googlevideo.com</code> - работает аналогично номеру 2.</li>
</ul>
<p>Нужен обновленный курл, естественно.</p>
<p>Если кто увидит баги - плиз, пишите.</p>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/efJXnP2ehAiYtFf1q34uRZ2AbbH.bat">GGCtest.bat</a> (7,3 КБ)</p></td><td>2024-09-24T19:30:59.946Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Читал выше, что я писал?<br>
Респонз от серваков с именем пула отличается от респонза с кодированным именем, как в запросах. В результате ты проверяешь то, что не работает в браузере, то есть смысла в этом нет. Нужно форматировать название и потом уже курлить.</p></td><td>2024-09-24T19:41:48.495Z</td></tr><tr><td>Ori</td><td><p>Читал. Я вообще искал инфу о том как мне превратить свой skynet-led2 в sn-n3toxu-axql, но ниче так и не вышло.</p>
<p>А айпи энивей одинаковый.</p>
<p>В курле он ругается на SSL сертификат, если не поставить флаг -k. Пробовал в блокчеке без проверки сертификатов прогонять? Мне кажется проблема в этом.</p>
<p>Мне вообще сложно тестить самому, т.к. у меня провайдерские ggc до ТСПУ стоят.</p>
<p>Добавил уборку мусора, чтобы переменными не засирать среду</p>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/4uNQrub0eSDNHRyBlm67pvLGafG.bat">GGCtest.bat</a> (7,6 КБ)</p></td><td>2024-09-24T19:47:33.798Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="Ori" data-post="112" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Я вообще искал инфу о том как мне превратить свой skynet-led2 в sn-n3toxu-axql</p>
</blockquote>
</aside>
<p>Я же написал как.</p>
<ol>
<li>Создаешь три массива, в первый засовываешь первую строку, разбив её по одному символу. Во второй массив - вторую строку. Получилось два массива по 36 символов. И третий - пустой.</li>
<li>Вычисляешь длину skynet-led2.</li>
<li>Циклом перебираешь по количеству символов. Берешь первый символ из skynet-led2, находишь его позицию в первом массиве, и берешь значение из этой же позиции во втором.</li>
<li>Записываешь в третий массив приращением.</li>
<li>Конкатенируешь третий массив в строку.</li>
<li>Профит.</li>
</ol>
<p>Это можно сделать даже в батнике.</p></td><td>2024-09-24T20:34:38.527Z</td></tr><tr><td>Ori</td><td><p>Это конечно супер здорово, но нафига? Айпи тот же, SNI <code>googlevideo.com</code> в запросе есть. Условия для активации коробки соблюдены.</p>
<p>А то что там какая-то ошибка сертификата, да и пофиг на нее.</p>
<p>Апдейт, выкинул тесты через selectel, кроме одного. Энивей коннект идет к нему, а не к целевым серверам.</p>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/tR2hbmAGbgiDkmK4t975DsPxhFI.bat">GGCtest.bat</a> (7,7 КБ)</p></td><td>2024-09-24T20:36:34.816Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Да вот не пофиг. Я же написал, для чего. Блокчек запрета выдает полное отсутствие стратегий, если указан такой адрес. Юпуп обращается через доменное имя, а не по адресу. Я более чем уверен, что видеоплейбек выдаст ошибку, если ему подсунуть адрес. И скорее всего у пакетов разные хедеры.<br>
К слову, на одном IP можно развернуть хоть миллион разных доменов <img src="https://ntc.party/images/emoji/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"> И это не значит, что все они  выдают одинаковый ответ.</p></td><td>2024-09-24T20:45:30.541Z</td></tr><tr><td>Ori</td><td><p>А я тебе написал что проблема блокчека вызвана сертификатом.</p>
<p>Какая разница куда обращается ютуп? Понятное дело что <code>rr1.skynet-led2 не заменит rr1---sn-n3toxu</code> в случае запроса на ютубе. Но мы не ютуб тестим а останавливающую силу коробки РКНа. Там поверяют айпи, SNI, иногда serverhello. Но гуглвидео на tls 1.3, ответ зашифрован, можно забить. Значит нам важны только целевой айпи и SNI. Айпи тот же, SNI мы подсовываем.</p>
<p>А то что на одном айпи много доменов, это очевидно. Поэтому фейки от <code>google.com</code> и проходят при доступе к ютубу.</p></td><td>2024-09-24T20:49:53.822Z</td></tr><tr><td>Keksimus(Tony)</td><td><p>Меняются правила блокировок на ТСПУ, или перекидывает на другие маршруты, неясно.<br>
Вот лог результатов за несколько дней:</p>
<details>
<summary>
Summary</summary>
<ul>
<li>
<p>SUMMARY 25.09.2024 3:30<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http : working without bypass<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : winws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 ntc.party curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=8<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2</p>
</li>
<li>
<p>SUMMARY 24.09.2024 20:00<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 youtu.be curl_test_http : working without bypass<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=11<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : winws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http3 : winws not working<br>
ipv4 ntc.party curl_test_http : winws --wf-l3=ipv4 --wf-tcp=80 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2 --dpi-desync-split-pos=1<br>
ipv4 ntc.party curl_test_http3 : winws not working</p>
</li>
<li>
<p>SUMMARY 24.09.2024 16:00<br>
ipv4 ntc.party curl_test_http : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : nfqws --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http : nfqws not working<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : nfqws --dpi-desync=fake --dpi-desync-ttl=3</p>
</li>
<li>
<p>SUMMARY 23.09.2024<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=9<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-ttl=4</p>
</li>
<li>
<p>SUMMARY  22.09.2024<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=11<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://youtube.com" rel="noopener nofollow ugc">youtube.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 youtu.be curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 youtu.be curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 youtu.be curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://i.ytimg.com" rel="noopener nofollow ugc">i.ytimg.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://yt3.ggpht.com" rel="noopener nofollow ugc">yt3.ggpht.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=5<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2<br>
ipv4 <a href="http://play.google.com" rel="noopener nofollow ugc">play.google.com</a> curl_test_http3 : winws --wf-l3=ipv4 --wf-udp=443 --dpi-desync=fake --dpi-desync-repeats=10<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7s.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7s.googlevideo.com</a> curl_test_http3 : winws not working<br>
ipv4 ntc.party curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=fake --dpi-desync-ttl=4<br>
ipv4 ntc.party curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=disorder2</p>
</li>
</ul>
</details>
<p>Еще было бы удобно если бы скрипт в имени лог файла писал время завершения проверки вида blockcheck-14:30-25.09.2004.log</p>
<p>Ну и в целом наверно нужно чтобы скрипт постоянно крутился на роутере или ПК и периодически проверял прописанные правила, и когда какое либо из правил переставало действовать - запускалась новая проверка по этому хосту, и после нахождения новой стратегии автоматически нерабочее правило менялось на новое и zapret продолжал работу.</p>
<p>Я это так вижу, а так выходит нужно по несколько раз в день запускать проверки и переписывать правила. А если таких роутеров будет несколько то вообще труба <img src="https://ntc.party/images/emoji/twitter/face_with_spiral_eyes.png?v=12" title=":face_with_spiral_eyes:" class="emoji" alt=":face_with_spiral_eyes:" loading="lazy" width="20" height="20"></p>
<p>Надо наверно в теме zapret это писать было <img src="https://ntc.party/images/emoji/twitter/see_no_evil.png?v=12" title=":see_no_evil:" class="emoji" alt=":see_no_evil:" loading="lazy" width="20" height="20"></p></td><td>2024-09-24T20:50:30.554Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="Ori" data-post="116" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>А то что на одном айпи много доменов, это очевидно. Поэтому фейки от <code>google.com</code> и проходят при доступе к ютубу.</p>
</blockquote>
</aside>
<p>Нет, не факт. Там кроссдомены. То есть один сертификат на целый ворох инстансов. Кстати, таким образом можно делегировать разные зоны. Смысла создавать отдельный сертификат чисто для хухелвидева нет. В этом нам повезло.<br>
Ну раз реально пофиг на адрес, тогда ладно.</p></td><td>2024-09-24T21:00:53.301Z</td></tr><tr><td>Ori</td><td><p>При небезопасном запросе, ответ от <code>https://rr1---sn-n3toxu-axql.googlevideo.com и от https://rr1.skynet-led2.googlevideo.com</code> идентичный, включая хедеры.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">C:\Users\1&gt;curl -iks https://rr1.skynet-led2.googlevideo.com
HTTP/1.1 404 Not Found
Date: Tue, 24 Sep 2024 21:03:43 GMT
Content-Type: text/html; charset=UTF-8
Server: gvs 1.0
Content-Length: 1561
X-XSS-Protection: 0
X-Frame-Options: SAMEORIGIN

&lt;!DOCTYPE html&gt;
&lt;html lang=en&gt;
  &lt;meta charset=utf-8&gt;
  &lt;meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width"&gt;
  &lt;title&gt;Error 404 (Not Found)!!1&lt;/title&gt;
  &lt;style&gt;
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  &lt;/style&gt;
  &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;
  &lt;p&gt;&lt;b&gt;404.&lt;/b&gt; &lt;ins&gt;That’s an error.&lt;/ins&gt;
  &lt;p&gt;The requested URL &lt;code&gt;/&lt;/code&gt; was not found on this server.  &lt;ins&gt;That’s all we know.&lt;/ins&gt;

C:\Users\1&gt;curl -iks https://rr1---sn-n3toxu-axql.googlevideo.com
HTTP/1.1 404 Not Found
Date: Tue, 24 Sep 2024 21:04:02 GMT
Content-Type: text/html; charset=UTF-8
Server: gvs 1.0
Content-Length: 1561
X-XSS-Protection: 0
X-Frame-Options: SAMEORIGIN

&lt;!DOCTYPE html&gt;
&lt;html lang=en&gt;
  &lt;meta charset=utf-8&gt;
  &lt;meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width"&gt;
  &lt;title&gt;Error 404 (Not Found)!!1&lt;/title&gt;
  &lt;style&gt;
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  &lt;/style&gt;
  &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;
  &lt;p&gt;&lt;b&gt;404.&lt;/b&gt; &lt;ins&gt;That’s an error.&lt;/ins&gt;
  &lt;p&gt;The requested URL &lt;code&gt;/&lt;/code&gt; was not found on this server.  &lt;ins&gt;That’s all we know.&lt;/ins&gt;
</code></pre>
</details>
<p>Вся проблема в том, что не проходит чек сертификата из-за лишнего поддомена. Собственно, как я и сказал с самого начала.</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto"> Server certificate:
*  subject: CN=*.googlevideo.com
*  start date: Aug 27 14:31:19 2024 GMT
*  expire date: Nov  5 14:31:18 2024 GMT
*  subjectAltName does not match hostname rr1.skynet-led2.googlevideo.com
</code></pre>
</details>
<p>PS: Конвертация действительно работает. Но я не вижу смысла писать скрипт. Но может быть напишу.</p></td><td>2024-09-24T21:07:43.256Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><pre><code class="lang-auto">sc delete windivert
[SC] DeleteService FAILED 1072:

The specified service has been marked for deletion.
</code></pre>
<p>А удалить-то как?</p></td><td>2024-09-24T22:15:23.103Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Команда от админа ведь запускается? И windivert не используется запретом, gdpi , не установлен как служба?</p></td><td>2024-09-24T22:25:01.676Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Все верно.</p>
<pre><code class="lang-auto">sc delete windivert
</code></pre>
<p>из коммандной строки, запущенной от админа.<br>
Службы не устанавливал, пока не нашел надежные настройки. Ни запрет, ни gdpi не запущены.</p></td><td>2024-09-24T22:32:41.393Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="120" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p><code>sc delete windivert</code></p>
</blockquote>
</aside>
<p>Попробуйте сначала <code>sc stop windivert</code>, а потом уже <code>sc delete windivert</code></p></td><td>2024-09-24T22:49:47.594Z</td></tr><tr><td>KDS</td><td><p>Походу, перезагрузка нужна</p></td><td>2024-09-24T22:50:10.886Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="manwithbox" data-post="111" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>Нужно форматировать название и потом уже курлить.</p>
</blockquote>
</aside>
<p>Ок, я добавил эту хрень, хоть и считаю это бесполезным.</p>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/5chitXwYYX14VhLA58eQox2J7uv.cmd">GGCtest.cmd</a> (9,8 КБ)</p>
<p>Крч, я беру свои слова назад,  на тему полезности. Нашлось интересное применение. Но не то, о котором я думал.</p>
<p>Дело в том, что когда с ВПНом заходишь на <code>https://redirector.googlevideo.com/report_mapping?di=no</code>, там пишет всякую дичь. И я хотел добавить в скрипт проверку, чтобы ловить ошибку в такой ситуации. Запустил скрипт, а он оказывается и так работает, лол… Не ожидал что он эту тарабарщину схавает.</p>
<p>upd: Запихнул переменную для прокси в конфиг, <strike>чтобы тестировать хорватские ноды</strike> :О<br>
btw они ничё такие, работают</p></td><td>2024-09-24T23:29:28.538Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Всё-таки я был прав, конвертировать не бесполезно.<br>
Я привык приводить данные к оригинальным, даже если в последствии они не используются. Это позволяет избежать вот таких внезапных приколов. Но по сути да, доменное имя напрямую нигде не используется.</p></td><td>2024-09-25T05:36:13.698Z</td></tr><tr><td>Ori</td><td><p>Добавил отображение среднего времени в последних тестах.<br>
Сраный батник даже не поддерживает числа с плавающей точкой. Такие костыли нелепые приходится городить чтобы это работало. Зачем я за это взялся я хз.</p>
<p><a class="attachment" href="как-тестировать-сервера-googlevideo-10609/mBPbPcniL8vgwyjJtPrIbtVMxPO.cmd">GGCtest.cmd</a> (10,7 КБ)</p></td><td>2024-09-25T06:41:39.815Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>Через powershell костыль можно сделать. Или хранить флоат в строковой переменной, так делали лет 20 назад, когда повершела не существовало.</p></td><td>2024-09-25T07:04:07.853Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>А теперь задачка потруднее.<br>
Вот у меня вчера закрыли даже сам сайт трубы. Соответственно, получить адреса я никак не могу. И я подтверждаю, что redirector.googlevideo недоступен, из за блока самого домена.<br>
Где брать адреса?<br>
Я вот думаю, может пора начать собирать базу адресов? <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"></p>
<p>ЗЫ. Запрет стал выдавать неправильные стратегии в заключении. То бишь они проходят проверку, но по факту нифига не работают. Вот мне на сайт выдало split2, а по факту должно fake.<br>
Что-то новенькое.</p></td><td>2024-09-25T07:11:07.297Z</td></tr><tr><td>KDS</td><td><p>Да-да, та же фигня. Сижу репу чешу, что это такое</p></td><td>2024-09-25T07:28:16.822Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>В общем, есть мысль.<br>
Про ютуб.<br>
Некоторые домены со скриптами теперь имеют другие стратегии.<br>
Пока не разобрался, какие именно, но если страница прогрузится хотя бы один раз, потом будет работать на той стратегии, которую выдавал запрет (то есть правильную, но не рабочую). Кеширование тут решает проблему.</p>
<p>ЗЫ. Не грузится js. Теперь скрипты замедленны отдельно, теперь уже точно.</p>
<p>ЗЫЫ. Факт, sheduler.js, desktop_polymer.js, www-l18n-constants.js не загружаются. А это основные скрипты.</p></td><td>2024-09-25T07:36:09.199Z</td></tr><tr><td>Keksimus(Tony)</td><td><aside class="quote no-group" data-username="manwithbox" data-post="129" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/manwithbox/48/8274_2.png" class="avatar"> manwithbox:</div>
<blockquote>
<p>ЗЫ. Запрет стал выдавать неправильные стратегии в заключении. То бишь они проходят проверку, но по факту нифига не работают.</p>
</blockquote>
</aside>
<p>У меня для одних адресов blockcheck находит обход а другие работают без обхода.</p>
<details>
<summary>
Summary</summary>
<p>ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_https_tls12 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq<br>
ipv4 <a href="http://rr9---sn-axq7sn7z.googlevideo.com" rel="noopener nofollow ugc">rr9---sn-axq7sn7z.googlevideo.com</a> curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split --dpi-desync-fooling=badseq</p>
<p>ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_http : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls12 : working without bypass<br>
ipv4 <a href="http://rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com" rel="noopener nofollow ugc">rr5---sn-ov8vuxaxjvh-v8ce.googlevideo.com</a> curl_test_https_tls13 : working without bypass</p>
</details></td><td>2024-09-25T08:48:07.282Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><aside class="quote no-group" data-username="Keksimus" data-post="132" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/k/6bbea6/48.png" class="avatar"> Keksimus:</div>
<blockquote>
<p>У меня для одних адресов blockcheck находит обход а другие работают без обхода.</p>
</blockquote>
</aside>
<p>Это так же может означать, что некоторые сервера уже с поддельным респонзом. А может и реально кто-то про них забыл.</p></td><td>2024-09-25T08:53:01.392Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><details>
<summary>
Спойлер</summary>
<p><a href="http://redirector.c.googlevideo.com/report_mapping?di=no">http://redirector.c.googlevideo.com/report_mapping?di=no</a><br>
<a href="https://redirector.gvt1.com/report_mapping?di=no">https://redirector.gvt1.com/report_mapping?di=no</a></p>
</details></td><td>2024-09-25T10:20:54.184Z</td></tr><tr><td>manwithbox(manwithbox)</td><td><p>То есть линки имеются, это хорошо.<br>
Лучше всего использовать адреса, не содержащие слово googlevideo. У меня, к примеру, все сабдомены закрыты, естественно. А вот gvt1 работает.<br>
А ещё есть адреса? Или это все?</p></td><td>2024-09-25T10:48:29.876Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Ну других мне не встречалось, к сожалению. Вот еще интересные ссылки, возможно, там есть что-то полезное<br>
<a href="https://groups.google.com/g/twitifungul/c/tZ1R5444bzs?pli=1" class="onebox" target="_blank" rel="noopener">https://groups.google.com/g/twitifungul/c/tZ1R5444bzs?pli=1</a></p><aside class="onebox allowlistedgeneric" data-onebox-src="https://support.google.com/interconnect/answer/7658745?hl=en">
  <header class="source">

      <a href="https://support.google.com/interconnect/answer/7658745?hl=en" target="_blank" rel="noopener">support.google.com</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://support.google.com/interconnect/answer/7658745?hl=en" target="_blank" rel="noopener">Carrier Grade NAT - Interconnect Help</a></h3>

  <p>Introduction This document describes how to configure Google Global Cache (GGC) nodes to operate with your Carrier Grade NAT (CGN) systems. Once configured, this allows traffic between the GGC node a</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2024-09-25T11:41:31.503Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Все равно <code>winws not working</code>, даже после перезагрузки.</p>
<pre><code class="lang-auto">* SUMMARY
curl_test_https_tls13 : working without bypass
curl_test_https_tls13 : winws --wf-l3=ipv4 --wf-tcp=443 --dpi-desync=split2
curl_test_http3 : winws not working
</code></pre>
<pre><code class="lang-auto">sc qc WinDivert
[SC] QueryServiceConfig SUCCESS

SERVICE_NAME: WinDivert
        TYPE               : 1  KERNEL_DRIVER
        START_TYPE         : 4   DISABLED
        ERROR_CONTROL      : 1   NORMAL
        BINARY_PATH_NAME   : \Downloads\zapret-win-bundle-master\blockcheck\zapret\nfq\WinDivert64.sys
        LOAD_ORDER_GROUP   :
        TAG                : 0
        DISPLAY_NAME       : WinDivert
        DEPENDENCIES       :
        SERVICE_START_NAME :
</code></pre></td><td>2024-09-25T21:10:09.486Z</td></tr><tr><td>KDS</td><td><p>Это всего лишь означает, что рабочих стратегий обхода не найдено. У меня на QUIC (http3) такая же фигня, заблочили намертво вчера<br>
По виндиверту тоже все в порядке, так и должно быть</p></td><td>2024-09-25T21:14:47.628Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>В браузере в этот же момент к этому же серверу идут пакеты <code>h3</code>. С задержкой, правда, но идут.</p></td><td>2024-09-25T21:17:18.871Z</td></tr><tr><td>KDS</td><td><p>У меня тоже ) Но ни один тест на квик на сайтах не проходит, вообще ничего через квик не работает, кроме этих странных пакетов. И это при том, что и квик в браузере отрублен и -q в GDPI стоит (до лучших времен). Это мистика )</p>
<p>Upd: Заработал квик на тестах на сайтах и на части ютуба, кроме, собственно, гуглвидео. Видимо, подкрутили</p></td><td>2024-09-25T21:22:04.380Z</td></tr><tr><td>Ori</td><td><p>Посмотри лог блокчека. Там скорее всего в разделе тестов QUIC идут ошибки 95. Блокчек их неудачей считает, а на практике всё работает с ними. У меня такая же история. И скорее всего у большинства.</p>
<p><a class="mention" href="/u/kds">@KDS</a> пробовал делать блокчек с пейлоадом quic_initial_google_com?</p></td><td>2024-09-25T21:53:01.969Z</td></tr><tr><td>KDS</td><td><p>Блин, забыл ( Как это сделать то, править баш блокчека?</p></td><td>2024-09-25T22:01:10.221Z</td></tr><tr><td>Ori</td><td><p>У тебя же винда?</p>
<ul>
<li>Кидаешь пейлоад рядом с блокчеком</li>
<li>Открываешь блокчек блокнотом</li>
<li>Под строчкой с <code>cd /d "%~dp0"</code> добавляешь строчку с доп параметрами <code>set "PKTWS_EXTRA=--dpi-desync-fake-quic=quic_initial_google_com.bin"</code></li>
<li>Сохраняешь</li>
<li>Запускаешь от админа. Именно от админа надо, а то не сработает.</li>
</ul></td><td>2024-09-25T22:04:39.501Z</td></tr><tr><td>KDS</td><td><p>Пока да, винда )<br>
Спс, счас попробую<br>
Вопрос - что не нравится тут запрету, почему не запускается, шволощ?</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">start "zapret: http,https,quic" /min "%~dp0winws.exe" ^
--wf-tcp=80,443 --wf-udp=443 ^
--filter-udp=443 --hostlist="%~dp0russia-youtube" --dpi-desync=fake --dpi-desync-repeats=10 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=80 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=fake,split2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtube" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-ttl=2 --new ^
--filter-tcp=443 --hostlist="%~dp0russia-blacklist.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-ttl=3 --new ^
--filter-tcp=443 --hostlist="%~dp0russia-youtube2.txt" --dpi-desync=split2 --dpi-desync-split-seqovl=1 --dpi-desync-split-tls=sniext --dpi-desync-ttl=3
</code></pre>
</details>
<p>Блин, он вообще в принципе не запускается, с любым CMD <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p>
<p>Неа, с фейком тоже не находит рабочих стратегий</p></td><td>2024-09-25T22:34:12.141Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="KDS" data-post="144" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/kds/48/12723_2.png" class="avatar"> KDS:</div>
<blockquote>
<p>Вопрос - что не нравится тут запрету, почему не запускается, шволощ?</p>
</blockquote>
</aside>
<p>Шволощу не нравится отсутствие расширений у 2 хостлистов</p></td><td>2024-09-25T23:29:42.244Z</td></tr><tr><td>KDS</td><td><p>Добавил ничего не поменялось (</p></td><td>2024-09-25T23:31:59.366Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Надо признавать стратегию нерабочей не только когда 2 секунды нет ответа от сервера, но и когда ответ приходит с нетипичными для этого сервера задержками. Это означает, что тспу замедляет пакеты. В текущем виде блокчек абсолютно не подходит для поиска стратегии обхода замедления ютуба.</p>
<aside class="quote no-group" data-username="Ori" data-post="141" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Посмотри лог блокчека. Там скорее всего в разделе тестов QUIC идут ошибки 95. Блокчек их неудачей считает, а на практике всё работает с ними. У меня такая же история. И скорее всего у большинства.</p>
</blockquote>
</aside>
<p>Так и есть.</p></td><td>2024-09-25T23:38:18.099Z</td></tr><tr><td>KDS</td><td><p>Понял, вписал первую попавшуюся с фейком - QUIC на гуглвидео поехал. типа ура )</p>
<p>Единственное - если вписываю фейк из файла для фильтрования сайтов с TLS 1.2, все становится раком и запрет не запускается ( Ковыряюсь дальше</p>
<p>Все приковырял, все что надо открывается, всем спасибо <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"> <img src="https://ntc.party/images/emoji/twitter/crazy_face.png?v=12" title=":crazy_face:" class="emoji" alt=":crazy_face:" loading="lazy" width="20" height="20"></p></td><td>2024-09-25T23:41:42.135Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Приветствую. Что тоже рубанули Ютуб?</p></td><td>2024-09-26T00:14:08.946Z</td></tr><tr><td>KDS</td><td><p>Ага, вчера ночью. Пришлось в срочном порядке изучать запрет, очень охота QUIC, сам не понимаю, зачем <img src="https://ntc.party/images/emoji/twitter/roll_eyes.png?v=12" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"> Наверное потому, что могу</p></td><td>2024-09-26T00:17:57.451Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Сорян все не осилил прочитать. Что там блок чек говорит?<br>
Попробуй с простого начать fake,split2 или fake,disorder2 далее консоль глянь будут ли ns binding aborted.</p></td><td>2024-09-26T00:18:57.073Z</td></tr><tr><td>KDS</td><td><p>Блокчек говорит, что рабочих стратегий нет, по итогу работает<br>
<code>--filter-udp=443 --hostlist="%~dp0russia-youtube.txt" --dpi-desync=fake --dpi-desync-repeats=3 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin"</code></p></td><td>2024-09-26T00:21:54.131Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Ого быстро решил. Конфиг у тебя необычный получился, не стандартный я бы сказал. Я тут spoof dpi заюзал на линупсе он достаточно бодро Ютуб оживляет. Но этот вариант не для винды<br>
П.с. так Квик ты можешь вкл выкл через браузер сделать не обязательно через дурилку или я чего-то не знаю</p></td><td>2024-09-26T00:26:35.883Z</td></tr><tr><td>KDS</td><td><p>Это не весь конфиг, это только фильтр для квика. Весь примерный конфиг можно в preset_russia.cmd посмотреть и поменять под себя<br>
На моем прове квик без дурилки на гуглкэшах не работает</p></td><td>2024-09-26T00:30:16.997Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>А то есть ты правишь стандартный конфиг от боалвана? Под себя.</p></td><td>2024-09-26T00:31:29.900Z</td></tr><tr><td>KDS</td><td><p>Естественно. Без примера я бы ни в жизнь в этой линуксятине не разобрался <img src="https://ntc.party/images/emoji/twitter/upside_down_face.png?v=12" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20"></p></td><td>2024-09-26T00:32:44.522Z</td></tr><tr><td>PirateSkull(unknown )</td><td><p>Ладненько удачи split2 и disorder2 в помощь <img src="https://ntc.party/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p></td><td>2024-09-26T00:36:34.851Z</td></tr><tr><td>KDS</td><td><p>Сенькаю, и тебе. Мне split2 хватает <img src="https://ntc.party/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
<p>И еще странно, что теперь QUIC чтобы включить в Хроме последнем, надо его именно в Enable перевести. Раньше на Default все работало</p></td><td>2024-09-26T00:37:27.597Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Хе, а у меня сегодня снова затупы начались на больших видео, еле как мог нормально прогрузить 360 градусный видос плюс иногда посреди просмотре дозагруз происходил. Перепроверил те адреса блокчеком, но показывает ту же стратегию со сплит2.</p></td><td>2024-09-26T20:10:43.187Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Написал я скрипт<br>
<a class="attachment" href="как-тестировать-сервера-googlevideo-10609/yElmzbfKi7K1GsWLL5QqCt76BrO.sh">gvt_test.sh</a> (3.0 KB)<br>
, который полностью дублирует запросы браузера к <code>googlevideo</code> в различных режимах и собирает статистику по времени ответа сервера. Открываю браузер, видео с этого сервера тормозит. А в curl все запросы отлично проходят совсем без задержек:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="как-тестировать-сервера-googlevideo-10609/ad69da04d47b6bbf190b62ddadbd0be02461f57a.png" data-download-href="https://ntc.party/uploads/default/ad69da04d47b6bbf190b62ddadbd0be02461f57a" title="image"><img src="как-тестировать-сервера-googlevideo-10609/ad69da04d47b6bbf190b62ddadbd0be02461f57a.png" alt="image" data-base62-sha1="oK5o5hPvp2BC1K621vNMXtEw2wi" width="690" height="416" data-dominant-color="252525"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">897×542 8.28 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
Даже не знаю в чем причина. Если кто-то хочет покрутить, скрипт во вложении.</p></td><td>2024-09-27T01:25:36.442Z</td></tr><tr><td>Ori</td><td><p>Потестил. Насчет тормозов не скажу, т.к. сам думал над этим и ниче не придумал.<br>
Но вот мне что интересно. Почему через баш и через командную строку такие разные результаты, аж в 2 раза, при том что команда для курла вроде та же?</p>
<details>
<summary>
Спойлер</summary>
<p><div class="lightbox-wrapper"><a class="lightbox" href="как-тестировать-сервера-googlevideo-10609/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a.png" data-download-href="https://ntc.party/uploads/default/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a" title="test"><img src="как-тестировать-сервера-googlevideo-10609/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a_2_690x375.png" alt="test" data-base62-sha1="srPQF77KKdVsDL8pV9f4zLPaW2S" width="690" height="375" srcset="как-тестировать-сервера-googlevideo-10609/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a_2_690x375.png, как-тестировать-сервера-googlevideo-10609/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a_2_1035x562.png 1.5x, как-тестировать-сервера-googlevideo-10609/c76267ce13a3bf85a0d2a0c1fcd546389cb0465a_2_1380x750.png 2x" data-dominant-color="727273"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">test</span><span class="informations">1808×984 107 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
</details>
<p>Или лыжи не едут, или я что-то упускаю.</p></td><td>2024-09-27T02:14:45.340Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="Ori" data-post="161" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Потестил. Насчет тормозов не скажу, т.к. сам думал над этим и ниче не придумал.</p>
</blockquote>
</aside>
<p>У вас тоже не получилось увидеть тормоза в курле?</p>
<aside class="quote no-group" data-username="Ori" data-post="161" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Но вот мне что интересно. Почему через баш и через командную строку такие разные результаты, аж в 2 раза, при том что команда для курла вроде та же?</p>
</blockquote>
</aside>
<p>Не знаю, может <code>cygwin</code> под виндой медленно работает.<br>
Я попытался максимально повторить в курле запрос браузера, но тспу на курл все равно не реагирует. Я даже урл использовал не только <code>googlevideo.com</code>, а весь длинный со всеми параметрами, Если не получится увидеть в курле тормоза, то и тестировать им тоже не выйдет. Может как-нибудь сделать, чтобы хром притворился курлом и его тоже блочить не будут <img src="https://ntc.party/images/emoji/twitter/face_in_clouds.png?v=12" title=":face_in_clouds:" class="emoji" alt=":face_in_clouds:" loading="lazy" width="20" height="20">?</p></td><td>2024-09-27T02:33:53.294Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="sfs56819" data-post="162" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>но тспу на курл все равно не реагирует</p>
</blockquote>
</aside>
<p>Я бы не сказал что ТСПУ не реагирует в моем случае. У меня всё сводится к 2 вариантам: либо курл показывает что всё окей, либо соединение полностью стопорится.</p>
<p>Единственное исключение - это сервера моего провайдера. Они до ТСПУ стоят, и с ними там странная история. Я тут уже много про это писал, но по сути, там проблема не на канале между мной и ими, а между ними и внешней сетью. Через курл это не увидеть, а вот через ytdlp - можно.</p>
<p>Выглядит это так: берешь какой-то супер-непопулярный зарубежный видос, начинаешь его качать. Yt-dlp присасывается к ближайшему серверу (т.е. провайдерскому). Скачка идет как черепаха. Потом останавливаешь на 50%, например. Удаляешь всё что накачалось и начинаешь заново. И - о, чудо! - до 50% скачивается за секунды, а потом опять начинает ползти как черепаха.<br>
То есть отдача уже закэшированного там идет быстро. Но сам сервер не может нормально получить данные извне.<br>
Хз, чем это вызвано. Перегрузка канала? Козни РКН?</p>
<p>Из-за этого мне пришлось в браузере заблочить провайдерские сервера через ublock. Они дикие таймауты при перемотках вызывали.</p></td><td>2024-09-27T02:49:13.433Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Вставлять нужно полный URL или только адрес домена? В одном случае у меня статусы 000 идут по всем протоколам, в другом 404.</p></td><td>2024-09-27T03:54:27.764Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Всегда 404, 200 вообще не было ни разу</p></td><td>2024-09-27T10:53:44.661Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>С чего вы решили, что сервер вам должен 200 отправлять? На этом сервере сайта нет. 404 это нормально это тоже ответ сервера, 200 не обязательно. Попробуйте через браузер зайти на корректный урл, например,<br>
<code>https://rr1---sn-n8v7znz7.googlevideo.com</code><br>
увидите не 200, а <code>ERR_CONNECTION_RESET</code> или <code>Status: 000</code> в тесте. Т.е. сервер не ответил, а он и не обязан был отвечать.<br>
На запрос<br>
<code>http://rr1---sn-n8v7znz7.googlevideo.com</code><br>
придет <code>Status: 404</code><br>
Это зависит от настроек сервера на что он отвечает, а на что нет.</p>
<aside class="quote no-group" data-username="GooseWing" data-post="164" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/goosewing/48/8002_2.png" class="avatar"> GooseWing:</div>
<blockquote>
<p>Вставлять нужно полный URL или только адрес домена?</p>
</blockquote>
</aside>
<p>Нужно пробовать. Цель полностью повторить запрос браузера в тесте. У меня не получилось подобрать такие параметры запроса, на которые тспу выдавал бы задержки идентичные браузеру. Вставлять нужно такой минимальный урл, на который поведение сервера будет таким же как и в браузере. Т.е. если в браузере запросы красные, то в тесте <code>Status: 000</code>. Если в браузере висит <code>Pending</code> и запросы приходят, но с задержками по 5-10 секунд, то такие же задержки должны быть в тесте. В скрипте нужно не только полный урл указывать, но и заголовки, пэйлоад конкретно ваши вставлять, может что-то еще, потому, что мы не знаем на что тригернет тспу.<br>
На данный момент курл показывает только ситуации когда сервер совсем ничего не отвечает, а замедление не показывает никак. Видимо нужно открывать Wireshark и более тщательно подделывать запрос браузера в скрипте.</p></td><td>2024-09-27T18:01:13.017Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>А нельзя в таком случае как-нибудь подвязать chromedriver? Вместо того, чтобы по кускам собирать запрос для курла, может сам браузер проще анализировать/модифицировать?</p></td><td>2024-09-27T18:39:34.369Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Как вы в браузере будете замерять задержки пакетов и перебирать несколько тысяч комбинаций различных настроек обхода блокировок?</p></td><td>2024-09-27T18:58:34.616Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Я лишь предлагаю мысль для развития идеи) Уж возможно это или нет, я сказать наверняка не могу.</p></td><td>2024-09-27T19:27:38.453Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="166" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>С чего вы решили, что сервер вам должен 200 отправлять? На этом сервере сайта нет. 404 это нормально это тоже ответ сервера, 200 не обязательно. Попробуйте через браузер зайти на корректный урл, например,<br>
<code>https://rr1---sn-n8v7znz7.googlevideo.com</code></p>
</blockquote>
</aside>
<p>Да никто ничего не должен) Что в браузере 404 -  в курсе. На вашем скрине ответ 200 - как вы его получили?</p></td><td>2024-09-27T23:14:26.213Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="170" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>На вашем скрине ответ 200 - как вы его получили?</p>
</blockquote>
</aside>
<p>Открыл инкогнито вкладку хром. Дождался пока сервер моего провайдера начнет тормозить в браузере. Скопировал из браузера в скрипт полностью урл, всю длинную строчку с параметрами до конца, не ограничиваясь <code>googlevideo.com</code>, все заголовки. Сейчас тот же запрос выдает <code>Status: 403</code> вместо <code>200</code>. Видимо, на сервере есть таймер срока действия параметров. Я же говорю, я пытался полностью повторить запрос браузера.</p></td><td>2024-09-28T01:54:01.537Z</td></tr><tr><td>Ori</td><td><p>Насколько я знаю, там дело в параметре n=, который является ключом безопасности. Ютуб расчитывает его на ходу по алгоритму, который находится в base.js. Если ключ неправильный - данные не отдаются. Это их политика борьбы со сторонними ютуб-приложениями, качалками и т.д.</p>
<p>Однако, там вроде есть какая-то дыра, связанная с андроидом (с приложением ютуба?) Поэтому тот же yt-dlp или парсер из PotPlayer, притворяются андроидом, лезут в ютубовский base.js, рассчитывают ключ n= и скачивают видос подставляя найденное значение.</p>
<p>Короче, сложно.</p></td><td>2024-09-28T08:08:02.527Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Вы копировали cURL (Bash)? У меня почему-то такой запрос возвращает 411</p></td><td>2024-09-28T11:13:17.886Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><aside class="quote no-group" data-username="TesterTi" data-post="173" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/testerti/48/5423_2.png" class="avatar"> TesterTi:</div>
<blockquote>
<p>Вы копировали cURL (Bash)?</p>
</blockquote>
</aside>
<p>Я не понимаю что вы спрашиваете. Я копировал всю строчку <code>Request URL</code> из браузера прямо в скрипт.</p>
<aside class="quote no-group" data-username="Ori" data-post="172" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>Поэтому тот же yt-dlp</p>
</blockquote>
</aside>
<p>Кстати, хорошая идея! Можно прям из <code>yt-dlp</code> запрос скопировать, <code>yt-dlp</code> же также тормозит из-за тспу. И прикрутить к нему перебор всех стратегий обхода из блокчека. Будет всего лишь один скрипт, запустил его, и он без всяких подборов параметров сам установил рабочую стратегию обхода.<br>
Но я ничего не рассчитывал, просто скопировал из браузера и мне 200 пришло. Хотя, может, самого видео контента в ответе и не было, я не проверял.</p></td><td>2024-09-28T16:51:22.539Z</td></tr><tr><td>KDS</td><td><aside class="quote no-group" data-username="sfs56819" data-post="174" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>просто скопировал из браузера и мне 200 пришло. Хотя, может, самого видео контента в ответе и не было</p>
</blockquote>
</aside>
<p>А разве это не сигнализирует, что стратегия рабочая? При блоке что-то в консоли никаких 200 и близко нет</p></td><td>2024-09-28T17:12:11.652Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Нет. В браузере полно ответов 200, но они идут с задержкой 5-10 секунд вместо обычных 300 ms.</p></td><td>2024-09-28T17:16:26.276Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><aside class="quote no-group" data-username="sfs56819" data-post="174" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>Я не понимаю что вы спрашиваете. Я копировал всю строчку <code>Request URL</code> из браузера прямо в скрипт.</p>
</blockquote>
</aside>
<p>Вот про это <a href="https://iimg.su/i/ZioyH"><img src="как-тестировать-сервера-googlevideo-10609/17290208e4031e6532f36c3116a59f51ea85c6d6.png" data-base62-sha1="3iSQ8Aw0agH7UmY5NxIt4ajZ1Gu" width="500" height="340"></a></p></td><td>2024-09-28T19:17:49.833Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>А, вы об этом. Да, можно и так. Без разницы как вы урл и заголовки скопируете. Только ипишник свой не палите.</p>
<p>Но думаю надо делать как Ori предложил, через <code>yt-dlp</code> с расчетом ключа, чтобы запрос постоянно работал, а не отваливался со временем.</p></td><td>2024-09-28T19:57:12.735Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>А я вот думаю, не забанит ютуб в таком случае по ip-нику? Мне и так про бота все время пишет, без кук через yt-dlp качать не дает…</p></td><td>2024-09-28T20:01:42.119Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Надо посмотреть как в <code>yt-dlp</code> это сделано и сделать также. Зачем заново изобретать и что-то придумывать?</p></td><td>2024-09-28T20:05:23.638Z</td></tr><tr><td>Ritsu(Ritsu)</td><td><p>Были случаи <a href="https://github.com/yt-dlp/yt-dlp/issues/10085" rel="noopener nofollow ugc">ограничений</a> со стороны ютуба к аккаунтам, которые много видео качали с помощью yt-dlp, так что куки лучше без надобности не пропускать.</p></td><td>2024-09-28T20:12:05.867Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Делайте конечно) Просто говорят, можно поймать бан <a href="https://github.com/yt-dlp/yt-dlp/issues/10085" class="inline-onebox">[youtube] "Video unavailable" with cookies - YouTube blocking accounts from web · Issue #10085 · yt-dlp/yt-dlp · GitHub</a></p></td><td>2024-09-28T20:13:55.683Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Мне не дает качать без кук, уже давно. Наверно мой ip как-то помечен)</p></td><td>2024-09-28T20:14:35.193Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="sfs56819" data-post="174" data-topic="10609">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/s/dbc845/48.png" class="avatar"> sfs56819:</div>
<blockquote>
<p>Можно прям из <code>yt-dlp</code> запрос скопировать</p>
</blockquote>
</aside>
<p>Yt-dlp сам умеет передавать “эстафетную палочку” курлу, там даже копировать ничего не надо.</p>
<pre><code class="lang-auto">yt-dlp https://www.youtube.com/watch?v=blabla --downloader curl --downloader-args curl:"-v"
</code></pre></td><td>2024-09-28T20:44:41.217Z</td></tr><tr><td>sfs56819(sfs56819)</td><td><p>Сколько качал видео с <code>yt-dlp</code> в аккаунт ютуба даже не заходил. Может я не много качал, не знаю. Ютуб же позволяет без регистрации видео смотреть, не банит, если с впн нехороших не заходить, поэтому проблемы тут не вижу.</p></td><td>2024-09-28T22:12:32.764Z</td></tr><tr><td>GooseWing(GooseWing)</td><td><p>Больше интересно почему и на yt-dlp не распространяется стратегия обхода. В браузере допустим все норм отдается, а там пару десятков метров скачает и потом дохнет, не может хендшейк получить (приходится через прокси с варпом тянуть).</p></td><td>2024-09-29T10:31:28.962Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>yt-dlp по какому-то другому принципу, чем браузер, ggc получает, насколько понимаю.</p></td><td>2024-09-29T15:59:58.418Z</td></tr><tr><td>easyone11</td><td><p>yt-dlp у меня он кусками качает, скачал, потупил, дальше скачал<br>
ps<br>
MediaDownloader который юзает yt-dlp</p></td><td>2024-09-29T17:03:26.431Z</td></tr><tr><td>TesterTi(TesterIt)</td><td><p>Оффтоп: А не пробовали internet download manager (idm)? У него какая-то своя интересная система закачки, он порой качает быстрее, чем yt-dlp</p></td><td>2024-09-29T17:23:00.650Z</td></tr><tr><td>easyone11</td><td><p>я раз в год качаю что то, не пробовал да и особо не надо<br>
просто когда прочитал что с ним проблемы решил проверить</p></td><td>2024-09-29T17:40:31.176Z</td></tr>
    </table>
      </body>
    </html>