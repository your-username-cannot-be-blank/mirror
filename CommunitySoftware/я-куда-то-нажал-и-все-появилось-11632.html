
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>я-куда-то-нажал-и-все-появилось-11632</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>Darwin</td><td><p>Пытался настроить Zapret на дискорд+ютуб+порнхаб, конфиг у него очень сложный, поэтому я просто брал куски чужих конфигов и слеплял вместе. В итоге получилось монструозно и вышло так что у меня разблокировались вообще все сайты, даже те, которых нет в списках.</p>
<p>Это в общем-то не плохо, но у меня теперь получается все соединения идут через программу?<br>
Какие могут быть сайдэффекты? И в целом, как оптимизировать конфиг? У меня там куча мусора, я полагаю.</p>
<p>Сам конфиг:</p>
<details>
<summary>
Спойлер</summary>
<pre><code class="lang-auto">start "zapret: custom" /min "%~dp0winws.exe" ^
--wf-l3=ipv4,ipv6 --wf-tcp=80,443 --wf-udp=443 --dpi-desync=fake,split2 --dpi-desync-repeats=11 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --hostlist="%~dp0list-youtube.txt" --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^

--wf-tcp=80,443-65535 --wf-udp=443-65535 ^
--filter-udp=443 --hostlist="%~dp0list-discord.txt" --dpi-desync=fake --dpi-desync-udplen-increment=10 --dpi-desync-repeats=6 --dpi-desync-udplen-pattern=0xDEADBEEF --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-tcp=443 --hostlist="%~dp0list-discord.txt" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^

--filter-udp=443 --hostlist="%~dp0list-ph.txt" --dpi-desync=fake --dpi-desync-repeats=11 --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^
--filter-udp=443 --dpi-desync=fake --dpi-desync-repeats=11 --new ^
--filter-tcp=80 --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --new ^
--filter-tcp=443 --hostlist="%~dp0list-ph.txt" --dpi-desync=fake,split2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig --dpi-desync-fake-tls="%~dp0tls_clienthello_www_google_com.bin" --new ^
--dpi-desync=fake,disorder2 --dpi-desync-autottl=2 --dpi-desync-fooling=md5sig
</code></pre>
</details></td><td>2024-10-11T18:04:56.870Z</td></tr><tr><td>easyone11</td><td><p>идеальный конфиг, забрал</p></td><td>2024-10-11T18:36:20.921Z</td></tr><tr><td>_rv</td><td><aside class="quote no-group" data-username="Darwin" data-post="1" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/d/ee7513/48.png" class="avatar"> Darwin:</div>
<blockquote>
<p><code>--filter-udp=50000-65535 --dpi-desync=fake,tamper --dpi-desync-any-protocol --dpi-desync-fake-quic="%~dp0quic_initial_www_google_com.bin" --new ^</code></p>
</blockquote>
</aside>
<aside class="quote" data-post="1215" data-topic="726">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/726/1215">Zapret: обсуждение</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Вот это уже глаза все намозолило 
Это источник флуда в сети
  </blockquote>
</aside>
</td><td>2024-10-11T19:02:29.109Z</td></tr><tr><td>Darwin</td><td><p>Удалил эту строчку, перестало подключаться к дискорду</p></td><td>2024-10-12T01:08:15.178Z</td></tr><tr><td>Red</td><td><p>–filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n1 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
Строка ваша должна выглядеть примерно так.<br>
НЕЛЬЗЯ использовать dpi-desync-any-protocol без dpi-desync-cutoff , если вы не на линуксе. Пожалуйста, прочтите последние 2 сообщения в теме :</p><aside class="quote quote-modified" data-post="157" data-topic="61">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar">
    <a href="https://ntc.party/t/zapret-whats-new/61/157">Zapret: what's new</a> <a class="badge-category__wrapper " href="/c/community-software/zapret-antidpi/20"><span data-category-id="20" style="--category-badge-color: #9EB83B; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #BF1E2E;" data-parent-category-id="27" data-drop-close="true" class="badge-category --has-parent" title="Zapret Deep Packet Inspection (DPI) circumvention software discussion and official support forum"><span class="badge-category__name">Zapret</span></span></a>
  </div>
  <blockquote>
    Написал custom script для распространившейся в сети десинхронизации портов 50000-65535 дискорда. 
Я не изучал блокировку discord. Гарантий обхода не даю. 
Добавил к распространившейся стратегии учет подсетей discord, чтобы не травить все остальное. Опять же за достоверность не ручаюсь. Но это настраивается. 
Итак, custom script для систем запуска sysv (традиционный linux, возможно кинетик) 
<details><summary>Спойлер</summary># this custom script in addition to MODE=nfqws runs desync of some udp packets to discord subnet
# …</details>
  </blockquote>
</aside>
</td><td>2024-10-12T02:00:07.465Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group quote-modified" data-username="Red" data-post="7" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/59ef9b/48.png" class="avatar"> Red:</div>
<blockquote>
<p>–filter-udp=50000-65535 … --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin”</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/darwin">@Darwin</a>  Это тоже бесполезная опция, т.к. она только на quic. Для 50000-65535 портов дискорда надо <code>--dpi-desync-fake-unknown-udp=</code> использовать.</p></td><td>2024-10-12T05:00:50.799Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Red" data-post="7" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/59ef9b/48.png" class="avatar"> Red:</div>
<blockquote>
<p>–filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n1 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^</p>
</blockquote>
</aside>
<p>И тут вы ошиблись. cutoff = отсечение<br>
вы отсекаете прямо на 1-м пакете. уже на первом не будет, то есть вообще не будет<br>
И действительно ли там передается QUIC ? Что-то сомневаюсь. Если так, quic надо убирать, хотя он и не мешает</p>
<p>Прошу проверить --dpi-desync-cutoff=n2. Если нет - n3,n4.<br>
Упорно не хочу ставить себе сие поделие (discord), другие задачи есть =)</p></td><td>2024-10-12T05:35:56.832Z</td></tr><tr><td>Red</td><td><p>Это взято напрямую из сборки на основе запрета, которую КДС сделал в разделе GDPI, “всё в одном” и что удивительно - оно работает именно в таком конфиге на винде, при этом не заплёвывая сеть.<br>
Так что, тут точно не я ошибся, бо ничерта в этом не понимаю, но оно работает и так, и без катоффа, но без него это есть плохо, не так ли?)</p></td><td>2024-10-12T05:45:21.163Z</td></tr><tr><td>CyberPashtet(Cyber Pashtet)</td><td><p>Я не очень понимаю зачем все используют вообще диапазон именно 50000-65535? У меня с таким диапазоном рвутся соединения через несколько минут в других приложениях по типу moonlight, parsec, а у некоторых игр онлайн полностью отваливается - то есть везде, где используется udp. Лично у меня дискорд всегда подключался к войсу начиная с порта 50000 в порядке возрастания, максимальный, который видел 50011. Поставил в конфиге дня 3 назад 50000-50020 и все приложения попадающие на остальные udp порты сразу починились. Если дискорд начнёт вылезать за них, то всегда можно подкрутить.</p>
<p>Для диса у меня всего одна строка, но не у всех работает:<br>
–filter-udp=50000-50020 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n2</p></td><td>2024-10-12T05:45:23.452Z</td></tr><tr><td>Red</td><td><p>Можно получить полную строку, чтоб всунуть в файл и проверить?<br>
Я могу сразу потестить и то, что просил <a class="mention" href="/u/bolvan">@bolvan</a> , и это и даже изменить диапазон портов, скажем, до 50050 для надёжности, почему нет.<br>
Просто я с одной стороны прекрасно понимаю позицию “не водить за ручку”, а с другой это вполне подпадает под “санитаров леса”, чтобы убрать распространившиеся кривые конфиги, когда юзвери невынужденно гадят в сеть, себе, провайдеру и т.д.<br>
Если я с этой ссылкой приду к тому же <a class="mention" href="/u/kds">@KDS</a> , будучи объективно чайником в запрете, то что именно я могу ему сказать? “Слышь, тут это, типа, вот, сам посмотри?”</p></td><td>2024-10-12T06:04:18.330Z</td></tr><tr><td>Ori</td><td><aside class="quote no-group" data-username="bolvan" data-post="9" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/b/8e8cbc/48.png" class="avatar"> bolvan:</div>
<blockquote>
<p>вы отсекаете прямо на 1-м пакете. уже на первом не будет, то есть вообще не будет<br>
И действительно ли там передается QUIC ? Что-то сомневаюсь. Если так, quic надо убирать, хотя он и не мешает</p>
<p>Прошу проверить --dpi-desync-cutoff=n2. Если нет - n3,n4.</p>
</blockquote>
</aside>
<p>У меня в варианте --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff= работают все варианты от n1 и выше, и от d1 и выше. Так и не понял, нормально ли это, что варианты с цифрой 1 работают или нет. В итоге поставил себе d2.</p>
<aside class="quote no-group" data-username="CyberPashtet" data-post="11" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cyberpashtet/48/4049_2.png" class="avatar"> CyberPashtet:</div>
<blockquote>
<p>Поставил в конфиге дня 3 назад 50000-50020</p>
</blockquote>
</aside>
<p>О, а это действительно так, спасибо. <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"><br>
А я как прочитал в гугле 3 дня назад, что дискорд использует рандомный порт 50000-65535, так и поставил. Даже не подумал проверить.</p>
<aside class="quote no-group" data-username="Red" data-post="12" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/r/59ef9b/48.png" class="avatar"> Red:</div>
<blockquote>
<p>Можно получить полную строку, чтоб всунуть в файл и проверить?</p>
</blockquote>
</aside>
<p>Для войса:<br>
<code>--dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2</code></p></td><td>2024-10-12T06:15:46.586Z</td></tr><tr><td>wigeance(Wigeance)</td><td><p>Если смотреть по логу nfqws, то cutoff=d1 ничего не делает, просто игнорирует соединение<br>
Фильтр cutoff работает по условию меньше чем указанное чисто, т.е. меньше чем 1</p></td><td>2024-10-12T06:21:04.406Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="Ori" data-post="13" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/ori/48/7551_2.png" class="avatar"> Ori:</div>
<blockquote>
<p>У меня в варианте --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff= работают все варианты от n1 и выше, и от d1 и выше. Так и не понял, нормально ли это, что варианты с цифрой 1 работают или нет. В итоге поставил себе d2.</p>
</blockquote>
</aside>
<p>Это баг. Будет исправлено, в следующем бинарике работать перестанет</p></td><td>2024-10-12T06:24:59.856Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="wigeance" data-post="14" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/wigeance/48/3861_2.png" class="avatar"> wigeance:</div>
<blockquote>
<p>Фильтр cutoff работает по условию меньше чем указанное чисто, т.е. меньше чем 1</p>
</blockquote>
</aside>
<p>Баг образовался после введения профилей. Там профиль ищется после теста на cutoff, в чем и заключается баг. cutoff параметры стали частью профиля, поэтому без профиля они не срабатывают.<br>
Но профиль кэшируется, потому срабатывает на следующем пакете, и это дает эффект &lt;= вместо &lt; на единице. На &gt;=2 уже как надо работало даже с багом в варианте &lt;</p></td><td>2024-10-12T06:26:13.722Z</td></tr><tr><td>Red</td><td><p>Пардон, долго получилось. У меня опять, как и в прошлый раз непонятные проблемы с запуском той сборки на Вин 10. Служба ставится и работает, зато окошко по preset_russia наглухо отказывается запускаться. Достал прошлую версию, там вроде бы шевелится.<br>
Убрал строку –filter-udp=50000-65535 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=n1 --dpi-desync-fake-quic=“%~dp0quic_initial_www_google_com.bin” --new ^<br>
вставил<br>
–filter-udp=50000-50030 --dpi-desync=fake --dpi-desync-any-protocol --dpi-desync-cutoff=d2 --new ^ параллельно с правкой заголовка на<br>
–wf-tcp=80,443 --wf-udp=443,50000-50030 ^<br>
(поднял порт с 50020 рекомендованного до 30 на всякий)</p>
<p>Дискорд работает с голосом как в браузере, так и через приложение, плясок с бубном не потребовалось.Пожалуй, запускается долльше, как минимум, в браузере. Видимо, квик ему-таки нужен для каких-то целей <a class="mention" href="/u/bolvan">@bolvan</a></p></td><td>2024-10-12T06:59:40.411Z</td></tr><tr><td>MIHAHIM</td><td><p>Помогите переделать данный конфиг под опенврт в роутер, не пойму что и куда вставлять, мануал читал, но не всеравно не понимаю… Файлы дискорд ютуб гугл.бин итд кидать в корневую папку запрета в /opt/zapret/? И как данные строки прописать в файле конфиг? в одну строку NFQWS_OPT_DESYNC=“ТУТ ВСЕ КОНФИГ начиная с --wf-l3=…”?</p></td><td>2024-10-12T07:11:52.765Z</td></tr><tr><td>bolvan</td><td><aside class="quote no-group" data-username="CyberPashtet" data-post="11" data-topic="11632">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/cyberpashtet/48/4049_2.png" class="avatar"> CyberPashtet:</div>
<blockquote>
<p>У меня с таким диапазоном рвутся соединения через несколько минут в других приложениях по типу moonlight, parsec, а у некоторых игр онлайн полностью отваливается - то есть везде, где используется udp</p>
</blockquote>
</aside>
<p>О чем везде и предупреждаю. Нужен ограничитель по IP.<br>
Пока для винды его не сделать, но в *nix можно</p></td><td>2024-10-12T07:38:53.121Z</td></tr>
    </table>
      </body>
    </html>