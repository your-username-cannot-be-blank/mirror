
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>bam</td><td><ul>
<li>Тип настройки: PAC-файл / браузерное расширение / VPN</li>
<li>Тип проблемы: не работает НЕзаблокированный сайт</li>
<li>Что с сайтом: вместо сайта открывается страница-заглушка</li>
<li>Используемый браузер: FF</li>
</ul>
<h4><a name="h-1" class="anchor" href="#h-1"></a>Описание проблемы</h4>

<blockquote>
<p>Сайты, самостоятельно блокирующие доступ пользователям из России, вручную в список не добавляются (не считая единичных исключений).</p>
</blockquote>
<p>В качестве единичных исключений, могу я попросить добавить:</p>
<ul>
<li><a href="https://download.qt.io/" rel="noopener nofollow ugc">https://download.qt.io/</a></li>
<li><a href="https://wise.com/" rel="noopener nofollow ugc">https://wise.com/</a></li>
</ul>
<p>Есть ли тема, где можно оставлять подобные запросы?<br>
Спасибо.</p></td><td>2023-08-17T13:34:22.551Z</td></tr><tr><td>ValdikSS</td><td><p>Добавление новых сайтов не осуществляется.</p></td><td>2023-08-17T13:45:33.000Z</td></tr><tr><td>bam</td><td><p>OK, может быть тогда подскажете как лучше настроить FF/систему чтобы доступ к этим сайтам осуществлялся прозрачно?<br>
У меня есть частная прокся, но включать/выключать её в настройках FF каждый раз неудобно.</p></td><td>2023-08-17T14:22:45.409Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Можно прописать свой прокси в нашем расширении: см. <a href="https://github.com/anticensority/runet-censorship-bypass/wiki/%D0%A1%D0%B2%D0%BE%D0%B8-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-%D0%B2-%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D0%B8">https://github.com/anticensority/runet-censorship-bypass/wiki/Свои-прокси-в-расширении</a>.<br>
Но там есть ограничения на тип и пароль.</p></td><td>2023-08-17T14:34:37.000Z</td></tr><tr><td>bam</td><td><p>Спасибо, не могли бы вы описать как это будет работать? Или может это уже где-то написано.<br>
Мне нужно чтобы моя прокся использовалась только для определенных сайтов.</p></td><td>2023-08-17T14:47:37.268Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Ссылку уже дал.<br>
Вот вам снимки в помощь:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/9956605c0e68abeef3115a11e625418c1b1246b5.png" data-download-href="https://ntc.party/uploads/default/9956605c0e68abeef3115a11e625418c1b1246b5" title="ac-own-proxies"><img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/9956605c0e68abeef3115a11e625418c1b1246b5_2_323x500.png" alt="ac-own-proxies" data-base62-sha1="lSu72zrcK1EDTdGusuDib3mimln" width="323" height="500" srcset="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/9956605c0e68abeef3115a11e625418c1b1246b5_2_323x500.png, добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/9956605c0e68abeef3115a11e625418c1b1246b5.png 1.5x, добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/9956605c0e68abeef3115a11e625418c1b1246b5.png 2x" data-dominant-color="E3E4EB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">ac-own-proxies</span><span class="informations">404×625 72.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/71fc30cccc2ab1933a2b02b0348b420c8dad35c7.png" alt="ac-exceptions" data-base62-sha1="ggmgKcipyswJLCqlUE7n4XhivQj" width="415" height="312"><br>
<img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/f29ada2334bfc85a391c823e915e982db1ee37f5.png" alt="ac-only-own-sites" data-base62-sha1="yCbjEkc85IFucnlYdSMKBGT2Ksl" width="431" height="368"></p></td><td>2023-08-17T15:05:28.001Z</td></tr><tr><td>bam</td><td><p>Спасибо. Правильно ли я понимаю что при этих настройках PAC-script не будет использоваться вообще?<br>
Тогда это не совсем то что мне нужно.<br>
Я хотел использовать PAC-скрипт (предпочтительно с публичными проксями) + свою проксю для нескольких заданных сайтов</p></td><td>2023-08-17T15:15:03.268Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><ol>
<li>PAC-скрипт: АнтиЗапрет</li>
<li>На вкладке “Свои прокси / Own proxies”:<br>
[V] Использовать прокси PAC-скрипта<br>
[V] Использовать СВОИ прокси<br>
[V] СВОИ прокси только для СВОИХ сайтов</li>
<li>Нужно добавить свои адреса для проксирования на вкладке “Исключения / Exceptions”, режим редактора открывается через ⇄.</li>
</ol></td><td>2023-08-17T15:25:40.549Z</td></tr><tr><td>bam</td><td><p>Большое спасибо, попробую. Похоже то что нужно <img src="https://ntc.party/images/emoji/twitter/+1.png?v=12" title=":+1:" class="emoji" alt=":+1:" loading="lazy" width="20" height="20"></p></td><td>2023-08-17T15:28:20.901Z</td></tr><tr><td>bam</td><td><p>Сразу же в догонку ещё вопрос:<br>
будет ли приложение работать на FF Mobile и если нет, какие перспективы сделать его таковым?</p></td><td>2023-08-17T15:31:16.853Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Под Android не хватает вот этого API: см. <a href="https://github.com/anticensority/runet-censorship-bypass/issues/76#issuecomment-1019293060" class="inline-onebox">Проголосуйте за исправление багов в браузерах · Issue #76 · anticensority/runet-censorship-bypass · GitHub</a>.</p></td><td>2023-08-17T15:40:54.237Z</td></tr><tr><td>bam</td><td><p>Можно ли как-нибудь обойтись без этого API?</p>
<p>Аналогичный менеджер прокси работает на FF Mobile:</p><aside class="onebox githubrepo" data-onebox-src="https://github.com/foxyproxy/browser-extension">
  <header class="source">

      <a href="https://github.com/foxyproxy/browser-extension" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/8591f1034a5c4bccfbdd2bb32296375eefa665e6_2_690x344.png" class="thumbnail" data-dominant-color="F6F3F0">

  <h3><a href="https://github.com/foxyproxy/browser-extension" target="_blank" rel="noopener nofollow ugc">GitHub - foxyproxy/browser-extension: Version 8 and above. Browser extension source code...</a></h3>

    <p><span class="github-repo-description">Version 8 and above. Browser extension source code for Firefox, Chrome, and other Chromium-based browsers</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>
</td><td>2023-08-17T17:25:51.860Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>В этой версии FoxyProxy используется API <code>proxy.settings</code>: см. <a href="https://github.com/foxyproxy/browser-extension/blob/c9b03dc3b86f3f2f9bb31663e7514ca6023454f4/src/content/proxy.js#L57">https://github.com/foxyproxy/browser-extension/blob/c9b03dc3b86f3f2f9bb31663e7514ca6023454f4/src/content/proxy.js#L57</a>. В том же файле можно найти множество таких обращений к нужному API.</p>
<p>Так вы проверяли его на Андроиде? Работает?</p></td><td>2023-08-17T17:43:56.461Z</td></tr><tr><td>bam</td><td><p>Не проверял, спрашивал:</p><aside class="onebox githubissue" data-onebox-src="https://github.com/foxyproxy/browser-extension/issues/1#issuecomment-1680858264">
  <header class="source">

      <a href="https://github.com/foxyproxy/browser-extension/issues/1#issuecomment-1680858264" target="_blank" rel="noopener nofollow ugc">github.com/foxyproxy/browser-extension</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/foxyproxy/browser-extension/issues/1#issuecomment-1680858264" target="_blank" rel="noopener nofollow ugc">Support instructions to install this version</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-09-22" data-time="03:43:16" data-timezone="UTC">03:43AM - 22 Sep 22 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2023-09-29" data-time="07:58:06" data-timezone="UTC">07:58AM - 29 Sep 23 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/ndjones" target="_blank" rel="noopener nofollow ugc">
          <img alt="ndjones" src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/cee3c1f7d65e8c1763d5d9467fbbff5427835a89.jpeg" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="818C91">
          ndjones
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Hi,
I've just come across FoxyProxy and see this new version emerging. Not sure<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden"> if its ready for prime time - happy to be a tester 👍 
Perhaps some install from source instructions could be added to help.html? Or happy to wait for it to land in the Chrome store when ready.
thanks!
Nick</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Может быть было бы полезно если бы вы нашли с автором общее решение, если это не так.</p></td><td>2023-08-17T17:52:38.366Z</td></tr><tr><td>bam</td><td><p>К сожалению, использовать свою HTTP(S?) проксю с паролем пока не удается.</p>
<p>Возможные причины:</p>
<ul>
<li>используется версия для медленных машин (?, см. скриншот) в которой функция паролей не заявлена (хотя встроенная справка по формату записей прокси предлагает ввод этих данных).<br>
Действительно ли это так и где тогда взять нормальную версию для FF?</li>
<li>в пароле используются пробелы, возможно это вызывает проблемы. Поменять пароль я не могу.</li>
<li>неверный тип прокси.<br>
Я пробовал PROXY, HTTPS типы. При этом ошибки разные: Unable to connect, Secure Connection Failed.<br>
НО!<br>
В аналогичном расширении FoxyProxy, моя прокся заработала только с типом HTTP (без S) - но этот тип данное расширение не даёт ввести в редакторе, возможен лишь PROXY. Не может быть в этом проблема?</li>
</ul>
<p><img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/66841d734e461541b153e203d5646bf2b0626e0e.png" alt="image" data-base62-sha1="eCTKWveUR90iJb67Vg4UAPIZpOm" width="561" height="259"></p>
<p>И сразу следующий вопрос - как быть с редактором исключений в FF?<br>
На скриншоте видно что “Редактор исключений доступен только для вкладок”, при нажатии на ссылку “вкладок” ничего не происходит.</p></td><td>2023-08-17T20:08:06.717Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><ol>
<li>
<p>Под FireFox есть только полная версия, версия МИНИ – только для Хрома и производных.</p>
</li>
<li>
<p>Типы PROXY и HTTP – это одно и то же.</p>
</li>
<li>
<p>Проверить свой прокси можно через <code>curl -x "protocol://user:password@your-proxy-ip-address" https://www.kasparov.ru</code></p>
</li>
<li>
<blockquote>
<p>при нажатии на ссылку “вкладок” ничего не происходит.</p>
</blockquote>
<p>Просто откойте новую вкладку и кликните по иконке синей ленты.</p>
<blockquote>
<p>на вкладке “Исключения / Exceptions”, режим редактора открывается через ⇄.</p>
</blockquote>
</li>
</ol></td><td>2023-08-17T21:10:41.077Z</td></tr><tr><td>bam</td><td><aside class="quote no-group" data-username="ilyaigpetrov" data-post="16" data-topic="5358">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/5fc32e/48.png" class="avatar"> ilyaigpetrov:</div>
<blockquote>
<p>Проверить свой прокси можно через <code>curl -x "protocol://user:password@your-proxy-ip-address" https://www.kasparov.ru</code></p>
</blockquote>
</aside>
<p>Есть подозрение что дело всё же в пробелах:</p>
<ul>
<li>Если использую схему <code>https</code>, выдает <code>curl: (56) CONNECT tunnel failed, response 400</code></li>
<li>При <code>http</code> схеме:
<ul>
<li>Если в пароле пробелы - ошибка <code>curl: (5) Unsupported proxy syntax in 'http://user:passw with spaces@...'</code></li>
<li>Убираю пробелы (и делаю пароль неправильным) - бесконечно висит</li>
</ul>
</li>
</ul>
<p>Есть идеи как победить?</p></td><td>2023-08-17T21:23:11.962Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>На месте пробела впишите %20.</p></td><td>2023-08-17T21:24:34.869Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>См. <a href="https://zencoder.support.brightcove.com/general-information/special-characters-usernames-and-passwords.html" class="inline-onebox">Special Characters in Usernames and Passwords</a>.</p></td><td>2023-08-17T21:26:45.146Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p><a href="https://www.urlencoder.org">https://www.urlencoder.org</a>, если не боитесь спалить пароль.</p></td><td>2023-08-17T21:31:37.464Z</td></tr><tr><td>bam</td><td><p>Теперь:</p>
<ul>
<li>схема <code>http</code>:<br>
<code>curl: (56) CONNECT tunnel failed, response 307</code></li>
<li><code>https</code>:<br>
<code>curl: (35) OpenSSL/3.0.8: error:0A00010B:SSL routines::wrong version number</code></li>
</ul>
<p>Но прокся рабочая, я ей же пользуюсь  через встроенные FF настройки.</p></td><td>2023-08-17T21:32:39.573Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Чтобы вывести больше подробностей об ошибке, добавьте флаг <code>-v</code>.<br>
Пример: <code>curl -x "protocol://user:password@your-proxy-ip-address" -v https://www.kasparov.ru</code></p></td><td>2023-08-17T21:38:52.067Z</td></tr><tr><td>bam</td><td><ul>
<li><code>http</code>:<pre><code class="lang-auto">...
&gt; CONNECT www.kasparov.ru:443 HTTP/1.1
&gt; Host: www.kasparov.ru:443
&gt; Proxy-Authorization: Basic ****
&gt; User-Agent: curl/7.88.1
&gt; Proxy-Connection: Keep-Alive
&gt; 
&lt; HTTP/1.1 307 Temporary Redirect 
&lt; Via: 1.0 middlebox
&lt; Location: http://forbidden.yota.ru/
&lt; Connection: close
&lt; 
* CONNECT tunnel failed, response 307
* Closing connection 0
curl: (56) CONNECT tunnel failed, response 307
</code></pre>
</li>
<li><code>https</code>:<pre><code class="lang-auto">...
* ALPN: offers http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* OpenSSL/3.0.8: error:0A00010B:SSL routines::wrong version number
* Closing connection 0
curl: (35) OpenSSL/3.0.8: error:0A00010B:SSL routines::wrong version number</code></pre>
</li>
</ul></td><td>2023-08-17T21:51:25.742Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Закодировать свой пароль можно так:</p>
<ol>
<li>Нажать F12 – откроется инструментарий разработчика (devtools).</li>
<li>Ввести <code>encodeURIComponent('тут-пароль')</code>. Скопировать результат и вставить в команду проверки прокси: <code>curl -x "http://user:password@your-proxy-ip-address" -v https://www.kasparov.ru</code></li>
</ol>
<p><div class="lightbox-wrapper"><a class="lightbox" href="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed.png" data-download-href="https://ntc.party/uploads/default/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed" title="ac-encode-very-hard-password"><img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed_2_690x415.png" alt="ac-encode-very-hard-password" data-base62-sha1="ct4HG05imCfwS0fqkiRDWbcUwnX" width="690" height="415" srcset="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed_2_690x415.png, добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed.png 1.5x, добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57637e6b95e6d53d55cf16407e91b3aa5b3db3ed.png 2x" data-dominant-color="A9A8A6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">ac-encode-very-hard-password</span><span class="informations">969×584 154 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p></td><td>2023-08-17T21:59:55.394Z</td></tr><tr><td>bam</td><td><p>Подождите, разве дело в пароле?<br>
Я вроде заменил на <code>%20</code>, там больше ничего нет такого</p></td><td>2023-08-17T22:05:34.946Z</td></tr><tr><td>bam</td><td><p>Кстати говоря, если я использую публичную проксю, то результат тот же:</p>
<pre><code class="lang-auto">$ curl -x "203.23.103.182:80" https://www.kasparov.ru -v
*   Trying 203.23.103.182:80...
* Connected to 203.23.103.182 (203.23.103.182) port 80 (#0)
* allocate connect buffer
* Establish HTTP proxy tunnel to www.kasparov.ru:443
&gt; CONNECT www.kasparov.ru:443 HTTP/1.1
&gt; Host: www.kasparov.ru:443
&gt; User-Agent: curl/7.88.1
&gt; Proxy-Connection: Keep-Alive
&gt; 
&lt; HTTP/1.1 307 Temporary Redirect 
&lt; Via: 1.0 middlebox
&lt; Location: http://forbidden.yota.ru/
&lt; Connection: close
&lt; 
* CONNECT tunnel failed, response 307
* Closing connection 0
curl: (56) CONNECT tunnel failed, response 307</code></pre></td><td>2023-08-17T22:12:21.092Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><aside class="quote no-group" data-username="bam" data-post="26" data-topic="5358">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/bam/48/2998_2.png" class="avatar"> bam:</div>
<blockquote>
<p><code>"203.23.103.182:80"</code></p>
</blockquote>
</aside>
<pre><code class="lang-auto">Протокол не указан. Попробуйте "http://203.23.103.182:80".</code></pre></td><td>2023-08-17T22:16:46.351Z</td></tr><tr><td>bam</td><td><p>Видимо протокол опционален, потому как если с ним что-то не так - ошибка иная.</p>
<p>В любом случае, ничего не поменялось:</p>
<pre><code class="lang-auto">$ curl -x "http://203.23.103.182:80" https://www.kasparov.ru -v
*   Trying 203.23.103.182:80...
* Connected to 203.23.103.182 (203.23.103.182) port 80 (#0)
* allocate connect buffer
* Establish HTTP proxy tunnel to www.kasparov.ru:443
&gt; CONNECT www.kasparov.ru:443 HTTP/1.1
&gt; Host: www.kasparov.ru:443
&gt; User-Agent: curl/7.88.1
&gt; Proxy-Connection: Keep-Alive
&gt; 
&lt; HTTP/1.1 307 Temporary Redirect 
&lt; Via: 1.0 middlebox
&lt; Location: http://forbidden.yota.ru/
&lt; Connection: close
&lt; 
* CONNECT tunnel failed, response 307
* Closing connection 0
curl: (56) CONNECT tunnel failed, response 307</code></pre></td><td>2023-08-17T22:19:32.985Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Я не силён в анализе сетевых логов, но складывается ощущение, что устройство на стороне провайдера замечает попытку подключения к прокси-серверу по нешифрованному протоколку HTTP. Поскольку протокол нешифрованный, устройство на стороне провайдера вмешивается в сессию и перенаправляет на заглушку. Если это так, то следует найти шифрованный прокси типа HTTPS.</p>
<p>Но то, что в другом расширении этот же нешифрованный протокол работает, ставит мою гипотезу под сомнение.</p></td><td>2023-08-17T22:26:33.218Z</td></tr><tr><td>bam</td><td><p>Именно</p></td><td>2023-08-17T22:27:52.333Z</td></tr><tr><td>bam</td><td><p><s>Похоже дело вообще не в пароле и не в типе прокси:<br>
если я использую <code>http://203.23.103.182:80</code> в стандартных настройках для типа HTTP - всё работает, даже HTTPS сайты.<br>
Но в вашем приложении эта же прокся не работает.</s></p>
<p>Требуется доп. тестирование</p></td><td>2023-08-17T22:47:09.894Z</td></tr><tr><td>bam</td><td><p>Я потестировал ещё и вот что удалось выяснить.</p>
<p>Да, действительно провайдер вклинивался в сессию - но я потом вспомнил, это было и раньше.<br>
Дело в том, что наш тест некорректен - при тестировании на сайте, заблокированном РКН, будем всегда получать отлуп в независимости от типа прокси: HTTP/HTTPS (SOCKS не пробовал).<br>
Это было и с моей проксей.</p>
<p>Корректный тест - на сайте, заблокированном извне для России. Например, <a href="http://wise.com" rel="noopener nofollow ugc">wise.com</a>.<br>
Для него любая HTTPS прокся из публичного списка начинает работать, НО только будучи введенной в стандартные настройки FF:<br>
<a href="https://hidemyna.me/ru/proxy-list/?type=s#list" rel="noopener nofollow ugc">https://hidemyna.me/ru/proxy-list/?type=s#list</a></p>
<p>Из вашего приложения не работает, как я ни пытался.</p>
<p>Вы можете воспроизвести проблему у себя?</p></td><td>2023-08-18T00:11:51.274Z</td></tr><tr><td>bam</td><td><p>Странность заключается в том, что даже в том проложении (FoxyProxy), где моя HTTP(S) прокся работает - она работает только как тип HTTP (без S), и при этом открывает HTTPS сайты:</p><aside class="onebox githubissue" data-onebox-src="https://github.com/foxyproxy/firefox-extension/issues/209">
  <header class="source">

      <a href="https://github.com/foxyproxy/firefox-extension/issues/209" target="_blank" rel="noopener nofollow ugc">github.com/foxyproxy/firefox-extension</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/foxyproxy/firefox-extension/issues/209" target="_blank" rel="noopener nofollow ugc">HTTPS proxy only works when added as HTTP (no S) Proxy Type</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2023-08-15" data-time="15:16:28" data-timezone="UTC">03:16PM - 15 Aug 23 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2023-09-22" data-time="06:30:32" data-timezone="UTC">06:30AM - 22 Sep 23 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/bam80" target="_blank" rel="noopener nofollow ugc">
          <img alt="bam80" src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/8565f9b6b80b0594d960acb53b0301116b90e9ab.png" class="onebox-avatar-inline" width="20" height="20" data-dominant-color="C7D5E3">
          bam80
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">I added HTTPS proxy as HTTPS/SSL Proxy Type but have this error when I try to op<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">en any HTTPS site:

&gt; Secure Connection Failed
&gt;
&gt; An error occurred during a connection to wise.com. SSL received a record that exceeded the maximum permissible length.
&gt; 
&gt; Error code: SSL_ERROR_RX_RECORD_TOO_LONG
&gt; 
&gt;    The page you are trying to view cannot be shown because the authenticity of the received data could not be verified.
&gt;    Please contact the website owners to inform them of this problem.

The proxy requires authentication but I filled Username/Password properly.
The same proxy works being added as HTTPS in built-in Network Settings.

When I change the Proxy Type to just HTTP, everything start work.</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Может быть, тип <code>HTTP</code> всё же отличается от <code>PROXY</code> в FF?</p></td><td>2023-08-18T00:19:23.581Z</td></tr><tr><td>ValdikSS</td><td><p>HTTP-прокси это классический нешифрованный протокол прокси, он способен открывать HTTPS-сайты методом CONNECT. В браузерном PAC-файле такие прокси обозначаются префиксом PROXY.</p>
<p>HTTPS-прокси это тот же самый HTTP-прокси с дополнительным слоем TLS для шифрования. В браузере они называются HTTPS.</p>
<p>Ваш прокси, вероятно, без TLS. Его нужно использовать с префиксом PROXY.</p></td><td>2023-08-18T07:31:01.339Z</td></tr><tr><td>bam</td><td><p>Спасибо за информацию.<br>
Как я уже сказал, проблема похоже не в моём прокси - я пробовал разные прокси из публичного списка, с разными префиксами.<br>
Ни одна комбинация не работает.</p>
<p>Прошу подтвердить проблему.<br>
FF 115.0.2</p></td><td>2023-08-18T09:07:37.980Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Прокси с <a href="https://hidemyna.me/ru/proxy-list/?type=s#list">https://hidemyna.me/ru/proxy-list/?type=s#list</a> по моему предыдущему опыту долго не живут. Попробуйте найти прокси, который работает у вас в другом расширении, но не работает в нашем. Пришлите его координаты мне для тестирования, публично или приватно. Можно через личные сообщения на ntc.party.</p></td><td>2023-08-18T20:22:16.047Z</td></tr><tr><td>bam</td><td><aside class="quote no-group" data-username="ilyaigpetrov" data-post="36" data-topic="5358">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/5fc32e/48.png" class="avatar"> ilyaigpetrov:</div>
<blockquote>
<p>Прокси с <a href="https://hidemyna.me/ru/proxy-list/?type=s#list" rel="noopener nofollow ugc">https://hidemyna.me/ru/proxy-list/?type=s#list </a> по моему предыдущему опыту долго не живут. Попробуйте найти прокси, который работает у вас в другом расширении, но не работает в нашем.</p>
</blockquote>
</aside>
<p>Я понимаю, но проблема в том что все эти прокси работают в другом расширении, но не в вашем.<br>
Так что думаю не имеет особого значения что это за прокся, попробуйте для начала завести хоть одну из этого источника. Они как правило рабочие если брать с верхушки.<br>
Спасибо.</p></td><td>2023-08-19T20:39:47.543Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Все прокси с <a href="https://hidemyna.me/ru/proxy-list/?type=s#list">https://hidemyna.me/ru/proxy-list/?type=s#list</a> с типом https, что я пробовал, по факту по https не работают, а работают по http.</p>
<p>Пример:</p>
<pre data-code-wrap="sh-session"><code class="lang-plaintext">$ curl -v -x https://89.43.31.134:3128 https://kasparov.ru
*   Trying 89.43.31.134:3128...
* Connected to (nil) (89.43.31.134) port 3128 (#0)
* ALPN, offering http/1.1
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* TLSv1.0 (OUT), TLS header, Certificate Status (22):
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
* (5454) (IN), , Unknown (72):
* error:0A00010B:SSL routines::wrong version number
* Closing connection 0
curl: (35) error:0A00010B:SSL routines::wrong version number
</code></pre>
<p>Провреил в curl https прокси-сервер из PAC-скрипта АнтиЗапрет – работает.<br>
В других расширениях вы, вероятно, используете прокси с типом http, а не httpS.</p></td><td>2023-08-19T21:32:45.127Z</td></tr><tr><td>bam</td><td><p>Вы пробовали в своем расширении?<br>
Просьба попробовать, они у меня не работали ни с каким типом именно в вашем расширении.</p></td><td>2023-08-19T21:41:26.334Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>HTTPS-прокси не проходят проверку даже в curl.<br>
В работу же HTTP-прокси вклинивается провайдер, так что их даже и не стоит проверять.<br>
Но я проверил, результат – на снимке ниже.</p>
<p><img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/57481b13de32661430a14d85cfcb8a10d04cdd00.png" alt="ac-http-proxy" data-base62-sha1="cs81BiHGRh5s7cBBzinI1Lkzk0E" width="467" height="155"></p></td><td>2023-08-19T22:03:47.283Z</td></tr><tr><td>bam</td><td><aside class="quote no-group quote-modified" data-username="ilyaigpetrov" data-post="40" data-topic="5358">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/letter_avatar_proxy/v4/letter/i/5fc32e/48.png" class="avatar"> ilyaigpetrov:</div>
<blockquote>
<p>HTTPS-прокси на проходят проверку даже в curl.</p>
</blockquote>
</aside>
<p>Я писал об этом:</p><aside class="quote quote-modified" data-post="32" data-topic="5358">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://ntc.party/user_avatar/ntc.party/bam/48/2998_2.png" class="avatar">
    <a href="https://ntc.party/t/%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2-%D1%81%D0%B0%D0%BC%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D1%85-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC-%D0%B8%D0%B7-%D1%80%D0%BE%D1%81%D1%81%D0%B8%D0%B8/5358/32">Добавление сайтов, самостоятельно блокирующих доступ пользователям из России</a> <a class="badge-category__wrapper " href="/c/antizapret-prostovpn-org/5"><span data-category-id="5" style="--category-badge-color: #8C6238; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="Proxy and VPN service for Russian censorship circumvention, discussion and official support forum. Обсуждение работы сервиса обхода блокировок России АнтиЗапрет. Новости, уведомления о проблемах и помощь в настройке."><span class="badge-category__name">antizapret.prostovpn.org</span></span></a>
  </div>
  <blockquote>
    Я потестировал ещё и вот что удалось выяснить. 
Да, действительно провайдер вклинивался в сессию - но я потом вспомнил, это было и раньше. 
Дело в том, что наш тест некорректен - при тестировании на сайте, заблокированном РКН, будем всегда получать отлуп в независимости от типа прокси: HTTP/HTTPS (SOCKS не пробовал). 
Это было и с моей проксей. 
Корректный тест - на сайте, заблокированном извне для России. Например, <a href="http://wise.com" rel="noopener nofollow ugc">wise.com</a>. 
Для него любая HTTPS прокся из публичного списка начинает работать, Н…
  </blockquote>
</aside>

<p>Вы можете проверить с сайтом <a href="http://wise.com" rel="noopener nofollow ugc">wise.com</a>?</p></td><td>2023-08-19T22:12:54.256Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>В исключения сайт добавил.</p>
<p><img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/7a4dbfb0b9d89afb80d9fde8ac20f72604552afb.png" alt="ac-http-wise-com" data-base62-sha1="hrWPiyWZVV5pHfSijSzrk5rOHCr" width="662" height="474"><br>
<img src="добавление-сайтов-самостоятельно-блокирующих-доступ-пользователям-из-россии-5358/fcc62c0a851c45890153668e496f1eec6edbf9c5.png" alt="ac-http-wise-com-exception" data-base62-sha1="A48U3FFZPDGkj7P8I72dUgCjnO5" width="647" height="350"></p></td><td>2023-08-19T22:22:29.614Z</td></tr><tr><td>bam</td><td><p>Согласен, что-то не так.<br>
Я вам ответил в ЛС, давайте попробуем с моей проксей.</p></td><td>2023-08-19T22:38:58.326Z</td></tr><tr><td>bam</td><td><p>Всё заработало, спасибо.</p></td><td>2023-08-20T00:17:27.973Z</td></tr>
    </table>
      </body>
    </html>