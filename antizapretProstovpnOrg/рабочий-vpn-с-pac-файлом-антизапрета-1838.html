
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>
    th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      word-wrap: break-word;
      padding: 5px;
    }
    table {
      width: 100%;
      max-width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word
    }
    code {
      word-wrap: break-word;
    }
    pre {
        white-space: pre-wrap;
    }
    </style>
        <title>рабочий-vpn-с-pac-файлом-антизапрета-1838</title>
      </head>
      <body>
        <table border="1" width="100%" cellpadding="5">
          <tr>
            <th style="width: 10%;">Ник</th>
            <th>Пост</th>
            <th style="width: 10%;">Дата</th>
          </tr>
    <tr><td>birykvlad</td><td><p>В связи с тем что это поломало интернет окончательно массовыми блокировками, возникает важный вопрос. На рабочем ПК для доступа к ресурсам используется рабочий VPN через OpenVPN. Заблокированные сайты при этом не открываются, что логично.<br>
Возможно ли одновременно использовать Антизапрет с рабочим VPN? Как правильно это совместить?<br>
Использую обычно pac-файл в настройках Firefox, но при таком дуэте страницы вообще перестают загружаться.</p></td><td>2022-03-04T20:42:21.895Z</td></tr><tr><td>ValdikSS</td><td><p>Если у вас используется не «чистый» VPN, а какой-то комбинированный вариант, или шифрованный прокси, то, вероятно, PAC-файл не будет работать: браузеры не рассчитаны на работу через несколько прокси-серверов.<br>
При использовании обычных прокси или VPN АнтиЗапрет должен работать как через PAC-файл, так и через VPN. Для VPN-варианта нужно убедиться, что используется прокси-сервер внутри VPN-соединения АнтиЗапрета, с любым другим заблокированные сайты открываться не будут.</p></td><td>2022-03-05T09:16:57.941Z</td></tr><tr><td>ilyaigpetrov(ilyaigpetrov)</td><td><p>Если у вас есть прокси, который используется внутри вашего VPN для выхода в Интернет, то его можно прописать в расширении в настройке “Подменять DIRECT на”.</p></td><td>2022-03-05T09:30:55.000Z</td></tr><tr><td>birykvlad</td><td><p>А как узнать “чистый” у меня рабочий VPN или нет? Но раз страницы не открываются, значит он не “чистый”.</p></td><td>2022-03-05T10:03:30.816Z</td></tr><tr><td>ValdikSS</td><td><p>Если это какой-то обычный стандартизированный протокол, вроде IPsec или OpenVPN, то это «чистый» VPN. Если это навороченная программа, которая не только управляет VPN-подключением, но еще и, например, проверяет компьютер, нестандартно аутентифицирует, имеет настройки маршрутизируемых доменов, то, с большой вероятностью, она более инвазивна, недежели обычный VPN, и может изменять системные настройки прокси, терминировать соединения на себя для применения различных фильтров, и т.п.</p>
<p>VPN АнтиЗапрета у вас работает? Если работает, используйте его.</p></td><td>2022-03-05T10:13:06.245Z</td></tr><tr><td>birykvlad</td><td><p>Для подключения рабочего VPN используется конфиг в OpenVPN. Так что вроде все по стандарту. Единственный момент: чтобы подключение завершилось успешно, нужно подтвердить на мобилке через мультифактор что это я подключаюсь. То есть некая дополнительная защита. Но к самому соединению это не относится, как я понял.<br>
Всегда использовал pac-файл, который указывал в настройках самого браузера и все работало нормально (на другом месте работы с другим VPN, тоже через OpenVPN).<br>
Если буду использовать конфиг Антизапрета для OpenVPN, разве я смогу совместить два подключения одновременно?</p></td><td>2022-03-05T10:22:25.643Z</td></tr><tr><td>ValdikSS</td><td><p>Что происходит, когда вы прописываете PAC-файл, а затем подключаетесь через VPN? Откройте F12 в браузере, перейдите во вкладку Network, посмотрите результат.<br>
Если даже незаблокированные сайты не открываются, варианта два: либо в вашем VPN неполноценный DNS, работающий не по стандарту, из-за чего возникает задержка при DNS-резолвинге, либо у вас используется какой-то дополнительный прокси для выхода в интернет.</p>
<p>Попробуйте сменить DNS-сервер, для начала. Также отключите DNS over HTTPS в браузере, если он включён.</p></td><td>2022-03-05T10:36:02.763Z</td></tr><tr><td>birykvlad</td><td><p>Все это время проверял, перед ответом. Но ситуация крайне разная всегда:</p>
<ul>
<li>страницы той же Медузы (доступ к которой заблокирован РКН) открываются без проблем при таком комплексе мер (рабочий VPN + pac-файл Антизапрета в настройках браузера)</li>
<li>страницы очень медленно открываются любые</li>
<li>не открываются, отваливается по тайм-ауту.</li>
</ul>
<blockquote>
<p>Также отключите DNS over HTTPS в браузере, если он включён</p>
</blockquote>
<p>выключен всегда</p>
<blockquote>
<p>Попробуйте сменить DNS-сервер, для начала</p>
</blockquote>
<p>извиняюсь за глупый вопрос, но менять его нужно у основного беспроводного адаптера (работаю по Wi-Fi всегда) или у адаптера VPN? У последнего уже свой DNS прописан в свойствах TCP/IPv4</p>
<blockquote>
<p>Что происходит, когда вы прописываете PAC-файл, а затем подключаетесь через VPN? Откройте F12 в браузере, перейдите во вкладку Network, посмотрите результат.</p>
</blockquote>
<p>Именно в такой последовательности делать? Просто подключение VPN никак в браузере не отобразится, в его консоли</p></td><td>2022-03-10T14:27:36.007Z</td></tr><tr><td>ValdikSS</td><td><p>Так, попробуйте в оба конфигурационных файла OpenVPN (и вашего рабочего, и АнтиЗапрета) добавить следующую строку:</p>
<pre><code class="lang-auto">pull-filter ignore block-outside-dns
</code></pre>
<p>И убедитесь, что в конфигурации рабочего подключения нет строки:</p>
<pre><code class="lang-auto">block-outside-dns
</code></pre>
<p>Если это не поможет, необходимо будет сделать <a href="https://github.com/ValdikSS/GoodbyeDPI/wiki/%D0%9A%D0%B0%D0%BA-%D1%81%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C-%D0%B4%D0%B0%D0%BC%D0%BF-%D1%82%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0-%D0%B2-Wireshark">дамп трафика через Wireshark</a> (без GoodbyeDPI).</p></td><td>2022-03-10T16:01:07.405Z</td></tr><tr><td>birykvlad</td><td><blockquote>
<p>попробуйте в оба конфигурационных файла OpenVPN (и вашего рабочего, и АнтиЗапрета) добавить следующую строку</p>
</blockquote>
<p>попробовал. Подключился одновременно к двум конфигам после редактирования. Обычные сайты открываются, Медуза (проверял на ней) нет. То есть теперь заблокированные сайты вообще перестали открываться</p>
<blockquote>
<p>И убедитесь, что в конфигурации рабочего подключения нет строки:</p>
</blockquote>
<p>такой строки не было</p>
<blockquote>
<p>Если это не поможет, необходимо будет сделать дамп трафика через Wireshark</p>
</blockquote>
<p>да, придется делать. На днях сделаю и выложу его сюда.</p></td><td>2022-03-10T16:54:49.140Z</td></tr>
    </table>
      </body>
    </html>