[
    {
        "id": 13026,
        "name": "",
        "username": "Ratio",
        "avatar_template": "/user_avatar/ntc.party/ratio/{size}/1938_2.png",
        "created_at": "2023-04-09T16:14:22.282Z",
        "cooked": "<pre><code class=\"lang-auto\">$ dig +noall +answer @192.168.104.1 yt3.ggpht.com\nyt3.ggpht.com.\t\t4701\tIN\tCNAME\tphotos-ugc.l.googleusercontent.com.\nphotos-ugc.l.googleusercontent.com. 280\tIN A\t10.224.41.29\n$ dig +noall +answer @192.168.104.1 photos-ugc.l.googleusercontent.com\nphotos-ugc.l.googleusercontent.com. 159\tIN A\t142.250.179.97\n</code></pre>\n<p>DNS сервер отдаёт разные IP адреса для одного и того же по сути домена.</p>\n<p>Проблема становится заметной при использовании кеширующего DNS, например systemd-resolved (де факто стандарт в ubuntu/debian). A запись протухает быстрее, чем CNAME, поэтому повторно запрашивается только она, и возвращается заблокированный IP адрес.</p>\n<p>В данном конкретном случае перестают грузиться иконки на youtube, после перезапуска VPN они какое-то время отображаются, потом опять перестают отображаться.</p>\n<p>Как это должно работать (по моему мнению, возможно приведёт к прогону лишнего трафика через VPN):</p>\n<ol>\n<li>Должен храниться словарь всех переназначений IP адресов.</li>\n<li>Для любого домена нужно проверять наличие IP в этом словаре. И если IP уже был переназначен, то для данного домена тоже нужно заменить IP адрес.</li>\n</ol>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2023-04-09T16:27:32.984Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 19,
        "reads": 85,
        "readers_count": 84,
        "score": 117.0,
        "yours": false,
        "topic_id": 4224,
        "topic_slug": "%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BD%D0%B5-%D0%B0%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D0%B7%D1%83%D0%B5%D1%82%D1%81%D1%8F-%D0%BF%D0%BE%D1%87%D1%82%D0%B0-aolcom/3899/6",
                "internal": true,
                "reflection": true,
                "title": "Не авторизуется почта aol.com",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1617,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns/4224/1",
        "can_translate": false
    },
    {
        "id": 13841,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2023-05-18T15:17:21.455Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"Ratio\" data-post=\"1\" data-topic=\"4224\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://ntc.party/user_avatar/ntc.party/ratio/48/1938_2.png\" class=\"avatar\"> Ratio:</div>\n<blockquote>\n<p>Для любого домена нужно проверять наличие IP в этом словаре. И если IP уже был переназначен, то для данного домена тоже нужно заменить IP адрес.</p>\n</blockquote>\n</aside>\n<p>Тогда это ничем не будет отличаться от просто фиксированной замены одного адреса на другого, что приведёт к проксированию по IP-адресам, а не доменам.</p>\n<p>Не знаю, как лучше решить эту проблему, но подумаю.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2023-05-18T15:17:21.455Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 69,
        "readers_count": 68,
        "score": 13.8,
        "yours": false,
        "topic_id": 4224,
        "topic_slug": "%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns/4224/2",
        "can_translate": false
    },
    {
        "id": 13901,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2023-05-20T19:27:36.993Z",
        "cooked": "<p>Сделал удаление CNAME из ответа на A-запрос и перезапись домена CNAME’а на запрашиваемый домен.</p>\n<p>Может, поможет, а может и не решит проблему полностью, так как в случае CNAME’а при других запросах (не-A) он не убирается, и умный кеширующий резолвер, наверное, может всё равно продолжать его использовать.<br>\nОднако, как я полагаю, резолвер делает только A/AAAA/HTTPS-запросы при типичном браузинге сайтов, а все эти случаи должны работать корректно.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2023-05-20T19:27:36.993Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 66,
        "readers_count": 65,
        "score": 23.2,
        "yours": false,
        "topic_id": 4224,
        "topic_slug": "%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D0%BD%D0%B5-%D0%B0%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D0%B7%D1%83%D0%B5%D1%82%D1%81%D1%8F-%D0%BF%D0%BE%D1%87%D1%82%D0%B0-aolcom/3899/7",
                "internal": true,
                "reflection": true,
                "title": "Не авторизуется почта aol.com",
                "clicks": 2
            },
            {
                "url": "https://ntc.party/t/%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-cname/8059",
                "internal": true,
                "reflection": true,
                "title": "Удаление CNAME",
                "clicks": 0
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "post_url": "/t/%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns/4224/3",
        "can_translate": false
    },
    {
        "id": 26932,
        "name": null,
        "username": "ValdikSS",
        "avatar_template": "/user_avatar/ntc.party/valdikss/{size}/2_2.png",
        "created_at": "2024-07-12T14:36:01.383Z",
        "cooked": "<p>A post was split to a new topic: <a href=\"/t/%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-cname/8059\">Удаление CNAME</a></p>",
        "post_number": 4,
        "post_type": 3,
        "posts_count": 4,
        "updated_at": "2024-07-12T14:36:01.383Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 38,
        "readers_count": 37,
        "score": 7.6,
        "yours": false,
        "topic_id": 4224,
        "topic_slug": "%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
            {
                "url": "https://ntc.party/t/%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-cname/8059",
                "internal": true,
                "reflection": false,
                "title": "Удаление CNAME",
                "clicks": 1
            }
        ],
        "read": true,
        "user_title": "AntiZapret staff",
        "title_is_group": false,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 1,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": false,
        "wiki": false,
        "action_code": "split_topic",
        "post_url": "/t/%D0%BD%D0%B5%D0%BA%D0%BE%D0%BD%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-dns/4224/4",
        "can_translate": false
    }
]